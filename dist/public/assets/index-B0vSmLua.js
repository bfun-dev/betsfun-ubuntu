const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C8jqSig9.js","assets/objectSpread2-ptbpwmsP.js","assets/index-yNUjIv7O.js","assets/index-DOyEvAJ9.css","assets/index.browser.esm-CTSctdt-.js","assets/auto-track-CcWRkuEq.js","assets/index-Mn8Tp5qd.js","assets/index-DSGJ3dfg.js","assets/is-plan-event-enabled-DS1Agtkw.js","assets/index-UhG_-a69.js","assets/index-BuSSWMy4.js","assets/index-RFp_BNDJ.js","assets/index-BhZpQq1l.js","assets/secp256k1-Y93CWhDZ.js","assets/ccip-u_qtDSE4.js"])))=>i.map(i=>d[i]);
var fY=Object.defineProperty;var pY=(t,e,n)=>e in t?fY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var no=(t,e,n)=>pY(t,typeof e!="symbol"?e+"":e,n);import{_ as Q,a as re}from"./objectSpread2-ptbpwmsP.js";import{f as vt,g as Wi,b as xt,h as qd,i as sa,c as Ie,j as hR,d as o0,_ as tt,a as nt,e as bR,k as hY,r as he,l as ne,m as bY}from"./index-yNUjIv7O.js";import{r as yR,s as yY,c as mY,H as gY,a as gS,u as wY,b as wS,d as vS,t as vY,e as u4,f as EY,g as mR,h as _Y,i as TY,j as xY,k as SY,l as AY,v as Uc,m as ES,P as CY,V as IY,n as OY,o as MY,p as PY}from"./index.browser.esm-CTSctdt-.js";function kY(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function f4(t,e){return f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},f4(t,e)}function NY(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,f4(t,e)}function Ua(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iE(t,e){if(t==null)return{};var n,r,a=kY(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var C6={},ry={};Object.defineProperty(ry,"__esModule",{value:!0});ry.crypto=void 0;ry.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;(function(t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(t,"__esModule",{value:!0}),t.wrapXOFConstructorWithOpts=t.wrapConstructorWithOpts=t.wrapConstructor=t.Hash=t.nextTick=t.swap32IfBE=t.byteSwapIfBE=t.swap8IfBE=t.isLE=void 0,t.isBytes=n,t.anumber=r,t.abytes=a,t.ahash=i,t.aexists=s,t.aoutput=o,t.u8=c,t.u32=d,t.clean=l,t.createView=u,t.rotr=f,t.rotl=p,t.byteSwap=h,t.byteSwap32=b,t.bytesToHex=T,t.hexToBytes=R,t.asyncLoop=F,t.utf8ToBytes=I,t.bytesToUtf8=P,t.toBytes=$,t.kdfInputToBytes=M,t.concatBytes=y,t.checkOpts=E,t.createHasher=g,t.createOptHasher=x,t.createXOFer=O,t.randomBytes=S;const e=ry;function n(w){return w instanceof Uint8Array||ArrayBuffer.isView(w)&&w.constructor.name==="Uint8Array"}function r(w){if(!Number.isSafeInteger(w)||w<0)throw new Error("positive integer expected, got "+w)}function a(w,..._){if(!n(w))throw new Error("Uint8Array expected");if(_.length>0&&!_.includes(w.length))throw new Error("Uint8Array expected of length "+_+", got length="+w.length)}function i(w){if(typeof w!="function"||typeof w.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");r(w.outputLen),r(w.blockLen)}function s(w,_=!0){if(w.destroyed)throw new Error("Hash instance has been destroyed");if(_&&w.finished)throw new Error("Hash#digest() has already been called")}function o(w,_){a(w);const k=_.outputLen;if(w.length<k)throw new Error("digestInto() expects output buffer of length at least "+k)}function c(w){return new Uint8Array(w.buffer,w.byteOffset,w.byteLength)}function d(w){return new Uint32Array(w.buffer,w.byteOffset,Math.floor(w.byteLength/4))}function l(...w){for(let _=0;_<w.length;_++)w[_].fill(0)}function u(w){return new DataView(w.buffer,w.byteOffset,w.byteLength)}function f(w,_){return w<<32-_|w>>>_}function p(w,_){return w<<_|w>>>32-_>>>0}t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function h(w){return w<<24&4278190080|w<<8&16711680|w>>>8&65280|w>>>24&255}t.swap8IfBE=t.isLE?w=>w:w=>h(w),t.byteSwapIfBE=t.swap8IfBE;function b(w){for(let _=0;_<w.length;_++)w[_]=h(w[_]);return w}t.swap32IfBE=t.isLE?w=>w:b;const v=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",m=Array.from({length:256},(w,_)=>_.toString(16).padStart(2,"0"));function T(w){if(a(w),v)return w.toHex();let _="";for(let k=0;k<w.length;k++)_+=m[w[k]];return _}const A={_0:48,_9:57,A:65,F:70,a:97,f:102};function N(w){if(w>=A._0&&w<=A._9)return w-A._0;if(w>=A.A&&w<=A.F)return w-(A.A-10);if(w>=A.a&&w<=A.f)return w-(A.a-10)}function R(w){if(typeof w!="string")throw new Error("hex string expected, got "+typeof w);if(v)return Uint8Array.fromHex(w);const _=w.length,k=_/2;if(_%2)throw new Error("hex string expected, got unpadded hex of length "+_);const L=new Uint8Array(k);for(let D=0,U=0;D<k;D++,U+=2){const j=N(w.charCodeAt(U)),H=N(w.charCodeAt(U+1));if(j===void 0||H===void 0){const W=w[U]+w[U+1];throw new Error('hex string expected, got non-hex character "'+W+'" at index '+U)}L[D]=j*16+H}return L}const B=async()=>{};t.nextTick=B;async function F(w,_,k){let L=Date.now();for(let D=0;D<w;D++){k(D);const U=Date.now()-L;U>=0&&U<_||(await(0,t.nextTick)(),L+=U)}}function I(w){if(typeof w!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(w))}function P(w){return new TextDecoder().decode(w)}function $(w){return typeof w=="string"&&(w=I(w)),a(w),w}function M(w){return typeof w=="string"&&(w=I(w)),a(w),w}function y(...w){let _=0;for(let L=0;L<w.length;L++){const D=w[L];a(D),_+=D.length}const k=new Uint8Array(_);for(let L=0,D=0;L<w.length;L++){const U=w[L];k.set(U,D),D+=U.length}return k}function E(w,_){if(_!==void 0&&{}.toString.call(_)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(w,_)}class C{}t.Hash=C;function g(w){const _=L=>w().update($(L)).digest(),k=w();return _.outputLen=k.outputLen,_.blockLen=k.blockLen,_.create=()=>w(),_}function x(w){const _=(L,D)=>w(D).update($(L)).digest(),k=w({});return _.outputLen=k.outputLen,_.blockLen=k.blockLen,_.create=L=>w(L),_}function O(w){const _=(L,D)=>w(D).update($(L)).digest(),k=w({});return _.outputLen=k.outputLen,_.blockLen=k.blockLen,_.create=L=>w(L),_}t.wrapConstructor=g,t.wrapConstructorWithOpts=x,t.wrapXOFConstructorWithOpts=O;function S(w=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(w));if(e.crypto&&typeof e.crypto.randomBytes=="function")return Uint8Array.from(e.crypto.randomBytes(w));throw new Error("crypto.getRandomValues must be defined")}})(C6);var ay={},Pt={},Kd=gR;function gR(t,e){if(!t)throw new Error(e||"Assertion failed")}gR.equal=function(e,n,r){if(e!=n)throw new Error(r||"Assertion failed: "+e+" != "+n)};var p4={exports:{}};typeof Object.create=="function"?p4.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:p4.exports=function(e,n){if(n){e.super_=n;var r=function(){};r.prototype=n.prototype,e.prototype=new r,e.prototype.constructor=e}};var Gi=p4.exports,RY=Kd,DY=Gi;Pt.inherits=DY;function $Y(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function LY(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),a=0;a<t.length;a+=2)n.push(parseInt(t[a]+t[a+1],16))}else for(var r=0,a=0;a<t.length;a++){var i=t.charCodeAt(a);i<128?n[r++]=i:i<2048?(n[r++]=i>>6|192,n[r++]=i&63|128):$Y(t,a)?(i=65536+((i&1023)<<10)+(t.charCodeAt(++a)&1023),n[r++]=i>>18|240,n[r++]=i>>12&63|128,n[r++]=i>>6&63|128,n[r++]=i&63|128):(n[r++]=i>>12|224,n[r++]=i>>6&63|128,n[r++]=i&63|128)}else for(a=0;a<t.length;a++)n[a]=t[a]|0;return n}Pt.toArray=LY;function BY(t){for(var e="",n=0;n<t.length;n++)e+=vR(t[n].toString(16));return e}Pt.toHex=BY;function wR(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}Pt.htonl=wR;function FY(t,e){for(var n="",r=0;r<t.length;r++){var a=t[r];e==="little"&&(a=wR(a)),n+=ER(a.toString(16))}return n}Pt.toHex32=FY;function vR(t){return t.length===1?"0"+t:t}Pt.zero2=vR;function ER(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}Pt.zero8=ER;function UY(t,e,n,r){var a=n-e;RY(a%4===0);for(var i=new Array(a/4),s=0,o=e;s<i.length;s++,o+=4){var c;r==="big"?c=t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3]:c=t[o+3]<<24|t[o+2]<<16|t[o+1]<<8|t[o],i[s]=c>>>0}return i}Pt.join32=UY;function jY(t,e){for(var n=new Array(t.length*4),r=0,a=0;r<t.length;r++,a+=4){var i=t[r];e==="big"?(n[a]=i>>>24,n[a+1]=i>>>16&255,n[a+2]=i>>>8&255,n[a+3]=i&255):(n[a+3]=i>>>24,n[a+2]=i>>>16&255,n[a+1]=i>>>8&255,n[a]=i&255)}return n}Pt.split32=jY;function HY(t,e){return t>>>e|t<<32-e}Pt.rotr32=HY;function zY(t,e){return t<<e|t>>>32-e}Pt.rotl32=zY;function qY(t,e){return t+e>>>0}Pt.sum32=qY;function KY(t,e,n){return t+e+n>>>0}Pt.sum32_3=KY;function VY(t,e,n,r){return t+e+n+r>>>0}Pt.sum32_4=VY;function WY(t,e,n,r,a){return t+e+n+r+a>>>0}Pt.sum32_5=WY;function GY(t,e,n,r){var a=t[e],i=t[e+1],s=r+i>>>0,o=(s<r?1:0)+n+a;t[e]=o>>>0,t[e+1]=s}Pt.sum64=GY;function YY(t,e,n,r){var a=e+r>>>0,i=(a<e?1:0)+t+n;return i>>>0}Pt.sum64_hi=YY;function JY(t,e,n,r){var a=e+r;return a>>>0}Pt.sum64_lo=JY;function ZY(t,e,n,r,a,i,s,o){var c=0,d=e;d=d+r>>>0,c+=d<e?1:0,d=d+i>>>0,c+=d<i?1:0,d=d+o>>>0,c+=d<o?1:0;var l=t+n+a+s+c;return l>>>0}Pt.sum64_4_hi=ZY;function XY(t,e,n,r,a,i,s,o){var c=e+r+i+o;return c>>>0}Pt.sum64_4_lo=XY;function QY(t,e,n,r,a,i,s,o,c,d){var l=0,u=e;u=u+r>>>0,l+=u<e?1:0,u=u+i>>>0,l+=u<i?1:0,u=u+o>>>0,l+=u<o?1:0,u=u+d>>>0,l+=u<d?1:0;var f=t+n+a+s+c+l;return f>>>0}Pt.sum64_5_hi=QY;function eJ(t,e,n,r,a,i,s,o,c,d){var l=e+r+i+o+d;return l>>>0}Pt.sum64_5_lo=eJ;function tJ(t,e,n){var r=e<<32-n|t>>>n;return r>>>0}Pt.rotr64_hi=tJ;function nJ(t,e,n){var r=t<<32-n|e>>>n;return r>>>0}Pt.rotr64_lo=nJ;function rJ(t,e,n){return t>>>n}Pt.shr64_hi=rJ;function aJ(t,e,n){var r=t<<32-n|e>>>n;return r>>>0}Pt.shr64_lo=aJ;var du={},_S=Pt,iJ=Kd;function iy(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}du.BlockHash=iy;iy.prototype.update=function(e,n){if(e=_S.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var r=e.length%this._delta8;this.pending=e.slice(e.length-r,e.length),this.pending.length===0&&(this.pending=null),e=_S.join32(e,0,e.length-r,this.endian);for(var a=0;a<e.length;a+=this._delta32)this._update(e,a,a+this._delta32)}return this};iy.prototype.digest=function(e){return this.update(this._pad()),iJ(this.pending===null),this._digest(e)};iy.prototype._pad=function(){var e=this.pendingTotal,n=this._delta8,r=n-(e+this.padLength)%n,a=new Array(r+this.padLength);a[0]=128;for(var i=1;i<r;i++)a[i]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)a[i++]=0;a[i++]=0,a[i++]=0,a[i++]=0,a[i++]=0,a[i++]=e>>>24&255,a[i++]=e>>>16&255,a[i++]=e>>>8&255,a[i++]=e&255}else for(a[i++]=e&255,a[i++]=e>>>8&255,a[i++]=e>>>16&255,a[i++]=e>>>24&255,a[i++]=0,a[i++]=0,a[i++]=0,a[i++]=0,s=8;s<this.padLength;s++)a[i++]=0;return a};var lu={},Ws={},sJ=Pt,Cs=sJ.rotr32;function oJ(t,e,n,r){if(t===0)return _R(e,n,r);if(t===1||t===3)return xR(e,n,r);if(t===2)return TR(e,n,r)}Ws.ft_1=oJ;function _R(t,e,n){return t&e^~t&n}Ws.ch32=_R;function TR(t,e,n){return t&e^t&n^e&n}Ws.maj32=TR;function xR(t,e,n){return t^e^n}Ws.p32=xR;function cJ(t){return Cs(t,2)^Cs(t,13)^Cs(t,22)}Ws.s0_256=cJ;function dJ(t){return Cs(t,6)^Cs(t,11)^Cs(t,25)}Ws.s1_256=dJ;function lJ(t){return Cs(t,7)^Cs(t,18)^t>>>3}Ws.g0_256=lJ;function uJ(t){return Cs(t,17)^Cs(t,19)^t>>>10}Ws.g1_256=uJ;var I6=Pt,fJ=du,pJ=Ws,um=I6.rotl32,rf=I6.sum32,hJ=I6.sum32_5,bJ=pJ.ft_1,SR=fJ.BlockHash,yJ=[1518500249,1859775393,2400959708,3395469782];function $s(){if(!(this instanceof $s))return new $s;SR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}I6.inherits($s,SR);var mJ=$s;$s.blockSize=512;$s.outSize=160;$s.hmacStrength=80;$s.padLength=64;$s.prototype._update=function(e,n){for(var r=this.W,a=0;a<16;a++)r[a]=e[n+a];for(;a<r.length;a++)r[a]=um(r[a-3]^r[a-8]^r[a-14]^r[a-16],1);var i=this.h[0],s=this.h[1],o=this.h[2],c=this.h[3],d=this.h[4];for(a=0;a<r.length;a++){var l=~~(a/20),u=hJ(um(i,5),bJ(l,s,o,c),d,r[a],yJ[l]);d=c,c=o,o=um(s,30),s=i,i=u}this.h[0]=rf(this.h[0],i),this.h[1]=rf(this.h[1],s),this.h[2]=rf(this.h[2],o),this.h[3]=rf(this.h[3],c),this.h[4]=rf(this.h[4],d)};$s.prototype._digest=function(e){return e==="hex"?I6.toHex32(this.h,"big"):I6.split32(this.h,"big")};var O6=Pt,gJ=du,uu=Ws,wJ=Kd,Ei=O6.sum32,vJ=O6.sum32_4,EJ=O6.sum32_5,_J=uu.ch32,TJ=uu.maj32,xJ=uu.s0_256,SJ=uu.s1_256,AJ=uu.g0_256,CJ=uu.g1_256,AR=gJ.BlockHash,IJ=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ls(){if(!(this instanceof Ls))return new Ls;AR.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=IJ,this.W=new Array(64)}O6.inherits(Ls,AR);var CR=Ls;Ls.blockSize=512;Ls.outSize=256;Ls.hmacStrength=192;Ls.padLength=64;Ls.prototype._update=function(e,n){for(var r=this.W,a=0;a<16;a++)r[a]=e[n+a];for(;a<r.length;a++)r[a]=vJ(CJ(r[a-2]),r[a-7],AJ(r[a-15]),r[a-16]);var i=this.h[0],s=this.h[1],o=this.h[2],c=this.h[3],d=this.h[4],l=this.h[5],u=this.h[6],f=this.h[7];for(wJ(this.k.length===r.length),a=0;a<r.length;a++){var p=EJ(f,SJ(d),_J(d,l,u),this.k[a],r[a]),h=Ei(xJ(i),TJ(i,s,o));f=u,u=l,l=d,d=Ei(c,p),c=o,o=s,s=i,i=Ei(p,h)}this.h[0]=Ei(this.h[0],i),this.h[1]=Ei(this.h[1],s),this.h[2]=Ei(this.h[2],o),this.h[3]=Ei(this.h[3],c),this.h[4]=Ei(this.h[4],d),this.h[5]=Ei(this.h[5],l),this.h[6]=Ei(this.h[6],u),this.h[7]=Ei(this.h[7],f)};Ls.prototype._digest=function(e){return e==="hex"?O6.toHex32(this.h,"big"):O6.split32(this.h,"big")};var h4=Pt,IR=CR;function zo(){if(!(this instanceof zo))return new zo;IR.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}h4.inherits(zo,IR);var OJ=zo;zo.blockSize=512;zo.outSize=224;zo.hmacStrength=192;zo.padLength=64;zo.prototype._digest=function(e){return e==="hex"?h4.toHex32(this.h.slice(0,7),"big"):h4.split32(this.h.slice(0,7),"big")};var na=Pt,MJ=du,PJ=Kd,Is=na.rotr64_hi,Os=na.rotr64_lo,OR=na.shr64_hi,MR=na.shr64_lo,cc=na.sum64,fm=na.sum64_hi,pm=na.sum64_lo,kJ=na.sum64_4_hi,NJ=na.sum64_4_lo,RJ=na.sum64_5_hi,DJ=na.sum64_5_lo,PR=MJ.BlockHash,$J=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ui(){if(!(this instanceof Ui))return new Ui;PR.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=$J,this.W=new Array(160)}na.inherits(Ui,PR);var kR=Ui;Ui.blockSize=1024;Ui.outSize=512;Ui.hmacStrength=192;Ui.padLength=128;Ui.prototype._prepareBlock=function(e,n){for(var r=this.W,a=0;a<32;a++)r[a]=e[n+a];for(;a<r.length;a+=2){var i=WJ(r[a-4],r[a-3]),s=GJ(r[a-4],r[a-3]),o=r[a-14],c=r[a-13],d=KJ(r[a-30],r[a-29]),l=VJ(r[a-30],r[a-29]),u=r[a-32],f=r[a-31];r[a]=kJ(i,s,o,c,d,l,u,f),r[a+1]=NJ(i,s,o,c,d,l,u,f)}};Ui.prototype._update=function(e,n){this._prepareBlock(e,n);var r=this.W,a=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],c=this.h[4],d=this.h[5],l=this.h[6],u=this.h[7],f=this.h[8],p=this.h[9],h=this.h[10],b=this.h[11],v=this.h[12],m=this.h[13],T=this.h[14],A=this.h[15];PJ(this.k.length===r.length);for(var N=0;N<r.length;N+=2){var R=T,B=A,F=zJ(f,p),I=qJ(f,p),P=LJ(f,p,h,b,v),$=BJ(f,p,h,b,v,m),M=this.k[N],y=this.k[N+1],E=r[N],C=r[N+1],g=RJ(R,B,F,I,P,$,M,y,E,C),x=DJ(R,B,F,I,P,$,M,y,E,C);R=jJ(a,i),B=HJ(a,i),F=FJ(a,i,s,o,c),I=UJ(a,i,s,o,c,d);var O=fm(R,B,F,I),S=pm(R,B,F,I);T=v,A=m,v=h,m=b,h=f,b=p,f=fm(l,u,g,x),p=pm(u,u,g,x),l=c,u=d,c=s,d=o,s=a,o=i,a=fm(g,x,O,S),i=pm(g,x,O,S)}cc(this.h,0,a,i),cc(this.h,2,s,o),cc(this.h,4,c,d),cc(this.h,6,l,u),cc(this.h,8,f,p),cc(this.h,10,h,b),cc(this.h,12,v,m),cc(this.h,14,T,A)};Ui.prototype._digest=function(e){return e==="hex"?na.toHex32(this.h,"big"):na.split32(this.h,"big")};function LJ(t,e,n,r,a){var i=t&n^~t&a;return i<0&&(i+=4294967296),i}function BJ(t,e,n,r,a,i){var s=e&r^~e&i;return s<0&&(s+=4294967296),s}function FJ(t,e,n,r,a){var i=t&n^t&a^n&a;return i<0&&(i+=4294967296),i}function UJ(t,e,n,r,a,i){var s=e&r^e&i^r&i;return s<0&&(s+=4294967296),s}function jJ(t,e){var n=Is(t,e,28),r=Is(e,t,2),a=Is(e,t,7),i=n^r^a;return i<0&&(i+=4294967296),i}function HJ(t,e){var n=Os(t,e,28),r=Os(e,t,2),a=Os(e,t,7),i=n^r^a;return i<0&&(i+=4294967296),i}function zJ(t,e){var n=Is(t,e,14),r=Is(t,e,18),a=Is(e,t,9),i=n^r^a;return i<0&&(i+=4294967296),i}function qJ(t,e){var n=Os(t,e,14),r=Os(t,e,18),a=Os(e,t,9),i=n^r^a;return i<0&&(i+=4294967296),i}function KJ(t,e){var n=Is(t,e,1),r=Is(t,e,8),a=OR(t,e,7),i=n^r^a;return i<0&&(i+=4294967296),i}function VJ(t,e){var n=Os(t,e,1),r=Os(t,e,8),a=MR(t,e,7),i=n^r^a;return i<0&&(i+=4294967296),i}function WJ(t,e){var n=Is(t,e,19),r=Is(e,t,29),a=OR(t,e,6),i=n^r^a;return i<0&&(i+=4294967296),i}function GJ(t,e){var n=Os(t,e,19),r=Os(e,t,29),a=MR(t,e,6),i=n^r^a;return i<0&&(i+=4294967296),i}var b4=Pt,NR=kR;function qo(){if(!(this instanceof qo))return new qo;NR.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}b4.inherits(qo,NR);var YJ=qo;qo.blockSize=1024;qo.outSize=384;qo.hmacStrength=192;qo.padLength=128;qo.prototype._digest=function(e){return e==="hex"?b4.toHex32(this.h.slice(0,12),"big"):b4.split32(this.h.slice(0,12),"big")};lu.sha1=mJ;lu.sha224=OJ;lu.sha256=CR;lu.sha384=YJ;lu.sha512=kR;var RR={},Td=Pt,JJ=du,Sh=Td.rotl32,TS=Td.sum32,af=Td.sum32_3,xS=Td.sum32_4,DR=JJ.BlockHash;function Bs(){if(!(this instanceof Bs))return new Bs;DR.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Td.inherits(Bs,DR);RR.ripemd160=Bs;Bs.blockSize=512;Bs.outSize=160;Bs.hmacStrength=192;Bs.padLength=64;Bs.prototype._update=function(e,n){for(var r=this.h[0],a=this.h[1],i=this.h[2],s=this.h[3],o=this.h[4],c=r,d=a,l=i,u=s,f=o,p=0;p<80;p++){var h=TS(Sh(xS(r,SS(p,a,i,s),e[QJ[p]+n],ZJ(p)),tZ[p]),o);r=o,o=s,s=Sh(i,10),i=a,a=h,h=TS(Sh(xS(c,SS(79-p,d,l,u),e[eZ[p]+n],XJ(p)),nZ[p]),f),c=f,f=u,u=Sh(l,10),l=d,d=h}h=af(this.h[1],i,u),this.h[1]=af(this.h[2],s,f),this.h[2]=af(this.h[3],o,c),this.h[3]=af(this.h[4],r,d),this.h[4]=af(this.h[0],a,l),this.h[0]=h};Bs.prototype._digest=function(e){return e==="hex"?Td.toHex32(this.h,"little"):Td.split32(this.h,"little")};function SS(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function ZJ(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function XJ(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var QJ=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],eZ=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],tZ=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],nZ=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],rZ=Pt,aZ=Kd;function M6(t,e,n){if(!(this instanceof M6))return new M6(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(rZ.toArray(e,n))}var iZ=M6;M6.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),aZ(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};M6.prototype.update=function(e,n){return this.inner.update(e,n),this};M6.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=Pt,e.common=du,e.sha=lu,e.ripemd=RR,e.hmac=iZ,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(ay);var hm,AS;function sZ(){return AS||(AS=1,hm=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var a=42;e[n]=a;for(var i in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==a||o.enumerable!==!0)return!1}return!0}),hm}var $R=Object,oZ=Error,cZ=EvalError,dZ=RangeError,lZ=ReferenceError,LR=SyntaxError,sy=TypeError,uZ=URIError,fZ=Math.abs,pZ=Math.floor,hZ=Math.max,bZ=Math.min,yZ=Math.pow,mZ=Math.round,gZ=Number.isNaN||function(e){return e!==e},wZ=gZ,vZ=function(e){return wZ(e)||e===0?e:e<0?-1:1},EZ=Object.getOwnPropertyDescriptor,Lb=EZ;if(Lb)try{Lb([],"length")}catch{Lb=null}var oy=Lb,Bb=Object.defineProperty||!1;if(Bb)try{Bb({},"a",{value:1})}catch{Bb=!1}var cy=Bb,bm,CS;function _Z(){if(CS)return bm;CS=1;var t=typeof Symbol<"u"&&Symbol,e=sZ();return bm=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},bm}var ym,IS;function BR(){return IS||(IS=1,ym=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ym}var mm,OS;function FR(){if(OS)return mm;OS=1;var t=$R;return mm=t.getPrototypeOf||null,mm}var TZ="Function.prototype.bind called on incompatible ",xZ=Object.prototype.toString,SZ=Math.max,AZ="[object Function]",MS=function(e,n){for(var r=[],a=0;a<e.length;a+=1)r[a]=e[a];for(var i=0;i<n.length;i+=1)r[i+e.length]=n[i];return r},CZ=function(e,n){for(var r=[],a=n,i=0;a<e.length;a+=1,i+=1)r[i]=e[a];return r},IZ=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},OZ=function(e){var n=this;if(typeof n!="function"||xZ.apply(n)!==AZ)throw new TypeError(TZ+n);for(var r=CZ(arguments,1),a,i=function(){if(this instanceof a){var l=n.apply(this,MS(r,arguments));return Object(l)===l?l:this}return n.apply(e,MS(r,arguments))},s=SZ(0,n.length-r.length),o=[],c=0;c<s;c++)o[c]="$"+c;if(a=Function("binder","return function ("+IZ(o,",")+"){ return binder.apply(this,arguments); }")(i),n.prototype){var d=function(){};d.prototype=n.prototype,a.prototype=new d,d.prototype=null}return a},MZ=OZ,xp=Function.prototype.bind||MZ,sE=Function.prototype.call,oE=Function.prototype.apply,PZ=typeof Reflect<"u"&&Reflect&&Reflect.apply,kZ=xp,NZ=oE,RZ=sE,DZ=PZ,UR=DZ||kZ.call(RZ,NZ),$Z=xp,LZ=sy,BZ=sE,FZ=UR,cE=function(e){if(e.length<1||typeof e[0]!="function")throw new LZ("a function is required");return FZ($Z,BZ,e)},gm,PS;function UZ(){if(PS)return gm;PS=1;var t=cE,e=oy,n;try{n=[].__proto__===Array.prototype}catch(s){if(!s||typeof s!="object"||!("code"in s)||s.code!=="ERR_PROTO_ACCESS")throw s}var r=!!n&&e&&e(Object.prototype,"__proto__"),a=Object,i=a.getPrototypeOf;return gm=r&&typeof r.get=="function"?t([r.get]):typeof i=="function"?function(o){return i(o==null?o:a(o))}:!1,gm}var wm,kS;function jZ(){if(kS)return wm;kS=1;var t=BR(),e=FR(),n=UZ();return wm=t?function(a){return t(a)}:e?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return e(a)}:n?function(a){return n(a)}:null,wm}var vm,NS;function HZ(){if(NS)return vm;NS=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,n=xp;return vm=n.call(t,e),vm}var Ct,zZ=$R,qZ=oZ,KZ=cZ,VZ=dZ,WZ=lZ,P6=LR,s6=sy,GZ=uZ,YZ=fZ,JZ=pZ,ZZ=hZ,XZ=bZ,QZ=yZ,eX=mZ,tX=vZ,jR=Function,Em=function(t){try{return jR('"use strict"; return ('+t+").constructor;")()}catch{}},b5=oy,nX=cy,_m=function(){throw new s6},rX=b5?function(){try{return arguments.callee,_m}catch{try{return b5(arguments,"callee").get}catch{return _m}}}():_m,bl=_Z()(),w0=jZ(),aX=FR(),iX=BR(),HR=oE,Sp=sE,Ul={},sX=typeof Uint8Array>"u"||!w0?Ct:w0(Uint8Array),ld={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ct:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ct:ArrayBuffer,"%ArrayIteratorPrototype%":bl&&w0?w0([][Symbol.iterator]()):Ct,"%AsyncFromSyncIteratorPrototype%":Ct,"%AsyncFunction%":Ul,"%AsyncGenerator%":Ul,"%AsyncGeneratorFunction%":Ul,"%AsyncIteratorPrototype%":Ul,"%Atomics%":typeof Atomics>"u"?Ct:Atomics,"%BigInt%":typeof BigInt>"u"?Ct:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ct:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ct:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ct:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":qZ,"%eval%":eval,"%EvalError%":KZ,"%Float16Array%":typeof Float16Array>"u"?Ct:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Ct:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ct:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ct:FinalizationRegistry,"%Function%":jR,"%GeneratorFunction%":Ul,"%Int8Array%":typeof Int8Array>"u"?Ct:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ct:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ct:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":bl&&w0?w0(w0([][Symbol.iterator]())):Ct,"%JSON%":typeof JSON=="object"?JSON:Ct,"%Map%":typeof Map>"u"?Ct:Map,"%MapIteratorPrototype%":typeof Map>"u"||!bl||!w0?Ct:w0(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":zZ,"%Object.getOwnPropertyDescriptor%":b5,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ct:Promise,"%Proxy%":typeof Proxy>"u"?Ct:Proxy,"%RangeError%":VZ,"%ReferenceError%":WZ,"%Reflect%":typeof Reflect>"u"?Ct:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ct:Set,"%SetIteratorPrototype%":typeof Set>"u"||!bl||!w0?Ct:w0(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ct:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":bl&&w0?w0(""[Symbol.iterator]()):Ct,"%Symbol%":bl?Symbol:Ct,"%SyntaxError%":P6,"%ThrowTypeError%":rX,"%TypedArray%":sX,"%TypeError%":s6,"%Uint8Array%":typeof Uint8Array>"u"?Ct:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ct:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ct:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ct:Uint32Array,"%URIError%":GZ,"%WeakMap%":typeof WeakMap>"u"?Ct:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ct:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ct:WeakSet,"%Function.prototype.call%":Sp,"%Function.prototype.apply%":HR,"%Object.defineProperty%":nX,"%Object.getPrototypeOf%":aX,"%Math.abs%":YZ,"%Math.floor%":JZ,"%Math.max%":ZZ,"%Math.min%":XZ,"%Math.pow%":QZ,"%Math.round%":eX,"%Math.sign%":tX,"%Reflect.getPrototypeOf%":iX};if(w0)try{null.error}catch(t){var oX=w0(w0(t));ld["%Error.prototype%"]=oX}var cX=function t(e){var n;if(e==="%AsyncFunction%")n=Em("async function () {}");else if(e==="%GeneratorFunction%")n=Em("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Em("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var a=t("%AsyncGenerator%");a&&w0&&(n=w0(a.prototype))}return ld[e]=n,n},RS={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Ap=xp,k2=HZ(),dX=Ap.call(Sp,Array.prototype.concat),lX=Ap.call(HR,Array.prototype.splice),DS=Ap.call(Sp,String.prototype.replace),N2=Ap.call(Sp,String.prototype.slice),uX=Ap.call(Sp,RegExp.prototype.exec),fX=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pX=/\\(\\)?/g,hX=function(e){var n=N2(e,0,1),r=N2(e,-1);if(n==="%"&&r!=="%")throw new P6("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new P6("invalid intrinsic syntax, expected opening `%`");var a=[];return DS(e,fX,function(i,s,o,c){a[a.length]=o?DS(c,pX,"$1"):s||i}),a},bX=function(e,n){var r=e,a;if(k2(RS,r)&&(a=RS[r],r="%"+a[0]+"%"),k2(ld,r)){var i=ld[r];if(i===Ul&&(i=cX(r)),typeof i>"u"&&!n)throw new s6("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:a,name:r,value:i}}throw new P6("intrinsic "+e+" does not exist!")},zR=function(e,n){if(typeof e!="string"||e.length===0)throw new s6("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new s6('"allowMissing" argument must be a boolean');if(uX(/^%?[^%]*%?$/,e)===null)throw new P6("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=hX(e),a=r.length>0?r[0]:"",i=bX("%"+a+"%",n),s=i.name,o=i.value,c=!1,d=i.alias;d&&(a=d[0],lX(r,dX([0,1],d)));for(var l=1,u=!0;l<r.length;l+=1){var f=r[l],p=N2(f,0,1),h=N2(f,-1);if((p==='"'||p==="'"||p==="`"||h==='"'||h==="'"||h==="`")&&p!==h)throw new P6("property names with quotes must have matching quotes");if((f==="constructor"||!u)&&(c=!0),a+="."+f,s="%"+a+"%",k2(ld,s))o=ld[s];else if(o!=null){if(!(f in o)){if(!n)throw new s6("base intrinsic for "+e+" exists, but the property is not available.");return}if(b5&&l+1>=r.length){var b=b5(o,f);u=!!b,u&&"get"in b&&!("originalValue"in b.get)?o=b.get:o=o[f]}else u=k2(o,f),o=o[f];u&&!c&&(ld[s]=o)}}return o},qR=zR,KR=cE,yX=KR([qR("%String.prototype.indexOf%")]),mX=function(e,n){var r=qR(e,!!n);return typeof r=="function"&&yX(e,".prototype.")>-1?KR([r]):r},VR={exports:{}},$S=cy,gX=LR,yl=sy,LS=oy,wX=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new yl("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new yl("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new yl("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new yl("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new yl("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new yl("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,i=arguments.length>4?arguments[4]:null,s=arguments.length>5?arguments[5]:null,o=arguments.length>6?arguments[6]:!1,c=!!LS&&LS(e,n);if($S)$S(e,n,{configurable:s===null&&c?c.configurable:!s,enumerable:a===null&&c?c.enumerable:!a,value:r,writable:i===null&&c?c.writable:!i});else if(o||!a&&!i&&!s)e[n]=r;else throw new gX("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},y4=cy,WR=function(){return!!y4};WR.hasArrayLengthDefineBug=function(){if(!y4)return null;try{return y4([],"length",{value:1}).length!==1}catch{return!0}};var vX=WR,EX=zR,BS=wX,_X=vX(),FS=oy,US=sy,TX=EX("%Math.floor%"),xX=function(e,n){if(typeof e!="function")throw new US("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||TX(n)!==n)throw new US("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],a=!0,i=!0;if("length"in e&&FS){var s=FS(e,"length");s&&!s.configurable&&(a=!1),s&&!s.writable&&(i=!1)}return(a||i||!r)&&(_X?BS(e,"length",n,!0,!0):BS(e,"length",n)),e},SX=xp,AX=oE,CX=UR,IX=function(){return CX(SX,AX,arguments)};(function(t){var e=xX,n=cy,r=cE,a=IX;t.exports=function(s){var o=r(arguments),c=s.length-(arguments.length-1);return e(o,1+(c>0?c:0),!0)},n?n(t.exports,"apply",{value:a}):t.exports.apply=a})(VR);var OX=VR.exports,jS=Object.prototype.toString,GR=function(e){var n=jS.call(e),r=n==="[object Arguments]";return r||(r=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&jS.call(e.callee)==="[object Function]"),r},Tm,HS;function MX(){if(HS)return Tm;HS=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,r=GR,a=Object.prototype.propertyIsEnumerable,i=!a.call({toString:null},"toString"),s=a.call(function(){},"prototype"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(f){var p=f.constructor;return p&&p.prototype===f},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var f in window)try{if(!d["$"+f]&&e.call(window,f)&&window[f]!==null&&typeof window[f]=="object")try{c(window[f])}catch{return!0}}catch{return!0}return!1}(),u=function(f){if(typeof window>"u"||!l)return c(f);try{return c(f)}catch{return!1}};t=function(p){var h=p!==null&&typeof p=="object",b=n.call(p)==="[object Function]",v=r(p),m=h&&n.call(p)==="[object String]",T=[];if(!h&&!b&&!v)throw new TypeError("Object.keys called on a non-object");var A=s&&b;if(m&&p.length>0&&!e.call(p,0))for(var N=0;N<p.length;++N)T.push(String(N));if(v&&p.length>0)for(var R=0;R<p.length;++R)T.push(String(R));else for(var B in p)!(A&&B==="prototype")&&e.call(p,B)&&T.push(String(B));if(i)for(var F=u(p),I=0;I<o.length;++I)!(F&&o[I]==="constructor")&&e.call(p,o[I])&&T.push(o[I]);return T}}return Tm=t,Tm}var PX=Array.prototype.slice,kX=GR,zS=Object.keys,Fb=zS?function(e){return zS(e)}:MX(),qS=Object.keys;Fb.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(r){return kX(r)?qS(PX.call(r)):qS(r)})}else Object.keys=Fb;return Object.keys||Fb};var NX=Fb,Cp={};const RX="elliptic",DX="6.6.1",$X="EC cryptography",LX="lib/elliptic.js",BX=["lib"],FX={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},UX={type:"git",url:"git@github.com:indutny/elliptic"},jX=["EC","Elliptic","curve","Cryptography"],HX="Fedor Indutny <fedor@indutny.com>",zX="MIT",qX={url:"https://github.com/indutny/elliptic/issues"},KX="https://github.com/indutny/elliptic",VX={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},WX={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},GX={name:RX,version:DX,description:$X,main:LX,files:BX,scripts:FX,repository:UX,keywords:jX,author:HX,license:zX,bugs:qX,homepage:KX,devDependencies:VX,dependencies:WX};var Na={},dE={exports:{}};dE.exports;(function(t){(function(e,n){function r(M,y){if(!M)throw new Error(y||"Assertion failed")}function a(M,y){M.super_=y;var E=function(){};E.prototype=y.prototype,M.prototype=new E,M.prototype.constructor=M}function i(M,y,E){if(i.isBN(M))return M;this.negative=0,this.words=null,this.length=0,this.red=null,M!==null&&((y==="le"||y==="be")&&(E=y,y=10),this._init(M||0,y||10,E||"be"))}typeof e=="object"?e.exports=i:n.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=yR.Buffer}catch{}i.isBN=function(y){return y instanceof i?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===i.wordSize&&Array.isArray(y.words)},i.max=function(y,E){return y.cmp(E)>0?y:E},i.min=function(y,E){return y.cmp(E)<0?y:E},i.prototype._init=function(y,E,C){if(typeof y=="number")return this._initNumber(y,E,C);if(typeof y=="object")return this._initArray(y,E,C);E==="hex"&&(E=16),r(E===(E|0)&&E>=2&&E<=36),y=y.toString().replace(/\s+/g,"");var g=0;y[0]==="-"&&(g++,this.negative=1),g<y.length&&(E===16?this._parseHex(y,g,C):(this._parseBase(y,E,g),C==="le"&&this._initArray(this.toArray(),E,C)))},i.prototype._initNumber=function(y,E,C){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(r(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),C==="le"&&this._initArray(this.toArray(),E,C)},i.prototype._initArray=function(y,E,C){if(r(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var x,O,S=0;if(C==="be")for(g=y.length-1,x=0;g>=0;g-=3)O=y[g]|y[g-1]<<8|y[g-2]<<16,this.words[x]|=O<<S&67108863,this.words[x+1]=O>>>26-S&67108863,S+=24,S>=26&&(S-=26,x++);else if(C==="le")for(g=0,x=0;g<y.length;g+=3)O=y[g]|y[g+1]<<8|y[g+2]<<16,this.words[x]|=O<<S&67108863,this.words[x+1]=O>>>26-S&67108863,S+=24,S>=26&&(S-=26,x++);return this.strip()};function o(M,y){var E=M.charCodeAt(y);return E>=65&&E<=70?E-55:E>=97&&E<=102?E-87:E-48&15}function c(M,y,E){var C=o(M,E);return E-1>=y&&(C|=o(M,E-1)<<4),C}i.prototype._parseHex=function(y,E,C){this.length=Math.ceil((y.length-E)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var x=0,O=0,S;if(C==="be")for(g=y.length-1;g>=E;g-=2)S=c(y,E,g)<<x,this.words[O]|=S&67108863,x>=18?(x-=18,O+=1,this.words[O]|=S>>>26):x+=8;else{var w=y.length-E;for(g=w%2===0?E+1:E;g<y.length;g+=2)S=c(y,E,g)<<x,this.words[O]|=S&67108863,x>=18?(x-=18,O+=1,this.words[O]|=S>>>26):x+=8}this.strip()};function d(M,y,E,C){for(var g=0,x=Math.min(M.length,E),O=y;O<x;O++){var S=M.charCodeAt(O)-48;g*=C,S>=49?g+=S-49+10:S>=17?g+=S-17+10:g+=S}return g}i.prototype._parseBase=function(y,E,C){this.words=[0],this.length=1;for(var g=0,x=1;x<=67108863;x*=E)g++;g--,x=x/E|0;for(var O=y.length-C,S=O%g,w=Math.min(O,O-S)+C,_=0,k=C;k<w;k+=g)_=d(y,k,k+g,E),this.imuln(x),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_);if(S!==0){var L=1;for(_=d(y,k,y.length,E),k=0;k<S;k++)L*=E;this.imuln(L),this.words[0]+_<67108864?this.words[0]+=_:this._iaddn(_)}this.strip()},i.prototype.copy=function(y){y.words=new Array(this.length);for(var E=0;E<this.length;E++)y.words[E]=this.words[E];y.length=this.length,y.negative=this.negative,y.red=this.red},i.prototype.clone=function(){var y=new i(null);return this.copy(y),y},i.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(y,E){y=y||10,E=E|0||1;var C;if(y===16||y==="hex"){C="";for(var g=0,x=0,O=0;O<this.length;O++){var S=this.words[O],w=((S<<g|x)&16777215).toString(16);x=S>>>24-g&16777215,g+=2,g>=26&&(g-=26,O--),x!==0||O!==this.length-1?C=l[6-w.length]+w+C:C=w+C}for(x!==0&&(C=x.toString(16)+C);C.length%E!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}if(y===(y|0)&&y>=2&&y<=36){var _=u[y],k=f[y];C="";var L=this.clone();for(L.negative=0;!L.isZero();){var D=L.modn(k).toString(y);L=L.idivn(k),L.isZero()?C=D+C:C=l[_-D.length]+D+C}for(this.isZero()&&(C="0"+C);C.length%E!==0;)C="0"+C;return this.negative!==0&&(C="-"+C),C}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(y,E){return r(typeof s<"u"),this.toArrayLike(s,y,E)},i.prototype.toArray=function(y,E){return this.toArrayLike(Array,y,E)},i.prototype.toArrayLike=function(y,E,C){var g=this.byteLength(),x=C||Math.max(1,g);r(g<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0"),this.strip();var O=E==="le",S=new y(x),w,_,k=this.clone();if(O){for(_=0;!k.isZero();_++)w=k.andln(255),k.iushrn(8),S[_]=w;for(;_<x;_++)S[_]=0}else{for(_=0;_<x-g;_++)S[_]=0;for(_=0;!k.isZero();_++)w=k.andln(255),k.iushrn(8),S[x-_-1]=w}return S},Math.clz32?i.prototype._countBits=function(y){return 32-Math.clz32(y)}:i.prototype._countBits=function(y){var E=y,C=0;return E>=4096&&(C+=13,E>>>=13),E>=64&&(C+=7,E>>>=7),E>=8&&(C+=4,E>>>=4),E>=2&&(C+=2,E>>>=2),C+E},i.prototype._zeroBits=function(y){if(y===0)return 26;var E=y,C=0;return E&8191||(C+=13,E>>>=13),E&127||(C+=7,E>>>=7),E&15||(C+=4,E>>>=4),E&3||(C+=2,E>>>=2),E&1||C++,C},i.prototype.bitLength=function(){var y=this.words[this.length-1],E=this._countBits(y);return(this.length-1)*26+E};function p(M){for(var y=new Array(M.bitLength()),E=0;E<y.length;E++){var C=E/26|0,g=E%26;y[E]=(M.words[C]&1<<g)>>>g}return y}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,E=0;E<this.length;E++){var C=this._zeroBits(this.words[E]);if(y+=C,C!==26)break}return y},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},i.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var E=0;E<y.length;E++)this.words[E]=this.words[E]|y.words[E];return this.strip()},i.prototype.ior=function(y){return r((this.negative|y.negative)===0),this.iuor(y)},i.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},i.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},i.prototype.iuand=function(y){var E;this.length>y.length?E=y:E=this;for(var C=0;C<E.length;C++)this.words[C]=this.words[C]&y.words[C];return this.length=E.length,this.strip()},i.prototype.iand=function(y){return r((this.negative|y.negative)===0),this.iuand(y)},i.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},i.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},i.prototype.iuxor=function(y){var E,C;this.length>y.length?(E=this,C=y):(E=y,C=this);for(var g=0;g<C.length;g++)this.words[g]=E.words[g]^C.words[g];if(this!==E)for(;g<E.length;g++)this.words[g]=E.words[g];return this.length=E.length,this.strip()},i.prototype.ixor=function(y){return r((this.negative|y.negative)===0),this.iuxor(y)},i.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},i.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},i.prototype.inotn=function(y){r(typeof y=="number"&&y>=0);var E=Math.ceil(y/26)|0,C=y%26;this._expand(E),C>0&&E--;for(var g=0;g<E;g++)this.words[g]=~this.words[g]&67108863;return C>0&&(this.words[g]=~this.words[g]&67108863>>26-C),this.strip()},i.prototype.notn=function(y){return this.clone().inotn(y)},i.prototype.setn=function(y,E){r(typeof y=="number"&&y>=0);var C=y/26|0,g=y%26;return this._expand(C+1),E?this.words[C]=this.words[C]|1<<g:this.words[C]=this.words[C]&~(1<<g),this.strip()},i.prototype.iadd=function(y){var E;if(this.negative!==0&&y.negative===0)return this.negative=0,E=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,E=this.isub(y),y.negative=1,E._normSign();var C,g;this.length>y.length?(C=this,g=y):(C=y,g=this);for(var x=0,O=0;O<g.length;O++)E=(C.words[O]|0)+(g.words[O]|0)+x,this.words[O]=E&67108863,x=E>>>26;for(;x!==0&&O<C.length;O++)E=(C.words[O]|0)+x,this.words[O]=E&67108863,x=E>>>26;if(this.length=C.length,x!==0)this.words[this.length]=x,this.length++;else if(C!==this)for(;O<C.length;O++)this.words[O]=C.words[O];return this},i.prototype.add=function(y){var E;return y.negative!==0&&this.negative===0?(y.negative=0,E=this.sub(y),y.negative^=1,E):y.negative===0&&this.negative!==0?(this.negative=0,E=y.sub(this),this.negative=1,E):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},i.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var E=this.iadd(y);return y.negative=1,E._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var C=this.cmp(y);if(C===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,x;C>0?(g=this,x=y):(g=y,x=this);for(var O=0,S=0;S<x.length;S++)E=(g.words[S]|0)-(x.words[S]|0)+O,O=E>>26,this.words[S]=E&67108863;for(;O!==0&&S<g.length;S++)E=(g.words[S]|0)+O,O=E>>26,this.words[S]=E&67108863;if(O===0&&S<g.length&&g!==this)for(;S<g.length;S++)this.words[S]=g.words[S];return this.length=Math.max(this.length,S),g!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(y){return this.clone().isub(y)};function h(M,y,E){E.negative=y.negative^M.negative;var C=M.length+y.length|0;E.length=C,C=C-1|0;var g=M.words[0]|0,x=y.words[0]|0,O=g*x,S=O&67108863,w=O/67108864|0;E.words[0]=S;for(var _=1;_<C;_++){for(var k=w>>>26,L=w&67108863,D=Math.min(_,y.length-1),U=Math.max(0,_-M.length+1);U<=D;U++){var j=_-U|0;g=M.words[j]|0,x=y.words[U]|0,O=g*x+L,k+=O/67108864|0,L=O&67108863}E.words[_]=L|0,w=k|0}return w!==0?E.words[_]=w|0:E.length--,E.strip()}var b=function(y,E,C){var g=y.words,x=E.words,O=C.words,S=0,w,_,k,L=g[0]|0,D=L&8191,U=L>>>13,j=g[1]|0,H=j&8191,W=j>>>13,K=g[2]|0,q=K&8191,V=K>>>13,G=g[3]|0,J=G&8191,z=G>>>13,Y=g[4]|0,X=Y&8191,ae=Y>>>13,ie=g[5]|0,oe=ie&8191,ue=ie>>>13,Oe=g[6]|0,Re=Oe&8191,pe=Oe>>>13,Ze=g[7]|0,je=Ze&8191,it=Ze>>>13,De=g[8]|0,Ke=De&8191,Xe=De>>>13,mt=g[9]|0,He=mt&8191,ct=mt>>>13,Vt=x[0]|0,It=Vt&8191,Tt=Vt>>>13,L0=x[1]|0,ht=L0&8191,kt=L0>>>13,B0=x[2]|0,At=B0&8191,Wt=B0>>>13,We=x[3]|0,et=We&8191,ot=We>>>13,jt=x[4]|0,rt=jt&8191,at=jt>>>13,Z=x[5]|0,ee=Z&8191,me=Z>>>13,Ae=x[6]|0,Ce=Ae&8191,lt=Ae>>>13,Mn=x[7]|0,Gt=Mn&8191,Bt=Mn>>>13,ua=x[8]|0,xn=ua&8191,En=ua>>>13,E1=x[9]|0,fn=E1&8191,pn=E1>>>13;C.negative=y.negative^E.negative,C.length=19,w=Math.imul(D,It),_=Math.imul(D,Tt),_=_+Math.imul(U,It)|0,k=Math.imul(U,Tt);var F0=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(F0>>>26)|0,F0&=67108863,w=Math.imul(H,It),_=Math.imul(H,Tt),_=_+Math.imul(W,It)|0,k=Math.imul(W,Tt),w=w+Math.imul(D,ht)|0,_=_+Math.imul(D,kt)|0,_=_+Math.imul(U,ht)|0,k=k+Math.imul(U,kt)|0;var gi=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(gi>>>26)|0,gi&=67108863,w=Math.imul(q,It),_=Math.imul(q,Tt),_=_+Math.imul(V,It)|0,k=Math.imul(V,Tt),w=w+Math.imul(H,ht)|0,_=_+Math.imul(H,kt)|0,_=_+Math.imul(W,ht)|0,k=k+Math.imul(W,kt)|0,w=w+Math.imul(D,At)|0,_=_+Math.imul(D,Wt)|0,_=_+Math.imul(U,At)|0,k=k+Math.imul(U,Wt)|0;var fa=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(fa>>>26)|0,fa&=67108863,w=Math.imul(J,It),_=Math.imul(J,Tt),_=_+Math.imul(z,It)|0,k=Math.imul(z,Tt),w=w+Math.imul(q,ht)|0,_=_+Math.imul(q,kt)|0,_=_+Math.imul(V,ht)|0,k=k+Math.imul(V,kt)|0,w=w+Math.imul(H,At)|0,_=_+Math.imul(H,Wt)|0,_=_+Math.imul(W,At)|0,k=k+Math.imul(W,Wt)|0,w=w+Math.imul(D,et)|0,_=_+Math.imul(D,ot)|0,_=_+Math.imul(U,et)|0,k=k+Math.imul(U,ot)|0;var mr=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(mr>>>26)|0,mr&=67108863,w=Math.imul(X,It),_=Math.imul(X,Tt),_=_+Math.imul(ae,It)|0,k=Math.imul(ae,Tt),w=w+Math.imul(J,ht)|0,_=_+Math.imul(J,kt)|0,_=_+Math.imul(z,ht)|0,k=k+Math.imul(z,kt)|0,w=w+Math.imul(q,At)|0,_=_+Math.imul(q,Wt)|0,_=_+Math.imul(V,At)|0,k=k+Math.imul(V,Wt)|0,w=w+Math.imul(H,et)|0,_=_+Math.imul(H,ot)|0,_=_+Math.imul(W,et)|0,k=k+Math.imul(W,ot)|0,w=w+Math.imul(D,rt)|0,_=_+Math.imul(D,at)|0,_=_+Math.imul(U,rt)|0,k=k+Math.imul(U,at)|0;var zu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(zu>>>26)|0,zu&=67108863,w=Math.imul(oe,It),_=Math.imul(oe,Tt),_=_+Math.imul(ue,It)|0,k=Math.imul(ue,Tt),w=w+Math.imul(X,ht)|0,_=_+Math.imul(X,kt)|0,_=_+Math.imul(ae,ht)|0,k=k+Math.imul(ae,kt)|0,w=w+Math.imul(J,At)|0,_=_+Math.imul(J,Wt)|0,_=_+Math.imul(z,At)|0,k=k+Math.imul(z,Wt)|0,w=w+Math.imul(q,et)|0,_=_+Math.imul(q,ot)|0,_=_+Math.imul(V,et)|0,k=k+Math.imul(V,ot)|0,w=w+Math.imul(H,rt)|0,_=_+Math.imul(H,at)|0,_=_+Math.imul(W,rt)|0,k=k+Math.imul(W,at)|0,w=w+Math.imul(D,ee)|0,_=_+Math.imul(D,me)|0,_=_+Math.imul(U,ee)|0,k=k+Math.imul(U,me)|0;var qu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(qu>>>26)|0,qu&=67108863,w=Math.imul(Re,It),_=Math.imul(Re,Tt),_=_+Math.imul(pe,It)|0,k=Math.imul(pe,Tt),w=w+Math.imul(oe,ht)|0,_=_+Math.imul(oe,kt)|0,_=_+Math.imul(ue,ht)|0,k=k+Math.imul(ue,kt)|0,w=w+Math.imul(X,At)|0,_=_+Math.imul(X,Wt)|0,_=_+Math.imul(ae,At)|0,k=k+Math.imul(ae,Wt)|0,w=w+Math.imul(J,et)|0,_=_+Math.imul(J,ot)|0,_=_+Math.imul(z,et)|0,k=k+Math.imul(z,ot)|0,w=w+Math.imul(q,rt)|0,_=_+Math.imul(q,at)|0,_=_+Math.imul(V,rt)|0,k=k+Math.imul(V,at)|0,w=w+Math.imul(H,ee)|0,_=_+Math.imul(H,me)|0,_=_+Math.imul(W,ee)|0,k=k+Math.imul(W,me)|0,w=w+Math.imul(D,Ce)|0,_=_+Math.imul(D,lt)|0,_=_+Math.imul(U,Ce)|0,k=k+Math.imul(U,lt)|0;var wi=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(wi>>>26)|0,wi&=67108863,w=Math.imul(je,It),_=Math.imul(je,Tt),_=_+Math.imul(it,It)|0,k=Math.imul(it,Tt),w=w+Math.imul(Re,ht)|0,_=_+Math.imul(Re,kt)|0,_=_+Math.imul(pe,ht)|0,k=k+Math.imul(pe,kt)|0,w=w+Math.imul(oe,At)|0,_=_+Math.imul(oe,Wt)|0,_=_+Math.imul(ue,At)|0,k=k+Math.imul(ue,Wt)|0,w=w+Math.imul(X,et)|0,_=_+Math.imul(X,ot)|0,_=_+Math.imul(ae,et)|0,k=k+Math.imul(ae,ot)|0,w=w+Math.imul(J,rt)|0,_=_+Math.imul(J,at)|0,_=_+Math.imul(z,rt)|0,k=k+Math.imul(z,at)|0,w=w+Math.imul(q,ee)|0,_=_+Math.imul(q,me)|0,_=_+Math.imul(V,ee)|0,k=k+Math.imul(V,me)|0,w=w+Math.imul(H,Ce)|0,_=_+Math.imul(H,lt)|0,_=_+Math.imul(W,Ce)|0,k=k+Math.imul(W,lt)|0,w=w+Math.imul(D,Gt)|0,_=_+Math.imul(D,Bt)|0,_=_+Math.imul(U,Gt)|0,k=k+Math.imul(U,Bt)|0;var Ku=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Ku>>>26)|0,Ku&=67108863,w=Math.imul(Ke,It),_=Math.imul(Ke,Tt),_=_+Math.imul(Xe,It)|0,k=Math.imul(Xe,Tt),w=w+Math.imul(je,ht)|0,_=_+Math.imul(je,kt)|0,_=_+Math.imul(it,ht)|0,k=k+Math.imul(it,kt)|0,w=w+Math.imul(Re,At)|0,_=_+Math.imul(Re,Wt)|0,_=_+Math.imul(pe,At)|0,k=k+Math.imul(pe,Wt)|0,w=w+Math.imul(oe,et)|0,_=_+Math.imul(oe,ot)|0,_=_+Math.imul(ue,et)|0,k=k+Math.imul(ue,ot)|0,w=w+Math.imul(X,rt)|0,_=_+Math.imul(X,at)|0,_=_+Math.imul(ae,rt)|0,k=k+Math.imul(ae,at)|0,w=w+Math.imul(J,ee)|0,_=_+Math.imul(J,me)|0,_=_+Math.imul(z,ee)|0,k=k+Math.imul(z,me)|0,w=w+Math.imul(q,Ce)|0,_=_+Math.imul(q,lt)|0,_=_+Math.imul(V,Ce)|0,k=k+Math.imul(V,lt)|0,w=w+Math.imul(H,Gt)|0,_=_+Math.imul(H,Bt)|0,_=_+Math.imul(W,Gt)|0,k=k+Math.imul(W,Bt)|0,w=w+Math.imul(D,xn)|0,_=_+Math.imul(D,En)|0,_=_+Math.imul(U,xn)|0,k=k+Math.imul(U,En)|0;var Vu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Vu>>>26)|0,Vu&=67108863,w=Math.imul(He,It),_=Math.imul(He,Tt),_=_+Math.imul(ct,It)|0,k=Math.imul(ct,Tt),w=w+Math.imul(Ke,ht)|0,_=_+Math.imul(Ke,kt)|0,_=_+Math.imul(Xe,ht)|0,k=k+Math.imul(Xe,kt)|0,w=w+Math.imul(je,At)|0,_=_+Math.imul(je,Wt)|0,_=_+Math.imul(it,At)|0,k=k+Math.imul(it,Wt)|0,w=w+Math.imul(Re,et)|0,_=_+Math.imul(Re,ot)|0,_=_+Math.imul(pe,et)|0,k=k+Math.imul(pe,ot)|0,w=w+Math.imul(oe,rt)|0,_=_+Math.imul(oe,at)|0,_=_+Math.imul(ue,rt)|0,k=k+Math.imul(ue,at)|0,w=w+Math.imul(X,ee)|0,_=_+Math.imul(X,me)|0,_=_+Math.imul(ae,ee)|0,k=k+Math.imul(ae,me)|0,w=w+Math.imul(J,Ce)|0,_=_+Math.imul(J,lt)|0,_=_+Math.imul(z,Ce)|0,k=k+Math.imul(z,lt)|0,w=w+Math.imul(q,Gt)|0,_=_+Math.imul(q,Bt)|0,_=_+Math.imul(V,Gt)|0,k=k+Math.imul(V,Bt)|0,w=w+Math.imul(H,xn)|0,_=_+Math.imul(H,En)|0,_=_+Math.imul(W,xn)|0,k=k+Math.imul(W,En)|0,w=w+Math.imul(D,fn)|0,_=_+Math.imul(D,pn)|0,_=_+Math.imul(U,fn)|0,k=k+Math.imul(U,pn)|0;var Wu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Wu>>>26)|0,Wu&=67108863,w=Math.imul(He,ht),_=Math.imul(He,kt),_=_+Math.imul(ct,ht)|0,k=Math.imul(ct,kt),w=w+Math.imul(Ke,At)|0,_=_+Math.imul(Ke,Wt)|0,_=_+Math.imul(Xe,At)|0,k=k+Math.imul(Xe,Wt)|0,w=w+Math.imul(je,et)|0,_=_+Math.imul(je,ot)|0,_=_+Math.imul(it,et)|0,k=k+Math.imul(it,ot)|0,w=w+Math.imul(Re,rt)|0,_=_+Math.imul(Re,at)|0,_=_+Math.imul(pe,rt)|0,k=k+Math.imul(pe,at)|0,w=w+Math.imul(oe,ee)|0,_=_+Math.imul(oe,me)|0,_=_+Math.imul(ue,ee)|0,k=k+Math.imul(ue,me)|0,w=w+Math.imul(X,Ce)|0,_=_+Math.imul(X,lt)|0,_=_+Math.imul(ae,Ce)|0,k=k+Math.imul(ae,lt)|0,w=w+Math.imul(J,Gt)|0,_=_+Math.imul(J,Bt)|0,_=_+Math.imul(z,Gt)|0,k=k+Math.imul(z,Bt)|0,w=w+Math.imul(q,xn)|0,_=_+Math.imul(q,En)|0,_=_+Math.imul(V,xn)|0,k=k+Math.imul(V,En)|0,w=w+Math.imul(H,fn)|0,_=_+Math.imul(H,pn)|0,_=_+Math.imul(W,fn)|0,k=k+Math.imul(W,pn)|0;var Gu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Gu>>>26)|0,Gu&=67108863,w=Math.imul(He,At),_=Math.imul(He,Wt),_=_+Math.imul(ct,At)|0,k=Math.imul(ct,Wt),w=w+Math.imul(Ke,et)|0,_=_+Math.imul(Ke,ot)|0,_=_+Math.imul(Xe,et)|0,k=k+Math.imul(Xe,ot)|0,w=w+Math.imul(je,rt)|0,_=_+Math.imul(je,at)|0,_=_+Math.imul(it,rt)|0,k=k+Math.imul(it,at)|0,w=w+Math.imul(Re,ee)|0,_=_+Math.imul(Re,me)|0,_=_+Math.imul(pe,ee)|0,k=k+Math.imul(pe,me)|0,w=w+Math.imul(oe,Ce)|0,_=_+Math.imul(oe,lt)|0,_=_+Math.imul(ue,Ce)|0,k=k+Math.imul(ue,lt)|0,w=w+Math.imul(X,Gt)|0,_=_+Math.imul(X,Bt)|0,_=_+Math.imul(ae,Gt)|0,k=k+Math.imul(ae,Bt)|0,w=w+Math.imul(J,xn)|0,_=_+Math.imul(J,En)|0,_=_+Math.imul(z,xn)|0,k=k+Math.imul(z,En)|0,w=w+Math.imul(q,fn)|0,_=_+Math.imul(q,pn)|0,_=_+Math.imul(V,fn)|0,k=k+Math.imul(V,pn)|0;var Yu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Yu>>>26)|0,Yu&=67108863,w=Math.imul(He,et),_=Math.imul(He,ot),_=_+Math.imul(ct,et)|0,k=Math.imul(ct,ot),w=w+Math.imul(Ke,rt)|0,_=_+Math.imul(Ke,at)|0,_=_+Math.imul(Xe,rt)|0,k=k+Math.imul(Xe,at)|0,w=w+Math.imul(je,ee)|0,_=_+Math.imul(je,me)|0,_=_+Math.imul(it,ee)|0,k=k+Math.imul(it,me)|0,w=w+Math.imul(Re,Ce)|0,_=_+Math.imul(Re,lt)|0,_=_+Math.imul(pe,Ce)|0,k=k+Math.imul(pe,lt)|0,w=w+Math.imul(oe,Gt)|0,_=_+Math.imul(oe,Bt)|0,_=_+Math.imul(ue,Gt)|0,k=k+Math.imul(ue,Bt)|0,w=w+Math.imul(X,xn)|0,_=_+Math.imul(X,En)|0,_=_+Math.imul(ae,xn)|0,k=k+Math.imul(ae,En)|0,w=w+Math.imul(J,fn)|0,_=_+Math.imul(J,pn)|0,_=_+Math.imul(z,fn)|0,k=k+Math.imul(z,pn)|0;var ic=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(ic>>>26)|0,ic&=67108863,w=Math.imul(He,rt),_=Math.imul(He,at),_=_+Math.imul(ct,rt)|0,k=Math.imul(ct,at),w=w+Math.imul(Ke,ee)|0,_=_+Math.imul(Ke,me)|0,_=_+Math.imul(Xe,ee)|0,k=k+Math.imul(Xe,me)|0,w=w+Math.imul(je,Ce)|0,_=_+Math.imul(je,lt)|0,_=_+Math.imul(it,Ce)|0,k=k+Math.imul(it,lt)|0,w=w+Math.imul(Re,Gt)|0,_=_+Math.imul(Re,Bt)|0,_=_+Math.imul(pe,Gt)|0,k=k+Math.imul(pe,Bt)|0,w=w+Math.imul(oe,xn)|0,_=_+Math.imul(oe,En)|0,_=_+Math.imul(ue,xn)|0,k=k+Math.imul(ue,En)|0,w=w+Math.imul(X,fn)|0,_=_+Math.imul(X,pn)|0,_=_+Math.imul(ae,fn)|0,k=k+Math.imul(ae,pn)|0;var Ju=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Ju>>>26)|0,Ju&=67108863,w=Math.imul(He,ee),_=Math.imul(He,me),_=_+Math.imul(ct,ee)|0,k=Math.imul(ct,me),w=w+Math.imul(Ke,Ce)|0,_=_+Math.imul(Ke,lt)|0,_=_+Math.imul(Xe,Ce)|0,k=k+Math.imul(Xe,lt)|0,w=w+Math.imul(je,Gt)|0,_=_+Math.imul(je,Bt)|0,_=_+Math.imul(it,Gt)|0,k=k+Math.imul(it,Bt)|0,w=w+Math.imul(Re,xn)|0,_=_+Math.imul(Re,En)|0,_=_+Math.imul(pe,xn)|0,k=k+Math.imul(pe,En)|0,w=w+Math.imul(oe,fn)|0,_=_+Math.imul(oe,pn)|0,_=_+Math.imul(ue,fn)|0,k=k+Math.imul(ue,pn)|0;var Zu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Zu>>>26)|0,Zu&=67108863,w=Math.imul(He,Ce),_=Math.imul(He,lt),_=_+Math.imul(ct,Ce)|0,k=Math.imul(ct,lt),w=w+Math.imul(Ke,Gt)|0,_=_+Math.imul(Ke,Bt)|0,_=_+Math.imul(Xe,Gt)|0,k=k+Math.imul(Xe,Bt)|0,w=w+Math.imul(je,xn)|0,_=_+Math.imul(je,En)|0,_=_+Math.imul(it,xn)|0,k=k+Math.imul(it,En)|0,w=w+Math.imul(Re,fn)|0,_=_+Math.imul(Re,pn)|0,_=_+Math.imul(pe,fn)|0,k=k+Math.imul(pe,pn)|0;var La=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(La>>>26)|0,La&=67108863,w=Math.imul(He,Gt),_=Math.imul(He,Bt),_=_+Math.imul(ct,Gt)|0,k=Math.imul(ct,Bt),w=w+Math.imul(Ke,xn)|0,_=_+Math.imul(Ke,En)|0,_=_+Math.imul(Xe,xn)|0,k=k+Math.imul(Xe,En)|0,w=w+Math.imul(je,fn)|0,_=_+Math.imul(je,pn)|0,_=_+Math.imul(it,fn)|0,k=k+Math.imul(it,pn)|0;var Xu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Xu>>>26)|0,Xu&=67108863,w=Math.imul(He,xn),_=Math.imul(He,En),_=_+Math.imul(ct,xn)|0,k=Math.imul(ct,En),w=w+Math.imul(Ke,fn)|0,_=_+Math.imul(Ke,pn)|0,_=_+Math.imul(Xe,fn)|0,k=k+Math.imul(Xe,pn)|0;var Qu=(S+w|0)+((_&8191)<<13)|0;S=(k+(_>>>13)|0)+(Qu>>>26)|0,Qu&=67108863,w=Math.imul(He,fn),_=Math.imul(He,pn),_=_+Math.imul(ct,fn)|0,k=Math.imul(ct,pn);var ef=(S+w|0)+((_&8191)<<13)|0;return S=(k+(_>>>13)|0)+(ef>>>26)|0,ef&=67108863,O[0]=F0,O[1]=gi,O[2]=fa,O[3]=mr,O[4]=zu,O[5]=qu,O[6]=wi,O[7]=Ku,O[8]=Vu,O[9]=Wu,O[10]=Gu,O[11]=Yu,O[12]=ic,O[13]=Ju,O[14]=Zu,O[15]=La,O[16]=Xu,O[17]=Qu,O[18]=ef,S!==0&&(O[19]=S,C.length++),C};Math.imul||(b=h);function v(M,y,E){E.negative=y.negative^M.negative,E.length=M.length+y.length;for(var C=0,g=0,x=0;x<E.length-1;x++){var O=g;g=0;for(var S=C&67108863,w=Math.min(x,y.length-1),_=Math.max(0,x-M.length+1);_<=w;_++){var k=x-_,L=M.words[k]|0,D=y.words[_]|0,U=L*D,j=U&67108863;O=O+(U/67108864|0)|0,j=j+S|0,S=j&67108863,O=O+(j>>>26)|0,g+=O>>>26,O&=67108863}E.words[x]=S,C=O,O=g}return C!==0?E.words[x]=C:E.length--,E.strip()}function m(M,y,E){var C=new T;return C.mulp(M,y,E)}i.prototype.mulTo=function(y,E){var C,g=this.length+y.length;return this.length===10&&y.length===10?C=b(this,y,E):g<63?C=h(this,y,E):g<1024?C=v(this,y,E):C=m(this,y,E),C};function T(M,y){this.x=M,this.y=y}T.prototype.makeRBT=function(y){for(var E=new Array(y),C=i.prototype._countBits(y)-1,g=0;g<y;g++)E[g]=this.revBin(g,C,y);return E},T.prototype.revBin=function(y,E,C){if(y===0||y===C-1)return y;for(var g=0,x=0;x<E;x++)g|=(y&1)<<E-x-1,y>>=1;return g},T.prototype.permute=function(y,E,C,g,x,O){for(var S=0;S<O;S++)g[S]=E[y[S]],x[S]=C[y[S]]},T.prototype.transform=function(y,E,C,g,x,O){this.permute(O,y,E,C,g,x);for(var S=1;S<x;S<<=1)for(var w=S<<1,_=Math.cos(2*Math.PI/w),k=Math.sin(2*Math.PI/w),L=0;L<x;L+=w)for(var D=_,U=k,j=0;j<S;j++){var H=C[L+j],W=g[L+j],K=C[L+j+S],q=g[L+j+S],V=D*K-U*q;q=D*q+U*K,K=V,C[L+j]=H+K,g[L+j]=W+q,C[L+j+S]=H-K,g[L+j+S]=W-q,j!==w&&(V=_*D-k*U,U=_*U+k*D,D=V)}},T.prototype.guessLen13b=function(y,E){var C=Math.max(E,y)|1,g=C&1,x=0;for(C=C/2|0;C;C=C>>>1)x++;return 1<<x+1+g},T.prototype.conjugate=function(y,E,C){if(!(C<=1))for(var g=0;g<C/2;g++){var x=y[g];y[g]=y[C-g-1],y[C-g-1]=x,x=E[g],E[g]=-E[C-g-1],E[C-g-1]=-x}},T.prototype.normalize13b=function(y,E){for(var C=0,g=0;g<E/2;g++){var x=Math.round(y[2*g+1]/E)*8192+Math.round(y[2*g]/E)+C;y[g]=x&67108863,x<67108864?C=0:C=x/67108864|0}return y},T.prototype.convert13b=function(y,E,C,g){for(var x=0,O=0;O<E;O++)x=x+(y[O]|0),C[2*O]=x&8191,x=x>>>13,C[2*O+1]=x&8191,x=x>>>13;for(O=2*E;O<g;++O)C[O]=0;r(x===0),r((x&-8192)===0)},T.prototype.stub=function(y){for(var E=new Array(y),C=0;C<y;C++)E[C]=0;return E},T.prototype.mulp=function(y,E,C){var g=2*this.guessLen13b(y.length,E.length),x=this.makeRBT(g),O=this.stub(g),S=new Array(g),w=new Array(g),_=new Array(g),k=new Array(g),L=new Array(g),D=new Array(g),U=C.words;U.length=g,this.convert13b(y.words,y.length,S,g),this.convert13b(E.words,E.length,k,g),this.transform(S,O,w,_,g,x),this.transform(k,O,L,D,g,x);for(var j=0;j<g;j++){var H=w[j]*L[j]-_[j]*D[j];_[j]=w[j]*D[j]+_[j]*L[j],w[j]=H}return this.conjugate(w,_,g),this.transform(w,_,U,O,g,x),this.conjugate(U,O,g),this.normalize13b(U,g),C.negative=y.negative^E.negative,C.length=y.length+E.length,C.strip()},i.prototype.mul=function(y){var E=new i(null);return E.words=new Array(this.length+y.length),this.mulTo(y,E)},i.prototype.mulf=function(y){var E=new i(null);return E.words=new Array(this.length+y.length),m(this,y,E)},i.prototype.imul=function(y){return this.clone().mulTo(y,this)},i.prototype.imuln=function(y){r(typeof y=="number"),r(y<67108864);for(var E=0,C=0;C<this.length;C++){var g=(this.words[C]|0)*y,x=(g&67108863)+(E&67108863);E>>=26,E+=g/67108864|0,E+=x>>>26,this.words[C]=x&67108863}return E!==0&&(this.words[C]=E,this.length++),this.length=y===0?1:this.length,this},i.prototype.muln=function(y){return this.clone().imuln(y)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(y){var E=p(y);if(E.length===0)return new i(1);for(var C=this,g=0;g<E.length&&E[g]===0;g++,C=C.sqr());if(++g<E.length)for(var x=C.sqr();g<E.length;g++,x=x.sqr())E[g]!==0&&(C=C.mul(x));return C},i.prototype.iushln=function(y){r(typeof y=="number"&&y>=0);var E=y%26,C=(y-E)/26,g=67108863>>>26-E<<26-E,x;if(E!==0){var O=0;for(x=0;x<this.length;x++){var S=this.words[x]&g,w=(this.words[x]|0)-S<<E;this.words[x]=w|O,O=S>>>26-E}O&&(this.words[x]=O,this.length++)}if(C!==0){for(x=this.length-1;x>=0;x--)this.words[x+C]=this.words[x];for(x=0;x<C;x++)this.words[x]=0;this.length+=C}return this.strip()},i.prototype.ishln=function(y){return r(this.negative===0),this.iushln(y)},i.prototype.iushrn=function(y,E,C){r(typeof y=="number"&&y>=0);var g;E?g=(E-E%26)/26:g=0;var x=y%26,O=Math.min((y-x)/26,this.length),S=67108863^67108863>>>x<<x,w=C;if(g-=O,g=Math.max(0,g),w){for(var _=0;_<O;_++)w.words[_]=this.words[_];w.length=O}if(O!==0)if(this.length>O)for(this.length-=O,_=0;_<this.length;_++)this.words[_]=this.words[_+O];else this.words[0]=0,this.length=1;var k=0;for(_=this.length-1;_>=0&&(k!==0||_>=g);_--){var L=this.words[_]|0;this.words[_]=k<<26-x|L>>>x,k=L&S}return w&&k!==0&&(w.words[w.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(y,E,C){return r(this.negative===0),this.iushrn(y,E,C)},i.prototype.shln=function(y){return this.clone().ishln(y)},i.prototype.ushln=function(y){return this.clone().iushln(y)},i.prototype.shrn=function(y){return this.clone().ishrn(y)},i.prototype.ushrn=function(y){return this.clone().iushrn(y)},i.prototype.testn=function(y){r(typeof y=="number"&&y>=0);var E=y%26,C=(y-E)/26,g=1<<E;if(this.length<=C)return!1;var x=this.words[C];return!!(x&g)},i.prototype.imaskn=function(y){r(typeof y=="number"&&y>=0);var E=y%26,C=(y-E)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=C)return this;if(E!==0&&C++,this.length=Math.min(C,this.length),E!==0){var g=67108863^67108863>>>E<<E;this.words[this.length-1]&=g}return this.strip()},i.prototype.maskn=function(y){return this.clone().imaskn(y)},i.prototype.iaddn=function(y){return r(typeof y=="number"),r(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},i.prototype._iaddn=function(y){this.words[0]+=y;for(var E=0;E<this.length&&this.words[E]>=67108864;E++)this.words[E]-=67108864,E===this.length-1?this.words[E+1]=1:this.words[E+1]++;return this.length=Math.max(this.length,E+1),this},i.prototype.isubn=function(y){if(r(typeof y=="number"),r(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var E=0;E<this.length&&this.words[E]<0;E++)this.words[E]+=67108864,this.words[E+1]-=1;return this.strip()},i.prototype.addn=function(y){return this.clone().iaddn(y)},i.prototype.subn=function(y){return this.clone().isubn(y)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(y,E,C){var g=y.length+C,x;this._expand(g);var O,S=0;for(x=0;x<y.length;x++){O=(this.words[x+C]|0)+S;var w=(y.words[x]|0)*E;O-=w&67108863,S=(O>>26)-(w/67108864|0),this.words[x+C]=O&67108863}for(;x<this.length-C;x++)O=(this.words[x+C]|0)+S,S=O>>26,this.words[x+C]=O&67108863;if(S===0)return this.strip();for(r(S===-1),S=0,x=0;x<this.length;x++)O=-(this.words[x]|0)+S,S=O>>26,this.words[x]=O&67108863;return this.negative=1,this.strip()},i.prototype._wordDiv=function(y,E){var C=this.length-y.length,g=this.clone(),x=y,O=x.words[x.length-1]|0,S=this._countBits(O);C=26-S,C!==0&&(x=x.ushln(C),g.iushln(C),O=x.words[x.length-1]|0);var w=g.length-x.length,_;if(E!=="mod"){_=new i(null),_.length=w+1,_.words=new Array(_.length);for(var k=0;k<_.length;k++)_.words[k]=0}var L=g.clone()._ishlnsubmul(x,1,w);L.negative===0&&(g=L,_&&(_.words[w]=1));for(var D=w-1;D>=0;D--){var U=(g.words[x.length+D]|0)*67108864+(g.words[x.length+D-1]|0);for(U=Math.min(U/O|0,67108863),g._ishlnsubmul(x,U,D);g.negative!==0;)U--,g.negative=0,g._ishlnsubmul(x,1,D),g.isZero()||(g.negative^=1);_&&(_.words[D]=U)}return _&&_.strip(),g.strip(),E!=="div"&&C!==0&&g.iushrn(C),{div:_||null,mod:g}},i.prototype.divmod=function(y,E,C){if(r(!y.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var g,x,O;return this.negative!==0&&y.negative===0?(O=this.neg().divmod(y,E),E!=="mod"&&(g=O.div.neg()),E!=="div"&&(x=O.mod.neg(),C&&x.negative!==0&&x.iadd(y)),{div:g,mod:x}):this.negative===0&&y.negative!==0?(O=this.divmod(y.neg(),E),E!=="mod"&&(g=O.div.neg()),{div:g,mod:O.mod}):this.negative&y.negative?(O=this.neg().divmod(y.neg(),E),E!=="div"&&(x=O.mod.neg(),C&&x.negative!==0&&x.isub(y)),{div:O.div,mod:x}):y.length>this.length||this.cmp(y)<0?{div:new i(0),mod:this}:y.length===1?E==="div"?{div:this.divn(y.words[0]),mod:null}:E==="mod"?{div:null,mod:new i(this.modn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new i(this.modn(y.words[0]))}:this._wordDiv(y,E)},i.prototype.div=function(y){return this.divmod(y,"div",!1).div},i.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},i.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},i.prototype.divRound=function(y){var E=this.divmod(y);if(E.mod.isZero())return E.div;var C=E.div.negative!==0?E.mod.isub(y):E.mod,g=y.ushrn(1),x=y.andln(1),O=C.cmp(g);return O<0||x===1&&O===0?E.div:E.div.negative!==0?E.div.isubn(1):E.div.iaddn(1)},i.prototype.modn=function(y){r(y<=67108863);for(var E=(1<<26)%y,C=0,g=this.length-1;g>=0;g--)C=(E*C+(this.words[g]|0))%y;return C},i.prototype.idivn=function(y){r(y<=67108863);for(var E=0,C=this.length-1;C>=0;C--){var g=(this.words[C]|0)+E*67108864;this.words[C]=g/y|0,E=g%y}return this.strip()},i.prototype.divn=function(y){return this.clone().idivn(y)},i.prototype.egcd=function(y){r(y.negative===0),r(!y.isZero());var E=this,C=y.clone();E.negative!==0?E=E.umod(y):E=E.clone();for(var g=new i(1),x=new i(0),O=new i(0),S=new i(1),w=0;E.isEven()&&C.isEven();)E.iushrn(1),C.iushrn(1),++w;for(var _=C.clone(),k=E.clone();!E.isZero();){for(var L=0,D=1;!(E.words[0]&D)&&L<26;++L,D<<=1);if(L>0)for(E.iushrn(L);L-- >0;)(g.isOdd()||x.isOdd())&&(g.iadd(_),x.isub(k)),g.iushrn(1),x.iushrn(1);for(var U=0,j=1;!(C.words[0]&j)&&U<26;++U,j<<=1);if(U>0)for(C.iushrn(U);U-- >0;)(O.isOdd()||S.isOdd())&&(O.iadd(_),S.isub(k)),O.iushrn(1),S.iushrn(1);E.cmp(C)>=0?(E.isub(C),g.isub(O),x.isub(S)):(C.isub(E),O.isub(g),S.isub(x))}return{a:O,b:S,gcd:C.iushln(w)}},i.prototype._invmp=function(y){r(y.negative===0),r(!y.isZero());var E=this,C=y.clone();E.negative!==0?E=E.umod(y):E=E.clone();for(var g=new i(1),x=new i(0),O=C.clone();E.cmpn(1)>0&&C.cmpn(1)>0;){for(var S=0,w=1;!(E.words[0]&w)&&S<26;++S,w<<=1);if(S>0)for(E.iushrn(S);S-- >0;)g.isOdd()&&g.iadd(O),g.iushrn(1);for(var _=0,k=1;!(C.words[0]&k)&&_<26;++_,k<<=1);if(_>0)for(C.iushrn(_);_-- >0;)x.isOdd()&&x.iadd(O),x.iushrn(1);E.cmp(C)>=0?(E.isub(C),g.isub(x)):(C.isub(E),x.isub(g))}var L;return E.cmpn(1)===0?L=g:L=x,L.cmpn(0)<0&&L.iadd(y),L},i.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var E=this.clone(),C=y.clone();E.negative=0,C.negative=0;for(var g=0;E.isEven()&&C.isEven();g++)E.iushrn(1),C.iushrn(1);do{for(;E.isEven();)E.iushrn(1);for(;C.isEven();)C.iushrn(1);var x=E.cmp(C);if(x<0){var O=E;E=C,C=O}else if(x===0||C.cmpn(1)===0)break;E.isub(C)}while(!0);return C.iushln(g)},i.prototype.invm=function(y){return this.egcd(y).a.umod(y)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(y){return this.words[0]&y},i.prototype.bincn=function(y){r(typeof y=="number");var E=y%26,C=(y-E)/26,g=1<<E;if(this.length<=C)return this._expand(C+1),this.words[C]|=g,this;for(var x=g,O=C;x!==0&&O<this.length;O++){var S=this.words[O]|0;S+=x,x=S>>>26,S&=67108863,this.words[O]=S}return x!==0&&(this.words[O]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(y){var E=y<0;if(this.negative!==0&&!E)return-1;if(this.negative===0&&E)return 1;this.strip();var C;if(this.length>1)C=1;else{E&&(y=-y),r(y<=67108863,"Number is too big");var g=this.words[0]|0;C=g===y?0:g<y?-1:1}return this.negative!==0?-C|0:C},i.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var E=this.ucmp(y);return this.negative!==0?-E|0:E},i.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var E=0,C=this.length-1;C>=0;C--){var g=this.words[C]|0,x=y.words[C]|0;if(g!==x){g<x?E=-1:g>x&&(E=1);break}}return E},i.prototype.gtn=function(y){return this.cmpn(y)===1},i.prototype.gt=function(y){return this.cmp(y)===1},i.prototype.gten=function(y){return this.cmpn(y)>=0},i.prototype.gte=function(y){return this.cmp(y)>=0},i.prototype.ltn=function(y){return this.cmpn(y)===-1},i.prototype.lt=function(y){return this.cmp(y)===-1},i.prototype.lten=function(y){return this.cmpn(y)<=0},i.prototype.lte=function(y){return this.cmp(y)<=0},i.prototype.eqn=function(y){return this.cmpn(y)===0},i.prototype.eq=function(y){return this.cmp(y)===0},i.red=function(y){return new P(y)},i.prototype.toRed=function(y){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(y){return this.red=y,this},i.prototype.forceRed=function(y){return r(!this.red,"Already a number in reduction context"),this._forceRed(y)},i.prototype.redAdd=function(y){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},i.prototype.redIAdd=function(y){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},i.prototype.redSub=function(y){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},i.prototype.redISub=function(y){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},i.prototype.redShl=function(y){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},i.prototype.redMul=function(y){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},i.prototype.redIMul=function(y){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(y){return r(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var A={k256:null,p224:null,p192:null,p25519:null};function N(M,y){this.name=M,this.p=new i(y,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}N.prototype._tmp=function(){var y=new i(null);return y.words=new Array(Math.ceil(this.n/13)),y},N.prototype.ireduce=function(y){var E=y,C;do this.split(E,this.tmp),E=this.imulK(E),E=E.iadd(this.tmp),C=E.bitLength();while(C>this.n);var g=C<this.n?-1:E.ucmp(this.p);return g===0?(E.words[0]=0,E.length=1):g>0?E.isub(this.p):E.strip!==void 0?E.strip():E._strip(),E},N.prototype.split=function(y,E){y.iushrn(this.n,0,E)},N.prototype.imulK=function(y){return y.imul(this.k)};function R(){N.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}a(R,N),R.prototype.split=function(y,E){for(var C=4194303,g=Math.min(y.length,9),x=0;x<g;x++)E.words[x]=y.words[x];if(E.length=g,y.length<=9){y.words[0]=0,y.length=1;return}var O=y.words[9];for(E.words[E.length++]=O&C,x=10;x<y.length;x++){var S=y.words[x]|0;y.words[x-10]=(S&C)<<4|O>>>22,O=S}O>>>=22,y.words[x-10]=O,O===0&&y.length>10?y.length-=10:y.length-=9},R.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var E=0,C=0;C<y.length;C++){var g=y.words[C]|0;E+=g*977,y.words[C]=E&67108863,E=g*64+(E/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function B(){N.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}a(B,N);function F(){N.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}a(F,N);function I(){N.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}a(I,N),I.prototype.imulK=function(y){for(var E=0,C=0;C<y.length;C++){var g=(y.words[C]|0)*19+E,x=g&67108863;g>>>=26,y.words[C]=x,E=g}return E!==0&&(y.words[y.length++]=E),y},i._prime=function(y){if(A[y])return A[y];var E;if(y==="k256")E=new R;else if(y==="p224")E=new B;else if(y==="p192")E=new F;else if(y==="p25519")E=new I;else throw new Error("Unknown prime "+y);return A[y]=E,E};function P(M){if(typeof M=="string"){var y=i._prime(M);this.m=y.p,this.prime=y}else r(M.gtn(1),"modulus must be greater than 1"),this.m=M,this.prime=null}P.prototype._verify1=function(y){r(y.negative===0,"red works only with positives"),r(y.red,"red works only with red numbers")},P.prototype._verify2=function(y,E){r((y.negative|E.negative)===0,"red works only with positives"),r(y.red&&y.red===E.red,"red works only with red numbers")},P.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):y.umod(this.m)._forceRed(this)},P.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},P.prototype.add=function(y,E){this._verify2(y,E);var C=y.add(E);return C.cmp(this.m)>=0&&C.isub(this.m),C._forceRed(this)},P.prototype.iadd=function(y,E){this._verify2(y,E);var C=y.iadd(E);return C.cmp(this.m)>=0&&C.isub(this.m),C},P.prototype.sub=function(y,E){this._verify2(y,E);var C=y.sub(E);return C.cmpn(0)<0&&C.iadd(this.m),C._forceRed(this)},P.prototype.isub=function(y,E){this._verify2(y,E);var C=y.isub(E);return C.cmpn(0)<0&&C.iadd(this.m),C},P.prototype.shl=function(y,E){return this._verify1(y),this.imod(y.ushln(E))},P.prototype.imul=function(y,E){return this._verify2(y,E),this.imod(y.imul(E))},P.prototype.mul=function(y,E){return this._verify2(y,E),this.imod(y.mul(E))},P.prototype.isqr=function(y){return this.imul(y,y.clone())},P.prototype.sqr=function(y){return this.mul(y,y)},P.prototype.sqrt=function(y){if(y.isZero())return y.clone();var E=this.m.andln(3);if(r(E%2===1),E===3){var C=this.m.add(new i(1)).iushrn(2);return this.pow(y,C)}for(var g=this.m.subn(1),x=0;!g.isZero()&&g.andln(1)===0;)x++,g.iushrn(1);r(!g.isZero());var O=new i(1).toRed(this),S=O.redNeg(),w=this.m.subn(1).iushrn(1),_=this.m.bitLength();for(_=new i(2*_*_).toRed(this);this.pow(_,w).cmp(S)!==0;)_.redIAdd(S);for(var k=this.pow(_,g),L=this.pow(y,g.addn(1).iushrn(1)),D=this.pow(y,g),U=x;D.cmp(O)!==0;){for(var j=D,H=0;j.cmp(O)!==0;H++)j=j.redSqr();r(H<U);var W=this.pow(k,new i(1).iushln(U-H-1));L=L.redMul(W),k=W.redSqr(),D=D.redMul(k),U=H}return L},P.prototype.invm=function(y){var E=y._invmp(this.m);return E.negative!==0?(E.negative=0,this.imod(E).redNeg()):this.imod(E)},P.prototype.pow=function(y,E){if(E.isZero())return new i(1).toRed(this);if(E.cmpn(1)===0)return y.clone();var C=4,g=new Array(1<<C);g[0]=new i(1).toRed(this),g[1]=y;for(var x=2;x<g.length;x++)g[x]=this.mul(g[x-1],y);var O=g[0],S=0,w=0,_=E.bitLength()%26;for(_===0&&(_=26),x=E.length-1;x>=0;x--){for(var k=E.words[x],L=_-1;L>=0;L--){var D=k>>L&1;if(O!==g[0]&&(O=this.sqr(O)),D===0&&S===0){w=0;continue}S<<=1,S|=D,w++,!(w!==C&&(x!==0||L!==0))&&(O=this.mul(O,g[S]),w=0,S=0)}_=26}return O},P.prototype.convertTo=function(y){var E=y.umod(this.m);return E===y?E.clone():E},P.prototype.convertFrom=function(y){var E=y.clone();return E.red=null,E},i.mont=function(y){return new $(y)};function $(M){P.call(this,M),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}a($,P),$.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},$.prototype.convertFrom=function(y){var E=this.imod(y.mul(this.rinv));return E.red=null,E},$.prototype.imul=function(y,E){if(y.isZero()||E.isZero())return y.words[0]=0,y.length=1,y;var C=y.imul(E),g=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=C.isub(g).iushrn(this.shift),O=x;return x.cmp(this.m)>=0?O=x.isub(this.m):x.cmpn(0)<0&&(O=x.iadd(this.m)),O._forceRed(this)},$.prototype.mul=function(y,E){if(y.isZero()||E.isZero())return new i(0)._forceRed(this);var C=y.mul(E),g=C.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=C.isub(g).iushrn(this.shift),O=x;return x.cmp(this.m)>=0?O=x.isub(this.m):x.cmpn(0)<0&&(O=x.iadd(this.m)),O._forceRed(this)},$.prototype.invm=function(y){var E=this.imod(y._invmp(this.m).mul(this.r2));return E._forceRed(this)}})(t,vt)})(dE);var Xo=dE.exports,lE={};(function(t){var e=t;function n(i,s){if(Array.isArray(i))return i.slice();if(!i)return[];var o=[];if(typeof i!="string"){for(var c=0;c<i.length;c++)o[c]=i[c]|0;return o}if(s==="hex"){i=i.replace(/[^a-z0-9]+/ig,""),i.length%2!==0&&(i="0"+i);for(var c=0;c<i.length;c+=2)o.push(parseInt(i[c]+i[c+1],16))}else for(var c=0;c<i.length;c++){var d=i.charCodeAt(c),l=d>>8,u=d&255;l?o.push(l,u):o.push(u)}return o}e.toArray=n;function r(i){return i.length===1?"0"+i:i}e.zero2=r;function a(i){for(var s="",o=0;o<i.length;o++)s+=r(i[o].toString(16));return s}e.toHex=a,e.encode=function(s,o){return o==="hex"?a(s):s}})(lE);(function(t){var e=t,n=Xo,r=Kd,a=lE;e.assert=r,e.toArray=a.toArray,e.zero2=a.zero2,e.toHex=a.toHex,e.encode=a.encode;function i(l,u,f){var p=new Array(Math.max(l.bitLength(),f)+1),h;for(h=0;h<p.length;h+=1)p[h]=0;var b=1<<u+1,v=l.clone();for(h=0;h<p.length;h++){var m,T=v.andln(b-1);v.isOdd()?(T>(b>>1)-1?m=(b>>1)-T:m=T,v.isubn(m)):m=0,p[h]=m,v.iushrn(1)}return p}e.getNAF=i;function s(l,u){var f=[[],[]];l=l.clone(),u=u.clone();for(var p=0,h=0,b;l.cmpn(-p)>0||u.cmpn(-h)>0;){var v=l.andln(3)+p&3,m=u.andln(3)+h&3;v===3&&(v=-1),m===3&&(m=-1);var T;v&1?(b=l.andln(7)+p&7,(b===3||b===5)&&m===2?T=-v:T=v):T=0,f[0].push(T);var A;m&1?(b=u.andln(7)+h&7,(b===3||b===5)&&v===2?A=-m:A=m):A=0,f[1].push(A),2*p===T+1&&(p=1-p),2*h===A+1&&(h=1-h),l.iushrn(1),u.iushrn(1)}return f}e.getJSF=s;function o(l,u,f){var p="_"+u;l.prototype[u]=function(){return this[p]!==void 0?this[p]:this[p]=f.call(this)}}e.cachedProperty=o;function c(l){return typeof l=="string"?e.toArray(l,"hex"):l}e.parseBytes=c;function d(l){return new n(l,"hex","le")}e.intFromLE=d})(Na);var uE={exports:{}},xm;uE.exports=function(e){return xm||(xm=new Yc(null)),xm.generate(e)};function Yc(t){this.rand=t}uE.exports.Rand=Yc;Yc.prototype.generate=function(e){return this._rand(e)};Yc.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var n=new Uint8Array(e),r=0;r<n.length;r++)n[r]=this.rand.getByte();return n};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?Yc.prototype._rand=function(e){var n=new Uint8Array(e);return self.crypto.getRandomValues(n),n}:self.msCrypto&&self.msCrypto.getRandomValues?Yc.prototype._rand=function(e){var n=new Uint8Array(e);return self.msCrypto.getRandomValues(n),n}:typeof window=="object"&&(Yc.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var KS=yR;if(typeof KS.randomBytes!="function")throw new Error("Not supported");Yc.prototype._rand=function(e){return KS.randomBytes(e)}}catch{}var YR=uE.exports,fE={},x1=Xo,Ip=Na,R2=Ip.getNAF,YX=Ip.getJSF,D2=Ip.assert;function m1(t,e){this.type=t,this.p=new x1(e.p,16),this.red=e.prime?x1.red(e.prime):x1.mont(this.p),this.zero=new x1(0).toRed(this.red),this.one=new x1(1).toRed(this.red),this.two=new x1(2).toRed(this.red),this.n=e.n&&new x1(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var dy=m1;m1.prototype.point=function(){throw new Error("Not implemented")};m1.prototype.validate=function(){throw new Error("Not implemented")};m1.prototype._fixedNafMul=function(e,n){D2(e.precomputed);var r=e._getDoubles(),a=R2(n,1,this._bitLength),i=(1<<r.step+1)-(r.step%2===0?2:1);i/=3;var s=[],o,c;for(o=0;o<a.length;o+=r.step){c=0;for(var d=o+r.step-1;d>=o;d--)c=(c<<1)+a[d];s.push(c)}for(var l=this.jpoint(null,null,null),u=this.jpoint(null,null,null),f=i;f>0;f--){for(o=0;o<s.length;o++)c=s[o],c===f?u=u.mixedAdd(r.points[o]):c===-f&&(u=u.mixedAdd(r.points[o].neg()));l=l.add(u)}return l.toP()};m1.prototype._wnafMul=function(e,n){var r=4,a=e._getNAFPoints(r);r=a.wnd;for(var i=a.points,s=R2(n,r,this._bitLength),o=this.jpoint(null,null,null),c=s.length-1;c>=0;c--){for(var d=0;c>=0&&s[c]===0;c--)d++;if(c>=0&&d++,o=o.dblp(d),c<0)break;var l=s[c];D2(l!==0),e.type==="affine"?l>0?o=o.mixedAdd(i[l-1>>1]):o=o.mixedAdd(i[-l-1>>1].neg()):l>0?o=o.add(i[l-1>>1]):o=o.add(i[-l-1>>1].neg())}return e.type==="affine"?o.toP():o};m1.prototype._wnafMulAdd=function(e,n,r,a,i){var s=this._wnafT1,o=this._wnafT2,c=this._wnafT3,d=0,l,u,f;for(l=0;l<a;l++){f=n[l];var p=f._getNAFPoints(e);s[l]=p.wnd,o[l]=p.points}for(l=a-1;l>=1;l-=2){var h=l-1,b=l;if(s[h]!==1||s[b]!==1){c[h]=R2(r[h],s[h],this._bitLength),c[b]=R2(r[b],s[b],this._bitLength),d=Math.max(c[h].length,d),d=Math.max(c[b].length,d);continue}var v=[n[h],null,null,n[b]];n[h].y.cmp(n[b].y)===0?(v[1]=n[h].add(n[b]),v[2]=n[h].toJ().mixedAdd(n[b].neg())):n[h].y.cmp(n[b].y.redNeg())===0?(v[1]=n[h].toJ().mixedAdd(n[b]),v[2]=n[h].add(n[b].neg())):(v[1]=n[h].toJ().mixedAdd(n[b]),v[2]=n[h].toJ().mixedAdd(n[b].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],T=YX(r[h],r[b]);for(d=Math.max(T[0].length,d),c[h]=new Array(d),c[b]=new Array(d),u=0;u<d;u++){var A=T[0][u]|0,N=T[1][u]|0;c[h][u]=m[(A+1)*3+(N+1)],c[b][u]=0,o[h]=v}}var R=this.jpoint(null,null,null),B=this._wnafT4;for(l=d;l>=0;l--){for(var F=0;l>=0;){var I=!0;for(u=0;u<a;u++)B[u]=c[u][l]|0,B[u]!==0&&(I=!1);if(!I)break;F++,l--}if(l>=0&&F++,R=R.dblp(F),l<0)break;for(u=0;u<a;u++){var P=B[u];P!==0&&(P>0?f=o[u][P-1>>1]:P<0&&(f=o[u][-P-1>>1].neg()),f.type==="affine"?R=R.mixedAdd(f):R=R.add(f))}}for(l=0;l<a;l++)o[l]=null;return i?R:R.toP()};function hi(t,e){this.curve=t,this.type=e,this.precomputed=null}m1.BasePoint=hi;hi.prototype.eq=function(){throw new Error("Not implemented")};hi.prototype.validate=function(){return this.curve.validate(this)};m1.prototype.decodePoint=function(e,n){e=Ip.toArray(e,n);var r=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*r){e[0]===6?D2(e[e.length-1]%2===0):e[0]===7&&D2(e[e.length-1]%2===1);var a=this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));return a}else if((e[0]===2||e[0]===3)&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),e[0]===3);throw new Error("Unknown point format")};hi.prototype.encodeCompressed=function(e){return this.encode(e,!0)};hi.prototype._encode=function(e){var n=this.curve.p.byteLength(),r=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",n))};hi.prototype.encode=function(e,n){return Ip.encode(this._encode(n),e)};hi.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};hi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};hi.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],a=this,i=0;i<n;i+=e){for(var s=0;s<e;s++)a=a.dbl();r.push(a)}return{step:e,points:r}};hi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],r=(1<<e)-1,a=r===1?null:this.dbl(),i=1;i<r;i++)n[i]=n[i-1].add(a);return{wnd:e,points:n}};hi.prototype._getBeta=function(){return null};hi.prototype.dblp=function(e){for(var n=this,r=0;r<e;r++)n=n.dbl();return n};var JX=Na,jn=Xo,pE=Gi,fu=dy,ZX=JX.assert;function bi(t){fu.call(this,"short",t),this.a=new jn(t.a,16).toRed(this.red),this.b=new jn(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}pE(bi,fu);var XX=bi;bi.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,r;if(e.beta)n=new jn(e.beta,16).toRed(this.red);else{var a=this._getEndoRoots(this.p);n=a[0].cmp(a[1])<0?a[0]:a[1],n=n.toRed(this.red)}if(e.lambda)r=new jn(e.lambda,16);else{var i=this._getEndoRoots(this.n);this.g.mul(i[0]).x.cmp(this.g.x.redMul(n))===0?r=i[0]:(r=i[1],ZX(this.g.mul(r).x.cmp(this.g.x.redMul(n))===0))}var s;return e.basis?s=e.basis.map(function(o){return{a:new jn(o.a,16),b:new jn(o.b,16)}}):s=this._getEndoBasis(r),{beta:n,lambda:r,basis:s}}};bi.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:jn.mont(e),r=new jn(2).toRed(n).redInvm(),a=r.redNeg(),i=new jn(3).toRed(n).redNeg().redSqrt().redMul(r),s=a.redAdd(i).fromRed(),o=a.redSub(i).fromRed();return[s,o]};bi.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),r=e,a=this.n.clone(),i=new jn(1),s=new jn(0),o=new jn(0),c=new jn(1),d,l,u,f,p,h,b,v=0,m,T;r.cmpn(0)!==0;){var A=a.div(r);m=a.sub(A.mul(r)),T=o.sub(A.mul(i));var N=c.sub(A.mul(s));if(!u&&m.cmp(n)<0)d=b.neg(),l=i,u=m.neg(),f=T;else if(u&&++v===2)break;b=m,a=r,r=m,o=i,i=T,c=s,s=N}p=m.neg(),h=T;var R=u.sqr().add(f.sqr()),B=p.sqr().add(h.sqr());return B.cmp(R)>=0&&(p=d,h=l),u.negative&&(u=u.neg(),f=f.neg()),p.negative&&(p=p.neg(),h=h.neg()),[{a:u,b:f},{a:p,b:h}]};bi.prototype._endoSplit=function(e){var n=this.endo.basis,r=n[0],a=n[1],i=a.b.mul(e).divRound(this.n),s=r.b.neg().mul(e).divRound(this.n),o=i.mul(r.a),c=s.mul(a.a),d=i.mul(r.b),l=s.mul(a.b),u=e.sub(o).sub(c),f=d.add(l).neg();return{k1:u,k2:f}};bi.prototype.pointFromX=function(e,n){e=new jn(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),a=r.redSqrt();if(a.redSqr().redSub(r).cmp(this.zero)!==0)throw new Error("invalid point");var i=a.fromRed().isOdd();return(n&&!i||!n&&i)&&(a=a.redNeg()),this.point(e,a)};bi.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,r=e.y,a=this.a.redMul(n),i=n.redSqr().redMul(n).redIAdd(a).redIAdd(this.b);return r.redSqr().redISub(i).cmpn(0)===0};bi.prototype._endoWnafMulAdd=function(e,n,r){for(var a=this._endoWnafT1,i=this._endoWnafT2,s=0;s<e.length;s++){var o=this._endoSplit(n[s]),c=e[s],d=c._getBeta();o.k1.negative&&(o.k1.ineg(),c=c.neg(!0)),o.k2.negative&&(o.k2.ineg(),d=d.neg(!0)),a[s*2]=c,a[s*2+1]=d,i[s*2]=o.k1,i[s*2+1]=o.k2}for(var l=this._wnafMulAdd(1,a,i,s*2,r),u=0;u<s*2;u++)a[u]=null,i[u]=null;return l};function D0(t,e,n,r){fu.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new jn(e,16),this.y=new jn(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}pE(D0,fu.BasePoint);bi.prototype.point=function(e,n,r){return new D0(this,e,n,r)};bi.prototype.pointFromJSON=function(e,n){return D0.fromJSON(this,e,n)};D0.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,a=function(i){return r.point(i.x.redMul(r.endo.beta),i.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(a)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(a)}}}return n}};D0.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};D0.fromJSON=function(e,n,r){typeof n=="string"&&(n=JSON.parse(n));var a=e.point(n[0],n[1],r);if(!n[2])return a;function i(o){return e.point(o[0],o[1],r)}var s=n[2];return a.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[a].concat(s.doubles.points.map(i))},naf:s.naf&&{wnd:s.naf.wnd,points:[a].concat(s.naf.points.map(i))}},a};D0.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};D0.prototype.isInfinity=function(){return this.inf};D0.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var r=n.redSqr().redISub(this.x).redISub(e.x),a=n.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,a)};D0.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,r=this.x.redSqr(),a=e.redInvm(),i=r.redAdd(r).redIAdd(r).redIAdd(n).redMul(a),s=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)};D0.prototype.getX=function(){return this.x.fromRed()};D0.prototype.getY=function(){return this.y.fromRed()};D0.prototype.mul=function(e){return e=new jn(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};D0.prototype.mulAdd=function(e,n,r){var a=[this,n],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(a,i):this.curve._wnafMulAdd(1,a,i,2)};D0.prototype.jmulAdd=function(e,n,r){var a=[this,n],i=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(a,i,!0):this.curve._wnafMulAdd(1,a,i,2,!0)};D0.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};D0.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,a=function(i){return i.neg()};n.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(a)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(a)}}}return n};D0.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function J0(t,e,n,r){fu.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&r===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new jn(0)):(this.x=new jn(e,16),this.y=new jn(n,16),this.z=new jn(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}pE(J0,fu.BasePoint);bi.prototype.jpoint=function(e,n,r){return new J0(this,e,n,r)};J0.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),r=this.x.redMul(n),a=this.y.redMul(n).redMul(e);return this.curve.point(r,a)};J0.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};J0.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),r=this.z.redSqr(),a=this.x.redMul(n),i=e.x.redMul(r),s=this.y.redMul(n.redMul(e.z)),o=e.y.redMul(r.redMul(this.z)),c=a.redSub(i),d=s.redSub(o);if(c.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var l=c.redSqr(),u=l.redMul(c),f=a.redMul(l),p=d.redSqr().redIAdd(u).redISub(f).redISub(f),h=d.redMul(f.redISub(p)).redISub(s.redMul(u)),b=this.z.redMul(e.z).redMul(c);return this.curve.jpoint(p,h,b)};J0.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),r=this.x,a=e.x.redMul(n),i=this.y,s=e.y.redMul(n).redMul(this.z),o=r.redSub(a),c=i.redSub(s);if(o.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=o.redSqr(),l=d.redMul(o),u=r.redMul(d),f=c.redSqr().redIAdd(l).redISub(u).redISub(u),p=c.redMul(u.redISub(f)).redISub(i.redMul(l)),h=this.z.redMul(o);return this.curve.jpoint(f,p,h)};J0.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var r=this;for(n=0;n<e;n++)r=r.dbl();return r}var a=this.curve.a,i=this.curve.tinv,s=this.x,o=this.y,c=this.z,d=c.redSqr().redSqr(),l=o.redAdd(o);for(n=0;n<e;n++){var u=s.redSqr(),f=l.redSqr(),p=f.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(a.redMul(d)),b=s.redMul(f),v=h.redSqr().redISub(b.redAdd(b)),m=b.redISub(v),T=h.redMul(m);T=T.redIAdd(T).redISub(p);var A=l.redMul(c);n+1<e&&(d=d.redMul(p)),s=v,c=A,l=T}return this.curve.jpoint(s,l.redMul(i),c)};J0.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};J0.prototype._zeroDbl=function(){var e,n,r;if(this.zOne){var a=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(a).redISub(s);o=o.redIAdd(o);var c=a.redAdd(a).redIAdd(a),d=c.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=l.redIAdd(l),l=l.redIAdd(l),e=d,n=c.redMul(o.redISub(d)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),f=this.y.redSqr(),p=f.redSqr(),h=this.x.redAdd(f).redSqr().redISub(u).redISub(p);h=h.redIAdd(h);var b=u.redAdd(u).redIAdd(u),v=b.redSqr(),m=p.redIAdd(p);m=m.redIAdd(m),m=m.redIAdd(m),e=v.redISub(h).redISub(h),n=b.redMul(h.redISub(e)).redISub(m),r=this.y.redMul(this.z),r=r.redIAdd(r)}return this.curve.jpoint(e,n,r)};J0.prototype._threeDbl=function(){var e,n,r;if(this.zOne){var a=this.x.redSqr(),i=this.y.redSqr(),s=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(a).redISub(s);o=o.redIAdd(o);var c=a.redAdd(a).redIAdd(a).redIAdd(this.curve.a),d=c.redSqr().redISub(o).redISub(o);e=d;var l=s.redIAdd(s);l=l.redIAdd(l),l=l.redIAdd(l),n=c.redMul(o.redISub(d)).redISub(l),r=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),f=this.y.redSqr(),p=this.x.redMul(f),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var b=p.redIAdd(p);b=b.redIAdd(b);var v=b.redAdd(b);e=h.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(f).redISub(u);var m=f.redSqr();m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m),n=h.redMul(b.redISub(e)).redISub(m)}return this.curve.jpoint(e,n,r)};J0.prototype._dbl=function(){var e=this.curve.a,n=this.x,r=this.y,a=this.z,i=a.redSqr().redSqr(),s=n.redSqr(),o=r.redSqr(),c=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(i)),d=n.redAdd(n);d=d.redIAdd(d);var l=d.redMul(o),u=c.redSqr().redISub(l.redAdd(l)),f=l.redISub(u),p=o.redSqr();p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var h=c.redMul(f).redISub(p),b=r.redAdd(r).redMul(a);return this.curve.jpoint(u,h,b)};J0.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),r=this.z.redSqr(),a=n.redSqr(),i=e.redAdd(e).redIAdd(e),s=i.redSqr(),o=this.x.redAdd(n).redSqr().redISub(e).redISub(a);o=o.redIAdd(o),o=o.redAdd(o).redIAdd(o),o=o.redISub(s);var c=o.redSqr(),d=a.redIAdd(a);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var l=i.redIAdd(o).redSqr().redISub(s).redISub(c).redISub(d),u=n.redMul(l);u=u.redIAdd(u),u=u.redIAdd(u);var f=this.x.redMul(c).redISub(u);f=f.redIAdd(f),f=f.redIAdd(f);var p=this.y.redMul(l.redMul(d.redISub(l)).redISub(o.redMul(c)));p=p.redIAdd(p),p=p.redIAdd(p),p=p.redIAdd(p);var h=this.z.redAdd(o).redSqr().redISub(r).redISub(c);return this.curve.jpoint(f,p,h)};J0.prototype.mul=function(e,n){return e=new jn(e,n),this.curve._wnafMul(this,e)};J0.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),r=e.z.redSqr();if(this.x.redMul(r).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var a=n.redMul(this.z),i=r.redMul(e.z);return this.y.redMul(i).redISub(e.y.redMul(a)).cmpn(0)===0};J0.prototype.eqXToP=function(e){var n=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(r)===0)return!0;for(var a=e.clone(),i=this.curve.redN.redMul(n);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(i),this.x.cmp(r)===0)return!0}};J0.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};J0.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Vl=Xo,JR=Gi,ly=dy,QX=Na;function pu(t){ly.call(this,"mont",t),this.a=new Vl(t.a,16).toRed(this.red),this.b=new Vl(t.b,16).toRed(this.red),this.i4=new Vl(4).toRed(this.red).redInvm(),this.two=new Vl(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}JR(pu,ly);var eQ=pu;pu.prototype.validate=function(e){var n=e.normalize().x,r=n.redSqr(),a=r.redMul(n).redAdd(r.redMul(this.a)).redAdd(n),i=a.redSqrt();return i.redSqr().cmp(a)===0};function R0(t,e,n){ly.BasePoint.call(this,t,"projective"),e===null&&n===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Vl(e,16),this.z=new Vl(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}JR(R0,ly.BasePoint);pu.prototype.decodePoint=function(e,n){return this.point(QX.toArray(e,n),1)};pu.prototype.point=function(e,n){return new R0(this,e,n)};pu.prototype.pointFromJSON=function(e){return R0.fromJSON(this,e)};R0.prototype.precompute=function(){};R0.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};R0.fromJSON=function(e,n){return new R0(e,n[0],n[1]||e.one)};R0.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};R0.prototype.isInfinity=function(){return this.z.cmpn(0)===0};R0.prototype.dbl=function(){var e=this.x.redAdd(this.z),n=e.redSqr(),r=this.x.redSub(this.z),a=r.redSqr(),i=n.redSub(a),s=n.redMul(a),o=i.redMul(a.redAdd(this.curve.a24.redMul(i)));return this.curve.point(s,o)};R0.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};R0.prototype.diffAdd=function(e,n){var r=this.x.redAdd(this.z),a=this.x.redSub(this.z),i=e.x.redAdd(e.z),s=e.x.redSub(e.z),o=s.redMul(r),c=i.redMul(a),d=n.z.redMul(o.redAdd(c).redSqr()),l=n.x.redMul(o.redISub(c).redSqr());return this.curve.point(d,l)};R0.prototype.mul=function(e){for(var n=e.clone(),r=this,a=this.curve.point(null,null),i=this,s=[];n.cmpn(0)!==0;n.iushrn(1))s.push(n.andln(1));for(var o=s.length-1;o>=0;o--)s[o]===0?(r=r.diffAdd(a,i),a=a.dbl()):(a=r.diffAdd(a,i),r=r.dbl());return a};R0.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};R0.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};R0.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};R0.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};R0.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var tQ=Na,Oo=Xo,ZR=Gi,uy=dy,nQ=tQ.assert;function Gs(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,uy.call(this,"edwards",t),this.a=new Oo(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Oo(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Oo(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),nQ(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}ZR(Gs,uy);var rQ=Gs;Gs.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};Gs.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};Gs.prototype.jpoint=function(e,n,r,a){return this.point(e,n,r,a)};Gs.prototype.pointFromX=function(e,n){e=new Oo(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),a=this.c2.redSub(this.a.redMul(r)),i=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=a.redMul(i.redInvm()),o=s.redSqrt();if(o.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(n&&!c||!n&&c)&&(o=o.redNeg()),this.point(e,o)};Gs.prototype.pointFromY=function(e,n){e=new Oo(e,16),e.red||(e=e.toRed(this.red));var r=e.redSqr(),a=r.redSub(this.c2),i=r.redMul(this.d).redMul(this.c2).redSub(this.a),s=a.redMul(i.redInvm());if(s.cmp(this.zero)===0){if(n)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(o.redSqr().redSub(s).cmp(this.zero)!==0)throw new Error("invalid point");return o.fromRed().isOdd()!==n&&(o=o.redNeg()),this.point(o,e)};Gs.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var n=e.x.redSqr(),r=e.y.redSqr(),a=n.redMul(this.a).redAdd(r),i=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(r)));return a.cmp(i)===0};function vn(t,e,n,r,a){uy.BasePoint.call(this,t,"projective"),e===null&&n===null&&r===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Oo(e,16),this.y=new Oo(n,16),this.z=r?new Oo(r,16):this.curve.one,this.t=a&&new Oo(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}ZR(vn,uy.BasePoint);Gs.prototype.pointFromJSON=function(e){return vn.fromJSON(this,e)};Gs.prototype.point=function(e,n,r,a){return new vn(this,e,n,r,a)};vn.fromJSON=function(e,n){return new vn(e,n[0],n[1],n[2])};vn.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};vn.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};vn.prototype._extDbl=function(){var e=this.x.redSqr(),n=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var a=this.curve._mulA(e),i=this.x.redAdd(this.y).redSqr().redISub(e).redISub(n),s=a.redAdd(n),o=s.redSub(r),c=a.redSub(n),d=i.redMul(o),l=s.redMul(c),u=i.redMul(c),f=o.redMul(s);return this.curve.point(d,l,f,u)};vn.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),r=this.y.redSqr(),a,i,s,o,c,d;if(this.curve.twisted){o=this.curve._mulA(n);var l=o.redAdd(r);this.zOne?(a=e.redSub(n).redSub(r).redMul(l.redSub(this.curve.two)),i=l.redMul(o.redSub(r)),s=l.redSqr().redSub(l).redSub(l)):(c=this.z.redSqr(),d=l.redSub(c).redISub(c),a=e.redSub(n).redISub(r).redMul(d),i=l.redMul(o.redSub(r)),s=l.redMul(d))}else o=n.redAdd(r),c=this.curve._mulC(this.z).redSqr(),d=o.redSub(c).redSub(c),a=this.curve._mulC(e.redISub(o)).redMul(d),i=this.curve._mulC(o).redMul(n.redISub(r)),s=o.redMul(d);return this.curve.point(a,i,s)};vn.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};vn.prototype._extAdd=function(e){var n=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),a=this.t.redMul(this.curve.dd).redMul(e.t),i=this.z.redMul(e.z.redAdd(e.z)),s=r.redSub(n),o=i.redSub(a),c=i.redAdd(a),d=r.redAdd(n),l=s.redMul(o),u=c.redMul(d),f=s.redMul(d),p=o.redMul(c);return this.curve.point(l,u,p,f)};vn.prototype._projAdd=function(e){var n=this.z.redMul(e.z),r=n.redSqr(),a=this.x.redMul(e.x),i=this.y.redMul(e.y),s=this.curve.d.redMul(a).redMul(i),o=r.redSub(s),c=r.redAdd(s),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(i),l=n.redMul(o).redMul(d),u,f;return this.curve.twisted?(u=n.redMul(c).redMul(i.redSub(this.curve._mulA(a))),f=o.redMul(c)):(u=n.redMul(c).redMul(i.redSub(a)),f=this.curve._mulC(o).redMul(c)),this.curve.point(l,u,f)};vn.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};vn.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};vn.prototype.mulAdd=function(e,n,r){return this.curve._wnafMulAdd(1,[this,n],[e,r],2,!1)};vn.prototype.jmulAdd=function(e,n,r){return this.curve._wnafMulAdd(1,[this,n],[e,r],2,!0)};vn.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};vn.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};vn.prototype.getX=function(){return this.normalize(),this.x.fromRed()};vn.prototype.getY=function(){return this.normalize(),this.y.fromRed()};vn.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};vn.prototype.eqXToP=function(e){var n=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(n)===0)return!0;for(var r=e.clone(),a=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(a),this.x.cmp(n)===0)return!0}};vn.prototype.toP=vn.prototype.normalize;vn.prototype.mixedAdd=vn.prototype.add;(function(t){var e=t;e.base=dy,e.short=XX,e.mont=eQ,e.edwards=rQ})(fE);var fy={},Sm,VS;function aQ(){return VS||(VS=1,Sm={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Sm}(function(t){var e=t,n=ay,r=fE,a=Na,i=a.assert;function s(d){d.type==="short"?this.curve=new r.short(d):d.type==="edwards"?this.curve=new r.edwards(d):this.curve=new r.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=s;function o(d,l){Object.defineProperty(e,d,{configurable:!0,enumerable:!0,get:function(){var u=new s(l);return Object.defineProperty(e,d,{configurable:!0,enumerable:!0,value:u}),u}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var c;try{c=aQ()}catch{c=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",c]})})(fy);var iQ=ay,ud=lE,XR=Kd;function u1(t){if(!(this instanceof u1))return new u1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=ud.toArray(t.entropy,t.entropyEnc||"hex"),n=ud.toArray(t.nonce,t.nonceEnc||"hex"),r=ud.toArray(t.pers,t.persEnc||"hex");XR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}var sQ=u1;u1.prototype._init=function(e,n,r){var a=e.concat(n).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(a),this._reseed=1,this.reseedInterval=281474976710656};u1.prototype._hmac=function(){return new iQ.hmac(this.hash,this.K)};u1.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};u1.prototype.reseed=function(e,n,r,a){typeof n!="string"&&(a=r,r=n,n=null),e=ud.toArray(e,n),r=ud.toArray(r,a),XR(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1};u1.prototype.generate=function(e,n,r,a){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(a=r,r=n,n=null),r&&(r=ud.toArray(r,a||"hex"),this._update(r));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(r),this._reseed++,ud.encode(s,n)};var oQ=Xo,cQ=Na,m4=cQ.assert;function fr(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var dQ=fr;fr.fromPublic=function(e,n,r){return n instanceof fr?n:new fr(e,{pub:n,pubEnc:r})};fr.fromPrivate=function(e,n,r){return n instanceof fr?n:new fr(e,{priv:n,privEnc:r})};fr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};fr.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};fr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};fr.prototype._importPrivate=function(e,n){this.priv=new oQ(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};fr.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?m4(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&m4(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};fr.prototype.derive=function(e){return e.validate()||m4(e.validate(),"public point not validated"),e.mul(this.priv).getX()};fr.prototype.sign=function(e,n,r){return this.ec.sign(e,this,n,r)};fr.prototype.verify=function(e,n,r){return this.ec.verify(e,n,this,void 0,r)};fr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var $2=Xo,hE=Na,lQ=hE.assert;function py(t,e){if(t instanceof py)return t;this._importDER(t,e)||(lQ(t.r&&t.s,"Signature without r or s"),this.r=new $2(t.r,16),this.s=new $2(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var uQ=py;function fQ(){this.place=0}function Am(t,e){var n=t[e.place++];if(!(n&128))return n;var r=n&15;if(r===0||r>4||t[e.place]===0)return!1;for(var a=0,i=0,s=e.place;i<r;i++,s++)a<<=8,a|=t[s],a>>>=0;return a<=127?!1:(e.place=s,a)}function WS(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}py.prototype._importDER=function(e,n){e=hE.toArray(e,n);var r=new fQ;if(e[r.place++]!==48)return!1;var a=Am(e,r);if(a===!1||a+r.place!==e.length||e[r.place++]!==2)return!1;var i=Am(e,r);if(i===!1||e[r.place]&128)return!1;var s=e.slice(r.place,i+r.place);if(r.place+=i,e[r.place++]!==2)return!1;var o=Am(e,r);if(o===!1||e.length!==o+r.place||e[r.place]&128)return!1;var c=e.slice(r.place,o+r.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(c[0]===0)if(c[1]&128)c=c.slice(1);else return!1;return this.r=new $2(s),this.s=new $2(c),this.recoveryParam=null,!0};function Cm(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}py.prototype.toDER=function(e){var n=this.r.toArray(),r=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),r[0]&128&&(r=[0].concat(r)),n=WS(n),r=WS(r);!r[0]&&!(r[1]&128);)r=r.slice(1);var a=[2];Cm(a,n.length),a=a.concat(n),a.push(2),Cm(a,r.length);var i=a.concat(r),s=[48];return Cm(s,i.length),s=s.concat(i),hE.encode(s,e)};var Di=Xo,QR=sQ,pQ=Na,Im=fy,hQ=YR,U1=pQ.assert,bE=dQ,hy=uQ;function pi(t){if(!(this instanceof pi))return new pi(t);typeof t=="string"&&(U1(Object.prototype.hasOwnProperty.call(Im,t),"Unknown curve "+t),t=Im[t]),t instanceof Im.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var bQ=pi;pi.prototype.keyPair=function(e){return new bE(this,e)};pi.prototype.keyFromPrivate=function(e,n){return bE.fromPrivate(this,e,n)};pi.prototype.keyFromPublic=function(e,n){return bE.fromPublic(this,e,n)};pi.prototype.genKeyPair=function(e){e||(e={});for(var n=new QR({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||hQ(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),a=this.n.sub(new Di(2));;){var i=new Di(n.generate(r));if(!(i.cmp(a)>0))return i.iaddn(1),this.keyFromPrivate(i)}};pi.prototype._truncateToN=function(e,n,r){var a;if(Di.isBN(e)||typeof e=="number")e=new Di(e,16),a=e.byteLength();else if(typeof e=="object")a=e.length,e=new Di(e,16);else{var i=e.toString();a=i.length+1>>>1,e=new Di(i,16)}typeof r!="number"&&(r=a*8);var s=r-this.n.bitLength();return s>0&&(e=e.ushrn(s)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};pi.prototype.sign=function(e,n,r,a){if(typeof r=="object"&&(a=r,r=null),a||(a={}),typeof e!="string"&&typeof e!="number"&&!Di.isBN(e)){U1(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),U1(e.length>>>0===e.length);for(var i=0;i<e.length;i++)U1((e[i]&255)===e[i])}n=this.keyFromPrivate(n,r),e=this._truncateToN(e,!1,a.msgBitLength),U1(!e.isNeg(),"Can not sign a negative message");var s=this.n.byteLength(),o=n.getPrivate().toArray("be",s),c=e.toArray("be",s);U1(new Di(c).eq(e),"Can not sign message");for(var d=new QR({hash:this.hash,entropy:o,nonce:c,pers:a.pers,persEnc:a.persEnc||"utf8"}),l=this.n.sub(new Di(1)),u=0;;u++){var f=a.k?a.k(u):new Di(d.generate(this.n.byteLength()));if(f=this._truncateToN(f,!0),!(f.cmpn(1)<=0||f.cmp(l)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var h=p.getX(),b=h.umod(this.n);if(b.cmpn(0)!==0){var v=f.invm(this.n).mul(b.mul(n.getPrivate()).iadd(e));if(v=v.umod(this.n),v.cmpn(0)!==0){var m=(p.getY().isOdd()?1:0)|(h.cmp(b)!==0?2:0);return a.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),m^=1),new hy({r:b,s:v,recoveryParam:m})}}}}}};pi.prototype.verify=function(e,n,r,a,i){i||(i={}),e=this._truncateToN(e,!1,i.msgBitLength),r=this.keyFromPublic(r,a),n=new hy(n,"hex");var s=n.r,o=n.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c=o.invm(this.n),d=c.mul(e).umod(this.n),l=c.mul(s).umod(this.n),u;return this.curve._maxwellTrick?(u=this.g.jmulAdd(d,r.getPublic(),l),u.isInfinity()?!1:u.eqXToP(s)):(u=this.g.mulAdd(d,r.getPublic(),l),u.isInfinity()?!1:u.getX().umod(this.n).cmp(s)===0)};pi.prototype.recoverPubKey=function(t,e,n,r){U1((3&n)===n,"The recovery param is more than two bits"),e=new hy(e,r);var a=this.n,i=new Di(t),s=e.r,o=e.s,c=n&1,d=n>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");d?s=this.curve.pointFromX(s.add(this.curve.n),c):s=this.curve.pointFromX(s,c);var l=e.r.invm(a),u=a.sub(i).mul(l).umod(a),f=o.mul(l).umod(a);return this.g.mulAdd(u,s,f)};pi.prototype.getKeyRecoveryParam=function(t,e,n,r){if(e=new hy(e,r),e.recoveryParam!==null)return e.recoveryParam;for(var a=0;a<4;a++){var i;try{i=this.recoverPubKey(t,e,a)}catch{continue}if(i.eq(n))return a}throw new Error("Unable to find valid recovery factor")};var Op=Na,eD=Op.assert,GS=Op.parseBytes,hu=Op.cachedProperty;function N0(t,e){this.eddsa=t,this._secret=GS(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=GS(e.pub)}N0.fromPublic=function(e,n){return n instanceof N0?n:new N0(e,{pub:n})};N0.fromSecret=function(e,n){return n instanceof N0?n:new N0(e,{secret:n})};N0.prototype.secret=function(){return this._secret};hu(N0,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});hu(N0,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});hu(N0,"privBytes",function(){var e=this.eddsa,n=this.hash(),r=e.encodingLength-1,a=n.slice(0,e.encodingLength);return a[0]&=248,a[r]&=127,a[r]|=64,a});hu(N0,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});hu(N0,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});hu(N0,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});N0.prototype.sign=function(e){return eD(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};N0.prototype.verify=function(e,n){return this.eddsa.verify(e,n,this)};N0.prototype.getSecret=function(e){return eD(this._secret,"KeyPair is public only"),Op.encode(this.secret(),e)};N0.prototype.getPublic=function(e){return Op.encode(this.pubBytes(),e)};var yQ=N0,mQ=Xo,by=Na,YS=by.assert,yy=by.cachedProperty,gQ=by.parseBytes;function Vd(t,e){this.eddsa=t,typeof e!="object"&&(e=gQ(e)),Array.isArray(e)&&(YS(e.length===t.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),YS(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof mQ&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}yy(Vd,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});yy(Vd,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});yy(Vd,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});yy(Vd,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Vd.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Vd.prototype.toHex=function(){return by.encode(this.toBytes(),"hex").toUpperCase()};var wQ=Vd,vQ=ay,EQ=fy,k6=Na,_Q=k6.assert,tD=k6.parseBytes,nD=yQ,JS=wQ;function ra(t){if(_Q(t==="ed25519","only tested with ed25519 so far"),!(this instanceof ra))return new ra(t);t=EQ[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=vQ.sha512}var TQ=ra;ra.prototype.sign=function(e,n){e=tD(e);var r=this.keyFromSecret(n),a=this.hashInt(r.messagePrefix(),e),i=this.g.mul(a),s=this.encodePoint(i),o=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),c=a.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:s})};ra.prototype.verify=function(e,n,r){if(e=tD(e),n=this.makeSignature(n),n.S().gte(n.eddsa.curve.n)||n.S().isNeg())return!1;var a=this.keyFromPublic(r),i=this.hashInt(n.Rencoded(),a.pubBytes(),e),s=this.g.mul(n.S()),o=n.R().add(a.pub().mul(i));return o.eq(s)};ra.prototype.hashInt=function(){for(var e=this.hash(),n=0;n<arguments.length;n++)e.update(arguments[n]);return k6.intFromLE(e.digest()).umod(this.curve.n)};ra.prototype.keyFromPublic=function(e){return nD.fromPublic(this,e)};ra.prototype.keyFromSecret=function(e){return nD.fromSecret(this,e)};ra.prototype.makeSignature=function(e){return e instanceof JS?e:new JS(this,e)};ra.prototype.encodePoint=function(e){var n=e.getY().toArray("le",this.encodingLength);return n[this.encodingLength-1]|=e.getX().isOdd()?128:0,n};ra.prototype.decodePoint=function(e){e=k6.parseBytes(e);var n=e.length-1,r=e.slice(0,n).concat(e[n]&-129),a=(e[n]&128)!==0,i=k6.intFromLE(r);return this.curve.pointFromY(i,a)};ra.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};ra.prototype.decodeInt=function(e){return k6.intFromLE(e)};ra.prototype.isPoint=function(e){return e instanceof this.pointClass};(function(t){var e=t;e.version=GX.version,e.utils=Na,e.rand=YR,e.curve=fE,e.curves=fy,e.ec=bQ,e.eddsa=TQ})(Cp);const $e={GOOGLE:"google",TWITTER:"twitter",FACEBOOK:"facebook",DISCORD:"discord",FARCASTER:"farcaster",APPLE:"apple",GITHUB:"github",REDDIT:"reddit",LINE:"line",KAKAO:"kakao",LINKEDIN:"linkedin",TWITCH:"twitch",TELEGRAM:"telegram",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless",SMS_PASSWORDLESS:"sms_passwordless",CUSTOM:"custom",PASSKEYS:"passkeys",AUTHENTICATOR:"authenticator"},W0={POPUP:"popup",REDIRECT:"redirect"};var xQ=function(e){return SQ(e)&&!AQ(e)};function SQ(t){return!!t&&typeof t=="object"}function AQ(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||OQ(t)}var CQ=typeof Symbol=="function"&&Symbol.for,IQ=CQ?Symbol.for("react.element"):60103;function OQ(t){return t.$$typeof===IQ}function MQ(t){return Array.isArray(t)?[]:{}}function y5(t,e){return e.clone!==!1&&e.isMergeableObject(t)?N6(MQ(t),t,e):t}function PQ(t,e,n){return t.concat(e).map(function(r){return y5(r,n)})}function kQ(t,e){if(!e.customMerge)return N6;var n=e.customMerge(t);return typeof n=="function"?n:N6}function NQ(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function ZS(t){return Object.keys(t).concat(NQ(t))}function rD(t,e){try{return e in t}catch{return!1}}function RQ(t,e){return rD(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function DQ(t,e,n){var r={};return n.isMergeableObject(t)&&ZS(t).forEach(function(a){r[a]=y5(t[a],n)}),ZS(e).forEach(function(a){RQ(t,a)||(rD(t,a)&&n.isMergeableObject(e[a])?r[a]=kQ(a,n)(t[a],e[a],n):r[a]=y5(e[a],n))}),r}function N6(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||PQ,n.isMergeableObject=n.isMergeableObject||xQ,n.cloneUnlessOtherwiseSpecified=y5;var r=Array.isArray(e),a=Array.isArray(t),i=r===a;return i?r?n.arrayMerge(t,e,n):DQ(t,e,n):y5(e,n)}N6.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,a){return N6(r,a,n)},{})};var $Q=N6,LQ=$Q;const Kt=Wi(LQ);var aD={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(vt,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],i={},s=null;function o(b,v){var m=b[v];if(typeof m.bind=="function")return m.bind(b);try{return Function.prototype.bind.call(m,b)}catch{return function(){return Function.prototype.apply.apply(m,[b,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&r?c:console[b]!==void 0?o(console,b):console.log!==void 0?o(console,"log"):e}function l(){for(var b=this.getLevel(),v=0;v<a.length;v++){var m=a[v];this[m]=v<b?e:this.methodFactory(m,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function u(b){return function(){typeof console!==n&&(l.call(this),this[b].apply(this,arguments))}}function f(b,v,m){return d(b)||u.apply(this,arguments)}function p(b,v){var m=this,T,A,N,R="loglevel";typeof b=="string"?R+=":"+b:typeof b=="symbol"&&(R=void 0);function B(M){var y=(a[M]||"silent").toUpperCase();if(!(typeof window===n||!R)){try{window.localStorage[R]=y;return}catch{}try{window.document.cookie=encodeURIComponent(R)+"="+y+";"}catch{}}}function F(){var M;if(!(typeof window===n||!R)){try{M=window.localStorage[R]}catch{}if(typeof M===n)try{var y=window.document.cookie,E=encodeURIComponent(R),C=y.indexOf(E+"=");C!==-1&&(M=/^([^;]+)/.exec(y.slice(C+E.length+1))[1])}catch{}return m.levels[M]===void 0&&(M=void 0),M}}function I(){if(!(typeof window===n||!R)){try{window.localStorage.removeItem(R)}catch{}try{window.document.cookie=encodeURIComponent(R)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(M){var y=M;if(typeof y=="string"&&m.levels[y.toUpperCase()]!==void 0&&(y=m.levels[y.toUpperCase()]),typeof y=="number"&&y>=0&&y<=m.levels.SILENT)return y;throw new TypeError("log.setLevel() called with invalid level: "+M)}m.name=b,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=v||f,m.getLevel=function(){return N??A??T},m.setLevel=function(M,y){return N=P(M),y!==!1&&B(N),l.call(m)},m.setDefaultLevel=function(M){A=P(M),F()||m.setLevel(M,!1)},m.resetLevel=function(){N=null,I(),l.call(m)},m.enableAll=function(M){m.setLevel(m.levels.TRACE,M)},m.disableAll=function(M){m.setLevel(m.levels.SILENT,M)},m.rebuild=function(){if(s!==m&&(T=P(s.getLevel())),l.call(m),s===m)for(var M in i)i[M].rebuild()},T=P(s?s.getLevel():"WARN");var $=F();$!=null&&(N=P($)),l.call(m)}s=new p,s.getLogger=function(v){if(typeof v!="symbol"&&typeof v!="string"||v==="")throw new TypeError("You must supply a name when creating a logger.");var m=i[v];return m||(m=i[v]=new p(v,s.methodFactory)),m};var h=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=h),s},s.getLoggers=function(){return i},s.default=s,s})})(aD);var my=aD.exports;const Yi=Wi(my),L2=Yi.getLogger("http-helpers");L2.setLevel(my.levels.INFO);let BQ="torus-default";const FQ="x-api-key";async function gy(t,e){let n=null;try{n=new URL(t)}catch{}return fetch(t,e)}function wy(){const t={};return t[FQ]=BQ,t}function vy(t){L2.info(`Response: ${t.status} ${t.statusText}`),L2.info(`Url: ${t.url}`)}function UQ(t){const e=t.headers.get("x-web3-correlation-id");e&&L2.info(`Request tracing with traceID = ${e}`)}const jQ=async(t,e)=>{let n=null;try{const r=new Promise((i,s)=>{n=setTimeout(()=>{s(new Error(`Timed out in ${t}ms`))},t)}),a=await Promise.race([e,r]);return n!=null&&clearTimeout(n),a}catch(r){throw n!=null&&clearTimeout(n),r}},Wd=async(t,e={},n={})=>{const r={mode:"cors",headers:{}};n.useAPIKey&&(r.headers=Q(Q({},r.headers),wy())),e.method="GET";const a=Kt(r,e),i=await gy(t,a);if(i.ok){const s=i.headers.get("content-type");return s!=null&&s.includes("application/json")?i.json():i.text()}throw vy(i),i},HQ=(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),wy())),n.method="POST";const i=Kt(a,n);return r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e),jQ(r.timeout||6e4,gy(t,i).then(s=>{if(r.logTracingHeader&&UQ(s),s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw vy(s),s}))},zQ=async(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),wy())),n.method="PATCH";const i=Kt(a,n);r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e);const s=await gy(t,i);if(s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw vy(s),s},qQ=async(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),wy())),n.method="PUT";const i=Kt(a,n);r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e);const s=await gy(t,i);if(s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw vy(s),s};var iD={exports:{}},yE={},mE={};Object.defineProperty(mE,"__esModule",{value:!0});function KQ(t){var e=4,n=t.length,r=n%e;if(!r)return t;var a=n,i=e-r,s=n+i,o=Buffer.alloc(s);for(o.write(t);i--;)o.write("=",a++);return o.toString()}mE.default=KQ;Object.defineProperty(yE,"__esModule",{value:!0});var VQ=mE;function sD(t,e){return e===void 0&&(e="utf8"),Buffer.isBuffer(t)?g4(t.toString("base64")):g4(Buffer.from(t,e).toString("base64"))}function WQ(t,e){return e===void 0&&(e="utf8"),Buffer.from(gE(t),"base64").toString(e)}function gE(t){return t=t.toString(),VQ.default(t).replace(/\-/g,"+").replace(/_/g,"/")}function g4(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function GQ(t){return Buffer.from(gE(t),"base64")}var bu=sD;bu.encode=sD;bu.decode=WQ;bu.toBase64=gE;bu.fromBase64=g4;bu.toBuffer=GQ;yE.default=bu;(function(t){t.exports=yE.default,t.exports.default=t.exports})(iD);var YQ=iD.exports;const f1=Wi(YQ),JQ={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},oD={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},Hn={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},wr={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Sc={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class ve{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5)){if(n[0]===1&&n[1]<6)return"Cupcake";if(n[0]===1&&n[1]>=6)return"Donut";if(n[0]===2&&n[1]<2)return"Eclair";if(n[0]===2&&n[1]===2)return"Froyo";if(n[0]===2&&n[1]>2)return"Gingerbread";if(n[0]===3)return"Honeycomb";if(n[0]===4&&n[1]<1)return"Ice Cream Sandwich";if(n[0]===4&&n[1]<4)return"Jelly Bean";if(n[0]===4&&n[1]>=4)return"KitKat";if(n[0]===5)return"Lollipop";if(n[0]===6)return"Marshmallow";if(n[0]===7)return"Nougat";if(n[0]===8)return"Oreo";if(n[0]===9)return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const a=ve.getVersionPrecision(e),i=ve.getVersionPrecision(n);let s=Math.max(a,i),o=0;const c=ve.map([e,n],d=>{const l=s-ve.getVersionPrecision(d),u=d+new Array(l+1).join(".0");return ve.map(u.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(r&&(o=s-Math.min(a,i)),s-=1;s>=o;){if(c[0][s]>c[1][s])return 1;if(c[0][s]===c[1][s]){if(s===o)return 0;s-=1}else if(c[0][s]<c[1][s])return-1}}static map(e,n){const r=[];let a;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(a=0;a<e.length;a+=1)r.push(n(e[a]));return r}static find(e,n){let r,a;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,a=e.length;r<a;r+=1){const i=e[r];if(n(i,r))return i}}static assign(e,...n){const r=e;let a,i;if(Object.assign)return Object.assign(e,...n);for(a=0,i=n.length;a<i;a+=1){const s=n[a];typeof s=="object"&&s!==null&&Object.keys(s).forEach(c=>{r[c]=s[c]})}return e}static getBrowserAlias(e){return JQ[e]}static getBrowserTypeByAlias(e){return oD[e]||""}}const cn=/version\/(\d+(\.?_?\d+)+)/i,ZQ=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=ve.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=ve.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=ve.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=ve.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=ve.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=ve.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=ve.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=ve.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=ve.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=ve.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=ve.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=ve.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=ve.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=ve.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=ve.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=ve.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=ve.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=ve.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=ve.getFirstMatch(cn,t)||ve.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=ve.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=ve.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=ve.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=ve.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=ve.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=ve.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=ve.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=ve.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=ve.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=ve.getFirstMatch(cn,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=/^(.*)\/(.*) /,n=/^(.*)\/(.*)[ \t]\((.*)/,a=t.search("\\(")!==-1?n:e;return{name:ve.getFirstMatch(a,t),version:ve.getSecondMatch(a,t)}}}],XQ=[{test:[/Roku\/DVP/],describe(t){const e=ve.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:wr.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=ve.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:wr.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=ve.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=ve.getWindowsVersionName(e);return{name:wr.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:wr.iOS},n=ve.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=ve.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=ve.getMacOSVersionName(e),r={name:wr.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=ve.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:wr.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=ve.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=ve.getAndroidVersionName(e),r={name:wr.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=ve.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:wr.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=ve.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||ve.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||ve.getFirstMatch(/\bbb(\d+)/i,t);return{name:wr.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=ve.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:wr.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=ve.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:wr.Tizen,version:e}}},{test:[/linux/i],describe(){return{name:wr.Linux}}},{test:[/CrOS/],describe(){return{name:wr.ChromeOS}}},{test:[/PlayStation 4/],describe(t){const e=ve.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:wr.PlayStation4,version:e}}}],QQ=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(t){const e=ve.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:Hn.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:Hn.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:Hn.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:Hn.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:Hn.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:Hn.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:Hn.tablet}}},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=ve.getFirstMatch(/(ipod|iphone)/i,t);return{type:Hn.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:Hn.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:Hn.mobile}}},{test(t){return t.getBrowserName(!0)==="blackberry"},describe(){return{type:Hn.mobile,vendor:"BlackBerry"}}},{test(t){return t.getBrowserName(!0)==="bada"},describe(){return{type:Hn.mobile}}},{test(t){return t.getBrowserName()==="windows phone"},describe(){return{type:Hn.mobile,vendor:"Microsoft"}}},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe(){return{type:Hn.tablet}}},{test(t){return t.getOSName(!0)==="android"},describe(){return{type:Hn.mobile}}},{test(t){return t.getOSName(!0)==="macos"},describe(){return{type:Hn.desktop,vendor:"Apple"}}},{test(t){return t.getOSName(!0)==="windows"},describe(){return{type:Hn.desktop}}},{test(t){return t.getOSName(!0)==="linux"},describe(){return{type:Hn.desktop}}},{test(t){return t.getOSName(!0)==="playstation 4"},describe(){return{type:Hn.tv}}},{test(t){return t.getOSName(!0)==="roku"},describe(){return{type:Hn.tv}}}],eee=[{test(t){return t.getBrowserName(!0)==="microsoft edge"},describe(t){if(/\sedg\//i.test(t))return{name:Sc.Blink};const n=ve.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:Sc.EdgeHTML,version:n}}},{test:[/trident/i],describe(t){const e={name:Sc.Trident},n=ve.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){return t.test(/presto/i)},describe(t){const e={name:Sc.Presto},n=ve.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:Sc.Gecko},n=ve.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Sc.Blink}}},{test:[/(apple)?webkit/i],describe(t){const e={name:Sc.WebKit},n=ve.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class XS{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=ve.find(ZQ,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=ve.find(XQ,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=ve.find(QQ,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=ve.find(eee,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return ve.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const a={};let i=0;if(Object.keys(e).forEach(o=>{const c=e[o];typeof c=="string"?(a[o]=c,i+=1):typeof c=="object"&&(n[o]=c,r+=1)}),r>0){const o=Object.keys(n),c=ve.find(o,l=>this.isOS(l));if(c){const l=this.satisfies(n[c]);if(l!==void 0)return l}const d=ve.find(o,l=>this.isPlatform(l));if(d){const l=this.satisfies(n[d]);if(l!==void 0)return l}}if(i>0){const o=Object.keys(a),c=ve.find(o,d=>this.isBrowser(d,!0));if(c!==void 0)return this.compareVersion(a[c])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let a=e.toLowerCase();const i=ve.getBrowserTypeByAlias(a);return n&&i&&(a=i.toLowerCase()),a===r}compareVersion(e){let n=[0],r=e,a=!1;const i=this.getBrowserVersion();if(typeof i=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(a=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(a=!0,r=e.substr(1)),n.indexOf(ve.compareVersions(i,r,a))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class zf{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new XS(e,n)}static parse(e){return new XS(e).getResult()}static get BROWSER_MAP(){return oD}static get ENGINE_MAP(){return Sc}static get OS_MAP(){return wr}static get PLATFORMS_MAP(){return Hn}}var G1=Yi.getLogger("customauth");const cD={[$e.APPLE]:"apple",[$e.GITHUB]:"github",[$e.LINKEDIN]:"linkedin",[$e.TWITTER]:"twitter",[$e.LINE]:"line",[$e.EMAIL_PASSWORDLESS]:"email",[$e.SMS_PASSWORDLESS]:"sms"},dD=t=>t.href.endsWith("/")?t.href:`${t.href}/`,wE=()=>Math.random().toString(36).slice(2),tee={webWorkerSupport:!1};function Om(t,e){return e?t:t.toLowerCase()}const m5=(t,e,n,r=!0)=>{const{name:a,sub:i}=t;if(n)return Om(t[n],r);switch(e){case $e.EMAIL_PASSWORDLESS:case $e.SMS_PASSWORDLESS:case $e.AUTHENTICATOR:return Om(a,r);case $e.GITHUB:case $e.TWITTER:case $e.APPLE:case $e.LINKEDIN:case $e.LINE:case $e.WECHAT:case $e.KAKAO:case $e.FARCASTER:case $e.CUSTOM:return Om(i,r);default:throw new Error("Invalid login type to get auth connection id")}};function w4(t){let e;try{e=window[t];const n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(n){const r=n;return r&&(r.code===22||r.code===1014||r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&e.length!==0}}function lD(){const t=window.screenLeft!==void 0?window.screenLeft:window.screenX,e=window.screenTop!==void 0?window.screenTop:window.screenY,n=1200,r=700,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,i=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,s=1,o=Math.abs((a-n)/2/s+t),c=Math.abs((i-r)/2/s+e);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/s},width=${n/s},top=${c},left=${o}`}function qf(t){const{baseURL:e,query:n,hash:r}=t,a=new URL(e);if(n&&Object.keys(n).forEach(i=>{a.searchParams.append(i,n[i])}),r){const i=new URL(qf({baseURL:e,query:r})).searchParams.toString();a.hash=i}return a.toString()}const vE=t=>{try{return new URL(decodeURIComponent(t))}catch(e){throw new Error(`${(e==null?void 0:e.message)||""}, Note: Your jwt domain: (i.e ${t}) must have http:// or https:// prefix`)}},nee=t=>JSON.parse(f1.decode(t));function ree(){const e=zf.getParser(navigator.userAgent).getPlatform();return e.type===zf.PLATFORMS_MAP.tablet||e.type===zf.PLATFORMS_MAP.mobile}function EE(t){return(t===$e.FACEBOOK||t===$e.LINE)&&ree()?1e3*30:1e3*1}function _E(t){const[e,n]=t.split(".");return{header:JSON.parse(f1.decode(e)),payload:JSON.parse(f1.decode(n))}}var TE={exports:{}},o6=typeof Reflect=="object"?Reflect:null,QS=o6&&typeof o6.apply=="function"?o6.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Ub;o6&&typeof o6.ownKeys=="function"?Ub=o6.ownKeys:Object.getOwnPropertySymbols?Ub=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ub=function(e){return Object.getOwnPropertyNames(e)};function aee(t){console&&console.warn&&console.warn(t)}var uD=Number.isNaN||function(e){return e!==e};function sn(){sn.init.call(this)}TE.exports=sn;TE.exports.once=cee;sn.EventEmitter=sn;sn.prototype._events=void 0;sn.prototype._eventsCount=0;sn.prototype._maxListeners=void 0;var eA=10;function Ey(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(sn,"defaultMaxListeners",{enumerable:!0,get:function(){return eA},set:function(t){if(typeof t!="number"||t<0||uD(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");eA=t}});sn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};sn.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||uD(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function fD(t){return t._maxListeners===void 0?sn.defaultMaxListeners:t._maxListeners}sn.prototype.getMaxListeners=function(){return fD(this)};sn.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var a=e==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=i[e];if(c===void 0)return!1;if(typeof c=="function")QS(c,this,n);else for(var d=c.length,l=mD(c,d),r=0;r<d;++r)QS(l[r],this,n);return!0};function pD(t,e,n,r){var a,i,s;if(Ey(n),i=t._events,i===void 0?(i=t._events=Object.create(null),t._eventsCount=0):(i.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]),s===void 0)s=i[e]=n,++t._eventsCount;else if(typeof s=="function"?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),a=fD(t),a>0&&s.length>a&&!s.warned){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,aee(o)}return t}sn.prototype.addListener=function(e,n){return pD(this,e,n,!1)};sn.prototype.on=sn.prototype.addListener;sn.prototype.prependListener=function(e,n){return pD(this,e,n,!0)};function iee(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hD(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},a=iee.bind(r);return a.listener=n,r.wrapFn=a,a}sn.prototype.once=function(e,n){return Ey(n),this.on(e,hD(this,e,n)),this};sn.prototype.prependOnceListener=function(e,n){return Ey(n),this.prependListener(e,hD(this,e,n)),this};sn.prototype.removeListener=function(e,n){var r,a,i,s,o;if(Ey(n),a=this._events,a===void 0)return this;if(r=a[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[e],a.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){o=r[s].listener,i=s;break}if(i<0)return this;i===0?r.shift():see(r,i),r.length===1&&(a[e]=r[0]),a.removeListener!==void 0&&this.emit("removeListener",e,o||n)}return this};sn.prototype.off=sn.prototype.removeListener;sn.prototype.removeAllListeners=function(e){var n,r,a;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var i=Object.keys(r),s;for(a=0;a<i.length;++a)s=i[a],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(e,n[a]);return this};function bD(t,e,n){var r=t._events;if(r===void 0)return[];var a=r[e];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?oee(a):mD(a,a.length)}sn.prototype.listeners=function(e){return bD(this,e,!0)};sn.prototype.rawListeners=function(e){return bD(this,e,!1)};sn.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):yD.call(t,e)};sn.prototype.listenerCount=yD;function yD(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}sn.prototype.eventNames=function(){return this._eventsCount>0?Ub(this._events):[]};function mD(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function see(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function oee(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function cee(t,e){return new Promise(function(n,r){function a(s){t.removeListener(e,i),r(s)}function i(){typeof t.removeListener=="function"&&t.removeListener("error",a),n([].slice.call(arguments))}gD(t,e,i,{once:!0}),e!=="error"&&dee(t,a,{once:!0})})}function dee(t,e,n){typeof t.on=="function"&&gD(t,"error",e,n)}function gD(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function a(i){r.once&&t.removeEventListener(e,a),n(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var l0=TE.exports;const wD=Wi(l0);let _y=class extends l0.EventEmitter{constructor({url:e,target:n,features:r,timeout:a=3e4}){super(),re(this,"url",void 0),re(this,"target",void 0),re(this,"features",void 0),re(this,"window",void 0),re(this,"windowTimer",void 0),re(this,"iClosedWindow",void 0),re(this,"timeout",void 0),this.url=e,this.target=n||"_blank",this.features=r||lD(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=a,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url.href,this.target,this.features),!this.window)throw new Error("popup window is blocked");return(e=this.window)!==null&&e!==void 0&&e.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}};const lee=["access_token","id_token"];class Qo{constructor(e){re(this,"nonce",wE()),re(this,"finalURL",void 0),re(this,"params",void 0),this.params=e}get state(){return encodeURIComponent(f1.encode(JSON.stringify(Q(Q({},this.params.customState||{}),{},{instanceId:this.nonce,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,redirectToOpener:this.params.redirectToOpener||!1}))))}async handleLoginWindow(e){const n=new _y({url:this.finalURL,features:e.popupFeatures,timeout:EE(this.params.authConnection)});if(this.params.uxMode===W0.REDIRECT)n.redirect(e.locationReplaceOnRedirect);else{const{RedundantAdaptiveBroadcastChannel:r}=await xt(async()=>{const{RedundantAdaptiveBroadcastChannel:a}=await import("./index-C8jqSig9.js");return{RedundantAdaptiveBroadcastChannel:a}},__vite__mapDeps([0,1,2,3,4]));return new Promise((a,i)=>{let s;const o=async c=>{try{const{error:d,data:l}=c,u=l||{},{instanceParams:f,hashParams:{access_token:p,id_token:h}}=u,b=iE(u.hashParams,lee);if(d){G1.error(c),i(new Error(`Error: ${d}. Info: ${JSON.stringify(c.data||{})}`));return}c.data&&f.authConnectionId===this.params.authConnectionId&&(G1.info(c.data),!this.params.redirectToOpener&&s&&await s.postMessage({success:!0}),a(Q(Q({accessToken:p,idToken:h||""},b),{},{state:f})))}catch(d){G1.error(d),i(d)}};if(!this.params.redirectToOpener)s=new r(`redirect_channel_${this.nonce}`,tee),s.addEventListener("message",async c=>{await o(c),s.close(),n.close()});else{const c=async d=>{if(!d.data)return;const l=d.data;l.channel===`redirect_channel_${this.nonce}`&&(window.removeEventListener("message",c),o(l),n.close())};window.addEventListener("message",c)}try{n.open()}catch(c){G1.error(c),i(c);return}n.once("close",()=>{s&&s.close(),i(new Error("user closed popup"))})})}return null}}class uee extends Qo{constructor(e){super(e),re(this,"RESPONSE_TYPE","token"),re(this,"SCOPE","identify email"),this.setFinalUrl()}setFinalUrl(){const e=new URL("https://discord.com/api/oauth2/authorize"),n=JSON.parse(JSON.stringify(this.params.jwtParams||{})),r=Kt({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri,scope:this.SCOPE},n);Object.keys(r).forEach(a=>{const i=a;r[i]&&e.searchParams.append(i,r[i])}),this.finalURL=e}async getUserInfo(e){const{accessToken:n}=e,r=await Wd("https://discord.com/api/users/@me",{headers:{Authorization:`Bearer ${n}`}}),{id:a,avatar:i,email:s="",username:o="",discriminator:c=""}=r;return{profileImage:i===null?`https://cdn.discordapp.com/embed/avatars/${Number(c)%5}.png`:`https://cdn.discordapp.com/avatars/${a}/${i}.png?size=2048`,name:`${o}#${c}`,email:s,userId:a,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}}class fee extends Qo{constructor(e){super(e),re(this,"RESPONSE_TYPE","token"),re(this,"SCOPE","public_profile email"),this.setFinalUrl()}setFinalUrl(){const e=new URL("https://www.facebook.com/v20.0/dialog/oauth"),n=JSON.parse(JSON.stringify(this.params.jwtParams||{})),r=Kt({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri,scope:this.SCOPE},n);Object.keys(r).forEach(a=>{const i=a;r[i]&&e.searchParams.append(i,r[i])}),this.finalURL=e}async getUserInfo(e){const{accessToken:n}=e,r=await Wd("https://graph.facebook.com/me?fields=name,email,picture.type(large)",{headers:{Authorization:`Bearer ${n}`}}),{name:a="",id:i,picture:s,email:o=""}=r;return{email:o,name:a,profileImage:s.data.url||"",authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,userId:i}}}class pee extends Qo{constructor(e){super(e),re(this,"RESPONSE_TYPE","token id_token"),re(this,"SCOPE","profile email openid"),re(this,"PROMPT","select_account"),this.setFinalUrl()}setFinalUrl(){const e=new URL("https://accounts.google.com/o/oauth2/v2/auth"),n=JSON.parse(JSON.stringify(this.params.jwtParams||{})),r=Kt({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,prompt:this.PROMPT,redirect_uri:this.params.redirect_uri,scope:this.SCOPE,nonce:this.nonce},n);Object.keys(r).forEach(a=>{const i=a;r[i]&&e.searchParams.append(i,r[i])}),this.finalURL=e}async getUserInfo(e){const{accessToken:n}=e,r=await Wd("https://www.googleapis.com/userinfo/v2/me",{headers:{Authorization:`Bearer ${n}`}}),{picture:a="",email:i="",name:s=""}=r;return{email:i,name:s,profileImage:a,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,userId:i.toLowerCase()}}}class hee extends Qo{constructor(e){super(e),re(this,"SCOPE","openid profile email"),re(this,"RESPONSE_TYPE","token id_token"),re(this,"PROMPT","login"),this.setFinalUrl()}setFinalUrl(){const{domain:e}=this.params.jwtParams,n=vE(e);n.pathname+=n.pathname.endsWith("/")?"authorize":"/authorize";const r=JSON.parse(JSON.stringify(this.params.jwtParams));delete r.domain;const a=Kt({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,prompt:this.PROMPT,redirect_uri:this.params.redirect_uri,scope:this.SCOPE,connection:cD[this.params.authConnection],nonce:this.nonce},r);Object.keys(a).forEach(i=>{const s=i;a[s]&&n.searchParams.append(s,a[s])}),this.finalURL=n}async getUserInfo(e){const{idToken:n,accessToken:r}=e,{domain:a,userIdField:i,isUserIdCaseSensitive:s,user_info_route:o="userinfo"}=this.params.jwtParams;if(r)try{const c=new URL(a),d=await Wd(`${dD(c)}${o}`,{headers:{Authorization:`Bearer ${r}`}}),{picture:l,name:u,email:f}=d;return{email:f,name:u,profileImage:l,userId:m5(d,this.params.authConnection,i,s),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}catch(c){Yi.warn(c,"Unable to get userinfo from endpoint")}if(n){const c=_E(n).payload,{name:d,email:l,picture:u}=c;return{profileImage:u,name:d,email:l,userId:m5(c,this.params.authConnection,i,s),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}throw new Error("Access/id token not available")}}class bee extends Qo{constructor(e){super(e),this.setFinalUrl()}setFinalUrl(){const e=JSON.parse(JSON.stringify(this.params.jwtParams));delete e.domain;const n=Kt({state:this.state,client_id:this.params.clientId,nonce:this.nonce},e);this.finalURL=new URL(qf({baseURL:this.params.redirect_uri,query:null,hash:n}))}async getUserInfo(e){const{idToken:n,accessToken:r}=e,{domain:a,userIdField:i,isUserIdCaseSensitive:s,user_info_route:o="userinfo"}=this.params.jwtParams;if(r)try{const c=new URL(a),d=await Wd(`${dD(c)}${o}`,{headers:{Authorization:`Bearer ${r}`}}),{picture:l,name:u,email:f}=d;return{email:f,name:u,profileImage:l,userId:m5(d,this.params.authConnection,i,s),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}catch(c){Yi.warn(c,"Unable to get userinfo from endpoint")}if(n){const c=_E(n).payload,{name:d,email:l,picture:u}=c;return{profileImage:u,name:d,email:l,userId:m5(c,this.params.authConnection,i,s),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}throw new Error("Access/id token not available")}handleLoginWindow(e){const{id_token:n,access_token:r}=this.params.jwtParams,a=new _y({url:this.finalURL,features:e.popupFeatures});if(this.params.uxMode===W0.REDIRECT)a.redirect(e.locationReplaceOnRedirect);else return Promise.resolve({state:{},idToken:n,accessToken:r});return null}}const v4=t=>t.padStart(64,"0").slice(0,64);let yee=class{constructor(){re(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=v4(this.sessionId)}request({method:e="GET",url:n,data:r={},headers:a={}}){const i={headers:a};switch(e){case"GET":return Wd(n,i);case"POST":return HQ(n,r,i);case"PUT":return qQ(n,r,i);case"PATCH":return zQ(n,r,i)}throw new Error("Invalid method type")}};const mee="https://api.web3auth.io/session-service",B2=new Cp.ec("secp256k1"),Ma=globalThis.crypto||globalThis.msCrypto||{},jc=Ma.subtle||Ma.webkitSubtle,gee=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),wee=Buffer.alloc(32,0);function xa(t,e){if(!t)throw new Error(e||"Assertion failed")}function vee(t){return Buffer.isBuffer(t)&&t.length===32}function Mp(t){return vee(t)?t.compare(wee)>0&&t.compare(gee)<0:!1}function Eee(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Kf(t){if(typeof Ma.getRandomValues>"u")return Buffer.from(Ma.randomBytes(t));const e=new Uint8Array(t);return Ma.getRandomValues(e),Buffer.from(e)}async function vD(t){if(!Ma.createHash){const r=await jc.digest("SHA-512",t);return new Uint8Array(r)}const n=Ma.createHash("sha512").update(t).digest();return new Uint8Array(n)}function ED(t){return async function(e,n,r){if(jc&&jc[t]&&jc.importKey){const a={name:"AES-CBC"},i=await jc.importKey("raw",n,a,!1,[t]),s={name:"AES-CBC",iv:e},o=await jc[t](s,i,r);return Buffer.from(new Uint8Array(o))}else if(t==="encrypt"&&Ma.createCipheriv){const a=Ma.createCipheriv("aes-256-cbc",n,e),i=a.update(r),s=a.final();return Buffer.concat([i,s])}else if(t==="decrypt"&&Ma.createDecipheriv){const a=Ma.createDecipheriv("aes-256-cbc",n,e),i=a.update(r),s=a.final();return Buffer.concat([i,s])}throw new Error(`Unsupported operation: ${t}`)}}const _ee=ED("encrypt"),Tee=ED("decrypt");async function _D(t,e){if(!Ma.createHmac){const a={name:"HMAC",hash:{name:"SHA-256"}},i=await jc.importKey("raw",new Uint8Array(t),a,!1,["sign","verify"]),s=await jc.sign("HMAC",i,e);return Buffer.from(new Uint8Array(s))}const n=Ma.createHmac("sha256",Buffer.from(t));return n.update(e),n.digest()}async function xee(t,e,n){const r=await _D(t,e);return Eee(r,n)}const See=function(){let t=Kf(32);for(;!Mp(t);)t=Kf(32);return t},Wl=function(t){return xa(t.length===32,"Bad private key"),xa(Mp(t),"Bad private key"),Buffer.from(B2.keyFromPrivate(t).getPublic("array"))},Mm=async function(t,e){return xa(t.length===32,"Bad private key"),xa(Mp(t),"Bad private key"),xa(e.length>0,"Message should not be empty"),xa(e.length<=32,"Message is too long"),Buffer.from(B2.sign(e,t,{canonical:!0}).toDER())},TD=async function(t,e,n){xa(Buffer.isBuffer(t),"Bad private key"),xa(Buffer.isBuffer(e),"Bad public key"),xa(t.length===32,"Bad private key"),xa(Mp(t),"Bad private key"),xa(e.length===65||e.length===33,"Bad public key"),e.length===65&&xa(e[0]===4,"Bad public key"),e.length===33&&xa(e[0]===2||e[0]===3,"Bad public key");const r=B2.keyFromPrivate(t),a=B2.keyFromPublic(e),i=r.derive(a.getPublic());return n?Buffer.from(i.toString(16,64),"hex"):Buffer.from(i.toArray())},Aee=async function(t,e,n){n=n||{};let r=n.ephemPrivateKey||Kf(32);for(;!Mp(r);)r=n.ephemPrivateKey||Kf(32);const a=Wl(r),i=await TD(r,t,n.padding),s=await vD(i),o=n.iv||Kf(16),c=s.slice(0,32),d=s.slice(32),u=await _ee(o,Buffer.from(c),e),f=Buffer.concat([o,a,u]),p=await _D(Buffer.from(d),f);return{iv:o,ephemPublicKey:a,ciphertext:u,mac:p}},xD=async function(t,e,n){const r=await TD(t,e.ephemPublicKey,n),a=await vD(r),i=a.slice(0,32),s=a.slice(32),o=Buffer.concat([e.iv,e.ephemPublicKey,e.ciphertext]),c=await xee(Buffer.from(s),o,e.mac);if(!c&&!n)return xD(t,e,!0);if(!c&&n===!0)throw new Error("bad MAC after trying padded");const d=await Tee(e.iv,Buffer.from(i),e.ciphertext);return Buffer.from(new Uint8Array(d))};var Ah={},Pm,tA;function Cee(){if(tA)return Pm;tA=1;var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},r;function a(p){throw{name:"SyntaxError",message:p,at:t,text:r}}function i(p){return p&&p!==e&&a("Expected '"+p+"' instead of '"+e+"'"),e=r.charAt(t),t+=1,e}function s(){var p,h="";for(e==="-"&&(h="-",i("-"));e>="0"&&e<="9";)h+=e,i();if(e===".")for(h+=".";i()&&e>="0"&&e<="9";)h+=e;if(e==="e"||e==="E")for(h+=e,i(),(e==="-"||e==="+")&&(h+=e,i());e>="0"&&e<="9";)h+=e,i();return p=Number(h),isFinite(p)||a("Bad number"),p}function o(){var p,h,b="",v;if(e==='"')for(;i();){if(e==='"')return i(),b;if(e==="\\")if(i(),e==="u"){for(v=0,h=0;h<4&&(p=parseInt(i(),16),!!isFinite(p));h+=1)v=v*16+p;b+=String.fromCharCode(v)}else if(typeof n[e]=="string")b+=n[e];else break;else b+=e}a("Bad string")}function c(){for(;e&&e<=" ";)i()}function d(){switch(e){case"t":return i("t"),i("r"),i("u"),i("e"),!0;case"f":return i("f"),i("a"),i("l"),i("s"),i("e"),!1;case"n":return i("n"),i("u"),i("l"),i("l"),null;default:a("Unexpected '"+e+"'")}}function l(){var p=[];if(e==="["){if(i("["),c(),e==="]")return i("]"),p;for(;e;){if(p.push(f()),c(),e==="]")return i("]"),p;i(","),c()}}a("Bad array")}function u(){var p,h={};if(e==="{"){if(i("{"),c(),e==="}")return i("}"),h;for(;e;){if(p=o(),c(),i(":"),Object.prototype.hasOwnProperty.call(h,p)&&a('Duplicate key "'+p+'"'),h[p]=f(),c(),e==="}")return i("}"),h;i(","),c()}}a("Bad object")}function f(){switch(c(),e){case"{":return u();case"[":return l();case'"':return o();case"-":return s();default:return e>="0"&&e<="9"?s():d()}}return Pm=function(p,h){var b;return r=p,t=0,e=" ",b=f(),c(),e&&a("Syntax error"),typeof h=="function"?function v(m,T){var A,N,R=m[T];if(R&&typeof R=="object")for(A in f)Object.prototype.hasOwnProperty.call(R,A)&&(N=v(R,A),typeof N>"u"?delete R[A]:R[A]=N);return h.call(m,T,R)}({"":b},""):b},Pm}var km,nA;function Iee(){if(nA)return km;nA=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,r={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},a;function i(o){return t.lastIndex=0,t.test(o)?'"'+o.replace(t,function(c){var d=r[c];return typeof d=="string"?d:"\\u"+("0000"+c.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+o+'"'}function s(o,c){var d,l,u,f,p=e,h,b=c[o];switch(b&&typeof b=="object"&&typeof b.toJSON=="function"&&(b=b.toJSON(o)),typeof a=="function"&&(b=a.call(c,o,b)),typeof b){case"string":return i(b);case"number":return isFinite(b)?String(b):"null";case"boolean":case"null":return String(b);case"object":if(!b)return"null";if(e+=n,h=[],Object.prototype.toString.apply(b)==="[object Array]"){for(f=b.length,d=0;d<f;d+=1)h[d]=s(d,b)||"null";return u=h.length===0?"[]":e?`[
`+e+h.join(`,
`+e)+`
`+p+"]":"["+h.join(",")+"]",e=p,u}if(a&&typeof a=="object")for(f=a.length,d=0;d<f;d+=1)l=a[d],typeof l=="string"&&(u=s(l,b),u&&h.push(i(l)+(e?": ":":")+u));else for(l in b)Object.prototype.hasOwnProperty.call(b,l)&&(u=s(l,b),u&&h.push(i(l)+(e?": ":":")+u));return u=h.length===0?"{}":e?`{
`+e+h.join(`,
`+e)+`
`+p+"}":"{"+h.join(",")+"}",e=p,u}}return km=function(o,c,d){var l;if(e="",n="",typeof d=="number")for(l=0;l<d;l+=1)n+=" ";else typeof d=="string"&&(n=d);if(a=c,c&&typeof c!="function"&&(typeof c!="object"||typeof c.length!="number"))throw new Error("JSON.stringify");return s("",{"":o})},km}var rA;function Oee(){return rA||(rA=1,Ah.parse=Cee(),Ah.stringify=Iee()),Ah}var Mee={}.toString,Pee=Array.isArray||function(t){return Mee.call(t)=="[object Array]"},Ch=(typeof JSON<"u"?JSON:Oee()).stringify,kee=Pee,Nee=NX,Ree=OX,Ty=mX,Dee=Ty("Array.prototype.join"),aA=Ty("Array.prototype.indexOf"),$ee=Ty("Array.prototype.splice"),Lee=Ty("Array.prototype.sort"),iA=function(e,n){for(var r="",a=0;a<e;a+=1)r+=n;return r},Bee=function(t,e,n){return n},Fee=function(e){var n=arguments.length>1?arguments[1]:void 0,r=n&&n.space||"";typeof r=="number"&&(r=iA(r," "));var a=!!n&&typeof n.cycles=="boolean"&&n.cycles,i=n&&n.replacer?Ree(n.replacer):Bee;if(n&&typeof n.collapseEmpty<"u"&&typeof n.collapseEmpty!="boolean")throw new TypeError("`collapseEmpty` must be a boolean, if provided");var s=!!n&&n.collapseEmpty,o=typeof n=="function"?n:n&&n.cmp,c=o&&function(l){var u=o.length>2&&function(p){return l[p]};return function(f,p){return o({key:f,value:l[f]},{key:p,value:l[p]},u?{__proto__:null,get:u}:void 0)}},d=[];return function l(u,f,p,h){var b=r?`
`+iA(h,r):"",v=r?": ":":";if(p&&p.toJSON&&typeof p.toJSON=="function"&&(p=p.toJSON()),p=i(u,f,p),p!==void 0){if(typeof p!="object"||p===null)return Ch(p);var m=function(I,P){return s&&I.length===0?P:(P==="[]"?"[":"{")+Dee(I,",")+b+(P==="[]"?"]":"}")};if(kee(p)){for(var R=[],T=0;T<p.length;T++){var A=l(p,T,p[T],h+1)||Ch(null);R[R.length]=b+r+A}return m(R,"[]")}if(aA(d,p)!==-1){if(a)return Ch("__cycle__");throw new TypeError("Converting circular structure to JSON")}else d[d.length]=p;for(var N=Lee(Nee(p),c&&c(p)),R=[],T=0;T<N.length;T++){var f=N[T],B=l(p,f,p[f],h+1);if(B){var F=Ch(f)+v+B;R[R.length]=b+r+F}}return $ee(d,aA(d,p),1),m(R,"{}")}}({"":e},"",e,0)};const SD=Wi(Fee),Uee=BigInt(0),sf=BigInt(1),jee=BigInt(2),Hee=BigInt(7),zee=BigInt(256),qee=BigInt(113),AD=[],CD=[],ID=[];for(let t=0,e=sf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],AD.push(2*(5*r+n)),CD.push((t+1)*(t+2)/2%64);let a=Uee;for(let i=0;i<7;i++)e=(e<<sf^(e>>Hee)*qee)%zee,e&jee&&(a^=sf<<(sf<<BigInt(i))-sf);ID.push(a)}const OD=yY(ID,!0),Kee=OD[0],Vee=OD[1],sA=(t,e,n)=>n>32?_Y(t,e,n):TY(t,e,n),oA=(t,e,n)=>n>32?xY(t,e,n):SY(t,e,n);function Wee(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const o=(s+8)%10,c=(s+2)%10,d=n[c],l=n[c+1],u=sA(d,l,1)^n[o],f=oA(d,l,1)^n[o+1];for(let p=0;p<50;p+=10)t[s+p]^=u,t[s+p+1]^=f}let a=t[2],i=t[3];for(let s=0;s<24;s++){const o=CD[s],c=sA(a,i,o),d=oA(a,i,o),l=AD[s];a=t[l],i=t[l+1],t[l]=c,t[l+1]=d}for(let s=0;s<50;s+=10){for(let o=0;o<10;o++)n[o]=t[s+o];for(let o=0;o<10;o++)t[s+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=Kee[r],t[1]^=Vee[r]}mR(n)}let Gee=class MD extends gY{constructor(e,n,r,a=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=a,this.rounds=i,gS(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=wY(this.state)}clone(){return this._cloneInto()}keccak(){wS(this.state32),Wee(this.state32,this.rounds),wS(this.state32),this.posOut=0,this.pos=0}update(e){vS(this),e=vY(e),u4(e);const{blockLen:n,state:r}=this,a=e.length;for(let i=0;i<a;){const s=Math.min(n-this.pos,a-i);for(let o=0;o<s;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:a}=this;e[r]^=n,n&128&&r===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){vS(this,!1),u4(e),this.finish();const n=this.state,{blockLen:r}=this;for(let a=0,i=e.length;a<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-a);e.set(n.subarray(this.posOut,this.posOut+s),a),this.posOut+=s,a+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return gS(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(EY(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,mR(this.state)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:a,rounds:i,enableXOF:s}=this;return e||(e=new MD(n,r,a,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=a,e.enableXOF=s,e.destroyed=this.destroyed,e}};const Yee=(t,e,n)=>mY(()=>new Gee(e,t,n)),R6=Yee(1,136,256/8),PD=u4;function Jee(t){return e=>(PD(e),t(e))}const Zee=(()=>{const t=Jee(R6);return t.create=R6.create,t})();function Nm(t){return Buffer.from(Zee(t))}const Xee=new Cp.ec("secp256k1");function Qee(t){return{iv:Buffer.from(t.iv,"hex"),ephemPublicKey:Buffer.from(t.ephemPublicKey,"hex"),ciphertext:Buffer.from(t.ciphertext,"hex"),mac:Buffer.from(t.mac,"hex")}}function ete(t){return{iv:Buffer.from(t.iv).toString("hex"),ephemPublicKey:Buffer.from(t.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(t.ciphertext).toString("hex"),mac:Buffer.from(t.mac).toString("hex")}}async function Rm(t,e){const n=JSON.stringify(e),r=Buffer.from(n,"utf-8"),a=await Aee(Wl(Buffer.from(t,"hex")),r),i=ete(a);return JSON.stringify(i)}async function tte(t,e){const n=JSON.parse(e),r=Qee(n),a=Xee.keyFromPrivate(t),s=(await xD(Buffer.from(a.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8");return JSON.parse(s)}const nte=86400;let rte=class extends yee{constructor({sessionServerBaseUrl:e,sessionNamespace:n,sessionTime:r,sessionId:a,allowedOrigin:i}={}){super(),re(this,"sessionServerBaseUrl",mee),re(this,"sessionNamespace",void 0),re(this,"allowedOrigin",void 0),re(this,"sessionTime",nte),re(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),n&&(this.sessionNamespace=n),r&&(this.sessionTime=r),a&&(this.sessionId=v4(a)),i?this.allowedOrigin=i:this.allowedOrigin="*"}static generateRandomSessionKey(){return v4(See().toString("hex"))}async createSession(e,n={}){super.checkSessionParams();const r=Buffer.from(this.sessionId,"hex"),a=Wl(r).toString("hex"),i=await Rm(this.sessionId,e),s=(await Mm(r,Nm(Buffer.from(i,"utf8")))).toString("hex"),o={key:a,data:i,signature:s,namespace:this.sessionNamespace,timeout:this.sessionTime,allowedOrigin:this.allowedOrigin};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:o,headers:n}),this.sessionId}async authorizeSession({headers:e}={headers:{}}){super.checkSessionParams();const r={key:Wl(Buffer.from(this.sessionId,"hex")).toString("hex"),namespace:this.sessionNamespace},a=await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/get`,data:r,headers:e});if(!a.message)throw new Error("Session Expired or Invalid public key");const i=await tte(this.sessionId,a.message);if(i.error)throw new Error("There was an error decrypting data.");return i}async updateSession(e,n={}){super.checkSessionParams();const r=Buffer.from(this.sessionId,"hex"),a=Wl(r).toString("hex"),i=await Rm(this.sessionId,e),s=(await Mm(r,Nm(Buffer.from(i,"utf8")))).toString("hex"),o={key:a,data:i,signature:s,namespace:this.sessionNamespace,allowedOrigin:this.allowedOrigin};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/v2/store/update`,data:o,headers:n})}async invalidateSession(e={}){super.checkSessionParams();const n=Buffer.from(this.sessionId,"hex"),r=Wl(n).toString("hex"),a=await Rm(this.sessionId,{}),i=(await Mm(n,Nm(Buffer.from(a,"utf8")))).toString("hex"),s={key:r,data:a,signature:i,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:s,headers:e}),this.sessionId="",!0}};async function ate(t,e){try{return await new rte({sessionId:t,sessionServerBaseUrl:e,allowedOrigin:!0}).authorizeSession()}catch(n){throw Yi.error("fetch data from storage server error",n),new Error("Unable to retrieve data from storage server, invalid key or key expired.")}}class ite extends Qo{constructor(e){super(e),this.setFinalUrl()}setFinalUrl(){const{passkeysHostUrl:e}=this.params.customState||{};if(!e)throw new Error("Invalid passkeys url.");const n=new URL(e),r=JSON.parse(JSON.stringify(this.params.jwtParams||{})),a=Kt({state:this.state,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri},r);Object.keys(a).forEach(i=>{const s=i;a[s]&&n.searchParams.append(s,a[s])}),this.finalURL=n}async getUserInfo(e,n){const{idToken:r,extraParams:a}=e,{sessionId:i}=JSON.parse(f1.decode(a))||{};if(!i)throw new Error("sessionId not found");const{verifier_id:s,signature:o,clientDataJSON:c,authenticatorData:d,publicKey:l,challenge:u,rpOrigin:f,rpId:p,credId:h,transports:b,username:v}=await ate(i,n);if(o!==r)throw new Error("idtoken should be equal to signature");return{email:"",name:"Passkeys Login",profileImage:"",authConnectionId:this.params.authConnectionId,userId:s,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId,extraConnectionParams:{signature:o,clientDataJSON:c,authenticatorData:d,publicKey:l,challenge:u,rpOrigin:f,rpId:p,credId:h,transports:b,username:v}}}}const ste=["event","origin","result"];class ote extends Qo{constructor(e){super(e),re(this,"RESPONSE_TYPE","token"),re(this,"SCOPE","profile"),re(this,"PROMPT","select_account"),this.setFinalUrl()}setFinalUrl(){const{domain:e}=this.params.jwtParams,n=vE(e||"https://oauth.telegram.org/auth"),r=JSON.parse(JSON.stringify(this.params.jwtParams||{}));r.origin=`${this.params.redirect_uri}?state=${this.state}&nonce=${this.nonce}`;const a=Kt({state:this.state,response_type:this.RESPONSE_TYPE,bot_id:this.params.clientId,prompt:this.PROMPT,redirect_uri:`${this.params.redirect_uri}?state=${this.state}&nonce=${this.nonce}`,scope:this.SCOPE,nonce:this.nonce},r);Object.keys(a).forEach(i=>{const s=i;a[s]&&n.searchParams.append(s,a[s])}),this.finalURL=n}async getUserInfo(e){const{idToken:n}=e,r=nee(n),{photo_url:a="",first_name:i="",last_name:s="",id:o}=r;return{email:"",name:`${i} ${s}`,profileImage:a,authConnectionId:this.params.authConnectionId,userId:o.toString(),authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}async handleLoginWindow(e){const n=new _y({url:this.finalURL,features:e.popupFeatures,timeout:EE(this.params.authConnection)});if(this.params.uxMode===W0.REDIRECT)n.redirect(e.locationReplaceOnRedirect);else return new Promise((r,a)=>{const i=async o=>{try{const c=JSON.parse(o)||{},{event:d,origin:l,result:u}=c,f=iE(c,ste),h=new URL(l).searchParams.get("state");d&&d==="auth_result"&&r(Q(Q({accessToken:""},f),{},{idToken:f1.encode(JSON.stringify(u))||"",state:f1.decode(h)}))}catch(c){G1.error(c),a(c)}},s=async o=>{if(!o.data)throw new Error("Invalid data received");if(this.finalURL.origin!==o.origin)throw new Error("Invalid origin received");const c=o.data;if(typeof c!="string")throw new Error("Invalid data type received");const{event:d}=JSON.parse(c)||{};d&&d!=="auth_result"&&G1.info("Invalid event received"),window.removeEventListener("message",s),i(c),n.close()};window.addEventListener("message",s);try{n.open()}catch(o){G1.error(o),a(o);return}n.once("close",()=>{a(new Error("user closed popup"))})});return null}}class cte extends Qo{constructor(e){super(e),re(this,"RESPONSE_TYPE","token"),re(this,"SCOPE","user:read:email"),this.setFinalUrl()}setFinalUrl(){const e=new URL("https://id.twitch.tv/oauth2/authorize"),n=JSON.parse(JSON.stringify(this.params.jwtParams||{})),r=Kt({state:this.state,response_type:this.RESPONSE_TYPE,client_id:this.params.clientId,redirect_uri:this.params.redirect_uri,scope:this.SCOPE,force_verify:"true"},n);Object.keys(r).forEach(a=>{const i=a;r[i]&&e.searchParams.append(i,r[i])}),this.finalURL=e}async getUserInfo(e){const{accessToken:n}=e,r=await Wd("https://api.twitch.tv/helix/users",{headers:{Authorization:`Bearer ${n}`,"Client-ID":this.params.clientId}}),[{profile_image_url:a="",display_name:i="",email:s="",id:o}]=r.data||[];return{profileImage:a,name:i,email:s,userId:o,authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}}const E4={link:"link",code:"code"};class dte extends Qo{constructor(e){super(e),re(this,"SCOPE","openid profile email"),re(this,"RESPONSE_TYPE","token id_token"),re(this,"PROMPT","login"),this.setFinalUrl()}setFinalUrl(){const{domain:e}=this.params.jwtParams||{},n=vE(e||"https://passwordless.web3auth.io/v7");n.pathname+=n.pathname.endsWith("/")?"authorize":"/authorize";const r=JSON.parse(JSON.stringify(this.params.jwtParams||{}));delete r.domain,this.params.customState=Q(Q({},this.params.customState||{}),{},{client:this.params.web3AuthClientId});const a=Kt({state:this.state,client_id:this.params.clientId||this.params.web3AuthClientId,redirect_uri:this.params.redirect_uri,nonce:this.nonce,network:this.params.web3AuthNetwork,connection:cD[this.params.authConnection],scope:this.SCOPE,response_type:this.RESPONSE_TYPE,prompt:this.PROMPT,flow_type:(r==null?void 0:r.flow_type)||E4.code},r);Object.keys(a).forEach(i=>{const s=i;a[s]&&n.searchParams.append(s,a[s])}),this.finalURL=n}async getUserInfo(e){const{idToken:n}=e,r=_E(n).payload,{name:a,email:i,picture:s}=r;return{profileImage:s,name:a,email:i,userId:a.toLowerCase(),authConnectionId:this.params.authConnectionId,authConnection:this.params.authConnection,groupedAuthConnectionId:this.params.groupedAuthConnectionId}}}const lte=t=>{const{authConnectionId:e,authConnection:n,clientId:r,jwtParams:a}=t;if(!e||!n||!r)throw new Error("Invalid params. Missing authConnectionId, authConnection or clientId");const{domain:i,login_hint:s,id_token:o,access_token:c}=a||{};switch(n){case $e.GOOGLE:return new pee(t);case $e.TELEGRAM:return new ote(t);case $e.FACEBOOK:return new fee(t);case $e.TWITCH:return new cte(t);case $e.DISCORD:return new uee(t);case $e.EMAIL_PASSWORDLESS:case $e.SMS_PASSWORDLESS:if(!s)throw new Error("Invalid params. Missing login_hint for web3auth passwordless login");return new dte(t);case $e.APPLE:case $e.GITHUB:case $e.LINKEDIN:case $e.TWITTER:case $e.LINE:case $e.CUSTOM:case $e.REDDIT:case $e.WECHAT:case $e.KAKAO:case $e.FARCASTER:case $e.AUTHENTICATOR:if(o||c)return new bee(t);if(!i)throw new Error("Invalid params for jwt login. Missing domain");return new hee(t);case $e.PASSKEYS:return new ite(t);default:throw new Error("Unsupported login type")}},ute=t=>{if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<t.length;d++){const l=t.charAt(d),u=l.charCodeAt(0);if(e[u]!==255)throw new TypeError(`${l} is ambiguous`);e[u]=d}const n=t.length,r=t.charAt(0),a=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function s(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let l=0,u=0,f=0;const p=d.length;for(;f!==p&&d[f]===0;)f++,l++;const h=(p-f)*i+1>>>0,b=new Uint8Array(h);for(;f!==p;){let T=d[f],A=0;for(let N=h-1;(T!==0||A<u)&&N!==-1;N--,A++)T+=256*b[N]>>>0,b[N]=T%n>>>0,T=T/n>>>0;if(T!==0)throw new Error("Non-zero carry");u=A,f++}let v=h-u;for(;v!==h&&b[v]===0;)v++;let m=r.repeat(l);for(;v<h;++v)m+=t.charAt(b[v]);return m}function o(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let l=0,u=0,f=0;for(;d[l]===r;)u++,l++;const p=(d.length-l)*a+1>>>0,h=new Uint8Array(p);for(;d[l];){let T=e[d.charCodeAt(l)];if(T===255)return;let A=0;for(let N=p-1;(T!==0||A<f)&&N!==-1;N--,A++)T+=n*h[N]>>>0,h[N]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");f=A,l++}let b=p-f;for(;b!==p&&h[b]===0;)b++;const v=new Uint8Array(u+(p-b));let m=u;for(;b!==p;)v[m++]=h[b++];return v}function c(d){const l=o(d);if(l)return l;throw new Error(`Non-base${n} character`)}return{encode:s,decodeUnsafe:o,decode:c}},fte="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",fd=ute(fte),xE=async t=>{const e=t instanceof Error,n=typeof t=="string",r=t&&typeof t=="object"&&"status"in t&&"type"in t;let a;if(r){const i=t,s=i.headers.get("content-type");if(s.includes("application/json")){const o=await i.json();a=new Error((o==null?void 0:o.error)||(o==null?void 0:o.message)||JSON.stringify(o))}else s.includes("text/plain")?a=new Error(await i.text()):a=new Error(`${i.status} ${i.type.toString()} ${i.statusText}`)}else n?a=new Error(t):e?a=t:a=new Error("Unknown error");return a},Ko=Yi.getLogger("auth");Ko.setLevel("error");const mn={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},Hc={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};mn.MAINNET+"",mn.TESTNET+"",mn.CYAN+"",mn.AQUA+"",mn.CELESTE+"";mn.AQUA+"",Hc.SAPPHIRE_MAINNET,mn.CELESTE+"",Hc.SAPPHIRE_MAINNET,mn.CYAN+"",Hc.SAPPHIRE_MAINNET,mn.MAINNET+"",Hc.SAPPHIRE_MAINNET,mn.TESTNET+"",Hc.SAPPHIRE_DEVNET;mn.MAINNET+"",mn.TESTNET+"",mn.CYAN+"",mn.AQUA+"",mn.CELESTE+"";const pte={[Hc.SAPPHIRE_MAINNET]:"https://api.web3auth.io/signer-service",[Hc.SAPPHIRE_DEVNET]:"https://api.web3auth.io/signer-service",[mn.MAINNET]:"https://api.web3auth.io/signer-service",[mn.TESTNET]:"https://api.web3auth.io/signer-service",[mn.CYAN]:"https://api.web3auth.io/signer-polygon-service",[mn.AQUA]:"https://api.web3auth.io/signer-polygon-service",[mn.CELESTE]:"https://api.web3auth.io/signer-polygon-service"};mn.MAINNET+"",mn.TESTNET+"",mn.CYAN+"",mn.AQUA+"",mn.CELESTE+"";const kD="https://api.web3auth.io/session-service",ND="https://session.web3auth.io",g5=Yi.getLogger("http-helpers");g5.setLevel(my.levels.INFO);let hte="torus-default";const bte="x-api-key";function yte(t){g5.setLevel(t)}async function xy(t,e){let n=null;try{n=new URL(t)}catch{}return fetch(t,e)}function Sy(){const t={};return t[bte]=hte,t}function Ay(t){g5.info(`Response: ${t.status} ${t.statusText}`),g5.info(`Url: ${t.url}`)}function mte(t){const e=t.headers.get("x-web3-correlation-id");e&&g5.info(`Request tracing with traceID = ${e}`)}const gte=async(t,e)=>{let n=null;try{const r=new Promise((i,s)=>{n=setTimeout(()=>{s(new Error(`Timed out in ${t}ms`))},t)}),a=await Promise.race([e,r]);return n!=null&&clearTimeout(n),a}catch(r){throw n!=null&&clearTimeout(n),r}},SE=async(t,e={},n={})=>{const r={mode:"cors",headers:{}};n.useAPIKey&&(r.headers=Q(Q({},r.headers),Sy())),e.method="GET";const a=Kt(r,e),i=await xy(t,a);if(i.ok){const s=i.headers.get("content-type");return s!=null&&s.includes("application/json")?i.json():i.text()}throw Ay(i),i},Cy=(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),Sy())),n.method="POST";const i=Kt(a,n);return r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e),gte(r.timeout||6e4,xy(t,i).then(s=>{if(r.logTracingHeader&&mte(s),s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw Ay(s),s}))},wte=async(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),Sy())),n.method="PATCH";const i=Kt(a,n);r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e);const s=await xy(t,i);if(s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw Ay(s),s},vte=async(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),Sy())),n.method="PUT";const i=Kt(a,n);r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e);const s=await xy(t,i);if(s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw Ay(s),s},_4=t=>t.padStart(64,"0").slice(0,64);class Ete{constructor(){re(this,"sessionId",void 0)}checkSessionParams(){if(!this.sessionId)throw new Error("Session id is required");this.sessionId=_4(this.sessionId)}request({method:e="GET",url:n,data:r={},headers:a={}}){const i={headers:a};switch(e){case"GET":return SE(n,i);case"POST":return Cy(n,r,i);case"PUT":return vte(n,r,i);case"PATCH":return wte(n,r,i)}throw new Error("Invalid method type")}}const _te="https://api.web3auth.io/session-service",F2=new Cp.ec("secp256k1"),Pa=globalThis.crypto||globalThis.msCrypto||{},zc=Pa.subtle||Pa.webkitSubtle,Tte=Buffer.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),xte=Buffer.alloc(32,0);function Sa(t,e){if(!t)throw new Error(e||"Assertion failed")}function Ste(t){return Buffer.isBuffer(t)&&t.length===32}function Pp(t){return Ste(t)?t.compare(xte)>0&&t.compare(Tte)<0:!1}function Ate(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Vf(t){if(typeof Pa.getRandomValues>"u")return Buffer.from(Pa.randomBytes(t));const e=new Uint8Array(t);return Pa.getRandomValues(e),Buffer.from(e)}async function RD(t){if(!Pa.createHash){const r=await zc.digest("SHA-512",t);return new Uint8Array(r)}const n=Pa.createHash("sha512").update(t).digest();return new Uint8Array(n)}function DD(t){return async function(e,n,r){if(zc&&zc[t]&&zc.importKey){const a={name:"AES-CBC"},i=await zc.importKey("raw",n,a,!1,[t]),s={name:"AES-CBC",iv:e},o=await zc[t](s,i,r);return Buffer.from(new Uint8Array(o))}else if(t==="encrypt"&&Pa.createCipheriv){const a=Pa.createCipheriv("aes-256-cbc",n,e),i=a.update(r),s=a.final();return Buffer.concat([i,s])}else if(t==="decrypt"&&Pa.createDecipheriv){const a=Pa.createDecipheriv("aes-256-cbc",n,e),i=a.update(r),s=a.final();return Buffer.concat([i,s])}throw new Error(`Unsupported operation: ${t}`)}}const Cte=DD("encrypt"),Ite=DD("decrypt");async function $D(t,e){if(!Pa.createHmac){const a={name:"HMAC",hash:{name:"SHA-256"}},i=await zc.importKey("raw",new Uint8Array(t),a,!1,["sign","verify"]),s=await zc.sign("HMAC",i,e);return Buffer.from(new Uint8Array(s))}const n=Pa.createHmac("sha256",Buffer.from(t));return n.update(e),n.digest()}async function Ote(t,e,n){const r=await $D(t,e);return Ate(r,n)}const Mte=function(){let t=Vf(32);for(;!Pp(t);)t=Vf(32);return t},Jc=function(t){return Sa(t.length===32,"Bad private key"),Sa(Pp(t),"Bad private key"),Buffer.from(F2.keyFromPrivate(t).getPublic("array"))},jb=async function(t,e){return Sa(t.length===32,"Bad private key"),Sa(Pp(t),"Bad private key"),Sa(e.length>0,"Message should not be empty"),Sa(e.length<=32,"Message is too long"),Buffer.from(F2.sign(e,t,{canonical:!0}).toDER())},LD=async function(t,e,n){Sa(Buffer.isBuffer(t),"Bad private key"),Sa(Buffer.isBuffer(e),"Bad public key"),Sa(t.length===32,"Bad private key"),Sa(Pp(t),"Bad private key"),Sa(e.length===65||e.length===33,"Bad public key"),e.length===65&&Sa(e[0]===4,"Bad public key"),e.length===33&&Sa(e[0]===2||e[0]===3,"Bad public key");const r=F2.keyFromPrivate(t),a=F2.keyFromPublic(e),i=r.derive(a.getPublic());return n?Buffer.from(i.toString(16,64),"hex"):Buffer.from(i.toArray())},Pte=async function(t,e,n){n=n||{};let r=n.ephemPrivateKey||Vf(32);for(;!Pp(r);)r=n.ephemPrivateKey||Vf(32);const a=Jc(r),i=await LD(r,t,n.padding),s=await RD(i),o=n.iv||Vf(16),c=s.slice(0,32),d=s.slice(32),u=await Cte(o,Buffer.from(c),e),f=Buffer.concat([o,a,u]),p=await $D(Buffer.from(d),f);return{iv:o,ephemPublicKey:a,ciphertext:u,mac:p}},BD=async function(t,e,n){const r=await LD(t,e.ephemPublicKey,n),a=await RD(r),i=a.slice(0,32),s=a.slice(32),o=Buffer.concat([e.iv,e.ephemPublicKey,e.ciphertext]),c=await Ote(Buffer.from(s),o,e.mac);if(!c&&!n)return BD(t,e,!0);if(!c&&n===!0)throw new Error("bad MAC after trying padded");const d=await Ite(e.iv,Buffer.from(i),e.ciphertext);return Buffer.from(new Uint8Array(d))};function kte(t){return e=>(PD(e),t(e))}const Nte=(()=>{const t=kte(R6);return t.create=R6.create,t})();function c6(t){return Buffer.from(Nte(t))}const Rte=new Cp.ec("secp256k1");function Dte(t){return{iv:Buffer.from(t.iv,"hex"),ephemPublicKey:Buffer.from(t.ephemPublicKey,"hex"),ciphertext:Buffer.from(t.ciphertext,"hex"),mac:Buffer.from(t.mac,"hex")}}function $te(t){return{iv:Buffer.from(t.iv).toString("hex"),ephemPublicKey:Buffer.from(t.ephemPublicKey).toString("hex"),ciphertext:Buffer.from(t.ciphertext).toString("hex"),mac:Buffer.from(t.mac).toString("hex")}}async function Hb(t,e){const n=JSON.stringify(e),r=Buffer.from(n,"utf-8"),a=await Pte(Jc(Buffer.from(t,"hex")),r),i=$te(a);return JSON.stringify(i)}async function FD(t,e){const n=JSON.parse(e),r=Dte(n),a=Rte.keyFromPrivate(t),s=(await BD(Buffer.from(a.getPrivate().toString("hex",64),"hex"),r)).toString("utf-8");return JSON.parse(s)}const Lte=86400;class Ih extends Ete{constructor({sessionServerBaseUrl:e,sessionNamespace:n,sessionTime:r,sessionId:a,allowedOrigin:i}={}){super(),re(this,"sessionServerBaseUrl",_te),re(this,"sessionNamespace",void 0),re(this,"allowedOrigin",void 0),re(this,"sessionTime",Lte),re(this,"sessionId",""),e&&(this.sessionServerBaseUrl=e),n&&(this.sessionNamespace=n),r&&(this.sessionTime=r),a&&(this.sessionId=_4(a)),i?this.allowedOrigin=i:this.allowedOrigin="*"}static generateRandomSessionKey(){return _4(Mte().toString("hex"))}async createSession(e,n={}){super.checkSessionParams();const r=Buffer.from(this.sessionId,"hex"),a=Jc(r).toString("hex"),i=await Hb(this.sessionId,e),s=(await jb(r,c6(Buffer.from(i,"utf8")))).toString("hex"),o={key:a,data:i,signature:s,namespace:this.sessionNamespace,timeout:this.sessionTime,allowedOrigin:this.allowedOrigin};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:o,headers:n}),this.sessionId}async authorizeSession({headers:e}={headers:{}}){super.checkSessionParams();const r={key:Jc(Buffer.from(this.sessionId,"hex")).toString("hex"),namespace:this.sessionNamespace},a=await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/get`,data:r,headers:e});if(!a.message)throw new Error("Session Expired or Invalid public key");const i=await FD(this.sessionId,a.message);if(i.error)throw new Error("There was an error decrypting data.");return i}async updateSession(e,n={}){super.checkSessionParams();const r=Buffer.from(this.sessionId,"hex"),a=Jc(r).toString("hex"),i=await Hb(this.sessionId,e),s=(await jb(r,c6(Buffer.from(i,"utf8")))).toString("hex"),o={key:a,data:i,signature:s,namespace:this.sessionNamespace,allowedOrigin:this.allowedOrigin};await super.request({method:"PUT",url:`${this.sessionServerBaseUrl}/v2/store/update`,data:o,headers:n})}async invalidateSession(e={}){super.checkSessionParams();const n=Buffer.from(this.sessionId,"hex"),r=Jc(n).toString("hex"),a=await Hb(this.sessionId,{}),i=(await jb(n,c6(Buffer.from(a,"utf8")))).toString("hex"),s={key:r,data:a,signature:i,namespace:this.sessionNamespace,timeout:1};return await super.request({method:"POST",url:`${this.sessionServerBaseUrl}/v2/store/set`,data:s,headers:e}),this.sessionId="",!0}}const Bte=mn,Fte=Hc,Wf=Q(Q({},Fte),Bte),Ute={SECP256K1:"secp256k1",ED25519:"ed25519",OTHER:"other"},ml={LOGIN:"login",ENABLE_MFA:"enable_mfa",MANAGE_MFA:"manage_mfa",ADD_SOCIAL_FACTOR:"add_social_factor",MODIFY_SOCIAL_FACTOR:"modify_social_factor",ADD_AUTHENTICATOR_FACTOR:"add_authenticator_factor",ADD_PASSKEY_FACTOR:"add_passkey_factor"},Ac={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",TESTING:"testing"},is={DEFAULT:"default",IFRAME:"iframe"},dc={SETUP_COMPLETE:"setup_complete",INIT_DAPP:"init_dapp",LOGIN_INITIATED:"login_initiated",LOGIN_CANCELLED:"login_cancelled",LOGIN_FAILED:"login_failed",LOGIN_SUCCESS:"login_success",DISPLAY_IFRAME:"display_iframe",HIDE_IFRAME:"hide_iframe"},cA="auth-iframe",jte="http://localhost:3000",Hte="https://staging-auth.web3auth.io",zte="https://develop-auth.web3auth.io",qte="https://auth.web3auth.io",Kte="http://localhost:5173",Vte="https://staging-account.web3auth.io",Wte="https://develop-account.web3auth.io",Gte="https://account.web3auth.io",Yte=1e3*10,T4={light:"light",dark:"dark",auto:"auto"},UD=f1;function U2(t){return UD.decode(t)}function Oh(t){return UD.encode(JSON.stringify(t))}const Jte=t=>{const e=window.document.createElement("template"),n=t.trim();return e.innerHTML=n,e.content.firstChild};function Zte(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t))}}const Mh=new Map;function Xte(t){return t===T4.light?"light":t===T4.dark||window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}class Qte{constructor({sdkUrl:e,whiteLabel:n}){re(this,"sdkUrl",void 0),re(this,"whiteLabel",void 0),re(this,"initialized",!1),re(this,"loginCallbackSuccess",null),re(this,"loginCallbackFailed",null),re(this,"embedNonce",wE()),this.sdkUrl=e,this.whiteLabel=n}get targetOrigin(){return new URL(this.sdkUrl).origin}getAuthServiceIframe(){return Mh.get(this.embedNonce)}registerAuthServiceIframe(e){Mh.set(this.embedNonce,e)}cleanup(){const e=Mh.get(this.embedNonce);e&&e.parentNode&&(e.parentNode.removeChild(e),Mh.delete(this.embedNonce))}async init({network:e,clientId:n}){if(typeof window>"u"||typeof document>"u")throw new Error("window or document is not available");if(this.initialized)throw new Error("AuthProvider already initialized");const r=new URL(this.sdkUrl);r.pathname.endsWith("/")?r.pathname+="frame":r.pathname+="/frame";const a=new URLSearchParams;a.append("origin",window.location.origin),a.append("nonce",this.embedNonce),r.hash=a.toString();const i=Xte(this.whiteLabel.mode||T4.light),s=Jte(`<iframe
        id="${cA}-${this.embedNonce}"
        class="${cA}-${this.embedNonce}"
        sandbox="allow-popups allow-scripts allow-same-origin allow-forms allow-modals allow-downloads"
        src="${r.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%; z-index: 10000000;
        height: 100%; border: none; border-radius: 0; color-scheme: ${i};"
        allow="clipboard-write"
      ></iframe>`);return this.registerAuthServiceIframe(s),new Promise((o,c)=>{try{window.document.body.appendChild(s);const d=l=>{var u,f,p;if(l.origin!==this.targetOrigin)return;const{data:h}=l,{type:b,nonce:v}=h;if(v!==this.embedNonce)return;const m=h.data;switch(b){case dc.SETUP_COMPLETE:(u=this.getAuthServiceIframe())===null||u===void 0||(u=u.contentWindow)===null||u===void 0||u.postMessage({type:dc.INIT_DAPP,data:{network:e,clientId:n}},this.targetOrigin),this.initialized=!0,o();break;case dc.LOGIN_FAILED:(f=this.loginCallbackFailed)===null||f===void 0||f.call(this,(m==null?void 0:m.error)||"Login failed, reason: unknown");break;case dc.DISPLAY_IFRAME:this.getAuthServiceIframe().style.display="block";break;case dc.HIDE_IFRAME:this.getAuthServiceIframe().style.display="none";break;case dc.LOGIN_SUCCESS:Ko.info("LOGIN_SUCCESS",m),this.getAuthServiceIframe().style.display="none",m!=null&&m.sessionId&&((p=this.loginCallbackSuccess)===null||p===void 0||p.call(this,m));break;default:Ko.warn(`Unknown message type: ${b}`);break}};window.addEventListener("message",d)}catch(d){c(d)}})}postLoginInitiatedMessage(e,n){var r;if(!this.initialized)throw new Error("Iframe not initialized");return(r=this.getAuthServiceIframe().contentWindow)===null||r===void 0||r.postMessage({type:dc.LOGIN_INITIATED,data:{loginConfig:e,nonce:n}},this.targetOrigin),new Promise((a,i)=>{this.loginCallbackSuccess=a,this.loginCallbackFailed=i})}postLoginCancelledMessage(e){var n;if(!this.initialized)throw new Error("Iframe not initialized");(n=this.getAuthServiceIframe().contentWindow)===null||n===void 0||n.postMessage({type:dc.LOGIN_CANCELLED,data:{nonce:e}},this.targetOrigin)}}function ene(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function tne(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var nne=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),jD=function(t){nne(e,t);function e(n,r){var a=this.constructor,i=t.call(this,n,r)||this;return Object.defineProperty(i,"name",{value:a.name,enumerable:!1,configurable:!0}),ene(i,a.prototype),tne(i),i}return e}(Error);class HD extends jD{constructor(e,n){super(n),re(this,"code",void 0),re(this,"message",void 0),this.code=e,this.message=n||"",Object.defineProperty(this,"name",{value:"AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message}}toString(){return JSON.stringify(this.toJSON())}}class Mo extends HD{constructor(e,n){super(e,n),Object.defineProperty(this,"name",{value:"InitializationError"})}static fromCode(e,n=""){return new Mo(e,`${Mo.messages[e]}, ${n}`)}static invalidParams(e=""){return Mo.fromCode(5001,e)}static notInitialized(e=""){return Mo.fromCode(5002,e)}}re(Mo,"messages",{5e3:"Custom",5001:"Invalid constructor params",5002:"SDK not initialized. please call init first"});class en extends HD{constructor(e,n){super(e,n),Object.defineProperty(this,"name",{value:"LoginError"})}static fromCode(e,n=""){return new en(e,`${en.messages[e]}, ${n}`)}static invalidLoginParams(e=""){return en.fromCode(5111,e)}static userNotLoggedIn(e=""){return en.fromCode(5112,e)}static popupClosed(e=""){return en.fromCode(5113,e)}static loginFailed(e=""){return en.fromCode(5114,e)}static popupBlocked(e=""){return en.fromCode(5115,e)}static mfaAlreadyEnabled(e=""){return en.fromCode(5116,e)}static mfaNotEnabled(e=""){return en.fromCode(5117,e)}}re(en,"messages",{5e3:"Custom",5111:"Invalid login params",5112:"User not logged in.",5113:"login popup has been closed by the user",5114:"Login failed",5115:"Popup was blocked. Please call this function as soon as user clicks button or use redirect mode",5116:"MFA already enabled",5117:"MFA not yet enabled. Please call `enableMFA` first"});const rne="https://api.web3auth.io/session-service",ane="https://session.web3auth.io",Fs=Object.create(null);Fs.open="0";Fs.close="1";Fs.ping="2";Fs.pong="3";Fs.message="4";Fs.upgrade="5";Fs.noop="6";const zb=Object.create(null);Object.keys(Fs).forEach(t=>{zb[Fs[t]]=t});const x4={type:"error",data:"parser error"},zD=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qD=typeof ArrayBuffer=="function",KD=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,AE=({type:t,data:e},n,r)=>zD&&e instanceof Blob?n?r(e):dA(e,r):qD&&(e instanceof ArrayBuffer||KD(e))?n?r(e):dA(new Blob([e]),r):r(Fs[t]+(e||"")),dA=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function lA(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Dm;function ine(t,e){if(zD&&t.data instanceof Blob)return t.data.arrayBuffer().then(lA).then(e);if(qD&&(t.data instanceof ArrayBuffer||KD(t.data)))return e(lA(t.data));AE(t,!1,n=>{Dm||(Dm=new TextEncoder),e(Dm.encode(n))})}const uA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rf=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<uA.length;t++)Rf[uA.charCodeAt(t)]=t;const sne=t=>{let e=t.length*.75,n=t.length,r,a=0,i,s,o,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const d=new ArrayBuffer(e),l=new Uint8Array(d);for(r=0;r<n;r+=4)i=Rf[t.charCodeAt(r)],s=Rf[t.charCodeAt(r+1)],o=Rf[t.charCodeAt(r+2)],c=Rf[t.charCodeAt(r+3)],l[a++]=i<<2|s>>4,l[a++]=(s&15)<<4|o>>2,l[a++]=(o&3)<<6|c&63;return d},one=typeof ArrayBuffer=="function",CE=(t,e)=>{if(typeof t!="string")return{type:"message",data:VD(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:cne(t.substring(1),e)}:zb[n]?t.length>1?{type:zb[n],data:t.substring(1)}:{type:zb[n]}:x4},cne=(t,e)=>{if(one){const n=sne(t);return VD(n,e)}else return{base64:!0,data:t}},VD=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},WD="",dne=(t,e)=>{const n=t.length,r=new Array(n);let a=0;t.forEach((i,s)=>{AE(i,!1,o=>{r[s]=o,++a===n&&e(r.join(WD))})})},lne=(t,e)=>{const n=t.split(WD),r=[];for(let a=0;a<n.length;a++){const i=CE(n[a],e);if(r.push(i),i.type==="error")break}return r};function une(){return new TransformStream({transform(t,e){ine(t,n=>{const r=n.length;let a;if(r<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,r);else if(r<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,r)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(a[0]|=128),e.enqueue(a),e.enqueue(n)})}})}let $m;function Ph(t){return t.reduce((e,n)=>e+n.length,0)}function kh(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let a=0;a<e;a++)n[a]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function fne(t,e){$m||($m=new TextDecoder);const n=[];let r=0,a=-1,i=!1;return new TransformStream({transform(s,o){for(n.push(s);;){if(r===0){if(Ph(n)<1)break;const c=kh(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?r=3:a===126?r=1:r=2}else if(r===1){if(Ph(n)<2)break;const c=kh(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(Ph(n)<8)break;const c=kh(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),l=d.getUint32(0);if(l>Math.pow(2,21)-1){o.enqueue(x4);break}a=l*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Ph(n)<a)break;const c=kh(n,a);o.enqueue(CE(i?c:$m.decode(c),e)),r=0}if(a===0||a>t){o.enqueue(x4);break}}}})}const GD=4;function Qn(t){if(t)return pne(t)}function pne(t){for(var e in Qn.prototype)t[e]=Qn.prototype[e];return t}Qn.prototype.on=Qn.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Qn.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Qn.prototype.off=Qn.prototype.removeListener=Qn.prototype.removeAllListeners=Qn.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,a=0;a<n.length;a++)if(r=n[a],r===e||r.fn===e){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Qn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,a=n.length;r<a;++r)n[r].apply(this,e)}return this};Qn.prototype.emitReserved=Qn.prototype.emit;Qn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Qn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Iy=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),oi=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),hne="arraybuffer";function YD(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const bne=oi.setTimeout,yne=oi.clearTimeout;function Oy(t,e){e.useNativeTimers?(t.setTimeoutFn=bne.bind(oi),t.clearTimeoutFn=yne.bind(oi)):(t.setTimeoutFn=oi.setTimeout.bind(oi),t.clearTimeoutFn=oi.clearTimeout.bind(oi))}const mne=1.33;function gne(t){return typeof t=="string"?wne(t):Math.ceil((t.byteLength||t.size)*mne)}function wne(t){let e=0,n=0;for(let r=0,a=t.length;r<a;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function JD(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function vne(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Ene(t){let e={},n=t.split("&");for(let r=0,a=n.length;r<a;r++){let i=n[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class _ne extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class IE extends Qn{constructor(e){super(),this.writable=!1,Oy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new _ne(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=CE(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=vne(e);return n.length?"?"+n:""}}class Tne extends IE{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};lne(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,dne(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=JD()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let ZD=!1;try{ZD=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const xne=ZD;function Sne(){}class Ane extends Tne{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let d6=class qb extends Qn{constructor(e,n,r){super(),this.createRequest=e,Oy(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=YD(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&r.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var a;r.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=qb.requestsCount++,qb.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Sne,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete qb.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};d6.requestsCount=0;d6.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",fA);else if(typeof addEventListener=="function"){const t="onpagehide"in oi?"pagehide":"unload";addEventListener(t,fA,!1)}}function fA(){for(let t in d6.requests)d6.requests.hasOwnProperty(t)&&d6.requests[t].abort()}const Cne=function(){const t=XD({xdomain:!1});return t&&t.responseType!==null}();class Ine extends Ane{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Cne&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new d6(XD,this.uri(),e)}}function XD(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||xne))return new XMLHttpRequest}catch{}if(!e)try{return new oi[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const QD=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class One extends IE{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=QD?{}:YD(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],a=n===e.length-1;AE(r,this.supportsBinary,i=>{try{this.doWrite(r,i)}catch{}a&&Iy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=JD()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const Lm=oi.WebSocket||oi.MozWebSocket;class Mne extends One{createSocket(e,n,r){return QD?new Lm(e,n,r):n?new Lm(e,n):new Lm(e)}doWrite(e,n){this.ws.send(n)}}class Pne extends IE{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=fne(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),a=une();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const i=()=>{r.read().then(({done:o,value:c})=>{o||(this.onPacket(c),i())}).catch(o=>{})};i();const s={type:"open"};this.query.sid&&(s.data=`{"sid":"${this.query.sid}"}`),this._writer.write(s).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],a=n===e.length-1;this._writer.write(r).then(()=>{a&&Iy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const kne={websocket:Mne,webtransport:Pne,polling:Ine},Nne=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Rne=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function S4(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let a=Nne.exec(t||""),i={},s=14;for(;s--;)i[Rne[s]]=a[s]||"";return n!=-1&&r!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=Dne(i,i.path),i.queryKey=$ne(i,i.query),i}function Dne(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function $ne(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,a,i){a&&(n[a]=i)}),n}const A4=typeof addEventListener=="function"&&typeof removeEventListener=="function",Kb=[];A4&&addEventListener("offline",()=>{Kb.forEach(t=>t())},!1);class a1 extends Qn{constructor(e,n){if(super(),this.binaryType=hne,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=S4(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=S4(n.host).host);Oy(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const a=r.prototype.name;this.transports.push(a),this._transportsByName[a]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Ene(this.opts.query)),A4&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Kb.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=GD,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&a1.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",a1.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const a=this.writeBuffer[r].data;if(a&&(n+=gne(a)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Iy(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,a){if(typeof n=="function"&&(a=n,n=void 0),typeof r=="function"&&(a=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const i={type:e,data:n,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(a1.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),A4&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Kb.indexOf(this._offlineEventListener);r!==-1&&Kb.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}a1.protocol=GD;class Lne extends a1{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;a1.priorWebsocketSuccess=!1;const a=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",u=>{if(!r)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;a1.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(l(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function i(){r||(r=!0,l(),n.close(),n=null)}const s=u=>{const f=new Error("probe error: "+u);f.transport=n.name,i(),this.emitReserved("upgradeError",f)};function o(){s("transport closed")}function c(){s("socket closed")}function d(u){n&&u.name!==n.name&&i()}const l=()=>{n.removeListener("open",a),n.removeListener("error",s),n.removeListener("close",o),this.off("close",c),this.off("upgrading",d)};n.once("open",a),n.once("error",s),n.once("close",o),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Bne=class extends Lne{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(a=>kne[a]).filter(a=>!!a)),super(e,r)}};function Fne(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=S4(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}const Une=typeof ArrayBuffer=="function",jne=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,e$=Object.prototype.toString,Hne=typeof Blob=="function"||typeof Blob<"u"&&e$.call(Blob)==="[object BlobConstructor]",zne=typeof File=="function"||typeof File<"u"&&e$.call(File)==="[object FileConstructor]";function OE(t){return Une&&(t instanceof ArrayBuffer||jne(t))||Hne&&t instanceof Blob||zne&&t instanceof File}function Vb(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Vb(t[n]))return!0;return!1}if(OE(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Vb(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Vb(t[n]))return!0;return!1}function qne(t){const e=[],n=t.data,r=t;return r.data=C4(n,e),r.attachments=e.length,{packet:r,buffers:e}}function C4(t,e){if(!t)return t;if(OE(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=C4(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=C4(t[r],e));return n}return t}function Kne(t,e){return t.data=I4(t.data,e),delete t.attachments,t}function I4(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=I4(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=I4(t[n],e));return t}const Vne=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Wne=5;var Dt;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Dt||(Dt={}));let Gne=class{constructor(e){this.replacer=e}encode(e){return(e.type===Dt.EVENT||e.type===Dt.ACK)&&Vb(e)?this.encodeAsBinary({type:e.type===Dt.EVENT?Dt.BINARY_EVENT:Dt.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Dt.BINARY_EVENT||e.type===Dt.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=qne(e),r=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(r),a}};function pA(t){return Object.prototype.toString.call(t)==="[object Object]"}let Yne=class t$ extends Qn{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Dt.BINARY_EVENT;r||n.type===Dt.BINARY_ACK?(n.type=r?Dt.EVENT:Dt.ACK,this.reconstructor=new Jne(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(OE(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Dt[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Dt.BINARY_EVENT||r.type===Dt.BINARY_ACK){const i=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const s=e.substring(i,n);if(s!=Number(s)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(s)}if(e.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(i,n)}else r.nsp="/";const a=e.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const s=e.charAt(n);if(s==null||Number(s)!=s){--n;break}if(n===e.length)break}r.id=Number(e.substring(i,n+1))}if(e.charAt(++n)){const i=this.tryParse(e.substr(n));if(t$.isPayloadValid(r.type,i))r.data=i;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Dt.CONNECT:return pA(n);case Dt.DISCONNECT:return n===void 0;case Dt.CONNECT_ERROR:return typeof n=="string"||pA(n);case Dt.EVENT:case Dt.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Vne.indexOf(n[0])===-1);case Dt.ACK:case Dt.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}};class Jne{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Kne(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Zne=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Yne,Encoder:Gne,get PacketType(){return Dt},protocol:Wne},Symbol.toStringTag,{value:"Module"}));function Pi(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Xne=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class n$ extends Qn{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Pi(e,"open",this.onopen.bind(this)),Pi(e,"packet",this.onpacket.bind(this)),Pi(e,"error",this.onerror.bind(this)),Pi(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,a,i;if(Xne.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const s={type:Dt.EVENT,data:n};if(s.options={},s.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const l=this.ids++,u=n.pop();this._registerAckCallback(l,u),s.id=l}const o=(a=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!o||(c?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,n){var r;const a=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(a===void 0){this.acks[e]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},a),s=(...o)=>{this.io.clearTimeoutFn(i),n.apply(this,o)};s.withError=!0,this.acks[e]=s}emitWithAck(e,...n){return new Promise((r,a)=>{const i=(s,o)=>s?a(s):r(o);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((a,...i)=>r!==this._queue[0]?void 0:(a!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Dt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Dt.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Dt.EVENT:case Dt.BINARY_EVENT:this.onevent(e);break;case Dt.ACK:case Dt.BINARY_ACK:this.onack(e);break;case Dt.DISCONNECT:this.ondisconnect();break;case Dt.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...a){r||(r=!0,n.packet({type:Dt.ACK,id:e,data:a}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Dt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function yu(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}yu.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};yu.prototype.reset=function(){this.attempts=0};yu.prototype.setMin=function(t){this.ms=t};yu.prototype.setMax=function(t){this.max=t};yu.prototype.setJitter=function(t){this.jitter=t};class O4 extends Qn{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Oy(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new yu({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const a=n.parser||Zne;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Bne(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const a=Pi(n,"open",function(){r.onopen(),e&&e()}),i=o=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",o),e?e(o):this.maybeReconnectOnOpen()},s=Pi(n,"error",i);if(this._timeout!==!1){const o=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},o);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Pi(e,"ping",this.onping.bind(this)),Pi(e,"data",this.ondata.bind(this)),Pi(e,"error",this.onerror.bind(this)),Pi(e,"close",this.onclose.bind(this)),Pi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Iy(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new n$(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(a=>{a?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",a)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const of={};function Gf(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Fne(t,e.path||"/socket.io"),r=n.source,a=n.id,i=n.path,s=of[a]&&i in of[a].nsps,o=e.forceNew||e["force new connection"]||e.multiplex===!1||s;let c;return o?c=new O4(r,e):(of[a]||(of[a]=new O4(r,e)),c=of[a]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(Gf,{Manager:O4,Socket:n$,io:Gf,connect:Gf});var j0=Yi.getLogger("SecurePubSub");class r${constructor(e={}){re(this,"options",void 0),re(this,"SOCKET_CONN",null),this.options=e,this.options.timeout=e.timeout||600,this.options.serverUrl=e.serverUrl||rne,this.options.socketUrl=e.socketUrl||ane,this.options.enableLogging=e.enableLogging||!1,this.options.namespace=e.namespace||"",this.options.sameIpCheck=e.sameIpCheck||!1,this.options.allowedOrigin=e.allowedOrigin||"*",this.options.enableLogging?j0.enableAll():j0.disableAll()}static setLogLevel(e){j0.setLevel(e),yte(e)}async publish(e,n){if(!this.isValidTopic(e))throw j0.error("Invalid topic"),new Error("Invalid topic");const r=c6(Buffer.from(e,"utf8")),a=await Hb(r.toString("hex"),n),i=await jb(r,c6(Buffer.from(a,"utf8"))),s={key:Jc(r).toString("hex"),data:a,signature:i.toString("hex"),timeout:this.options.timeout,namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin};return Cy(`${this.options.serverUrl}/v2/channel/set`,s)}async subscribe(e){let n=!0;const r=c6(Buffer.from(e,"utf8")),a=Jc(r).toString("hex"),i=this.getSocketConnection();i.connected?(j0.debug("already connected with socket"),i.emit("v2:check_auth_status",a,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin})):i.once("connect",()=>{j0.debug("connected with socket"),i.emit("v2:check_auth_status",a,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin})});const s=()=>{i.once("connect",async()=>{j0.debug("connected with socket using reconnect"),n&&i.emit("v2:check_auth_status",a,{namespace:this.options.namespace,sameIpCheck:this.options.sameIpCheck,allowedOrigin:this.options.allowedOrigin})})},o=()=>{n||document.removeEventListener("visibilitychange",o),!i.connected&&document.visibilityState==="visible"&&s()},c=()=>{j0.debug("socket disconnected",n),n?(j0.error("socket disconnected unexpectedly, reconnecting socket"),s()):i.removeListener("disconnect",c)};i.on("disconnect",c);const d=new Promise((l,u)=>{const f=async p=>{try{const h=await FD(r.toString("hex"),p);j0.info("got data",h),l(h)}catch(h){j0.error(h),u(h)}finally{n=!1,typeof document<"u"&&document.removeEventListener("visibilitychange",o)}};j0.info("listening to",`${a}_success`),i.once(`${a}_success`,f)});return typeof document<"u"&&document.addEventListener("visibilitychange",o),d}cleanup(){this.SOCKET_CONN&&(this.SOCKET_CONN.disconnect(),this.SOCKET_CONN=null)}getSocketConnection(){if(this.SOCKET_CONN)return this.SOCKET_CONN;const e=Gf(this.options.socketUrl,{transports:["websocket","polling"],withCredentials:!0,reconnectionDelayMax:1e4,reconnectionAttempts:10});return e.on("connect_error",n=>{e.io.opts.transports=["polling","websocket"],j0.error("connect error",n)}),e.on("connect",async()=>{const{engine:n}=e.io;j0.debug("initially connected to",n.transport.name),n.once("upgrade",()=>{j0.debug("upgraded",n.transport.name)}),n.once("close",r=>{j0.debug("connection closed",r)})}),e.on("error",n=>{j0.error("socket errored",n),e.disconnect()}),this.SOCKET_CONN=e,this.SOCKET_CONN}isValidTopic(e){return e&&e.length>0}}class Qne extends l0.EventEmitter{constructor({url:e,target:n,features:r,timeout:a=3e4,sessionSocketUrl:i,sessionServerUrl:s}){super(),re(this,"url",void 0),re(this,"target",void 0),re(this,"features",void 0),re(this,"window",void 0),re(this,"windowTimer",void 0),re(this,"iClosedWindow",void 0),re(this,"timeout",void 0),re(this,"sessionSocketUrl",void 0),re(this,"sessionServerUrl",void 0),this.url=e,this.target=n||"_blank",this.features=r||lD(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=a,this.sessionServerUrl=s||kD,this.sessionSocketUrl=i||ND,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),this.window===void 0&&clearInterval(this.windowTimer)},500))}open(){var e;if(this.window=window.open(this.url,this.target,this.features),!this.window)throw en.popupBlocked();(e=this.window)!==null&&e!==void 0&&e.focus&&this.window.focus()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url):window.location.href=this.url}async listenOnChannel(e){const n=new r$({serverUrl:this.sessionServerUrl,socketUrl:this.sessionSocketUrl,sameIpCheck:!0,allowedOrigin:!0}),r=await n.subscribe(e);this.close(),n.cleanup();const a=JSON.parse(r);return a.error?{error:a.error,state:a.state}:a.data}}const M4="10.4.2";function e0e(t=!1){const e={},n=new URLSearchParams(window.location.search.slice(1));n.forEach((s,o)=>{o!=="b64Params"&&(e[o]=s)});const r=n.get("b64Params");if(r)try{const s=JSON.parse(U2(r));Object.keys(s).forEach(o=>{e[o]=s[o]})}catch(s){Ko.error(s)}const a=new URLSearchParams(window.location.hash.substring(1));a.forEach((s,o)=>{o!=="b64Params"&&(e[o]=s)});const i=a.get("b64Params");if(i)try{const s=JSON.parse(U2(i));Object.keys(s).forEach(o=>{e[o]=s[o]})}catch(s){Ko.error(s)}if(t){const s=new URL(window.location.origin+window.location.pathname);n.size!==0&&(n.delete("error"),n.delete("state"),n.delete("b64Params"),n.delete("sessionNamespace"),s.search=n.toString()),a.size!==0&&(a.delete("error"),a.delete("state"),a.delete("b64Params"),a.delete("sessionNamespace"),s.hash=a.toString()),window.history.replaceState(Q(Q({},window.history.state),{},{as:s.href,url:s.href}),"",s.href)}return e}class a${constructor(){re(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,n){this.store.set(e,n)}removeItem(e){this.store.delete(e)}}class i${constructor(e,n){re(this,"storage",void 0),re(this,"_storeKey",void 0),this.storage=n,this._storeKey=e;try{n.getItem(e)||this.resetStore()}catch{}}static getInstance(e,n="local"){if(!this.instanceMap.has(e)){let r;n==="local"&&w4("localStorage")?r=window.localStorage:n==="session"&&w4("sessionStorage")?r=window.sessionStorage:r=new a$,this.instanceMap.set(e,new this(e,r))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,n){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=n,this.storage.setItem(this._storeKey,JSON.stringify(r))}}re(i$,"instanceMap",new Map);class t0e{constructor(e){if(re(this,"state",{}),re(this,"options",void 0),re(this,"sessionManager",void 0),re(this,"currentStorage",void 0),re(this,"_storageBaseKey","auth_store"),re(this,"dappState",void 0),re(this,"addVersionInUrls",!0),re(this,"authProvider",void 0),re(this,"authProviderPromise",void 0),!e.clientId)throw Mo.invalidParams("clientId is required");e.network||(e.network=Wf.SAPPHIRE_MAINNET),e.buildEnv||(e.buildEnv=Ac.PRODUCTION),e.sdkMode||(e.sdkMode=is.DEFAULT),(e.buildEnv===Ac.DEVELOPMENT||e.buildEnv===Ac.TESTING||e.sdkUrl)&&(this.addVersionInUrls=!1),!e.sdkUrl&&!e.useMpc&&(e.buildEnv===Ac.DEVELOPMENT?(e.sdkUrl=jte,e.dashboardUrl=Kte):e.buildEnv===Ac.STAGING?(e.sdkUrl=Hte,e.dashboardUrl=Vte):e.buildEnv===Ac.TESTING?(e.sdkUrl=zte,e.dashboardUrl=Wte):(e.sdkUrl=qte,e.dashboardUrl=Gte)),!e.redirectUrl&&typeof window<"u"&&(e.redirectUrl=`${window.location.protocol}//${window.location.host}${window.location.pathname}`),e.uxMode||(e.uxMode=W0.REDIRECT),typeof e.replaceUrlOnRedirect!="boolean"&&(e.replaceUrlOnRedirect=!0),typeof e.includeUserDataInToken!="boolean"&&(e.includeUserDataInToken=!0),e.originData||(e.originData={}),e.whiteLabel||(e.whiteLabel={}),e.authConnectionConfig||(e.authConnectionConfig=[]),e.mfaSettings||(e.mfaSettings={}),e.storageServerUrl||(e.storageServerUrl=kD),e.sessionSocketUrl||(e.sessionSocketUrl=ND),e.storage||(e.storage="local"),e.sessionTime||(e.sessionTime=86400),this.options=e}get privKey(){return this.options.useMpc?this.state.factorKey||"":this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}get ed25519PrivKey(){return this.state.ed25519PrivKey?this.state.ed25519PrivKey.padStart(128,"0"):""}get coreKitEd25519Key(){return this.state.coreKitEd25519PrivKey?this.state.coreKitEd25519PrivKey.padStart(128,"0"):""}get sessionId(){return this.state.sessionId||""}get sessionNamespace(){return this.options.sessionNamespace||""}get appState(){return this.state.userInfo.appState||this.dappState||""}get baseUrl(){return this.addVersionInUrls?`${this.options.sdkUrl}/v${M4.split(".")[0]}`:`${this.options.sdkUrl}`}get dashboardUrl(){return this.addVersionInUrls?`${this.options.dashboardUrl}/v${M4.split(".")[0]}`:`${this.options.dashboardUrl}`}async init(){const e=e0e(this.options.replaceUrlOnRedirect);e.sessionNamespace&&(this.options.sessionNamespace=e.sessionNamespace);const n=this.options.sessionKey||(this.options.sessionNamespace?`${this._storageBaseKey}_${this.options.sessionNamespace}`:this._storageBaseKey);this.currentStorage=i$.getInstance(n,this.options.storage);const r=this.currentStorage.get("sessionId");if(this.sessionManager=new Ih({sessionServerBaseUrl:this.options.storageServerUrl,sessionNamespace:this.options.sessionNamespace,sessionTime:this.options.sessionTime,sessionId:r,allowedOrigin:this.options.sdkUrl}),(this.options.network===Wf.TESTNET||this.options.network===Wf.SAPPHIRE_DEVNET)&&console.log(`%c WARNING! You are on ${this.options.network}. Please set network: 'mainnet' or 'sapphire_mainnet' in production`,"color: #FF0000"),this.options.buildEnv!==Ac.PRODUCTION&&console.log(`%c WARNING! You are using build env ${this.options.buildEnv}. Please set buildEnv: 'production' in production`,"color: #FF0000"),e.error)throw this.dappState=e.state,en.loginFailed(e.error);if(e.sessionId&&(this.currentStorage.set("sessionId",e.sessionId),this.sessionManager.sessionId=e.sessionId),this.sessionManager.sessionId){const a=await this._authorizeSession();this.updateState(a),Object.keys(a).length===0?this.currentStorage.set("sessionId",""):this.updateState({sessionId:this.sessionManager.sessionId})}this.options.sdkMode===is.IFRAME&&(this.authProvider=new Qte({sdkUrl:this.baseUrl,whiteLabel:this.options.whiteLabel}),this.state.sessionId||(this.authProviderPromise=this.authProvider.init({network:this.options.network,clientId:this.options.clientId}),e.nonce&&(await this.authProviderPromise,await this.postLoginInitiatedMessage(JSON.parse(e.loginParams),e.nonce))))}async login(e){if(!e.authConnection&&(!e.authConnectionId||!e.groupedAuthConnectionId))throw en.invalidLoginParams("AuthConnection is required");const n=Q({},e),r={actionType:ml.LOGIN,options:this.options,params:n},a=await this.authHandler(`${this.baseUrl}/start`,r,EE(e.authConnection));if(this.options.uxMode===W0.REDIRECT)return null;if(a.error)throw this.dappState=a.state,en.loginFailed(a.error);return this.sessionManager.sessionId=a.sessionId,this.options.sessionNamespace=a.sessionNamespace,this.currentStorage.set("sessionId",a.sessionId),await this.rehydrateSession(),{privKey:this.privKey}}async postLoginInitiatedMessage(e,n){var r;if(this.options.sdkMode!==is.IFRAME)throw en.invalidLoginParams("Cannot perform this action in default mode.");this.authProviderPromise&&await this.authProviderPromise,(r=this.authProvider)!==null&&r!==void 0&&r.initialized||await this.authProvider.init({network:this.options.network,clientId:this.options.clientId});const a=await this.authProvider.postLoginInitiatedMessage({actionType:ml.LOGIN,params:e,options:this.options},n);if(a.error)throw en.loginFailed(a.error);this.sessionManager.sessionId=a.sessionId,this.options.sessionNamespace=a.sessionNamespace,this.currentStorage.set("sessionId",a.sessionId),await this.rehydrateSession()}async postLoginCancelledMessage(e){var n;if(this.options.sdkMode!==is.IFRAME)throw en.invalidLoginParams("Cannot perform this action in default mode.");if(this.authProviderPromise&&await this.authProviderPromise,!((n=this.authProvider)!==null&&n!==void 0&&n.initialized))throw Mo.notInitialized();this.authProvider.postLoginCancelledMessage(e)}async logout(){if(!this.sessionManager.sessionId)throw en.userNotLoggedIn();await this.sessionManager.invalidateSession(),this.updateState({privKey:"",coreKitKey:"",coreKitEd25519PrivKey:"",ed25519PrivKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",metadataNonce:"",keyMode:void 0,userInfo:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",appState:"",email:"",authConnectionId:"",userId:"",groupedAuthConnectionId:"",authConnection:"",isMfaEnabled:!1},authToken:"",sessionId:"",factorKey:"",signatures:[],tssShareIndex:-1,tssPubKey:"",tssShare:"",tssNonce:-1}),this.currentStorage.set("sessionId","")}async enableMFA(e){var n;if(!this.sessionId)throw en.userNotLoggedIn();if(this.state.userInfo.isMfaEnabled)throw en.mfaAlreadyEnabled();const r={actionType:ml.ENABLE_MFA,options:Q(Q({},this.options),{},{sdkMode:is.DEFAULT}),params:Q(Q({},e),{},{authConnection:this.state.userInfo.authConnection,authConnectionId:this.state.userInfo.authConnectionId,groupedAuthConnectionId:this.state.userInfo.groupedAuthConnectionId,extraLoginOptions:{login_hint:this.state.userInfo.userId},mfaLevel:"mandatory"}),sessionId:this.sessionId},a=await this.authHandler(`${this.baseUrl}/start`,r,Yte);if(this.options.uxMode===W0.REDIRECT)return null;if(a.error)throw this.dappState=a.state,en.loginFailed(a.error);return this.sessionManager.sessionId=a.sessionId,this.options.sessionNamespace=a.sessionNamespace,this.currentStorage.set("sessionId",a.sessionId),await this.rehydrateSession(),!!(!((n=this.state.userInfo)===null||n===void 0)&&n.isMfaEnabled)}async manageMFA(e){if(!this.sessionId)throw en.userNotLoggedIn();if(!this.state.userInfo.isMfaEnabled)throw en.mfaNotEnabled();const n={dappUrl:`${window.location.origin}${window.location.pathname}`},r=Ih.generateRandomSessionKey(),a={actionType:ml.MANAGE_MFA,options:Q(Q({},this.options),{},{uxMode:W0.REDIRECT,sdkMode:is.DEFAULT,redirectUrl:`${this.dashboardUrl}/wallet/account`}),params:Q(Q(Q({},n),e),{},{authConnection:this.state.userInfo.authConnection,authConnectionId:this.state.userInfo.authConnectionId,groupedAuthConnectionId:this.state.userInfo.groupedAuthConnectionId,extraLoginOptions:{login_hint:this.state.userInfo.userId},appState:Oh({loginId:r})}),sessionId:this.sessionId};this.createLoginSession(r,a,a.options.sessionTime,!0);const i={loginId:r,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl},s=qf({baseURL:`${this.baseUrl}/start`,hash:{b64Params:Oh(i)}});window.open(s,"_blank")}async manageSocialFactor(e,n){if(!this.sessionId)throw en.userNotLoggedIn();const r={actionType:e,options:Q(Q({},this.options),{},{sdkMode:is.DEFAULT}),params:Q({},n),sessionId:this.sessionId},a=await this.authHandler(`${this.baseUrl}/start`,r);if(this.options.uxMode!==W0.REDIRECT)return!a.error}async addAuthenticatorFactor(e){if(!this.sessionId)throw en.userNotLoggedIn();const n={actionType:ml.ADD_AUTHENTICATOR_FACTOR,options:Q(Q({},this.options),{},{sdkMode:is.DEFAULT}),params:Q(Q({},e),{},{authConnection:$e.AUTHENTICATOR}),sessionId:this.sessionId},r=await this.authHandler(`${this.baseUrl}/start`,n);if(this.options.uxMode!==W0.REDIRECT)return!r.error}async addPasskeyFactor(e){if(!this.sessionId)throw en.userNotLoggedIn();const n={actionType:ml.ADD_PASSKEY_FACTOR,options:Q(Q({},this.options),{},{sdkMode:is.DEFAULT}),params:Q(Q({},e),{},{authConnection:$e.PASSKEYS}),sessionId:this.sessionId},r=await this.authHandler(`${this.baseUrl}/start`,n);if(this.options.uxMode!==W0.REDIRECT)return!r.error}async cleanup(){this.authProvider&&this.authProvider.cleanup()}getUserInfo(){if(!this.sessionManager.sessionId)throw en.userNotLoggedIn();return this.state.userInfo}async createLoginSession(e,n,r=600,a=!1){if(!this.sessionManager)throw Mo.notInitialized();const s=new Ih({sessionServerBaseUrl:n.options.storageServerUrl,sessionNamespace:n.options.sessionNamespace,sessionTime:r,sessionId:e,allowedOrigin:this.options.sdkUrl}).createSession(JSON.parse(JSON.stringify(n)));n.options.uxMode===W0.REDIRECT&&!a&&await s}async _authorizeSession(){try{return this.sessionManager.sessionId?await this.sessionManager.authorizeSession():{}}catch(e){return Ko.error("authorization failed",e),{}}}updateState(e){this.state=Q(Q({},this.state),e)}async rehydrateSession(){const e=await this._authorizeSession();this.updateState(e)}async authHandler(e,n,r=1e3*10){const a=Ih.generateRandomSessionKey();await this.createLoginSession(a,n);const i={loginId:a,sessionNamespace:this.options.sessionNamespace,storageServerUrl:this.options.storageServerUrl};if(this.options.uxMode===W0.REDIRECT){const c=qf({baseURL:e,hash:{b64Params:Oh(i)}});window.location.href=c;return}const s=qf({baseURL:e,hash:{b64Params:Oh(i)}}),o=new Qne({url:s,timeout:r,sessionServerUrl:this.options.storageServerUrl,sessionSocketUrl:this.options.sessionSocketUrl});return new Promise((c,d)=>{o.on("close",()=>{d(en.popupClosed())}),o.listenOnChannel(a).then(c).catch(d);try{o.open()}catch(l){d(l)}})}}var s$={exports:{}},Bm={exports:{}};let n0e=class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError(`Expected input to be an Array, got ${typeof e}`);let n="";for(let r=0;r<e.length;r++)n+=`    ${e[r].stack}
`;super(n),this.name="AggregateError",this.errors=e}};var Dn={AggregateError:n0e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,e){return t.includes(e)},ArrayPrototypeIndexOf(t,e){return t.indexOf(e)},ArrayPrototypeJoin(t,e){return t.join(e)},ArrayPrototypeMap(t,e){return t.map(e)},ArrayPrototypePop(t,e){return t.pop(e)},ArrayPrototypePush(t,e){return t.push(e)},ArrayPrototypeSlice(t,e,n){return t.slice(e,n)},Error,FunctionPrototypeCall(t,e,...n){return t.call(e,...n)},FunctionPrototypeSymbolHasInstance(t,e){return Function.prototype[Symbol.hasInstance].call(t,e)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,e){return Object.defineProperties(t,e)},ObjectDefineProperty(t,e,n){return Object.defineProperty(t,e,n)},ObjectGetOwnPropertyDescriptor(t,e){return Object.getOwnPropertyDescriptor(t,e)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,e){return Object.setPrototypeOf(t,e)},Promise,PromisePrototypeCatch(t,e){return t.catch(e)},PromisePrototypeThen(t,e,n){return t.then(e,n)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,e){return t.test(e)},SafeSet:Set,String,StringPrototypeSlice(t,e,n){return t.slice(e,n)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,e,n){return t.set(e,n)},Boolean,Uint8Array},o$={exports:{}},c$={format(t,...e){return t.replace(/%([sdifj])/g,function(...[n,r]){const a=e.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(t){switch(typeof t){case"string":if(t.includes("'"))if(t.includes('"')){if(!t.includes("`")&&!t.includes("${"))return`\`${t}\``}else return`"${t}"`;return`'${t}'`;case"number":return isNaN(t)?"NaN":Object.is(t,-0)?String(t):t;case"bigint":return`${String(t)}n`;case"boolean":case"undefined":return String(t);case"object":return"{}"}}};const{format:r0e,inspect:j2}=c$,{AggregateError:a0e}=Dn,i0e=globalThis.AggregateError||a0e,s0e=Symbol("kIsNodeError"),o0e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],c0e=/^([A-Z][a-z0-9]*)+$/,d0e="__node_internal_",My={};function pd(t,e){if(!t)throw new My.ERR_INTERNAL_ASSERTION(e)}function hA(t){let e="",n=t.length;const r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function l0e(t,e,n){if(typeof e=="function")return pd(e.length<=n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${e.length}).`),e(...n);const r=(e.match(/%[dfijoOs]/g)||[]).length;return pd(r===n.length,`Code: ${t}; The provided arguments length (${n.length}) does not match the required ones (${r}).`),n.length===0?e:r0e(e,...n)}function Z0(t,e,n){n||(n=Error);class r extends n{constructor(...i){super(l0e(t,e,i))}toString(){return`${this.name} [${t}]: ${this.message}`}}Object.defineProperties(r.prototype,{name:{value:n.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${t}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),r.prototype.code=t,r.prototype[s0e]=!0,My[t]=r}function bA(t){const e=d0e+t.name;return Object.defineProperty(t,"name",{value:e}),t}function u0e(t,e){if(t&&e&&t!==e){if(Array.isArray(e.errors))return e.errors.push(t),e;const n=new i0e([e,t],e.message);return n.code=e.code,n}return t||e}let f0e=class extends Error{constructor(e="The operation was aborted",n=void 0){if(n!==void 0&&typeof n!="object")throw new My.ERR_INVALID_ARG_TYPE("options","Object",n);super(e,n),this.code="ABORT_ERR",this.name="AbortError"}};Z0("ERR_ASSERTION","%s",Error);Z0("ERR_INVALID_ARG_TYPE",(t,e,n)=>{pd(typeof t=="string","'name' must be a string"),Array.isArray(e)||(e=[e]);let r="The ";t.endsWith(" argument")?r+=`${t} `:r+=`"${t}" ${t.includes(".")?"property":"argument"} `,r+="must be ";const a=[],i=[],s=[];for(const c of e)pd(typeof c=="string","All expected entries have to be of type string"),o0e.includes(c)?a.push(c.toLowerCase()):c0e.test(c)?i.push(c):(pd(c!=="object",'The value "object" should be written as "Object"'),s.push(c));if(i.length>0){const c=a.indexOf("object");c!==-1&&(a.splice(a,c,1),i.push("Object"))}if(a.length>0){switch(a.length){case 1:r+=`of type ${a[0]}`;break;case 2:r+=`one of type ${a[0]} or ${a[1]}`;break;default:{const c=a.pop();r+=`one of type ${a.join(", ")}, or ${c}`}}(i.length>0||s.length>0)&&(r+=" or ")}if(i.length>0){switch(i.length){case 1:r+=`an instance of ${i[0]}`;break;case 2:r+=`an instance of ${i[0]} or ${i[1]}`;break;default:{const c=i.pop();r+=`an instance of ${i.join(", ")}, or ${c}`}}s.length>0&&(r+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(r+="an "),r+=`${s[0]}`;break;case 2:r+=`one of ${s[0]} or ${s[1]}`;break;default:{const c=s.pop();r+=`one of ${s.join(", ")}, or ${c}`}}if(n==null)r+=`. Received ${n}`;else if(typeof n=="function"&&n.name)r+=`. Received function ${n.name}`;else if(typeof n=="object"){var o;if((o=n.constructor)!==null&&o!==void 0&&o.name)r+=`. Received an instance of ${n.constructor.name}`;else{const c=j2(n,{depth:-1});r+=`. Received ${c}`}}else{let c=j2(n,{colors:!1});c.length>25&&(c=`${c.slice(0,25)}...`),r+=`. Received type ${typeof n} (${c})`}return r},TypeError);Z0("ERR_INVALID_ARG_VALUE",(t,e,n="is invalid")=>{let r=j2(e);return r.length>128&&(r=r.slice(0,128)+"..."),`The ${t.includes(".")?"property":"argument"} '${t}' ${n}. Received ${r}`},TypeError);Z0("ERR_INVALID_RETURN_VALUE",(t,e,n)=>{var r;const a=n!=null&&(r=n.constructor)!==null&&r!==void 0&&r.name?`instance of ${n.constructor.name}`:`type ${typeof n}`;return`Expected ${t} to be returned from the "${e}" function but got ${a}.`},TypeError);Z0("ERR_MISSING_ARGS",(...t)=>{pd(t.length>0,"At least one arg needs to be specified");let e;const n=t.length;switch(t=(Array.isArray(t)?t:[t]).map(r=>`"${r}"`).join(" or "),n){case 1:e+=`The ${t[0]} argument`;break;case 2:e+=`The ${t[0]} and ${t[1]} arguments`;break;default:{const r=t.pop();e+=`The ${t.join(", ")}, and ${r} arguments`}break}return`${e} must be specified`},TypeError);Z0("ERR_OUT_OF_RANGE",(t,e,n)=>{pd(e,'Missing "range" argument');let r;if(Number.isInteger(n)&&Math.abs(n)>2**32)r=hA(String(n));else if(typeof n=="bigint"){r=String(n);const a=BigInt(2)**BigInt(32);(n>a||n<-a)&&(r=hA(r)),r+="n"}else r=j2(n);return`The value of "${t}" is out of range. It must be ${e}. Received ${r}`},RangeError);Z0("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);Z0("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);Z0("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);Z0("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);Z0("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);Z0("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Z0("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);Z0("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);Z0("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);Z0("ERR_STREAM_WRITE_AFTER_END","write after end",Error);Z0("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var Rr={AbortError:f0e,aggregateTwoErrors:bA(u0e),hideStackFrames:bA,codes:My},cf={exports:{}},yA;function w5(){if(yA)return cf.exports;yA=1;const{AbortController:t,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return cf.exports=t,cf.exports.AbortSignal=e,cf.exports.default=t,cf.exports}(function(t){const e=qd,{format:n,inspect:r}=c$,{codes:{ERR_INVALID_ARG_TYPE:a}}=Rr,{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Dn,c=globalThis.AbortSignal||w5().AbortSignal,d=globalThis.AbortController||w5().AbortController,l=Object.getPrototypeOf(async function(){}).constructor,u=globalThis.Blob||e.Blob,f=typeof u<"u"?function(v){return v instanceof u}:function(v){return!1},p=(b,v)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(v,"AbortSignal",b)},h=(b,v)=>{if(typeof b!="function")throw new a(v,"Function",b)};t.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let v=!1;return function(...m){v||(v=!0,b.apply(this,m))}},createDeferredPromise:function(){let b,v;return{promise:new Promise((T,A)=>{b=T,v=A}),resolve:b,reject:v}},promisify(b){return new Promise((v,m)=>{b((T,...A)=>T?m(T):v(...A))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof l},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:f,deprecate(b,v){return b},addAbortListener:l0.addAbortListener||function(v,m){if(v===void 0)throw new a("signal","AbortSignal",v);p(v,"signal"),h(m,"listener");let T;return v.aborted?queueMicrotask(()=>m()):(v.addEventListener("abort",m,{__proto__:null,once:!0,[i]:!0}),T=()=>{v.removeEventListener("abort",m)}),{__proto__:null,[o](){var A;(A=T)===null||A===void 0||A()}}},AbortSignalAny:c.any||function(v){if(v.length===1)return v[0];const m=new d,T=()=>m.abort();return v.forEach(A=>{p(A,"signals"),A.addEventListener("abort",T,{once:!0})}),m.signal.addEventListener("abort",()=>{v.forEach(A=>A.removeEventListener("abort",T))},{once:!0}),m.signal}},t.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(o$);var oa=o$.exports,ME={};const{ArrayIsArray:PE,ArrayPrototypeIncludes:d$,ArrayPrototypeJoin:l$,ArrayPrototypeMap:p0e,NumberIsInteger:kE,NumberIsNaN:h0e,NumberMAX_SAFE_INTEGER:b0e,NumberMIN_SAFE_INTEGER:y0e,NumberParseInt:m0e,ObjectPrototypeHasOwnProperty:g0e,RegExpPrototypeExec:u$,String:w0e,StringPrototypeToUpperCase:v0e,StringPrototypeTrim:E0e}=Dn,{hideStackFrames:yi,codes:{ERR_SOCKET_BAD_PORT:_0e,ERR_INVALID_ARG_TYPE:br,ERR_INVALID_ARG_VALUE:mu,ERR_OUT_OF_RANGE:xd,ERR_UNKNOWN_SIGNAL:mA}}=Rr,{normalizeEncoding:T0e}=oa,{isAsyncFunction:x0e,isArrayBufferView:S0e}=oa.types,gA={};function A0e(t){return t===(t|0)}function C0e(t){return t===t>>>0}const I0e=/^[0-7]+$/,O0e="must be a 32-bit unsigned integer or an octal string";function M0e(t,e,n){if(typeof t>"u"&&(t=n),typeof t=="string"){if(u$(I0e,t)===null)throw new mu(e,t,O0e);t=m0e(t,8)}return f$(t,e),t}const P0e=yi((t,e,n=y0e,r=b0e)=>{if(typeof t!="number")throw new br(e,"number",t);if(!kE(t))throw new xd(e,"an integer",t);if(t<n||t>r)throw new xd(e,`>= ${n} && <= ${r}`,t)}),k0e=yi((t,e,n=-2147483648,r=2147483647)=>{if(typeof t!="number")throw new br(e,"number",t);if(!kE(t))throw new xd(e,"an integer",t);if(t<n||t>r)throw new xd(e,`>= ${n} && <= ${r}`,t)}),f$=yi((t,e,n=!1)=>{if(typeof t!="number")throw new br(e,"number",t);if(!kE(t))throw new xd(e,"an integer",t);const r=n?1:0,a=4294967295;if(t<r||t>a)throw new xd(e,`>= ${r} && <= ${a}`,t)});function NE(t,e){if(typeof t!="string")throw new br(e,"string",t)}function N0e(t,e,n=void 0,r){if(typeof t!="number")throw new br(e,"number",t);if(n!=null&&t<n||r!=null&&t>r||(n!=null||r!=null)&&h0e(t))throw new xd(e,`${n!=null?`>= ${n}`:""}${n!=null&&r!=null?" && ":""}${r!=null?`<= ${r}`:""}`,t)}const R0e=yi((t,e,n)=>{if(!d$(n,t)){const a="must be one of: "+l$(p0e(n,i=>typeof i=="string"?`'${i}'`:w0e(i)),", ");throw new mu(e,t,a)}});function p$(t,e){if(typeof t!="boolean")throw new br(e,"boolean",t)}function Fm(t,e,n){return t==null||!g0e(t,e)?n:t[e]}const D0e=yi((t,e,n=null)=>{const r=Fm(n,"allowArray",!1),a=Fm(n,"allowFunction",!1);if(!Fm(n,"nullable",!1)&&t===null||!r&&PE(t)||typeof t!="object"&&(!a||typeof t!="function"))throw new br(e,"Object",t)}),$0e=yi((t,e)=>{if(t!=null&&typeof t!="object"&&typeof t!="function")throw new br(e,"a dictionary",t)}),Py=yi((t,e,n=0)=>{if(!PE(t))throw new br(e,"Array",t);if(t.length<n){const r=`must be longer than ${n}`;throw new mu(e,t,r)}});function L0e(t,e){Py(t,e);for(let n=0;n<t.length;n++)NE(t[n],`${e}[${n}]`)}function B0e(t,e){Py(t,e);for(let n=0;n<t.length;n++)p$(t[n],`${e}[${n}]`)}function F0e(t,e){Py(t,e);for(let n=0;n<t.length;n++){const r=t[n],a=`${e}[${n}]`;if(r==null)throw new br(a,"AbortSignal",r);h$(r,a)}}function U0e(t,e="signal"){if(NE(t,e),gA[t]===void 0)throw gA[v0e(t)]!==void 0?new mA(t+" (signals must use all capital letters)"):new mA(t)}const j0e=yi((t,e="buffer")=>{if(!S0e(t))throw new br(e,["Buffer","TypedArray","DataView"],t)});function H0e(t,e){const n=T0e(e),r=t.length;if(n==="hex"&&r%2!==0)throw new mu("encoding",e,`is invalid for data of length ${r}`)}function z0e(t,e="Port",n=!0){if(typeof t!="number"&&typeof t!="string"||typeof t=="string"&&E0e(t).length===0||+t!==+t>>>0||t>65535||t===0&&!n)throw new _0e(e,t,n);return t|0}const h$=yi((t,e)=>{if(t!==void 0&&(t===null||typeof t!="object"||!("aborted"in t)))throw new br(e,"AbortSignal",t)}),q0e=yi((t,e)=>{if(typeof t!="function")throw new br(e,"Function",t)}),K0e=yi((t,e)=>{if(typeof t!="function"||x0e(t))throw new br(e,"Function",t)}),V0e=yi((t,e)=>{if(t!==void 0)throw new br(e,"undefined",t)});function W0e(t,e,n){if(!d$(n,t))throw new br(e,`('${l$(n,"|")}')`,t)}const G0e=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function wA(t,e){if(typeof t>"u"||!u$(G0e,t))throw new mu(e,t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Y0e(t){if(typeof t=="string")return wA(t,"hints"),t;if(PE(t)){const e=t.length;let n="";if(e===0)return n;for(let r=0;r<e;r++){const a=t[r];wA(a,"hints"),n+=a,r!==e-1&&(n+=", ")}return n}throw new mu("hints",t,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var kp={isInt32:A0e,isUint32:C0e,parseFileMode:M0e,validateArray:Py,validateStringArray:L0e,validateBooleanArray:B0e,validateAbortSignalArray:F0e,validateBoolean:p$,validateBuffer:j0e,validateDictionary:$0e,validateEncoding:H0e,validateFunction:q0e,validateInt32:k0e,validateInteger:P0e,validateNumber:N0e,validateObject:D0e,validateOneOf:R0e,validatePlainFunction:K0e,validatePort:z0e,validateSignalName:U0e,validateString:NE,validateUint32:f$,validateUndefined:V0e,validateUnion:W0e,validateAbortSignal:h$,validateLinkHeaderValue:Y0e},RE={exports:{}},b$={exports:{}},Gn=b$.exports={},fs,ps;function P4(){throw new Error("setTimeout has not been defined")}function k4(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?fs=setTimeout:fs=P4}catch{fs=P4}try{typeof clearTimeout=="function"?ps=clearTimeout:ps=k4}catch{ps=k4}})();function y$(t){if(fs===setTimeout)return setTimeout(t,0);if((fs===P4||!fs)&&setTimeout)return fs=setTimeout,setTimeout(t,0);try{return fs(t,0)}catch{try{return fs.call(null,t,0)}catch{return fs.call(this,t,0)}}}function J0e(t){if(ps===clearTimeout)return clearTimeout(t);if((ps===k4||!ps)&&clearTimeout)return ps=clearTimeout,clearTimeout(t);try{return ps(t)}catch{try{return ps.call(null,t)}catch{return ps.call(this,t)}}}var Po=[],l6=!1,Y1,Wb=-1;function Z0e(){!l6||!Y1||(l6=!1,Y1.length?Po=Y1.concat(Po):Wb=-1,Po.length&&m$())}function m$(){if(!l6){var t=y$(Z0e);l6=!0;for(var e=Po.length;e;){for(Y1=Po,Po=[];++Wb<e;)Y1&&Y1[Wb].run();Wb=-1,e=Po.length}Y1=null,l6=!1,J0e(t)}}Gn.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Po.push(new g$(t,e)),Po.length===1&&!l6&&y$(m$)};function g$(t,e){this.fun=t,this.array=e}g$.prototype.run=function(){this.fun.apply(null,this.array)};Gn.title="browser";Gn.browser=!0;Gn.env={};Gn.argv=[];Gn.version="";Gn.versions={};function ec(){}Gn.on=ec;Gn.addListener=ec;Gn.once=ec;Gn.off=ec;Gn.removeListener=ec;Gn.removeAllListeners=ec;Gn.emit=ec;Gn.prependListener=ec;Gn.prependOnceListener=ec;Gn.listeners=function(t){return[]};Gn.binding=function(t){throw new Error("process.binding is not supported")};Gn.cwd=function(){return"/"};Gn.chdir=function(t){throw new Error("process.chdir is not supported")};Gn.umask=function(){return 0};var Gd=b$.exports;const{SymbolAsyncIterator:vA,SymbolIterator:EA,SymbolFor:Yd}=Dn,w$=Yd("nodejs.stream.destroyed"),v$=Yd("nodejs.stream.errored"),N4=Yd("nodejs.stream.readable"),R4=Yd("nodejs.stream.writable"),E$=Yd("nodejs.stream.disturbed"),X0e=Yd("nodejs.webstream.isClosedPromise"),Q0e=Yd("nodejs.webstream.controllerErrorFunction");function ky(t,e=!1){var n;return!!(t&&typeof t.pipe=="function"&&typeof t.on=="function"&&(!e||typeof t.pause=="function"&&typeof t.resume=="function")&&(!t._writableState||((n=t._readableState)===null||n===void 0?void 0:n.readable)!==!1)&&(!t._writableState||t._readableState))}function Ny(t){var e;return!!(t&&typeof t.write=="function"&&typeof t.on=="function"&&(!t._readableState||((e=t._writableState)===null||e===void 0?void 0:e.writable)!==!1))}function ere(t){return!!(t&&typeof t.pipe=="function"&&t._readableState&&typeof t.on=="function"&&typeof t.write=="function")}function Ys(t){return t&&(t._readableState||t._writableState||typeof t.write=="function"&&typeof t.on=="function"||typeof t.pipe=="function"&&typeof t.on=="function")}function _$(t){return!!(t&&!Ys(t)&&typeof t.pipeThrough=="function"&&typeof t.getReader=="function"&&typeof t.cancel=="function")}function T$(t){return!!(t&&!Ys(t)&&typeof t.getWriter=="function"&&typeof t.abort=="function")}function x$(t){return!!(t&&!Ys(t)&&typeof t.readable=="object"&&typeof t.writable=="object")}function tre(t){return _$(t)||T$(t)||x$(t)}function nre(t,e){return t==null?!1:e===!0?typeof t[vA]=="function":e===!1?typeof t[EA]=="function":typeof t[vA]=="function"||typeof t[EA]=="function"}function Ry(t){if(!Ys(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!!(t.destroyed||t[w$]||r!=null&&r.destroyed)}function S$(t){if(!Ny(t))return null;if(t.writableEnded===!0)return!0;const e=t._writableState;return e!=null&&e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function rre(t,e){if(!Ny(t))return null;if(t.writableFinished===!0)return!0;const n=t._writableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.finished)!="boolean"?null:!!(n.finished||e===!1&&n.ended===!0&&n.length===0)}function are(t){if(!ky(t))return null;if(t.readableEnded===!0)return!0;const e=t._readableState;return!e||e.errored?!1:typeof(e==null?void 0:e.ended)!="boolean"?null:e.ended}function A$(t,e){if(!ky(t))return null;const n=t._readableState;return n!=null&&n.errored?!1:typeof(n==null?void 0:n.endEmitted)!="boolean"?null:!!(n.endEmitted||e===!1&&n.ended===!0&&n.length===0)}function C$(t){return t&&t[N4]!=null?t[N4]:typeof(t==null?void 0:t.readable)!="boolean"?null:Ry(t)?!1:ky(t)&&t.readable&&!A$(t)}function I$(t){return t&&t[R4]!=null?t[R4]:typeof(t==null?void 0:t.writable)!="boolean"?null:Ry(t)?!1:Ny(t)&&t.writable&&!S$(t)}function ire(t,e){return Ys(t)?Ry(t)?!0:!((e==null?void 0:e.readable)!==!1&&C$(t)||(e==null?void 0:e.writable)!==!1&&I$(t)):null}function sre(t){var e,n;return Ys(t)?t.writableErrored?t.writableErrored:(e=(n=t._writableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function ore(t){var e,n;return Ys(t)?t.readableErrored?t.readableErrored:(e=(n=t._readableState)===null||n===void 0?void 0:n.errored)!==null&&e!==void 0?e:null:null}function cre(t){if(!Ys(t))return null;if(typeof t.closed=="boolean")return t.closed;const e=t._writableState,n=t._readableState;return typeof(e==null?void 0:e.closed)=="boolean"||typeof(n==null?void 0:n.closed)=="boolean"?(e==null?void 0:e.closed)||(n==null?void 0:n.closed):typeof t._closed=="boolean"&&O$(t)?t._closed:null}function O$(t){return typeof t._closed=="boolean"&&typeof t._defaultKeepAlive=="boolean"&&typeof t._removedConnection=="boolean"&&typeof t._removedContLen=="boolean"}function M$(t){return typeof t._sent100=="boolean"&&O$(t)}function dre(t){var e;return typeof t._consuming=="boolean"&&typeof t._dumped=="boolean"&&((e=t.req)===null||e===void 0?void 0:e.upgradeOrConnect)===void 0}function lre(t){if(!Ys(t))return null;const e=t._writableState,n=t._readableState,r=e||n;return!r&&M$(t)||!!(r&&r.autoDestroy&&r.emitClose&&r.closed===!1)}function ure(t){var e;return!!(t&&((e=t[E$])!==null&&e!==void 0?e:t.readableDidRead||t.readableAborted))}function fre(t){var e,n,r,a,i,s,o,c,d,l;return!!(t&&((e=(n=(r=(a=(i=(s=t[v$])!==null&&s!==void 0?s:t.readableErrored)!==null&&i!==void 0?i:t.writableErrored)!==null&&a!==void 0?a:(o=t._readableState)===null||o===void 0?void 0:o.errorEmitted)!==null&&r!==void 0?r:(c=t._writableState)===null||c===void 0?void 0:c.errorEmitted)!==null&&n!==void 0?n:(d=t._readableState)===null||d===void 0?void 0:d.errored)!==null&&e!==void 0?e:!((l=t._writableState)===null||l===void 0)&&l.errored))}var tc={isDestroyed:Ry,kIsDestroyed:w$,isDisturbed:ure,kIsDisturbed:E$,isErrored:fre,kIsErrored:v$,isReadable:C$,kIsReadable:N4,kIsClosedPromise:X0e,kControllerErrorFunction:Q0e,kIsWritable:R4,isClosed:cre,isDuplexNodeStream:ere,isFinished:ire,isIterable:nre,isReadableNodeStream:ky,isReadableStream:_$,isReadableEnded:are,isReadableFinished:A$,isReadableErrored:ore,isNodeStream:Ys,isWebStream:tre,isWritable:I$,isWritableNodeStream:Ny,isWritableStream:T$,isWritableEnded:S$,isWritableFinished:rre,isWritableErrored:sre,isServerRequest:dre,isServerResponse:M$,willEmitClose:lre,isTransformStream:x$};const Nc=Gd,{AbortError:P$,codes:pre}=Rr,{ERR_INVALID_ARG_TYPE:hre,ERR_STREAM_PREMATURE_CLOSE:_A}=pre,{kEmptyObject:D4,once:$4}=oa,{validateAbortSignal:bre,validateFunction:yre,validateObject:mre,validateBoolean:gre}=kp,{Promise:wre,PromisePrototypeThen:vre,SymbolDispose:k$}=Dn,{isClosed:Ere,isReadable:TA,isReadableNodeStream:Um,isReadableStream:_re,isReadableFinished:xA,isReadableErrored:SA,isWritable:AA,isWritableNodeStream:CA,isWritableStream:Tre,isWritableFinished:IA,isWritableErrored:OA,isNodeStream:xre,willEmitClose:Sre,kIsClosedPromise:Are}=tc;let u6;function Cre(t){return t.setHeader&&typeof t.abort=="function"}const L4=()=>{};function N$(t,e,n){var r,a;if(arguments.length===2?(n=e,e=D4):e==null?e=D4:mre(e,"options"),yre(n,"callback"),bre(e.signal,"options.signal"),n=$4(n),_re(t)||Tre(t))return Ire(t,e,n);if(!xre(t))throw new hre("stream",["ReadableStream","WritableStream","Stream"],t);const i=(r=e.readable)!==null&&r!==void 0?r:Um(t),s=(a=e.writable)!==null&&a!==void 0?a:CA(t),o=t._writableState,c=t._readableState,d=()=>{t.writable||f()};let l=Sre(t)&&Um(t)===i&&CA(t)===s,u=IA(t,!1);const f=()=>{u=!0,t.destroyed&&(l=!1),!(l&&(!t.readable||i))&&(!i||p)&&n.call(t)};let p=xA(t,!1);const h=()=>{p=!0,t.destroyed&&(l=!1),!(l&&(!t.writable||s))&&(!s||u)&&n.call(t)},b=R=>{n.call(t,R)};let v=Ere(t);const m=()=>{v=!0;const R=OA(t)||SA(t);if(R&&typeof R!="boolean")return n.call(t,R);if(i&&!p&&Um(t,!0)&&!xA(t,!1))return n.call(t,new _A);if(s&&!u&&!IA(t,!1))return n.call(t,new _A);n.call(t)},T=()=>{v=!0;const R=OA(t)||SA(t);if(R&&typeof R!="boolean")return n.call(t,R);n.call(t)},A=()=>{t.req.on("finish",f)};Cre(t)?(t.on("complete",f),l||t.on("abort",m),t.req?A():t.on("request",A)):s&&!o&&(t.on("end",d),t.on("close",d)),!l&&typeof t.aborted=="boolean"&&t.on("aborted",m),t.on("end",h),t.on("finish",f),e.error!==!1&&t.on("error",b),t.on("close",m),v?Nc.nextTick(m):o!=null&&o.errorEmitted||c!=null&&c.errorEmitted?l||Nc.nextTick(T):(!i&&(!l||TA(t))&&(u||AA(t)===!1)||!s&&(!l||AA(t))&&(p||TA(t)===!1)||c&&t.req&&t.aborted)&&Nc.nextTick(T);const N=()=>{n=L4,t.removeListener("aborted",m),t.removeListener("complete",f),t.removeListener("abort",m),t.removeListener("request",A),t.req&&t.req.removeListener("finish",f),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",f),t.removeListener("end",h),t.removeListener("error",b),t.removeListener("close",m)};if(e.signal&&!v){const R=()=>{const B=n;N(),B.call(t,new P$(void 0,{cause:e.signal.reason}))};if(e.signal.aborted)Nc.nextTick(R);else{u6=u6||oa.addAbortListener;const B=u6(e.signal,R),F=n;n=$4((...I)=>{B[k$](),F.apply(t,I)})}}return N}function Ire(t,e,n){let r=!1,a=L4;if(e.signal)if(a=()=>{r=!0,n.call(t,new P$(void 0,{cause:e.signal.reason}))},e.signal.aborted)Nc.nextTick(a);else{u6=u6||oa.addAbortListener;const s=u6(e.signal,a),o=n;n=$4((...c)=>{s[k$](),o.apply(t,c)})}const i=(...s)=>{r||Nc.nextTick(()=>n.apply(t,s))};return vre(t[Are].promise,i,i),L4}function Ore(t,e){var n;let r=!1;return e===null&&(e=D4),(n=e)!==null&&n!==void 0&&n.cleanup&&(gre(e.cleanup,"cleanup"),r=e.cleanup),new wre((a,i)=>{const s=N$(t,e,o=>{r&&s(),o?i(o):a()})})}RE.exports=N$;RE.exports.finished=Ore;var g1=RE.exports;const Ms=Gd,{aggregateTwoErrors:Mre,codes:{ERR_MULTIPLE_CALLBACK:Pre},AbortError:kre}=Rr,{Symbol:R$}=Dn,{kIsDestroyed:Nre,isDestroyed:Rre,isFinished:Dre,isServerRequest:$re}=tc,D$=R$("kDestroy"),B4=R$("kConstruct");function $$(t,e,n){t&&(t.stack,e&&!e.errored&&(e.errored=t),n&&!n.errored&&(n.errored=t))}function Lre(t,e){const n=this._readableState,r=this._writableState,a=r||n;return r!=null&&r.destroyed||n!=null&&n.destroyed?(typeof e=="function"&&e(),this):($$(t,r,n),r&&(r.destroyed=!0),n&&(n.destroyed=!0),a.constructed?MA(this,t,e):this.once(D$,function(i){MA(this,Mre(i,t),e)}),this)}function MA(t,e,n){let r=!1;function a(i){if(r)return;r=!0;const s=t._readableState,o=t._writableState;$$(i,o,s),o&&(o.closed=!0),s&&(s.closed=!0),typeof n=="function"&&n(i),i?Ms.nextTick(Bre,t,i):Ms.nextTick(L$,t)}try{t._destroy(e||null,a)}catch(i){a(i)}}function Bre(t,e){F4(t,e),L$(t)}function L$(t){const e=t._readableState,n=t._writableState;n&&(n.closeEmitted=!0),e&&(e.closeEmitted=!0),(n!=null&&n.emitClose||e!=null&&e.emitClose)&&t.emit("close")}function F4(t,e){const n=t._readableState,r=t._writableState;r!=null&&r.errorEmitted||n!=null&&n.errorEmitted||(r&&(r.errorEmitted=!0),n&&(n.errorEmitted=!0),t.emit("error",e))}function Fre(){const t=this._readableState,e=this._writableState;t&&(t.constructed=!0,t.closed=!1,t.closeEmitted=!1,t.destroyed=!1,t.errored=null,t.errorEmitted=!1,t.reading=!1,t.ended=t.readable===!1,t.endEmitted=t.readable===!1),e&&(e.constructed=!0,e.destroyed=!1,e.closed=!1,e.closeEmitted=!1,e.errored=null,e.errorEmitted=!1,e.finalCalled=!1,e.prefinished=!1,e.ended=e.writable===!1,e.ending=e.writable===!1,e.finished=e.writable===!1)}function U4(t,e,n){const r=t._readableState,a=t._writableState;if(a!=null&&a.destroyed||r!=null&&r.destroyed)return this;r!=null&&r.autoDestroy||a!=null&&a.autoDestroy?t.destroy(e):e&&(e.stack,a&&!a.errored&&(a.errored=e),r&&!r.errored&&(r.errored=e),n?Ms.nextTick(F4,t,e):F4(t,e))}function Ure(t,e){if(typeof t._construct!="function")return;const n=t._readableState,r=t._writableState;n&&(n.constructed=!1),r&&(r.constructed=!1),t.once(B4,e),!(t.listenerCount(B4)>1)&&Ms.nextTick(jre,t)}function jre(t){let e=!1;function n(r){if(e){U4(t,r??new Pre);return}e=!0;const a=t._readableState,i=t._writableState,s=i||a;a&&(a.constructed=!0),i&&(i.constructed=!0),s.destroyed?t.emit(D$,r):r?U4(t,r,!0):Ms.nextTick(Hre,t)}try{t._construct(r=>{Ms.nextTick(n,r)})}catch(r){Ms.nextTick(n,r)}}function Hre(t){t.emit(B4)}function PA(t){return(t==null?void 0:t.setHeader)&&typeof t.abort=="function"}function B$(t){t.emit("close")}function zre(t,e){t.emit("error",e),Ms.nextTick(B$,t)}function qre(t,e){!t||Rre(t)||(!e&&!Dre(t)&&(e=new kre),$re(t)?(t.socket=null,t.destroy(e)):PA(t)?t.abort():PA(t.req)?t.req.abort():typeof t.destroy=="function"?t.destroy(e):typeof t.close=="function"?t.close():e?Ms.nextTick(zre,t,e):Ms.nextTick(B$,t),t.destroyed||(t[Nre]=!0))}var gu={construct:Ure,destroyer:qre,destroy:Lre,undestroy:Fre,errorOrDestroy:U4};const{ArrayIsArray:Kre,ObjectSetPrototypeOf:F$}=Dn,{EventEmitter:Dy}=l0;function $y(t){Dy.call(this,t)}F$($y.prototype,Dy.prototype);F$($y,Dy);$y.prototype.pipe=function(t,e){const n=this;function r(l){t.writable&&t.write(l)===!1&&n.pause&&n.pause()}n.on("data",r);function a(){n.readable&&n.resume&&n.resume()}t.on("drain",a),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",s),n.on("close",o));let i=!1;function s(){i||(i=!0,t.end())}function o(){i||(i=!0,typeof t.destroy=="function"&&t.destroy())}function c(l){d(),Dy.listenerCount(this,"error")===0&&this.emit("error",l)}j4(n,"error",c),j4(t,"error",c);function d(){n.removeListener("data",r),t.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",o),n.removeListener("error",c),t.removeListener("error",c),n.removeListener("end",d),n.removeListener("close",d),t.removeListener("close",d)}return n.on("end",d),n.on("close",d),t.on("close",d),t.emit("pipe",n),t};function j4(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Kre(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}var DE={Stream:$y,prependListener:j4},U$={exports:{}};(function(t){const{SymbolDispose:e}=Dn,{AbortError:n,codes:r}=Rr,{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=tc,o=g1,{ERR_INVALID_ARG_TYPE:c}=r;let d;const l=(u,f)=>{if(typeof u!="object"||!("aborted"in u))throw new c(f,"AbortSignal",u)};t.exports.addAbortSignal=function(f,p){if(l(f,"signal"),!a(p)&&!i(p))throw new c("stream",["ReadableStream","WritableStream","Stream"],p);return t.exports.addAbortSignalNoValidate(f,p)},t.exports.addAbortSignalNoValidate=function(u,f){if(typeof u!="object"||!("aborted"in u))return f;const p=a(f)?()=>{f.destroy(new n(void 0,{cause:u.reason}))}:()=>{f[s](new n(void 0,{cause:u.reason}))};if(u.aborted)p();else{d=d||oa.addAbortListener;const h=d(u,p);o(f,h[e])}return f}})(U$);var Ly=U$.exports;const{StringPrototypeSlice:kA,SymbolIterator:Vre,TypedArrayPrototypeSet:Nh,Uint8Array:Wre}=Dn,{Buffer:jm}=qd,{inspect:Gre}=oa;var Yre=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const n={data:e,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}unshift(e){const n={data:e,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let n=this.head,r=""+n.data;for(;(n=n.next)!==null;)r+=e+n.data;return r}concat(e){if(this.length===0)return jm.alloc(0);const n=jm.allocUnsafe(e>>>0);let r=this.head,a=0;for(;r;)Nh(n,r.data,a),a+=r.data.length,r=r.next;return n}consume(e,n){const r=this.head.data;if(e<r.length){const a=r.slice(0,e);return this.head.data=r.slice(e),a}return e===r.length?this.shift():n?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[Vre](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let n="",r=this.head,a=0;do{const i=r.data;if(e>i.length)n+=i,e-=i.length;else{e===i.length?(n+=i,++a,r.next?this.head=r.next:this.head=this.tail=null):(n+=kA(i,0,e),this.head=r,r.data=kA(i,e));break}++a}while((r=r.next)!==null);return this.length-=a,n}_getBuffer(e){const n=jm.allocUnsafe(e),r=e;let a=this.head,i=0;do{const s=a.data;if(e>s.length)Nh(n,s,r-e),e-=s.length;else{e===s.length?(Nh(n,s,r-e),++i,a.next?this.head=a.next:this.head=this.tail=null):(Nh(n,new Wre(s.buffer,s.byteOffset,e),r-e),this.head=a,a.data=s.slice(e));break}++i}while((a=a.next)!==null);return this.length-=i,n}[Symbol.for("nodejs.util.inspect.custom")](e,n){return Gre(this,{...n,depth:0,customInspect:!1})}};const{MathFloor:Jre,NumberIsInteger:Zre}=Dn,{validateInteger:Xre}=kp,{ERR_INVALID_ARG_VALUE:Qre}=Rr.codes;let j$=16*1024,H$=16;function eae(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function z$(t){return t?H$:j$}function tae(t,e){Xre(e,"value",0),t?H$=e:j$=e}function nae(t,e,n,r){const a=eae(e,r,n);if(a!=null){if(!Zre(a)||a<0){const i=r?`options.${n}`:"options.highWaterMark";throw new Qre(i,a)}return Jre(a)}return z$(t.objectMode)}var By={getHighWaterMark:nae,getDefaultHighWaterMark:z$,setDefaultHighWaterMark:tae},q$={},$E=AY.Buffer,NA=$E.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function rae(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function aae(t){var e=rae(t);if(typeof e!="string"&&($E.isEncoding===NA||!NA(t)))throw new Error("Unknown encoding: "+t);return e||t}q$.StringDecoder=Np;function Np(t){this.encoding=aae(t);var e;switch(this.encoding){case"utf16le":this.text=lae,this.end=uae,e=4;break;case"utf8":this.fillLast=oae,e=4;break;case"base64":this.text=fae,this.end=pae,e=3;break;default:this.write=hae,this.end=bae;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=$E.allocUnsafe(e)}Np.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};Np.prototype.end=dae;Np.prototype.text=cae;Np.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Hm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function iae(t,e,n){var r=e.length-1;if(r<n)return 0;var a=Hm(e[r]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--r<n||a===-2?0:(a=Hm(e[r]),a>=0?(a>0&&(t.lastNeed=a-2),a):--r<n||a===-2?0:(a=Hm(e[r]),a>=0?(a>0&&(a===2?a=0:t.lastNeed=a-3),a):0))}function sae(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,""}}function oae(t){var e=this.lastTotal-this.lastNeed,n=sae(this,t);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function cae(t,e){var n=iae(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function dae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e}function lae(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function uae(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function fae(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function pae(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function hae(t){return t.toString(this.encoding)}function bae(t){return t&&t.length?this.write(t):""}const RA=Gd,{PromisePrototypeThen:yae,SymbolAsyncIterator:DA,SymbolIterator:$A}=Dn,{Buffer:mae}=qd,{ERR_INVALID_ARG_TYPE:gae,ERR_STREAM_NULL_VALUES:wae}=Rr.codes;function vae(t,e,n){let r;if(typeof e=="string"||e instanceof mae)return new t({objectMode:!0,...n,read(){this.push(e),this.push(null)}});let a;if(e&&e[DA])a=!0,r=e[DA]();else if(e&&e[$A])a=!1,r=e[$A]();else throw new gae("iterable",["Iterable"],e);const i=new t({objectMode:!0,highWaterMark:1,...n});let s=!1;i._read=function(){s||(s=!0,c())},i._destroy=function(d,l){yae(o(d),()=>RA.nextTick(l,d),u=>RA.nextTick(l,u||d))};async function o(d){const l=d!=null,u=typeof r.throw=="function";if(l&&u){const{value:f,done:p}=await r.throw(d);if(await f,p)return}if(typeof r.return=="function"){const{value:f}=await r.return();await f}}async function c(){for(;;){try{const{value:d,done:l}=a?await r.next():r.next();if(l)i.push(null);else{const u=d&&typeof d.then=="function"?await d:d;if(u===null)throw s=!1,new wae;if(i.push(u))continue;s=!1}}catch(d){i.destroy(d)}break}}return i}var K$=vae,zm,LA;function Fy(){if(LA)return zm;LA=1;const t=Gd,{ArrayPrototypeIndexOf:e,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:c,SafeSet:d,SymbolAsyncDispose:l,SymbolAsyncIterator:u,Symbol:f}=Dn;zm=pe,pe.ReadableState=Re;const{EventEmitter:p}=l0,{Stream:h,prependListener:b}=DE,{Buffer:v}=qd,{addAbortSignal:m}=Ly,T=g1;let A=oa.debuglog("stream",Z=>{A=Z});const N=Yre,R=gu,{getHighWaterMark:B,getDefaultHighWaterMark:F}=By,{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_OUT_OF_RANGE:M,ERR_STREAM_PUSH_AFTER_EOF:y,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:E},AbortError:C}=Rr,{validateObject:g}=kp,x=f("kPaused"),{StringDecoder:O}=q$,S=K$;o(pe.prototype,h.prototype),o(pe,h);const w=()=>{},{errorOrDestroy:_}=R,k=1,L=2,D=4,U=8,j=16,H=32,W=64,K=128,q=256,V=512,G=1024,J=2048,z=4096,Y=8192,X=16384,ae=32768,ie=65536,oe=1<<17,ue=1<<18;function Oe(Z){return{enumerable:!1,get(){return(this.state&Z)!==0},set(ee){ee?this.state|=Z:this.state&=~Z}}}i(Re.prototype,{objectMode:Oe(k),ended:Oe(L),endEmitted:Oe(D),reading:Oe(U),constructed:Oe(j),sync:Oe(H),needReadable:Oe(W),emittedReadable:Oe(K),readableListening:Oe(q),resumeScheduled:Oe(V),errorEmitted:Oe(G),emitClose:Oe(J),autoDestroy:Oe(z),destroyed:Oe(Y),closed:Oe(X),closeEmitted:Oe(ae),multiAwaitDrain:Oe(ie),readingMore:Oe(oe),dataEmitted:Oe(ue)});function Re(Z,ee,me){typeof me!="boolean"&&(me=ee instanceof Vo()),this.state=J|z|j|H,Z&&Z.objectMode&&(this.state|=k),me&&Z&&Z.readableObjectMode&&(this.state|=k),this.highWaterMark=Z?B(this,Z,"readableHighWaterMark",me):F(!1),this.buffer=new N,this.length=0,this.pipes=[],this.flowing=null,this[x]=null,Z&&Z.emitClose===!1&&(this.state&=~J),Z&&Z.autoDestroy===!1&&(this.state&=~z),this.errored=null,this.defaultEncoding=Z&&Z.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,Z&&Z.encoding&&(this.decoder=new O(Z.encoding),this.encoding=Z.encoding)}function pe(Z){if(!(this instanceof pe))return new pe(Z);const ee=this instanceof Vo();this._readableState=new Re(Z,this,ee),Z&&(typeof Z.read=="function"&&(this._read=Z.read),typeof Z.destroy=="function"&&(this._destroy=Z.destroy),typeof Z.construct=="function"&&(this._construct=Z.construct),Z.signal&&!ee&&m(Z.signal,this)),h.call(this,Z),R.construct(this,()=>{this._readableState.needReadable&&ct(this,this._readableState)})}pe.prototype.destroy=R.destroy,pe.prototype._undestroy=R.undestroy,pe.prototype._destroy=function(Z,ee){ee(Z)},pe.prototype[p.captureRejectionSymbol]=function(Z){this.destroy(Z)},pe.prototype[l]=function(){let Z;return this.destroyed||(Z=this.readableEnded?null:new C,this.destroy(Z)),new c((ee,me)=>T(this,Ae=>Ae&&Ae!==Z?me(Ae):ee(null)))},pe.prototype.push=function(Z,ee){return Ze(this,Z,ee,!1)},pe.prototype.unshift=function(Z,ee){return Ze(this,Z,ee,!0)};function Ze(Z,ee,me,Ae){A("readableAddChunk",ee);const Ce=Z._readableState;let lt;if(Ce.state&k||(typeof ee=="string"?(me=me||Ce.defaultEncoding,Ce.encoding!==me&&(Ae&&Ce.encoding?ee=v.from(ee,me).toString(Ce.encoding):(ee=v.from(ee,me),me=""))):ee instanceof v?me="":h._isUint8Array(ee)?(ee=h._uint8ArrayToBuffer(ee),me=""):ee!=null&&(lt=new P("chunk",["string","Buffer","Uint8Array"],ee))),lt)_(Z,lt);else if(ee===null)Ce.state&=~U,Xe(Z,Ce);else if(Ce.state&k||ee&&ee.length>0)if(Ae)if(Ce.state&D)_(Z,new E);else{if(Ce.destroyed||Ce.errored)return!1;je(Z,Ce,ee,!0)}else if(Ce.ended)_(Z,new y);else{if(Ce.destroyed||Ce.errored)return!1;Ce.state&=~U,Ce.decoder&&!me?(ee=Ce.decoder.write(ee),Ce.objectMode||ee.length!==0?je(Z,Ce,ee,!1):ct(Z,Ce)):je(Z,Ce,ee,!1)}else Ae||(Ce.state&=~U,ct(Z,Ce));return!Ce.ended&&(Ce.length<Ce.highWaterMark||Ce.length===0)}function je(Z,ee,me,Ae){ee.flowing&&ee.length===0&&!ee.sync&&Z.listenerCount("data")>0?(ee.state&ie?ee.awaitDrainWriters.clear():ee.awaitDrainWriters=null,ee.dataEmitted=!0,Z.emit("data",me)):(ee.length+=ee.objectMode?1:me.length,Ae?ee.buffer.unshift(me):ee.buffer.push(me),ee.state&W&&mt(Z)),ct(Z,ee)}pe.prototype.isPaused=function(){const Z=this._readableState;return Z[x]===!0||Z.flowing===!1},pe.prototype.setEncoding=function(Z){const ee=new O(Z);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;const me=this._readableState.buffer;let Ae="";for(const Ce of me)Ae+=ee.write(Ce);return me.clear(),Ae!==""&&me.push(Ae),this._readableState.length=Ae.length,this};const it=1073741824;function De(Z){if(Z>it)throw new M("size","<= 1GiB",Z);return Z--,Z|=Z>>>1,Z|=Z>>>2,Z|=Z>>>4,Z|=Z>>>8,Z|=Z>>>16,Z++,Z}function Ke(Z,ee){return Z<=0||ee.length===0&&ee.ended?0:ee.state&k?1:r(Z)?ee.flowing&&ee.length?ee.buffer.first().length:ee.length:Z<=ee.length?Z:ee.ended?ee.length:0}pe.prototype.read=function(Z){A("read",Z),Z===void 0?Z=NaN:n(Z)||(Z=a(Z,10));const ee=this._readableState,me=Z;if(Z>ee.highWaterMark&&(ee.highWaterMark=De(Z)),Z!==0&&(ee.state&=~K),Z===0&&ee.needReadable&&((ee.highWaterMark!==0?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return A("read: emitReadable",ee.length,ee.ended),ee.length===0&&ee.ended?et(this):mt(this),null;if(Z=Ke(Z,ee),Z===0&&ee.ended)return ee.length===0&&et(this),null;let Ae=(ee.state&W)!==0;if(A("need readable",Ae),(ee.length===0||ee.length-Z<ee.highWaterMark)&&(Ae=!0,A("length less than watermark",Ae)),ee.ended||ee.reading||ee.destroyed||ee.errored||!ee.constructed)Ae=!1,A("reading, ended or constructing",Ae);else if(Ae){A("do read"),ee.state|=U|H,ee.length===0&&(ee.state|=W);try{this._read(ee.highWaterMark)}catch(lt){_(this,lt)}ee.state&=~H,ee.reading||(Z=Ke(me,ee))}let Ce;return Z>0?Ce=We(Z,ee):Ce=null,Ce===null?(ee.needReadable=ee.length<=ee.highWaterMark,Z=0):(ee.length-=Z,ee.multiAwaitDrain?ee.awaitDrainWriters.clear():ee.awaitDrainWriters=null),ee.length===0&&(ee.ended||(ee.needReadable=!0),me!==Z&&ee.ended&&et(this)),Ce!==null&&!ee.errorEmitted&&!ee.closeEmitted&&(ee.dataEmitted=!0,this.emit("data",Ce)),Ce};function Xe(Z,ee){if(A("onEofChunk"),!ee.ended){if(ee.decoder){const me=ee.decoder.end();me&&me.length&&(ee.buffer.push(me),ee.length+=ee.objectMode?1:me.length)}ee.ended=!0,ee.sync?mt(Z):(ee.needReadable=!1,ee.emittedReadable=!0,He(Z))}}function mt(Z){const ee=Z._readableState;A("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(A("emitReadable",ee.flowing),ee.emittedReadable=!0,t.nextTick(He,Z))}function He(Z){const ee=Z._readableState;A("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&!ee.errored&&(ee.length||ee.ended)&&(Z.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,B0(Z)}function ct(Z,ee){!ee.readingMore&&ee.constructed&&(ee.readingMore=!0,t.nextTick(Vt,Z,ee))}function Vt(Z,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&ee.length===0);){const me=ee.length;if(A("maybeReadMore read 0"),Z.read(0),me===ee.length)break}ee.readingMore=!1}pe.prototype._read=function(Z){throw new $("_read()")},pe.prototype.pipe=function(Z,ee){const me=this,Ae=this._readableState;Ae.pipes.length===1&&(Ae.multiAwaitDrain||(Ae.multiAwaitDrain=!0,Ae.awaitDrainWriters=new d(Ae.awaitDrainWriters?[Ae.awaitDrainWriters]:[]))),Ae.pipes.push(Z),A("pipe count=%d opts=%j",Ae.pipes.length,ee);const lt=(!ee||ee.end!==!1)&&Z!==t.stdout&&Z!==t.stderr?Gt:gi;Ae.endEmitted?t.nextTick(lt):me.once("end",lt),Z.on("unpipe",Mn);function Mn(fa,mr){A("onunpipe"),fa===me&&mr&&mr.hasUnpiped===!1&&(mr.hasUnpiped=!0,xn())}function Gt(){A("onend"),Z.end()}let Bt,ua=!1;function xn(){A("cleanup"),Z.removeListener("close",pn),Z.removeListener("finish",F0),Bt&&Z.removeListener("drain",Bt),Z.removeListener("error",fn),Z.removeListener("unpipe",Mn),me.removeListener("end",Gt),me.removeListener("end",gi),me.removeListener("data",E1),ua=!0,Bt&&Ae.awaitDrainWriters&&(!Z._writableState||Z._writableState.needDrain)&&Bt()}function En(){ua||(Ae.pipes.length===1&&Ae.pipes[0]===Z?(A("false write response, pause",0),Ae.awaitDrainWriters=Z,Ae.multiAwaitDrain=!1):Ae.pipes.length>1&&Ae.pipes.includes(Z)&&(A("false write response, pause",Ae.awaitDrainWriters.size),Ae.awaitDrainWriters.add(Z)),me.pause()),Bt||(Bt=It(me,Z),Z.on("drain",Bt))}me.on("data",E1);function E1(fa){A("ondata");const mr=Z.write(fa);A("dest.write",mr),mr===!1&&En()}function fn(fa){if(A("onerror",fa),gi(),Z.removeListener("error",fn),Z.listenerCount("error")===0){const mr=Z._writableState||Z._readableState;mr&&!mr.errorEmitted?_(Z,fa):Z.emit("error",fa)}}b(Z,"error",fn);function pn(){Z.removeListener("finish",F0),gi()}Z.once("close",pn);function F0(){A("onfinish"),Z.removeListener("close",pn),gi()}Z.once("finish",F0);function gi(){A("unpipe"),me.unpipe(Z)}return Z.emit("pipe",me),Z.writableNeedDrain===!0?En():Ae.flowing||(A("pipe resume"),me.resume()),Z};function It(Z,ee){return function(){const Ae=Z._readableState;Ae.awaitDrainWriters===ee?(A("pipeOnDrain",1),Ae.awaitDrainWriters=null):Ae.multiAwaitDrain&&(A("pipeOnDrain",Ae.awaitDrainWriters.size),Ae.awaitDrainWriters.delete(ee)),(!Ae.awaitDrainWriters||Ae.awaitDrainWriters.size===0)&&Z.listenerCount("data")&&Z.resume()}}pe.prototype.unpipe=function(Z){const ee=this._readableState,me={hasUnpiped:!1};if(ee.pipes.length===0)return this;if(!Z){const Ce=ee.pipes;ee.pipes=[],this.pause();for(let lt=0;lt<Ce.length;lt++)Ce[lt].emit("unpipe",this,{hasUnpiped:!1});return this}const Ae=e(ee.pipes,Z);return Ae===-1?this:(ee.pipes.splice(Ae,1),ee.pipes.length===0&&this.pause(),Z.emit("unpipe",this,me),this)},pe.prototype.on=function(Z,ee){const me=h.prototype.on.call(this,Z,ee),Ae=this._readableState;return Z==="data"?(Ae.readableListening=this.listenerCount("readable")>0,Ae.flowing!==!1&&this.resume()):Z==="readable"&&!Ae.endEmitted&&!Ae.readableListening&&(Ae.readableListening=Ae.needReadable=!0,Ae.flowing=!1,Ae.emittedReadable=!1,A("on readable",Ae.length,Ae.reading),Ae.length?mt(this):Ae.reading||t.nextTick(L0,this)),me},pe.prototype.addListener=pe.prototype.on,pe.prototype.removeListener=function(Z,ee){const me=h.prototype.removeListener.call(this,Z,ee);return Z==="readable"&&t.nextTick(Tt,this),me},pe.prototype.off=pe.prototype.removeListener,pe.prototype.removeAllListeners=function(Z){const ee=h.prototype.removeAllListeners.apply(this,arguments);return(Z==="readable"||Z===void 0)&&t.nextTick(Tt,this),ee};function Tt(Z){const ee=Z._readableState;ee.readableListening=Z.listenerCount("readable")>0,ee.resumeScheduled&&ee[x]===!1?ee.flowing=!0:Z.listenerCount("data")>0?Z.resume():ee.readableListening||(ee.flowing=null)}function L0(Z){A("readable nexttick read 0"),Z.read(0)}pe.prototype.resume=function(){const Z=this._readableState;return Z.flowing||(A("resume"),Z.flowing=!Z.readableListening,ht(this,Z)),Z[x]=!1,this};function ht(Z,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,t.nextTick(kt,Z,ee))}function kt(Z,ee){A("resume",ee.reading),ee.reading||Z.read(0),ee.resumeScheduled=!1,Z.emit("resume"),B0(Z),ee.flowing&&!ee.reading&&Z.read(0)}pe.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[x]=!0,this};function B0(Z){const ee=Z._readableState;for(A("flow",ee.flowing);ee.flowing&&Z.read()!==null;);}pe.prototype.wrap=function(Z){let ee=!1;Z.on("data",Ae=>{!this.push(Ae)&&Z.pause&&(ee=!0,Z.pause())}),Z.on("end",()=>{this.push(null)}),Z.on("error",Ae=>{_(this,Ae)}),Z.on("close",()=>{this.destroy()}),Z.on("destroy",()=>{this.destroy()}),this._read=()=>{ee&&Z.resume&&(ee=!1,Z.resume())};const me=s(Z);for(let Ae=1;Ae<me.length;Ae++){const Ce=me[Ae];this[Ce]===void 0&&typeof Z[Ce]=="function"&&(this[Ce]=Z[Ce].bind(Z))}return this},pe.prototype[u]=function(){return At(this)},pe.prototype.iterator=function(Z){return Z!==void 0&&g(Z,"options"),At(this,Z)};function At(Z,ee){typeof Z.read!="function"&&(Z=pe.wrap(Z,{objectMode:!0}));const me=Wt(Z,ee);return me.stream=Z,me}async function*Wt(Z,ee){let me=w;function Ae(Mn){this===Z?(me(),me=w):me=Mn}Z.on("readable",Ae);let Ce;const lt=T(Z,{writable:!1},Mn=>{Ce=Mn?I(Ce,Mn):null,me(),me=w});try{for(;;){const Mn=Z.destroyed?null:Z.read();if(Mn!==null)yield Mn;else{if(Ce)throw Ce;if(Ce===null)return;await new c(Ae)}}}catch(Mn){throw Ce=I(Ce,Mn),Ce}finally{(Ce||(ee==null?void 0:ee.destroyOnReturn)!==!1)&&(Ce===void 0||Z._readableState.autoDestroy)?R.destroyer(Z,null):(Z.off("readable",Ae),lt())}}i(pe.prototype,{readable:{__proto__:null,get(){const Z=this._readableState;return!!Z&&Z.readable!==!1&&!Z.destroyed&&!Z.errorEmitted&&!Z.endEmitted},set(Z){this._readableState&&(this._readableState.readable=!!Z)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(Z){this._readableState&&(this._readableState.flowing=Z)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(Z){this._readableState&&(this._readableState.destroyed=Z)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Re.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[x]!==!1},set(Z){this[x]=!!Z}}}),pe._fromList=We;function We(Z,ee){if(ee.length===0)return null;let me;return ee.objectMode?me=ee.buffer.shift():!Z||Z>=ee.length?(ee.decoder?me=ee.buffer.join(""):ee.buffer.length===1?me=ee.buffer.first():me=ee.buffer.concat(ee.length),ee.buffer.clear()):me=ee.buffer.consume(Z,ee.decoder),me}function et(Z){const ee=Z._readableState;A("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,t.nextTick(ot,ee,Z))}function ot(Z,ee){if(A("endReadableNT",Z.endEmitted,Z.length),!Z.errored&&!Z.closeEmitted&&!Z.endEmitted&&Z.length===0){if(Z.endEmitted=!0,ee.emit("end"),ee.writable&&ee.allowHalfOpen===!1)t.nextTick(jt,ee);else if(Z.autoDestroy){const me=ee._writableState;(!me||me.autoDestroy&&(me.finished||me.writable===!1))&&ee.destroy()}}}function jt(Z){Z.writable&&!Z.writableEnded&&!Z.destroyed&&Z.end()}pe.from=function(Z,ee){return S(pe,Z,ee)};let rt;function at(){return rt===void 0&&(rt={}),rt}return pe.fromWeb=function(Z,ee){return at().newStreamReadableFromReadableStream(Z,ee)},pe.toWeb=function(Z,ee){return at().newReadableStreamFromStreamReadable(Z,ee)},pe.wrap=function(Z,ee){var me,Ae;return new pe({objectMode:(me=(Ae=Z.readableObjectMode)!==null&&Ae!==void 0?Ae:Z.objectMode)!==null&&me!==void 0?me:!0,...ee,destroy(Ce,lt){R.destroyer(Z,Ce),lt(Ce)}}).wrap(Z)},zm}var qm,BA;function LE(){if(BA)return qm;BA=1;const t=Gd,{ArrayPrototypeSlice:e,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:c,SymbolHasInstance:d}=Dn;qm=g,g.WritableState=E;const{EventEmitter:l}=l0,u=DE.Stream,{Buffer:f}=qd,p=gu,{addAbortSignal:h}=Ly,{getHighWaterMark:b,getDefaultHighWaterMark:v}=By,{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_MULTIPLE_CALLBACK:A,ERR_STREAM_CANNOT_PIPE:N,ERR_STREAM_DESTROYED:R,ERR_STREAM_ALREADY_FINISHED:B,ERR_STREAM_NULL_VALUES:F,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:P}=Rr.codes,{errorOrDestroy:$}=p;s(g.prototype,u.prototype),s(g,u);function M(){}const y=c("kOnFinished");function E(z,Y,X){typeof X!="boolean"&&(X=Y instanceof Vo()),this.objectMode=!!(z&&z.objectMode),X&&(this.objectMode=this.objectMode||!!(z&&z.writableObjectMode)),this.highWaterMark=z?b(this,z,"writableHighWaterMark",X):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const ae=!!(z&&z.decodeStrings===!1);this.decodeStrings=!ae,this.defaultEncoding=z&&z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=_.bind(void 0,Y),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,C(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!z||z.emitClose!==!1,this.autoDestroy=!z||z.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[y]=[]}function C(z){z.buffered=[],z.bufferedIndex=0,z.allBuffers=!0,z.allNoop=!0}E.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},a(E.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function g(z){const Y=this instanceof Vo();if(!Y&&!r(g,this))return new g(z);this._writableState=new E(z,this,Y),z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final),typeof z.construct=="function"&&(this._construct=z.construct),z.signal&&h(z.signal,this)),u.call(this,z),p.construct(this,()=>{const X=this._writableState;X.writing||U(this,X),K(this,X)})}a(g,d,{__proto__:null,value:function(z){return r(this,z)?!0:this!==g?!1:z&&z._writableState instanceof E}}),g.prototype.pipe=function(){$(this,new N)};function x(z,Y,X,ae){const ie=z._writableState;if(typeof X=="function")ae=X,X=ie.defaultEncoding;else{if(!X)X=ie.defaultEncoding;else if(X!=="buffer"&&!f.isEncoding(X))throw new P(X);typeof ae!="function"&&(ae=M)}if(Y===null)throw new F;if(!ie.objectMode)if(typeof Y=="string")ie.decodeStrings!==!1&&(Y=f.from(Y,X),X="buffer");else if(Y instanceof f)X="buffer";else if(u._isUint8Array(Y))Y=u._uint8ArrayToBuffer(Y),X="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],Y);let oe;return ie.ending?oe=new I:ie.destroyed&&(oe=new R("write")),oe?(t.nextTick(ae,oe),$(z,oe,!0),oe):(ie.pendingcb++,O(z,ie,Y,X,ae))}g.prototype.write=function(z,Y,X){return x(this,z,Y,X)===!0},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){const z=this._writableState;z.corked&&(z.corked--,z.writing||U(this,z))},g.prototype.setDefaultEncoding=function(Y){if(typeof Y=="string"&&(Y=o(Y)),!f.isEncoding(Y))throw new P(Y);return this._writableState.defaultEncoding=Y,this};function O(z,Y,X,ae,ie){const oe=Y.objectMode?1:X.length;Y.length+=oe;const ue=Y.length<Y.highWaterMark;return ue||(Y.needDrain=!0),Y.writing||Y.corked||Y.errored||!Y.constructed?(Y.buffered.push({chunk:X,encoding:ae,callback:ie}),Y.allBuffers&&ae!=="buffer"&&(Y.allBuffers=!1),Y.allNoop&&ie!==M&&(Y.allNoop=!1)):(Y.writelen=oe,Y.writecb=ie,Y.writing=!0,Y.sync=!0,z._write(X,ae,Y.onwrite),Y.sync=!1),ue&&!Y.errored&&!Y.destroyed}function S(z,Y,X,ae,ie,oe,ue){Y.writelen=ae,Y.writecb=ue,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new R("write")):X?z._writev(ie,Y.onwrite):z._write(ie,oe,Y.onwrite),Y.sync=!1}function w(z,Y,X,ae){--Y.pendingcb,ae(X),D(Y),$(z,X)}function _(z,Y){const X=z._writableState,ae=X.sync,ie=X.writecb;if(typeof ie!="function"){$(z,new A);return}X.writing=!1,X.writecb=null,X.length-=X.writelen,X.writelen=0,Y?(Y.stack,X.errored||(X.errored=Y),z._readableState&&!z._readableState.errored&&(z._readableState.errored=Y),ae?t.nextTick(w,z,X,Y,ie):w(z,X,Y,ie)):(X.buffered.length>X.bufferedIndex&&U(z,X),ae?X.afterWriteTickInfo!==null&&X.afterWriteTickInfo.cb===ie?X.afterWriteTickInfo.count++:(X.afterWriteTickInfo={count:1,cb:ie,stream:z,state:X},t.nextTick(k,X.afterWriteTickInfo)):L(z,X,1,ie))}function k({stream:z,state:Y,count:X,cb:ae}){return Y.afterWriteTickInfo=null,L(z,Y,X,ae)}function L(z,Y,X,ae){for(!Y.ending&&!z.destroyed&&Y.length===0&&Y.needDrain&&(Y.needDrain=!1,z.emit("drain"));X-- >0;)Y.pendingcb--,ae();Y.destroyed&&D(Y),K(z,Y)}function D(z){if(z.writing)return;for(let ie=z.bufferedIndex;ie<z.buffered.length;++ie){var Y;const{chunk:oe,callback:ue}=z.buffered[ie],Oe=z.objectMode?1:oe.length;z.length-=Oe,ue((Y=z.errored)!==null&&Y!==void 0?Y:new R("write"))}const X=z[y].splice(0);for(let ie=0;ie<X.length;ie++){var ae;X[ie]((ae=z.errored)!==null&&ae!==void 0?ae:new R("end"))}C(z)}function U(z,Y){if(Y.corked||Y.bufferProcessing||Y.destroyed||!Y.constructed)return;const{buffered:X,bufferedIndex:ae,objectMode:ie}=Y,oe=X.length-ae;if(!oe)return;let ue=ae;if(Y.bufferProcessing=!0,oe>1&&z._writev){Y.pendingcb-=oe-1;const Oe=Y.allNoop?M:pe=>{for(let Ze=ue;Ze<X.length;++Ze)X[Ze].callback(pe)},Re=Y.allNoop&&ue===0?X:e(X,ue);Re.allBuffers=Y.allBuffers,S(z,Y,!0,Y.length,Re,"",Oe),C(Y)}else{do{const{chunk:Oe,encoding:Re,callback:pe}=X[ue];X[ue++]=null;const Ze=ie?1:Oe.length;S(z,Y,!1,Ze,Oe,Re,pe)}while(ue<X.length&&!Y.writing);ue===X.length?C(Y):ue>256?(X.splice(0,ue),Y.bufferedIndex=0):Y.bufferedIndex=ue}Y.bufferProcessing=!1}g.prototype._write=function(z,Y,X){if(this._writev)this._writev([{chunk:z,encoding:Y}],X);else throw new T("_write()")},g.prototype._writev=null,g.prototype.end=function(z,Y,X){const ae=this._writableState;typeof z=="function"?(X=z,z=null,Y=null):typeof Y=="function"&&(X=Y,Y=null);let ie;if(z!=null){const oe=x(this,z,Y);oe instanceof n&&(ie=oe)}return ae.corked&&(ae.corked=1,this.uncork()),ie||(!ae.errored&&!ae.ending?(ae.ending=!0,K(this,ae,!0),ae.ended=!0):ae.finished?ie=new B("end"):ae.destroyed&&(ie=new R("end"))),typeof X=="function"&&(ie||ae.finished?t.nextTick(X,ie):ae[y].push(X)),this};function j(z){return z.ending&&!z.destroyed&&z.constructed&&z.length===0&&!z.errored&&z.buffered.length===0&&!z.finished&&!z.writing&&!z.errorEmitted&&!z.closeEmitted}function H(z,Y){let X=!1;function ae(ie){if(X){$(z,ie??A());return}if(X=!0,Y.pendingcb--,ie){const oe=Y[y].splice(0);for(let ue=0;ue<oe.length;ue++)oe[ue](ie);$(z,ie,Y.sync)}else j(Y)&&(Y.prefinished=!0,z.emit("prefinish"),Y.pendingcb++,t.nextTick(q,z,Y))}Y.sync=!0,Y.pendingcb++;try{z._final(ae)}catch(ie){ae(ie)}Y.sync=!1}function W(z,Y){!Y.prefinished&&!Y.finalCalled&&(typeof z._final=="function"&&!Y.destroyed?(Y.finalCalled=!0,H(z,Y)):(Y.prefinished=!0,z.emit("prefinish")))}function K(z,Y,X){j(Y)&&(W(z,Y),Y.pendingcb===0&&(X?(Y.pendingcb++,t.nextTick((ae,ie)=>{j(ie)?q(ae,ie):ie.pendingcb--},z,Y)):j(Y)&&(Y.pendingcb++,q(z,Y))))}function q(z,Y){Y.pendingcb--,Y.finished=!0;const X=Y[y].splice(0);for(let ae=0;ae<X.length;ae++)X[ae]();if(z.emit("finish"),Y.autoDestroy){const ae=z._readableState;(!ae||ae.autoDestroy&&(ae.endEmitted||ae.readable===!1))&&z.destroy()}}i(g.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(z){this._writableState&&(this._writableState.destroyed=z)}},writable:{__proto__:null,get(){const z=this._writableState;return!!z&&z.writable!==!1&&!z.destroyed&&!z.errored&&!z.ending&&!z.ended},set(z){this._writableState&&(this._writableState.writable=!!z)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const z=this._writableState;return z?!z.destroyed&&!z.ending&&z.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const V=p.destroy;g.prototype.destroy=function(z,Y){const X=this._writableState;return!X.destroyed&&(X.bufferedIndex<X.buffered.length||X[y].length)&&t.nextTick(D,X),V.call(this,z,Y),this},g.prototype._undestroy=p.undestroy,g.prototype._destroy=function(z,Y){Y(z)},g.prototype[l.captureRejectionSymbol]=function(z){this.destroy(z)};let G;function J(){return G===void 0&&(G={}),G}return g.fromWeb=function(z,Y){return J().newStreamWritableFromWritableStream(z,Y)},g.toWeb=function(z){return J().newWritableStreamFromStreamWritable(z)},qm}var Km,FA;function Eae(){if(FA)return Km;FA=1;const t=Gd,e=qd,{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:c,isReadableStream:d,isWritableStream:l}=tc,u=g1,{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:h}}=Rr,{destroyer:b}=gu,v=Vo(),m=Fy(),T=LE(),{createDeferredPromise:A}=oa,N=K$,R=globalThis.Blob||e.Blob,B=typeof R<"u"?function(E){return E instanceof R}:function(E){return!1},F=globalThis.AbortController||w5().AbortController,{FunctionPrototypeCall:I}=Dn;class P extends v{constructor(E){super(E),(E==null?void 0:E.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(E==null?void 0:E.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Km=function y(E,C){if(c(E))return E;if(s(E))return M({readable:E});if(o(E))return M({writable:E});if(i(E))return M({writable:!1,readable:!1});if(d(E))return M({readable:m.fromWeb(E)});if(l(E))return M({writable:T.fromWeb(E)});if(typeof E=="function"){const{value:x,write:O,final:S,destroy:w}=$(E);if(a(x))return N(P,x,{objectMode:!0,write:O,final:S,destroy:w});const _=x==null?void 0:x.then;if(typeof _=="function"){let k;const L=I(_,x,D=>{if(D!=null)throw new h("nully","body",D)},D=>{b(k,D)});return k=new P({objectMode:!0,readable:!1,write:O,final(D){S(async()=>{try{await L,t.nextTick(D,null)}catch(U){t.nextTick(D,U)}})},destroy:w})}throw new h("Iterable, AsyncIterable or AsyncFunction",C,x)}if(B(E))return y(E.arrayBuffer());if(a(E))return N(P,E,{objectMode:!0,writable:!1});if(d(E==null?void 0:E.readable)&&l(E==null?void 0:E.writable))return P.fromWeb(E);if(typeof(E==null?void 0:E.writable)=="object"||typeof(E==null?void 0:E.readable)=="object"){const x=E!=null&&E.readable?s(E==null?void 0:E.readable)?E==null?void 0:E.readable:y(E.readable):void 0,O=E!=null&&E.writable?o(E==null?void 0:E.writable)?E==null?void 0:E.writable:y(E.writable):void 0;return M({readable:x,writable:O})}const g=E==null?void 0:E.then;if(typeof g=="function"){let x;return I(g,E,O=>{O!=null&&x.push(O),x.push(null)},O=>{b(x,O)}),x=new P({objectMode:!0,writable:!1,read(){}})}throw new p(C,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],E)};function $(y){let{promise:E,resolve:C}=A();const g=new F,x=g.signal;return{value:y(async function*(){for(;;){const S=E;E=null;const{chunk:w,done:_,cb:k}=await S;if(t.nextTick(k),_)return;if(x.aborted)throw new f(void 0,{cause:x.reason});({promise:E,resolve:C}=A()),yield w}}(),{signal:x}),write(S,w,_){const k=C;C=null,k({chunk:S,done:!1,cb:_})},final(S){const w=C;C=null,w({done:!0,cb:S})},destroy(S,w){g.abort(),w(S)}}}function M(y){const E=y.readable&&typeof y.readable.read!="function"?m.wrap(y.readable):y.readable,C=y.writable;let g=!!n(E),x=!!r(C),O,S,w,_,k;function L(D){const U=_;_=null,U?U(D):D&&k.destroy(D)}return k=new P({readableObjectMode:!!(E!=null&&E.readableObjectMode),writableObjectMode:!!(C!=null&&C.writableObjectMode),readable:g,writable:x}),x&&(u(C,D=>{x=!1,D&&b(E,D),L(D)}),k._write=function(D,U,j){C.write(D,U)?j():O=j},k._final=function(D){C.end(),S=D},C.on("drain",function(){if(O){const D=O;O=null,D()}}),C.on("finish",function(){if(S){const D=S;S=null,D()}})),g&&(u(E,D=>{g=!1,D&&b(E,D),L(D)}),E.on("readable",function(){if(w){const D=w;w=null,D()}}),E.on("end",function(){k.push(null)}),k._read=function(){for(;;){const D=E.read();if(D===null){w=k._read;return}if(!k.push(D))return}}),k._destroy=function(D,U){!D&&_!==null&&(D=new f),w=null,O=null,S=null,_===null?U(D):(_=U,b(C,D),b(E,D))},k}return Km}var Vm,UA;function Vo(){if(UA)return Vm;UA=1;const{ObjectDefineProperties:t,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:n,ObjectSetPrototypeOf:r}=Dn;Vm=s;const a=Fy(),i=LE();r(s.prototype,a.prototype),r(s,a);{const l=n(i.prototype);for(let u=0;u<l.length;u++){const f=l[u];s.prototype[f]||(s.prototype[f]=i.prototype[f])}}function s(l){if(!(this instanceof s))return new s(l);a.call(this,l),i.call(this,l),l?(this.allowHalfOpen=l.allowHalfOpen!==!1,l.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),l.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}t(s.prototype,{writable:{__proto__:null,...e(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(i.prototype,"writableLength")},writableFinished:{__proto__:null,...e(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(l){this._readableState&&this._writableState&&(this._readableState.destroyed=l,this._writableState.destroyed=l)}}});let o;function c(){return o===void 0&&(o={}),o}s.fromWeb=function(l,u){return c().newStreamDuplexFromReadableWritablePair(l,u)},s.toWeb=function(l){return c().newReadableWritablePairFromDuplex(l)};let d;return s.from=function(l){return d||(d=Eae()),d(l,"body")},Vm}const{ObjectSetPrototypeOf:V$,Symbol:_ae}=Dn;var W$=Wo;const{ERR_METHOD_NOT_IMPLEMENTED:Tae}=Rr.codes,BE=Vo(),{getHighWaterMark:xae}=By;V$(Wo.prototype,BE.prototype);V$(Wo,BE);const Yf=_ae("kCallback");function Wo(t){if(!(this instanceof Wo))return new Wo(t);const e=t?xae(this,t,"readableHighWaterMark",!0):null;e===0&&(t={...t,highWaterMark:null,readableHighWaterMark:e,writableHighWaterMark:t.writableHighWaterMark||0}),BE.call(this,t),this._readableState.sync=!1,this[Yf]=null,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Sae)}function H4(t){typeof this._flush=="function"&&!this.destroyed?this._flush((e,n)=>{if(e){t?t(e):this.destroy(e);return}n!=null&&this.push(n),this.push(null),t&&t()}):(this.push(null),t&&t())}function Sae(){this._final!==H4&&H4.call(this)}Wo.prototype._final=H4;Wo.prototype._transform=function(t,e,n){throw new Tae("_transform()")};Wo.prototype._write=function(t,e,n){const r=this._readableState,a=this._writableState,i=r.length;this._transform(t,e,(s,o)=>{if(s){n(s);return}o!=null&&this.push(o),a.ended||i===r.length||r.length<r.highWaterMark?n():this[Yf]=n})};Wo.prototype._read=function(){if(this[Yf]){const t=this[Yf];this[Yf]=null,t()}};const{ObjectSetPrototypeOf:G$}=Dn;var Y$=D6;const FE=W$;G$(D6.prototype,FE.prototype);G$(D6,FE);function D6(t){if(!(this instanceof D6))return new D6(t);FE.call(this,t)}D6.prototype._transform=function(t,e,n){n(null,t)};const Df=Gd,{ArrayIsArray:Aae,Promise:Cae,SymbolAsyncIterator:Iae,SymbolDispose:Oae}=Dn,H2=g1,{once:Mae}=oa,Pae=gu,jA=Vo(),{aggregateTwoErrors:kae,codes:{ERR_INVALID_ARG_TYPE:z4,ERR_INVALID_RETURN_VALUE:Wm,ERR_MISSING_ARGS:Nae,ERR_STREAM_DESTROYED:Rae,ERR_STREAM_PREMATURE_CLOSE:Dae},AbortError:$ae}=Rr,{validateFunction:Lae,validateAbortSignal:Bae}=kp,{isIterable:$1,isReadable:Gm,isReadableNodeStream:Gb,isNodeStream:HA,isTransformStream:jl,isWebStream:Fae,isReadableStream:Ym,isReadableFinished:Uae}=tc,jae=globalThis.AbortController||w5().AbortController;let Jm,Zm,Xm;function zA(t,e,n){let r=!1;t.on("close",()=>{r=!0});const a=H2(t,{readable:e,writable:n},i=>{r=!i});return{destroy:i=>{r||(r=!0,Pae.destroyer(t,i||new Rae("pipe")))},cleanup:a}}function Hae(t){return Lae(t[t.length-1],"streams[stream.length - 1]"),t.pop()}function Qm(t){if($1(t))return t;if(Gb(t))return zae(t);throw new z4("val",["Readable","Iterable","AsyncIterable"],t)}async function*zae(t){Zm||(Zm=Fy()),yield*Zm.prototype[Iae].call(t)}async function Rh(t,e,n,{end:r}){let a,i=null;const s=d=>{if(d&&(a=d),i){const l=i;i=null,l()}},o=()=>new Cae((d,l)=>{a?l(a):i=()=>{a?l(a):d()}});e.on("drain",s);const c=H2(e,{readable:!1},s);try{e.writableNeedDrain&&await o();for await(const d of t)e.write(d)||await o();r&&(e.end(),await o()),n()}catch(d){n(a!==d?kae(a,d):d)}finally{c(),e.off("drain",s)}}async function eg(t,e,n,{end:r}){jl(e)&&(e=e.writable);const a=e.getWriter();try{for await(const i of t)await a.ready,a.write(i).catch(()=>{});await a.ready,r&&await a.close(),n()}catch(i){try{await a.abort(i),n(i)}catch(s){n(s)}}}function qae(...t){return J$(t,Mae(Hae(t)))}function J$(t,e,n){if(t.length===1&&Aae(t[0])&&(t=t[0]),t.length<2)throw new Nae("streams");const r=new jae,a=r.signal,i=n==null?void 0:n.signal,s=[];Bae(i,"options.signal");function o(){h(new $ae)}Xm=Xm||oa.addAbortListener;let c;i&&(c=Xm(i,o));let d,l;const u=[];let f=0;function p(T){h(T,--f===0)}function h(T,A){var N;if(T&&(!d||d.code==="ERR_STREAM_PREMATURE_CLOSE")&&(d=T),!(!d&&!A)){for(;u.length;)u.shift()(d);(N=c)===null||N===void 0||N[Oae](),r.abort(),A&&(d||s.forEach(R=>R()),Df.nextTick(e,d,l))}}let b;for(let T=0;T<t.length;T++){const A=t[T],N=T<t.length-1,R=T>0,B=N||(n==null?void 0:n.end)!==!1,F=T===t.length-1;if(HA(A)){let I=function(P){P&&P.name!=="AbortError"&&P.code!=="ERR_STREAM_PREMATURE_CLOSE"&&p(P)};if(B){const{destroy:P,cleanup:$}=zA(A,N,R);u.push(P),Gm(A)&&F&&s.push($)}A.on("error",I),Gm(A)&&F&&s.push(()=>{A.removeListener("error",I)})}if(T===0)if(typeof A=="function"){if(b=A({signal:a}),!$1(b))throw new Wm("Iterable, AsyncIterable or Stream","source",b)}else $1(A)||Gb(A)||jl(A)?b=A:b=jA.from(A);else if(typeof A=="function"){if(jl(b)){var v;b=Qm((v=b)===null||v===void 0?void 0:v.readable)}else b=Qm(b);if(b=A(b,{signal:a}),N){if(!$1(b,!0))throw new Wm("AsyncIterable",`transform[${T-1}]`,b)}else{var m;Jm||(Jm=Y$);const I=new Jm({objectMode:!0}),P=(m=b)===null||m===void 0?void 0:m.then;if(typeof P=="function")f++,P.call(b,y=>{l=y,y!=null&&I.write(y),B&&I.end(),Df.nextTick(p)},y=>{I.destroy(y),Df.nextTick(p,y)});else if($1(b,!0))f++,Rh(b,I,p,{end:B});else if(Ym(b)||jl(b)){const y=b.readable||b;f++,Rh(y,I,p,{end:B})}else throw new Wm("AsyncIterable or Promise","destination",b);b=I;const{destroy:$,cleanup:M}=zA(b,!1,!0);u.push($),F&&s.push(M)}}else if(HA(A)){if(Gb(b)){f+=2;const I=Kae(b,A,p,{end:B});Gm(A)&&F&&s.push(I)}else if(jl(b)||Ym(b)){const I=b.readable||b;f++,Rh(I,A,p,{end:B})}else if($1(b))f++,Rh(b,A,p,{end:B});else throw new z4("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=A}else if(Fae(A)){if(Gb(b))f++,eg(Qm(b),A,p,{end:B});else if(Ym(b)||$1(b))f++,eg(b,A,p,{end:B});else if(jl(b))f++,eg(b.readable,A,p,{end:B});else throw new z4("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],b);b=A}else b=jA.from(A)}return(a!=null&&a.aborted||i!=null&&i.aborted)&&Df.nextTick(o),b}function Kae(t,e,n,{end:r}){let a=!1;if(e.on("close",()=>{a||n(new Dae)}),t.pipe(e,{end:!1}),r){let i=function(){a=!0,e.end()};Uae(t)?Df.nextTick(i):t.once("end",i)}else n();return H2(t,{readable:!0,writable:!1},i=>{const s=t._readableState;i&&i.code==="ERR_STREAM_PREMATURE_CLOSE"&&s&&s.ended&&!s.errored&&!s.errorEmitted?t.once("end",n).once("error",n):n(i)}),H2(e,{readable:!1,writable:!0},n)}var UE={pipelineImpl:J$,pipeline:qae};const{pipeline:Vae}=UE,Dh=Vo(),{destroyer:Wae}=gu,{isNodeStream:$h,isReadable:qA,isWritable:KA,isWebStream:tg,isTransformStream:S1,isWritableStream:VA,isReadableStream:WA}=tc,{AbortError:Gae,codes:{ERR_INVALID_ARG_VALUE:GA,ERR_MISSING_ARGS:Yae}}=Rr,Jae=g1;var Z$=function(...e){if(e.length===0)throw new Yae("streams");if(e.length===1)return Dh.from(e[0]);const n=[...e];if(typeof e[0]=="function"&&(e[0]=Dh.from(e[0])),typeof e[e.length-1]=="function"){const p=e.length-1;e[p]=Dh.from(e[p])}for(let p=0;p<e.length;++p)if(!(!$h(e[p])&&!tg(e[p]))){if(p<e.length-1&&!(qA(e[p])||WA(e[p])||S1(e[p])))throw new GA(`streams[${p}]`,n[p],"must be readable");if(p>0&&!(KA(e[p])||VA(e[p])||S1(e[p])))throw new GA(`streams[${p}]`,n[p],"must be writable")}let r,a,i,s,o;function c(p){const h=s;s=null,h?h(p):p?o.destroy(p):!f&&!u&&o.destroy()}const d=e[0],l=Vae(e,c),u=!!(KA(d)||VA(d)||S1(d)),f=!!(qA(l)||WA(l)||S1(l));if(o=new Dh({writableObjectMode:!!(d!=null&&d.writableObjectMode),readableObjectMode:!!(l!=null&&l.readableObjectMode),writable:u,readable:f}),u){if($h(d))o._write=function(h,b,v){d.write(h,b)?v():r=v},o._final=function(h){d.end(),a=h},d.on("drain",function(){if(r){const h=r;r=null,h()}});else if(tg(d)){const b=(S1(d)?d.writable:d).getWriter();o._write=async function(v,m,T){try{await b.ready,b.write(v).catch(()=>{}),T()}catch(A){T(A)}},o._final=async function(v){try{await b.ready,b.close().catch(()=>{}),a=v}catch(m){v(m)}}}const p=S1(l)?l.readable:l;Jae(p,()=>{if(a){const h=a;a=null,h()}})}if(f){if($h(l))l.on("readable",function(){if(i){const p=i;i=null,p()}}),l.on("end",function(){o.push(null)}),o._read=function(){for(;;){const p=l.read();if(p===null){i=o._read;return}if(!o.push(p))return}};else if(tg(l)){const h=(S1(l)?l.readable:l).getReader();o._read=async function(){for(;;)try{const{value:b,done:v}=await h.read();if(!o.push(b))return;if(v){o.push(null);return}}catch{return}}}}return o._destroy=function(p,h){!p&&s!==null&&(p=new Gae),i=null,r=null,a=null,s===null?h(p):(s=h,$h(l)&&Wae(l,p))},o};const Zae=globalThis.AbortController||w5().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Xae,ERR_INVALID_ARG_TYPE:Rp,ERR_MISSING_ARGS:Qae,ERR_OUT_OF_RANGE:eie},AbortError:Us}=Rr,{validateAbortSignal:Jd,validateInteger:YA,validateObject:Zd}=kp,tie=Dn.Symbol("kWeak"),nie=Dn.Symbol("kResistStopPropagation"),{finished:rie}=g1,aie=Z$,{addAbortSignalNoValidate:iie}=Ly,{isWritable:sie,isNodeStream:oie}=tc,{deprecate:cie}=oa,{ArrayPrototypePush:die,Boolean:lie,MathFloor:JA,Number:uie,NumberIsNaN:fie,Promise:ZA,PromiseReject:XA,PromiseResolve:pie,PromisePrototypeThen:QA,Symbol:X$}=Dn,z2=X$("kEmpty"),eC=X$("kEof");function hie(t,e){if(e!=null&&Zd(e,"options"),(e==null?void 0:e.signal)!=null&&Jd(e.signal,"options.signal"),oie(t)&&!sie(t))throw new Xae("stream",t,"must be writable");const n=aie(this,t);return e!=null&&e.signal&&iie(e.signal,n),n}function Uy(t,e){if(typeof t!="function")throw new Rp("fn",["Function","AsyncFunction"],t);e!=null&&Zd(e,"options"),(e==null?void 0:e.signal)!=null&&Jd(e.signal,"options.signal");let n=1;(e==null?void 0:e.concurrency)!=null&&(n=JA(e.concurrency));let r=n-1;return(e==null?void 0:e.highWaterMark)!=null&&(r=JA(e.highWaterMark)),YA(n,"options.concurrency",1),YA(r,"options.highWaterMark",0),r+=n,(async function*(){const i=oa.AbortSignalAny([e==null?void 0:e.signal].filter(lie)),s=this,o=[],c={signal:i};let d,l,u=!1,f=0;function p(){u=!0,h()}function h(){f-=1,b()}function b(){l&&!u&&f<n&&o.length<r&&(l(),l=null)}async function v(){try{for await(let m of s){if(u)return;if(i.aborted)throw new Us;try{if(m=t(m,c),m===z2)continue;m=pie(m)}catch(T){m=XA(T)}f+=1,QA(m,h,p),o.push(m),d&&(d(),d=null),!u&&(o.length>=r||f>=n)&&await new ZA(T=>{l=T})}o.push(eC)}catch(m){const T=XA(m);QA(T,h,p),o.push(T)}finally{u=!0,d&&(d(),d=null)}}v();try{for(;;){for(;o.length>0;){const m=await o[0];if(m===eC)return;if(i.aborted)throw new Us;m!==z2&&(yield m),o.shift(),b()}await new ZA(m=>{d=m})}}finally{u=!0,l&&(l(),l=null)}}).call(this)}function bie(t=void 0){return t!=null&&Zd(t,"options"),(t==null?void 0:t.signal)!=null&&Jd(t.signal,"options.signal"),(async function*(){let n=0;for await(const a of this){var r;if(t!=null&&(r=t.signal)!==null&&r!==void 0&&r.aborted)throw new Us({cause:t.signal.reason});yield[n++,a]}}).call(this)}async function Q$(t,e=void 0){for await(const n of jE.call(this,t,e))return!0;return!1}async function yie(t,e=void 0){if(typeof t!="function")throw new Rp("fn",["Function","AsyncFunction"],t);return!await Q$.call(this,async(...n)=>!await t(...n),e)}async function mie(t,e){for await(const n of jE.call(this,t,e))return n}async function gie(t,e){if(typeof t!="function")throw new Rp("fn",["Function","AsyncFunction"],t);async function n(r,a){return await t(r,a),z2}for await(const r of Uy.call(this,n,e));}function jE(t,e){if(typeof t!="function")throw new Rp("fn",["Function","AsyncFunction"],t);async function n(r,a){return await t(r,a)?r:z2}return Uy.call(this,n,e)}class wie extends Qae{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function vie(t,e,n){var r;if(typeof t!="function")throw new Rp("reducer",["Function","AsyncFunction"],t);n!=null&&Zd(n,"options"),(n==null?void 0:n.signal)!=null&&Jd(n.signal,"options.signal");let a=arguments.length>1;if(n!=null&&(r=n.signal)!==null&&r!==void 0&&r.aborted){const d=new Us(void 0,{cause:n.signal.reason});throw this.once("error",()=>{}),await rie(this.destroy(d)),d}const i=new Zae,s=i.signal;if(n!=null&&n.signal){const d={once:!0,[tie]:this,[nie]:!0};n.signal.addEventListener("abort",()=>i.abort(),d)}let o=!1;try{for await(const d of this){var c;if(o=!0,n!=null&&(c=n.signal)!==null&&c!==void 0&&c.aborted)throw new Us;a?e=await t(e,d,{signal:s}):(e=d,a=!0)}if(!o&&!a)throw new wie}finally{i.abort()}return e}async function Eie(t){t!=null&&Zd(t,"options"),(t==null?void 0:t.signal)!=null&&Jd(t.signal,"options.signal");const e=[];for await(const r of this){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Us(void 0,{cause:t.signal.reason});die(e,r)}return e}function _ie(t,e){const n=Uy.call(this,t,e);return(async function*(){for await(const a of n)yield*a}).call(this)}function eL(t){if(t=uie(t),fie(t))return 0;if(t<0)throw new eie("number",">= 0",t);return t}function Tie(t,e=void 0){return e!=null&&Zd(e,"options"),(e==null?void 0:e.signal)!=null&&Jd(e.signal,"options.signal"),t=eL(t),(async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Us;for await(const i of this){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new Us;t--<=0&&(yield i)}}).call(this)}function xie(t,e=void 0){return e!=null&&Zd(e,"options"),(e==null?void 0:e.signal)!=null&&Jd(e.signal,"options.signal"),t=eL(t),(async function*(){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Us;for await(const i of this){var a;if(e!=null&&(a=e.signal)!==null&&a!==void 0&&a.aborted)throw new Us;if(t-- >0&&(yield i),t<=0)return}}).call(this)}ME.streamReturningOperators={asIndexedPairs:cie(bie,"readable.asIndexedPairs will be removed in a future version."),drop:Tie,filter:jE,flatMap:_ie,map:Uy,take:xie,compose:hie};ME.promiseReturningOperators={every:yie,forEach:gie,reduce:vie,toArray:Eie,some:Q$,find:mie};var ng,tC;function tL(){if(tC)return ng;tC=1;const{ArrayPrototypePop:t,Promise:e}=Dn,{isIterable:n,isNodeStream:r,isWebStream:a}=tc,{pipelineImpl:i}=UE,{finished:s}=g1;nL();function o(...c){return new e((d,l)=>{let u,f;const p=c[c.length-1];if(p&&typeof p=="object"&&!r(p)&&!n(p)&&!a(p)){const h=t(c);u=h.signal,f=h.end}i(c,(h,b)=>{h?l(h):d(b)},{signal:u,end:f})})}return ng={finished:s,pipeline:o},ng}var nC;function nL(){if(nC)return Bm.exports;nC=1;const{Buffer:t}=qd,{ObjectDefineProperty:e,ObjectKeys:n,ReflectApply:r}=Dn,{promisify:{custom:a}}=oa,{streamReturningOperators:i,promiseReturningOperators:s}=ME,{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Rr,c=Z$,{setDefaultHighWaterMark:d,getDefaultHighWaterMark:l}=By,{pipeline:u}=UE,{destroyer:f}=gu,p=g1,h=tL(),b=tc,v=Bm.exports=DE.Stream;v.isDestroyed=b.isDestroyed,v.isDisturbed=b.isDisturbed,v.isErrored=b.isErrored,v.isReadable=b.isReadable,v.isWritable=b.isWritable,v.Readable=Fy();for(const T of n(i)){let N=function(...R){if(new.target)throw o();return v.Readable.from(r(A,this,R))};const A=i[T];e(N,"name",{__proto__:null,value:A.name}),e(N,"length",{__proto__:null,value:A.length}),e(v.Readable.prototype,T,{__proto__:null,value:N,enumerable:!1,configurable:!0,writable:!0})}for(const T of n(s)){let N=function(...R){if(new.target)throw o();return r(A,this,R)};const A=s[T];e(N,"name",{__proto__:null,value:A.name}),e(N,"length",{__proto__:null,value:A.length}),e(v.Readable.prototype,T,{__proto__:null,value:N,enumerable:!1,configurable:!0,writable:!0})}v.Writable=LE(),v.Duplex=Vo(),v.Transform=W$,v.PassThrough=Y$,v.pipeline=u;const{addAbortSignal:m}=Ly;return v.addAbortSignal=m,v.finished=p,v.destroy=f,v.compose=c,v.setDefaultHighWaterMark=d,v.getDefaultHighWaterMark=l,e(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),e(u,a,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),e(p,a,{__proto__:null,enumerable:!0,get(){return h.finished}}),v.Stream=v,v._isUint8Array=function(A){return A instanceof Uint8Array},v._uint8ArrayToBuffer=function(A){return t.from(A.buffer,A.byteOffset,A.byteLength)},Bm.exports}(function(t){const e=nL(),n=tL(),r=e.Readable.destroy;t.exports=e.Readable,t.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,t.exports._isUint8Array=e._isUint8Array,t.exports.isDisturbed=e.isDisturbed,t.exports.isErrored=e.isErrored,t.exports.isReadable=e.isReadable,t.exports.Readable=e.Readable,t.exports.Writable=e.Writable,t.exports.Duplex=e.Duplex,t.exports.Transform=e.Transform,t.exports.PassThrough=e.PassThrough,t.exports.addAbortSignal=e.addAbortSignal,t.exports.finished=e.finished,t.exports.destroy=e.destroy,t.exports.destroy=r,t.exports.pipeline=e.pipeline,t.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return n}}),t.exports.Stream=e.Stream,t.exports.default=t.exports})(s$);var rHe=s$.exports;function rC(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}function Sie(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r+=1)n[r]=t[r];return n}let wu=class extends l0.EventEmitter{emit(e,...n){let r=e==="error";const a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;const o=new Error(`Unhandled error.${s?` (${s.message})`:""}`);throw o.context=s,o}const i=a[e];if(i===void 0)return!1;if(typeof i=="function")rC(i,this,n);else{const s=i.length,o=Sie(i);for(let c=0;c<s;c+=1)rC(o[c],this,n)}return!0}};class df extends Error{constructor({code:e,message:n,data:r}){if(!Number.isInteger(e))throw new Error("code must be an integer");if(!n||typeof n!="string")throw new Error("message must be string");super(n),re(this,"code",void 0),re(this,"data",void 0),this.code=e,r!==void 0&&(this.data=r)}toString(){return SD({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const V0={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},aC={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};var rL=function(t,e){if(typeof t>"u"||t===null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)};const iC=V0.rpc.internal,Aie="Unspecified error message. This is a bug, please report it.",Cie="Unspecified server error.";function aL(t){return Number.isInteger(t)}function sC(t){return typeof t=="string"&&t.length>0}function q2(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}function Iie(t){if(typeof t!="object"||t===null)return!1;try{let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}catch{return!1}}function Oie(t){return t>=-32099&&t<=-32e3}function iL(t){const e=t;return!(!e||!aL(e.code)||!sC(e.message)||e.stack&&!sC(e.stack))}function jy(t,e=Aie){if(aL(t)){const n=t.toString();if(rL(aC,n))return aC[n].message;if(Oie(t))return Cie}return e}const Mie={code:iC,message:jy(iC)};function q4(t){try{JSON.parse(JSON.stringify(t,(e,n)=>{if(e==="__proto__"||e==="constructor")throw new Error("Not valid json");if(typeof n=="function"||typeof n=="symbol")throw new Error("Not valid json");return n}),(e,n)=>{if(!(e==="__proto__"||e==="constructor"))return n})}catch{return!1}return!0}function oC(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return q4(r)&&(e[n]=r),e},{})}function sL(t){return Array.isArray(t)?t.map(e=>q4(e)?e:q2(e)?oC(e):null):q2(t)?oC(t):q4(t)?t:null}function Pie(t,e){if(t&&typeof t=="object"&&"serialize"in t&&typeof t.serialize=="function")return t.serialize();if(iL(t))return t;const n=sL(t);return Q(Q({},e),{},{data:{cause:n}})}function K4(t,{fallbackError:e=Mie,shouldIncludeStack:n=!0}={}){if(!iL(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=Pie(t,e);return n||delete r.stack,r}function kie(t){return q2(t)&&rL(t,"cause")&&q2(t.cause)}var Nie=function(t,e){if(typeof t>"u"||t===null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)};function Rie(t){return Number.isInteger(t)&&t>=1e3&&t<=4999}function Die(t,e){if(e!=="[Circular]")return e}class oL extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a non-empty string.');kie(r)?(super(n,{cause:r.cause}),re(this,"cause",void 0),re(this,"code",void 0),re(this,"data",void 0),Nie(this,"cause")||Object.assign(this,{cause:r.cause})):(super(n),re(this,"cause",void 0),re(this,"code",void 0),re(this,"data",void 0)),r!==void 0&&(this.data=r),this.code=e,this.cause=r==null?void 0:r.cause}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data,Iie(this.data)&&(e.data.cause=sL(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return SD(this.serialize(),{replacer:Die,space:2})}}class cL extends oL{constructor(e,n,r){if(!Rie(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,n,r)}}function dL(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e??void 0,n]}}return[]}function ja(t,e){const[n,r]=dL(e);return new oL(t,n??jy(t),r)}function lf(t,e){const[n,r]=dL(e);return new cL(t,n??jy(t),r)}const Ut={parse:t=>ja(V0.rpc.parse,t),invalidRequest:t=>ja(V0.rpc.invalidRequest,t),invalidParams:t=>ja(V0.rpc.invalidParams,t),methodNotFound:t=>ja(V0.rpc.methodNotFound,t),internal:t=>ja(V0.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return ja(e,t)},invalidInput:t=>ja(V0.rpc.invalidInput,t),resourceNotFound:t=>ja(V0.rpc.resourceNotFound,t),resourceUnavailable:t=>ja(V0.rpc.resourceUnavailable,t),transactionRejected:t=>ja(V0.rpc.transactionRejected,t),methodNotSupported:t=>ja(V0.rpc.methodNotSupported,t),limitExceeded:t=>ja(V0.rpc.limitExceeded,t)},Ar={userRejectedRequest:t=>lf(V0.provider.userRejectedRequest,t),unauthorized:t=>lf(V0.provider.unauthorized,t),unsupportedMethod:t=>lf(V0.provider.unsupportedMethod,t),disconnected:t=>lf(V0.provider.disconnected,t),chainDisconnected:t=>lf(V0.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new cL(e,n,r)}};function vu(t){return(e,n,r,a)=>{const i=t[e.method];return i===void 0?r():typeof i=="function"?i(e,n,r,a):(n.result=i,a())}}function Qt(t){return async(e,n,r,a)=>{let i;const s=new Promise(l=>{i=l});let o=null,c=!1;const d=async()=>{c=!0,r(l=>{o=l,i()}),await s};try{await t(e,n,d),c?(await s,o(null)):a(null)}catch(l){const u=l;o?o(u):a(u)}}}function V4(t){const{message:e="",code:n=-32603,stack:r="Stack trace is not available.",data:a=""}=t,i=parseInt((n==null?void 0:n.toString())||"-32603");return{message:e||(t==null?void 0:t.toString())||jy(i),code:i,stack:r,data:a||e||(t==null?void 0:t.toString())}}class cr extends wu{constructor(){super(),re(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,n,r){const a=[];let i=null,s=!1;for(const o of r)if([i,s]=await cr._runMiddleware(e,n,o,a),s)break;return[i,s,a.reverse()]}static _runMiddleware(e,n,r,a){return new Promise(i=>{const s=c=>{const d=c||n.error;d&&(typeof d=="object"&&Object.keys(d).includes("stack")===!1&&(d.stack="Stack trace is not available."),Ko.error(d),n.error=K4(d,{shouldIncludeStack:!0,fallbackError:V4(d)})),i([d,!0])},o=c=>{n.error?s(n.error):(c&&(typeof c!="function"&&s(new df({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),a.push(c)),i([null,!1]))};try{r(e,n,o,s)}catch(c){s(c)}})}static async _runReturnHandlers(e){for(const n of e)await new Promise((r,a)=>{n(i=>i?a(i):r())})}static _checkForCompletion(e,n,r){if(!("result"in n)&&!("error"in n))throw new df({code:-32603,message:"Response has no error or result for request"});if(!r)throw new df({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,n){if(n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?this._handleBatch(e,n):this._handleBatch(e):n?this._handle(e,n):this._promiseHandle(e)}asMiddleware(){return async(e,n,r,a)=>{try{const[i,s,o]=await cr._runAllMiddleware(e,n,this._middleware);return s?(await cr._runReturnHandlers(o),a(i)):r(async c=>{try{await cr._runReturnHandlers(o)}catch(d){return c(d)}return c()})}catch(i){return a(i)}}}async _handleBatch(e,n){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return n?n(null,r):r}catch(r){if(n)return n(r);throw r}}_promiseHandle(e){return new Promise((n,r)=>{this._handle(e,(a,i)=>{a&&i===void 0?r(a):n(i)}).catch(r)})}async _handle(e,n){if(!e||Array.isArray(e)||typeof e!="object"){const s=new df({code:-32603,message:"request must be plain object"});return n(s,{id:void 0,jsonrpc:"2.0",error:s})}if(typeof e.method!="string"){const s=new df({code:-32603,message:"method must be string"});return n(s,{id:e.id,jsonrpc:"2.0",error:s})}const r=Q({},e),a={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,a)}catch(s){i=s}return i&&(delete a.result,a.error||(typeof i=="object"&&Object.keys(i).includes("stack")===!1&&(i.stack="Stack trace is not available."),Ko.error(i),a.error=K4(i,{shouldIncludeStack:!0,fallbackError:V4(i)}))),n(i,a)}async _processRequest(e,n){const[r,a,i]=await cr._runAllMiddleware(e,n,this._middleware);if(cr._checkForCompletion(e,n,a),await cr._runReturnHandlers(i),r)throw r}}function Eu(t){const e=new cr;return t.forEach(n=>{e.push(n)}),e.asMiddleware()}function Sd(t){const e=new wu;return e.sendAsync=async n=>{const r=await t.handle(n);if(r.error){typeof r.error=="object"&&Object.keys(r.error).includes("stack")===!1&&(r.error.stack="Stack trace is not available."),Ko.error(r.error);const a=K4(r.error,{fallbackError:V4(r.error),shouldIncludeStack:!0});throw Ut.internal(a)}return r.result},e.send=(n,r)=>{if(typeof r!="function")throw new Error('Must provide callback to "send" method.');t.handle(n,r)},t.on&&t.on("notification",n=>{e.emit("data",null,n)}),e.request=async n=>{const r=Q(Q({},n),{},{id:Math.random().toString(36).slice(2),jsonrpc:"2.0"});return await e.sendAsync(r)},e}function cC(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function $ie(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Hy(t,...e){if(!$ie(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function Lie(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");cC(t.outputLen),cC(t.blockLen)}function K2(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Bie(t,e){Hy(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}const rg=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ag=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Xi=(t,e)=>t<<32-e|t>>>e;new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Fie(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function HE(t){return typeof t=="string"&&(t=Fie(t)),Hy(t),t}function Uie(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];Hy(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}let lL=class{clone(){return this._cloneInto()}};function jie(t){const e=r=>t().update(HE(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Hie(t=32){if(rg&&typeof rg.getRandomValues=="function")return rg.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}function zie(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const a=BigInt(32),i=BigInt(4294967295),s=Number(n>>a&i),o=Number(n&i),c=r?4:0,d=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+d,o,r)}const qie=(t,e,n)=>t&e^~t&n,Kie=(t,e,n)=>t&e^t&n^e&n;class Vie extends lL{constructor(e,n,r,a){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ag(this.buffer)}update(e){K2(this);const{view:n,buffer:r,blockLen:a}=this;e=HE(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(a-this.pos,i-s);if(o===a){const c=ag(e);for(;a<=i-s;s+=a)this.process(c,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===a&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){K2(this),Bie(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:a,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>a-s&&(this.process(r,0),s=0);for(let u=s;u<a;u++)n[u]=0;zie(r,a-8,BigInt(this.length*8),i),this.process(r,0);const o=ag(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<d;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:a,finished:i,destroyed:s,pos:o}=this;return e.length=a,e.pos=o,e.finished=i,e.destroyed=s,a%n&&e.buffer.set(r),e}}const Wie=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),lc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),uc=new Uint32Array(64);class Gie extends Vie{constructor(){super(64,32,8,!1),this.A=lc[0]|0,this.B=lc[1]|0,this.C=lc[2]|0,this.D=lc[3]|0,this.E=lc[4]|0,this.F=lc[5]|0,this.G=lc[6]|0,this.H=lc[7]|0}get(){const{A:e,B:n,C:r,D:a,E:i,F:s,G:o,H:c}=this;return[e,n,r,a,i,s,o,c]}set(e,n,r,a,i,s,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=a|0,this.E=i|0,this.F=s|0,this.G=o|0,this.H=c|0}process(e,n){for(let u=0;u<16;u++,n+=4)uc[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const f=uc[u-15],p=uc[u-2],h=Xi(f,7)^Xi(f,18)^f>>>3,b=Xi(p,17)^Xi(p,19)^p>>>10;uc[u]=b+uc[u-7]+h+uc[u-16]|0}let{A:r,B:a,C:i,D:s,E:o,F:c,G:d,H:l}=this;for(let u=0;u<64;u++){const f=Xi(o,6)^Xi(o,11)^Xi(o,25),p=l+f+qie(o,c,d)+Wie[u]+uc[u]|0,b=(Xi(r,2)^Xi(r,13)^Xi(r,22))+Kie(r,a,i)|0;l=d,d=c,c=o,o=s+p|0,s=i,i=a,a=r,r=p+b|0}r=r+this.A|0,a=a+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(r,a,i,s,o,c,d,l)}roundClean(){uc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Yie=jie(()=>new Gie);class uL extends lL{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,Lie(e);const r=HE(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,i=new Uint8Array(a);i.set(r.length>a?e.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return K2(this),this.iHash.update(e),this}digestInto(e){K2(this),Hy(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:a,destroyed:i,blockLen:s,outputLen:o}=this;return e=e,e.finished=a,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const fL=(t,e,n)=>new uL(t,e).update(n).digest();fL.create=(t,e)=>new uL(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pL=BigInt(0),zy=BigInt(1),Jie=BigInt(2);function Ad(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function Dp(t){if(!Ad(t))throw new Error("Uint8Array expected")}const Zie=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function $6(t){Dp(t);let e="";for(let n=0;n<t.length;n++)e+=Zie[t[n]];return e}function hL(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function zE(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const ro={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function dC(t){if(t>=ro._0&&t<=ro._9)return t-ro._0;if(t>=ro._A&&t<=ro._F)return t-(ro._A-10);if(t>=ro._a&&t<=ro._f)return t-(ro._a-10)}function L6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let a=0,i=0;a<n;a++,i+=2){const s=dC(t.charCodeAt(i)),o=dC(t.charCodeAt(i+1));if(s===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[a]=s*16+o}return r}function hd(t){return zE($6(t))}function qE(t){return Dp(t),zE($6(Uint8Array.from(t).reverse()))}function B6(t,e){return L6(t.toString(16).padStart(e*2,"0"))}function KE(t,e){return B6(t,e).reverse()}function Xie(t){return L6(hL(t))}function Mi(t,e,n){let r;if(typeof e=="string")try{r=L6(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else if(Ad(e))r=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);const a=r.length;if(typeof n=="number"&&a!==n)throw new Error(`${t} expected ${n} bytes, got ${a}`);return r}function v5(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];Dp(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}function Qie(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function ese(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function tse(t){let e;for(e=0;t>pL;t>>=zy,e+=1);return e}function nse(t,e){return t>>BigInt(e)&zy}function rse(t,e,n){return t|(n?zy:pL)<<BigInt(e)}const VE=t=>(Jie<<BigInt(t-1))-zy,ig=t=>new Uint8Array(t),lC=t=>Uint8Array.from(t);function bL(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ig(t),a=ig(t),i=0;const s=()=>{r.fill(1),a.fill(0),i=0},o=(...u)=>n(a,r,...u),c=(u=ig())=>{a=o(lC([0]),u),r=o(),u.length!==0&&(a=o(lC([1]),u),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const f=[];for(;u<e;){r=o();const p=r.slice();f.push(p),u+=r.length}return v5(...f)};return(u,f)=>{s(),c(u);let p;for(;!(p=f(d()));)c();return s(),p}}const ase={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Ad(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $p(t,e,n={}){const r=(a,i,s)=>{const o=ase[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[a];if(!(s&&c===void 0)&&!o(c,t))throw new Error(`Invalid param ${String(a)}=${c} (${typeof c}), expected ${i}`)};for(const[a,i]of Object.entries(e))r(a,i,!1);for(const[a,i]of Object.entries(n))r(a,i,!0);return t}const ise=Object.freeze(Object.defineProperty({__proto__:null,abytes:Dp,bitGet:nse,bitLen:tse,bitMask:VE,bitSet:rse,bytesToHex:$6,bytesToNumberBE:hd,bytesToNumberLE:qE,concatBytes:v5,createHmacDrbg:bL,ensureBytes:Mi,equalBytes:Qie,hexToBytes:L6,hexToNumber:zE,isBytes:Ad,numberToBytesBE:B6,numberToBytesLE:KE,numberToHexUnpadded:hL,numberToVarBytesBE:Xie,utf8ToBytes:ese,validateObject:$p},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const O0=BigInt(0),qn=BigInt(1),j1=BigInt(2),sse=BigInt(3),W4=BigInt(4),uC=BigInt(5),fC=BigInt(8);BigInt(9);BigInt(16);function Gr(t,e){const n=t%e;return n>=O0?n:e+n}function ose(t,e,n){if(n<=O0||e<O0)throw new Error("Expected power/modulo > 0");if(n===qn)return O0;let r=qn;for(;e>O0;)e&qn&&(r=r*t%n),t=t*t%n,e>>=qn;return r}function Ha(t,e,n){let r=t;for(;e-- >O0;)r*=r,r%=n;return r}function G4(t,e){if(t===O0||e<=O0)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=Gr(t,e),r=e,a=O0,i=qn;for(;n!==O0;){const o=r/n,c=r%n,d=a-i*o;r=n,n=c,a=i,i=d}if(r!==qn)throw new Error("invert: does not exist");return Gr(a,e)}function cse(t){const e=(t-qn)/j1;let n,r,a;for(n=t-qn,r=0;n%j1===O0;n/=j1,r++);for(a=j1;a<t&&ose(a,e,t)!==t-qn;a++);if(r===1){const s=(t+qn)/W4;return function(c,d){const l=c.pow(d,s);if(!c.eql(c.sqr(l),d))throw new Error("Cannot find square root");return l}}const i=(n+qn)/j1;return function(o,c){if(o.pow(c,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let d=r,l=o.pow(o.mul(o.ONE,a),n),u=o.pow(c,i),f=o.pow(c,n);for(;!o.eql(f,o.ONE);){if(o.eql(f,o.ZERO))return o.ZERO;let p=1;for(let b=o.sqr(f);p<d&&!o.eql(b,o.ONE);p++)b=o.sqr(b);const h=o.pow(l,qn<<BigInt(d-p-1));l=o.sqr(h),u=o.mul(u,h),f=o.mul(f,l),d=p}return u}}function dse(t){if(t%W4===sse){const e=(t+qn)/W4;return function(r,a){const i=r.pow(a,e);if(!r.eql(r.sqr(i),a))throw new Error("Cannot find square root");return i}}if(t%fC===uC){const e=(t-uC)/fC;return function(r,a){const i=r.mul(a,j1),s=r.pow(i,e),o=r.mul(a,s),c=r.mul(r.mul(o,j1),s),d=r.mul(o,r.sub(c,r.ONE));if(!r.eql(r.sqr(d),a))throw new Error("Cannot find square root");return d}}return cse(t)}const lse=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function use(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=lse.reduce((r,a)=>(r[a]="function",r),e);return $p(t,n)}function fse(t,e,n){if(n<O0)throw new Error("Expected power > 0");if(n===O0)return t.ONE;if(n===qn)return e;let r=t.ONE,a=e;for(;n>O0;)n&qn&&(r=t.mul(r,a)),a=t.sqr(a),n>>=qn;return r}function pse(t,e){const n=new Array(e.length),r=e.reduce((i,s,o)=>t.is0(s)?i:(n[o]=i,t.mul(i,s)),t.ONE),a=t.inv(r);return e.reduceRight((i,s,o)=>t.is0(s)?i:(n[o]=t.mul(i,n[o]),t.mul(i,s)),a),n}function yL(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function hse(t,e,n=!1,r={}){if(t<=O0)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:a,nByteLength:i}=yL(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=dse(t),o=Object.freeze({ORDER:t,BITS:a,BYTES:i,MASK:VE(a),ZERO:O0,ONE:qn,create:c=>Gr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof c}`);return O0<=c&&c<t},is0:c=>c===O0,isOdd:c=>(c&qn)===qn,neg:c=>Gr(-c,t),eql:(c,d)=>c===d,sqr:c=>Gr(c*c,t),add:(c,d)=>Gr(c+d,t),sub:(c,d)=>Gr(c-d,t),mul:(c,d)=>Gr(c*d,t),pow:(c,d)=>fse(o,c,d),div:(c,d)=>Gr(c*G4(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>G4(c,t),sqrt:r.sqrt||(c=>s(o,c)),invertBatch:c=>pse(o,c),cmov:(c,d,l)=>l?d:c,toBytes:c=>n?KE(c,i):B6(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?qE(c):hd(c)}});return Object.freeze(o)}function mL(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function gL(t){const e=mL(t);return e+Math.ceil(e/2)}function bse(t,e,n=!1){const r=t.length,a=mL(e),i=gL(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=n?hd(t):qE(t),o=Gr(s,e-qn)+qn;return n?KE(o,a):B6(o,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yse=BigInt(0),sg=BigInt(1);function mse(t,e){const n=(a,i)=>{const s=i.negate();return a?s:i},r=a=>{const i=Math.ceil(e/a)+1,s=2**(a-1);return{windows:i,windowSize:s}};return{constTimeNegate:n,unsafeLadder(a,i){let s=t.ZERO,o=a;for(;i>yse;)i&sg&&(s=s.add(o)),o=o.double(),i>>=sg;return s},precomputeWindow(a,i){const{windows:s,windowSize:o}=r(i),c=[];let d=a,l=d;for(let u=0;u<s;u++){l=d,c.push(l);for(let f=1;f<o;f++)l=l.add(d),c.push(l);d=l.double()}return c},wNAF(a,i,s){const{windows:o,windowSize:c}=r(a);let d=t.ZERO,l=t.BASE;const u=BigInt(2**a-1),f=2**a,p=BigInt(a);for(let h=0;h<o;h++){const b=h*c;let v=Number(s&u);s>>=p,v>c&&(v-=f,s+=sg);const m=b,T=b+Math.abs(v)-1,A=h%2!==0,N=v<0;v===0?l=l.add(n(A,i[m])):d=d.add(n(N,i[T]))}return{p:d,f:l}},wNAFCached(a,i,s,o){const c=a._WINDOW_SIZE||1;let d=i.get(a);return d||(d=this.precomputeWindow(a,c),c!==1&&i.set(a,o(d))),this.wNAF(c,d,s)}}}function wL(t){return use(t.Fp),$p(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...yL(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function gse(t){const e=wL(t);$p(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a}=e;if(n){if(!r.eql(a,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:wse,hexToBytes:vse}=ise,J1={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){const{Err:e}=J1;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");const n=t[1],r=t.subarray(2,n+2);if(!n||r.length!==n)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:wse(r),l:t.subarray(n+2)}},toSig(t){const{Err:e}=J1,n=typeof t=="string"?vse(t):t;Dp(n);let r=n.length;if(r<2||n[0]!=48)throw new e("Invalid signature tag");if(n[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:a,l:i}=J1._parseInt(n.subarray(2)),{d:s,l:o}=J1._parseInt(i);if(o.length)throw new e("Invalid signature: left bytes after parsing");return{r:a,s}},hexFromSig(t){const e=d=>Number.parseInt(d[0],16)&8?"00"+d:d,n=d=>{const l=d.toString(16);return l.length&1?`0${l}`:l},r=e(n(t.s)),a=e(n(t.r)),i=r.length/2,s=a.length/2,o=n(i),c=n(s);return`30${n(s+i+4)}02${c}${a}02${o}${r}`}},So=BigInt(0),ni=BigInt(1);BigInt(2);const pC=BigInt(3);BigInt(4);function Ese(t){const e=gse(t),{Fp:n}=e,r=e.toBytes||((h,b,v)=>{const m=b.toAffine();return v5(Uint8Array.from([4]),n.toBytes(m.x),n.toBytes(m.y))}),a=e.fromBytes||(h=>{const b=h.subarray(1),v=n.fromBytes(b.subarray(0,n.BYTES)),m=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:v,y:m}});function i(h){const{a:b,b:v}=e,m=n.sqr(h),T=n.mul(m,h);return n.add(n.add(T,n.mul(h,b)),v)}if(!n.eql(n.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function s(h){return typeof h=="bigint"&&So<h&&h<e.n}function o(h){if(!s(h))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(h){const{allowedPrivateKeyLengths:b,nByteLength:v,wrapPrivateKey:m,n:T}=e;if(b&&typeof h!="bigint"){if(Ad(h)&&(h=$6(h)),typeof h!="string"||!b.includes(h.length))throw new Error("Invalid key");h=h.padStart(v*2,"0")}let A;try{A=typeof h=="bigint"?h:hd(Mi("private key",h,v))}catch{throw new Error(`private key must be ${v} bytes, hex or bigint, not ${typeof h}`)}return m&&(A=Gr(A,T)),o(A),A}const d=new Map;function l(h){if(!(h instanceof u))throw new Error("ProjectivePoint expected")}class u{constructor(b,v,m){if(this.px=b,this.py=v,this.pz=m,b==null||!n.isValid(b))throw new Error("x required");if(v==null||!n.isValid(v))throw new Error("y required");if(m==null||!n.isValid(m))throw new Error("z required")}static fromAffine(b){const{x:v,y:m}=b||{};if(!b||!n.isValid(v)||!n.isValid(m))throw new Error("invalid affine point");if(b instanceof u)throw new Error("projective point not allowed");const T=A=>n.eql(A,n.ZERO);return T(v)&&T(m)?u.ZERO:new u(v,m,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const v=n.invertBatch(b.map(m=>m.pz));return b.map((m,T)=>m.toAffine(v[T])).map(u.fromAffine)}static fromHex(b){const v=u.fromAffine(a(Mi("pointHex",b)));return v.assertValidity(),v}static fromPrivateKey(b){return u.BASE.multiply(c(b))}_setWindowSize(b){this._WINDOW_SIZE=b,d.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:b,y:v}=this.toAffine();if(!n.isValid(b)||!n.isValid(v))throw new Error("bad point: x or y not FE");const m=n.sqr(v),T=i(b);if(!n.eql(m,T))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){l(b);const{px:v,py:m,pz:T}=this,{px:A,py:N,pz:R}=b,B=n.eql(n.mul(v,R),n.mul(A,T)),F=n.eql(n.mul(m,R),n.mul(N,T));return B&&F}negate(){return new u(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:v}=e,m=n.mul(v,pC),{px:T,py:A,pz:N}=this;let R=n.ZERO,B=n.ZERO,F=n.ZERO,I=n.mul(T,T),P=n.mul(A,A),$=n.mul(N,N),M=n.mul(T,A);return M=n.add(M,M),F=n.mul(T,N),F=n.add(F,F),R=n.mul(b,F),B=n.mul(m,$),B=n.add(R,B),R=n.sub(P,B),B=n.add(P,B),B=n.mul(R,B),R=n.mul(M,R),F=n.mul(m,F),$=n.mul(b,$),M=n.sub(I,$),M=n.mul(b,M),M=n.add(M,F),F=n.add(I,I),I=n.add(F,I),I=n.add(I,$),I=n.mul(I,M),B=n.add(B,I),$=n.mul(A,N),$=n.add($,$),I=n.mul($,M),R=n.sub(R,I),F=n.mul($,P),F=n.add(F,F),F=n.add(F,F),new u(R,B,F)}add(b){l(b);const{px:v,py:m,pz:T}=this,{px:A,py:N,pz:R}=b;let B=n.ZERO,F=n.ZERO,I=n.ZERO;const P=e.a,$=n.mul(e.b,pC);let M=n.mul(v,A),y=n.mul(m,N),E=n.mul(T,R),C=n.add(v,m),g=n.add(A,N);C=n.mul(C,g),g=n.add(M,y),C=n.sub(C,g),g=n.add(v,T);let x=n.add(A,R);return g=n.mul(g,x),x=n.add(M,E),g=n.sub(g,x),x=n.add(m,T),B=n.add(N,R),x=n.mul(x,B),B=n.add(y,E),x=n.sub(x,B),I=n.mul(P,g),B=n.mul($,E),I=n.add(B,I),B=n.sub(y,I),I=n.add(y,I),F=n.mul(B,I),y=n.add(M,M),y=n.add(y,M),E=n.mul(P,E),g=n.mul($,g),y=n.add(y,E),E=n.sub(M,E),E=n.mul(P,E),g=n.add(g,E),M=n.mul(y,g),F=n.add(F,M),M=n.mul(x,g),B=n.mul(C,B),B=n.sub(B,M),M=n.mul(C,y),I=n.mul(x,I),I=n.add(I,M),new u(B,F,I)}subtract(b){return this.add(b.negate())}is0(){return this.equals(u.ZERO)}wNAF(b){return p.wNAFCached(this,d,b,v=>{const m=n.invertBatch(v.map(T=>T.pz));return v.map((T,A)=>T.toAffine(m[A])).map(u.fromAffine)})}multiplyUnsafe(b){const v=u.ZERO;if(b===So)return v;if(o(b),b===ni)return this;const{endo:m}=e;if(!m)return p.unsafeLadder(this,b);let{k1neg:T,k1:A,k2neg:N,k2:R}=m.splitScalar(b),B=v,F=v,I=this;for(;A>So||R>So;)A&ni&&(B=B.add(I)),R&ni&&(F=F.add(I)),I=I.double(),A>>=ni,R>>=ni;return T&&(B=B.negate()),N&&(F=F.negate()),F=new u(n.mul(F.px,m.beta),F.py,F.pz),B.add(F)}multiply(b){o(b);let v=b,m,T;const{endo:A}=e;if(A){const{k1neg:N,k1:R,k2neg:B,k2:F}=A.splitScalar(v);let{p:I,f:P}=this.wNAF(R),{p:$,f:M}=this.wNAF(F);I=p.constTimeNegate(N,I),$=p.constTimeNegate(B,$),$=new u(n.mul($.px,A.beta),$.py,$.pz),m=I.add($),T=P.add(M)}else{const{p:N,f:R}=this.wNAF(v);m=N,T=R}return u.normalizeZ([m,T])[0]}multiplyAndAddUnsafe(b,v,m){const T=u.BASE,A=(R,B)=>B===So||B===ni||!R.equals(T)?R.multiplyUnsafe(B):R.multiply(B),N=A(this,v).add(A(b,m));return N.is0()?void 0:N}toAffine(b){const{px:v,py:m,pz:T}=this,A=this.is0();b==null&&(b=A?n.ONE:n.inv(T));const N=n.mul(v,b),R=n.mul(m,b),B=n.mul(T,b);if(A)return{x:n.ZERO,y:n.ZERO};if(!n.eql(B,n.ONE))throw new Error("invZ was invalid");return{x:N,y:R}}isTorsionFree(){const{h:b,isTorsionFree:v}=e;if(b===ni)return!0;if(v)return v(u,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:v}=e;return b===ni?this:v?v(u,this):this.multiplyUnsafe(e.h)}toRawBytes(b=!0){return this.assertValidity(),r(u,this,b)}toHex(b=!0){return $6(this.toRawBytes(b))}}u.BASE=new u(e.Gx,e.Gy,n.ONE),u.ZERO=new u(n.ZERO,n.ONE,n.ZERO);const f=e.nBitLength,p=mse(u,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:u,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}function _se(t){const e=wL(t);return $p(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Tse(t){const e=_se(t),{Fp:n,n:r}=e,a=n.BYTES+1,i=2*n.BYTES+1;function s(g){return So<g&&g<n.ORDER}function o(g){return Gr(g,r)}function c(g){return G4(g,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:f}=Ese({...e,toBytes(g,x,O){const S=x.toAffine(),w=n.toBytes(S.x),_=v5;return O?_(Uint8Array.from([x.hasEvenY()?2:3]),w):_(Uint8Array.from([4]),w,n.toBytes(S.y))},fromBytes(g){const x=g.length,O=g[0],S=g.subarray(1);if(x===a&&(O===2||O===3)){const w=hd(S);if(!s(w))throw new Error("Point is not on curve");const _=u(w);let k;try{k=n.sqrt(_)}catch(U){const j=U instanceof Error?": "+U.message:"";throw new Error("Point is not on curve"+j)}const L=(k&ni)===ni;return(O&1)===1!==L&&(k=n.neg(k)),{x:w,y:k}}else if(x===i&&O===4){const w=n.fromBytes(S.subarray(0,n.BYTES)),_=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:w,y:_}}else throw new Error(`Point of length ${x} was invalid. Expected ${a} compressed bytes or ${i} uncompressed bytes`)}}),p=g=>$6(B6(g,e.nByteLength));function h(g){const x=r>>ni;return g>x}function b(g){return h(g)?o(-g):g}const v=(g,x,O)=>hd(g.slice(x,O));class m{constructor(x,O,S){this.r=x,this.s=O,this.recovery=S,this.assertValidity()}static fromCompact(x){const O=e.nByteLength;return x=Mi("compactSignature",x,O*2),new m(v(x,0,O),v(x,O,2*O))}static fromDER(x){const{r:O,s:S}=J1.toSig(Mi("DER",x));return new m(O,S)}assertValidity(){if(!f(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!f(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(x){return new m(this.r,this.s,x)}recoverPublicKey(x){const{r:O,s:S,recovery:w}=this,_=F(Mi("msgHash",x));if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");const k=w===2||w===3?O+e.n:O;if(k>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=w&1?"03":"02",D=d.fromHex(L+p(k)),U=c(k),j=o(-_*U),H=o(S*U),W=d.BASE.multiplyAndAddUnsafe(D,j,H);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return L6(this.toDERHex())}toDERHex(){return J1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return L6(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}const T={isValidPrivateKey(g){try{return l(g),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const g=gL(e.n);return bse(e.randomBytes(g),e.n)},precompute(g=8,x=d.BASE){return x._setWindowSize(g),x.multiply(BigInt(3)),x}};function A(g,x=!0){return d.fromPrivateKey(g).toRawBytes(x)}function N(g){const x=Ad(g),O=typeof g=="string",S=(x||O)&&g.length;return x?S===a||S===i:O?S===2*a||S===2*i:g instanceof d}function R(g,x,O=!0){if(N(g))throw new Error("first arg must be private key");if(!N(x))throw new Error("second arg must be public key");return d.fromHex(x).multiply(l(g)).toRawBytes(O)}const B=e.bits2int||function(g){const x=hd(g),O=g.length*8-e.nBitLength;return O>0?x>>BigInt(O):x},F=e.bits2int_modN||function(g){return o(B(g))},I=VE(e.nBitLength);function P(g){if(typeof g!="bigint")throw new Error("bigint expected");if(!(So<=g&&g<I))throw new Error(`bigint expected < 2^${e.nBitLength}`);return B6(g,e.nByteLength)}function $(g,x,O=M){if(["recovered","canonical"].some(q=>q in O))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:w}=e;let{lowS:_,prehash:k,extraEntropy:L}=O;_==null&&(_=!0),g=Mi("msgHash",g),k&&(g=Mi("prehashed msgHash",S(g)));const D=F(g),U=l(x),j=[P(U),P(D)];if(L!=null&&L!==!1){const q=L===!0?w(n.BYTES):L;j.push(Mi("extraEntropy",q))}const H=v5(...j),W=D;function K(q){const V=B(q);if(!f(V))return;const G=c(V),J=d.BASE.multiply(V).toAffine(),z=o(J.x);if(z===So)return;const Y=o(G*o(W+z*U));if(Y===So)return;let X=(J.x===z?0:2)|Number(J.y&ni),ae=Y;return _&&h(Y)&&(ae=b(Y),X^=1),new m(z,ae,X)}return{seed:H,k2sig:K}}const M={lowS:e.lowS,prehash:!1},y={lowS:e.lowS,prehash:!1};function E(g,x,O=M){const{seed:S,k2sig:w}=$(g,x,O),_=e;return bL(_.hash.outputLen,_.nByteLength,_.hmac)(S,w)}d.BASE._setWindowSize(8);function C(g,x,O,S=y){var J;const w=g;if(x=Mi("msgHash",x),O=Mi("publicKey",O),"strict"in S)throw new Error("options.strict was renamed to lowS");const{lowS:_,prehash:k}=S;let L,D;try{if(typeof w=="string"||Ad(w))try{L=m.fromDER(w)}catch(z){if(!(z instanceof J1.Err))throw z;L=m.fromCompact(w)}else if(typeof w=="object"&&typeof w.r=="bigint"&&typeof w.s=="bigint"){const{r:z,s:Y}=w;L=new m(z,Y)}else throw new Error("PARSE");D=d.fromHex(O)}catch(z){if(z.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(_&&L.hasHighS())return!1;k&&(x=e.hash(x));const{r:U,s:j}=L,H=F(x),W=c(j),K=o(H*W),q=o(U*W),V=(J=d.BASE.multiplyAndAddUnsafe(D,K,q))==null?void 0:J.toAffine();return V?o(V.x)===U:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:R,sign:E,verify:C,ProjectivePoint:d,Signature:m,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xse(t){return{hash:t,hmac:(e,...n)=>fL(t,e,Uie(...n)),randomBytes:Hie}}function Sse(t,e){const n=r=>Tse({...t,...xse(r)});return Object.freeze({...n(e),create:n})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vL=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),hC=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ase=BigInt(1),Y4=BigInt(2),bC=(t,e)=>(t+e/Y4)/e;function Cse(t){const e=vL,n=BigInt(3),r=BigInt(6),a=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),c=BigInt(88),d=t*t*t%e,l=d*d*t%e,u=Ha(l,n,e)*l%e,f=Ha(u,n,e)*l%e,p=Ha(f,Y4,e)*d%e,h=Ha(p,a,e)*p%e,b=Ha(h,i,e)*h%e,v=Ha(b,o,e)*b%e,m=Ha(v,c,e)*v%e,T=Ha(m,o,e)*b%e,A=Ha(T,n,e)*l%e,N=Ha(A,s,e)*h%e,R=Ha(N,r,e)*d%e,B=Ha(R,Y4,e);if(!J4.eql(J4.sqr(B),t))throw new Error("Cannot find square root");return B}const J4=hse(vL,void 0,void 0,{sqrt:Cse}),WE=Sse({a:BigInt(0),b:BigInt(7),Fp:J4,n:hC,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=hC,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ase*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),o=bC(i*t,e),c=bC(-r*t,e);let d=Gr(t-o*n-c*a,e),l=Gr(-o*r-c*i,e);const u=d>s,f=l>s;if(u&&(d=e-d),f&&(l=e-l),d>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:d,k2neg:f,k2:l}}}},Yie);BigInt(0);WE.ProjectivePoint;function EL(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/))}function Ise(t){let e=t;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}BigInt(0);const Z4={},X4={};for(let t=0;t<16;t++){const e=t,n=t*16,r=t.toString(16).toLowerCase();X4[r]=e,X4[r.toUpperCase()]=e,Z4[r]=n,Z4[r.toUpperCase()]=n}function Ose(t){const e=t.length,n=new Uint8Array(e/2);for(let r=0;r<e;r+=2)n[r/2]=Z4[t[r]]+X4[t[r+1]];return n}Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));for(let t=0;t<=256*256-1;t++)BigInt(t);const qy=t=>{if(typeof t!="string")throw new Error(`hex argument type ${typeof t} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(t))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${t}`);const e=t.slice(2);return Ose(e.length%2===0?e:Ise(e))},Mse=t=>{if(!Number.isSafeInteger(t)||t<0)throw new Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`},Lp=t=>{const e=Mse(t);return qy(e)},Pse=t=>typeof t!="string"||EL(t)?t:`0x${t}`;BigInt("0xffffffffffffffff");BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");WE.CURVE.n;WE.CURVE.n/BigInt(2);BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");const kse="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";qy(kse);const Nse="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";qy(Nse);const Rse="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";qy(Rse);Uint8Array.from([128]);BigInt(-1);BigInt(0);BigInt(1);BigInt(2);BigInt(3);BigInt(7);BigInt(8);BigInt(27);BigInt(28);BigInt(31);BigInt(32);BigInt(64);BigInt(128);BigInt(255);BigInt(256);BigInt(96);BigInt(100);BigInt(160);BigInt(224);BigInt(7922816251426434e13);BigInt(1461501637330903e33);BigInt(2695994666715064e52);BigInt(1e9);Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));var yC;(function(t){t.String="string",t.Bytes="view",t.Number="number"})(yC||(yC={}));var mC;(function(t){t.String="string",t.Bytes="view",t.JSON="json"})(mC||(mC={}));var gC;(function(t){t[t.Number=0]="Number",t[t.BigInt=1]="BigInt",t[t.Uint8Array=2]="Uint8Array",t[t.PrefixedHexString=3]="PrefixedHexString"})(gC||(gC={}));var wC;(function(t){t[t.Deposit=0]="Deposit",t[t.Withdrawal=1]="Withdrawal",t[t.Consolidation=2]="Consolidation"})(wC||(wC={}));var Cd;(function(t){t[t.Version=0]="Version",t[t.Balance=1]="Balance",t[t.Nonce=2]="Nonce",t[t.CodeHash=3]="CodeHash",t[t.CodeSize=4]="CodeSize"})(Cd||(Cd={}));Lp(Cd.Version);Lp(Cd.Balance);Lp(Cd.Nonce);Lp(Cd.CodeHash);Lp(Cd.CodeSize);BigInt(256)**BigInt(31);class Dse extends wu{constructor({config:e={},state:n={}}){super(),re(this,"defaultConfig",{}),re(this,"defaultState",{}),re(this,"disabled",!1),re(this,"name","BaseController"),re(this,"initialConfig",void 0),re(this,"initialState",void 0),re(this,"internalConfig",this.defaultConfig),re(this,"internalState",this.defaultState),this.initialState=n,this.initialConfig=e}get config(){return this.internalConfig}get state(){return this.internalState}configure(e,n=!1,r=!0){if(r){this.internalConfig=n?e:Object.assign(this.internalConfig,e);for(const a in this.internalConfig)typeof this.internalConfig[a]<"u"&&(this[a]=this.internalConfig[a])}else for(const a in e)typeof this.internalConfig[a]<"u"&&(this.internalConfig[a]=e[a],this[a]=e[a])}update(e,n=!1){this.internalState=n?Q({},e):Q(Q({},this.internalState),e),this.emit("store",this.internalState)}initialize(){return this.internalState=this.defaultState,this.internalConfig=this.defaultConfig,this.configure(this.initialConfig),this.update(this.initialState),this}}const $se=()=>!0,Lse=["newListener","removeListener"],Bse=t=>!Lse.includes(t);function Fse(t,e){return typeof t.rawListeners<"u"?t.rawListeners(e):t.listeners(e)}function Use(t,e){let r={}.eventFilter||$se;if(typeof r=="string"&&r==="skipInternal"&&(r=Bse),typeof r!="function")throw new Error("createEventEmitterProxy - Invalid eventFilter");let a=t,i=o=>{if(a===o)return;const c=a;a=o,c.eventNames().filter(r).forEach(l=>{Fse(c,l).forEach(u=>{o.on(l,u)})}),c.removeAllListeners()};return new Proxy({},{get:(o,c)=>c==="setTarget"?i:a[c],set:(o,c,d)=>c==="setTarget"?(i=d,!0):(a[c]=d,!0),has:(o,c)=>c[0]==="_"?!1:c in a})}const jse={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},vC={POPUP:"popup",MODAL:"modal",AUTO_APPROVE:"auto-approve",DEFAULT:"default"};var Hse=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,og=Math.ceil,Ga=Math.floor,Kr="[BigNumber Error] ",EC=Kr+"Number primitive has more than 15 significant digits: ",_i=1e14,pt=14,cg=9007199254740991,dg=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],fc=1e7,p0=1e9;function _L(t){var e,n,r,a=T.prototype={constructor:T,toString:null,valueOf:null},i=new T(1),s=20,o=4,c=-7,d=21,l=-1e7,u=1e7,f=!1,p=1,h=0,b={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},v="0123456789abcdefghijklmnopqrstuvwxyz",m=!0;function T(I,P){var $,M,y,E,C,g,x,O,S=this;if(!(S instanceof T))return new T(I,P);if(P==null){if(I&&I._isBigNumber===!0){S.s=I.s,!I.c||I.e>u?S.c=S.e=null:I.e<l?S.c=[S.e=0]:(S.e=I.e,S.c=I.c.slice());return}if((g=typeof I=="number")&&I*0==0){if(S.s=1/I<0?(I=-I,-1):1,I===~~I){for(E=0,C=I;C>=10;C/=10,E++);E>u?S.c=S.e=null:(S.e=E,S.c=[I]);return}O=String(I)}else{if(!Hse.test(O=String(I)))return r(S,O,g);S.s=O.charCodeAt(0)==45?(O=O.slice(1),-1):1}(E=O.indexOf("."))>-1&&(O=O.replace(".","")),(C=O.search(/e/i))>0?(E<0&&(E=C),E+=+O.slice(C+1),O=O.substring(0,C)):E<0&&(E=O.length)}else{if(kn(P,2,v.length,"Base"),P==10&&m)return S=new T(I),B(S,s+S.e+1,o);if(O=String(I),g=typeof I=="number"){if(I*0!=0)return r(S,O,g,P);if(S.s=1/I<0?(O=O.slice(1),-1):1,T.DEBUG&&O.replace(/^0\.0*|\./,"").length>15)throw Error(EC+I)}else S.s=O.charCodeAt(0)===45?(O=O.slice(1),-1):1;for($=v.slice(0,P),E=C=0,x=O.length;C<x;C++)if($.indexOf(M=O.charAt(C))<0){if(M=="."){if(C>E){E=x;continue}}else if(!y&&(O==O.toUpperCase()&&(O=O.toLowerCase())||O==O.toLowerCase()&&(O=O.toUpperCase()))){y=!0,C=-1,E=0;continue}return r(S,String(I),g,P)}g=!1,O=n(O,P,10,S.s),(E=O.indexOf("."))>-1?O=O.replace(".",""):E=O.length}for(C=0;O.charCodeAt(C)===48;C++);for(x=O.length;O.charCodeAt(--x)===48;);if(O=O.slice(C,++x)){if(x-=C,g&&T.DEBUG&&x>15&&(I>cg||I!==Ga(I)))throw Error(EC+S.s*I);if((E=E-C-1)>u)S.c=S.e=null;else if(E<l)S.c=[S.e=0];else{if(S.e=E,S.c=[],C=(E+1)%pt,E<0&&(C+=pt),C<x){for(C&&S.c.push(+O.slice(0,C)),x-=pt;C<x;)S.c.push(+O.slice(C,C+=pt));C=pt-(O=O.slice(C)).length}else C-=x;for(;C--;O+="0");S.c.push(+O)}}else S.c=[S.e=0]}T.clone=_L,T.ROUND_UP=0,T.ROUND_DOWN=1,T.ROUND_CEIL=2,T.ROUND_FLOOR=3,T.ROUND_HALF_UP=4,T.ROUND_HALF_DOWN=5,T.ROUND_HALF_EVEN=6,T.ROUND_HALF_CEIL=7,T.ROUND_HALF_FLOOR=8,T.EUCLID=9,T.config=T.set=function(I){var P,$;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(P="DECIMAL_PLACES")&&($=I[P],kn($,0,p0,P),s=$),I.hasOwnProperty(P="ROUNDING_MODE")&&($=I[P],kn($,0,8,P),o=$),I.hasOwnProperty(P="EXPONENTIAL_AT")&&($=I[P],$&&$.pop?(kn($[0],-p0,0,P),kn($[1],0,p0,P),c=$[0],d=$[1]):(kn($,-p0,p0,P),c=-(d=$<0?-$:$))),I.hasOwnProperty(P="RANGE"))if($=I[P],$&&$.pop)kn($[0],-p0,-1,P),kn($[1],1,p0,P),l=$[0],u=$[1];else if(kn($,-p0,p0,P),$)l=-(u=$<0?-$:$);else throw Error(Kr+P+" cannot be zero: "+$);if(I.hasOwnProperty(P="CRYPTO"))if($=I[P],$===!!$)if($)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=$;else throw f=!$,Error(Kr+"crypto unavailable");else f=$;else throw Error(Kr+P+" not true or false: "+$);if(I.hasOwnProperty(P="MODULO_MODE")&&($=I[P],kn($,0,9,P),p=$),I.hasOwnProperty(P="POW_PRECISION")&&($=I[P],kn($,0,p0,P),h=$),I.hasOwnProperty(P="FORMAT"))if($=I[P],typeof $=="object")b=$;else throw Error(Kr+P+" not an object: "+$);if(I.hasOwnProperty(P="ALPHABET"))if($=I[P],typeof $=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test($))m=$.slice(0,10)=="0123456789",v=$;else throw Error(Kr+P+" invalid: "+$)}else throw Error(Kr+"Object expected: "+I);return{DECIMAL_PLACES:s,ROUNDING_MODE:o,EXPONENTIAL_AT:[c,d],RANGE:[l,u],CRYPTO:f,MODULO_MODE:p,POW_PRECISION:h,FORMAT:b,ALPHABET:v}},T.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!T.DEBUG)return!0;var P,$,M=I.c,y=I.e,E=I.s;e:if({}.toString.call(M)=="[object Array]"){if((E===1||E===-1)&&y>=-p0&&y<=p0&&y===Ga(y)){if(M[0]===0){if(y===0&&M.length===1)return!0;break e}if(P=(y+1)%pt,P<1&&(P+=pt),String(M[0]).length==P){for(P=0;P<M.length;P++)if($=M[P],$<0||$>=_i||$!==Ga($))break e;if($!==0)return!0}}}else if(M===null&&y===null&&(E===null||E===1||E===-1))return!0;throw Error(Kr+"Invalid BigNumber: "+I)},T.maximum=T.max=function(){return N(arguments,-1)},T.minimum=T.min=function(){return N(arguments,1)},T.random=function(){var I=9007199254740992,P=Math.random()*I&2097151?function(){return Ga(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function($){var M,y,E,C,g,x=0,O=[],S=new T(i);if($==null?$=s:kn($,0,p0),C=og($/pt),f)if(crypto.getRandomValues){for(M=crypto.getRandomValues(new Uint32Array(C*=2));x<C;)g=M[x]*131072+(M[x+1]>>>11),g>=9e15?(y=crypto.getRandomValues(new Uint32Array(2)),M[x]=y[0],M[x+1]=y[1]):(O.push(g%1e14),x+=2);x=C/2}else if(crypto.randomBytes){for(M=crypto.randomBytes(C*=7);x<C;)g=(M[x]&31)*281474976710656+M[x+1]*1099511627776+M[x+2]*4294967296+M[x+3]*16777216+(M[x+4]<<16)+(M[x+5]<<8)+M[x+6],g>=9e15?crypto.randomBytes(7).copy(M,x):(O.push(g%1e14),x+=7);x=C/7}else throw f=!1,Error(Kr+"crypto unavailable");if(!f)for(;x<C;)g=P(),g<9e15&&(O[x++]=g%1e14);for(C=O[--x],$%=pt,C&&$&&(g=dg[pt-$],O[x]=Ga(C/g)*g);O[x]===0;O.pop(),x--);if(x<0)O=[E=0];else{for(E=-1;O[0]===0;O.splice(0,1),E-=pt);for(x=1,g=O[0];g>=10;g/=10,x++);x<pt&&(E-=pt-x)}return S.e=E,S.c=O,S}}(),T.sum=function(){for(var I=1,P=arguments,$=new T(P[0]);I<P.length;)$=$.plus(P[I++]);return $},n=function(){var I="0123456789";function P($,M,y,E){for(var C,g=[0],x,O=0,S=$.length;O<S;){for(x=g.length;x--;g[x]*=M);for(g[0]+=E.indexOf($.charAt(O++)),C=0;C<g.length;C++)g[C]>y-1&&(g[C+1]==null&&(g[C+1]=0),g[C+1]+=g[C]/y|0,g[C]%=y)}return g.reverse()}return function($,M,y,E,C){var g,x,O,S,w,_,k,L,D=$.indexOf("."),U=s,j=o;for(D>=0&&(S=h,h=0,$=$.replace(".",""),L=new T(M),_=L.pow($.length-D),h=S,L.c=P(ao(za(_.c),_.e,"0"),10,y,I),L.e=L.c.length),k=P($,M,y,C?(g=v,I):(g=I,v)),O=S=k.length;k[--S]==0;k.pop());if(!k[0])return g.charAt(0);if(D<0?--O:(_.c=k,_.e=O,_.s=E,_=e(_,L,U,j,y),k=_.c,w=_.r,O=_.e),x=O+U+1,D=k[x],S=y/2,w=w||x<0||k[x+1]!=null,w=j<4?(D!=null||w)&&(j==0||j==(_.s<0?3:2)):D>S||D==S&&(j==4||w||j==6&&k[x-1]&1||j==(_.s<0?8:7)),x<1||!k[0])$=w?ao(g.charAt(1),-U,g.charAt(0)):g.charAt(0);else{if(k.length=x,w)for(--y;++k[--x]>y;)k[x]=0,x||(++O,k=[1].concat(k));for(S=k.length;!k[--S];);for(D=0,$="";D<=S;$+=g.charAt(k[D++]));$=ao($,O,g.charAt(0))}return $}}(),e=function(){function I(M,y,E){var C,g,x,O,S=0,w=M.length,_=y%fc,k=y/fc|0;for(M=M.slice();w--;)x=M[w]%fc,O=M[w]/fc|0,C=k*x+O*_,g=_*x+C%fc*fc+S,S=(g/E|0)+(C/fc|0)+k*O,M[w]=g%E;return S&&(M=[S].concat(M)),M}function P(M,y,E,C){var g,x;if(E!=C)x=E>C?1:-1;else for(g=x=0;g<E;g++)if(M[g]!=y[g]){x=M[g]>y[g]?1:-1;break}return x}function $(M,y,E,C){for(var g=0;E--;)M[E]-=g,g=M[E]<y[E]?1:0,M[E]=g*C+M[E]-y[E];for(;!M[0]&&M.length>1;M.splice(0,1));}return function(M,y,E,C,g){var x,O,S,w,_,k,L,D,U,j,H,W,K,q,V,G,J,z=M.s==y.s?1:-1,Y=M.c,X=y.c;if(!Y||!Y[0]||!X||!X[0])return new T(!M.s||!y.s||(Y?X&&Y[0]==X[0]:!X)?NaN:Y&&Y[0]==0||!X?z*0:z/0);for(D=new T(z),U=D.c=[],O=M.e-y.e,z=E+O+1,g||(g=_i,O=Ya(M.e/pt)-Ya(y.e/pt),z=z/pt|0),S=0;X[S]==(Y[S]||0);S++);if(X[S]>(Y[S]||0)&&O--,z<0)U.push(1),w=!0;else{for(q=Y.length,G=X.length,S=0,z+=2,_=Ga(g/(X[0]+1)),_>1&&(X=I(X,_,g),Y=I(Y,_,g),G=X.length,q=Y.length),K=G,j=Y.slice(0,G),H=j.length;H<G;j[H++]=0);J=X.slice(),J=[0].concat(J),V=X[0],X[1]>=g/2&&V++;do{if(_=0,x=P(X,j,G,H),x<0){if(W=j[0],G!=H&&(W=W*g+(j[1]||0)),_=Ga(W/V),_>1)for(_>=g&&(_=g-1),k=I(X,_,g),L=k.length,H=j.length;P(k,j,L,H)==1;)_--,$(k,G<L?J:X,L,g),L=k.length,x=1;else _==0&&(x=_=1),k=X.slice(),L=k.length;if(L<H&&(k=[0].concat(k)),$(j,k,H,g),H=j.length,x==-1)for(;P(X,j,G,H)<1;)_++,$(j,G<H?J:X,H,g),H=j.length}else x===0&&(_++,j=[0]);U[S++]=_,j[0]?j[H++]=Y[K]||0:(j=[Y[K]],H=1)}while((K++<q||j[0]!=null)&&z--);w=j[0]!=null,U[0]||U.splice(0,1)}if(g==_i){for(S=1,z=U[0];z>=10;z/=10,S++);B(D,E+(D.e=S+O*pt-1)+1,C,w)}else D.e=O,D.r=+w;return D}}();function A(I,P,$,M){var y,E,C,g,x;if($==null?$=o:kn($,0,8),!I.c)return I.toString();if(y=I.c[0],C=I.e,P==null)x=za(I.c),x=M==1||M==2&&(C<=c||C>=d)?Bh(x,C):ao(x,C,"0");else if(I=B(new T(I),P,$),E=I.e,x=za(I.c),g=x.length,M==1||M==2&&(P<=E||E<=c)){for(;g<P;x+="0",g++);x=Bh(x,E)}else if(P-=C,x=ao(x,E,"0"),E+1>g){if(--P>0)for(x+=".";P--;x+="0");}else if(P+=E-g,P>0)for(E+1==g&&(x+=".");P--;x+="0");return I.s<0&&y?"-"+x:x}function N(I,P){for(var $,M,y=1,E=new T(I[0]);y<I.length;y++)M=new T(I[y]),(!M.s||($=A1(E,M))===P||$===0&&E.s===P)&&(E=M);return E}function R(I,P,$){for(var M=1,y=P.length;!P[--y];P.pop());for(y=P[0];y>=10;y/=10,M++);return($=M+$*pt-1)>u?I.c=I.e=null:$<l?I.c=[I.e=0]:(I.e=$,I.c=P),I}r=function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,$=/^\.([^.]+)$/,M=/^-?(Infinity|NaN)$/,y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(E,C,g,x){var O,S=g?C:C.replace(y,"");if(M.test(S))E.s=isNaN(S)?null:S<0?-1:1;else{if(!g&&(S=S.replace(I,function(w,_,k){return O=(k=k.toLowerCase())=="x"?16:k=="b"?2:8,!x||x==O?_:w}),x&&(O=x,S=S.replace(P,"$1").replace($,"0.$1")),C!=S))return new T(S,O);if(T.DEBUG)throw Error(Kr+"Not a"+(x?" base "+x:"")+" number: "+C);E.s=null}E.c=E.e=null}}();function B(I,P,$,M){var y,E,C,g,x,O,S,w=I.c,_=dg;if(w){e:{for(y=1,g=w[0];g>=10;g/=10,y++);if(E=P-y,E<0)E+=pt,C=P,x=w[O=0],S=Ga(x/_[y-C-1]%10);else if(O=og((E+1)/pt),O>=w.length)if(M){for(;w.length<=O;w.push(0));x=S=0,y=1,E%=pt,C=E-pt+1}else break e;else{for(x=g=w[O],y=1;g>=10;g/=10,y++);E%=pt,C=E-pt+y,S=C<0?0:Ga(x/_[y-C-1]%10)}if(M=M||P<0||w[O+1]!=null||(C<0?x:x%_[y-C-1]),M=$<4?(S||M)&&($==0||$==(I.s<0?3:2)):S>5||S==5&&($==4||M||$==6&&(E>0?C>0?x/_[y-C]:0:w[O-1])%10&1||$==(I.s<0?8:7)),P<1||!w[0])return w.length=0,M?(P-=I.e+1,w[0]=_[(pt-P%pt)%pt],I.e=-P||0):w[0]=I.e=0,I;if(E==0?(w.length=O,g=1,O--):(w.length=O+1,g=_[pt-E],w[O]=C>0?Ga(x/_[y-C]%_[C])*g:0),M)for(;;)if(O==0){for(E=1,C=w[0];C>=10;C/=10,E++);for(C=w[0]+=g,g=1;C>=10;C/=10,g++);E!=g&&(I.e++,w[0]==_i&&(w[0]=1));break}else{if(w[O]+=g,w[O]!=_i)break;w[O--]=0,g=1}for(E=w.length;w[--E]===0;w.pop());}I.e>u?I.c=I.e=null:I.e<l&&(I.c=[I.e=0])}return I}function F(I){var P,$=I.e;return $===null?I.toString():(P=za(I.c),P=$<=c||$>=d?Bh(P,$):ao(P,$,"0"),I.s<0?"-"+P:P)}return a.absoluteValue=a.abs=function(){var I=new T(this);return I.s<0&&(I.s=1),I},a.comparedTo=function(I,P){return A1(this,new T(I,P))},a.decimalPlaces=a.dp=function(I,P){var $,M,y,E=this;if(I!=null)return kn(I,0,p0),P==null?P=o:kn(P,0,8),B(new T(E),I+E.e+1,P);if(!($=E.c))return null;if(M=((y=$.length-1)-Ya(this.e/pt))*pt,y=$[y])for(;y%10==0;y/=10,M--);return M<0&&(M=0),M},a.dividedBy=a.div=function(I,P){return e(this,new T(I,P),s,o)},a.dividedToIntegerBy=a.idiv=function(I,P){return e(this,new T(I,P),0,1)},a.exponentiatedBy=a.pow=function(I,P){var $,M,y,E,C,g,x,O,S,w=this;if(I=new T(I),I.c&&!I.isInteger())throw Error(Kr+"Exponent not an integer: "+F(I));if(P!=null&&(P=new T(P)),g=I.e>14,!w.c||!w.c[0]||w.c[0]==1&&!w.e&&w.c.length==1||!I.c||!I.c[0])return S=new T(Math.pow(+F(w),g?I.s*(2-Lh(I)):+F(I))),P?S.mod(P):S;if(x=I.s<0,P){if(P.c?!P.c[0]:!P.s)return new T(NaN);M=!x&&w.isInteger()&&P.isInteger(),M&&(w=w.mod(P))}else{if(I.e>9&&(w.e>0||w.e<-1||(w.e==0?w.c[0]>1||g&&w.c[1]>=24e7:w.c[0]<8e13||g&&w.c[0]<=9999975e7)))return E=w.s<0&&Lh(I)?-0:0,w.e>-1&&(E=1/E),new T(x?1/E:E);h&&(E=og(h/pt+2))}for(g?($=new T(.5),x&&(I.s=1),O=Lh(I)):(y=Math.abs(+F(I)),O=y%2),S=new T(i);;){if(O){if(S=S.times(w),!S.c)break;E?S.c.length>E&&(S.c.length=E):M&&(S=S.mod(P))}if(y){if(y=Ga(y/2),y===0)break;O=y%2}else if(I=I.times($),B(I,I.e+1,1),I.e>14)O=Lh(I);else{if(y=+F(I),y===0)break;O=y%2}w=w.times(w),E?w.c&&w.c.length>E&&(w.c.length=E):M&&(w=w.mod(P))}return M?S:(x&&(S=i.div(S)),P?S.mod(P):E?B(S,h,o,C):S)},a.integerValue=function(I){var P=new T(this);return I==null?I=o:kn(I,0,8),B(P,P.e+1,I)},a.isEqualTo=a.eq=function(I,P){return A1(this,new T(I,P))===0},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(I,P){return A1(this,new T(I,P))>0},a.isGreaterThanOrEqualTo=a.gte=function(I,P){return(P=A1(this,new T(I,P)))===1||P===0},a.isInteger=function(){return!!this.c&&Ya(this.e/pt)>this.c.length-2},a.isLessThan=a.lt=function(I,P){return A1(this,new T(I,P))<0},a.isLessThanOrEqualTo=a.lte=function(I,P){return(P=A1(this,new T(I,P)))===-1||P===0},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&this.c[0]==0},a.minus=function(I,P){var $,M,y,E,C=this,g=C.s;if(I=new T(I,P),P=I.s,!g||!P)return new T(NaN);if(g!=P)return I.s=-P,C.plus(I);var x=C.e/pt,O=I.e/pt,S=C.c,w=I.c;if(!x||!O){if(!S||!w)return S?(I.s=-P,I):new T(w?C:NaN);if(!S[0]||!w[0])return w[0]?(I.s=-P,I):new T(S[0]?C:o==3?-0:0)}if(x=Ya(x),O=Ya(O),S=S.slice(),g=x-O){for((E=g<0)?(g=-g,y=S):(O=x,y=w),y.reverse(),P=g;P--;y.push(0));y.reverse()}else for(M=(E=(g=S.length)<(P=w.length))?g:P,g=P=0;P<M;P++)if(S[P]!=w[P]){E=S[P]<w[P];break}if(E&&(y=S,S=w,w=y,I.s=-I.s),P=(M=w.length)-($=S.length),P>0)for(;P--;S[$++]=0);for(P=_i-1;M>g;){if(S[--M]<w[M]){for($=M;$&&!S[--$];S[$]=P);--S[$],S[M]+=_i}S[M]-=w[M]}for(;S[0]==0;S.splice(0,1),--O);return S[0]?R(I,S,O):(I.s=o==3?-1:1,I.c=[I.e=0],I)},a.modulo=a.mod=function(I,P){var $,M,y=this;return I=new T(I,P),!y.c||!I.s||I.c&&!I.c[0]?new T(NaN):!I.c||y.c&&!y.c[0]?new T(y):(p==9?(M=I.s,I.s=1,$=e(y,I,0,3),I.s=M,$.s*=M):$=e(y,I,0,p),I=y.minus($.times(I)),!I.c[0]&&p==1&&(I.s=y.s),I)},a.multipliedBy=a.times=function(I,P){var $,M,y,E,C,g,x,O,S,w,_,k,L,D,U,j=this,H=j.c,W=(I=new T(I,P)).c;if(!H||!W||!H[0]||!W[0])return!j.s||!I.s||H&&!H[0]&&!W||W&&!W[0]&&!H?I.c=I.e=I.s=null:(I.s*=j.s,!H||!W?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(M=Ya(j.e/pt)+Ya(I.e/pt),I.s*=j.s,x=H.length,w=W.length,x<w&&(L=H,H=W,W=L,y=x,x=w,w=y),y=x+w,L=[];y--;L.push(0));for(D=_i,U=fc,y=w;--y>=0;){for($=0,_=W[y]%U,k=W[y]/U|0,C=x,E=y+C;E>y;)O=H[--C]%U,S=H[C]/U|0,g=k*O+S*_,O=_*O+g%U*U+L[E]+$,$=(O/D|0)+(g/U|0)+k*S,L[E--]=O%D;L[E]=$}return $?++M:L.splice(0,1),R(I,L,M)},a.negated=function(){var I=new T(this);return I.s=-I.s||null,I},a.plus=function(I,P){var $,M=this,y=M.s;if(I=new T(I,P),P=I.s,!y||!P)return new T(NaN);if(y!=P)return I.s=-P,M.minus(I);var E=M.e/pt,C=I.e/pt,g=M.c,x=I.c;if(!E||!C){if(!g||!x)return new T(y/0);if(!g[0]||!x[0])return x[0]?I:new T(g[0]?M:y*0)}if(E=Ya(E),C=Ya(C),g=g.slice(),y=E-C){for(y>0?(C=E,$=x):(y=-y,$=g),$.reverse();y--;$.push(0));$.reverse()}for(y=g.length,P=x.length,y-P<0&&($=x,x=g,g=$,P=y),y=0;P;)y=(g[--P]=g[P]+x[P]+y)/_i|0,g[P]=_i===g[P]?0:g[P]%_i;return y&&(g=[y].concat(g),++C),R(I,g,C)},a.precision=a.sd=function(I,P){var $,M,y,E=this;if(I!=null&&I!==!!I)return kn(I,1,p0),P==null?P=o:kn(P,0,8),B(new T(E),I,P);if(!($=E.c))return null;if(y=$.length-1,M=y*pt+1,y=$[y]){for(;y%10==0;y/=10,M--);for(y=$[0];y>=10;y/=10,M++);}return I&&E.e+1>M&&(M=E.e+1),M},a.shiftedBy=function(I){return kn(I,-cg,cg),this.times("1e"+I)},a.squareRoot=a.sqrt=function(){var I,P,$,M,y,E=this,C=E.c,g=E.s,x=E.e,O=s+4,S=new T("0.5");if(g!==1||!C||!C[0])return new T(!g||g<0&&(!C||C[0])?NaN:C?E:1/0);if(g=Math.sqrt(+F(E)),g==0||g==1/0?(P=za(C),(P.length+x)%2==0&&(P+="0"),g=Math.sqrt(+P),x=Ya((x+1)/2)-(x<0||x%2),g==1/0?P="5e"+x:(P=g.toExponential(),P=P.slice(0,P.indexOf("e")+1)+x),$=new T(P)):$=new T(g+""),$.c[0]){for(x=$.e,g=x+O,g<3&&(g=0);;)if(y=$,$=S.times(y.plus(e(E,y,O,1))),za(y.c).slice(0,g)===(P=za($.c)).slice(0,g))if($.e<x&&--g,P=P.slice(g-3,g+1),P=="9999"||!M&&P=="4999"){if(!M&&(B(y,y.e+s+2,0),y.times(y).eq(E))){$=y;break}O+=4,g+=4,M=1}else{(!+P||!+P.slice(1)&&P.charAt(0)=="5")&&(B($,$.e+s+2,1),I=!$.times($).eq(E));break}}return B($,$.e+s+1,o,I)},a.toExponential=function(I,P){return I!=null&&(kn(I,0,p0),I++),A(this,I,P,1)},a.toFixed=function(I,P){return I!=null&&(kn(I,0,p0),I=I+this.e+1),A(this,I,P)},a.toFormat=function(I,P,$){var M,y=this;if($==null)I!=null&&P&&typeof P=="object"?($=P,P=null):I&&typeof I=="object"?($=I,I=P=null):$=b;else if(typeof $!="object")throw Error(Kr+"Argument not an object: "+$);if(M=y.toFixed(I,P),y.c){var E,C=M.split("."),g=+$.groupSize,x=+$.secondaryGroupSize,O=$.groupSeparator||"",S=C[0],w=C[1],_=y.s<0,k=_?S.slice(1):S,L=k.length;if(x&&(E=g,g=x,x=E,L-=E),g>0&&L>0){for(E=L%g||g,S=k.substr(0,E);E<L;E+=g)S+=O+k.substr(E,g);x>0&&(S+=O+k.slice(E)),_&&(S="-"+S)}M=w?S+($.decimalSeparator||"")+((x=+$.fractionGroupSize)?w.replace(new RegExp("\\d{"+x+"}\\B","g"),"$&"+($.fractionGroupSeparator||"")):w):S}return($.prefix||"")+M+($.suffix||"")},a.toFraction=function(I){var P,$,M,y,E,C,g,x,O,S,w,_,k=this,L=k.c;if(I!=null&&(g=new T(I),!g.isInteger()&&(g.c||g.s!==1)||g.lt(i)))throw Error(Kr+"Argument "+(g.isInteger()?"out of range: ":"not an integer: ")+F(g));if(!L)return new T(k);for(P=new T(i),O=$=new T(i),M=x=new T(i),_=za(L),E=P.e=_.length-k.e-1,P.c[0]=dg[(C=E%pt)<0?pt+C:C],I=!I||g.comparedTo(P)>0?E>0?P:O:g,C=u,u=1/0,g=new T(_),x.c[0]=0;S=e(g,P,0,1),y=$.plus(S.times(M)),y.comparedTo(I)!=1;)$=M,M=y,O=x.plus(S.times(y=O)),x=y,P=g.minus(S.times(y=P)),g=y;return y=e(I.minus($),M,0,1),x=x.plus(y.times(O)),$=$.plus(y.times(M)),x.s=O.s=k.s,E=E*2,w=e(O,M,E,o).minus(k).abs().comparedTo(e(x,$,E,o).minus(k).abs())<1?[O,M]:[x,$],u=C,w},a.toNumber=function(){return+F(this)},a.toPrecision=function(I,P){return I!=null&&kn(I,1,p0),A(this,I,P,2)},a.toString=function(I){var P,$=this,M=$.s,y=$.e;return y===null?M?(P="Infinity",M<0&&(P="-"+P)):P="NaN":(I==null?P=y<=c||y>=d?Bh(za($.c),y):ao(za($.c),y,"0"):I===10&&m?($=B(new T($),s+y+1,o),P=ao(za($.c),$.e,"0")):(kn(I,2,v.length,"Base"),P=n(ao(za($.c),y,"0"),10,I,M,!0)),M<0&&$.c[0]&&(P="-"+P)),P},a.valueOf=a.toJSON=function(){return F(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,t!=null&&T.set(t),T}function Ya(t){var e=t|0;return t>0||t===e?e:e-1}function za(t){for(var e,n,r=1,a=t.length,i=t[0]+"";r<a;){for(e=t[r++]+"",n=pt-e.length;n--;e="0"+e);i+=e}for(a=i.length;i.charCodeAt(--a)===48;);return i.slice(0,a+1||1)}function A1(t,e){var n,r,a=t.c,i=e.c,s=t.s,o=e.s,c=t.e,d=e.e;if(!s||!o)return null;if(n=a&&!a[0],r=i&&!i[0],n||r)return n?r?0:-o:s;if(s!=o)return s;if(n=s<0,r=c==d,!a||!i)return r?0:!a^n?1:-1;if(!r)return c>d^n?1:-1;for(o=(c=a.length)<(d=i.length)?c:d,s=0;s<o;s++)if(a[s]!=i[s])return a[s]>i[s]^n?1:-1;return c==d?0:c>d^n?1:-1}function kn(t,e,n,r){if(t<e||t>n||t!==Ga(t))throw Error(Kr+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function Lh(t){var e=t.c.length-1;return Ya(t.e/pt)==e&&t.c[e]%2!=0}function Bh(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function ao(t,e,n){var r,a;if(e<0){for(a=n+".";++e;a+=n);t=a+t}else if(r=t.length,++e>r){for(a=n,e-=r;--e;a+=n);t+=a}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}_L();const zse={ETH_SEND_RAW_TRANSACTION:"eth_sendRawTransaction",ETH_SEND_USER_OPERATION:"eth_sendUserOperation",ETH_SPONSOR_USER_OPERATION:"pm_sponsorUserOperation",SEND_TRANSACTION:"solana_sendTransaction"},_C={JRPC_REQUEST_COMPLETED:"JRPC Request Completed",JRPC_REQUEST_FAILED:"JRPC Request Failed"},TC={INTERNAL:"internal",NETWORK:"network"},qse={"0x65":"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","0x66":"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","0x67":"EtWTRABZaYq6iMfeYKouRu166VU2xqa1"},Qe={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",OTHER:"other"},TL=t=>{try{const e=t==null?void 0:t.code;return{error_message:t instanceof Error?t.message:(t==null?void 0:t.message)||(t==null?void 0:t.toString()),error_code:e}}catch{return{error_message:"Unknown error",error_code:void 0}}},Kse=t=>{try{return new URL(t).hostname}catch{return""}},Vse=t=>{if(t)return t.chainNamespace===Qe.EIP155?`${t.chainNamespace}:${parseInt(t.chainId,16)}`:t.chainNamespace===Qe.SOLANA?`${t.chainNamespace}:${qse[t.chainId]}`:`${t.chainNamespace}:${t.chainId}`},Wse=["Gateway timeout","ETIMEDOUT","failed to parse response body","Failed to fetch"];function Gse(t){switch(t.status){case 405:throw Ut.methodNotFound();case 418:throw Ut.internal({message:"Request is being rate limited.",data:{cause:t}});case 503:case 504:throw Ut.internal({message:"Gateway timeout. The request took too long to process.This can happen when querying over too wide a block range.",data:{cause:t}})}}function Yse(t){return new Promise(e=>{setTimeout(e,t)})}function Jse(t,e){if(t.status!==200)throw Ut.internal({message:`Non-200 status code: '${t.status}'`,data:e});if(e.error){var n;throw Ut.internal({data:e.error,message:(n=e.error)===null||n===void 0?void 0:n.message})}return e.result}function Zse({req:t,rpcTarget:e,originHttpHeaderKey:n}){const r=new URL(e),a={id:t.id,jsonrpc:t.jsonrpc,method:t.method,params:t.params},i=t.origin,s=JSON.stringify(a),o={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:s};return n&&i&&(o.headers[n]=i),{fetchUrl:r.href,fetchParams:o}}function GE({rpcTarget:t,originHttpHeaderKey:e,analytics:n,providerConfig:r}){return Qt(async(a,i,s)=>{const{fetchUrl:o,fetchParams:c}=Zse({req:a,rpcTarget:t,originHttpHeaderKey:e}),d=5,l=1e3,u=Date.now(),f=!Object.values(zse).includes(a.method),p={chain_id:Vse(r),chain_rpc_target:Kse(o),method:a.method};for(let h=0;h<d;h++){try{const b=await fetch(o,c);Gse(b);const v=await b.json(),m=Jse(b,v);i.result=m,f||n==null||n.track(_C.JRPC_REQUEST_COMPLETED,Q(Q({request_type:TC.NETWORK},p),{},{duration:Date.now()-u}));return}catch(b){const v=(b.message||b).toString();if(!Wse.some(T=>v.includes(T)))throw f||n==null||n.track(_C.JRPC_REQUEST_FAILED,Q(Q({request_type:TC.NETWORK},p),{},{error_code:b==null?void 0:b.code,error_message:v,duration:Date.now()-u})),await xE(b)}await Yse(l)}})}function Zc(t){try{return structuredClone(t)}catch{return JSON.parse(JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString():n))}}class $f extends Error{}$f.prototype.name="InvalidTokenError";function Xse(t){return decodeURIComponent(atob(t).replace(/(.)/g,(e,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function Qse(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return Xse(e)}catch{return atob(e)}}function eoe(t,e){if(typeof t!="string")throw new $f("Invalid token specified: must be a string");e||(e={});const n=e.header===!0?0:1,r=t.split(".")[n];if(typeof r!="string")throw new $f(`Invalid token specified: missing part #${n+1}`);let a;try{a=Qse(r)}catch(i){throw new $f(`Invalid token specified: invalid base64 for part #${n+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new $f(`Invalid token specified: invalid json for part #${n+1} (${i.message})`)}}const xL="https://authjs.web3auth.io",YE=async(t,e)=>{const i={payload:t,header:{t:e==="solana"?"sip99":"eip191"},network:e==="solana"?"solana":"ethereum"},s=await Cy(`${xL}/siww/get`,i);if(!s.success)throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");return s.challenge},JE=async(t,e,n,r,a,i,s,o,c)=>{var d;const u=Q({signature:{s:e,t:t==="solana"?"sip99":"eip191"},message:n,issuer:r,audience:typeof window<"u"&&((d=window.location)===null||d===void 0?void 0:d.hostname)||"com://reactnative",timeout:a},{}),f=await Cy(`${xL}/siww/verify`,u,{headers:{client_id:i,wallet_provider:r,web3auth_network:s}});if(!f.success)throw Yi.error("Failed to authenticate user, ,message verification failed",f.error),new Error("Failed to authenticate user, ,message verification failed");return f.token},SL={EMBEDDED:"embedded",ALL:"all"},Z1={MODAL:"modal",EMBED:"embed"},Q4="Web3Auth-state",F6={MODAL:"modal",NO_MODAL:"no-modal"},E5={"0x65":"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","0x66":"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","0x67":"EtWTRABZaYq6iMfeYKouRu166VU2xqa1"};function toe(t,e){return JSON.parse(t,(n,r)=>{var a,i,s;let o=r;return((a=o)===null||a===void 0?void 0:a.__type)==="bigint"&&(o=BigInt(o.value)),((i=o)===null||i===void 0?void 0:i.__type)==="Map"&&(o=new Map(o.value)),(s=void 0)!==null&&s!==void 0?s:o})}const noe=t=>({getItem(e){if(typeof window>"u")return null;const n=roe(document.cookie,e);return n??null},setItem(e,n){if(typeof window>"u")return;let r=`${e}=${n};path=/;samesite=Lax`;t!=null&&t.expiry&&typeof t.expiry=="number"&&(r+=`; expires=${new Date(Date.now()+t.expiry).toUTCString()}`),r+="; secure",document.cookie=r},removeItem(e){typeof window>"u"||(document.cookie=`${e}=;max-age=-1;path=/`)}});function roe(t,e){const n=t.split("; ").find(r=>r.startsWith(`${e}=`));if(n)return n.substring(e.length+1)}function ew(t,e,n){e.split&&(e=e.split("."));for(var r=0,a=e.length,i=t,s,o;r<a&&(o=""+e[r++],!(o==="__proto__"||o==="constructor"||o==="prototype"));)i=i[o]=r===a?n:typeof(s=i[o])==typeof e?s:e[r]*0!==0||~(""+e[r]).indexOf(".")?{}:[]}var aoe=function(t,e){return Object.keys(t).filter(function(n){return e(n,t[n])}).reduce(function(n,r){return n[r]=t[r],n},{})},Id=function(t){sa(e,t);function e(n,r){var a=t.call(this,"".concat(n," ").concat(r))||this;return a.field=n,a}return e}(Error);function p1(t){return typeof t=="string"}function tw(t){return typeof t=="number"}function f6(t){return typeof t=="function"}function ioe(t){return t!=null}function $i(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()==="object"}var ZE="is not a string",XE="is not an object",soe="is nil";function ooe(t){if(!ioe(t))throw new Id("Event",soe);if(typeof t!="object")throw new Id("Event",XE)}function coe(t){if(!p1(t.type))throw new Id(".type",ZE)}function doe(t){if(!p1(t.event))throw new Id(".event",ZE)}function loe(t){if(!$i(t.properties))throw new Id(".properties",XE)}function uoe(t){if(!$i(t.traits))throw new Id(".traits",XE)}function foe(t){if(!p1(t.messageId))throw new Id(".messageId",ZE)}function poe(t){ooe(t),coe(t),foe(t),t.type==="track"&&(doe(t),loe(t)),["group","identify"].includes(t.type)&&uoe(t)}var hoe=function(){function t(e){var n,r;this.settings=e,this.createMessageId=e.createMessageId,this.onEventMethodCall=(n=e.onEventMethodCall)!==null&&n!==void 0?n:function(){},this.onFinishedEvent=(r=e.onFinishedEvent)!==null&&r!==void 0?r:function(){}}return t}(),boe=function(){function t(e){this.settings=new hoe(e)}return t.prototype.track=function(e,n,r,a){return this.settings.onEventMethodCall({type:"track",options:r}),this.normalize(Ie(Ie({},this.baseEvent()),{event:e,type:"track",properties:n??{},options:Ie({},r),integrations:Ie({},a)}))},t.prototype.page=function(e,n,r,a,i){var s;this.settings.onEventMethodCall({type:"page",options:a});var o={type:"page",properties:Ie({},r),options:Ie({},a),integrations:Ie({},i)};return e!==null&&(o.category=e,o.properties=(s=o.properties)!==null&&s!==void 0?s:{},o.properties.category=e),n!==null&&(o.name=n),this.normalize(Ie(Ie({},this.baseEvent()),o))},t.prototype.screen=function(e,n,r,a,i){this.settings.onEventMethodCall({type:"screen",options:a});var s={type:"screen",properties:Ie({},r),options:Ie({},a),integrations:Ie({},i)};return e!==null&&(s.category=e),n!==null&&(s.name=n),this.normalize(Ie(Ie({},this.baseEvent()),s))},t.prototype.identify=function(e,n,r,a){return this.settings.onEventMethodCall({type:"identify",options:r}),this.normalize(Ie(Ie({},this.baseEvent()),{type:"identify",userId:e,traits:n??{},options:Ie({},r),integrations:a}))},t.prototype.group=function(e,n,r,a){return this.settings.onEventMethodCall({type:"group",options:r}),this.normalize(Ie(Ie({},this.baseEvent()),{type:"group",traits:n??{},options:Ie({},r),integrations:Ie({},a),groupId:e}))},t.prototype.alias=function(e,n,r,a){this.settings.onEventMethodCall({type:"alias",options:r});var i={userId:e,type:"alias",options:Ie({},r),integrations:Ie({},a)};return n!==null&&(i.previousId=n),e===void 0?this.normalize(Ie(Ie({},i),this.baseEvent())):this.normalize(Ie(Ie({},this.baseEvent()),i))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(e){var n,r=["userId","anonymousId","timestamp","messageId"];delete e.integrations;var a=Object.keys(e),i=(n=e.context)!==null&&n!==void 0?n:{},s={};return a.forEach(function(o){o!=="context"&&(r.includes(o)?ew(s,o,e[o]):ew(i,o,e[o]))}),[i,s]},t.prototype.normalize=function(e){var n,r,a=Object.keys((n=e.integrations)!==null&&n!==void 0?n:{}).reduce(function(f,p){var h,b;return Ie(Ie({},f),(h={},h[p]=!!(!((b=e.integrations)===null||b===void 0)&&b[p]),h))},{});e.options=aoe(e.options||{},function(f,p){return p!==void 0});var i=Ie(Ie({},a),(r=e.options)===null||r===void 0?void 0:r.integrations),s=e.options?this.context(e.options):[],o=s[0],c=s[1],d=e.options,l=hR(e,["options"]),u=Ie(Ie(Ie(Ie({timestamp:new Date},l),{context:o,integrations:i}),c),{messageId:d.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(u),poe(u),u},t}();function yoe(t,e){return new Promise(function(n,r){var a=setTimeout(function(){r(Error("Promise timed out"))},e);t.then(function(i){return clearTimeout(a),n(i)}).catch(r)})}function moe(t){return new Promise(function(e){return setTimeout(e,t)})}function goe(t,e,n){var r=function(){try{return Promise.resolve(e(t))}catch(a){return Promise.reject(a)}};return moe(n).then(function(){return yoe(r(),1e3)}).catch(function(a){t==null||t.log("warn","Callback Error",{error:a}),t==null||t.stats.increment("callback_error")}).then(function(){return t})}var AL=function(){var t,e,n=!1,r=new Promise(function(a,i){t=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];n=!0,a.apply(void 0,s)},e=function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];n=!0,i.apply(void 0,s)}});return{resolve:t,reject:e,promise:r,isSettled:function(){return n}}},QE=function(){function t(e){var n;this.callbacks={},this.warned=!1,this.maxListeners=(n=e==null?void 0:e.maxListeners)!==null&&n!==void 0?n:10}return t.prototype.warnIfPossibleMemoryLeak=function(e){this.warned||this.maxListeners&&this.callbacks[e].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(e)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},t.prototype.on=function(e,n){return this.callbacks[e]?(this.callbacks[e].push(n),this.warnIfPossibleMemoryLeak(e)):this.callbacks[e]=[n],this},t.prototype.once=function(e,n){var r=this,a=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];r.off(e,a),n.apply(r,i)};return this.on(e,a),this},t.prototype.off=function(e,n){var r,a=(r=this.callbacks[e])!==null&&r!==void 0?r:[],i=a.filter(function(s){return s!==n});return this.callbacks[e]=i,this},t.prototype.emit=function(e){for(var n=this,r,a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];var s=(r=this.callbacks[e])!==null&&r!==void 0?r:[];return s.forEach(function(o){o.apply(n,a)}),this},t}();function woe(t){var e=Math.random()+1,n=t.minTimeout,r=n===void 0?500:n,a=t.factor,i=a===void 0?2:a,s=t.attempt,o=t.maxTimeout,c=o===void 0?1/0:o;return Math.min(e*r*Math.pow(i,s),c)}var CL="onRemoveFromFuture",e_=function(t){sa(e,t);function e(n,r,a){var i=t.call(this)||this;return i.future=[],i.maxAttempts=n,i.queue=r,i.seen=a??{},i}return e.prototype.push=function(){for(var n=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var i=r.map(function(s){var o=n.updateAttempts(s);return o>n.maxAttempts||n.includes(s)?!1:(n.queue.push(s),!0)});return this.queue=this.queue.sort(function(s,o){return n.getAttempts(s)-n.getAttempts(o)}),i},e.prototype.pushWithBackoff=function(n,r){var a=this;if(r===void 0&&(r=0),r==0&&this.getAttempts(n)===0)return this.push(n)[0];var i=this.updateAttempts(n);if(i>this.maxAttempts||this.includes(n))return!1;var s=woe({attempt:i-1});return r>0&&s<r&&(s=r),setTimeout(function(){a.queue.push(n),a.future=a.future.filter(function(o){return o.id!==n.id}),a.emit(CL)},s),this.future.push(n),!0},e.prototype.getAttempts=function(n){var r;return(r=this.seen[n.id])!==null&&r!==void 0?r:0},e.prototype.updateAttempts=function(n){return this.seen[n.id]=this.getAttempts(n)+1,this.getAttempts(n)},e.prototype.includes=function(n){return this.queue.includes(n)||this.future.includes(n)||!!this.queue.find(function(r){return r.id===n.id})||!!this.future.find(function(r){return r.id===n.id})},e.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(e.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),e}(QE),X1=256,Yb=[],Fh;for(;X1--;)Yb[X1]=(X1+256).toString(16).substring(1);function t_(){var t=0,e,n="";if(!Fh||X1+16>256){for(Fh=Array(t=256);t--;)Fh[t]=256*Math.random()|0;t=X1=0}for(;t<16;t++)e=Fh[X1+t],t==6?n+=Yb[e&15|64]:t==8?n+=Yb[e&63|128]:n+=Yb[e],t&1&&t>1&&t<11&&(n+="-");return X1++,n}var voe=function(){function t(){this._logs=[]}return t.prototype.log=function(e,n,r){var a=new Date;this._logs.push({level:e,message:n,time:a,extras:r})},Object.defineProperty(t.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),t.prototype.flush=function(){if(this.logs.length>1){var e=this._logs.reduce(function(n,r){var a,i,s,o=Ie(Ie({},r),{json:JSON.stringify(r.extras,null," "),extras:r.extras});delete o.time;var c=(s=(i=r.time)===null||i===void 0?void 0:i.toISOString())!==null&&s!==void 0?s:"";return n[c]&&(c="".concat(c,"-").concat(Math.random())),Ie(Ie({},n),(a={},a[c]=o,a))},{});console.table?console.table(e):console.log(e)}else this.logs.forEach(function(n){var r=n.level,a=n.message,i=n.extras;r==="info"||r==="debug"?console.log(a,i??""):console[r](a,i??"")});this._logs=[]},t}(),Eoe=function(t){var e={gauge:"g",counter:"c"};return e[t]},IL=function(){function t(){this.metrics=[]}return t.prototype.increment=function(e,n,r){n===void 0&&(n=1),this.metrics.push({metric:e,value:n,tags:r??[],type:"counter",timestamp:Date.now()})},t.prototype.gauge=function(e,n,r){this.metrics.push({metric:e,value:n,tags:r??[],type:"gauge",timestamp:Date.now()})},t.prototype.flush=function(){var e=this.metrics.map(function(n){return Ie(Ie({},n),{tags:n.tags.join(",")})});console.table?console.table(e):console.log(e),this.metrics=[]},t.prototype.serialize=function(){return this.metrics.map(function(e){return{m:e.metric,v:e.value,t:e.tags,k:Eoe(e.type),e:e.timestamp}})},t}(),_oe=function(t){sa(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.gauge=function(){},e.prototype.increment=function(){},e.prototype.flush=function(){},e.prototype.serialize=function(){return[]},e}(IL),U6=function(){function t(e){var n,r,a;this.retry=(n=e.retry)!==null&&n!==void 0?n:!0,this.type=(r=e.type)!==null&&r!==void 0?r:"plugin Error",this.reason=(a=e.reason)!==null&&a!==void 0?a:""}return t}(),V2=function(){function t(e,n,r,a){n===void 0&&(n=t_()),r===void 0&&(r=new _oe),a===void 0&&(a=new voe),this.attempts=0,this.event=e,this._id=n,this.logger=a,this.stats=r}return t.system=function(){},t.prototype.isSame=function(e){return e.id===this.id},t.prototype.cancel=function(e){throw e||new U6({reason:"Context Cancel"})},t.prototype.log=function(e,n,r){this.logger.log(e,n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),t.prototype.updateEvent=function(e,n){var r;if(e.split(".")[0]==="integrations"){var a=e.split(".")[1];if(((r=this.event.integrations)===null||r===void 0?void 0:r[a])===!1)return this.event}return ew(this.event,e,n),this.event},t.prototype.failedDelivery=function(){return this._failedDelivery},t.prototype.setFailedDelivery=function(e){this._failedDelivery=e},t.prototype.logs=function(){return this.logger.logs},t.prototype.flush=function(){this.logger.flush(),this.stats.flush()},t.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},t}();function Toe(t,e){var n={};return t.forEach(function(r){var a,i=void 0;{var s=r[e];i=typeof s!="string"?JSON.stringify(s):s}i!==void 0&&(n[i]=o0(o0([],(a=n[i])!==null&&a!==void 0?a:[],!0),[r],!1))}),n}var xoe=function(t){return typeof t=="object"&&t!==null&&"then"in t&&typeof t.then=="function"},Soe=function(){var t,e,n=0;return{done:function(){return t},run:function(r){var a=r();return xoe(a)&&(++n===1&&(t=new Promise(function(i){return e=i})),a.finally(function(){return--n===0&&e()})),a}}};function Aoe(t){return tt(this,void 0,void 0,function(){var e;return nt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t()];case 1:return[2,n.sent()];case 2:return e=n.sent(),[2,Promise.reject(e)];case 3:return[2]}})})}function Jf(t,e){t.log("debug","plugin",{plugin:e.name});var n=new Date().getTime(),r=e[t.event.type];if(r===void 0)return Promise.resolve(t);var a=Aoe(function(){return r.apply(e,[t])}).then(function(i){var s=new Date().getTime()-n;return i.stats.gauge("plugin_time",s,["plugin:".concat(e.name)]),i}).catch(function(i){if(i instanceof U6&&i.type==="middleware_cancellation")throw i;return i instanceof U6?(t.log("warn",i.type,{plugin:e.name,error:i}),i):(t.log("error","plugin Error",{plugin:e.name,error:i}),t.stats.increment("plugin_error",1,["plugin:".concat(e.name)]),i)});return a}function Coe(t,e){return Jf(t,e).then(function(n){if(n instanceof V2)return n;t.log("debug","Context canceled"),t.stats.increment("context_canceled"),t.cancel(n)})}var Ioe=function(t){sa(e,t);function e(n){var r=t.call(this)||this;return r.criticalTasks=Soe(),r.plugins=[],r.failedInitializations=[],r.flushing=!1,r.queue=n,r.queue.on(CL,function(){r.scheduleFlush(0)}),r}return e.prototype.register=function(n,r,a){return tt(this,void 0,void 0,function(){var i,s,o=this;return nt(this,function(c){switch(c.label){case 0:return this.plugins.push(r),i=function(d){o.failedInitializations.push(r.name),o.emit("initialization_failure",r),console.warn(r.name,d),n.log("warn","Failed to load destination",{plugin:r.name,error:d}),o.plugins=o.plugins.filter(function(l){return l!==r})},r.type==="destination"&&r.name!=="Segment.io"?(r.load(n,a).catch(i),[3,4]):[3,1];case 1:return c.trys.push([1,3,,4]),[4,r.load(n,a)];case 2:return c.sent(),[3,4];case 3:return s=c.sent(),i(s),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(n,r,a){return tt(this,void 0,void 0,function(){var i;return nt(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),r.unload?[4,Promise.resolve(r.unload(n,a))]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.plugins=this.plugins.filter(function(o){return o.name!==r.name}),[3,4];case 3:return i=s.sent(),n.log("warn","Failed to unload destination",{plugin:r.name,error:i}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(n){return tt(this,void 0,void 0,function(){var r;return nt(this,function(a){return n.log("debug","Dispatching"),n.stats.increment("message_dispatched"),this.queue.push(n),r=this.subscribeToDelivery(n),this.scheduleFlush(0),[2,r]})})},e.prototype.subscribeToDelivery=function(n){return tt(this,void 0,void 0,function(){var r=this;return nt(this,function(a){return[2,new Promise(function(i){var s=function(o,c){o.isSame(n)&&(r.off("flush",s),i(o))};r.on("flush",s)})]})})},e.prototype.dispatchSingle=function(n){return tt(this,void 0,void 0,function(){var r=this;return nt(this,function(a){return n.log("debug","Dispatching"),n.stats.increment("message_dispatched"),this.queue.updateAttempts(n),n.attempts=1,[2,this.deliver(n).catch(function(i){var s=r.enqueuRetry(i,n);return s?r.subscribeToDelivery(n):(n.setFailedDelivery({reason:i}),n)})]})})},e.prototype.isEmpty=function(){return this.queue.length===0},e.prototype.scheduleFlush=function(n){var r=this;n===void 0&&(n=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){r.flush().then(function(){setTimeout(function(){r.flushing=!1,r.queue.length&&r.scheduleFlush(0)},0)})},n))},e.prototype.deliver=function(n){return tt(this,void 0,void 0,function(){var r,a,i,s;return nt(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),r=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(n)];case 3:return n=o.sent(),a=Date.now()-r,this.emit("delivery_success",n),n.stats.gauge("delivered",a),n.log("debug","Delivered",n.event),[2,n];case 4:throw i=o.sent(),s=i,n.log("error","Failed to deliver",s),this.emit("delivery_failure",n,s),n.stats.increment("delivery_failed"),i;case 5:return[2]}})})},e.prototype.enqueuRetry=function(n,r){var a=!(n instanceof U6)||n.retry;return a?this.queue.pushWithBackoff(r):!1},e.prototype.flush=function(){return tt(this,void 0,void 0,function(){var n,r,a;return nt(this,function(i){switch(i.label){case 0:if(this.queue.length===0)return[2,[]];if(n=this.queue.pop(),!n)return[2,[]];n.attempts=this.queue.getAttempts(n),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.deliver(n)];case 2:return n=i.sent(),this.emit("flush",n,!0),[3,4];case 3:return r=i.sent(),a=this.enqueuRetry(r,n),a||(n.setFailedDelivery({reason:r}),this.emit("flush",n,!1)),[2,[]];case 4:return[2,[n]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(n){var r=this.plugins.filter(function(p){var h,b,v;if(p.type!=="destination"&&p.name!=="Segment.io")return!0;var m=void 0;return(h=p.alternativeNames)===null||h===void 0||h.forEach(function(T){n[T]!==void 0&&(m=n[T])}),(v=(b=n[p.name])!==null&&b!==void 0?b:m)!==null&&v!==void 0?v:(p.name==="Segment.io"?!0:n.All)!==!1}),a=Toe(r,"type"),i=a.before,s=i===void 0?[]:i,o=a.enrichment,c=o===void 0?[]:o,d=a.destination,l=d===void 0?[]:d,u=a.after,f=u===void 0?[]:u;return{before:s,enrichment:c,destinations:l,after:f}},e.prototype.flushOne=function(n){var r,a;return tt(this,void 0,void 0,function(){var i,s,o,c,d,l,h,u,f,p,h,b,v,m,T;return nt(this,function(A){switch(A.label){case 0:if(!this.isReady())throw new Error("Not ready");n.attempts>1&&this.emit("delivery_retry",n),i=this.availableExtensions((r=n.event.integrations)!==null&&r!==void 0?r:{}),s=i.before,o=i.enrichment,c=0,d=s,A.label=1;case 1:return c<d.length?(l=d[c],[4,Coe(n,l)]):[3,4];case 2:h=A.sent(),h instanceof V2&&(n=h),this.emit("message_enriched",n,l),A.label=3;case 3:return c++,[3,1];case 4:u=0,f=o,A.label=5;case 5:return u<f.length?(p=f[u],[4,Jf(n,p)]):[3,8];case 6:h=A.sent(),h instanceof V2&&(n=h),this.emit("message_enriched",n,p),A.label=7;case 7:return u++,[3,5];case 8:return b=this.availableExtensions((a=n.event.integrations)!==null&&a!==void 0?a:{}),v=b.destinations,m=b.after,[4,new Promise(function(N,R){setTimeout(function(){var B=v.map(function(F){return Jf(n,F)});Promise.all(B).then(N).catch(R)},0)})];case 9:return A.sent(),n.stats.increment("message_delivered"),this.emit("message_delivered",n),T=m.map(function(N){return Jf(n,N)}),[4,Promise.all(T)];case 10:return A.sent(),[2,n]}})})},e}(QE),Ooe=function(t,e){var n=Date.now()-t;return Math.max((e??300)-n,0)};function Moe(t,e,n,r){return tt(this,void 0,void 0,function(){var a,i;return nt(this,function(s){switch(s.label){case 0:return n.emit("dispatch_start",t),a=Date.now(),e.isEmpty()?[4,e.dispatchSingle(t)]:[3,2];case 1:return i=s.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:i=s.sent(),s.label=4;case 4:return r!=null&&r.callback?[4,goe(i,r.callback,Ooe(a,r.timeout))]:[3,6];case 5:i=s.sent(),s.label=6;case 6:return r!=null&&r.debug&&i.flush(),[2,i]}})})}function Poe(t,e,n,r){var a,i=[t,e,n,r],s=$i(t)?t.event:t;if(!s||!p1(s))throw new Error("Event missing");var o=$i(t)?(a=t.properties)!==null&&a!==void 0?a:{}:$i(e)?e:{},c={};f6(n)||(c=n??{}),$i(t)&&!f6(e)&&(c=e??{});var d=i.find(f6);return[s,o,c,d]}function xC(t,e,n,r,a){var i,s,o=null,c=null,d=[t,e,n,r,a],l=d.filter(p1);l.length===1?p1(d[1])?(c=d[1],o=null):(c=l[0],o=null):l.length===2&&(typeof d[0]=="string"&&(o=d[0]),typeof d[1]=="string"&&(c=d[1]));var u=d.find(f6),f=d.filter($i);return f.length===1?$i(d[2])?(s={},i=d[2]):$i(d[3])?(i={},s=d[3]):(i=f[0],s={}):f.length===2&&(i=f[0],s=f[1]),[o,c,i??(i={}),s??(s={}),u]}var SC=function(t){return function(){for(var e,n,r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];for(var s={},o=["callback","options","traits","id"],c=0,d=a;c<d.length;c++){var l=d[c],u=o.pop();if(u==="id"){if(p1(l)||tw(l)){s.id=l.toString();continue}if(l==null)continue;u=o.pop()}if((u==="traits"||u==="options")&&(l==null||$i(l))&&(s[u]=l),f6(l)){s.callback=l;break}}return[(e=s.id)!==null&&e!==void 0?e:t.id(),(n=s.traits)!==null&&n!==void 0?n:{},(r=s.options)!==null&&r!==void 0?r:{},s.callback]}};function koe(t,e,n,r){tw(t)&&(t=t.toString()),tw(e)&&(e=e.toString());var a=[t,e,n,r],i=a.filter(p1),s=i[0],o=s===void 0?t:s,c=i[1],d=c===void 0?null:c,l=a.filter($i)[0],u=l===void 0?{}:l,f=a.find(f6);return[o,d,u,f]}function n_(){return typeof window<"u"}function oHe(){return!n_()}function Noe(){return n_()?window.navigator.onLine:!0}function _5(){return!Noe()}function Roe(t,e){return e=e||{},new Promise(function(n,r){var a=new XMLHttpRequest,i=[],s=[],o={},c=function(){return{ok:(a.status/100|0)==2,statusText:a.statusText,status:a.status,url:a.responseURL,text:function(){return Promise.resolve(a.responseText)},json:function(){return Promise.resolve(a.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([a.response]))},clone:c,headers:{keys:function(){return i},entries:function(){return s},get:function(l){return o[l.toLowerCase()]},has:function(l){return l.toLowerCase()in o}}}};for(var d in a.open(e.method||"get",t,!0),a.onload=function(){a.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(l,u,f){i.push(u=u.toLowerCase()),s.push([u,f]),o[u]=o[u]?o[u]+","+f:f}),n(c())},a.onerror=r,a.withCredentials=e.credentials=="include",e.headers)a.setRequestHeader(d,e.headers[d]);a.send(e.body||null)})}var r_=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},Ky=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r_();return(n&&n.fetch||Roe).apply(void 0,t)},Vy="1.81.0",OL="api.segment.io/v1",Doe=function(t,e,n){var r=e.reduce(function(a,i){var s=i.split(":"),o=s[0],c=s[1];return a[o]=c,a},{});return{type:"Counter",metric:t,value:1,tags:Ie(Ie({},r),{library:"analytics.js",library_version:"npm:next-".concat(Vy)})}};function lg(t){console.error("Error sending segment performance metrics",t)}var $oe=function(){function t(e){var n=this,r,a,i,s,o;if(this.host=(r=e==null?void 0:e.host)!==null&&r!==void 0?r:OL,this.sampleRate=(a=e==null?void 0:e.sampleRate)!==null&&a!==void 0?a:1,this.flushTimer=(i=e==null?void 0:e.flushTimer)!==null&&i!==void 0?i:30*1e3,this.maxQueueSize=(s=e==null?void 0:e.maxQueueSize)!==null&&s!==void 0?s:20,this.protocol=(o=e==null?void 0:e.protocol)!==null&&o!==void 0?o:"https",this.queue=[],this.sampleRate>0){var c=!1,d=function(){c||(c=!0,n.flush().catch(lg),c=!1,setTimeout(d,n.flushTimer))};d()}}return t.prototype.increment=function(e,n){if(e.includes("analytics_js.")&&n.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var r=Doe(e,n);this.queue.push(r),e.includes("error")&&this.flush().catch(lg)}},t.prototype.flush=function(){return tt(this,void 0,void 0,function(){var e=this;return nt(this,function(n){switch(n.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(r){lg(r),e.sampleRate=0})];case 1:return n.sent(),[2]}})})},t.prototype.send=function(){return tt(this,void 0,void 0,function(){var e,n,r;return nt(this,function(a){return e={series:this.queue},this.queue=[],n={"Content-Type":"text/plain"},r="".concat(this.protocol,"://").concat(this.host,"/m"),[2,Ky(r,{headers:n,body:JSON.stringify(e),method:"POST"})]})})},t}(),Uh,ML=function(t){sa(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.initRemoteMetrics=function(n){Uh=new $oe(n)},e.prototype.increment=function(n,r,a){t.prototype.increment.call(this,n,r,a),Uh==null||Uh.increment(n,a??[])},e}(IL),$o=function(t){sa(e,t);function e(n,r){return t.call(this,n,r,new ML)||this}return e.system=function(){return new this({type:"track",event:"system"})},e}(V2);function Loe(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()==="object"}var PL="bpc",kL=function(t,e,n,r,a,i){return{__t:PL,c:e,p:r,u:t,s:n,t:a,r:i}},Boe=Object.keys(kL("","","","","",""));function Foe(t){if(!Loe(t)||t.__t!==PL)return!1;for(var e in t)if(!Boe.includes(e))return!1;return!0}var Uoe=function(t,e){return t.indexOf("?")>-1?t:t+e},joe=function(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)},Hoe=function(t){try{return new URL(t).pathname}catch{return t[0]==="/"?t:"/"+t}},NL=function(t){var e=t.c,n=t.p,r=t.s,a=t.u,i=t.r,s=t.t,o=e?Hoe(e):n,c=e?Uoe(e,r):joe(a);return{path:o,referrer:i,search:r,title:s,url:c}},RL=function(){var t=document.querySelector("link[rel='canonical']");return kL(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},zoe=function(){return NL(RL())};function qoe(t,e){return Object.assign.apply(Object,o0([{}],e.map(function(n){var r;if(t&&Object.prototype.hasOwnProperty.call(t,n))return r={},r[n]=t[n],r}),!1))}var gl=function(t,e){e===void 0&&(e=zoe());var n=t.context,r;t.type==="page"&&(r=t.properties&&qoe(t.properties,Object.keys(e)),t.properties=Ie(Ie(Ie({},e),t.properties),t.name?{name:t.name}:{})),n.page=Ie(Ie(Ie({},e),r),n.page)},Koe=function(t){sa(e,t);function e(n){var r=t.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(t_())},onEventMethodCall:function(a){var i=a.options;r.maybeUpdateAnonId(i)},onFinishedEvent:function(a){return r.addIdentity(a),a}})||this;return r.user=n,r}return e.prototype.maybeUpdateAnonId=function(n){n!=null&&n.anonymousId&&this.user.anonymousId(n.anonymousId)},e.prototype.addIdentity=function(n){this.user.id()&&(n.userId=this.user.id()),this.user.anonymousId()&&(n.anonymousId=this.user.anonymousId())},e.prototype.track=function(n,r,a,i,s){var o=t.prototype.track.call(this,n,r,a,i);return gl(o,s),o},e.prototype.page=function(n,r,a,i,s,o){var c=t.prototype.page.call(this,n,r,a,i,s);return gl(c,o),c},e.prototype.screen=function(n,r,a,i,s,o){var c=t.prototype.screen.call(this,n,r,a,i,s);return gl(c,o),c},e.prototype.identify=function(n,r,a,i,s){var o=t.prototype.identify.call(this,n,r,a,i);return gl(o,s),o},e.prototype.group=function(n,r,a,i,s){var o=t.prototype.group.call(this,n,r,a,i);return gl(o,s),o},e.prototype.alias=function(n,r,a,i,s){var o=t.prototype.alias.call(this,n,r,a,i);return gl(o,s),o},e}(boe),Voe=function(t){return"addMiddleware"in t&&t.type==="destination"},Ps={getItem:function(){},setItem:function(){},removeItem:function(){}};try{Ps=n_()&&window.localStorage?window.localStorage:Ps}catch(t){console.warn("Unable to access localStorage",t)}function DL(t){var e=Ps.getItem(t);return(e?JSON.parse(e):[]).map(function(n){return new $o(n.event,n.id)})}function Woe(t,e){var n=DL(t),r=o0(o0([],e,!0),n,!0),a=r.reduce(function(i,s){var o;return Ie(Ie({},i),(o={},o[s.id]=s,o))},{});Ps.setItem(t,JSON.stringify(Object.values(a)))}function $L(t){var e=Ps.getItem(t);return e?JSON.parse(e):{}}function Goe(t,e){var n=$L(t);Ps.setItem(t,JSON.stringify(Ie(Ie({},n),e)))}function AC(t){Ps.removeItem(t)}var Yoe=function(){return new Date().getTime()};function nw(t,e,n){n===void 0&&(n=0);var r=50,a="persisted-queue:v1:".concat(t,":lock"),i=function(d){return new Date().getTime()>d},s=Ps.getItem(a),o=s?JSON.parse(s):null,c=o===null||i(o);if(c){Ps.setItem(a,JSON.stringify(Yoe()+r)),e(),Ps.removeItem(a);return}!c&&n<3?setTimeout(function(){nw(t,e,n+1)},r):console.error("Unable to retrieve lock")}var a_=function(t){sa(e,t);function e(n,r){var a=t.call(this,n,[])||this,i="persisted-queue:v1:".concat(r,":items"),s="persisted-queue:v1:".concat(r,":seen"),o=[],c={};return nw(r,function(){try{o=DL(i),c=$L(s),AC(i),AC(s),a.queue=o0(o0([],o,!0),a.queue,!0),a.seen=Ie(Ie({},c),a.seen)}catch(d){console.error(d)}}),window.addEventListener("pagehide",function(){if(a.todo>0){var d=o0(o0([],a.queue,!0),a.future,!0);try{nw(r,function(){Woe(i,d),Goe(s,a.seen)})}catch(l){console.error(l)}}}),a}return e}(e_),Joe=function(t){sa(e,t);function e(n){return t.call(this,typeof n=="string"?new a_(4,n):n)||this}return e.prototype.flush=function(){return tt(this,void 0,void 0,function(){return nt(this,function(n){return _5()?[2,[]]:[2,t.prototype.flush.call(this)]})})},e}(Ioe);function i_(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var a=r[n];if(a!=="constructor"){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);i&&typeof i.value=="function"&&(t[a]=t[a].bind(t))}}return t}/*! js-cookie v3.0.1 | MIT */function jh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var Zoe={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function rw(t,e){function n(a,i,s){if(!(typeof document>"u")){s=jh({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var c in s)s[c]&&(o+="; "+c,s[c]!==!0&&(o+="="+s[c].split(";")[0]));return document.cookie=a+"="+t.write(i,a)+o}}function r(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var i=document.cookie?document.cookie.split("; "):[],s={},o=0;o<i.length;o++){var c=i[o].split("="),d=c.slice(1).join("=");try{var l=decodeURIComponent(c[0]);if(s[l]=t.read(d,l),a===l)break}catch{}}return a?s[a]:s}}return Object.create({set:n,get:r,remove:function(a,i){n(a,"",jh({},i,{expires:-1}))},withAttributes:function(a){return rw(this.converter,jh({},this.attributes,a))},withConverter:function(a){return rw(jh({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Ao=rw(Zoe,{path:"/"});function Xoe(t){var e=t.hostname,n=e.split("."),r=n[n.length-1],a=[];if(n.length===4&&parseInt(r,10)>0||n.length<=1)return a;for(var i=n.length-2;i>=0;--i)a.push(n.slice(i).join("."));return a}function Qoe(t){try{return new URL(t)}catch{return}}function LL(t){var e=Qoe(t);if(e)for(var n=Xoe(e),r=0;r<n.length;++r){var a="__tld__",i=n[r],s={domain:"."+i};try{if(Ao.set(a,"1",s),Ao.get(a))return Ao.remove(a,s),i}catch{return}}}var ece=365,BL=function(){function t(e){e===void 0&&(e=t.defaults),this.options=Ie(Ie({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:ece,domain:LL(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(e){var n;try{var r=Ao.get(e);if(r==null)return null;try{return(n=JSON.parse(r))!==null&&n!==void 0?n:null}catch{return r??null}}catch{return null}},t.prototype.set=function(e,n){typeof n=="string"?Ao.set(e,n,this.opts()):n===null?Ao.remove(e,this.opts()):Ao.set(e,JSON.stringify(n),this.opts())},t.prototype.remove=function(e){return Ao.remove(e,this.opts())},t}(),tce=function(){function t(){}return t.prototype.localStorageWarning=function(e,n){console.warn("Unable to access ".concat(e,", localStorage may be ").concat(n))},t.prototype.get=function(e){var n;try{var r=localStorage.getItem(e);if(r===null)return null;try{return(n=JSON.parse(r))!==null&&n!==void 0?n:null}catch{return r??null}}catch{return this.localStorageWarning(e,"unavailable"),null}},t.prototype.set=function(e,n){try{localStorage.setItem(e,JSON.stringify(n))}catch{this.localStorageWarning(e,"full")}},t.prototype.remove=function(e){try{return localStorage.removeItem(e)}catch{this.localStorageWarning(e,"unavailable")}},t}(),s_=function(){function t(){this.cache={}}return t.prototype.get=function(e){var n;return(n=this.cache[e])!==null&&n!==void 0?n:null},t.prototype.set=function(e,n){this.cache[e]=n},t.prototype.remove=function(e){delete this.cache[e]},t}(),Zr={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function FL(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every(function(e){return Object.values(Zr).includes(e)})}function nce(t){return typeof t=="object"&&t.name!==void 0}var ug=function(t,e,n,r){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(r))},bd=function(){function t(e){this.stores=e}return t.prototype.get=function(e){for(var n=null,r=0,a=this.stores;r<a.length;r++){var i=a[r];try{if(n=i.get(e),n!=null)return n}catch(s){ug(i,"get",e,s)}}return null},t.prototype.set=function(e,n){this.stores.forEach(function(r){try{r.set(e,n)}catch(a){ug(r,"set",e,a)}})},t.prototype.clear=function(e){this.stores.forEach(function(n){try{n.remove(e)}catch(r){ug(n,"remove",e,r)}})},t.prototype.getAndSync=function(e){var n=this.get(e),r=typeof n=="number"?n.toString():n;return this.set(e,r),r},t}();function aw(t){var e=t.map(function(n){var r,a;switch(nce(n)?(r=n.name,a=n.settings):r=n,r){case Zr.Cookie:return new BL(a);case Zr.LocalStorage:return new tce;case Zr.Memory:return new s_;default:throw new Error("Unknown Store Type: ".concat(n))}});return e}function UL(t,e){return t.map(function(n){return e&&n===Zr.Cookie?{name:n,settings:e}:n})}var C1={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},jL=function(){function t(e,n){e===void 0&&(e=C1);var r=this,a,i,s,o;this.options={},this.id=function(d){if(r.options.disable)return null;var l=r.identityStore.getAndSync(r.idKey);if(d!==void 0){r.identityStore.set(r.idKey,d);var u=d!==l&&l!==null&&d!==null;u&&r.anonymousId(null)}var f=r.identityStore.getAndSync(r.idKey);if(f)return f;var p=r.legacyUserStore.get(C1.cookie.oldKey);return p?typeof p=="object"?p.id:p:null},this.anonymousId=function(d){var l,u;if(r.options.disable)return null;if(d===void 0){var f=(l=r.identityStore.getAndSync(r.anonKey))!==null&&l!==void 0?l:(u=r.legacySIO())===null||u===void 0?void 0:u[0];if(f)return f}return d===null?(r.identityStore.set(r.anonKey,null),r.identityStore.getAndSync(r.anonKey)):(r.identityStore.set(r.anonKey,d??t_()),r.identityStore.getAndSync(r.anonKey))},this.traits=function(d){var l;if(!r.options.disable)return d===null&&(d={}),d&&r.traitsStore.set(r.traitsKey,d??{}),(l=r.traitsStore.get(r.traitsKey))!==null&&l!==void 0?l:{}},this.options=Ie(Ie({},C1),e),this.cookieOptions=n,this.idKey=(i=(a=e.cookie)===null||a===void 0?void 0:a.key)!==null&&i!==void 0?i:C1.cookie.key,this.traitsKey=(o=(s=e.localStorage)===null||s===void 0?void 0:s.key)!==null&&o!==void 0?o:C1.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,n),this.legacyUserStore=this.createStorage(this.options,n,function(d){return d===Zr.Cookie}),this.traitsStore=this.createStorage(this.options,n,function(d){return d!==Zr.Cookie});var c=this.legacyUserStore.get(C1.cookie.oldKey);c&&typeof c=="object"&&(c.id&&this.id(c.id),c.traits&&this.traits(c.traits)),i_(this)}return t.prototype.legacySIO=function(){var e=this.legacyUserStore.get("_sio");if(!e)return null;var n=e.split("----"),r=n[0],a=n[1];return[r,a]},t.prototype.identify=function(e,n){if(!this.options.disable){n=n??{};var r=this.id();(r===null||r===e)&&(n=Ie(Ie({},this.traits()),n)),e&&this.id(e),this.traits(n)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(e,n,r){var a=[Zr.LocalStorage,Zr.Cookie,Zr.Memory];return e.disable?new bd([]):e.persist?(e.storage!==void 0&&e.storage!==null&&FL(e.storage)&&(a=e.storage.stores),e.localStorageFallbackDisabled&&(a=a.filter(function(i){return i!==Zr.LocalStorage})),r&&(a=a.filter(r)),new bd(aw(UL(a,n)))):new bd([new s_])},t.defaults=C1,t}(),CC={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},rce=function(t){sa(e,t);function e(n,r){n===void 0&&(n=CC);var a=t.call(this,Ie(Ie({},CC),n),r)||this;return a.anonymousId=function(i){},i_(a),a}return e}(jL),o_="analytics";function HL(){return window[o_]}function ace(t){o_=t}function ice(t){window[o_]=t}var sce=function(t){return typeof t=="object"&&t!==null&&"then"in t&&typeof t.then=="function"},zL=function(t,e,n){n.getAndRemove(t).forEach(function(r){Wy(e,r).catch(console.error)})},oce=function(t,e){return tt(void 0,void 0,void 0,function(){var n,r,a;return nt(this,function(i){switch(i.label){case 0:n=0,r=e.getAndRemove("addSourceMiddleware"),i.label=1;case 1:return n<r.length?(a=r[n],[4,Wy(t,a).catch(console.error)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},cce=function(t,e){return tt(void 0,void 0,void 0,function(){var n,r,a;return nt(this,function(i){switch(i.label){case 0:n=0,r=e.getAndRemove("register"),i.label=1;case 1:return n<r.length?(a=r[n],[4,Wy(t,a).catch(console.error)]):[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},dce=zL.bind(void 0,"on"),lce=zL.bind(void 0,"setAnonymousId"),uce=function(t,e){Object.keys(e.calls).forEach(function(n){e.getAndRemove(n).forEach(function(r){setTimeout(function(){Wy(t,r).catch(console.error)},0)})})},wl=function(t){if(qL(t)){var e=t.pop();return NL(e)}},qL=function(t){var e=t[t.length-1];return Foe(e)},iw=function(){function t(e,n,r,a){r===void 0&&(r=function(){}),a===void 0&&(a=console.error),this.method=e,this.resolve=r,this.reject=a,this.called=!1,this.args=n}return t}(),fce=function(){function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._callMap={},this.add.apply(this,e)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(e){this._callMap=e},enumerable:!1,configurable:!0}),t.prototype.get=function(e){var n;return(n=this.calls[e])!==null&&n!==void 0?n:[]},t.prototype.getAndRemove=function(e){var n=this.get(e);return this.calls[e]=[],n},t.prototype.add=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];n.forEach(function(a){var i=["track","screen","alias","group","page","identify"];i.includes(a.method)&&!qL(a.args)&&(a.args=o0(o0([],a.args,!0),[RL()],!1)),e.calls[a.method]?e.calls[a.method].push(a):e.calls[a.method]=[a]})},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var e;return(e=[]).concat.apply(e,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){},t}();function Wy(t,e){return tt(this,void 0,void 0,function(){var n,r;return nt(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),e.called?[2,void 0]:(e.called=!0,n=t[e.method].apply(t,e.args),sce(n)?[4,n]:[3,2]);case 1:a.sent(),a.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=a.sent(),e.reject(r),[3,4];case 4:return[2]}})})}var pce=function(){function t(e){var n=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=Vy,this._preInitBuffer=new fce,this._promise=e(this._preInitBuffer),this._promise.then(function(r){var a=r[0],i=r[1];n.instance=a,n.ctx=i}).catch(function(){})}return t.prototype.then=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(e=this._promise).then.apply(e,n)},t.prototype.catch=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(e=this._promise).catch.apply(e,n)},t.prototype.finally=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(e=this._promise).finally.apply(e,n)},t.prototype._createMethod=function(e){var n=this;return function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(n.instance){var s=(r=n.instance)[e].apply(r,a);return Promise.resolve(s)}return new Promise(function(o,c){n._preInitBuffer.add(new iw(e,a,o,c))})}},t.prototype._createChainableMethod=function(e){var n=this;return function(){for(var r,a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n.instance?((r=n.instance)[e].apply(r,a),n):(n._preInitBuffer.add(new iw(e,a)),n)}},t}(),Cc={},Js={},c_={},KL={exports:{}};(function(t){t.exports=e(n),t.exports.find=t.exports,t.exports.replace=function(o,c,d,l){return e(a).call(this,o,c,d,l),o},t.exports.del=function(o,c,d){return e(r).call(this,o,c,null,d),o};function e(o){return function(c,d,l,u){var f=u&&s(u.normalizer)?u.normalizer:i;d=f(d);for(var p,h=!1;!h;)b();function b(){for(p in c){var v=f(p);if(d.indexOf(v)===0){var m=d.substr(v.length);if(m.charAt(0)==="."||m.length===0){d=m.substr(1);var T=c[p];if(T==null){h=!0;return}if(!d.length){h=!0;return}c=T;return}}}p=void 0,h=!0}if(p)return c==null?c:o(c,p,l)}}function n(o,c){if(o.hasOwnProperty(c))return o[c]}function r(o,c){return o.hasOwnProperty(c)&&delete o[c],o}function a(o,c,d){return o.hasOwnProperty(c)&&(o[c]=d),o}function i(o){return o.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function s(o){return typeof o=="function"}})(KL);var Gy=KL.exports,hce=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(c_,"__esModule",{value:!0});var pc=hce(Gy);function vl(t,e){return function(){var n=this.traits(),r=this.properties?this.properties():{};return pc.default(n,"address."+t)||pc.default(n,t)||(e?pc.default(n,"address."+e):null)||(e?pc.default(n,e):null)||pc.default(r,"address."+t)||pc.default(r,t)||(e?pc.default(r,"address."+e):null)||(e?pc.default(r,e):null)}}function bce(t){t.zip=vl("postalCode","zip"),t.country=vl("country"),t.street=vl("street"),t.state=vl("state"),t.city=vl("city"),t.region=vl("region")}c_.default=bce;var Yy={};Object.defineProperty(Yy,"__esModule",{value:!0});Yy.clone=void 0;function sw(t){if(typeof t!="object")return t;if(Object.prototype.toString.call(t)==="[object Object]"){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=sw(t[n]));return e}else return Array.isArray(t)?t.map(sw):t}Yy.clone=sw;var d_={};Object.defineProperty(d_,"__esModule",{value:!0});var yce={Salesforce:!0};function mce(t){return!yce[t]}d_.default=mce;var Jy={},VL=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;Jy.parse=function(t){var e=[1,5,6,7,11,12],n=VL.exec(t),r=0;if(!n)return new Date(t);for(var a=0,i;i=e[a];a++)n[i]=parseInt(n[i],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0,n[4]===" "?r=new Date().getTimezoneOffset():n[9]!=="Z"&&n[10]&&(r=n[11]*60+n[12],n[10]==="+"&&(r=0-r));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+r,n[7],n[8]);return new Date(s)};Jy.is=function(t,e){return typeof t!="string"||e&&/^\d{4}-\d{2}-\d{2}/.test(t)===!1?!1:VL.test(t)};var l_={},gce=/\d{13}/;l_.is=function(t){return gce.test(t)};l_.parse=function(t){return t=parseInt(t,10),new Date(t)};var u_={},wce=/\d{10}/;u_.is=function(t){return wce.test(t)};u_.parse=function(t){var e=parseInt(t,10)*1e3;return new Date(e)};var IC=Jy,OC=l_,MC=u_,vce=Object.prototype,WL=vce.toString;function Ece(t){return WL.call(t)==="[object Date]"}function _ce(t){return WL.call(t)==="[object Number]"}var f_=function(e){return Ece(e)?e:_ce(e)?new Date(Tce(e)):IC.is(e)?IC.parse(e):OC.is(e)?OC.parse(e):MC.is(e)?MC.parse(e):new Date(e)};function Tce(t){return t<315576e5?t*1e3:t}var PC=Jy,xce=p_;function p_(t,e){return e===void 0&&(e=!0),t&&typeof t=="object"?Sce(t,e):Array.isArray(t)?Ace(t,e):PC.is(t,e)?PC.parse(t):t}function Sce(t,e){return Object.keys(t).forEach(function(n){t[n]=p_(t[n],e)}),t}function Ace(t,e){return t.forEach(function(n,r){t[r]=p_(n,e)}),t}var Bp=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Js,"__esModule",{value:!0});Js.Facade=void 0;var Cce=Bp(c_),j6=Yy,Ice=Bp(d_),Oce=Bp(f_),ow=Bp(Gy),Mce=Bp(xce);function Ra(t,e){e=e||{},this.raw=j6.clone(t),"clone"in e||(e.clone=!0),e.clone&&(t=j6.clone(t)),"traverse"in e||(e.traverse=!0),"timestamp"in t?t.timestamp=Oce.default(t.timestamp):t.timestamp=new Date,e.traverse&&Mce.default(t),this.opts=e,this.obj=t}Js.Facade=Ra;var Cn=Ra.prototype;Cn.proxy=function(t){var e=t.split(".");t=e.shift();var n=this[t]||this.obj[t];return n&&(typeof n=="function"&&(n=n.call(this)||{}),e.length===0?this.opts.clone?cw(n):n:(n=ow.default(n,e.join(".")),this.opts.clone?cw(n):n))};Cn.field=function(t){var e=this.obj[t];return this.opts.clone?cw(e):e};Ra.proxy=function(t){return function(){return this.proxy(t)}};Ra.field=function(t){return function(){return this.field(t)}};Ra.multi=function(t){return function(){var e=this.proxy(t+"s");if(Array.isArray(e))return e;var n=this.proxy(t);return n&&(n=[this.opts.clone?j6.clone(n):n]),n||[]}};Ra.one=function(t){return function(){var e=this.proxy(t);if(e)return e;var n=this.proxy(t+"s");if(Array.isArray(n))return n[0]}};Cn.json=function(){var t=this.opts.clone?j6.clone(this.obj):this.obj;return this.type&&(t.type=this.type()),t};Cn.rawEvent=function(){return this.raw};Cn.options=function(t){var e=this.obj.options||this.obj.context||{},n=this.opts.clone?j6.clone(e):e;if(!t)return n;if(this.enabled(t)){var r=this.integrations(),a=r[t]||ow.default(r,t);return typeof a!="object"&&(a=ow.default(this.options(),t)),typeof a=="object"?a:{}}};Cn.context=Cn.options;Cn.enabled=function(t){var e=this.proxy("options.providers.all");typeof e!="boolean"&&(e=this.proxy("options.all")),typeof e!="boolean"&&(e=this.proxy("integrations.all")),typeof e!="boolean"&&(e=!0);var n=e&&Ice.default(t),r=this.integrations();if(r.providers&&r.providers.hasOwnProperty(t)&&(n=r.providers[t]),r.hasOwnProperty(t)){var a=r[t];typeof a=="boolean"?n=a:n=!0}return!!n};Cn.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};Cn.active=function(){var t=this.proxy("options.active");return t==null&&(t=!0),t};Cn.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};Cn.sessionId=Cn.anonymousId;Cn.groupId=Ra.proxy("options.groupId");Cn.traits=function(t){var e=this.proxy("options.traits")||{},n=this.userId();t=t||{},n&&(e.id=n);for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=this[r]==null?this.proxy("options.traits."+r):this[r]();if(a==null)continue;e[t[r]]=a,delete e[r]}return e};Cn.library=function(){var t=this.proxy("options.library");return t?typeof t=="string"?{name:t,version:null}:t:{name:"unknown",version:null}};Cn.device=function(){var t=this.proxy("context.device");(typeof t!="object"||t===null)&&(t={});var e=this.library().name;return t.type||(e.indexOf("ios")>-1&&(t.type="ios"),e.indexOf("android")>-1&&(t.type="android")),t};Cn.userAgent=Ra.proxy("context.userAgent");Cn.timezone=Ra.proxy("context.timezone");Cn.timestamp=Ra.field("timestamp");Cn.channel=Ra.field("channel");Cn.ip=Ra.proxy("context.ip");Cn.userId=Ra.field("userId");Cce.default(Cn);function cw(t){return j6.clone(t)}var Zy={},Pce=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Zy,"__esModule",{value:!0});Zy.Alias=void 0;var kce=Pce(Gi),GL=Js;function ji(t,e){GL.Facade.call(this,t,e)}Zy.Alias=ji;kce.default(ji,GL.Facade);ji.prototype.action=function(){return"alias"};ji.prototype.type=ji.prototype.action;ji.prototype.previousId=function(){return this.field("previousId")||this.field("from")};ji.prototype.from=ji.prototype.previousId;ji.prototype.userId=function(){return this.field("userId")||this.field("to")};ji.prototype.to=ji.prototype.userId;var Xy={},_u={};Object.defineProperty(_u,"__esModule",{value:!0});var Nce=/.+\@.+\..+/;function Rce(t){return Nce.test(t)}_u.default=Rce;var h_=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xy,"__esModule",{value:!0});Xy.Group=void 0;var Dce=h_(Gi),$ce=h_(_u),Lce=h_(f_),Tu=Js;function b_(t,e){Tu.Facade.call(this,t,e)}Xy.Group=b_;Dce.default(b_,Tu.Facade);var Hi=b_.prototype;Hi.action=function(){return"group"};Hi.type=Hi.action;Hi.groupId=Tu.Facade.field("groupId");Hi.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return Lce.default(t)};Hi.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();if($ce.default(e))return e};Hi.traits=function(t){var e=this.properties(),n=this.groupId();t=t||{},n&&(e.id=n);for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var a=this[r]==null?this.proxy("traits."+r):this[r]();if(a==null)continue;e[t[r]]=a,delete e[r]}return e};Hi.name=Tu.Facade.proxy("traits.name");Hi.industry=Tu.Facade.proxy("traits.industry");Hi.employees=Tu.Facade.proxy("traits.employees");Hi.properties=function(){return this.field("traits")||this.field("properties")||{}};var Fp={},Qy=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fp,"__esModule",{value:!0});Fp.Identify=void 0;var Zs=Js,p6=Qy(Gy),Bce=Qy(Gi),Fce=Qy(_u),YL=Qy(f_),yd=function(t){return t.trim()};function y_(t,e){Zs.Facade.call(this,t,e)}Fp.Identify=y_;Bce.default(y_,Zs.Facade);var In=y_.prototype;In.action=function(){return"identify"};In.type=In.action;In.traits=function(t){var e=this.field("traits")||{},n=this.userId();t=t||{},n&&(e.id=n);for(var r in t){var a=this[r]==null?this.proxy("traits."+r):this[r]();a!=null&&(e[t[r]]=a,r!==t[r]&&delete e[r])}return e};In.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();if(Fce.default(e))return e};In.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return YL.default(t)};In.companyCreated=function(){var t=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(t)return YL.default(t)};In.companyName=function(){return this.proxy("traits.company.name")};In.name=function(){var t=this.proxy("traits.name");if(typeof t=="string")return yd(t);var e=this.firstName(),n=this.lastName();if(e&&n)return yd(e+" "+n)};In.firstName=function(){var t=this.proxy("traits.firstName");if(typeof t=="string")return yd(t);var e=this.proxy("traits.name");if(typeof e=="string")return yd(e).split(" ")[0]};In.lastName=function(){var t=this.proxy("traits.lastName");if(typeof t=="string")return yd(t);var e=this.proxy("traits.name");if(typeof e=="string"){var n=yd(e).indexOf(" ");if(n!==-1)return yd(e.substr(n+1))}};In.uid=function(){return this.userId()||this.username()||this.email()};In.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};In.age=function(){var t=this.birthday(),e=p6.default(this.traits(),"age");if(e!=null)return e;if(t instanceof Date){var n=new Date;return n.getFullYear()-t.getFullYear()}};In.avatar=function(){var t=this.traits();return p6.default(t,"avatar")||p6.default(t,"photoUrl")||p6.default(t,"avatarUrl")};In.position=function(){var t=this.traits();return p6.default(t,"position")||p6.default(t,"jobTitle")};In.username=Zs.Facade.proxy("traits.username");In.website=Zs.Facade.one("traits.website");In.websites=Zs.Facade.multi("traits.website");In.phone=Zs.Facade.one("traits.phone");In.phones=Zs.Facade.multi("traits.phone");In.address=Zs.Facade.proxy("traits.address");In.gender=Zs.Facade.proxy("traits.gender");In.birthday=Zs.Facade.proxy("traits.birthday");var xu={},m_=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xu,"__esModule",{value:!0});xu.Track=void 0;var Uce=m_(Gi),$0=Js,jce=Fp,Hce=m_(_u),JL=m_(Gy);function g_(t,e){$0.Facade.call(this,t,e)}xu.Track=g_;Uce.default(g_,$0.Facade);var yt=g_.prototype;yt.action=function(){return"track"};yt.type=yt.action;yt.event=$0.Facade.field("event");yt.value=$0.Facade.proxy("properties.value");yt.category=$0.Facade.proxy("properties.category");yt.id=$0.Facade.proxy("properties.id");yt.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};yt.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};yt.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};yt.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};yt.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};yt.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};yt.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};yt.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};yt.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};yt.sku=$0.Facade.proxy("properties.sku");yt.tax=$0.Facade.proxy("properties.tax");yt.name=$0.Facade.proxy("properties.name");yt.price=$0.Facade.proxy("properties.price");yt.total=$0.Facade.proxy("properties.total");yt.repeat=$0.Facade.proxy("properties.repeat");yt.coupon=$0.Facade.proxy("properties.coupon");yt.shipping=$0.Facade.proxy("properties.shipping");yt.discount=$0.Facade.proxy("properties.discount");yt.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};yt.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};yt.description=$0.Facade.proxy("properties.description");yt.plan=$0.Facade.proxy("properties.plan");yt.subtotal=function(){var t=JL.default(this.properties(),"subtotal"),e=this.total()||this.revenue();if(t)return t;if(!e)return 0;if(this.total()){var n=this.tax();n&&(e-=n),n=this.shipping(),n&&(e-=n),n=this.discount(),n&&(e+=n)}return e};yt.products=function(){var t=this.properties(),e=JL.default(t,"products");return Array.isArray(e)?e.filter(function(n){return n!==null}):[]};yt.quantity=function(){var t=this.obj.properties||{};return t.quantity||1};yt.currency=function(){var t=this.obj.properties||{};return t.currency||"USD"};yt.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};yt.query=$0.Facade.proxy("options.query");yt.properties=function(t){var e=this.field("properties")||{};t=t||{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=this[n]==null?this.proxy("properties."+n):this[n]();if(r==null)continue;e[t[n]]=r,delete e[n]}return e};yt.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};yt.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();if(Hce.default(e))return e};yt.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event(),n=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!t&&e&&e.match(n)&&(t=this.proxy("properties.total")),zce(t)};yt.cents=function(){var t=this.revenue();return typeof t!="number"?this.value()||0:t*100};yt.identify=function(){var t=this.json();return t.traits=this.traits(),new jce.Identify(t,this.opts)};function zce(t){if(t){if(typeof t=="number")return t;if(typeof t=="string"&&(t=t.replace(/\$/g,""),t=parseFloat(t),!isNaN(t)))return t}}var Up={},ZL=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Up,"__esModule",{value:!0});Up.Page=void 0;var qce=ZL(Gi),Xd=Js,Kce=xu,Vce=ZL(_u);function w_(t,e){Xd.Facade.call(this,t,e)}Up.Page=w_;qce.default(w_,Xd.Facade);var aa=w_.prototype;aa.action=function(){return"page"};aa.type=aa.action;aa.category=Xd.Facade.field("category");aa.name=Xd.Facade.field("name");aa.title=Xd.Facade.proxy("properties.title");aa.path=Xd.Facade.proxy("properties.path");aa.url=Xd.Facade.proxy("properties.url");aa.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};aa.properties=function(t){var e=this.field("properties")||{},n=this.category(),r=this.name();t=t||{},n&&(e.category=n),r&&(e.name=r);for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=this[a]==null?this.proxy("properties."+a):this[a]();if(i==null)continue;e[t[a]]=i,a!==t[a]&&delete e[a]}return e};aa.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();if(Vce.default(e))return e};aa.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e};aa.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"};aa.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new Kce.Track(e,this.opts)};var e3={},Wce=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e3,"__esModule",{value:!0});e3.Screen=void 0;var Gce=Wce(Gi),XL=Up,Yce=xu;function Od(t,e){XL.Page.call(this,t,e)}e3.Screen=Od;Gce.default(Od,XL.Page);Od.prototype.action=function(){return"screen"};Od.prototype.type=Od.prototype.action;Od.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"};Od.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new Yce.Track(e,this.opts)};var t3={},Jce=vt&&vt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(t3,"__esModule",{value:!0});t3.Delete=void 0;var Zce=Jce(Gi),QL=Js;function v_(t,e){QL.Facade.call(this,t,e)}t3.Delete=v_;Zce.default(v_,QL.Facade);v_.prototype.type=function(){return"delete"};(function(t){var e=vt&&vt.__assign||function(){return e=Object.assign||function(l){for(var u,f=1,p=arguments.length;f<p;f++){u=arguments[f];for(var h in u)Object.prototype.hasOwnProperty.call(u,h)&&(l[h]=u[h])}return l},e.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Delete=t.Screen=t.Page=t.Track=t.Identify=t.Group=t.Alias=t.Facade=void 0;var n=Js;Object.defineProperty(t,"Facade",{enumerable:!0,get:function(){return n.Facade}});var r=Zy;Object.defineProperty(t,"Alias",{enumerable:!0,get:function(){return r.Alias}});var a=Xy;Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return a.Group}});var i=Fp;Object.defineProperty(t,"Identify",{enumerable:!0,get:function(){return i.Identify}});var s=xu;Object.defineProperty(t,"Track",{enumerable:!0,get:function(){return s.Track}});var o=Up;Object.defineProperty(t,"Page",{enumerable:!0,get:function(){return o.Page}});var c=e3;Object.defineProperty(t,"Screen",{enumerable:!0,get:function(){return c.Screen}});var d=t3;Object.defineProperty(t,"Delete",{enumerable:!0,get:function(){return d.Delete}}),t.default=e(e({},n.Facade),{Alias:r.Alias,Group:a.Group,Identify:i.Identify,Track:s.Track,Page:o.Page,Screen:c.Screen,Delete:d.Delete})})(Cc);function W2(t,e){var n=new Cc.Facade(t,e);return t.type==="track"&&(n=new Cc.Track(t,e)),t.type==="identify"&&(n=new Cc.Identify(t,e)),t.type==="page"&&(n=new Cc.Page(t,e)),t.type==="alias"&&(n=new Cc.Alias(t,e)),t.type==="group"&&(n=new Cc.Group(t,e)),t.type==="screen"&&(n=new Cc.Screen(t,e)),Object.defineProperty(n,"obj",{value:t,writable:!0}),n}var Xce=function(t){var e=!1;window.addEventListener("pagehide",function(){e||(e=!0,t(e))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(e)return;e=!0}else e=!1;t(e)})},eB=function(t){sa(e,t);function e(n,r){var a=t.call(this,n)||this;return a.retryTimeout=r,a.name="RateLimitError",a}return e}(Error),tB=function(t){return Ie({"Content-Type":"text/plain"},typeof t=="function"?t():t)},Qce=500,e1e=64;function E_(t){var e=encodeURI(JSON.stringify(t)).split(/%..|./).length-1;return e/1024}function t1e(t){return E_(t)>=Qce-50}function n1e(t){return E_(t)>=e1e-10}function r1e(t){var e=[],n=0;return t.forEach(function(r){var a=E_(e[n]);a>=64&&n++,e[n]?e[n].push(r):e[n]=[r]}),e}function a1e(t,e){var n,r,a=[],i=!1,s=(n=e==null?void 0:e.size)!==null&&n!==void 0?n:10,o=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:5e3,c=0;function d(h){var b;if(h.length!==0){var v=(b=h[0])===null||b===void 0?void 0:b.writeKey,m=h.map(function(T){var A=T;A.sentAt;var N=hR(A,["sentAt"]);return N});return Ky("https://".concat(t,"/b"),{credentials:e==null?void 0:e.credentials,keepalive:(e==null?void 0:e.keepalive)||i,headers:tB(e==null?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:v,batch:m,sentAt:new Date().toISOString()}),priority:e==null?void 0:e.priority}).then(function(T){var A;if(T.status>=500)throw new Error("Bad response from server: ".concat(T.status));if(T.status===429){var N=(A=T.headers)===null||A===void 0?void 0:A.get("x-ratelimit-reset"),R=typeof N=="string"?parseInt(N)*1e3:o;throw new eB("Rate limit exceeded: ".concat(T.status),R)}})}}function l(h){var b;return h===void 0&&(h=1),tt(this,void 0,void 0,function(){var v;return nt(this,function(m){return a.length?(v=a,a=[],[2,(b=d(v))===null||b===void 0?void 0:b.catch(function(T){var A,N=$o.system();N.log("error","Error sending batch",T),h<=((A=e==null?void 0:e.maxRetries)!==null&&A!==void 0?A:10)&&(T.name==="RateLimitError"&&(c=T.retryTimeout),a.push.apply(a,v),a.map(function(R){if("_metadata"in R){var B=R;B._metadata=Ie(Ie({},B._metadata),{retryCount:h})}}),f(h+1))})]):[2]})})}var u;function f(h){h===void 0&&(h=1),!u&&(u=setTimeout(function(){u=void 0,l(h).catch(console.error)},c||o),c=0)}Xce(function(h){if(i=h,i&&a.length){var b=r1e(a).map(d);Promise.all(b).catch(console.error)}});function p(h,b){return tt(this,void 0,void 0,function(){var v;return nt(this,function(m){return a.push(b),v=a.length>=s||t1e(a)||(e==null?void 0:e.keepalive)&&n1e(a),[2,v||i?l():f()]})})}return{dispatch:p}}function i1e(t){function e(n,r){return Ky(n,{credentials:t==null?void 0:t.credentials,keepalive:t==null?void 0:t.keepalive,headers:tB(t==null?void 0:t.headers),method:"post",body:JSON.stringify(r),priority:t==null?void 0:t.priority}).then(function(a){var i;if(a.status>=500)throw new Error("Bad response from server: ".concat(a.status));if(a.status===429){var s=(i=a.headers)===null||i===void 0?void 0:i.get("x-ratelimit-reset"),o=s?parseInt(s)*1e3:5e3;throw new eB("Rate limit exceeded: ".concat(a.status),o)}})}return{dispatch:e}}function s1e(t,e,n,r,a){var i,s=t.user();delete e.options,e.writeKey=n==null?void 0:n.apiKey,e.userId=e.userId||s.id(),e.anonymousId=e.anonymousId||s.anonymousId(),e.sentAt=new Date;var o=t.queue.failedInitializations||[];o.length>0&&(e._metadata={failedInitializations:o}),a!=null&&(a.attempts>1&&(e._metadata=Ie(Ie({},e._metadata),{retryCount:a.attempts})),a.attempts++);var c=[],d=[];for(var l in r){var u=r[l];l==="Segment.io"&&c.push(l),u.bundlingStatus==="bundled"&&c.push(l),u.bundlingStatus==="unbundled"&&d.push(l)}for(var f=0,p=(n==null?void 0:n.unbundledIntegrations)||[];f<p.length;f++){var h=p[f];d.includes(h)||d.push(h)}var b=(i=n==null?void 0:n.maybeBundledConfigIds)!==null&&i!==void 0?i:{},v=[];return c.sort().forEach(function(m){var T;((T=b[m])!==null&&T!==void 0?T:[]).forEach(function(A){v.push(A)})}),(n==null?void 0:n.addBundledMetadata)!==!1&&(e._metadata=Ie(Ie({},e._metadata),{bundled:c.sort(),unbundled:d.sort(),bundledIds:v})),e}var o1e=function(t,e){return tt(void 0,void 0,void 0,function(){var n;return nt(this,function(r){return n=function(a){return tt(void 0,void 0,void 0,function(){var i;return nt(this,function(s){switch(s.label){case 0:return t(a)?(i=n,[4,e()]):[3,2];case 1:return[2,i.apply(void 0,[s.sent()])];case 2:return[2]}})})},[2,n(void 0)]})})};function c1e(t,e){return tt(this,void 0,void 0,function(){var n,r=this;return nt(this,function(a){switch(a.label){case 0:return n=[],_5()?[2,e]:[4,o1e(function(){return e.length>0&&!_5()},function(){return tt(r,void 0,void 0,function(){var i,s,o;return nt(this,function(c){switch(c.label){case 0:return i=e.pop(),i?[4,Jf(i,t)]:[2];case 1:return s=c.sent(),o=s instanceof $o,o||n.push(i),[2]}})})})];case 1:return a.sent(),n.map(function(i){return e.pushWithBackoff(i)}),[2,e]}})})}function El(t,e,n,r){var a=this;t||setTimeout(function(){return tt(a,void 0,void 0,function(){var i,s;return nt(this,function(o){switch(o.label){case 0:return i=!0,[4,c1e(n,e)];case 1:return s=o.sent(),i=!1,e.todo>0&&r(i,s,n,r),[2]}})})},Math.random()*5e3)}function d1e(t,e){var n,r,a,i,s=t.user();return e.previousId=(a=(r=(n=e.previousId)!==null&&n!==void 0?n:e.from)!==null&&r!==void 0?r:s.id())!==null&&a!==void 0?a:s.anonymousId(),e.userId=(i=e.userId)!==null&&i!==void 0?i:e.to,delete e.from,delete e.to,e}var l1e=function(t){return t.name==="Segment.io"};function u1e(t,e,n){var r,a,i;window.addEventListener("pagehide",function(){o.push.apply(o,Array.from(c)),c.clear()});var s=(r=e==null?void 0:e.apiKey)!==null&&r!==void 0?r:"",o=t.options.disableClientPersistence?new e_(t.queue.queue.maxAttempts,[]):new a_(t.queue.queue.maxAttempts,"".concat(s,":dest-Segment.io")),c=new Set,d=!1,l=(a=e==null?void 0:e.apiHost)!==null&&a!==void 0?a:OL,u=(i=e==null?void 0:e.protocol)!==null&&i!==void 0?i:"https",f="".concat(u,"://").concat(l),p=e==null?void 0:e.deliveryStrategy,h=p&&"strategy"in p&&p.strategy==="batching"?a1e(l,p.config):i1e(p==null?void 0:p.config);function b(m){return tt(this,void 0,void 0,function(){var T,A;return nt(this,function(N){return _5()?(o.push(m),El(d,o,v,El),[2,m]):(c.add(m),T=m.event.type.charAt(0),A=W2(m.event).json(),m.event.type==="track"&&delete A.traits,m.event.type==="alias"&&(A=d1e(t,A)),o.getAttempts(m)>=o.maxAttempts?(c.delete(m),[2,m]):[2,h.dispatch("".concat(f,"/").concat(T),s1e(t,A,e,n,m)).then(function(){return m}).catch(function(R){if(m.log("error","Error sending event",R),R.name==="RateLimitError"){var B=R.retryTimeout;o.pushWithBackoff(m,B)}else o.pushWithBackoff(m);return El(d,o,v,El),m}).finally(function(){c.delete(m)})])})})}var v={metadata:{writeKey:s,apiHost:l,protocol:u},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:b,identify:b,page:b,alias:b,group:b,screen:b};return o.todo&&El(d,o,v,El),v}var Ic="This is being deprecated and will be not be available in future releases of Analytics JS",fg=r_(),pg=fg==null?void 0:fg.analytics;function f1e(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=e?10:1,a=n?new e_(r,[]):new a_(r,t);return new Joe(a)}var p1e=function(){function t(e,n){var r;this.timeout=300,this._getSegmentPluginMetadata=function(){var i;return(i=n.plugins.find(l1e))===null||i===void 0?void 0:i.metadata},this.writeKey=e.writeKey;var a={integrations:{"Segment.io":{apiKey:""}}};this.cdnSettings=(r=e.cdnSettings)!==null&&r!==void 0?r:a,this.cdnURL=e.cdnURL}return Object.defineProperty(t.prototype,"apiHost",{get:function(){var e,n;return(n=(e=this._getSegmentPluginMetadata)===null||e===void 0?void 0:e.call(this))===null||n===void 0?void 0:n.apiHost},enumerable:!1,configurable:!0}),t}();function Qi(){console.warn(Ic)}var nB=function(t){sa(e,t);function e(n,r,a,i,s){var o=this,c,d;o=t.call(this)||this,o._debug=!1,o.initialized=!1,o.user=function(){return o._user},o.init=o.initialize.bind(o),o.log=Qi,o.addIntegrationMiddleware=Qi,o.listeners=Qi,o.addEventListener=Qi,o.removeAllListeners=Qi,o.removeListener=Qi,o.removeEventListener=Qi,o.hasListeners=Qi,o.add=Qi,o.addIntegration=Qi;var l=r==null?void 0:r.cookie,u=(c=r==null?void 0:r.disableClientPersistence)!==null&&c!==void 0?c:!1;o.queue=a??f1e("".concat(n.writeKey,":event-queue"),r==null?void 0:r.retryQueue,u),o.settings=new p1e(n,o.queue);var f=r==null?void 0:r.storage;return o._universalStorage=o.createStore(u,f,l),o._user=i??new jL(Ie({persist:!u,storage:r==null?void 0:r.storage},r==null?void 0:r.user),l).load(),o._group=s??new rce(Ie({persist:!u,storage:r==null?void 0:r.storage},r==null?void 0:r.group),l).load(),o.eventFactory=new Koe(o._user),o.integrations=(d=r==null?void 0:r.integrations)!==null&&d!==void 0?d:{},o.options=r??{},i_(o),o}return e.prototype.createStore=function(n,r,a){return n?new bd([new s_]):r&&FL(r)?new bd(aw(UL(r.stores,a))):new bd(aw([Zr.LocalStorage,{name:Zr.Cookie,settings:a},Zr.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s,o,c,d,l,u=this;return nt(this,function(f){return a=wl(n),i=Poe.apply(void 0,n),s=i[0],o=i[1],c=i[2],d=i[3],l=this.eventFactory.track(s,o,c,this.integrations,a),[2,this._dispatch(l,d).then(function(p){return u.emit("track",s,p.event.properties,p.event.options),p})]})})},e.prototype.page=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s,o,c,d,l,u,f=this;return nt(this,function(p){return a=wl(n),i=xC.apply(void 0,n),s=i[0],o=i[1],c=i[2],d=i[3],l=i[4],u=this.eventFactory.page(s,o,c,d,this.integrations,a),[2,this._dispatch(u,l).then(function(h){return f.emit("page",s,o,h.event.properties,h.event.options),h})]})})},e.prototype.identify=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s,o,c,d,l,u=this;return nt(this,function(f){return a=wl(n),i=SC(this._user).apply(void 0,n),s=i[0],o=i[1],c=i[2],d=i[3],this._user.identify(s,o),l=this.eventFactory.identify(this._user.id(),this._user.traits(),c,this.integrations,a),[2,this._dispatch(l,d).then(function(p){return u.emit("identify",p.event.userId,p.event.traits,p.event.options),p})]})})},e.prototype.group=function(){for(var n=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var i=wl(r);if(r.length===0)return this._group;var s=SC(this._group).apply(void 0,r),o=s[0],c=s[1],d=s[2],l=s[3];this._group.identify(o,c);var u=this._group.id(),f=this._group.traits(),p=this.eventFactory.group(u,f,d,this.integrations,i);return this._dispatch(p,l).then(function(h){return n.emit("group",h.event.groupId,h.event.traits,h.event.options),h})},e.prototype.alias=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s,o,c,d,l,u=this;return nt(this,function(f){return a=wl(n),i=koe.apply(void 0,n),s=i[0],o=i[1],c=i[2],d=i[3],l=this.eventFactory.alias(s,o,c,this.integrations,a),[2,this._dispatch(l,d).then(function(p){return u.emit("alias",s,o,p.event.options),p})]})})},e.prototype.screen=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s,o,c,d,l,u,f=this;return nt(this,function(p){return a=wl(n),i=xC.apply(void 0,n),s=i[0],o=i[1],c=i[2],d=i[3],l=i[4],u=this.eventFactory.screen(s,o,c,d,this.integrations,a),[2,this._dispatch(u,l).then(function(h){return f.emit("screen",s,o,h.event.properties,h.event.options),h})]})})},e.prototype.trackClick=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i;return nt(this,function(s){switch(s.label){case 0:return[4,xt(()=>import("./auto-track-CcWRkuEq.js"),__vite__mapDeps([5,1,2,3,4]))];case 1:return a=s.sent(),[2,(i=a.link).call.apply(i,o0([this],n,!1))]}})})},e.prototype.trackLink=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i;return nt(this,function(s){switch(s.label){case 0:return[4,xt(()=>import("./auto-track-CcWRkuEq.js"),__vite__mapDeps([5,1,2,3,4]))];case 1:return a=s.sent(),[2,(i=a.link).call.apply(i,o0([this],n,!1))]}})})},e.prototype.trackSubmit=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i;return nt(this,function(s){switch(s.label){case 0:return[4,xt(()=>import("./auto-track-CcWRkuEq.js"),__vite__mapDeps([5,1,2,3,4]))];case 1:return a=s.sent(),[2,(i=a.form).call.apply(i,o0([this],n,!1))]}})})},e.prototype.trackForm=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i;return nt(this,function(s){switch(s.label){case 0:return[4,xt(()=>import("./auto-track-CcWRkuEq.js"),__vite__mapDeps([5,1,2,3,4]))];case 1:return a=s.sent(),[2,(i=a.form).call.apply(i,o0([this],n,!1))]}})})},e.prototype.register=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s=this;return nt(this,function(o){switch(o.label){case 0:return a=$o.system(),i=n.map(function(c){return s.queue.register(a,c,s)}),[4,Promise.all(i)];case 1:return o.sent(),[2,a]}})})},e.prototype.deregister=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return tt(this,void 0,void 0,function(){var a,i,s=this;return nt(this,function(o){switch(o.label){case 0:return a=$o.system(),i=n.map(function(c){var d=s.queue.plugins.find(function(l){return l.name===c});if(d)return s.queue.deregister(a,d,s);a.log("warn","plugin ".concat(c," not found"))}),[4,Promise.all(i)];case 1:return o.sent(),[2,a]}})})},e.prototype.debug=function(n){return n===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=n,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(n){this.settings.timeout=n},e.prototype._dispatch=function(n,r){return tt(this,void 0,void 0,function(){var a;return nt(this,function(i){return a=new $o(n),a.stats.increment("analytics_js.invoke",1,[n.type]),_5()&&!this.options.retryQueue?[2,a]:[2,Moe(a,this.queue,this,{callback:r,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(n){return tt(this,void 0,void 0,function(){var r=this;return nt(this,function(a){switch(a.label){case 0:return[4,this.queue.criticalTasks.run(function(){return tt(r,void 0,void 0,function(){var i,s,o;return nt(this,function(c){switch(c.label){case 0:return[4,xt(()=>Promise.resolve().then(()=>M1e),void 0)];case 1:return i=c.sent().sourceMiddlewarePlugin,s={},this.queue.plugins.forEach(function(d){if(d.type==="destination")return s[d.name]=!0}),o=i(n,s),[4,this.register(o)];case 2:return c.sent(),[2]}})})})];case 1:return a.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(n){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return this.queue.plugins.filter(Voe).forEach(function(i){(n==="*"||i.name.toLowerCase()===n.toLowerCase())&&i.addMiddleware.apply(i,r)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(n){return this._user.anonymousId(n)},e.prototype.queryString=function(n){return tt(this,void 0,void 0,function(){var r;return nt(this,function(a){switch(a.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,xt(()=>import("./index-Mn8Tp5qd.js"),__vite__mapDeps([6,1,2,3,4]))];case 1:return r=a.sent().queryString,[2,r(this,n)]}})})},e.prototype.use=function(n){return n(this),this},e.prototype.ready=function(n){return n===void 0&&(n=function(r){return r}),tt(this,void 0,void 0,function(){return nt(this,function(r){return[2,Promise.all(this.queue.plugins.map(function(a){return a.ready?a.ready():Promise.resolve()})).then(function(a){return n(a),a})]})})},e.prototype.noConflict=function(){return console.warn(Ic),ice(pg??this),this},e.prototype.normalize=function(n){return console.warn(Ic),this.eventFactory.normalize(n)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(Ic),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return Vy},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n,r){return tt(this,void 0,void 0,function(){return nt(this,function(a){return console.warn(Ic),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(n){return tt(this,void 0,void 0,function(){return nt(this,function(r){switch(r.label){case 0:return console.warn(Ic),[4,this.page({path:n})];case 1:return r.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var n;return console.warn(Ic),(n=this._plugins)!==null&&n!==void 0?n:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){console.warn(Ic);var n=this.queue.plugins.filter(function(r){return r.type==="destination"}).reduce(function(r,a){var i="".concat(a.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),s=window[i];if(!s)return r;var o=s.Integration;return o?(r[a.name]=o,r):(r[a.name]=s,r)},{});return n},enumerable:!1,configurable:!0}),e.prototype.push=function(n){var r=this,a=n.shift();a&&!r[a]||r[a].apply(this,n)},e}(QE),kC=function(t){sa(e,t);function e(){var n=t.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return n.initialized=!0,n}return e}(nB),NC={};function rB(){return typeof process>"u"||!NC?{}:NC}var h1e=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,b1e=function(){var t,e=Array.prototype.slice.call(document.querySelectorAll("script"));return e.forEach(function(n){var r,a=(r=n.getAttribute("src"))!==null&&r!==void 0?r:"",i=h1e.exec(a);i&&i[1]&&(t=i[1])}),t},Jb,y1e=function(){var t,e=Jb??((t=HL())===null||t===void 0?void 0:t._cdn);return e},m1e=function(t){var e=HL();e&&(e._cdn=t),Jb=t},__=function(){var t=y1e();if(t)return t;var e=b1e();return e||"https://cdn.segment.com"},cHe=function(){var t=__();return"".concat(t,"/next-integrations")};function g1e(t,e){var n,r=Object.entries((n=e.integrations)!==null&&n!==void 0?n:{}).reduce(function(a,i){var s,o,c=i[0],d=i[1];return typeof d=="object"?Ie(Ie({},a),(s={},s[c]=d,s)):Ie(Ie({},a),(o={},o[c]={},o))},{});return Object.entries(t.integrations).reduce(function(a,i){var s,o=i[0],c=i[1];return Ie(Ie({},a),(s={},s[o]=Ie(Ie({},c),r[o]),s))},{})}function w1e(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch{return t}}function v1e(t){return tt(this,void 0,void 0,function(){var e;return nt(this,function(n){return e=navigator.userAgentData,e?t?[2,e.getHighEntropyValues(t).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}var uf;function E1e(){if(uf)return uf;var t=LL(window.location.href);return uf={expires:31536e6,secure:!1,path:"/"},t&&(uf.domain=t),uf}function _1e(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1)),t=t.replace(/\?/g,"&");for(var n=t.split("&"),r=0,a=n;r<a.length;r++){var i=a[r],s=i.split("="),o=s[0],c=s[1];if(e[o])return{id:c,type:e[o]}}}function T1e(t){return t.startsWith("?")&&(t=t.substring(1)),t=t.replace(/\?/g,"&"),t.split("&").reduce(function(e,n){var r=n.split("="),a=r[0],i=r[1],s=i===void 0?"":i;if(a.includes("utm_")&&a.length>4){var o=a.slice(4);o==="campaign"&&(o="name"),e[o]=w1e(s)}return e},{})}function x1e(){var t=Ao.get("_ga");if(t&&t.startsWith("amp"))return t}function S1e(t,e,n){var r,a=new bd(n?[]:[new BL(E1e())]),i=a.get("s:context.referrer"),s=(r=_1e(t))!==null&&r!==void 0?r:i;s&&(e&&(e.referrer=Ie(Ie({},e.referrer),s)),a.set("s:context.referrer",s))}var A1e=function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach(function(n){var r=n[0],a=n[1];Array.isArray(a)?a.forEach(function(i){return e.append(r,i)}):e.append(r,a)}),e.toString()}catch{return""}},C1e=function(){function t(){var e=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(n,r){return tt(e,void 0,void 0,function(){var a;return nt(this,function(i){switch(i.label){case 0:this.instance=r,i.label=1;case 1:return i.trys.push([1,3,,4]),a=this,[4,v1e(this.instance.options.highEntropyValuesClientHints)];case 2:return a.userAgentData=i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(n){var r,a,i=n.event.context,s=i.page.search||"",o=typeof s=="object"?A1e(s):s;i.userAgent=navigator.userAgent,i.userAgentData=e.userAgentData;var c=navigator.userLanguage||navigator.language;typeof i.locale>"u"&&typeof c<"u"&&(i.locale=c),(r=i.library)!==null&&r!==void 0||(i.library={name:"analytics.js",version:"".concat("npm:next","-").concat(Vy)}),o&&!i.campaign&&(i.campaign=T1e(o));var d=x1e();d&&(i.amp={id:d}),S1e(o,i,(a=e.instance.options.disableClientPersistence)!==null&&a!==void 0?a:!1);try{i.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return n},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return t}(),I1e=new C1e;function aB(t){var e=Array.prototype.slice.call(window.document.querySelectorAll("script"));return e.find(function(n){return n.src===t})}function hg(t,e){var n=aB(t);if(n!==void 0){var r=n==null?void 0:n.getAttribute("status");if(r==="loaded")return Promise.resolve(n);if(r==="loading")return new Promise(function(a,i){n.addEventListener("load",function(){return a(n)}),n.addEventListener("error",function(s){return i(s)})})}return new Promise(function(a,i){var s,o=window.document.createElement("script");o.type="text/javascript",o.src=t,o.async=!0,o.setAttribute("status","loading");for(var c=0,d=Object.entries({});c<d.length;c++){var l=d[c],u=l[0],f=l[1];o.setAttribute(u,f)}o.onload=function(){o.onerror=o.onload=null,o.setAttribute("status","loaded"),a(o)},o.onerror=function(){o.onerror=o.onload=null,o.setAttribute("status","error"),i(new Error("Failed to load ".concat(t)))};var p=window.document.querySelector("script");p?(s=p.parentElement)===null||s===void 0||s.insertBefore(o,p):window.document.head.appendChild(o)})}function dHe(t){var e=aB(t);return e!==void 0&&e.remove(),Promise.resolve()}function iB(t,e,n){return tt(this,void 0,void 0,function(){function r(d,l){return tt(this,void 0,void 0,function(){var u,f,p;return nt(this,function(h){switch(h.label){case 0:return u=!1,f=null,[4,l({payload:W2(d,{clone:!0,traverse:!1}),integration:t,next:function(b){u=!0,b===null&&(f=null),b&&(f=b.obj)}})];case 1:return h.sent(),!u&&f!==null&&(f=f,f.integrations=Ie(Ie({},d.integrations),(p={},p[t]=!1,p))),[2,f]}})})}var a,i,s,o,c;return nt(this,function(d){switch(d.label){case 0:a=W2(e,{clone:!0,traverse:!1}).rawEvent(),i=0,s=n,d.label=1;case 1:return i<s.length?(o=s[i],[4,r(a,o)]):[3,4];case 2:if(c=d.sent(),c===null)return[2,null];a=c,d.label=3;case 3:return i++,[3,1];case 4:return[2,a]}})})}function O1e(t,e){function n(r){return tt(this,void 0,void 0,function(){var a;return nt(this,function(i){switch(i.label){case 0:return a=!1,[4,t({payload:W2(r.event,{clone:!0,traverse:!1}),integrations:e??{},next:function(s){a=!0,s&&(r.event=s.obj)}})];case 1:if(i.sent(),!a)throw new U6({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,r]}})})}return{name:"Source Middleware ".concat(t.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(r){return Promise.resolve(r)},track:n,page:n,screen:n,identify:n,alias:n,group:n}}const M1e=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:iB,sourceMiddlewarePlugin:O1e},Symbol.toStringTag,{value:"Module"}));function Hh(t,e){var n=e.methodName,r=e.integrationName,a=e.type,i=e.didError,s=i===void 0?!1:i;t.stats.increment("analytics_js.integration.invoke".concat(s?".error":""),1,["method:".concat(n),"integration_name:".concat(r),"type:".concat(a)])}var P1e=function(){function t(e,n){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=AL(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=n,this.name=e,this.type=n.type,this.alternativeNames.push(n.name)}return t.prototype.addMiddleware=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this.type==="destination"&&(e=this.middleware).push.apply(e,n)},t.prototype.transform=function(e){return tt(this,void 0,void 0,function(){var n;return nt(this,function(r){switch(r.label){case 0:return[4,iB(this.name,e.event,this.middleware)];case 1:return n=r.sent(),n===null&&e.cancel(new U6({retry:!1,reason:"dropped by destination middleware"})),[2,new $o(n)]}})})},t.prototype._createMethod=function(e){var n=this;return function(r){return tt(n,void 0,void 0,function(){var a,i;return nt(this,function(s){switch(s.label){case 0:return this.action[e]?(a=r,this.type!=="destination"?[3,2]:[4,this.transform(r)]):[2,r];case 1:a=s.sent(),s.label=2;case 2:return s.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!s.sent())throw new Error("Something prevented the destination from getting ready");return Hh(r,{integrationName:this.action.name,methodName:e,type:"action"}),[4,this.action[e](a)];case 4:return s.sent(),[3,6];case 5:throw i=s.sent(),Hh(r,{integrationName:this.action.name,methodName:e,type:"action",didError:!0}),i;case 6:return[2,r]}})})}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return tt(this,void 0,void 0,function(){return nt(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return e.sent(),[2,!0];case 2:return e.sent(),[2,!1];case 3:return[2]}})})},t.prototype.load=function(e,n){return tt(this,void 0,void 0,function(){var r,a,i,s;return nt(this,function(o){switch(o.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];o.label=1;case 1:return o.trys.push([1,3,,4]),Hh(e,{integrationName:this.action.name,methodName:"load",type:"action"}),r=this.action.load(e,n),i=(a=this.loadPromise).resolve,[4,r];case 2:return i.apply(a,[o.sent()]),[2,r];case 3:throw s=o.sent(),Hh(e,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(s),s;case 4:return[2]}})})},t.prototype.unload=function(e,n){var r,a;return(a=(r=this.action).unload)===null||a===void 0?void 0:a.call(r,e,n)},t}();function k1e(t){if(!Array.isArray(t))throw new Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];return t.forEach(function(n){e.forEach(function(r){var a;if(n[r]===void 0)throw new Error("Plugin: ".concat((a=n.name)!==null&&a!==void 0?a:"unknown"," missing required function ").concat(r))})}),!0}function N1e(t,e){var n=t[e.creationName],r=t[e.name];return t.All===!1&&!n&&!r||n===!1||r===!1}function R1e(t,e){return tt(this,void 0,void 0,function(){var n,r,a,i,s,o;return nt(this,function(c){switch(c.label){case 0:if(c.trys.push([0,9,,10]),n=new RegExp("https://cdn.segment.(com|build)"),r=__(),!e)return[3,6];a=t.url.split("/"),i=a[a.length-2],s=t.url.replace(i,btoa(i).replace(/=/g,"")),c.label=1;case 1:return c.trys.push([1,3,,5]),[4,hg(s.replace(n,r))];case 2:return c.sent(),[3,5];case 3:return c.sent(),[4,hg(t.url.replace(n,r))];case 4:return c.sent(),[3,5];case 5:return[3,8];case 6:return[4,hg(t.url.replace(n,r))];case 7:c.sent(),c.label=8;case 8:return typeof window[t.libraryName]=="function"?[2,window[t.libraryName]]:[3,10];case 9:throw o=c.sent(),console.error("Failed to create PluginFactory",t),o;case 10:return[2]}})})}function D1e(t,e,n,r,a,i){var s,o,c;return tt(this,void 0,void 0,function(){var d,l,u,f=this;return nt(this,function(p){switch(p.label){case 0:return d=[],l=(o=(s=t.middlewareSettings)===null||s===void 0?void 0:s.routingRules)!==null&&o!==void 0?o:[],u=((c=t.remotePlugins)!==null&&c!==void 0?c:[]).map(function(h){return tt(f,void 0,void 0,function(){var b,v,m,T,A,N,R;return nt(this,function(B){switch(B.label){case 0:if(N1e(e,h))return[2];B.label=1;case 1:return B.trys.push([1,6,,7]),v=i==null?void 0:i.find(function(F){var I=F.pluginName;return I===h.name}),v?[3,3]:[4,R1e(h,r==null?void 0:r.obfuscate)];case 2:v=B.sent(),B.label=3;case 3:return b=v,b?(m=n[h.name],[4,b(Ie(Ie({},h.settings),m))]):[3,5];case 4:T=B.sent(),A=Array.isArray(T)?T:[T],k1e(A),N=l.filter(function(F){return F.destinationName===h.creationName}),A.forEach(function(F){var I=new P1e(h.creationName,F);N.length&&a&&I.addMiddleware(a),d.push(I)}),B.label=5;case 5:return[3,7];case 6:return R=B.sent(),console.warn("Failed to load Remote Plugin",R),[3,7];case 7:return[2]}})})}),[4,Promise.all(u)];case 1:return p.sent(),[2,d.filter(Boolean)]}})})}var bg,RC,$1e=r_(),DC=(bg=(RC=$1e).__SEGMENT_INSPECTOR__)!==null&&bg!==void 0?bg:RC.__SEGMENT_INSPECTOR__={},L1e=function(t){var e;return(e=DC.attach)===null||e===void 0?void 0:e.call(DC,t)};function B1e(t,e){return Ky("".concat(e,"/v1/projects/").concat(t,"/settings")).then(function(n){return n.ok?n.json():n.text().then(function(r){throw new Error(r)})}).catch(function(n){throw console.error(n.message),n})}function F1e(t){return rB().NODE_ENV!=="test"&&Object.keys(t.integrations).length>1}function U1e(t){var e,n,r;return rB().NODE_ENV!=="test"&&((r=(n=(e=t.middlewareSettings)===null||e===void 0?void 0:e.routingRules)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0)>0}function j1e(t,e){lce(t,e),dce(t,e)}function H1e(t,e,n){return tt(this,void 0,void 0,function(){return nt(this,function(r){switch(r.label){case 0:return[4,q1e(t,e)];case 1:return r.sent(),uce(t,n),[2]}})})}var z1e=function(){var t,e,n=(t=window.location.hash)!==null&&t!==void 0?t:"",r=(e=window.location.search)!==null&&e!==void 0?e:"",a=r.length?r:n.replace(/(?=#).*(?=\?)/,"");return a},q1e=function(t,e){return tt(void 0,void 0,void 0,function(){return nt(this,function(n){switch(n.label){case 0:return e.includes("ajs_")?[4,t.queryString(e).catch(console.error)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})};function K1e(t,e,n,r,a,i,s){var o,c,d;return a===void 0&&(a=[]),tt(this,void 0,void 0,function(){var l,u,f,p,h,b,v,m,T,A,N,R,B,F,I,P=this;return nt(this,function($){switch($.label){case 0:return j1e(n,s),l=a==null?void 0:a.filter(function(M){return typeof M=="object"}),u=a==null?void 0:a.filter(function(M){return typeof M=="function"&&typeof M.pluginName=="string"}),U1e(e)?[4,xt(()=>import("./index-D6ZMQedT.js"),[]).then(function(M){return M.tsubMiddleware(e.middlewareSettings.routingRules)})]:[3,2];case 1:return p=$.sent(),[3,3];case 2:p=void 0,$.label=3;case 3:return f=p,F1e(e)||i.length>0?[4,xt(()=>import("./index-DSGJ3dfg.js"),__vite__mapDeps([7,2,3,8,1,4])).then(function(M){return M.ajsDestinations(t,e,n.integrations,r,f,i)})]:[3,5];case 4:return b=$.sent(),[3,6];case 5:b=[],$.label=6;case 6:return h=b,e.legacyVideoPluginsEnabled?[4,xt(()=>import("./index-UhG_-a69.js"),__vite__mapDeps([9,2,3])).then(function(M){return M.loadLegacyVideoPlugins(n)})]:[3,8];case 7:$.sent(),$.label=8;case 8:return!((o=r.plan)===null||o===void 0)&&o.track?[4,xt(()=>import("./index-BuSSWMy4.js"),__vite__mapDeps([10,2,3,8])).then(function(M){var y;return M.schemaFilter((y=r.plan)===null||y===void 0?void 0:y.track,e)})]:[3,10];case 9:return m=$.sent(),[3,11];case 10:m=void 0,$.label=11;case 11:return v=m,T=g1e(e,r),[4,D1e(e,n.integrations,T,r,f,u).catch(function(){return[]})];case 12:return A=$.sent(),N=o0(o0([I1e],h,!0),A,!0),v&&N.push(v),R=((c=r.integrations)===null||c===void 0?void 0:c.All)===!1&&!r.integrations["Segment.io"]||r.integrations&&r.integrations["Segment.io"]===!1,R?[3,14]:(F=(B=N).push,[4,u1e(n,T["Segment.io"],e.integrations)]);case 13:F.apply(B,[$.sent()]),$.label=14;case 14:return[4,n.register.apply(n,o0(o0([],N,!1),l,!1))];case 15:return I=$.sent(),[4,cce(n,s)];case 16:return $.sent(),Object.entries((d=e.enabledMiddleware)!==null&&d!==void 0?d:{}).some(function(M){var y=M[1];return y})?[4,xt(()=>import("./index-RFp_BNDJ.js"),__vite__mapDeps([11,2,3,1,4])).then(function(M){var y=M.remoteMiddlewares;return tt(P,void 0,void 0,function(){var E,C;return nt(this,function(g){switch(g.label){case 0:return[4,y(I,e,r.obfuscate)];case 1:return E=g.sent(),C=E.map(function(x){return n.addSourceMiddleware(x)}),[2,Promise.all(C)]}})})})]:[3,18];case 17:$.sent(),$.label=18;case 18:return[4,oce(n,s)];case 19:return $.sent(),[2,I]}})})}function V1e(t,e,n){var r,a,i,s,o,c,d,l,u;return e===void 0&&(e={}),tt(this,void 0,void 0,function(){var f,p,h,b,v,m,T,A,N,R,B;return nt(this,function(F){switch(F.label){case 0:return e.disable===!0?[2,[new kC,$o.system()]]:(e.globalAnalyticsKey&&ace(e.globalAnalyticsKey),t.cdnURL&&m1e(t.cdnURL),e.initialPageview&&n.add(new iw("page",[])),f=z1e(),p=(r=t.cdnURL)!==null&&r!==void 0?r:__(),(a=t.cdnSettings)!==null&&a!==void 0?(b=a,[3,3]):[3,1]);case 1:return[4,B1e(t.writeKey,p)];case 2:b=F.sent(),F.label=3;case 3:return h=b,e.updateCDNSettings&&(h=e.updateCDNSettings(h)),typeof e.disable!="function"?[3,5]:[4,e.disable(h)];case 4:if(v=F.sent(),v)return[2,[new kC,$o.system()]];F.label=5;case 5:return m=(s=(i=h.integrations["Segment.io"])===null||i===void 0?void 0:i.retryQueue)!==null&&s!==void 0?s:!0,e=Ie({retryQueue:m},e),T=new nB(Ie(Ie({},t),{cdnSettings:h,cdnURL:p}),e),L1e(T),A=(o=t.plugins)!==null&&o!==void 0?o:[],N=(c=t.classicIntegrations)!==null&&c!==void 0?c:[],R=(d=e.integrations)===null||d===void 0?void 0:d["Segment.io"],ML.initRemoteMetrics(Ie(Ie({},h.metrics),{host:(l=R==null?void 0:R.apiHost)!==null&&l!==void 0?l:(u=h.metrics)===null||u===void 0?void 0:u.host,protocol:R==null?void 0:R.protocol})),[4,K1e(t.writeKey,h,T,e,A,N,n)];case 6:return B=F.sent(),T.initialized=!0,T.emit("initialize",t,e),[4,H1e(T,f,n)];case 7:return F.sent(),[2,[T,B]]}})})}var W1e=function(t){sa(e,t);function e(){var n=this,r=AL(),a=r.promise,i=r.resolve;return n=t.call(this,function(s){return a.then(function(o){var c=o[0],d=o[1];return V1e(c,d,s)})})||this,n._resolveLoadStart=function(s,o){return i([s,o])},n}return e.prototype.load=function(n,r){return r===void 0&&(r={}),this._resolveLoadStart(n,r),this},e.load=function(n,r){return r===void 0&&(r={}),new e().load(n,r)},e.standalone=function(n,r){return e.load({writeKey:n},r).then(function(a){return a[0]})},e}(pce);const G1e=globalThis,sB=Object.prototype.toString;function Y1e(t){switch(sB.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return n3(t,Error)}}function oB(t,e){return sB.call(t)===`[object ${e}]`}function J1e(t){return oB(t,"String")}function Z1e(t){return oB(t,"Object")}function X1e(t){return typeof Event<"u"&&n3(t,Event)}function Q1e(t){return typeof Element<"u"&&n3(t,Element)}function ede(t){return Z1e(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function n3(t,e){try{return t instanceof e}catch{return!1}}function tde(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}const nde=G1e,rde=80;function ade(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,a=[];let i=0,s=0;const o=" > ",c=o.length;let d;const l=Array.isArray(e)?e:e.keyAttrs,u=!Array.isArray(e)&&e.maxStringLength||rde;for(;n&&i++<r&&(d=ide(n,l),!(d==="html"||i>1&&s+a.length*c+d.length>=u));)a.push(d),s+=d.length,n=n.parentNode;return a.reverse().join(o)}catch{return"<unknown>"}}function ide(t,e){const n=t,r=[];if(!(n!=null&&n.tagName))return"";if(nde.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const a=e!=null&&e.length?e.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(a!=null&&a.length)a.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const s=n.className;if(s&&J1e(s)){const o=s.split(/\s+/);for(const c of o)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const s of i){const o=n.getAttribute(s);o&&r.push(`[${s}="${o}"]`)}return r.join("")}function sde(t){if(Y1e(t))return{message:t.message,name:t.name,stack:t.stack,...LC(t)};if(X1e(t)){const e={type:t.type,target:$C(t.target),currentTarget:$C(t.currentTarget),...LC(t)};return typeof CustomEvent<"u"&&n3(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function $C(t){try{return Q1e(t)?ade(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function LC(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}const yg="<anonymous>";function ode(t){try{return!t||typeof t!="function"?yg:t.name||yg}catch{return yg}}function cde(t,e=100,n=1/0){try{return dw("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function dw(t,e,n=1/0,r=1/0,a=ude()){const[i,s]=a;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const o=dde(t,e);if(!o.startsWith("[object "))return o;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return o.replace("object ","");if(i(e))return"[Circular ~]";const d=e;if(d&&typeof d.toJSON=="function")try{const p=d.toJSON();return dw("",p,c-1,r,a)}catch{}const l=Array.isArray(e)?[]:{};let u=0;const f=sde(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(u>=r){l[p]="[MaxProperties ~]";break}const h=f[p];l[p]=dw(p,h,c-1,r,a),u++}return s(e),l}function dde(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(tde(e))return"[VueViewModel]";if(ede(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${ode(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=lde(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function lde(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function ude(){const t=new WeakSet;function e(r){return t.has(r)?!0:(t.add(r),!1)}function n(r){t.delete(r)}return[e,n]}class Zf{constructor(e){re(this,"sentry",void 0),re(this,"category",void 0),this.sentry=e,this.category="loglevel-sentry"}static async translateError(e){const n=e.findIndex(d=>d instanceof Error),r=e.findIndex(d=>typeof d=="string"),a=e.findIndex(d=>d&&typeof d=="object"&&"status"in d&&"type"in d),i=e.findIndex(d=>d&&typeof d=="object"&&"isAxiosError"in d&&d.isAxiosError===!0);let s;if(a!==-1){var o;const d=e[a],l=(o=d.headers)===null||o===void 0?void 0:o.get("content-type");if(l.includes("application/json")){const u=await d.json();s=new Error((u==null?void 0:u.error)||(u==null?void 0:u.message)||JSON.stringify(u))}else l.includes("text/plain")?s=new Error(await d.text()):s=new Error(`${d.status} ${d.type.toString()} ${d.statusText}`)}else if(i!==-1){const l=e[i].response;if(l){var c;const u=(c=l.headers)===null||c===void 0?void 0:c["content-type"];if(u.includes("application/json")){const f=l.data,p="error"in f?f.error:"message"in f?f.message:JSON.stringify(f);s=new Error(p)}else u.includes("text/plain")?s=new Error(l.data):s=new Error(`${l.status} ${l.data.toString()}`)}else s=new Error("Network error")}else n!==-1?s=e.splice(n,1)[0]:r!==-1?s=new Error(e.splice(r,1)[0]):s=new Error("Unknown error");return[s,e]}static translateArgs(e){const n=e.findIndex(a=>typeof a=="string"),r=n!==-1?e.splice(n,1)[0]:void 0;return r?{message:r,data:{arguments:e}}:{data:{arguments:e}}}static translateLevel(e){switch(e){case"info":return"info";case"warn":return"warning";default:return"debug"}}install(e){const n=e.methodFactory;e.methodFactory=(r,a,i)=>{i&&(this.category=i.toString());const s=n(r,a,i),o=typeof window<"u",c=(...d)=>{var l;const u=(l=this.sentry)===null||l===void 0?void 0:l.getActiveSpan(),{traceId:f,spanId:p}=(u==null?void 0:u.spanContext())||{},h=r==="error"&&d.length>=1&&d[0]instanceof Error;if(o){if(h){const m=d[0],T=f||p?`${m.message}: traceId: ${f} - spanId: ${p}`:m.message,N=[new Error(T,{cause:m}),...d.slice(1)];s&&s(...N);return}s&&s(...d)}else{let m={timestamp:new Date,level:r.toUpperCase(),logger:i};if((f||p)&&(m=Q(Q({},m),{},{traceId:f,spanId:p})),h){var b;const T=d[0];m=Q(Q({},m),{},{message:(b=T.message)!==null&&b!==void 0?b:"",stack:T.stack,extra:d.length>1?d.slice(1):void 0})}else{var v;m=Q(Q({},m),{},{message:(v=d[0])!==null&&v!==void 0?v:"",extra:d.length>1?d.slice(1):void 0})}s&&s(JSON.stringify(cde(m)))}};switch(r){case"error":return async(...d)=>{const{stack:l}=d.find(p=>p instanceof Error)||new Error,[u,f]=await Zf.translateError(d);u.stack=l,this.error(u,...f),c(u,...f)};default:return(...d)=>{this.log(Zf.translateLevel(r),...d),c(...d)}}},e.setLevel(e.getLevel())}setEnabled(e){if(this.sentry){const n=this.sentry.getClient().getOptions();n&&(n.enabled=e)}}isEnabled(){if(this.sentry){var e;const n=this.sentry.getClient().getOptions();return(e=n==null?void 0:n.enabled)!==null&&e!==void 0?e:!1}return!1}log(e,...n){this.sentry&&this.sentry.addBreadcrumb(Q(Q({},Zf.translateArgs(n)),{},{category:this.category,level:e,timestamp:Date.now()}))}trace(...e){this.log("debug",...e)}error(e,...n){if(this.sentry){const r={data:{logger:"loglevel-sentry","logger.name":this.category,arguments:n}};this.sentry.captureException(e,r)}}}const Te=Yi.getLogger("web3auth-logger"),fde=new Zf;fde.install(Te);const pde="f6LbNqCeVRf512ggdME4b6CyflhF1tsX";let cB=class{constructor(){re(this,"segment",void 0),re(this,"globalProperties",{}),re(this,"enabled",!0)}init(){if(!this.isSkipped()){if(this.segment)throw new Error("Analytics already initialized");this.segment=new W1e,this.segment.load({writeKey:pde},{user:{cookie:{key:"web3auth_ajs_user_id"},localStorage:{key:"web3auth_ajs_user_traits"}},globalAnalyticsKey:"web3auth_analytics"}).then(()=>(Te.debug("Analytics initialized"),!0)).catch(e=>{Te.error("Failed to initialize Analytics",e)})}}enable(){this.enabled=!0}disable(){this.enabled=!1}setGlobalProperties(e){this.globalProperties=Q(Q({},this.globalProperties),e)}async identify(e,n){if(this.enabled&&!this.isSkipped())try{return this.getSegment().identify(e,Q({},n))}catch(r){Te.error(`Failed to identify user ${e} in analytics`,r)}}async track(e,n){if(this.enabled&&!this.isSkipped())try{return this.getSegment().track(e,Q(Q({},n),this.globalProperties))}catch(r){Te.error(`Failed to track event ${e}`,r)}}getSegment(){if(!this.segment)throw Te.error("Analytics not initialized. Call Analytics.init() first."),new Error("Analytics not initialized. Call Analytics.init() first.");return this.segment}isSkipped(){const e=window.location.origin;return!!(e.startsWith("http://")||e.includes("localhost"))}};const Lt={SDK_INITIALIZATION_COMPLETED:"SDK Initialization Completed",SDK_INITIALIZATION_FAILED:"SDK Initialization Failed",CONNECTION_STARTED:"Connection Started",CONNECTION_COMPLETED:"Connection Completed",CONNECTION_FAILED:"Connection Failed",IDENTITY_TOKEN_STARTED:"Identity Token Started",IDENTITY_TOKEN_COMPLETED:"Identity Token Completed",IDENTITY_TOKEN_FAILED:"Identity Token Failed",MFA_ENABLEMENT_STARTED:"MFA Enablement Started",MFA_ENABLEMENT_COMPLETED:"MFA Enablement Completed",MFA_ENABLEMENT_FAILED:"MFA Enablement Failed",MFA_MANAGEMENT_SELECTED:"MFA Management Selected",MFA_MANAGEMENT_FAILED:"MFA Management Failed",LOGIN_MODAL_OPENED:"Login Modal Opened",LOGIN_MODAL_CLOSED:"Login Modal Closed",SOCIAL_LOGIN_SELECTED:"Social Login Selected",EXTERNAL_WALLET_SELECTED:"External Wallet Selected",EXTERNAL_WALLET_LIST_EXPANDED:"External Wallet List Expanded",WALLET_UI_CLICKED:"Wallet UI Clicked",WALLET_CONNECT_SCANNER_CLICKED:"Wallet Connect Scanner Clicked",WALLET_CHECKOUT_CLICKED:"Wallet Checkout Clicked",WALLET_SWAP_CLICKED:"Wallet Swap Clicked"},dB={REACT_HOOKS:"React Hooks",VUE_COMPOSABLES:"Vue Composables",NATIVE_SDK:"Native SDK"},T_={WEB_NO_MODAL:"Web NoModal",WEB_MODAL:"Web Modal"};class Cr extends jD{constructor(e,n,r){super(n),re(this,"code",void 0),re(this,"message",void 0),re(this,"cause",void 0),this.code=e,this.message=n||"",this.cause=r,Object.defineProperty(this,"name",{value:"Web3AuthError"})}toJSON(){return{name:this.name,code:this.code,message:this.message,cause:this.cause}}toString(){return JSON.stringify(this.toJSON())}}class Me extends Cr{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletInitializationError"})}static fromCode(e,n="",r){return new Me(e,`${Me.messages[e]}, ${n}`,r)}static notFound(e="",n){return Me.fromCode(5001,e,n)}static notInstalled(e="",n){return Me.fromCode(5002,e,n)}static notReady(e="",n){return Me.fromCode(5003,e,n)}static windowBlocked(e="",n){return Me.fromCode(5004,e,n)}static windowClosed(e="",n){return Me.fromCode(5005,e,n)}static incompatibleChainNameSpace(e="",n){return Me.fromCode(5006,e,n)}static duplicateConnectorError(e="",n){return Me.fromCode(5007,e,n)}static invalidProviderConfigError(e="",n){return Me.fromCode(5008,e,n)}static providerNotReadyError(e="",n){return Me.fromCode(5009,e,n)}static rpcConnectionError(e="",n){return Me.fromCode(5010,e,n)}static invalidParams(e="",n){return Me.fromCode(5011,e,n)}static invalidNetwork(e="",n){return Me.fromCode(5013,e,n)}}re(Me,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Connector has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});class Pe extends Cr{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletLoginError"})}static fromCode(e,n="",r){return new Pe(e,`${Pe.messages[e]}. ${n}`,r)}static connectionError(e="",n){return Pe.fromCode(5111,e,n)}static disconnectionError(e="",n){return Pe.fromCode(5112,e,n)}static notConnectedError(e="",n){return Pe.fromCode(5113,e,n)}static popupClosed(e="",n){return Pe.fromCode(5114,e,n)}static mfaEnabled(e="",n){return Pe.fromCode(5115,e,n)}static chainConfigNotAdded(e="",n){return Pe.fromCode(5116,e,n)}static unsupportedOperation(e="",n){return Pe.fromCode(5117,e,n)}static sfaKeyNotFound(e="",n){return Pe.fromCode(5118,e,n)}static userNotLoggedIn(e="",n){return Pe.fromCode(5119,e,n)}}re(Pe,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user",5115:"User has already enabled mfa, please use the @web3auth/web3auth-web sdk for login with mfa",5116:"Chain config has not been added. Please add the chain config before calling switchChain",5117:"Unsupported operation",5118:"useSFAKey flag is enabled but SFA key is not available",5119:"User not logged in."});class ci extends Cr{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletOperationsError"})}static fromCode(e,n="",r){return new ci(e,`${ci.messages[e]}, ${n}`,r)}static chainIDNotAllowed(e="",n){return ci.fromCode(5201,e,n)}static operationNotAllowed(e="",n){return ci.fromCode(5202,e,n)}static chainNamespaceNotAllowed(e="",n){return ci.fromCode(5203,e,n)}}re(ci,"messages",{5e3:"Custom",5201:"Provided chainId is not allowed",5202:"This operation is not allowed"});class bs extends Cr{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletProviderError"})}static fromCode(e,n="",r){return new ci(e,`${bs.messages[e]}, ${n}`,r)}static invalidRequestArgs(e="",n){return ci.fromCode(5301,e,n)}static invalidRequestMethod(e="",n){return ci.fromCode(5302,e,n)}static invalidRequestParams(e="",n){return ci.fromCode(5303,e,n)}}re(bs,"messages",{5e3:"Custom",5301:"Expected a single, non-array, object argument.",5302:"'args.method' must be a non-empty string.",5303:"'args.params' must be an object or array if provided."});const Zb=t=>(typeof t=="string"||typeof t=="number")&&/^(-)?0x[0-9a-f]*$/i.test(t),lB=(t=Wf.SAPPHIRE_MAINNET)=>pte[t],x_=async({clientId:t,web3AuthNetwork:e,aaProvider:n,authBuildEnv:r})=>{const a=new URL(`${lB(e)}/api/v2/configuration`);return a.searchParams.append("project_id",t),a.searchParams.append("network",e),r&&a.searchParams.append("build_env",r),n&&a.searchParams.append("aa_provider",n),await SE(a.href)},uB=async t=>await SE(t),S_=t=>{let e=t.toLowerCase();return e=e.split("|")[0],e=e.replace(/-/g," "),e=e.replace(/\s+/g," "),e=e.replace(/wallet$/i,"").trim(),e=e.replace(/\s/g,"-"),e};function ms(t,e,n){return e?e.aborted?Promise.reject(new DOMException("Aborted","AbortError")):new Promise((r,a)=>{const i=()=>{n==null||n(),a(new DOMException("Aborted","AbortError"))};return e.addEventListener("abort",i),Promise.resolve().then(()=>t()).then(r,a).finally(()=>{e.removeEventListener("abort",i)})}):t()}const Xb=()=>typeof window<"u"&&typeof document<"u",A_=t=>{var e,n;return{whitelabel_app_name:t==null?void 0:t.appName,whitelabel_app_url:t==null?void 0:t.appUrl,whitelabel_logo_light_enabled:!!(t!=null&&t.logoLight),whitelabel_logo_dark_enabled:!!(t!=null&&t.logoDark),whitelabel_default_language:t==null?void 0:t.defaultLanguage,whitelabel_theme_mode:t==null?void 0:t.mode,whitelabel_use_logo_loader:t==null?void 0:t.useLogoLoader,whitelabel_theme_primary:t==null||(e=t.theme)===null||e===void 0?void 0:e.primary,whitelabel_theme_on_primary:t==null||(n=t.theme)===null||n===void 0?void 0:n.onPrimary,whitelabel_tnc_link_enabled:!!(t!=null&&t.tncLink),whitelabel_privacy_policy_enabled:!!(t!=null&&t.privacyPolicy)}},fB=t=>{var e,n,r,a,i;const s=Array.from(new Set(t==null||(e=t.chains)===null||e===void 0?void 0:e.map(c=>{var d;return G2((d=c.bundlerConfig)===null||d===void 0?void 0:d.url)}).filter(Boolean))),o=Array.from(new Set(t==null||(n=t.chains)===null||n===void 0?void 0:n.map(c=>{var d;return G2((d=c.paymasterConfig)===null||d===void 0?void 0:d.url)}).filter(Boolean)));return{aa_smart_account_type:t==null?void 0:t.smartAccountType,aa_chain_ids:t==null||(r=t.chains)===null||r===void 0?void 0:r.map(c=>Xc({chainId:c.chainId,chainNamespace:Qe.EIP155})),aa_bundler_urls:s,aa_paymaster_urls:o,aa_paymaster_enabled:o.length>0,aa_paymaster_context_enabled:t==null||(a=t.chains)===null||a===void 0?void 0:a.some(c=>{var d;return(d=c.bundlerConfig)===null||d===void 0?void 0:d.paymasterContext}),aa_erc20_paymaster_enabled:t==null||(i=t.chains)===null||i===void 0?void 0:i.some(c=>{var d;return(d=c.bundlerConfig)===null||d===void 0||(d=d.paymasterContext)===null||d===void 0?void 0:d.token})}},pB=t=>{var e,n,r,a,i,s,o,c,d,l,u;return{ws_confirmation_strategy:t==null?void 0:t.confirmationStrategy,ws_enable_key_export:t==null?void 0:t.enableKeyExport,ws_show_widget_button:t==null||(e=t.whiteLabel)===null||e===void 0?void 0:e.showWidgetButton,ws_button_position:t==null||(n=t.whiteLabel)===null||n===void 0?void 0:n.buttonPosition,ws_hide_nft_display:t==null||(r=t.whiteLabel)===null||r===void 0?void 0:r.hideNftDisplay,ws_hide_token_display:t==null||(a=t.whiteLabel)===null||a===void 0?void 0:a.hideTokenDisplay,ws_hide_transfers:t==null||(i=t.whiteLabel)===null||i===void 0?void 0:i.hideTransfers,ws_hide_topup:t==null||(s=t.whiteLabel)===null||s===void 0?void 0:s.hideTopup,ws_hide_receive:t==null||(o=t.whiteLabel)===null||o===void 0?void 0:o.hideReceive,ws_hide_swap:t==null||(c=t.whiteLabel)===null||c===void 0?void 0:c.hideSwap,ws_hide_show_all_tokens:t==null||(d=t.whiteLabel)===null||d===void 0?void 0:d.hideShowAllTokens,ws_hide_wallet_connect:t==null||(l=t.whiteLabel)===null||l===void 0?void 0:l.hideWalletConnect,ws_default_portfolio:t==null||(u=t.whiteLabel)===null||u===void 0?void 0:u.defaultPortfolio}},C_="10.0.1",H1=t=>{try{const e=t instanceof Cr?t.code:t==null?void 0:t.code;return{error_message:t instanceof Error?t.message:(t==null?void 0:t.message)||(t==null?void 0:t.toString()),error_code:e}}catch{return{error_message:"Unknown error",error_code:void 0}}},G2=t=>{try{return new URL(t).hostname}catch{return""}},Xc=t=>t.chainNamespace===Qe.EIP155?`${t.chainNamespace}:${parseInt(t.chainId,16)}`:t.chainNamespace===Qe.SOLANA?`${t.chainNamespace}:${E5[t.chainId]}`:`${t.chainNamespace}:${t.chainId}`;var hde=bde;function bde(t){t=t||{};var e=t.max||Number.MAX_SAFE_INTEGER,n=typeof t.start<"u"?t.start:Math.floor(Math.random()*e);return function(){return n=n%e,n++}}const yde=Wi(hde);yde();let I_=function(t){return t.ACCOUNTS_CHANGED="accountsChanged",t.CHAIN_CHANGED="chainChanged",t.CONNECT="connect",t.DISCONNECT="disconnect",t.MESSAGE="message",t}({});class Qd extends Dse{constructor({config:e,state:n}){super({config:e,state:n}),re(this,"_providerEngineProxy",null),re(this,"keyExportFlagSetByCode",!1);const{chain:r}=e;if(!r)throw Me.invalidProviderConfigError("Please provide chain");if(!r.chainId)throw Me.invalidProviderConfigError("Please provide chainId inside chain");if(!r.rpcTarget)throw Me.invalidProviderConfigError("Please provide rpcTarget inside chain");typeof e.keyExportEnabled=="boolean"&&(this.keyExportFlagSetByCode=!0),this.defaultState={chainId:"loading"},this.defaultConfig={chain:e.chain,chains:e.chains,keyExportEnabled:typeof e.keyExportEnabled=="boolean"?e.keyExportEnabled:!0},super.initialize()}get currentChain(){return this.config.chains.find(e=>e.chainId===this.state.chainId)}get provider(){return this._providerEngineProxy}get chainId(){return this.state.chainId}set provider(e){throw new Error("Method not implemented.")}async request(e){var n;if(!e||typeof e!="object"||Array.isArray(e))throw Ut.invalidRequest({message:bs.invalidRequestArgs().message,data:Q(Q({},e||{}),{},{cause:bs.invalidRequestArgs().message})});const{method:r,params:a}=e;if(typeof r!="string"||r.length===0)throw Ut.invalidRequest({message:bs.invalidRequestMethod().message,data:Q(Q({},e||{}),{},{cause:bs.invalidRequestMethod().message})});if(a!==void 0&&!Array.isArray(a)&&(typeof a!="object"||a===null))throw Ut.invalidRequest({message:bs.invalidRequestParams().message,data:Q(Q({},e||{}),{},{cause:bs.invalidRequestParams().message})});return(n=this.provider)===null||n===void 0?void 0:n.request(e)}sendAsync(e,n){return n?this.send(e,n):this.request(e)}send(e,n){this.request(e).then(r=>n(null,{result:r})).catch(r=>n(r,null))}updateProviderEngineProxy(e){if(this._providerEngineProxy){this._providerEngineProxy.setTarget(e);const n=r=>{r!=="newListener"&&e.on(r,(...a)=>{if(r===I_.CHAIN_CHANGED){const i=a[0];this.update({chainId:i})}this.emit(r,...a)})};this.eventNames().forEach(r=>{n(r)}),this.on("newListener",r=>{this.listenerCount(r)>0||n(r)})}else this._providerEngineProxy=Use(e)}setKeyExportFlag(e){this.keyExportFlagSetByCode||this.configure({keyExportEnabled:e})}getProviderEngineProxy(){return this._providerEngineProxy}getChain(e){return this.config.chains.find(n=>n.chainId===e)}}function mde(t){return(e,n,r,a)=>e.method==="chainId"?(n.result=t,a()):r()}function gde(t){return(e,n,r,a)=>e.method==="provider_config"?(n.result=t,a()):r()}function wde(t){const{chainId:e,rpcTarget:n}=t,r=GE({rpcTarget:n});return{networkMiddleware:Eu([mde(e),gde(t),r]),fetchMiddleware:r}}var hB;class jp extends Qd{constructor({config:e,state:n}){super({config:e,state:n})}async setupProvider(e){const n=this.getChain(e);if(!n)throw Ar.custom({message:"Chain not found",code:4902});const{networkMiddleware:r}=wde(n),a=new cr;a.push(r);const i=Sd(a);this.updateProviderEngineProxy(i),this.emit("chainChanged",e),this.emit("connect",{chainId:e}),this.update({chainId:e})}async switchChain(e){if(!this._providerEngineProxy)throw Ar.custom({message:"Provider is not initialized",code:4902});const n=e.chainId;this.chainId!==n&&(this.update({chainId:"loading"}),await this.setupProvider(n))}getProviderEngineProxy(){return this._providerEngineProxy}lookupNetwork(){throw new Error("Method not implemented.")}}hB=jp;re(jp,"getProviderInstance",async t=>{const e=new hB({config:{chain:t.chain,chains:t.chains}}),{chainId:n}=t.chain;return await e.setupProvider(n),e});const bB=t=>{const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:t.location.hostname};function BC(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}async function yB(t){const{document:e}=t;let n=e.querySelector('head > link[rel="shortcut icon"]');return n&&await BC(n.href)||(n=Array.from(e.querySelectorAll('head > link[rel="icon"]')).find(r=>!!r.href)||null,n&&await BC(n.href))?n.href:null}function vde(t){const[e,n]=t.split(".");return{header:JSON.parse(U2(e)),payload:JSON.parse(U2(n))}}const ui={EIP155:"eip155",SOLANA:"solana",CASPER:"casper",XRPL:"xrpl",MULTICHAIN:"multichain"},T5={AUTH:"auth",WALLET_CONNECT_V2:"wallet-connect-v2",METAMASK:"metamask"},mB=Q({},T5),x5=Q({COINBASE:"coinbase"},T5),Be=Q(Q({},x5),mB),O_={[T5.AUTH]:"Auth",[T5.WALLET_CONNECT_V2]:"Wallet Connect v2",[x5.COINBASE]:"Coinbase Smart Wallet",[x5.METAMASK]:"MetaMask"},ge={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTING:"disconnecting",DISCONNECTED:"disconnected",ERRORED:"errored"},Ue=Q(Q({},ge),{},{CONNECTOR_DATA_UPDATED:"connector_data_updated",CACHE_CLEAR:"cache_clear",CONNECTORS_UPDATED:"connectors_updated",MFA_ENABLED:"mfa_enabled",REHYDRATION_ERROR:"rehydration_error"}),Aa={EXTERNAL:"external",IN_APP:"in_app"};class Hp extends wu{constructor(e){super(),re(this,"connectorData",{}),re(this,"isInjected",void 0),re(this,"icon",void 0),re(this,"coreOptions",void 0),re(this,"rehydrated",!1),re(this,"connectorNamespace",void 0),re(this,"type",void 0),re(this,"name",void 0),re(this,"status",void 0),this.coreOptions=e.coreOptions}get connnected(){return this.status===ge.CONNECTED}checkConnectionRequirements(){if(!(this.name===Be.WALLET_CONNECT_V2&&this.status===ge.CONNECTING)&&!(this.name===Be.METAMASK&&!this.isInjected&&this.status===ge.CONNECTING)){if(this.status===ge.CONNECTING)throw Me.notReady("Already connecting");if(this.status===ge.CONNECTED)throw Pe.connectionError("Already connected");if(this.status!==ge.READY)throw Pe.connectionError("Wallet connector is not ready yet, Please wait for init function to resolve before calling connect/connectTo function")}}checkInitializationRequirements({chainConfig:e}){if(!this.coreOptions.clientId)throw Me.invalidParams("Please initialize Web3Auth with a valid clientId in constructor");if(!e)throw Me.invalidParams("chainConfig is required before initialization");if(!e.rpcTarget&&e.chainNamespace!==Qe.OTHER)throw Me.invalidParams("rpcTarget is required in chainConfig");if(!e.chainId&&e.chainNamespace!==Qe.OTHER)throw Me.invalidParams("chainID is required in chainConfig");if(this.connectorNamespace!==ui.MULTICHAIN&&this.connectorNamespace!==e.chainNamespace)throw Me.invalidParams("Connector doesn't support this chain namespace");if(this.status!==ge.NOT_READY){if(this.status===ge.CONNECTED)throw Me.notReady("Already connected");if(this.status===ge.READY)throw Me.notReady("Connector is already initialized")}}checkDisconnectionRequirements(){if(this.status!==ge.CONNECTED)throw Pe.disconnectionError("Not connected with wallet")}checkSwitchChainRequirements(e,n=!1){if(!n&&!this.provider)throw Pe.notConnectedError("Not connected with wallet.");if(!this.coreOptions.chains)throw Me.invalidParams("chainConfigs is required");if(!this.coreOptions.chains.some(a=>a.chainId===e.chainId&&(a.chainNamespace===this.connectorNamespace||this.connectorNamespace===ui.MULTICHAIN)))throw Me.invalidParams("Invalid chainId")}updateConnectorData(e){this.connectorData=e,this.emit(Ue.CONNECTOR_DATA_UPDATED,{connectorName:this.name,data:e})}}class Ede extends Hp{constructor(e){super(e),re(this,"name",Be.AUTH),re(this,"connectorNamespace",ui.MULTICHAIN),re(this,"type",Aa.IN_APP),re(this,"authInstance",null),re(this,"status",ge.NOT_READY),re(this,"privateKeyProvider",null),re(this,"authOptions",void 0),re(this,"loginSettings",{authConnection:""}),re(this,"wsSettings",void 0),re(this,"wsEmbedInstance",null),re(this,"authConnectionConfig",[]),re(this,"wsEmbedInstancePromise",null),this.authOptions=e.connectorSettings,this.loginSettings=e.loginSettings||{authConnection:""},this.wsSettings=e.walletServicesSettings||{},this.authConnectionConfig=e.authConnectionConfig||[]}get provider(){if(this.status!==ge.NOT_READY){var e;if((e=this.wsEmbedInstance)!==null&&e!==void 0&&e.provider)return this.wsEmbedInstance.provider;if(this.privateKeyProvider)return this.privateKeyProvider}return null}get wsEmbed(){return this.wsEmbedInstance}set provider(e){throw new Error("Not implemented")}async init(e){const{chains:n}=this.coreOptions,{chainId:r}=e,a=n.find(o=>o.chainId===r);if(super.checkInitializationRequirements({chainConfig:a}),!this.coreOptions.clientId)throw Me.invalidParams("clientId is required before auth's initialization");if(!this.authOptions)throw Me.invalidParams("authOptions is required before auth's initialization");if(this.authConnectionConfig.length===0)throw Me.invalidParams("authConnectionConfig is required before auth's initialization");const i=this.authOptions.uxMode===W0.REDIRECT;this.authOptions=Q(Q({},this.authOptions),{},{replaceUrlOnRedirect:i,useCoreKitKey:this.coreOptions.useSFAKey}),this.authInstance=new t0e(Q(Q({},this.authOptions),{},{clientId:this.coreOptions.clientId,network:this.coreOptions.web3AuthNetwork,sdkMode:is.IFRAME,authConnectionConfig:this.authConnectionConfig.filter(o=>!o.isDefault),mfaSettings:this.coreOptions.mfaSettings})),Te.debug("initializing auth connector init",this.authOptions);const s=this.authInstance.init();if(this.coreOptions.privateKeyProvider)this.privateKeyProvider=this.coreOptions.privateKeyProvider;else switch(a.chainNamespace){case Qe.EIP155:case Qe.SOLANA:{const{default:o}=await xt(async()=>{const{default:d}=await import("./index-BhZpQq1l.js");return{default:d}},__vite__mapDeps([12,1,2,3,4]));this.wsEmbedInstance=new o({web3AuthClientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,modalZIndex:this.wsSettings.modalZIndex});const c=n.filter(d=>d.chainNamespace===Qe.EIP155||d.chainNamespace===Qe.SOLANA);this.wsEmbedInstancePromise=this.wsEmbedInstance.init(Q(Q({},this.wsSettings),{},{chains:c,chainId:r,whiteLabel:Q(Q({},this.authOptions.whiteLabel),this.wsSettings.whiteLabel)})).then(()=>{this.wsEmbedInstancePromise=null});break}case Qe.XRPL:throw Pe.connectionError("Private key provider is required for XRPL");default:{const{CommonPrivateKeyProvider:o}=await xt(async()=>{const{CommonPrivateKeyProvider:c}=await Promise.resolve().then(()=>jje);return{CommonPrivateKeyProvider:c}},void 0);this.privateKeyProvider=new o({config:{chain:a,chains:this.coreOptions.chains}})}}Te.debug("initializing auth connector"),await s,this.status=ge.READY,this.emit(Ue.READY,Be.AUTH);try{const{sessionId:o}=this.authInstance||{};if(o&&(e.autoConnect||i))this.rehydrated=!0,await this.connect({chainId:e.chainId});else if(!o&&e.autoConnect)throw Pe.connectionError("Failed to rehydrate")}catch(o){this.emit(Ue.REHYDRATION_ERROR,o)}}async connect(e){super.checkConnectionRequirements(),this.status=ge.CONNECTING,this.emit(Ue.CONNECTING,Q(Q({},e),{},{connector:Be.AUTH}));try{return await this.connectWithProvider(e),this.provider}catch(r){var n;throw Te.error("Failed to connect with auth provider",r),this.status=ge.READY,this.emit(Ue.ERRORED,r),r!=null&&(n=r.message)!==null&&n!==void 0&&n.includes("user closed popup")?Pe.popupClosed():r instanceof Cr?r:Pe.connectionError("Failed to login with auth",r)}}async enableMFA(e={authConnection:""}){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Me.notReady("authInstance is not ready");try{const n=await this.authInstance.enableMFA(e);n&&this.emit(Ue.MFA_ENABLED,n)}catch(n){throw Te.error("Failed to enable MFA with auth provider",n),n instanceof Cr?n:Pe.connectionError("Failed to enable MFA with auth",n)}}async manageMFA(e={authConnection:""}){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Me.notReady("authInstance is not ready");try{await this.authInstance.manageMFA(e)}catch(n){throw Te.error("Failed to manage MFA with auth provider",n),n instanceof Cr?n:Pe.connectionError("Failed to manage MFA with auth",n)}}async disconnect(e={cleanup:!1}){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Me.notReady("authInstance is not ready");this.status=ge.DISCONNECTING,await this.authInstance.logout(),this.wsEmbedInstance&&await this.wsEmbedInstance.logout(),e.cleanup?(this.status=ge.NOT_READY,this.authInstance=null,this.wsEmbedInstance&&(this.wsEmbedInstance=null),this.privateKeyProvider&&(this.privateKeyProvider=null)):this.status=ge.READY,this.rehydrated=!1,this.emit(Ue.DISCONNECTED)}async getIdentityToken(){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet, Please login/connect first");return{idToken:(await this.getUserInfo()).idToken}}async getUserInfo(){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet");if(!this.authInstance)throw Me.notReady("authInstance is not ready");return this.authInstance.getUserInfo()}async switchChain(e,n=!1){super.checkSwitchChainRequirements(e,n);const{chainId:r}=e,{chainId:a}=this.provider,{chainNamespace:i}=this.getChain(a),{chainNamespace:s}=this.getChain(r);if(a!==r)if(i===Qe.SOLANA||i===Qe.EIP155){var o;if(s!==Qe.SOLANA&&s!==Qe.EIP155)throw Pe.connectionError("Cannot switch to other chain namespace");const d=`${s}:${Number(e.chainId)}`;await((o=this.wsEmbedInstance.provider)===null||o===void 0?void 0:o.request({method:"wallet_switchChain",params:{chainId:d}}))}else{var c;if(i!==s)throw Pe.connectionError("Cannot switch to other chain namespace");await((c=this.privateKeyProvider)===null||c===void 0?void 0:c.switchChain(e))}}async cleanup(){if(!this.authInstance)throw Me.notReady("authInstance is not ready");await this.authInstance.cleanup(),this.wsEmbedInstance&&this.wsEmbedInstance.clearInit()}getOAuthProviderConfig(e){const{authConnection:n,authConnectionId:r,groupedAuthConnectionId:a}=e;return this.authConnectionConfig.find(s=>a?s.authConnection===n&&s.groupedAuthConnectionId===a:r?s.authConnection===n&&s.authConnectionId===r:s.authConnection===n&&s.isDefault)}getChain(e){return this.coreOptions.chains.find(n=>n.chainId===e)}_getFinalPrivKey(){if(!this.authInstance)return"";let e=this.authInstance.privKey;if(this.coreOptions.useSFAKey){if(this.authInstance.privKey&&!this.authInstance.coreKitKey)throw Pe.sfaKeyNotFound();e=this.authInstance.coreKitKey}return e}async connectWithProvider(e){var n,r;if(!this.authInstance)throw Me.notReady("authInstance is not ready");const a=this.coreOptions.chains.find(d=>d.chainId===e.chainId);if(!a)throw Pe.connectionError("Chain config is not available");const{chainNamespace:i}=a,s=i===Qe.EIP155||i===Qe.SOLANA?(n=this.authInstance)===null||n===void 0?void 0:n.sessionId:this._getFinalPrivKey();if(e.idToken&&(e.extraLoginOptions=Q(Q({},e.extraLoginOptions),{},{id_token:e.idToken})),!s||(r=e.extraLoginOptions)!==null&&r!==void 0&&r.id_token){var o;this.loginSettings.curve=Ute.OTHER;const d=Kt(this.loginSettings,e);(o=e.extraLoginOptions)!==null&&o!==void 0&&o.id_token?await this.connectWithJwtLogin(d):await this.connectWithSocialLogin(d)}if(i===Qe.EIP155||i===Qe.SOLANA){this.wsEmbedInstancePromise&&await this.wsEmbedInstancePromise;const{sessionId:d,sessionNamespace:l}=this.authInstance||{};if(d&&await this.wsEmbedInstance.loginWithSessionId({sessionId:d,sessionNamespace:l})){var c;this.status=ge.CONNECTED,this.emit(Ue.CONNECTED,{connector:Be.AUTH,reconnected:this.rehydrated,provider:this.provider}),(c=this.wsEmbedInstance)===null||c===void 0||c.provider.on("accountsChanged",(f=[])=>{f.length===0&&this.status===ge.CONNECTED&&this.disconnect({cleanup:!1})})}}else{const d=this._getFinalPrivKey();d&&(await this.privateKeyProvider.setupProvider(d,e.chainId),this.status=ge.CONNECTED,this.emit(Ue.CONNECTED,{connector:Be.AUTH,reconnected:this.rehydrated,provider:this.provider}))}}async connectWithSocialLogin(e){var n,r;const a=this.getOAuthProviderConfig({authConnection:e.authConnection,authConnectionId:e.authConnectionId,groupedAuthConnectionId:e.groupedAuthConnectionId});if(!(a!=null&&a.authConnection))throw Pe.connectionError("Invalid auth connection.");const i=Q(Q(Q({},a.jwtParameters||{}),e.extraLoginOptions||{}),{},{login_hint:e.loginHint||((n=e.extraLoginOptions)===null||n===void 0?void 0:n.login_hint)}),s=wE(),o=Zc(e);o.extraLoginOptions=Q(Q({},o.extraLoginOptions||{}),{},{login_hint:e.loginHint||((r=e.extraLoginOptions)===null||r===void 0?void 0:r.login_hint)}),delete o.chainId;const c={authConnection:e.authConnection,authConnectionId:a.authConnectionId,clientId:a.clientId||i.client_id,groupedAuthConnectionId:a.groupedAuthConnectionId,redirect_uri:`${this.authInstance.options.sdkUrl}/auth`,jwtParams:i,customState:{nonce:s,appState:e.appState,dapp_redirect_url:this.authInstance.options.redirectUrl,uxMode:this.authInstance.options.uxMode,whiteLabel:JSON.stringify(this.authInstance.options.whiteLabel),loginParams:JSON.stringify(o),version:M4.split(".")[0]},web3AuthClientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork},d=lte(c),l=new _y({url:d.finalURL,timeout:0});if(this.authOptions.uxMode===W0.REDIRECT)return l.redirect(this.authOptions.replaceUrlOnRedirect);let u=!1;return new Promise((f,p)=>{l.open().catch(b=>{Te.error("Error during login with social",b),this.authInstance.postLoginCancelledMessage(s),p(b)});const h=new r$({sameIpCheck:!0});h.subscribe(`web3auth-login-${s}`).then(b=>{const v=JSON.parse(b||"{}");return(v==null?void 0:v.message)==="login_finished"&&(v!=null&&v.error&&(this.authInstance.postLoginCancelledMessage(s),p(v.error)),u=!0,h.cleanup(),l.close()),!0}).catch(b=>{Te.error("Error during login with social",b)}),l.once("close",()=>{u||(h.cleanup(),this.authInstance.postLoginCancelledMessage(s),p(Pe.popupClosed()))}),this.authInstance.postLoginInitiatedMessage(o,s).then(f).catch(b=>{if(b instanceof Cr)throw b;p(Pe.connectionError(b instanceof Error?b.message:b||"Failed to login with social"))})})}connectWithJwtLogin(e){var n,r;const a=this.getOAuthProviderConfig({authConnection:e.authConnection,authConnectionId:e.authConnectionId,groupedAuthConnectionId:e.groupedAuthConnectionId});if(!(a!=null&&a.authConnection)&&!e.authConnectionId)throw Pe.connectionError("Invalid auth connection.");a!=null&&a.authConnection||this.authInstance.options.authConnectionConfig.push({authConnection:e.authConnection,authConnectionId:e.authConnectionId,groupedAuthConnectionId:e.groupedAuthConnectionId});const i=Zc(e),s=Q(Q({},(a==null?void 0:a.jwtParameters)||{}),e.extraLoginOptions||{});let o;if(e.loginHint||(n=e.extraLoginOptions)!==null&&n!==void 0&&n.login_hint){var c;o=e.loginHint||((c=e.extraLoginOptions)===null||c===void 0?void 0:c.login_hint)}else if((r=e.extraLoginOptions)!==null&&r!==void 0&&r.id_token){if(typeof s.isUserIdCaseSensitive>"u")throw Me.invalidParams(`isUserIdCaseSensitive is required for this connection: ${s.authConnection}`);const{payload:d}=vde(e.extraLoginOptions.id_token);o=m5(d,i.authConnection,s.userIdField,s.isUserIdCaseSensitive)}else throw Pe.connectionError("Invalid login hint or id_token");return i.extraLoginOptions=Q(Q({},s),{},{login_hint:o}),delete i.chainId,this.authInstance.postLoginInitiatedMessage(i)}}const gB=t=>({projectConfig:e,coreOptions:n})=>{var r,a,i,s;const o={},{whitelist:c,sessionTime:d}=e;c&&(o.originData=c.signed_urls),n.sessionTime?o.sessionTime=n.sessionTime:d&&(o.sessionTime=d),(r=n.uiConfig)!==null&&r!==void 0&&r.uxMode&&(o.uxMode=n.uiConfig.uxMode);const l=n.uiConfig||{};o.whiteLabel=l;const u=Kt.all([{uxMode:W0.POPUP,buildEnv:n.authBuildEnv||Ac.PRODUCTION},o,{}]),f=Kt.all([l,((a=n.walletServicesConfig)===null||a===void 0?void 0:a.whiteLabel)||{}]),p=Q(Q({},n.walletServicesConfig),{},{whiteLabel:f,accountAbstractionConfig:n.accountAbstractionConfig,enableLogging:n.enableLogging}),h=(i=(s=n.walletServicesConfig)===null||s===void 0?void 0:s.enableKeyExport)!==null&&i!==void 0?i:!0;return n.privateKeyProvider&&n.privateKeyProvider.setKeyExportFlag(h),new Ede({connectorSettings:u,walletServicesSettings:p,loginSettings:Q(Q({},{}),{},{mfaLevel:n.mfaLevel}),coreOptions:n,authConnectionConfig:e.embeddedWalletAuth})};var lw={exports:{}};(function(t,e){var n=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof vt<"u"&&vt,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(s){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof vt<"u"&&vt||{},c={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function d(g){return g&&DataView.prototype.isPrototypeOf(g)}if(c.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(g){return g&&l.indexOf(Object.prototype.toString.call(g))>-1};function f(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(g)||g==="")throw new TypeError('Invalid character in header field name: "'+g+'"');return g.toLowerCase()}function p(g){return typeof g!="string"&&(g=String(g)),g}function h(g){var x={next:function(){var O=g.shift();return{done:O===void 0,value:O}}};return c.iterable&&(x[Symbol.iterator]=function(){return x}),x}function b(g){this.map={},g instanceof b?g.forEach(function(x,O){this.append(O,x)},this):Array.isArray(g)?g.forEach(function(x){if(x.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+x.length);this.append(x[0],x[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(x){this.append(x,g[x])},this)}b.prototype.append=function(g,x){g=f(g),x=p(x);var O=this.map[g];this.map[g]=O?O+", "+x:x},b.prototype.delete=function(g){delete this.map[f(g)]},b.prototype.get=function(g){return g=f(g),this.has(g)?this.map[g]:null},b.prototype.has=function(g){return this.map.hasOwnProperty(f(g))},b.prototype.set=function(g,x){this.map[f(g)]=p(x)},b.prototype.forEach=function(g,x){for(var O in this.map)this.map.hasOwnProperty(O)&&g.call(x,this.map[O],O,this)},b.prototype.keys=function(){var g=[];return this.forEach(function(x,O){g.push(O)}),h(g)},b.prototype.values=function(){var g=[];return this.forEach(function(x){g.push(x)}),h(g)},b.prototype.entries=function(){var g=[];return this.forEach(function(x,O){g.push([O,x])}),h(g)},c.iterable&&(b.prototype[Symbol.iterator]=b.prototype.entries);function v(g){if(!g._noBody){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}}function m(g){return new Promise(function(x,O){g.onload=function(){x(g.result)},g.onerror=function(){O(g.error)}})}function T(g){var x=new FileReader,O=m(x);return x.readAsArrayBuffer(g),O}function A(g){var x=new FileReader,O=m(x),S=/charset=([A-Za-z0-9_-]+)/.exec(g.type),w=S?S[1]:"utf-8";return x.readAsText(g,w),O}function N(g){for(var x=new Uint8Array(g),O=new Array(x.length),S=0;S<x.length;S++)O[S]=String.fromCharCode(x[S]);return O.join("")}function R(g){if(g.slice)return g.slice(0);var x=new Uint8Array(g.byteLength);return x.set(new Uint8Array(g)),x.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(g){this.bodyUsed=this.bodyUsed,this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:c.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:c.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():c.arrayBuffer&&c.blob&&d(g)?(this._bodyArrayBuffer=R(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||u(g))?this._bodyArrayBuffer=R(g):this._bodyText=g=Object.prototype.toString.call(g):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var g=v(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var g=v(this);return g||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var g=v(this);if(g)return g;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(N(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then($)}),this.json=function(){return this.text().then(JSON.parse)},this}var F=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function I(g){var x=g.toUpperCase();return F.indexOf(x)>-1?x:g}function P(g,x){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');x=x||{};var O=x.body;if(g instanceof P){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,x.headers||(this.headers=new b(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!O&&g._bodyInit!=null&&(O=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=x.credentials||this.credentials||"same-origin",(x.headers||!this.headers)&&(this.headers=new b(x.headers)),this.method=I(x.method||this.method||"GET"),this.mode=x.mode||this.mode||null,this.signal=x.signal||this.signal||function(){if("AbortController"in o){var _=new AbortController;return _.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(x.cache==="no-store"||x.cache==="no-cache")){var S=/([?&])_=[^&]*/;if(S.test(this.url))this.url=this.url.replace(S,"$1_="+new Date().getTime());else{var w=/\?/;this.url+=(w.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}P.prototype.clone=function(){return new P(this,{body:this._bodyInit})};function $(g){var x=new FormData;return g.trim().split("&").forEach(function(O){if(O){var S=O.split("="),w=S.shift().replace(/\+/g," "),_=S.join("=").replace(/\+/g," ");x.append(decodeURIComponent(w),decodeURIComponent(_))}}),x}function M(g){var x=new b,O=g.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(S){return S.indexOf(`
`)===0?S.substr(1,S.length):S}).forEach(function(S){var w=S.split(":"),_=w.shift().trim();if(_){var k=w.join(":").trim();try{x.append(_,k)}catch(L){console.warn("Response "+L.message)}}}),x}B.call(P.prototype);function y(g,x){if(!(this instanceof y))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(x||(x={}),this.type="default",this.status=x.status===void 0?200:x.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=x.statusText===void 0?"":""+x.statusText,this.headers=new b(x.headers),this.url=x.url||"",this._initBody(g)}B.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new b(this.headers),url:this.url})},y.error=function(){var g=new y(null,{status:200,statusText:""});return g.ok=!1,g.status=0,g.type="error",g};var E=[301,302,303,307,308];y.redirect=function(g,x){if(E.indexOf(x)===-1)throw new RangeError("Invalid status code");return new y(null,{status:x,headers:{location:g}})},s.DOMException=o.DOMException;try{new s.DOMException}catch{s.DOMException=function(x,O){this.message=x,this.name=O;var S=Error(x);this.stack=S.stack},s.DOMException.prototype=Object.create(Error.prototype),s.DOMException.prototype.constructor=s.DOMException}function C(g,x){return new Promise(function(O,S){var w=new P(g,x);if(w.signal&&w.signal.aborted)return S(new s.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function k(){_.abort()}_.onload=function(){var U={statusText:_.statusText,headers:M(_.getAllResponseHeaders()||"")};w.url.indexOf("file://")===0&&(_.status<200||_.status>599)?U.status=200:U.status=_.status,U.url="responseURL"in _?_.responseURL:U.headers.get("X-Request-URL");var j="response"in _?_.response:_.responseText;setTimeout(function(){O(new y(j,U))},0)},_.onerror=function(){setTimeout(function(){S(new TypeError("Network request failed"))},0)},_.ontimeout=function(){setTimeout(function(){S(new TypeError("Network request timed out"))},0)},_.onabort=function(){setTimeout(function(){S(new s.DOMException("Aborted","AbortError"))},0)};function L(U){try{return U===""&&o.location.href?o.location.href:U}catch{return U}}if(_.open(w.method,L(w.url),!0),w.credentials==="include"?_.withCredentials=!0:w.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&(c.blob?_.responseType="blob":c.arrayBuffer&&(_.responseType="arraybuffer")),x&&typeof x.headers=="object"&&!(x.headers instanceof b||o.Headers&&x.headers instanceof o.Headers)){var D=[];Object.getOwnPropertyNames(x.headers).forEach(function(U){D.push(f(U)),_.setRequestHeader(U,p(x.headers[U]))}),w.headers.forEach(function(U,j){D.indexOf(j)===-1&&_.setRequestHeader(j,U)})}else w.headers.forEach(function(U,j){_.setRequestHeader(j,U)});w.signal&&(w.signal.addEventListener("abort",k),_.onreadystatechange=function(){_.readyState===4&&w.signal.removeEventListener("abort",k)}),_.send(typeof w._bodyInit>"u"?null:w._bodyInit)})}return C.polyfill=!0,o.fetch||(o.fetch=C,o.Headers=b,o.Request=P,o.Response=y),s.Headers=b,s.Request=P,s.Response=y,s.fetch=C,s})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var a=n.fetch?n:r;e=a.fetch,e.default=a.fetch,e.fetch=a.fetch,e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response,t.exports=e})(lw,lw.exports);var _de=lw.exports;const wB=Wi(_de);var uw={exports:{}},mg,FC;function Tde(){if(FC)return mg;FC=1;var t=1e3,e=t*60,n=e*60,r=n*24,a=r*7,i=r*365.25;mg=function(l,u){u=u||{};var f=typeof l;if(f==="string"&&l.length>0)return s(l);if(f==="number"&&isFinite(l))return u.long?c(l):o(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function s(l){if(l=String(l),!(l.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(u){var f=parseFloat(u[1]),p=(u[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"weeks":case"week":case"w":return f*a;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*n;case"minutes":case"minute":case"mins":case"min":case"m":return f*e;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function o(l){var u=Math.abs(l);return u>=r?Math.round(l/r)+"d":u>=n?Math.round(l/n)+"h":u>=e?Math.round(l/e)+"m":u>=t?Math.round(l/t)+"s":l+"ms"}function c(l){var u=Math.abs(l);return u>=r?d(l,u,r,"day"):u>=n?d(l,u,n,"hour"):u>=e?d(l,u,e,"minute"):u>=t?d(l,u,t,"second"):l+" ms"}function d(l,u,f,p){var h=u>=f*1.5;return Math.round(l/f)+" "+p+(h?"s":"")}return mg}function xde(t){n.debug=n,n.default=n,n.coerce=c,n.disable=i,n.enable=a,n.enabled=s,n.humanize=Tde(),n.destroy=d,Object.keys(t).forEach(l=>{n[l]=t[l]}),n.names=[],n.skips=[],n.formatters={};function e(l){let u=0;for(let f=0;f<l.length;f++)u=(u<<5)-u+l.charCodeAt(f),u|=0;return n.colors[Math.abs(u)%n.colors.length]}n.selectColor=e;function n(l){let u,f=null,p,h;function b(...v){if(!b.enabled)return;const m=b,T=Number(new Date),A=T-(u||T);m.diff=A,m.prev=u,m.curr=T,u=T,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let N=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(B,F)=>{if(B==="%%")return"%";N++;const I=n.formatters[F];if(typeof I=="function"){const P=v[N];B=I.call(m,P),v.splice(N,1),N--}return B}),n.formatArgs.call(m,v),(m.log||n.log).apply(m,v)}return b.namespace=l,b.useColors=n.useColors(),b.color=n.selectColor(l),b.extend=r,b.destroy=n.destroy,Object.defineProperty(b,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==n.namespaces&&(p=n.namespaces,h=n.enabled(l)),h),set:v=>{f=v}}),typeof n.init=="function"&&n.init(b),b}function r(l,u){const f=n(this.namespace+(typeof u>"u"?":":u)+l);return f.log=this.log,f}function a(l){n.save(l),n.namespaces=l,n.names=[],n.skips=[];let u;const f=(typeof l=="string"?l:"").split(/[\s,]+/),p=f.length;for(u=0;u<p;u++)f[u]&&(l=f[u].replace(/\*/g,".*?"),l[0]==="-"?n.skips.push(new RegExp("^"+l.slice(1)+"$")):n.names.push(new RegExp("^"+l+"$")))}function i(){const l=[...n.names.map(o),...n.skips.map(o).map(u=>"-"+u)].join(",");return n.enable(""),l}function s(l){if(l[l.length-1]==="*")return!0;let u,f;for(u=0,f=n.skips.length;u<f;u++)if(n.skips[u].test(l))return!1;for(u=0,f=n.names.length;u<f;u++)if(n.names[u].test(l))return!0;return!1}function o(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var Sde=xde;(function(t,e){var n={};e.formatArgs=a,e.save=i,e.load=s,e.useColors=r,e.storage=o(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;d.splice(1,0,l,"color: inherit");let u=0,f=0;d[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(u++,p==="%c"&&(f=u))}),d.splice(f,0,l)}e.log=console.debug||console.log||(()=>{});function i(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function s(){let d;try{d=e.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=n.DEBUG),d}function o(){try{return localStorage}catch{}}t.exports=Sde(e);const{formatters:c}=t.exports;c.j=function(d){try{return JSON.stringify(d)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(uw,uw.exports);var Ade=uw.exports;const Ir=Wi(Ade);var M_=Object.defineProperty,Cde=Object.getOwnPropertyDescriptor,Ide=Object.getOwnPropertyNames,Ode=Object.prototype.hasOwnProperty,Mde=(t,e)=>{for(var n in e)M_(t,n,{get:e[n],enumerable:!0})},Pde=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of Ide(e))!Ode.call(t,a)&&a!==n&&M_(t,a,{get:()=>e[a],enumerable:!(r=Cde(e,a))||r.enumerable});return t},kde=t=>Pde(M_({},"__esModule",{value:!0}),t),vB={};Mde(vB,{createFinalURL:()=>AB,createPathBasedClient:()=>Bde,createQuerySerializer:()=>fw,default:()=>_B,defaultBodySerializer:()=>SB,defaultPathSerializer:()=>xB,mergeHeaders:()=>pw,randomID:()=>EB,removeTrailingSlash:()=>hw,serializeArrayParam:()=>k_,serializeObjectParam:()=>P_,serializePrimitiveParam:()=>zp,wrapAsPathBasedClient:()=>TB});var Nde=kde(vB),Rde=/\{[^{}]+\}/g,Dde=()=>{var t,e;return typeof process=="object"&&Number.parseInt((e=(t=process==null?void 0:process.versions)==null?void 0:t.node)==null?void 0:e.substring(0,2))>=18&&process.versions.undici};function EB(){return Math.random().toString(36).slice(2,11)}function _B(t){let{baseUrl:e="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:a,bodySerializer:i,headers:s,requestInitExt:o=void 0,...c}={...t};o=Dde()?o:void 0,e=hw(e);const d=[];async function l(u,f){const{baseUrl:p,fetch:h=r,Request:b=n,headers:v,params:m={},parseAs:T="json",querySerializer:A,bodySerializer:N=i??SB,body:R,...B}=f||{};let F=e;p&&(F=hw(p)??e);let I=typeof a=="function"?a:fw(a);A&&(I=typeof A=="function"?A:fw({...typeof a=="object"?a:{},...A}));const P=R===void 0?void 0:N(R,pw(s,v,m.header)),$=pw(P===void 0||P instanceof FormData?{}:{"Content-Type":"application/json"},s,v,m.header),M={redirect:"follow",...c,...B,body:P,headers:$};let y,E,C=new n(AB(u,{baseUrl:F,params:m,querySerializer:I}),M),g;for(const O in B)O in C||(C[O]=B[O]);if(d.length){y=EB(),E=Object.freeze({baseUrl:F,fetch:h,parseAs:T,querySerializer:I,bodySerializer:N});for(const O of d)if(O&&typeof O=="object"&&typeof O.onRequest=="function"){const S=await O.onRequest({request:C,schemaPath:u,params:m,options:E,id:y});if(S)if(S instanceof n)C=S;else if(S instanceof Response){g=S;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!g){try{g=await h(C,o)}catch(O){let S=O;if(d.length)for(let w=d.length-1;w>=0;w--){const _=d[w];if(_&&typeof _=="object"&&typeof _.onError=="function"){const k=await _.onError({request:C,error:S,schemaPath:u,params:m,options:E,id:y});if(k){if(k instanceof Response){S=void 0,g=k;break}if(k instanceof Error){S=k;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(S)throw S}if(d.length)for(let O=d.length-1;O>=0;O--){const S=d[O];if(S&&typeof S=="object"&&typeof S.onResponse=="function"){const w=await S.onResponse({request:C,response:g,schemaPath:u,params:m,options:E,id:y});if(w){if(!(w instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");g=w}}}}if(g.status===204||C.method==="HEAD"||g.headers.get("Content-Length")==="0")return g.ok?{data:void 0,response:g}:{error:void 0,response:g};if(g.ok)return T==="stream"?{data:g.body,response:g}:{data:await g[T](),response:g};let x=await g.text();try{x=JSON.parse(x)}catch{}return{error:x,response:g}}return{request(u,f,p){return l(f,{...p,method:u.toUpperCase()})},GET(u,f){return l(u,{...f,method:"GET"})},PUT(u,f){return l(u,{...f,method:"PUT"})},POST(u,f){return l(u,{...f,method:"POST"})},DELETE(u,f){return l(u,{...f,method:"DELETE"})},OPTIONS(u,f){return l(u,{...f,method:"OPTIONS"})},HEAD(u,f){return l(u,{...f,method:"HEAD"})},PATCH(u,f){return l(u,{...f,method:"PATCH"})},TRACE(u,f){return l(u,{...f,method:"TRACE"})},use(...u){for(const f of u)if(f){if(typeof f!="object"||!("onRequest"in f||"onResponse"in f||"onError"in f))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");d.push(f)}},eject(...u){for(const f of u){const p=d.indexOf(f);p!==-1&&d.splice(p,1)}}}}var $de=class{constructor(t,e){no(this,"GET",t=>this.client.GET(this.url,t));no(this,"PUT",t=>this.client.PUT(this.url,t));no(this,"POST",t=>this.client.POST(this.url,t));no(this,"DELETE",t=>this.client.DELETE(this.url,t));no(this,"OPTIONS",t=>this.client.OPTIONS(this.url,t));no(this,"HEAD",t=>this.client.HEAD(this.url,t));no(this,"PATCH",t=>this.client.PATCH(this.url,t));no(this,"TRACE",t=>this.client.TRACE(this.url,t));this.client=t,this.url=e}},Lde=class{constructor(){this.client=null}get(t,e){const n=new $de(t,e);return this.client[e]=n,n}};function TB(t){const e=new Lde,n=new Proxy(t,e);function r(){}r.prototype=n;const a=new r;return e.client=a,a}function Bde(t){return TB(_B(t))}function zp(t,e,n){if(e==null)return"";if(typeof e=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${t}=${(n==null?void 0:n.allowReserved)===!0?e:encodeURIComponent(e)}`}function P_(t,e,n){if(!e||typeof e!="object")return"";const r=[],a={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const o in e)r.push(o,n.allowReserved===!0?e[o]:encodeURIComponent(e[o]));const s=r.join(",");switch(n.style){case"form":return`${t}=${s}`;case"label":return`.${s}`;case"matrix":return`;${t}=${s}`;default:return s}}for(const s in e){const o=n.style==="deepObject"?`${t}[${s}]`:s;r.push(zp(o,e[s],n))}const i=r.join(a);return n.style==="label"||n.style==="matrix"?`${a}${i}`:i}function k_(t,e,n){if(!Array.isArray(e))return"";if(n.explode===!1){const i={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",s=(n.allowReserved===!0?e:e.map(o=>encodeURIComponent(o))).join(i);switch(n.style){case"simple":return s;case"label":return`.${s}`;case"matrix":return`;${t}=${s}`;default:return`${t}=${s}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",a=[];for(const i of e)n.style==="simple"||n.style==="label"?a.push(n.allowReserved===!0?i:encodeURIComponent(i)):a.push(zp(t,i,n));return n.style==="label"||n.style==="matrix"?`${r}${a.join(r)}`:a.join(r)}function fw(t){return function(n){const r=[];if(n&&typeof n=="object")for(const a in n){const i=n[a];if(i!=null){if(Array.isArray(i)){if(i.length===0)continue;r.push(k_(a,i,{style:"form",explode:!0,...t==null?void 0:t.array,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}if(typeof i=="object"){r.push(P_(a,i,{style:"deepObject",explode:!0,...t==null?void 0:t.object,allowReserved:(t==null?void 0:t.allowReserved)||!1}));continue}r.push(zp(a,i,t))}}return r.join("&")}}function xB(t,e){let n=t;for(const r of t.match(Rde)??[]){let a=r.substring(1,r.length-1),i=!1,s="simple";if(a.endsWith("*")&&(i=!0,a=a.substring(0,a.length-1)),a.startsWith(".")?(s="label",a=a.substring(1)):a.startsWith(";")&&(s="matrix",a=a.substring(1)),!e||e[a]===void 0||e[a]===null)continue;const o=e[a];if(Array.isArray(o)){n=n.replace(r,k_(a,o,{style:s,explode:i}));continue}if(typeof o=="object"){n=n.replace(r,P_(a,o,{style:s,explode:i}));continue}if(s==="matrix"){n=n.replace(r,`;${zp(a,o)}`);continue}n=n.replace(r,s==="label"?`.${encodeURIComponent(o)}`:encodeURIComponent(o))}return n}function SB(t,e){return t instanceof FormData?t:e&&(e.get instanceof Function?e.get("Content-Type")??e.get("content-type"):e["Content-Type"]??e["content-type"])==="application/x-www-form-urlencoded"?new URLSearchParams(t).toString():JSON.stringify(t)}function AB(t,e){var a;let n=`${e.baseUrl}${t}`;(a=e.params)!=null&&a.path&&(n=xB(n,e.params.path));let r=e.querySerializer(e.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function pw(...t){const e=new Headers;for(const n of t){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[a,i]of r)if(i===null)e.delete(a);else if(Array.isArray(i))for(const s of i)e.append(a,s);else i!==void 0&&e.set(a,i)}return e}function hw(t){return t.endsWith("/")?t.substring(0,t.length-1):t}var gg={},Fde=Object.create,r3=Object.defineProperty,Ude=Object.getOwnPropertyDescriptor,jde=Object.getOwnPropertyNames,Hde=Object.getPrototypeOf,zde=Object.prototype.hasOwnProperty,qde=(t,e)=>{for(var n in e)r3(t,n,{get:e[n],enumerable:!0})},CB=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of jde(e))!zde.call(t,a)&&a!==n&&r3(t,a,{get:()=>e[a],enumerable:!(r=Ude(e,a))||r.enumerable});return t},Kde=(t,e,n)=>(n=t!=null?Fde(Hde(t)):{},CB(!t||!t.__esModule?r3(n,"default",{value:t,enumerable:!0}):n,t)),Vde=t=>CB(r3({},"__esModule",{value:!0}),t),IB={};qde(IB,{analytics:()=>ele});var zn=Vde(IB),Wde=Kde(Nde),Gde=class{constructor(t){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=t.batchSize,this.baseTimeoutMs=t.baseTimeoutMs,this.currentTimeoutMs=t.baseTimeoutMs,this.sendFn=t.sendFn}enqueue(t){this.batch.push(t),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}async flush(){if(this.isSending||this.batch.length===0)return;this.isSending=!0;const t=[...this.batch.slice(0,this.batchSize)];this.batch=this.batch.slice(this.batchSize);try{await this.sendFn(t),this.currentTimeoutMs=this.baseTimeoutMs}catch(e){console.error("Sender: Failed to send batch",e),this.batch=[...t,...this.batch],this.currentTimeoutMs=Math.min(this.currentTimeoutMs*2,this.maxTimeoutMs)}finally{this.isSending=!1,this.schedule()}}},Yde=Gde,Jde=class{constructor(t){this.enabled=!1,this.properties={};const e=(0,Wde.default)({baseUrl:t}),n=async r=>{const a=await e.POST("/v1/events",{body:r});if(a.response.status!==200)throw new Error(a.error)};this.sender=new Yde({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(t,e){this.properties[t]=e}track(t,e){if(!this.enabled)return;const n={name:t,...this.properties,...e};this.sender.enqueue(n)}},Zde=Jde,bw,UC;typeof process<"u"&&gg&&(bw=(UC=gg.METAMASK_ANALYTICS_ENDPOINT)!=null?UC:gg.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var Xde=bw??"https://mm-sdk-analytics.api.cx.metamask.io/",Qde=new Zde(Xde),ele=Qde,OB={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(n){var r=Object.hasOwnProperty,a=Array.isArray?Array.isArray:function(w){return Object.prototype.toString.call(w)==="[object Array]"},i=10,s=typeof process=="object"&&typeof process.nextTick=="function",o=typeof Symbol=="function",c=typeof Reflect=="object",d=typeof setImmediate=="function",l=d?setImmediate:setTimeout,u=o?c&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(S){var w=Object.getOwnPropertyNames(S);return w.push.apply(w,Object.getOwnPropertySymbols(S)),w}:Object.keys;function f(){this._events={},this._conf&&p.call(this,this._conf)}function p(S){S&&(this._conf=S,S.delimiter&&(this.delimiter=S.delimiter),S.maxListeners!==n&&(this._maxListeners=S.maxListeners),S.wildcard&&(this.wildcard=S.wildcard),S.newListener&&(this._newListener=S.newListener),S.removeListener&&(this._removeListener=S.removeListener),S.verboseMemoryLeak&&(this.verboseMemoryLeak=S.verboseMemoryLeak),S.ignoreErrors&&(this.ignoreErrors=S.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function h(S,w){var _="(node) warning: possible EventEmitter memory leak detected. "+S+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(_+=" Event name: "+w+"."),typeof process<"u"&&process.emitWarning){var k=new Error(_);k.name="MaxListenersExceededWarning",k.emitter=this,k.count=S,process.emitWarning(k)}else console.error(_),console.trace&&console.trace()}var b=function(S,w,_){var k=arguments.length;switch(k){case 0:return[];case 1:return[S];case 2:return[S,w];case 3:return[S,w,_];default:for(var L=new Array(k);k--;)L[k]=arguments[k];return L}};function v(S,w){for(var _={},k,L=S.length,D=0,U=0;U<L;U++)k=S[U],_[k]=U<D?w[U]:n;return _}function m(S,w,_){this._emitter=S,this._target=w,this._listeners={},this._listenersCount=0;var k,L;if((_.on||_.off)&&(k=_.on,L=_.off),w.addEventListener?(k=w.addEventListener,L=w.removeEventListener):w.addListener?(k=w.addListener,L=w.removeListener):w.on&&(k=w.on,L=w.off),!k&&!L)throw Error("target does not implement any known event API");if(typeof k!="function")throw TypeError("on method must be a function");if(typeof L!="function")throw TypeError("off method must be a function");this._on=k,this._off=L;var D=S._observers;D?D.push(this):S._observers=[this]}Object.assign(m.prototype,{subscribe:function(S,w,_){var k=this,L=this._target,D=this._emitter,U=this._listeners,j=function(){var H=b.apply(null,arguments),W={data:H,name:w,original:S};if(_){var K=_.call(L,W);K!==!1&&D.emit.apply(D,[W.name].concat(H));return}D.emit.apply(D,[w].concat(H))};if(U[S])throw Error("Event '"+S+"' is already listening");this._listenersCount++,D._newListener&&D._removeListener&&!k._onNewListener?(this._onNewListener=function(H){H===w&&U[S]===null&&(U[S]=j,k._on.call(L,S,j))},D.on("newListener",this._onNewListener),this._onRemoveListener=function(H){H===w&&!D.hasListeners(H)&&U[S]&&(U[S]=null,k._off.call(L,S,j))},U[S]=null,D.on("removeListener",this._onRemoveListener)):(U[S]=j,k._on.call(L,S,j))},unsubscribe:function(S){var w=this,_=this._listeners,k=this._emitter,L,D,U=this._off,j=this._target,H;if(S&&typeof S!="string")throw TypeError("event must be a string");function W(){w._onNewListener&&(k.off("newListener",w._onNewListener),k.off("removeListener",w._onRemoveListener),w._onNewListener=null,w._onRemoveListener=null);var K=I.call(k,w);k._observers.splice(K,1)}if(S){if(L=_[S],!L)return;U.call(j,S,L),delete _[S],--this._listenersCount||W()}else{for(D=u(_),H=D.length;H-- >0;)S=D[H],U.call(j,S,_[S]);this._listeners={},this._listenersCount=0,W()}}});function T(S,w,_,k){var L=Object.assign({},w);if(!S)return L;if(typeof S!="object")throw TypeError("options must be an object");var D=Object.keys(S),U=D.length,j,H,W;function K(V){throw Error('Invalid "'+j+'" option value'+(V?". Reason: "+V:""))}for(var q=0;q<U;q++){if(j=D[q],!r.call(w,j))throw Error('Unknown "'+j+'" option');H=S[j],H!==n&&(W=_[j],L[j]=W?W(H,K):H)}return L}function A(S,w){return(typeof S!="function"||!S.hasOwnProperty("prototype"))&&w("value must be a constructor"),S}function N(S){var w="value must be type of "+S.join("|"),_=S.length,k=S[0],L=S[1];return _===1?function(D,U){if(typeof D===k)return D;U(w)}:_===2?function(D,U){var j=typeof D;if(j===k||j===L)return D;U(w)}:function(D,U){for(var j=typeof D,H=_;H-- >0;)if(j===S[H])return D;U(w)}}var R=N(["function"]),B=N(["object","function"]);function F(S,w,_){var k,L,D=0,U,j=new S(function(H,W,K){_=T(_,{timeout:0,overload:!1},{timeout:function(J,z){return J*=1,(typeof J!="number"||J<0||!Number.isFinite(J))&&z("timeout must be a positive number"),J}}),k=!_.overload&&typeof S.prototype.cancel=="function"&&typeof K=="function";function q(){L&&(L=null),D&&(clearTimeout(D),D=0)}var V=function(J){q(),H(J)},G=function(J){q(),W(J)};k?w(V,G,K):(L=[function(J){G(J||Error("canceled"))}],w(V,G,function(J){if(U)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof J!="function")throw TypeError("onCancel callback must be a function");L.push(J)}),U=!0),_.timeout>0&&(D=setTimeout(function(){var J=Error("timeout");J.code="ETIMEDOUT",D=0,j.cancel(J),W(J)},_.timeout))});return k||(j.cancel=function(H){if(L){for(var W=L.length,K=1;K<W;K++)L[K](H);L[0](H),L=null}}),j}function I(S){var w=this._observers;if(!w)return-1;for(var _=w.length,k=0;k<_;k++)if(w[k]._target===S)return k;return-1}function P(S,w,_,k,L){if(!_)return null;if(k===0){var D=typeof w;if(D==="string"){var U,j,H=0,W=0,K=this.delimiter,q=K.length;if((j=w.indexOf(K))!==-1){U=new Array(5);do U[H++]=w.slice(W,j),W=j+q;while((j=w.indexOf(K,W))!==-1);U[H++]=w.slice(W),w=U,L=H}else w=[w],L=1}else D==="object"?L=w.length:(w=[w],L=1)}var V=null,G,J,z,Y,X,ae=w[k],ie=w[k+1],oe,ue;if(k===L)_._listeners&&(typeof _._listeners=="function"?(S&&S.push(_._listeners),V=[_]):(S&&S.push.apply(S,_._listeners),V=[_]));else if(ae==="*"){for(oe=u(_),j=oe.length;j-- >0;)G=oe[j],G!=="_listeners"&&(ue=P(S,w,_[G],k+1,L),ue&&(V?V.push.apply(V,ue):V=ue));return V}else if(ae==="**"){for(X=k+1===L||k+2===L&&ie==="*",X&&_._listeners&&(V=P(S,w,_,L,L)),oe=u(_),j=oe.length;j-- >0;)G=oe[j],G!=="_listeners"&&(G==="*"||G==="**"?(_[G]._listeners&&!X&&(ue=P(S,w,_[G],L,L),ue&&(V?V.push.apply(V,ue):V=ue)),ue=P(S,w,_[G],k,L)):G===ie?ue=P(S,w,_[G],k+2,L):ue=P(S,w,_[G],k,L),ue&&(V?V.push.apply(V,ue):V=ue));return V}else _[ae]&&(V=P(S,w,_[ae],k+1,L));if(J=_["*"],J&&P(S,w,J,k+1,L),z=_["**"],z)if(k<L)for(z._listeners&&P(S,w,z,L,L),oe=u(z),j=oe.length;j-- >0;)G=oe[j],G!=="_listeners"&&(G===ie?P(S,w,z[G],k+2,L):G===ae?P(S,w,z[G],k+1,L):(Y={},Y[G]=z[G],P(S,w,{"**":Y},k+1,L)));else z._listeners?P(S,w,z,L,L):z["*"]&&z["*"]._listeners&&P(S,w,z["*"],L,L);return V}function $(S,w,_){var k=0,L=0,D,U=this.delimiter,j=U.length,H;if(typeof S=="string")if((D=S.indexOf(U))!==-1){H=new Array(5);do H[k++]=S.slice(L,D),L=D+j;while((D=S.indexOf(U,L))!==-1);H[k++]=S.slice(L)}else H=[S],k=1;else H=S,k=S.length;if(k>1){for(D=0;D+1<k;D++)if(H[D]==="**"&&H[D+1]==="**")return}var W=this.listenerTree,K;for(D=0;D<k;D++)if(K=H[D],W=W[K]||(W[K]={}),D===k-1)return W._listeners?(typeof W._listeners=="function"&&(W._listeners=[W._listeners]),_?W._listeners.unshift(w):W._listeners.push(w),!W._listeners.warned&&this._maxListeners>0&&W._listeners.length>this._maxListeners&&(W._listeners.warned=!0,h.call(this,W._listeners.length,K))):W._listeners=w,!0;return!0}function M(S,w,_,k){for(var L=u(S),D=L.length,U,j,H,W=S._listeners,K;D-- >0;)j=L[D],U=S[j],j==="_listeners"?H=_:H=_?_.concat(j):[j],K=k||typeof j=="symbol",W&&w.push(K?H:H.join(this.delimiter)),typeof U=="object"&&M.call(this,U,w,H,K);return w}function y(S){for(var w=u(S),_=w.length,k,L,D;_-- >0;)L=w[_],k=S[L],k&&(D=!0,L!=="_listeners"&&!y(k)&&delete S[L]);return D}function E(S,w,_){this.emitter=S,this.event=w,this.listener=_}E.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function C(S,w,_){if(_===!0)L=!0;else if(_===!1)k=!0;else{if(!_||typeof _!="object")throw TypeError("options should be an object or true");var k=_.async,L=_.promisify,D=_.nextTick,U=_.objectify}if(k||D||L){var j=w,H=w._origin||w;if(D&&!s)throw Error("process.nextTick is not supported");L===n&&(L=w.constructor.name==="AsyncFunction"),w=function(){var W=arguments,K=this,q=this.event;return L?D?Promise.resolve():new Promise(function(V){l(V)}).then(function(){return K.event=q,j.apply(K,W)}):(D?process.nextTick:l)(function(){K.event=q,j.apply(K,W)})},w._async=!0,w._origin=H}return[w,U?new E(this,S,w):this]}function g(S){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,p.call(this,S)}g.EventEmitter2=g,g.prototype.listenTo=function(S,w,_){if(typeof S!="object")throw TypeError("target musts be an object");var k=this;_=T(_,{on:n,off:n,reducers:n},{on:R,off:R,reducers:B});function L(D){if(typeof D!="object")throw TypeError("events must be an object");var U=_.reducers,j=I.call(k,S),H;j===-1?H=new m(k,S,_):H=k._observers[j];for(var W=u(D),K=W.length,q,V=typeof U=="function",G=0;G<K;G++)q=W[G],H.subscribe(q,D[q]||q,V?U:U&&U[q])}return a(w)?L(v(w)):L(typeof w=="string"?v(w.split(/\s+/)):w),this},g.prototype.stopListeningTo=function(S,w){var _=this._observers;if(!_)return!1;var k=_.length,L,D=!1;if(S&&typeof S!="object")throw TypeError("target should be an object");for(;k-- >0;)L=_[k],(!S||L._target===S)&&(L.unsubscribe(w),D=!0);return D},g.prototype.delimiter=".",g.prototype.setMaxListeners=function(S){S!==n&&(this._maxListeners=S,this._conf||(this._conf={}),this._conf.maxListeners=S)},g.prototype.getMaxListeners=function(){return this._maxListeners},g.prototype.event="",g.prototype.once=function(S,w,_){return this._once(S,w,!1,_)},g.prototype.prependOnceListener=function(S,w,_){return this._once(S,w,!0,_)},g.prototype._once=function(S,w,_,k){return this._many(S,1,w,_,k)},g.prototype.many=function(S,w,_,k){return this._many(S,w,_,!1,k)},g.prototype.prependMany=function(S,w,_,k){return this._many(S,w,_,!0,k)},g.prototype._many=function(S,w,_,k,L){var D=this;if(typeof _!="function")throw new Error("many only accepts instances of Function");function U(){return--w===0&&D.off(S,U),_.apply(this,arguments)}return U._origin=_,this._on(S,U,k,L)},g.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var S=arguments[0],w,_=this.wildcard,k,L,D,U,j;if(S==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(_&&(w=S,S!=="newListener"&&S!=="removeListener"&&typeof S=="object")){if(L=S.length,o){for(D=0;D<L;D++)if(typeof S[D]=="symbol"){j=!0;break}}j||(S=S.join(this.delimiter))}var H=arguments.length,W;if(this._all&&this._all.length)for(W=this._all.slice(),D=0,L=W.length;D<L;D++)switch(this.event=S,H){case 1:W[D].call(this,S);break;case 2:W[D].call(this,S,arguments[1]);break;case 3:W[D].call(this,S,arguments[1],arguments[2]);break;default:W[D].apply(this,arguments)}if(_)W=[],P.call(this,W,w,this.listenerTree,0,L);else if(W=this._events[S],typeof W=="function"){switch(this.event=S,H){case 1:W.call(this);break;case 2:W.call(this,arguments[1]);break;case 3:W.call(this,arguments[1],arguments[2]);break;default:for(k=new Array(H-1),U=1;U<H;U++)k[U-1]=arguments[U];W.apply(this,k)}return!0}else W&&(W=W.slice());if(W&&W.length){if(H>3)for(k=new Array(H-1),U=1;U<H;U++)k[U-1]=arguments[U];for(D=0,L=W.length;D<L;D++)switch(this.event=S,H){case 1:W[D].call(this);break;case 2:W[D].call(this,arguments[1]);break;case 3:W[D].call(this,arguments[1],arguments[2]);break;default:W[D].apply(this,k)}return!0}else if(!this.ignoreErrors&&!this._all&&S==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},g.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||f.call(this);var S=arguments[0],w=this.wildcard,_,k,L,D,U,j;if(S==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(w&&(_=S,S!=="newListener"&&S!=="removeListener"&&typeof S=="object")){if(D=S.length,o){for(U=0;U<D;U++)if(typeof S[U]=="symbol"){k=!0;break}}k||(S=S.join(this.delimiter))}var H=[],W=arguments.length,K;if(this._all)for(U=0,D=this._all.length;U<D;U++)switch(this.event=S,W){case 1:H.push(this._all[U].call(this,S));break;case 2:H.push(this._all[U].call(this,S,arguments[1]));break;case 3:H.push(this._all[U].call(this,S,arguments[1],arguments[2]));break;default:H.push(this._all[U].apply(this,arguments))}if(w?(K=[],P.call(this,K,_,this.listenerTree,0)):K=this._events[S],typeof K=="function")switch(this.event=S,W){case 1:H.push(K.call(this));break;case 2:H.push(K.call(this,arguments[1]));break;case 3:H.push(K.call(this,arguments[1],arguments[2]));break;default:for(L=new Array(W-1),j=1;j<W;j++)L[j-1]=arguments[j];H.push(K.apply(this,L))}else if(K&&K.length){if(K=K.slice(),W>3)for(L=new Array(W-1),j=1;j<W;j++)L[j-1]=arguments[j];for(U=0,D=K.length;U<D;U++)switch(this.event=S,W){case 1:H.push(K[U].call(this));break;case 2:H.push(K[U].call(this,arguments[1]));break;case 3:H.push(K[U].call(this,arguments[1],arguments[2]));break;default:H.push(K[U].apply(this,L))}}else if(!this.ignoreErrors&&!this._all&&S==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(H)},g.prototype.on=function(S,w,_){return this._on(S,w,!1,_)},g.prototype.prependListener=function(S,w,_){return this._on(S,w,!0,_)},g.prototype.onAny=function(S){return this._onAny(S,!1)},g.prototype.prependAny=function(S){return this._onAny(S,!0)},g.prototype.addListener=g.prototype.on,g.prototype._onAny=function(S,w){if(typeof S!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),w?this._all.unshift(S):this._all.push(S),this},g.prototype._on=function(S,w,_,k){if(typeof S=="function")return this._onAny(S,w),this;if(typeof w!="function")throw new Error("on only accepts instances of Function");this._events||f.call(this);var L=this,D;return k!==n&&(D=C.call(this,S,w,k),w=D[0],L=D[1]),this._newListener&&this.emit("newListener",S,w),this.wildcard?($.call(this,S,w,_),L):(this._events[S]?(typeof this._events[S]=="function"&&(this._events[S]=[this._events[S]]),_?this._events[S].unshift(w):this._events[S].push(w),!this._events[S].warned&&this._maxListeners>0&&this._events[S].length>this._maxListeners&&(this._events[S].warned=!0,h.call(this,this._events[S].length,S))):this._events[S]=w,L)},g.prototype.off=function(S,w){if(typeof w!="function")throw new Error("removeListener only takes instances of Function");var _,k=[];if(this.wildcard){var L=typeof S=="string"?S.split(this.delimiter):S.slice();if(k=P.call(this,null,L,this.listenerTree,0),!k)return this}else{if(!this._events[S])return this;_=this._events[S],k.push({_listeners:_})}for(var D=0;D<k.length;D++){var U=k[D];if(_=U._listeners,a(_)){for(var j=-1,H=0,W=_.length;H<W;H++)if(_[H]===w||_[H].listener&&_[H].listener===w||_[H]._origin&&_[H]._origin===w){j=H;break}if(j<0)continue;return this.wildcard?U._listeners.splice(j,1):this._events[S].splice(j,1),_.length===0&&(this.wildcard?delete U._listeners:delete this._events[S]),this._removeListener&&this.emit("removeListener",S,w),this}else(_===w||_.listener&&_.listener===w||_._origin&&_._origin===w)&&(this.wildcard?delete U._listeners:delete this._events[S],this._removeListener&&this.emit("removeListener",S,w))}return this.listenerTree&&y(this.listenerTree),this},g.prototype.offAny=function(S){var w=0,_=0,k;if(S&&this._all&&this._all.length>0){for(k=this._all,w=0,_=k.length;w<_;w++)if(S===k[w])return k.splice(w,1),this._removeListener&&this.emit("removeListenerAny",S),this}else{if(k=this._all,this._removeListener)for(w=0,_=k.length;w<_;w++)this.emit("removeListenerAny",k[w]);this._all=[]}return this},g.prototype.removeListener=g.prototype.off,g.prototype.removeAllListeners=function(S){if(S===n)return!this._events||f.call(this),this;if(this.wildcard){var w=P.call(this,null,S,this.listenerTree,0),_,k;if(!w)return this;for(k=0;k<w.length;k++)_=w[k],_._listeners=null;this.listenerTree&&y(this.listenerTree)}else this._events&&(this._events[S]=null);return this},g.prototype.listeners=function(S){var w=this._events,_,k,L,D,U;if(S===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!w)return[];for(_=u(w),D=_.length,L=[];D-- >0;)k=w[_[D]],typeof k=="function"?L.push(k):L.push.apply(L,k);return L}else{if(this.wildcard){if(U=this.listenerTree,!U)return[];var j=[],H=typeof S=="string"?S.split(this.delimiter):S.slice();return P.call(this,j,H,U,0),j}return w?(k=w[S],k?typeof k=="function"?[k]:k:[]):[]}},g.prototype.eventNames=function(S){var w=this._events;return this.wildcard?M.call(this,this.listenerTree,[],null,S):w?u(w):[]},g.prototype.listenerCount=function(S){return this.listeners(S).length},g.prototype.hasListeners=function(S){if(this.wildcard){var w=[],_=typeof S=="string"?S.split(this.delimiter):S.slice();return P.call(this,w,_,this.listenerTree,0),w.length>0}var k=this._events,L=this._all;return!!(L&&L.length||k&&(S===n?u(k).length:k[S]))},g.prototype.listenersAny=function(){return this._all?this._all:[]},g.prototype.waitFor=function(S,w){var _=this,k=typeof w;return k==="number"?w={timeout:w}:k==="function"&&(w={filter:w}),w=T(w,{timeout:0,filter:n,handleError:!1,Promise,overload:!1},{filter:R,Promise:A}),F(w.Promise,function(L,D,U){function j(){var H=w.filter;if(!(H&&!H.apply(_,arguments)))if(_.off(S,j),w.handleError){var W=arguments[0];W?D(W):L(b.apply(null,arguments).slice(1))}else L(b.apply(null,arguments))}U(function(){_.off(S,j)}),_._on(S,j,!1)},{timeout:w.timeout,overload:w.overload})};function x(S,w,_){_=T(_,{Promise,timeout:0,overload:!1},{Promise:A});var k=_.Promise;return F(k,function(L,D,U){var j;if(typeof S.addEventListener=="function"){j=function(){L(b.apply(null,arguments))},U(function(){S.removeEventListener(w,j)}),S.addEventListener(w,j,{once:!0});return}var H=function(){W&&S.removeListener("error",W),L(b.apply(null,arguments))},W;w!=="error"&&(W=function(K){S.removeListener(w,H),D(K)},S.once("error",W)),U(function(){W&&S.removeListener("error",W),S.removeListener(w,H)}),S.once(w,H)},{timeout:_.timeout,overload:_.overload})}var O=g.prototype;Object.defineProperties(g,{defaultMaxListeners:{get:function(){return O._maxListeners},set:function(S){if(typeof S!="number"||S<0||Number.isNaN(S))throw TypeError("n must be a non-negative number");O._maxListeners=S},enumerable:!0},once:{value:x,writable:!0,configurable:!0}}),Object.defineProperties(O,{_maxListeners:{value:i,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),t.exports=g})()})(OB);var a3=OB.exports;const tle=Wi(a3);function be(t,e,n,r){return new(n||(n=Promise))(function(a,i){function s(d){try{c(r.next(d))}catch(l){i(l)}}function o(d){try{c(r.throw(d))}catch(l){i(l)}}function c(d){var l;d.done?a(d.value):(l=d.value,l instanceof n?l:new n(function(u){u(l)})).then(s,o)}c((r=r.apply(t,e||[])).next())})}var Or=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{},gs=[],ei=[],nle=typeof Uint8Array<"u"?Uint8Array:Array,N_=!1;function MB(){N_=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0;e<64;++e)gs[e]=t[e],ei[t.charCodeAt(e)]=e;ei[45]=62,ei[95]=63}function rle(t,e,n){for(var r,a,i=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],i.push(gs[(a=r)>>18&63]+gs[a>>12&63]+gs[a>>6&63]+gs[63&a]);return i.join("")}function jC(t){var e;N_||MB();for(var n=t.length,r=n%3,a="",i=[],s=16383,o=0,c=n-r;o<c;o+=s)i.push(rle(t,o,o+s>c?c:o+s));return r===1?(e=t[n-1],a+=gs[e>>2],a+=gs[e<<4&63],a+="=="):r===2&&(e=(t[n-2]<<8)+t[n-1],a+=gs[e>>10],a+=gs[e>>4&63],a+=gs[e<<2&63],a+="="),i.push(a),i.join("")}function zh(t,e,n,r,a){var i,s,o=8*a-r-1,c=(1<<o)-1,d=c>>1,l=-7,u=n?a-1:0,f=n?-1:1,p=t[e+u];for(u+=f,i=p&(1<<-l)-1,p>>=-l,l+=o;l>0;i=256*i+t[e+u],u+=f,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+t[e+u],u+=f,l-=8);if(i===0)i=1-d;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=d}return(p?-1:1)*s*Math.pow(2,i-r)}function PB(t,e,n,r,a,i){var s,o,c,d=8*i-a-1,l=(1<<d)-1,u=l>>1,f=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,b=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+u>=1?f/c:f*Math.pow(2,1-u))*c>=2&&(s++,c/=2),s+u>=l?(o=0,s=l):s+u>=1?(o=(e*c-1)*Math.pow(2,a),s+=u):(o=e*Math.pow(2,u-1)*Math.pow(2,a),s=0));a>=8;t[n+p]=255&o,p+=h,o/=256,a-=8);for(s=s<<a|o,d+=a;d>0;t[n+p]=255&s,p+=h,s/=256,d-=8);t[n+p-h]|=128*b}var ale={}.toString,kB=Array.isArray||function(t){return ale.call(t)=="[object Array]"};ye.TYPED_ARRAY_SUPPORT=Or.TYPED_ARRAY_SUPPORT===void 0||Or.TYPED_ARRAY_SUPPORT;var ile=Y2();function Y2(){return ye.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ko(t,e){if(Y2()<e)throw new RangeError("Invalid typed array length");return ye.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ye.prototype:(t===null&&(t=new ye(e)),t.length=e),t}function ye(t,e,n){if(!(ye.TYPED_ARRAY_SUPPORT||this instanceof ye))return new ye(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return yw(this,t)}return NB(this,t,e,n)}function NB(t,e,n,r){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?function(a,i,s,o){if(i.byteLength,s<0||i.byteLength<s)throw new RangeError("'offset' is out of bounds");if(i.byteLength<s+(o||0))throw new RangeError("'length' is out of bounds");return i=s===void 0&&o===void 0?new Uint8Array(i):o===void 0?new Uint8Array(i,s):new Uint8Array(i,s,o),ye.TYPED_ARRAY_SUPPORT?(a=i).__proto__=ye.prototype:a=wg(a,i),a}(t,e,n,r):typeof e=="string"?function(a,i,s){if(typeof s=="string"&&s!==""||(s="utf8"),!ye.isEncoding(s))throw new TypeError('"encoding" must be a valid string encoding');var o=0|DB(i,s);a=ko(a,o);var c=a.write(i,s);return c!==o&&(a=a.slice(0,c)),a}(t,e,n):function(a,i){if(ws(i)){var s=0|R_(i.length);return(a=ko(a,s)).length===0||i.copy(a,0,0,s),a}if(i){if(typeof ArrayBuffer<"u"&&i.buffer instanceof ArrayBuffer||"length"in i)return typeof i.length!="number"||(o=i.length)!=o?ko(a,0):wg(a,i);if(i.type==="Buffer"&&kB(i.data))return wg(a,i.data)}var o;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function RB(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function yw(t,e){if(RB(e),t=ko(t,e<0?0:0|R_(e)),!ye.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function wg(t,e){var n=e.length<0?0:0|R_(e.length);t=ko(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function R_(t){if(t>=Y2())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y2().toString(16)+" bytes");return 0|t}function ws(t){return!(t==null||!t._isBuffer)}function DB(t,e){if(ws(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return J2(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return FB(t).length;default:if(r)return J2(t).length;e=(""+e).toLowerCase(),r=!0}}function sle(t,e,n){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return ble(this,e,n);case"utf8":case"utf-8":return LB(this,e,n);case"ascii":return ple(this,e,n);case"latin1":case"binary":return hle(this,e,n);case"base64":return fle(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yle(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function I1(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function HC(t,e,n,r,a){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(n<0){if(!a)return-1;n=0}if(typeof e=="string"&&(e=ye.from(e,r)),ws(e))return e.length===0?-1:zC(t,e,n,r,a);if(typeof e=="number")return e&=255,ye.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?a?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):zC(t,[e],n,r,a);throw new TypeError("val must be string, number or Buffer")}function zC(t,e,n,r,a){var i,s=1,o=t.length,c=e.length;if(r!==void 0&&((r=String(r).toLowerCase())==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,c/=2,n/=2}function d(p,h){return s===1?p[h]:p.readUInt16BE(h*s)}if(a){var l=-1;for(i=n;i<o;i++)if(d(t,i)===d(e,l===-1?0:i-l)){if(l===-1&&(l=i),i-l+1===c)return l*s}else l!==-1&&(i-=i-l),l=-1}else for(n+c>o&&(n=o-c),i=n;i>=0;i--){for(var u=!0,f=0;f<c;f++)if(d(t,i+f)!==d(e,f)){u=!1;break}if(u)return i}return-1}function ole(t,e,n,r){n=Number(n)||0;var a=t.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[n+s]=o}return s}function cle(t,e,n,r){return i3(J2(e,t.length-n),t,n,r)}function $B(t,e,n,r){return i3(function(a){for(var i=[],s=0;s<a.length;++s)i.push(255&a.charCodeAt(s));return i}(e),t,n,r)}function dle(t,e,n,r){return $B(t,e,n,r)}function lle(t,e,n,r){return i3(FB(e),t,n,r)}function ule(t,e,n,r){return i3(function(a,i){for(var s,o,c,d=[],l=0;l<a.length&&!((i-=2)<0);++l)o=(s=a.charCodeAt(l))>>8,c=s%256,d.push(c),d.push(o);return d}(e,t.length-n),t,n,r)}function fle(t,e,n){return e===0&&n===t.length?jC(t):jC(t.slice(e,n))}function LB(t,e,n){n=Math.min(t.length,n);for(var r=[],a=e;a<n;){var i,s,o,c,d=t[a],l=null,u=d>239?4:d>223?3:d>191?2:1;if(a+u<=n)switch(u){case 1:d<128&&(l=d);break;case 2:(192&(i=t[a+1]))==128&&(c=(31&d)<<6|63&i)>127&&(l=c);break;case 3:i=t[a+1],s=t[a+2],(192&i)==128&&(192&s)==128&&(c=(15&d)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=t[a+1],s=t[a+2],o=t[a+3],(192&i)==128&&(192&s)==128&&(192&o)==128&&(c=(15&d)<<18|(63&i)<<12|(63&s)<<6|63&o)>65535&&c<1114112&&(l=c)}l===null?(l=65533,u=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),a+=u}return function(f){var p=f.length;if(p<=qC)return String.fromCharCode.apply(String,f);for(var h="",b=0;b<p;)h+=String.fromCharCode.apply(String,f.slice(b,b+=qC));return h}(r)}ye.poolSize=8192,ye._augment=function(t){return t.__proto__=ye.prototype,t},ye.from=function(t,e,n){return NB(null,t,e,n)},ye.TYPED_ARRAY_SUPPORT&&(ye.prototype.__proto__=Uint8Array.prototype,ye.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ye[Symbol.species]),ye.alloc=function(t,e,n){return function(r,a,i,s){return RB(a),a<=0?ko(r,a):i!==void 0?typeof s=="string"?ko(r,a).fill(i,s):ko(r,a).fill(i):ko(r,a)}(null,t,e,n)},ye.allocUnsafe=function(t){return yw(null,t)},ye.allocUnsafeSlow=function(t){return yw(null,t)},ye.isBuffer=UB,ye.compare=function(t,e){if(!ws(t)||!ws(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,a=0,i=Math.min(n,r);a<i;++a)if(t[a]!==e[a]){n=t[a],r=e[a];break}return n<r?-1:r<n?1:0},ye.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ye.concat=function(t,e){if(!kB(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return ye.alloc(0);var n;if(e===void 0)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=ye.allocUnsafe(e),a=0;for(n=0;n<t.length;++n){var i=t[n];if(!ws(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},ye.byteLength=DB,ye.prototype._isBuffer=!0,ye.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)I1(this,e,e+1);return this},ye.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)I1(this,e,e+3),I1(this,e+1,e+2);return this},ye.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)I1(this,e,e+7),I1(this,e+1,e+6),I1(this,e+2,e+5),I1(this,e+3,e+4);return this},ye.prototype.toString=function(){var t=0|this.length;return t===0?"":arguments.length===0?LB(this,0,t):sle.apply(this,arguments)},ye.prototype.equals=function(t){if(!ws(t))throw new TypeError("Argument must be a Buffer");return this===t||ye.compare(this,t)===0},ye.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ye.prototype.compare=function(t,e,n,r,a){if(!ws(t))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),n===void 0&&(n=t?t.length:0),r===void 0&&(r=0),a===void 0&&(a=this.length),e<0||n>t.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&e>=n)return 0;if(r>=a)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(a>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),o=Math.min(i,s),c=this.slice(r,a),d=t.slice(e,n),l=0;l<o;++l)if(c[l]!==d[l]){i=c[l],s=d[l];break}return i<s?-1:s<i?1:0},ye.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},ye.prototype.indexOf=function(t,e,n){return HC(this,t,e,n,!0)},ye.prototype.lastIndexOf=function(t,e,n){return HC(this,t,e,n,!1)},ye.prototype.write=function(t,e,n,r){if(e===void 0)r="utf8",n=this.length,e=0;else if(n===void 0&&typeof e=="string")r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,r===void 0&&(r="utf8")):(r=n,n=void 0)}var a=this.length-e;if((n===void 0||n>a)&&(n=a),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return ole(this,t,e,n);case"utf8":case"utf-8":return cle(this,t,e,n);case"ascii":return $B(this,t,e,n);case"latin1":case"binary":return dle(this,t,e,n);case"base64":return lle(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ule(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var qC=4096;function ple(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(127&t[a]);return r}function hle(t,e,n){var r="";n=Math.min(t.length,n);for(var a=e;a<n;++a)r+=String.fromCharCode(t[a]);return r}function ble(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=e;i<n;++i)a+=gle(t[i]);return a}function yle(t,e,n){for(var r=t.slice(e,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function h0(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function Fr(t,e,n,r,a,i){if(!ws(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function qh(t,e,n,r){e<0&&(e=65535+e+1);for(var a=0,i=Math.min(t.length-n,2);a<i;++a)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function Kh(t,e,n,r){e<0&&(e=4294967295+e+1);for(var a=0,i=Math.min(t.length-n,4);a<i;++a)t[n+a]=e>>>8*(r?a:3-a)&255}function BB(t,e,n,r,a,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function KC(t,e,n,r,a){return a||BB(t,0,n,4),PB(t,e,n,r,23,4),n+4}function VC(t,e,n,r,a){return a||BB(t,0,n,8),PB(t,e,n,r,52,8),n+8}ye.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=e===void 0?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),ye.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=ye.prototype;else{var a=e-t;n=new ye(a,void 0);for(var i=0;i<a;++i)n[i]=this[i+t]}return n},ye.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||h0(t,e,this.length);for(var r=this[t],a=1,i=0;++i<e&&(a*=256);)r+=this[t+i]*a;return r},ye.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||h0(t,e,this.length);for(var r=this[t+--e],a=1;e>0&&(a*=256);)r+=this[t+--e]*a;return r},ye.prototype.readUInt8=function(t,e){return e||h0(t,1,this.length),this[t]},ye.prototype.readUInt16LE=function(t,e){return e||h0(t,2,this.length),this[t]|this[t+1]<<8},ye.prototype.readUInt16BE=function(t,e){return e||h0(t,2,this.length),this[t]<<8|this[t+1]},ye.prototype.readUInt32LE=function(t,e){return e||h0(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ye.prototype.readUInt32BE=function(t,e){return e||h0(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ye.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||h0(t,e,this.length);for(var r=this[t],a=1,i=0;++i<e&&(a*=256);)r+=this[t+i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*e)),r},ye.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||h0(t,e,this.length);for(var r=e,a=1,i=this[t+--r];r>0&&(a*=256);)i+=this[t+--r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*e)),i},ye.prototype.readInt8=function(t,e){return e||h0(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ye.prototype.readInt16LE=function(t,e){e||h0(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},ye.prototype.readInt16BE=function(t,e){e||h0(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},ye.prototype.readInt32LE=function(t,e){return e||h0(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ye.prototype.readInt32BE=function(t,e){return e||h0(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ye.prototype.readFloatLE=function(t,e){return e||h0(t,4,this.length),zh(this,t,!0,23,4)},ye.prototype.readFloatBE=function(t,e){return e||h0(t,4,this.length),zh(this,t,!1,23,4)},ye.prototype.readDoubleLE=function(t,e){return e||h0(t,8,this.length),zh(this,t,!0,52,8)},ye.prototype.readDoubleBE=function(t,e){return e||h0(t,8,this.length),zh(this,t,!1,52,8)},ye.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Fr(this,t,e,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[e]=255&t;++i<n&&(a*=256);)this[e+i]=t/a&255;return e+n},ye.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||Fr(this,t,e,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[e+a]=255&t;--a>=0&&(i*=256);)this[e+a]=t/i&255;return e+n},ye.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,1,255,0),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ye.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qh(this,t,e,!0),e+2},ye.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,2,65535,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qh(this,t,e,!1),e+2},ye.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):Kh(this,t,e,!0),e+4},ye.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,4,4294967295,0),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Kh(this,t,e,!1),e+4},ye.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);Fr(this,t,e,n,a-1,-a)}var i=0,s=1,o=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&o===0&&this[e+i-1]!==0&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},ye.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var a=Math.pow(2,8*n-1);Fr(this,t,e,n,a-1,-a)}var i=n-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&o===0&&this[e+i+1]!==0&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+n},ye.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,1,127,-128),ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ye.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):qh(this,t,e,!0),e+2},ye.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,2,32767,-32768),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):qh(this,t,e,!1),e+2},ye.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,4,2147483647,-2147483648),ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):Kh(this,t,e,!0),e+4},ye.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||Fr(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):Kh(this,t,e,!1),e+4},ye.prototype.writeFloatLE=function(t,e,n){return KC(this,t,e,!0,n)},ye.prototype.writeFloatBE=function(t,e,n){return KC(this,t,e,!1,n)},ye.prototype.writeDoubleLE=function(t,e,n){return VC(this,t,e,!0,n)},ye.prototype.writeDoubleBE=function(t,e,n){return VC(this,t,e,!1,n)},ye.prototype.copy=function(t,e,n,r){if(n||(n=0),r||r===0||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n||t.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var a,i=r-n;if(this===t&&n<e&&e<r)for(a=i-1;a>=0;--a)t[a+e]=this[a+n];else if(i<1e3||!ye.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},ye.prototype.fill=function(t,e,n,r){if(typeof t=="string"){if(typeof e=="string"?(r=e,e=0,n=this.length):typeof n=="string"&&(r=n,n=this.length),t.length===1){var a=t.charCodeAt(0);a<256&&(t=a)}if(r!==void 0&&typeof r!="string")throw new TypeError("encoding must be a string");if(typeof r=="string"&&!ye.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else typeof t=="number"&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=n===void 0?this.length:n>>>0,t||(t=0),typeof t=="number")for(i=e;i<n;++i)this[i]=t;else{var s=ws(t)?t:J2(new ye(t,r).toString()),o=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%o]}return this};var mle=/[^+\/0-9A-Za-z-_]/g;function gle(t){return t<16?"0"+t.toString(16):t.toString(16)}function J2(t,e){var n;e=e||1/0;for(var r=t.length,a=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!a){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function FB(t){return function(e){var n,r,a,i,s,o;N_||MB();var c=e.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=e[c-2]==="="?2:e[c-1]==="="?1:0,o=new nle(3*c/4-s),a=s>0?c-4:c;var d=0;for(n=0,r=0;n<a;n+=4,r+=3)i=ei[e.charCodeAt(n)]<<18|ei[e.charCodeAt(n+1)]<<12|ei[e.charCodeAt(n+2)]<<6|ei[e.charCodeAt(n+3)],o[d++]=i>>16&255,o[d++]=i>>8&255,o[d++]=255&i;return s===2?(i=ei[e.charCodeAt(n)]<<2|ei[e.charCodeAt(n+1)]>>4,o[d++]=255&i):s===1&&(i=ei[e.charCodeAt(n)]<<10|ei[e.charCodeAt(n+1)]<<4|ei[e.charCodeAt(n+2)]>>2,o[d++]=i>>8&255,o[d++]=255&i),o}(function(e){if((e=function(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}(e).replace(mle,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(t))}function i3(t,e,n,r){for(var a=0;a<r&&!(a+n>=e.length||a>=t.length);++a)e[a+n]=t[a];return a}function UB(t){return t!=null&&(!!t._isBuffer||WC(t)||function(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&WC(e.slice(0,0))}(t))}function WC(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var wle=Object.freeze({__proto__:null,Buffer:ye,INSPECT_MAX_BYTES:50,SlowBuffer:function(t){return+t!=t&&(t=0),ye.alloc(+t)},isBuffer:UB,kMaxLength:ile}),di=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function qp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var a=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return t[r]}})}),n}var Hl={},Da={},or={};function Z2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function jB(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function HB(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function D_(t,...e){if(!HB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function zB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("hash must be wrapped by utils.wrapConstructor");Z2(t.outputLen),Z2(t.blockLen)}function qB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function KB(t,e){D_(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(or,"__esModule",{value:!0}),or.isBytes=HB,or.number=Z2,or.bool=jB,or.bytes=D_,or.hash=zB,or.exists=qB,or.output=KB;const vle={number:Z2,bool:jB,bytes:D_,hash:zB,exists:qB,output:KB};or.default=vle,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.wrapCipher=t.Hash=t.nextTick=t.isLE=t.createView=t.u32=t.u16=t.u8=void 0,t.bytesToHex=r,t.hexToBytes=s,t.hexToNumber=o,t.bytesToNumberBE=function(u){return o(r(u))},t.numberToBytesBE=function(u,f){return s(u.toString(16).padStart(2*f,"0"))},t.asyncLoop=async function(u,f,p){let h=Date.now();for(let b=0;b<u;b++){p(b);const v=Date.now()-h;v>=0&&v<f||(await(0,t.nextTick)(),h+=v)}},t.utf8ToBytes=c,t.bytesToUtf8=function(u){return new TextDecoder().decode(u)},t.toBytes=function(u){if(typeof u=="string")u=c(u);else{if(!(0,e.isBytes)(u))throw new Error("Uint8Array expected, got "+typeof u);u=l(u)}return u},t.concatBytes=function(...u){let f=0;for(let h=0;h<u.length;h++){const b=u[h];(0,e.bytes)(b),f+=b.length}const p=new Uint8Array(f);for(let h=0,b=0;h<u.length;h++){const v=u[h];p.set(v,b),b+=v.length}return p},t.checkOpts=function(u,f){if(f==null||typeof f!="object")throw new Error("options must be defined");return Object.assign(u,f)},t.equalBytes=function(u,f){if(u.length!==f.length)return!1;let p=0;for(let h=0;h<u.length;h++)p|=u[h]^f[h];return p===0},t.setBigUint64=d,t.u64Lengths=function(u,f){const p=new Uint8Array(16),h=(0,t.createView)(p);return d(h,0,BigInt(f?f.length:0),!0),d(h,8,BigInt(u.length),!0),p},t.isAligned32=function(u){return u.byteOffset%4==0},t.copyBytes=l,t.clean=function(...u){for(let f=0;f<u.length;f++)u[f].fill(0)};const e=or;if(t.u8=u=>new Uint8Array(u.buffer,u.byteOffset,u.byteLength),t.u16=u=>new Uint16Array(u.buffer,u.byteOffset,Math.floor(u.byteLength/2)),t.u32=u=>new Uint32Array(u.buffer,u.byteOffset,Math.floor(u.byteLength/4)),t.createView=u=>new DataView(u.buffer,u.byteOffset,u.byteLength),t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,!t.isLE)throw new Error("Non little-endian hardware is not supported");const n=Array.from({length:256},(u,f)=>f.toString(16).padStart(2,"0"));function r(u){(0,e.bytes)(u);let f="";for(let p=0;p<u.length;p++)f+=n[u[p]];return f}const a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(u){return u>=a._0&&u<=a._9?u-a._0:u>=a._A&&u<=a._F?u-(a._A-10):u>=a._a&&u<=a._f?u-(a._a-10):void 0}function s(u){if(typeof u!="string")throw new Error("hex string expected, got "+typeof u);const f=u.length,p=f/2;if(f%2)throw new Error("padded hex string expected, got unpadded hex of length "+f);const h=new Uint8Array(p);for(let b=0,v=0;b<p;b++,v+=2){const m=i(u.charCodeAt(v)),T=i(u.charCodeAt(v+1));if(m===void 0||T===void 0){const A=u[v]+u[v+1];throw new Error('hex string expected, got non-hex character "'+A+'" at index '+v)}h[b]=16*m+T}return h}function o(u){if(typeof u!="string")throw new Error("hex string expected, got "+typeof u);return BigInt(u===""?"0":`0x${u}`)}function c(u){if(typeof u!="string")throw new Error("string expected, got "+typeof u);return new Uint8Array(new TextEncoder().encode(u))}t.nextTick=async()=>{},t.Hash=class{};function d(u,f,p,h){if(typeof u.setBigUint64=="function")return u.setBigUint64(f,p,h);const b=BigInt(32),v=BigInt(4294967295),m=Number(p>>b&v),T=Number(p&v),A=h?4:0,N=h?0:4;u.setUint32(f+A,m,h),u.setUint32(f+N,T,h)}function l(u){return Uint8Array.from(u)}t.wrapCipher=(u,f)=>(Object.assign(f,u),f)}(Da);var S5={},g0={};Object.defineProperty(g0,"__esModule",{value:!0}),g0.AEAD_TAG_LENGTH=g0.XCHACHA20_NONCE_LENGTH=g0.CURVE25519_PUBLIC_KEY_SIZE=g0.ETH_PUBLIC_KEY_SIZE=g0.UNCOMPRESSED_PUBLIC_KEY_SIZE=g0.COMPRESSED_PUBLIC_KEY_SIZE=g0.SECRET_KEY_LENGTH=void 0,g0.SECRET_KEY_LENGTH=32,g0.COMPRESSED_PUBLIC_KEY_SIZE=33,g0.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,g0.ETH_PUBLIC_KEY_SIZE=64,g0.CURVE25519_PUBLIC_KEY_SIZE=32,g0.XCHACHA20_NONCE_LENGTH=24,g0.AEAD_TAG_LENGTH=16,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ephemeralKeySize=t.symmetricNonceLength=t.symmetricAlgorithm=t.isHkdfKeyCompressed=t.isEphemeralKeyCompressed=t.ellipticCurve=t.ECIES_CONFIG=void 0;var e=g0,n=function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16};t.ECIES_CONFIG=new n,t.ellipticCurve=function(){return t.ECIES_CONFIG.ellipticCurve},t.isEphemeralKeyCompressed=function(){return t.ECIES_CONFIG.isEphemeralKeyCompressed},t.isHkdfKeyCompressed=function(){return t.ECIES_CONFIG.isHkdfKeyCompressed},t.symmetricAlgorithm=function(){return t.ECIES_CONFIG.symmetricAlgorithm},t.symmetricNonceLength=function(){return t.ECIES_CONFIG.symmetricNonceLength},t.ephemeralKeySize=function(){var r={secp256k1:t.ECIES_CONFIG.isEphemeralKeyCompressed?e.COMPRESSED_PUBLIC_KEY_SIZE:e.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:e.CURVE25519_PUBLIC_KEY_SIZE,ed25519:e.CURVE25519_PUBLIC_KEY_SIZE};if(t.ECIES_CONFIG.ellipticCurve in r)return r[t.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(S5);var vg={},X2={},o3={},VB={},$_={},Vh={};Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.crypto=void 0,Vh.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.gcm=t.ctr=t.cbc=t.utils=void 0,t.randomBytes=a,t.getWebcryptoSubtle=i,t.managedNonce=function(c){return(0,n.number)(c.nonceLength),(d,...l)=>({encrypt(u,...f){const{nonceLength:p}=c,h=a(p),b=c(d,h,...l).encrypt(u,...f),v=(0,r.concatBytes)(h,b);return b.fill(0),v},decrypt(u,...f){const{nonceLength:p}=c,h=u.subarray(0,p),b=u.subarray(p);return c(d,h,...l).decrypt(b,...f)}})};const e=Vh,n=or,r=Da;function a(c=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(c));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(c);throw new Error("crypto.getRandomValues must be defined")}function i(){if(e.crypto&&typeof e.crypto.subtle=="object"&&e.crypto.subtle!=null)return e.crypto.subtle;throw new Error("crypto.subtle must be defined")}t.utils={async encrypt(c,d,l,u){const f=i(),p=await f.importKey("raw",c,d,!0,["encrypt"]),h=await f.encrypt(l,p,u);return new Uint8Array(h)},async decrypt(c,d,l,u){const f=i(),p=await f.importKey("raw",c,d,!0,["decrypt"]),h=await f.decrypt(l,p,u);return new Uint8Array(h)}};const s={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function o(c){return(d,l,u)=>{(0,n.bytes)(d),(0,n.bytes)(l);const f={name:c,length:8*d.length},p=function(h,b,v){if(h===s.CBC)return{name:s.CBC,iv:b};if(h===s.CTR)return{name:s.CTR,counter:b,length:64};if(h===s.GCM)return v?{name:s.GCM,iv:b,additionalData:v}:{name:s.GCM,iv:b};throw new Error("unknown aes block mode")}(c,l,u);return{encrypt:h=>((0,n.bytes)(h),t.utils.encrypt(d,f,p,h)),decrypt:h=>((0,n.bytes)(h),t.utils.decrypt(d,f,p,h))}}}t.cbc=o(s.CBC),t.ctr=o(s.CTR),t.gcm=o(s.GCM)}($_);var WB={},T0={},No={},Ea={};function Q2(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function GB(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function YB(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function L_(t,...e){if(!YB(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}function JB(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Q2(t.outputLen),Q2(t.blockLen)}function ZB(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function XB(t,e){L_(t);const n=e.outputLen;if(t.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.isBytes=YB,Ea.number=Q2,Ea.bool=GB,Ea.bytes=L_,Ea.hash=JB,Ea.exists=ZB,Ea.output=XB;const Ele={number:Q2,bool:GB,bytes:L_,hash:JB,exists:ZB,output:XB};Ea.default=Ele;var nc={},Wh={};Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.crypto=void 0,Wh.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.byteSwap=t.isLE=t.rotl=t.rotr=t.createView=t.u32=t.u8=void 0,t.isBytes=function(d){return d instanceof Uint8Array||d!=null&&typeof d=="object"&&d.constructor.name==="Uint8Array"},t.byteSwap32=function(d){for(let l=0;l<d.length;l++)d[l]=(0,t.byteSwap)(d[l])},t.bytesToHex=function(d){(0,n.bytes)(d);let l="";for(let u=0;u<d.length;u++)l+=r[d[u]];return l},t.hexToBytes=function(d){if(typeof d!="string")throw new Error("hex string expected, got "+typeof d);const l=d.length,u=l/2;if(l%2)throw new Error("padded hex string expected, got unpadded hex of length "+l);const f=new Uint8Array(u);for(let p=0,h=0;p<u;p++,h+=2){const b=i(d.charCodeAt(h)),v=i(d.charCodeAt(h+1));if(b===void 0||v===void 0){const m=d[h]+d[h+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+h)}f[p]=16*b+v}return f},t.asyncLoop=async function(d,l,u){let f=Date.now();for(let p=0;p<d;p++){u(p);const h=Date.now()-f;h>=0&&h<l||(await(0,t.nextTick)(),f+=h)}},t.utf8ToBytes=s,t.toBytes=o,t.concatBytes=function(...d){let l=0;for(let f=0;f<d.length;f++){const p=d[f];(0,n.bytes)(p),l+=p.length}const u=new Uint8Array(l);for(let f=0,p=0;f<d.length;f++){const h=d[f];u.set(h,p),p+=h.length}return u},t.checkOpts=function(d,l){if(l!==void 0&&c.call(l)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(d,l)},t.wrapConstructor=function(d){const l=f=>d().update(o(f)).digest(),u=d();return l.outputLen=u.outputLen,l.blockLen=u.blockLen,l.create=()=>d(),l},t.wrapConstructorWithOpts=function(d){const l=(f,p)=>d(p).update(o(f)).digest(),u=d({});return l.outputLen=u.outputLen,l.blockLen=u.blockLen,l.create=f=>d(f),l},t.wrapXOFConstructorWithOpts=function(d){const l=(f,p)=>d(p).update(o(f)).digest(),u=d({});return l.outputLen=u.outputLen,l.blockLen=u.blockLen,l.create=f=>d(f),l},t.randomBytes=function(d=32){if(e.crypto&&typeof e.crypto.getRandomValues=="function")return e.crypto.getRandomValues(new Uint8Array(d));if(e.crypto&&typeof e.crypto.randomBytes=="function")return e.crypto.randomBytes(d);throw new Error("crypto.getRandomValues must be defined")};const e=Wh,n=Ea;t.u8=d=>new Uint8Array(d.buffer,d.byteOffset,d.byteLength),t.u32=d=>new Uint32Array(d.buffer,d.byteOffset,Math.floor(d.byteLength/4)),t.createView=d=>new DataView(d.buffer,d.byteOffset,d.byteLength),t.rotr=(d,l)=>d<<32-l|d>>>l,t.rotl=(d,l)=>d<<l|d>>>32-l>>>0,t.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,t.byteSwap=d=>d<<24&4278190080|d<<8&16711680|d>>>8&65280|d>>>24&255,t.byteSwapIfBE=t.isLE?d=>d:d=>(0,t.byteSwap)(d);const r=Array.from({length:256},(d,l)=>l.toString(16).padStart(2,"0")),a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function i(d){return d>=a._0&&d<=a._9?d-a._0:d>=a._A&&d<=a._F?d-(a._A-10):d>=a._a&&d<=a._f?d-(a._a-10):void 0}function s(d){if(typeof d!="string")throw new Error("utf8ToBytes expected string, got "+typeof d);return new Uint8Array(new TextEncoder().encode(d))}function o(d){return typeof d=="string"&&(d=s(d)),(0,n.bytes)(d),d}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}};const c={}.toString}(nc),Object.defineProperty(No,"__esModule",{value:!0}),No.HashMD=No.Maj=No.Chi=void 0;const Eg=Ea,ff=nc;No.Chi=(t,e,n)=>t&e^~t&n;No.Maj=(t,e,n)=>t&e^t&n^e&n;No.HashMD=class extends ff.Hash{constructor(t,e,n,r){super(),this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=(0,ff.createView)(this.buffer)}update(t){(0,Eg.exists)(this);const{view:e,buffer:n,blockLen:r}=this,a=(t=(0,ff.toBytes)(t)).length;for(let i=0;i<a;){const s=Math.min(r-this.pos,a-i);if(s!==r)n.set(t.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const o=(0,ff.createView)(t);for(;r<=a-i;i+=r)this.process(o,i)}}return this.length+=t.length,this.roundClean(),this}digestInto(t){(0,Eg.exists)(this),(0,Eg.output)(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:r,isLE:a}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let l=i;l<r;l++)e[l]=0;(function(l,u,f,p){if(typeof l.setBigUint64=="function")return l.setBigUint64(u,f,p);const h=BigInt(32),b=BigInt(4294967295),v=Number(f>>h&b),m=Number(f&b),T=p?4:0,A=p?0:4;l.setUint32(u+T,v,p),l.setUint32(u+A,m,p)})(n,r-8,BigInt(8*this.length),a),this.process(n,0);const s=(0,ff.createView)(t),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=o/4,d=this.get();if(c>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)s.setUint32(4*l,d[l],a)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:r,finished:a,destroyed:i,pos:s}=this;return t.length=r,t.pos=s,t.finished=a,t.destroyed=i,r%e&&t.buffer.set(n),t}};var ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.add5L=ft.add5H=ft.add4H=ft.add4L=ft.add3H=ft.add3L=ft.rotlBL=ft.rotlBH=ft.rotlSL=ft.rotlSH=ft.rotr32L=ft.rotr32H=ft.rotrBL=ft.rotrBH=ft.rotrSL=ft.rotrSH=ft.shrSL=ft.shrSH=ft.toBig=void 0,ft.fromBig=B_,ft.split=QB,ft.add=pF;const Gh=BigInt(2**32-1),mw=BigInt(32);function B_(t,e=!1){return e?{h:Number(t&Gh),l:Number(t>>mw&Gh)}:{h:0|Number(t>>mw&Gh),l:0|Number(t&Gh)}}function QB(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:i,l:s}=B_(t[a],e);[n[a],r[a]]=[i,s]}return[n,r]}const eF=(t,e)=>BigInt(t>>>0)<<mw|BigInt(e>>>0);ft.toBig=eF;const tF=(t,e,n)=>t>>>n;ft.shrSH=tF;const nF=(t,e,n)=>t<<32-n|e>>>n;ft.shrSL=nF;const rF=(t,e,n)=>t>>>n|e<<32-n;ft.rotrSH=rF;const aF=(t,e,n)=>t<<32-n|e>>>n;ft.rotrSL=aF;const iF=(t,e,n)=>t<<64-n|e>>>n-32;ft.rotrBH=iF;const sF=(t,e,n)=>t>>>n-32|e<<64-n;ft.rotrBL=sF;const oF=(t,e)=>e;ft.rotr32H=oF;const cF=(t,e)=>t;ft.rotr32L=cF;const dF=(t,e,n)=>t<<n|e>>>32-n;ft.rotlSH=dF;const lF=(t,e,n)=>e<<n|t>>>32-n;ft.rotlSL=lF;const uF=(t,e,n)=>e<<n-32|t>>>64-n;ft.rotlBH=uF;const fF=(t,e,n)=>t<<n-32|e>>>64-n;function pF(t,e,n,r){const a=(e>>>0)+(r>>>0);return{h:t+n+(a/2**32|0)|0,l:0|a}}ft.rotlBL=fF;const hF=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0);ft.add3L=hF;const bF=(t,e,n,r)=>e+n+r+(t/2**32|0)|0;ft.add3H=bF;const yF=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0);ft.add4L=yF;const mF=(t,e,n,r,a)=>e+n+r+a+(t/2**32|0)|0;ft.add4H=mF;const gF=(t,e,n,r,a)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(a>>>0);ft.add5L=gF;const wF=(t,e,n,r,a,i)=>e+n+r+a+i+(t/2**32|0)|0;ft.add5H=wF;const _le={fromBig:B_,split:QB,toBig:eF,shrSH:tF,shrSL:nF,rotrSH:rF,rotrSL:aF,rotrBH:iF,rotrBL:sF,rotr32H:oF,rotr32L:cF,rotlSH:dF,rotlSL:lF,rotlBH:uF,rotlBL:fF,add:pF,add3L:hF,add3H:bF,add4L:yF,add4H:mF,add5H:wF,add5L:gF};ft.default=_le,Object.defineProperty(T0,"__esModule",{value:!0}),T0.sha384=T0.sha512_256=T0.sha512_224=T0.sha512=T0.SHA384=T0.SHA512_256=T0.SHA512_224=T0.SHA512=void 0;const Tle=No,gt=ft,Yh=nc,[xle,Sle]=gt.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),hc=new Uint32Array(80),bc=new Uint32Array(80);let Kp=class extends Tle.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:a,Ch:i,Cl:s,Dh:o,Dl:c,Eh:d,El:l,Fh:u,Fl:f,Gh:p,Gl:h,Hh:b,Hl:v}=this;return[e,n,r,a,i,s,o,c,d,l,u,f,p,h,b,v]}set(e,n,r,a,i,s,o,c,d,l,u,f,p,h,b,v){this.Ah=0|e,this.Al=0|n,this.Bh=0|r,this.Bl=0|a,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|c,this.Eh=0|d,this.El=0|l,this.Fh=0|u,this.Fl=0|f,this.Gh=0|p,this.Gl=0|h,this.Hh=0|b,this.Hl=0|v}process(e,n){for(let A=0;A<16;A++,n+=4)hc[A]=e.getUint32(n),bc[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const N=0|hc[A-15],R=0|bc[A-15],B=gt.default.rotrSH(N,R,1)^gt.default.rotrSH(N,R,8)^gt.default.shrSH(N,R,7),F=gt.default.rotrSL(N,R,1)^gt.default.rotrSL(N,R,8)^gt.default.shrSL(N,R,7),I=0|hc[A-2],P=0|bc[A-2],$=gt.default.rotrSH(I,P,19)^gt.default.rotrBH(I,P,61)^gt.default.shrSH(I,P,6),M=gt.default.rotrSL(I,P,19)^gt.default.rotrBL(I,P,61)^gt.default.shrSL(I,P,6),y=gt.default.add4L(F,M,bc[A-7],bc[A-16]),E=gt.default.add4H(y,B,$,hc[A-7],hc[A-16]);hc[A]=0|E,bc[A]=0|y}let{Ah:r,Al:a,Bh:i,Bl:s,Ch:o,Cl:c,Dh:d,Dl:l,Eh:u,El:f,Fh:p,Fl:h,Gh:b,Gl:v,Hh:m,Hl:T}=this;for(let A=0;A<80;A++){const N=gt.default.rotrSH(u,f,14)^gt.default.rotrSH(u,f,18)^gt.default.rotrBH(u,f,41),R=gt.default.rotrSL(u,f,14)^gt.default.rotrSL(u,f,18)^gt.default.rotrBL(u,f,41),B=u&p^~u&b,F=f&h^~f&v,I=gt.default.add5L(T,R,F,Sle[A],bc[A]),P=gt.default.add5H(I,m,N,B,xle[A],hc[A]),$=0|I,M=gt.default.rotrSH(r,a,28)^gt.default.rotrBH(r,a,34)^gt.default.rotrBH(r,a,39),y=gt.default.rotrSL(r,a,28)^gt.default.rotrBL(r,a,34)^gt.default.rotrBL(r,a,39),E=r&i^r&o^i&o,C=a&s^a&c^s&c;m=0|b,T=0|v,b=0|p,v=0|h,p=0|u,h=0|f,{h:u,l:f}=gt.default.add(0|d,0|l,0|P,0|$),d=0|o,l=0|c,o=0|i,c=0|s,i=0|r,s=0|a;const g=gt.default.add3L($,y,C);r=gt.default.add3H(g,P,M,E),a=0|g}({h:r,l:a}=gt.default.add(0|this.Ah,0|this.Al,0|r,0|a)),{h:i,l:s}=gt.default.add(0|this.Bh,0|this.Bl,0|i,0|s),{h:o,l:c}=gt.default.add(0|this.Ch,0|this.Cl,0|o,0|c),{h:d,l}=gt.default.add(0|this.Dh,0|this.Dl,0|d,0|l),{h:u,l:f}=gt.default.add(0|this.Eh,0|this.El,0|u,0|f),{h:p,l:h}=gt.default.add(0|this.Fh,0|this.Fl,0|p,0|h),{h:b,l:v}=gt.default.add(0|this.Gh,0|this.Gl,0|b,0|v),{h:m,l:T}=gt.default.add(0|this.Hh,0|this.Hl,0|m,0|T),this.set(r,a,i,s,o,c,d,l,u,f,p,h,b,v,m,T)}roundClean(){hc.fill(0),bc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};T0.SHA512=Kp;let vF=class extends Kp{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}};T0.SHA512_224=vF;let EF=class extends Kp{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}};T0.SHA512_256=EF;let GC=class extends Kp{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}};T0.SHA384=GC,T0.sha512=(0,Yh.wrapConstructor)(()=>new Kp),T0.sha512_224=(0,Yh.wrapConstructor)(()=>new vF),T0.sha512_256=(0,Yh.wrapConstructor)(()=>new EF),T0.sha384=(0,Yh.wrapConstructor)(()=>new GC);var gw={},Gl={},Xt={},_t={};Object.defineProperty(_t,"__esModule",{value:!0}),_t.notImplemented=_t.bitMask=void 0,_t.isBytes=e8,_t.abytes=t8,_t.abool=function(t,e){if(typeof e!="boolean")throw new Error(`${t} must be valid boolean, got "${e}".`)},_t.bytesToHex=_g,_t.numberToHexUnpadded=YC,_t.hexToNumber=Tg,_t.hexToBytes=e2,_t.bytesToNumberBE=function(t){return Tg(_g(t))},_t.bytesToNumberLE=function(t){return t8(t),Tg(_g(Uint8Array.from(t).reverse()))},_t.numberToBytesBE=ZC,_t.numberToBytesLE=function(t,e){return ZC(t,e).reverse()},_t.numberToVarBytesBE=function(t){return e2(YC(t))},_t.ensureBytes=function(t,e,n){let r;if(typeof e=="string")try{r=e2(e)}catch(i){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${i}`)}else{if(!e8(e))throw new Error(`${t} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const a=r.length;if(typeof n=="number"&&a!==n)throw new Error(`${t} expected ${n} bytes, got ${a}`);return r},_t.concatBytes=XC,_t.equalBytes=function(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0},_t.utf8ToBytes=function(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))},_t.inRange=QC,_t.aInRange=function(t,e,n,r){if(!QC(e,n,r))throw new Error(`expected valid ${t}: ${n} <= n < ${r}, got ${typeof e} ${e}`)},_t.bitLen=function(t){let e;for(e=0;t>ww;t>>=Qb,e+=1);return e},_t.bitGet=function(t,e){return t>>BigInt(e)&Qb},_t.bitSet=function(t,e,n){return t|(n?Qb:ww)<<BigInt(e)},_t.createHmacDrbg=function(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Sg(t),a=Sg(t),i=0;const s=()=>{r.fill(1),a.fill(0),i=0},o=(...l)=>n(a,r,...l),c=(l=Sg())=>{a=o(eI([0]),l),r=o(),l.length!==0&&(a=o(eI([1]),l),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const u=[];for(;l<e;){r=o();const f=r.slice();u.push(f),l+=r.length}return XC(...u)};return(l,u)=>{let f;for(s(),c(l);!(f=u(d()));)c();return s(),f}},_t.validateObject=function(t,e,n={}){const r=(a,i,s)=>{const o=Ile[i];if(typeof o!="function")throw new Error(`Invalid validator "${i}", expected function`);const c=t[a];if(!(s&&c===void 0||o(c,t)))throw new Error(`Invalid param ${String(a)}=${c} (${typeof c}), expected ${i}`)};for(const[a,i]of Object.entries(e))r(a,i,!1);for(const[a,i]of Object.entries(n))r(a,i,!0);return t},_t.memoized=function(t){const e=new WeakMap;return(n,...r)=>{const a=e.get(n);if(a!==void 0)return a;const i=t(n,...r);return e.set(n,i),i}};const ww=BigInt(0),Qb=BigInt(1),Ale=BigInt(2);function e8(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function t8(t){if(!e8(t))throw new Error("Uint8Array expected")}const Cle=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function _g(t){t8(t);let e="";for(let n=0;n<t.length;n++)e+=Cle[t[n]];return e}function YC(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function Tg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}const io={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function JC(t){return t>=io._0&&t<=io._9?t-io._0:t>=io._A&&t<=io._F?t-(io._A-10):t>=io._a&&t<=io._f?t-(io._a-10):void 0}function e2(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let a=0,i=0;a<n;a++,i+=2){const s=JC(t.charCodeAt(i)),o=JC(t.charCodeAt(i+1));if(s===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[a]=16*s+o}return r}function ZC(t,e){return e2(t.toString(16).padStart(2*e,"0"))}function XC(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];t8(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}const xg=t=>typeof t=="bigint"&&ww<=t;function QC(t,e,n){return xg(t)&&xg(e)&&xg(n)&&e<=t&&t<n}_t.bitMask=t=>(Ale<<BigInt(t-1))-Qb;const Sg=t=>new Uint8Array(t),eI=t=>Uint8Array.from(t),Ile={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||e8(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};_t.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.isNegativeLE=void 0,Xt.mod=wa,Xt.pow=_F,Xt.pow2=function(t,e,n){let r=t;for(;e-- >A0;)r*=r,r%=n;return r},Xt.invert=Jh,Xt.tonelliShanks=TF,Xt.FpSqrt=rI,Xt.validateField=function(t){const e=Mle.reduce((n,r)=>(n[r]="function",n),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,ha.validateObject)(t,e)},Xt.FpPow=aI,Xt.FpInvertBatch=iI,Xt.FpDiv=function(t,e,n){return t.mul(e,typeof n=="bigint"?Jh(n,t.ORDER):t.inv(n))},Xt.FpLegendre=sI,Xt.FpIsSquare=function(t){const e=sI(t.ORDER);return n=>{const r=e(t,n);return t.eql(r,t.ZERO)||t.eql(r,t.ONE)}},Xt.nLength=Ag,Xt.Field=function(t,e,n=!1,r={}){if(t<=A0)throw new Error(`Expected Field ORDER > 0, got ${t}`);const{nBitLength:a,nByteLength:i}=Ag(t,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=rI(t),o=Object.freeze({ORDER:t,BITS:a,BYTES:i,MASK:(0,ha.bitMask)(a),ZERO:A0,ONE:yn,create:c=>wa(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("Invalid field element: expected bigint, got "+typeof c);return A0<=c&&c<t},is0:c=>c===A0,isOdd:c=>(c&yn)===yn,neg:c=>wa(-c,t),eql:(c,d)=>c===d,sqr:c=>wa(c*c,t),add:(c,d)=>wa(c+d,t),sub:(c,d)=>wa(c-d,t),mul:(c,d)=>wa(c*d,t),pow:(c,d)=>aI(o,c,d),div:(c,d)=>wa(c*Jh(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>Jh(c,t),sqrt:r.sqrt||(c=>s(o,c)),invertBatch:c=>iI(o,c),cmov:(c,d,l)=>l?d:c,toBytes:c=>n?(0,ha.numberToBytesLE)(c,i):(0,ha.numberToBytesBE)(c,i),fromBytes:c=>{if(c.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${c.length}`);return n?(0,ha.bytesToNumberLE)(c):(0,ha.bytesToNumberBE)(c)}});return Object.freeze(o)},Xt.FpSqrtOdd=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?n:t.neg(n)},Xt.FpSqrtEven=function(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");const n=t.sqrt(e);return t.isOdd(n)?t.neg(n):n},Xt.hashToPrivateScalar=function(t,e,n=!1){t=(0,ha.ensureBytes)("privateHash",t);const r=t.length,a=Ag(e).nByteLength+8;if(a<24||r<a||r>1024)throw new Error(`hashToPrivateScalar: expected ${a}-1024 bytes of input, got ${r}`);const i=n?(0,ha.bytesToNumberLE)(t):(0,ha.bytesToNumberBE)(t);return wa(i,e-yn)+yn},Xt.getFieldBytesLength=Ew,Xt.getMinHashLength=oI,Xt.mapHashToField=function(t,e,n=!1){const r=t.length,a=Ew(e),i=oI(e);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=wa(n?(0,ha.bytesToNumberBE)(t):(0,ha.bytesToNumberLE)(t),e-yn)+yn;return n?(0,ha.numberToBytesLE)(s,a):(0,ha.numberToBytesBE)(s,a)};const ha=_t,A0=BigInt(0),yn=BigInt(1),qc=BigInt(2),Ole=BigInt(3),vw=BigInt(4),tI=BigInt(5),nI=BigInt(8);function wa(t,e){const n=t%e;return n>=A0?n:e+n}function _F(t,e,n){if(n<=A0||e<A0)throw new Error("Expected power/modulo > 0");if(n===yn)return A0;let r=yn;for(;e>A0;)e&yn&&(r=r*t%n),t=t*t%n,e>>=yn;return r}function Jh(t,e){if(t===A0||e<=A0)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=wa(t,e),r=e,a=A0,i=yn;for(;n!==A0;){const s=r%n,o=a-i*(r/n);r=n,n=s,a=i,i=o}if(r!==yn)throw new Error("invert: does not exist");return wa(a,e)}function TF(t){const e=(t-yn)/qc;let n,r,a;for(n=t-yn,r=0;n%qc===A0;n/=qc,r++);for(a=qc;a<t&&_F(a,e,t)!==t-yn;a++);if(r===1){const s=(t+yn)/vw;return function(o,c){const d=o.pow(c,s);if(!o.eql(o.sqr(d),c))throw new Error("Cannot find square root");return d}}const i=(n+yn)/qc;return function(s,o){if(s.pow(o,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,d=s.pow(s.mul(s.ONE,a),n),l=s.pow(o,i),u=s.pow(o,n);for(;!s.eql(u,s.ONE);){if(s.eql(u,s.ZERO))return s.ZERO;let f=1;for(let h=s.sqr(u);f<c&&!s.eql(h,s.ONE);f++)h=s.sqr(h);const p=s.pow(d,yn<<BigInt(c-f-1));d=s.sqr(p),l=s.mul(l,p),u=s.mul(u,d),c=f}return l}}function rI(t){if(t%vw===Ole){const e=(t+yn)/vw;return function(n,r){const a=n.pow(r,e);if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}if(t%nI===tI){const e=(t-tI)/nI;return function(n,r){const a=n.mul(r,qc),i=n.pow(a,e),s=n.mul(r,i),o=n.mul(n.mul(s,qc),i),c=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return TF(t)}BigInt(9),BigInt(16);Xt.isNegativeLE=(t,e)=>(wa(t,e)&yn)===yn;const Mle=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function aI(t,e,n){if(n<A0)throw new Error("Expected power > 0");if(n===A0)return t.ONE;if(n===yn)return e;let r=t.ONE,a=e;for(;n>A0;)n&yn&&(r=t.mul(r,a)),a=t.sqr(a),n>>=yn;return r}function iI(t,e){const n=new Array(e.length),r=e.reduce((i,s,o)=>t.is0(s)?i:(n[o]=i,t.mul(i,s)),t.ONE),a=t.inv(r);return e.reduceRight((i,s,o)=>t.is0(s)?i:(n[o]=t.mul(i,n[o]),t.mul(i,s)),a),n}function sI(t){const e=(t-yn)/qc;return(n,r)=>n.pow(r,e)}function Ag(t,e){const n=e!==void 0?e:t.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Ew(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function oI(t){const e=Ew(t);return e+Math.ceil(e/2)}Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.wNAF=function(t,e){const n=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error(`Wrong window size=${i}, should be [1..${e}]`)},a=i=>(r(i),{windows:Math.ceil(e/i)+1,windowSize:2**(i-1)});return{constTimeNegate:n,unsafeLadder(i,s){let o=t.ZERO,c=i;for(;s>Ple;)s&Cg&&(o=o.add(c)),c=c.double(),s>>=Cg;return o},precomputeWindow(i,s){const{windows:o,windowSize:c}=a(s),d=[];let l=i,u=l;for(let f=0;f<o;f++){u=l,d.push(u);for(let p=1;p<c;p++)u=u.add(l),d.push(u);l=u.double()}return d},wNAF(i,s,o){const{windows:c,windowSize:d}=a(i);let l=t.ZERO,u=t.BASE;const f=BigInt(2**i-1),p=2**i,h=BigInt(i);for(let b=0;b<c;b++){const v=b*d;let m=Number(o&f);o>>=h,m>d&&(m-=p,o+=Cg);const T=v,A=v+Math.abs(m)-1,N=b%2!=0,R=m<0;m===0?u=u.add(n(N,s[T])):l=l.add(n(R,s[A]))}return{p:l,f:u}},wNAFCached(i,s,o){const c=lI.get(i)||1;let d=Ig.get(i);return d||(d=this.precomputeWindow(i,c),c!==1&&Ig.set(i,o(d))),this.wNAF(c,d,s)},setWindowSize(i,s){r(s),lI.set(i,s),Ig.delete(i)}}},Gl.pippenger=function(t,e,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((l,u)=>{if(!e.isValid(l))throw new Error(`wrong scalar at index ${u}`)}),n.forEach((l,u)=>{if(!(l instanceof t))throw new Error(`wrong point at index ${u}`)});const a=(0,dI.bitLen)(BigInt(n.length)),i=a>12?a-3:a>4?a-2:a?2:1,s=(1<<i)-1,o=new Array(s+1).fill(t.ZERO),c=Math.floor((e.BITS-1)/i)*i;let d=t.ZERO;for(let l=c;l>=0;l-=i){o.fill(t.ZERO);for(let f=0;f<r.length;f++){const p=r[f],h=Number(p>>BigInt(l)&BigInt(s));o[h]=o[h].add(n[f])}let u=t.ZERO;for(let f=o.length-1,p=t.ZERO;f>0;f--)p=p.add(o[f]),u=u.add(p);if(d=d.add(u),l!==0)for(let f=0;f<i;f++)d=d.double()}return d},Gl.validateBasic=function(t){return(0,cI.validateField)(t.Fp),(0,dI.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,cI.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})};const cI=Xt,dI=_t,Ple=BigInt(0),Cg=BigInt(1),Ig=new WeakMap,lI=new WeakMap;Object.defineProperty(gw,"__esModule",{value:!0}),gw.twistedEdwards=function(t){const e=function(E){const C=(0,Og.validateBasic)(E);return Ur.validateObject(E,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...C})}(t),{Fp:n,n:r,prehash:a,hash:i,randomBytes:s,nByteLength:o,h:c}=e,d=Zh<<BigInt(8*o)-jr,l=n.create,u=(0,uI.Field)(e.n,e.nBitLength),f=e.uvRatio||((E,C)=>{try{return{isValid:!0,value:n.sqrt(E*n.inv(C))}}catch{return{isValid:!1,value:Ti}}}),p=e.adjustScalarBytes||(E=>E),h=e.domain||((E,C,g)=>{if((0,ba.abool)("phflag",g),C.length||g)throw new Error("Contexts/pre-hash are not supported");return E});function b(E,C){Ur.aInRange("coordinate "+E,C,Ti,d)}function v(E){if(!(E instanceof A))throw new Error("ExtendedPoint expected")}const m=(0,ba.memoized)((E,C)=>{const{ex:g,ey:x,ez:O}=E,S=E.is0();C==null&&(C=S?kle:n.inv(O));const w=l(g*C),_=l(x*C),k=l(O*C);if(S)return{x:Ti,y:jr};if(k!==jr)throw new Error("invZ was invalid");return{x:w,y:_}}),T=(0,ba.memoized)(E=>{const{a:C,d:g}=e;if(E.is0())throw new Error("bad point: ZERO");const{ex:x,ey:O,ez:S,et:w}=E,_=l(x*x),k=l(O*O),L=l(S*S),D=l(L*L),U=l(_*C);if(l(L*l(U+k))!==l(D+l(g*l(_*k))))throw new Error("bad point: equation left != right (1)");if(l(x*O)!==l(S*w))throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(C,g,x,O){this.ex=C,this.ey=g,this.ez=x,this.et=O,b("x",C),b("y",g),b("z",x),b("t",O),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(C){if(C instanceof A)throw new Error("extended point not allowed");const{x:g,y:x}=C||{};return b("x",g),b("y",x),new A(g,x,jr,l(g*x))}static normalizeZ(C){const g=n.invertBatch(C.map(x=>x.ez));return C.map((x,O)=>x.toAffine(g[O])).map(A.fromAffine)}static msm(C,g){return(0,Og.pippenger)(A,u,C,g)}_setWindowSize(C){B.setWindowSize(this,C)}assertValidity(){T(this)}equals(C){v(C);const{ex:g,ey:x,ez:O}=this,{ex:S,ey:w,ez:_}=C,k=l(g*_),L=l(S*O),D=l(x*_),U=l(w*O);return k===L&&D===U}is0(){return this.equals(A.ZERO)}negate(){return new A(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:C}=e,{ex:g,ey:x,ez:O}=this,S=l(g*g),w=l(x*x),_=l(Zh*l(O*O)),k=l(C*S),L=g+x,D=l(l(L*L)-S-w),U=k+w,j=U-_,H=k-w,W=l(D*j),K=l(U*H),q=l(D*H),V=l(j*U);return new A(W,K,V,q)}add(C){v(C);const{a:g,d:x}=e,{ex:O,ey:S,ez:w,et:_}=this,{ex:k,ey:L,ez:D,et:U}=C;if(g===BigInt(-1)){const ie=l((S-O)*(L+k)),oe=l((S+O)*(L-k)),ue=l(oe-ie);if(ue===Ti)return this.double();const Oe=l(w*Zh*U),Re=l(_*Zh*D),pe=Re+Oe,Ze=oe+ie,je=Re-Oe,it=l(pe*ue),De=l(Ze*je),Ke=l(pe*je),Xe=l(ue*Ze);return new A(it,De,Xe,Ke)}const j=l(O*k),H=l(S*L),W=l(_*x*U),K=l(w*D),q=l((O+S)*(k+L)-j-H),V=K-W,G=K+W,J=l(H-g*j),z=l(q*V),Y=l(G*J),X=l(q*J),ae=l(V*G);return new A(z,Y,ae,X)}subtract(C){return this.add(C.negate())}wNAF(C){return B.wNAFCached(this,C,A.normalizeZ)}multiply(C){const g=C;Ur.aInRange("scalar",g,jr,r);const{p:x,f:O}=this.wNAF(g);return A.normalizeZ([x,O])[0]}multiplyUnsafe(C){const g=C;return Ur.aInRange("scalar",g,Ti,r),g===Ti?R:this.equals(R)||g===jr?this:this.equals(N)?this.wNAF(g).p:B.unsafeLadder(this,g)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return B.unsafeLadder(this,r).is0()}toAffine(C){return m(this,C)}clearCofactor(){const{h:C}=e;return C===jr?this:this.multiplyUnsafe(C)}static fromHex(C,g=!1){const{d:x,a:O}=e,S=n.BYTES;C=(0,ba.ensureBytes)("pointHex",C,S),(0,ba.abool)("zip215",g);const w=C.slice(),_=C[S-1];w[S-1]=-129&_;const k=Ur.bytesToNumberLE(w),L=g?d:n.ORDER;Ur.aInRange("pointHex.y",k,Ti,L);const D=l(k*k),U=l(D-jr),j=l(x*D-O);let{isValid:H,value:W}=f(U,j);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const K=(W&jr)===jr,q=(128&_)!=0;if(!g&&W===Ti&&q)throw new Error("Point.fromHex: x=0 and x_0=1");return q!==K&&(W=l(-W)),A.fromAffine({x:W,y:k})}static fromPrivateKey(C){return P(C).point}toRawBytes(){const{x:C,y:g}=this.toAffine(),x=Ur.numberToBytesLE(g,n.BYTES);return x[x.length-1]|=C&jr?128:0,x}toHex(){return Ur.bytesToHex(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,jr,l(e.Gx*e.Gy)),A.ZERO=new A(Ti,jr,jr,Ti);const{BASE:N,ZERO:R}=A,B=(0,Og.wNAF)(A,8*o);function F(E){return(0,uI.mod)(E,r)}function I(E){return F(Ur.bytesToNumberLE(E))}function P(E){const C=o;E=(0,ba.ensureBytes)("private key",E,C);const g=(0,ba.ensureBytes)("hashed private key",i(E),2*C),x=p(g.slice(0,C)),O=g.slice(C,2*C),S=I(x),w=N.multiply(S),_=w.toRawBytes();return{head:x,prefix:O,scalar:S,point:w,pointBytes:_}}function $(E=new Uint8Array,...C){const g=Ur.concatBytes(...C);return I(i(h(g,(0,ba.ensureBytes)("context",E),!!a)))}const M=Nle;return N._setWindowSize(8),{CURVE:e,getPublicKey:function(E){return P(E).pointBytes},sign:function(E,C,g={}){E=(0,ba.ensureBytes)("message",E),a&&(E=a(E));const{prefix:x,scalar:O,pointBytes:S}=P(C),w=$(g.context,x,E),_=N.multiply(w).toRawBytes(),k=F(w+$(g.context,_,S,E)*O);Ur.aInRange("signature.s",k,Ti,r);const L=Ur.concatBytes(_,Ur.numberToBytesLE(k,n.BYTES));return(0,ba.ensureBytes)("result",L,2*o)},verify:function(E,C,g,x=M){const{context:O,zip215:S}=x,w=n.BYTES;E=(0,ba.ensureBytes)("signature",E,2*w),C=(0,ba.ensureBytes)("message",C),S!==void 0&&(0,ba.abool)("zip215",S),a&&(C=a(C));const _=Ur.bytesToNumberLE(E.slice(w,2*w));let k,L,D;try{k=A.fromHex(g,S),L=A.fromHex(E.slice(0,w),S),D=N.multiplyUnsafe(_)}catch{return!1}if(!S&&k.isSmallOrder())return!1;const U=$(O,L.toRawBytes(),k.toRawBytes(),C);return L.add(k.multiplyUnsafe(U)).subtract(D).clearCofactor().equals(A.ZERO)},ExtendedPoint:A,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>s(n.BYTES),precompute:(E=8,C=A.BASE)=>(C._setWindowSize(E),C.multiply(BigInt(3)),C)}}};const Og=Gl,uI=Xt,Ur=_t,ba=_t,Ti=BigInt(0),jr=BigInt(1),Zh=BigInt(2),kle=BigInt(8),Nle={zip215:!0};var Rc={};Object.defineProperty(Rc,"__esModule",{value:!0}),Rc.expand_message_xmd=xF,Rc.expand_message_xof=SF,Rc.hash_to_field=Mg,Rc.isogenyMap=function(t,e){const n=e.map(r=>Array.from(r).reverse());return(r,a)=>{const[i,s,o,c]=n.map(d=>d.reduce((l,u)=>t.add(t.mul(l,r),u)));return r=t.div(i,s),a=t.mul(a,t.div(o,c)),{x:r,y:a}}},Rc.createHasher=function(t,e,n){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(r,a){const i=Mg(r,2,{...n,DST:n.DST,...a}),s=t.fromAffine(e(i[0])),o=t.fromAffine(e(i[1])),c=s.add(o).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,a){const i=Mg(r,1,{...n,DST:n.encodeDST,...a}),s=t.fromAffine(e(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw new Error("mapToCurve: expected array of bigints");for(const i of r)if(typeof i!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${i} in array`);const a=t.fromAffine(e(r)).clearCofactor();return a.assertValidity(),a}}};const Rle=Xt,sr=_t,Dle=sr.bytesToNumberBE;function Dc(t,e){if(A5(t),A5(e),t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);const n=Array.from({length:e}).fill(0);for(let r=e-1;r>=0;r--)n[r]=255&t,t>>>=8;return new Uint8Array(n)}function $le(t,e){const n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[r]^e[r];return n}function A5(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function xF(t,e,n,r){(0,sr.abytes)(t),(0,sr.abytes)(e),A5(n),e.length>255&&(e=r((0,sr.concatBytes)((0,sr.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));const{outputLen:a,blockLen:i}=r,s=Math.ceil(n/a);if(n>65535||s>255)throw new Error("expand_message_xmd: invalid lenInBytes");const o=(0,sr.concatBytes)(e,Dc(e.length,1)),c=Dc(0,i),d=Dc(n,2),l=new Array(s),u=r((0,sr.concatBytes)(c,t,d,Dc(0,1),o));l[0]=r((0,sr.concatBytes)(u,Dc(1,1),o));for(let f=1;f<=s;f++){const p=[$le(u,l[f-1]),Dc(f+1,1),o];l[f]=r((0,sr.concatBytes)(...p))}return(0,sr.concatBytes)(...l).slice(0,n)}function SF(t,e,n,r,a){if((0,sr.abytes)(t),(0,sr.abytes)(e),A5(n),e.length>255){const i=Math.ceil(2*r/8);e=a.create({dkLen:i}).update((0,sr.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(n>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return a.create({dkLen:n}).update(t).update(Dc(n,2)).update(e).update(Dc(e.length,1)).digest()}function Mg(t,e,n){(0,sr.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:r,k:a,m:i,hash:s,expand:o,DST:c}=n;(0,sr.abytes)(t),A5(e);const d=typeof c=="string"?(0,sr.utf8ToBytes)(c):c,l=r.toString(2).length,u=Math.ceil((l+a)/8),f=e*i*u;let p;if(o==="xmd")p=xF(t,d,f,s);else if(o==="xof")p=SF(t,d,f,a,s);else{if(o!=="_internal_pass")throw new Error('expand must be "xmd" or "xof"');p=t}const h=new Array(e);for(let b=0;b<e;b++){const v=new Array(i);for(let m=0;m<i;m++){const T=u*(m+b*i),A=p.subarray(T,T+u);v[m]=(0,Rle.mod)(Dle(A),r)}h[b]=v}return h}var _w={};Object.defineProperty(_w,"__esModule",{value:!0}),_w.montgomery=function(t){const e=function(b){return(0,yc.validateObject)(b,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...b})}(t),{P:n}=e,r=b=>(0,fI.mod)(b,n),a=e.montgomeryBits,i=Math.ceil(a/8),s=e.nByteLength,o=e.adjustScalarBytes||(b=>b),c=e.powPminus2||(b=>(0,fI.pow)(b,n-BigInt(2),n));function d(b,v,m){const T=r(b*(v-m));return[v=r(v-T),m=r(m+T)]}const l=(e.a-BigInt(2))/BigInt(4);function u(b){return(0,yc.numberToBytesLE)(r(b),i)}function f(b,v){const m=function(N){const R=(0,yc.ensureBytes)("u coordinate",N,i);return s===32&&(R[31]&=127),(0,yc.bytesToNumberLE)(R)}(v),T=function(N){const R=(0,yc.ensureBytes)("scalar",N),B=R.length;if(B!==i&&B!==s)throw new Error(`Expected ${i} or ${s} bytes, got ${B}`);return(0,yc.bytesToNumberLE)(o(R))}(b),A=function(N,R){(0,yc.aInRange)("u",N,_l,n),(0,yc.aInRange)("scalar",R,_l,n);const B=R,F=N;let I,P=Pg,$=_l,M=N,y=Pg,E=_l;for(let g=BigInt(a-1);g>=_l;g--){const x=B>>g&Pg;E^=x,I=d(E,P,M),P=I[0],M=I[1],I=d(E,$,y),$=I[0],y=I[1],E=x;const O=P+$,S=r(O*O),w=P-$,_=r(w*w),k=S-_,L=M+y,D=r((M-y)*O),U=r(L*w),j=D+U,H=D-U;M=r(j*j),y=r(F*r(H*H)),P=r(S*_),$=r(k*(S+r(l*k)))}I=d(E,P,M),P=I[0],M=I[1],I=d(E,$,y),$=I[0],y=I[1];const C=c($);return r(P*C)}(m,T);if(A===_l)throw new Error("Invalid private or public key received");return u(A)}const p=u(e.Gu);function h(b){return f(b,p)}return{scalarMult:f,scalarMultBase:h,getSharedSecret:(b,v)=>f(b,v),getPublicKey:b=>h(b),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:p}};const fI=Xt,yc=_t,_l=BigInt(0),Pg=BigInt(1);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hash_to_ristretto255=t.hashToRistretto255=t.RistrettoPoint=t.encodeToCurve=t.hashToCurve=t.edwardsToMontgomery=t.x25519=t.ed25519ph=t.ed25519ctx=t.ed25519=t.ED25519_TORSION_SUBGROUP=void 0,t.edwardsToMontgomeryPub=B,t.edwardsToMontgomeryPriv=function(U){const j=N.hash(U.subarray(0,32));return N.adjustScalarBytes(j).subarray(0,32)};const e=T0,n=nc,r=gw,a=Rc,i=Xt,s=_w,o=_t,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),d=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),l=BigInt(0),u=BigInt(1),f=BigInt(2),p=BigInt(3),h=BigInt(5),b=BigInt(8);function v(U){const j=BigInt(10),H=BigInt(20),W=BigInt(40),K=BigInt(80),q=c,V=U*U%q*U%q,G=(0,i.pow2)(V,f,q)*V%q,J=(0,i.pow2)(G,u,q)*U%q,z=(0,i.pow2)(J,h,q)*J%q,Y=(0,i.pow2)(z,j,q)*z%q,X=(0,i.pow2)(Y,H,q)*Y%q,ae=(0,i.pow2)(X,W,q)*X%q,ie=(0,i.pow2)(ae,K,q)*ae%q,oe=(0,i.pow2)(ie,K,q)*ae%q,ue=(0,i.pow2)(oe,j,q)*z%q;return{pow_p_5_8:(0,i.pow2)(ue,f,q)*U%q,b2:V}}function m(U){return U[0]&=248,U[31]&=127,U[31]|=64,U}function T(U,j){const H=c,W=(0,i.mod)(j*j*j,H),K=v(U*(0,i.mod)(W*W*j,H)).pow_p_5_8;let q=(0,i.mod)(U*W*K,H);const V=(0,i.mod)(j*q*q,H),G=q,J=(0,i.mod)(q*d,H),z=V===U,Y=V===(0,i.mod)(-U,H),X=V===(0,i.mod)(-U*d,H);return z&&(q=G),(Y||X)&&(q=J),(0,i.isNegativeLE)(q,H)&&(q=(0,i.mod)(-q,H)),{isValid:z||Y,value:q}}t.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const A=(0,i.Field)(c,void 0,!0),N={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:A,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:b,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:e.sha512,randomBytes:n.randomBytes,adjustScalarBytes:m,uvRatio:T};function R(U,j,H){if(j.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([H?1:0,j.length]),j,U)}function B(U){const{y:j}=t.ed25519.ExtendedPoint.fromHex(U),H=BigInt(1);return A.toBytes(A.create((H+j)*A.inv(H-j)))}t.ed25519=(0,r.twistedEdwards)(N),t.ed25519ctx=(0,r.twistedEdwards)({...N,domain:R}),t.ed25519ph=(0,r.twistedEdwards)(Object.assign({},N,{domain:R,prehash:e.sha512})),t.x25519=(0,s.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:U=>{const j=c,{pow_p_5_8:H,b2:W}=v(U);return(0,i.mod)((0,i.pow2)(H,p,j)*W,j)},adjustScalarBytes:m,randomBytes:n.randomBytes}),t.edwardsToMontgomery=B;const F=(A.ORDER+p)/b,I=A.pow(f,F),P=A.sqrt(A.neg(A.ONE)),$=(0,i.FpSqrtEven)(A,A.neg(BigInt(486664)));function M(U){const{xMn:j,xMd:H,yMn:W,yMd:K}=function(ae){const ie=(A.ORDER-h)/b,oe=BigInt(486662);let ue=A.sqr(ae);ue=A.mul(ue,f);let Oe=A.add(ue,A.ONE),Re=A.neg(oe),pe=A.sqr(Oe),Ze=A.mul(pe,Oe),je=A.mul(ue,oe);je=A.mul(je,Re),je=A.add(je,pe),je=A.mul(je,Re);let it=A.sqr(Ze);pe=A.sqr(it),it=A.mul(it,Ze),it=A.mul(it,je),pe=A.mul(pe,it);let De=A.pow(pe,ie);De=A.mul(De,it);let Ke=A.mul(De,P);pe=A.sqr(De),pe=A.mul(pe,Ze);let Xe=A.eql(pe,je),mt=A.cmov(Ke,De,Xe),He=A.mul(Re,ue),ct=A.mul(De,ae);ct=A.mul(ct,I);let Vt=A.mul(ct,P),It=A.mul(je,ue);pe=A.sqr(ct),pe=A.mul(pe,Ze);let Tt=A.eql(pe,It),L0=A.cmov(Vt,ct,Tt);pe=A.sqr(mt),pe=A.mul(pe,Ze);let ht=A.eql(pe,je),kt=A.cmov(He,Re,ht),B0=A.cmov(L0,mt,ht),At=A.isOdd(B0);return B0=A.cmov(B0,A.neg(B0),ht!==At),{xMn:kt,xMd:Oe,yMn:B0,yMd:u}}(U);let q=A.mul(j,K);q=A.mul(q,$);let V=A.mul(H,W),G=A.sub(j,H),J=A.add(j,H),z=A.mul(V,J),Y=A.eql(z,A.ZERO);q=A.cmov(q,A.ZERO,Y),V=A.cmov(V,A.ONE,Y),G=A.cmov(G,A.ONE,Y),J=A.cmov(J,A.ONE,Y);const X=A.invertBatch([V,J]);return{x:A.mul(q,X[0]),y:A.mul(G,X[1])}}const y=(0,a.createHasher)(t.ed25519.ExtendedPoint,U=>M(U[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:A.ORDER,m:1,k:128,expand:"xmd",hash:e.sha512});function E(U){if(!(U instanceof D))throw new Error("RistrettoPoint expected")}t.hashToCurve=y.hashToCurve,t.encodeToCurve=y.encodeToCurve;const C=d,g=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),x=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),O=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),S=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),w=U=>T(u,U),_=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),k=U=>t.ed25519.CURVE.Fp.create((0,o.bytesToNumberLE)(U)&_);function L(U){const{d:j}=t.ed25519.CURVE,H=t.ed25519.CURVE.Fp.ORDER,W=t.ed25519.CURVE.Fp.create,K=W(C*U*U),q=W((K+u)*O);let V=BigInt(-1);const G=W((V-j*K)*W(K+j));let{isValid:J,value:z}=T(q,G),Y=W(z*U);(0,i.isNegativeLE)(Y,H)||(Y=W(-Y)),J||(z=Y),J||(V=K);const X=W(V*(K-u)*S-G),ae=z*z,ie=W((z+z)*G),oe=W(X*g),ue=W(u-ae),Oe=W(u+ae);return new t.ed25519.ExtendedPoint(W(ie*Oe),W(ue*oe),W(oe*Oe),W(ie*ue))}class D{constructor(j){this.ep=j}static fromAffine(j){return new D(t.ed25519.ExtendedPoint.fromAffine(j))}static hashToCurve(j){j=(0,o.ensureBytes)("ristrettoHash",j,64);const H=L(k(j.slice(0,32))),W=L(k(j.slice(32,64)));return new D(H.add(W))}static fromHex(j){j=(0,o.ensureBytes)("ristrettoHex",j,32);const{a:H,d:W}=t.ed25519.CURVE,K=t.ed25519.CURVE.Fp.ORDER,q=t.ed25519.CURVE.Fp.create,V="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",G=k(j);if(!(0,o.equalBytes)((0,o.numberToBytesLE)(G,32),j)||(0,i.isNegativeLE)(G,K))throw new Error(V);const J=q(G*G),z=q(u+H*J),Y=q(u-H*J),X=q(z*z),ae=q(Y*Y),ie=q(H*W*X-ae),{isValid:oe,value:ue}=w(q(ie*ae)),Oe=q(ue*Y),Re=q(ue*Oe*ie);let pe=q((G+G)*Oe);(0,i.isNegativeLE)(pe,K)&&(pe=q(-pe));const Ze=q(z*Re),je=q(pe*Ze);if(!oe||(0,i.isNegativeLE)(je,K)||Ze===l)throw new Error(V);return new D(new t.ed25519.ExtendedPoint(pe,Ze,u,je))}toRawBytes(){let{ex:j,ey:H,ez:W,et:K}=this.ep;const q=t.ed25519.CURVE.Fp.ORDER,V=t.ed25519.CURVE.Fp.create,G=V(V(W+H)*V(W-H)),J=V(j*H),z=V(J*J),{value:Y}=w(V(G*z)),X=V(Y*G),ae=V(Y*J),ie=V(X*ae*K);let oe;if((0,i.isNegativeLE)(K*ie,q)){let Oe=V(H*C),Re=V(j*C);j=Oe,H=Re,oe=V(X*x)}else oe=ae;(0,i.isNegativeLE)(j*ie,q)&&(H=V(-H));let ue=V((W-H)*oe);return(0,i.isNegativeLE)(ue,q)&&(ue=V(-ue)),(0,o.numberToBytesLE)(ue,32)}toHex(){return(0,o.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(j){E(j);const{ex:H,ey:W}=this.ep,{ex:K,ey:q}=j.ep,V=t.ed25519.CURVE.Fp.create,G=V(H*q)===V(W*K),J=V(W*q)===V(H*K);return G||J}add(j){return E(j),new D(this.ep.add(j.ep))}subtract(j){return E(j),new D(this.ep.subtract(j.ep))}multiply(j){return new D(this.ep.multiply(j))}multiplyUnsafe(j){return new D(this.ep.multiplyUnsafe(j))}double(){return new D(this.ep.double())}negate(){return new D(this.ep.negate())}}t.RistrettoPoint=(D.BASE||(D.BASE=new D(t.ed25519.ExtendedPoint.BASE)),D.ZERO||(D.ZERO=new D(t.ed25519.ExtendedPoint.ZERO)),D),t.hashToRistretto255=(U,j)=>{const H=j.DST,W=typeof H=="string"?(0,n.utf8ToBytes)(H):H,K=(0,a.expand_message_xmd)(U,W,64,e.sha512);return D.hashToCurve(K)},t.hash_to_ristretto255=t.hashToRistretto255})(WB);var AF={},Ro={};Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.sha224=Ro.sha256=Ro.SHA256=void 0;const kg=No,Za=nc,Lle=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),mc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gc=new Uint32Array(64);let F_=class extends kg.HashMD{constructor(){super(64,32,8,!1),this.A=0|mc[0],this.B=0|mc[1],this.C=0|mc[2],this.D=0|mc[3],this.E=0|mc[4],this.F=0|mc[5],this.G=0|mc[6],this.H=0|mc[7]}get(){const{A:e,B:n,C:r,D:a,E:i,F:s,G:o,H:c}=this;return[e,n,r,a,i,s,o,c]}set(e,n,r,a,i,s,o,c){this.A=0|e,this.B=0|n,this.C=0|r,this.D=0|a,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|c}process(e,n){for(let u=0;u<16;u++,n+=4)gc[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const f=gc[u-15],p=gc[u-2],h=(0,Za.rotr)(f,7)^(0,Za.rotr)(f,18)^f>>>3,b=(0,Za.rotr)(p,17)^(0,Za.rotr)(p,19)^p>>>10;gc[u]=b+gc[u-7]+h+gc[u-16]|0}let{A:r,B:a,C:i,D:s,E:o,F:c,G:d,H:l}=this;for(let u=0;u<64;u++){const f=l+((0,Za.rotr)(o,6)^(0,Za.rotr)(o,11)^(0,Za.rotr)(o,25))+(0,kg.Chi)(o,c,d)+Lle[u]+gc[u]|0,p=((0,Za.rotr)(r,2)^(0,Za.rotr)(r,13)^(0,Za.rotr)(r,22))+(0,kg.Maj)(r,a,i)|0;l=d,d=c,c=o,o=s+f|0,s=i,i=a,a=r,r=f+p|0}r=r+this.A|0,a=a+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(r,a,i,s,o,c,d,l)}roundClean(){gc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};Ro.SHA256=F_;let Ble=class extends F_{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};Ro.sha256=(0,Za.wrapConstructor)(()=>new F_),Ro.sha224=(0,Za.wrapConstructor)(()=>new Ble);var t2={},U_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const e=Ea,n=nc;class r extends n.Hash{constructor(i,s){super(),this.finished=!1,this.destroyed=!1,(0,e.hash)(i);const o=(0,n.toBytes)(s);if(this.iHash=i.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const c=this.blockLen,d=new Uint8Array(c);d.set(o.length>c?i.create().update(o).digest():o);for(let l=0;l<d.length;l++)d[l]^=54;this.iHash.update(d),this.oHash=i.create();for(let l=0;l<d.length;l++)d[l]^=106;this.oHash.update(d),d.fill(0)}update(i){return(0,e.exists)(this),this.iHash.update(i),this}digestInto(i){(0,e.exists)(this),(0,e.bytes)(i,this.outputLen),this.finished=!0,this.iHash.digestInto(i),this.oHash.update(i),this.oHash.digestInto(i),this.destroy()}digest(){const i=new Uint8Array(this.oHash.outputLen);return this.digestInto(i),i}_cloneInto(i){i||(i=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:c,destroyed:d,blockLen:l,outputLen:u}=this;return i.finished=c,i.destroyed=d,i.blockLen=l,i.outputLen=u,i.oHash=s._cloneInto(i.oHash),i.iHash=o._cloneInto(i.iHash),i}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=r,t.hmac=(a,i,s)=>new r(a,i).update(s).digest(),t.hmac.create=(a,i)=>new r(a,i)})(U_);var j_={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DER=void 0,t.weierstrassPoints=p,t.weierstrass=function(b){const v=function(U){const j=(0,e.validateBasic)(U);return r.validateObject(j,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...j})}(b),{Fp:m,n:T}=v,A=m.BYTES+1,N=2*m.BYTES+1;function R(U){return n.mod(U,T)}function B(U){return n.invert(U,T)}const{ProjectivePoint:F,normPrivateKeyToScalar:I,weierstrassEquation:P,isWithinCurveOrder:$}=p({...v,toBytes(U,j,H){const W=j.toAffine(),K=m.toBytes(W.x),q=r.concatBytes;return(0,a.abool)("isCompressed",H),H?q(Uint8Array.from([j.hasEvenY()?2:3]),K):q(Uint8Array.from([4]),K,m.toBytes(W.y))},fromBytes(U){const j=U.length,H=U[0],W=U.subarray(1);if(j!==A||H!==2&&H!==3){if(j===N&&H===4)return{x:m.fromBytes(W.subarray(0,m.BYTES)),y:m.fromBytes(W.subarray(m.BYTES,2*m.BYTES))};throw new Error(`Point of length ${j} was invalid. Expected ${A} compressed bytes or ${N} uncompressed bytes`)}{const K=r.bytesToNumberBE(W);if(!r.inRange(K,d,m.ORDER))throw new Error("Point is not on curve");const q=P(K);let V;try{V=m.sqrt(q)}catch(G){const J=G instanceof Error?": "+G.message:"";throw new Error("Point is not on curve"+J)}return(1&H)==1!=((V&d)===d)&&(V=m.neg(V)),{x:K,y:V}}}}),M=U=>r.bytesToHex(r.numberToBytesBE(U,v.nByteLength));function y(U){return U>T>>d}const E=(U,j,H)=>r.bytesToNumberBE(U.slice(j,H));class C{constructor(j,H,W){this.r=j,this.s=H,this.recovery=W,this.assertValidity()}static fromCompact(j){const H=v.nByteLength;return j=(0,a.ensureBytes)("compactSignature",j,2*H),new C(E(j,0,H),E(j,H,2*H))}static fromDER(j){const{r:H,s:W}=t.DER.toSig((0,a.ensureBytes)("DER",j));return new C(H,W)}assertValidity(){r.aInRange("r",this.r,d,T),r.aInRange("s",this.s,d,T)}addRecoveryBit(j){return new C(this.r,this.s,j)}recoverPublicKey(j){const{r:H,s:W,recovery:K}=this,q=S((0,a.ensureBytes)("msgHash",j));if(K==null||![0,1,2,3].includes(K))throw new Error("recovery id invalid");const V=K===2||K===3?H+v.n:H;if(V>=m.ORDER)throw new Error("recovery id 2 or 3 invalid");const G=1&K?"03":"02",J=F.fromHex(G+M(V)),z=B(V),Y=R(-q*z),X=R(W*z),ae=F.BASE.multiplyAndAddUnsafe(J,Y,X);if(!ae)throw new Error("point at infinify");return ae.assertValidity(),ae}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new C(this.r,R(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return M(this.r)+M(this.s)}}const g={isValidPrivateKey(U){try{return I(U),!0}catch{return!1}},normPrivateKeyToScalar:I,randomPrivateKey:()=>{const U=n.getMinHashLength(v.n);return n.mapHashToField(v.randomBytes(U),v.n)},precompute:(U=8,j=F.BASE)=>(j._setWindowSize(U),j.multiply(BigInt(3)),j)};function x(U){const j=r.isBytes(U),H=typeof U=="string",W=(j||H)&&U.length;return j?W===A||W===N:H?W===2*A||W===2*N:U instanceof F}const O=v.bits2int||function(U){const j=r.bytesToNumberBE(U),H=8*U.length-v.nBitLength;return H>0?j>>BigInt(H):j},S=v.bits2int_modN||function(U){return R(O(U))},w=r.bitMask(v.nBitLength);function _(U){return r.aInRange(`num < 2^${v.nBitLength}`,U,c,w),r.numberToBytesBE(U,v.nByteLength)}function k(U,j,H=L){if(["recovered","canonical"].some(ie=>ie in H))throw new Error("sign() legacy options not supported");const{hash:W,randomBytes:K}=v;let{lowS:q,prehash:V,extraEntropy:G}=H;q==null&&(q=!0),U=(0,a.ensureBytes)("msgHash",U),i(H),V&&(U=(0,a.ensureBytes)("prehashed msgHash",W(U)));const J=S(U),z=I(j),Y=[_(z),_(J)];if(G!=null&&G!==!1){const ie=G===!0?K(m.BYTES):G;Y.push((0,a.ensureBytes)("extraEntropy",ie))}const X=r.concatBytes(...Y),ae=J;return{seed:X,k2sig:function(ie){const oe=O(ie);if(!$(oe))return;const ue=B(oe),Oe=F.BASE.multiply(oe).toAffine(),Re=R(Oe.x);if(Re===c)return;const pe=R(ue*R(ae+Re*z));if(pe===c)return;let Ze=(Oe.x===Re?0:2)|Number(Oe.y&d),je=pe;return q&&y(pe)&&(je=function(it){return y(it)?R(-it):it}(pe),Ze^=1),new C(Re,je,Ze)}}}const L={lowS:v.lowS,prehash:!1},D={lowS:v.lowS,prehash:!1};return F.BASE._setWindowSize(8),{CURVE:v,getPublicKey:function(U,j=!0){return F.fromPrivateKey(U).toRawBytes(j)},getSharedSecret:function(U,j,H=!0){if(x(U))throw new Error("first arg must be private key");if(!x(j))throw new Error("second arg must be public key");return F.fromHex(j).multiply(I(U)).toRawBytes(H)},sign:function(U,j,H=L){const{seed:W,k2sig:K}=k(U,j,H),q=v;return r.createHmacDrbg(q.hash.outputLen,q.nByteLength,q.hmac)(W,K)},verify:function(U,j,H,W=D){var Re;const K=U;if(j=(0,a.ensureBytes)("msgHash",j),H=(0,a.ensureBytes)("publicKey",H),"strict"in W)throw new Error("options.strict was renamed to lowS");i(W);const{lowS:q,prehash:V}=W;let G,J;try{if(typeof K=="string"||r.isBytes(K))try{G=C.fromDER(K)}catch(pe){if(!(pe instanceof t.DER.Err))throw pe;G=C.fromCompact(K)}else{if(typeof K!="object"||typeof K.r!="bigint"||typeof K.s!="bigint")throw new Error("PARSE");{const{r:pe,s:Ze}=K;G=new C(pe,Ze)}}J=F.fromHex(H)}catch(pe){if(pe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(q&&G.hasHighS())return!1;V&&(j=v.hash(j));const{r:z,s:Y}=G,X=S(j),ae=B(Y),ie=R(X*ae),oe=R(z*ae),ue=(Re=F.BASE.multiplyAndAddUnsafe(J,ie,oe))==null?void 0:Re.toAffine();return ue?R(ue.x)===z:!1},ProjectivePoint:F,Signature:C,utils:g}},t.SWUFpSqrtRatio=h,t.mapToCurveSimpleSWU=function(b,v){if(n.validateField(b),!b.isValid(v.A)||!b.isValid(v.B)||!b.isValid(v.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const m=h(b,v.Z);if(!b.isOdd)throw new Error("Fp.isOdd is not implemented!");return T=>{let A,N,R,B,F,I,P,$;A=b.sqr(T),A=b.mul(A,v.Z),N=b.sqr(A),N=b.add(N,A),R=b.add(N,b.ONE),R=b.mul(R,v.B),B=b.cmov(v.Z,b.neg(N),!b.eql(N,b.ZERO)),B=b.mul(B,v.A),N=b.sqr(R),I=b.sqr(B),F=b.mul(I,v.A),N=b.add(N,F),N=b.mul(N,R),I=b.mul(I,B),F=b.mul(I,v.B),N=b.add(N,F),P=b.mul(A,R);const{isValid:M,value:y}=m(N,I);$=b.mul(A,T),$=b.mul($,y),P=b.cmov(P,R,M),$=b.cmov($,y,M);const E=b.isOdd(T)===b.isOdd($);return $=b.cmov(b.neg($),$,E),P=b.div(P,B),{x:P,y:$}}};const e=Gl,n=Xt,r=_t,a=_t;function i(b){b.lowS!==void 0&&(0,a.abool)("lowS",b.lowS),b.prehash!==void 0&&(0,a.abool)("prehash",b.prehash)}const{bytesToNumberBE:s,hexToBytes:o}=r;t.DER={Err:class extends Error{constructor(b=""){super(b)}},_tlv:{encode:(b,v)=>{const{Err:m}=t.DER;if(b<0||b>256)throw new m("tlv.encode: wrong tag");if(1&v.length)throw new m("tlv.encode: unpadded data");const T=v.length/2,A=r.numberToHexUnpadded(T);if(A.length/2&128)throw new m("tlv.encode: long form length too big");const N=T>127?r.numberToHexUnpadded(A.length/2|128):"";return`${r.numberToHexUnpadded(b)}${N}${A}${v}`},decode(b,v){const{Err:m}=t.DER;let T=0;if(b<0||b>256)throw new m("tlv.encode: wrong tag");if(v.length<2||v[T++]!==b)throw new m("tlv.decode: wrong tlv");const A=v[T++];let N=0;if(128&A){const B=127&A;if(!B)throw new m("tlv.decode(long): indefinite length not supported");if(B>4)throw new m("tlv.decode(long): byte length is too big");const F=v.subarray(T,T+B);if(F.length!==B)throw new m("tlv.decode: length bytes not complete");if(F[0]===0)throw new m("tlv.decode(long): zero leftmost byte");for(const I of F)N=N<<8|I;if(T+=B,N<128)throw new m("tlv.decode(long): not minimal encoding")}else N=A;const R=v.subarray(T,T+N);if(R.length!==N)throw new m("tlv.decode: wrong value length");return{v:R,l:v.subarray(T+N)}}},_int:{encode(b){const{Err:v}=t.DER;if(b<c)throw new v("integer: negative integers are not allowed");let m=r.numberToHexUnpadded(b);if(8&Number.parseInt(m[0],16)&&(m="00"+m),1&m.length)throw new v("unexpected assertion");return m},decode(b){const{Err:v}=t.DER;if(128&b[0])throw new v("Invalid signature integer: negative");if(b[0]===0&&!(128&b[1]))throw new v("Invalid signature integer: unnecessary leading zero");return s(b)}},toSig(b){const{Err:v,_int:m,_tlv:T}=t.DER,A=typeof b=="string"?o(b):b;r.abytes(A);const{v:N,l:R}=T.decode(48,A);if(R.length)throw new v("Invalid signature: left bytes after parsing");const{v:B,l:F}=T.decode(2,N),{v:I,l:P}=T.decode(2,F);if(P.length)throw new v("Invalid signature: left bytes after parsing");return{r:m.decode(B),s:m.decode(I)}},hexFromSig(b){const{_tlv:v,_int:m}=t.DER,T=`${v.encode(2,m.encode(b.r))}${v.encode(2,m.encode(b.s))}`;return v.encode(48,T)}};const c=BigInt(0),d=BigInt(1),l=BigInt(2),u=BigInt(3),f=BigInt(4);function p(b){const v=function(E){const C=(0,e.validateBasic)(E);r.validateObject(C,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:g,Fp:x,a:O}=C;if(g){if(!x.eql(O,x.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof g!="object"||typeof g.beta!="bigint"||typeof g.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...C})}(b),{Fp:m}=v,T=n.Field(v.n,v.nBitLength),A=v.toBytes||((E,C,g)=>{const x=C.toAffine();return r.concatBytes(Uint8Array.from([4]),m.toBytes(x.x),m.toBytes(x.y))}),N=v.fromBytes||(E=>{const C=E.subarray(1);return{x:m.fromBytes(C.subarray(0,m.BYTES)),y:m.fromBytes(C.subarray(m.BYTES,2*m.BYTES))}});function R(E){const{a:C,b:g}=v,x=m.sqr(E),O=m.mul(x,E);return m.add(m.add(O,m.mul(E,C)),g)}if(!m.eql(m.sqr(v.Gy),R(v.Gx)))throw new Error("bad generator point: equation left != right");function B(E){const{allowedPrivateKeyLengths:C,nByteLength:g,wrapPrivateKey:x,n:O}=v;if(C&&typeof E!="bigint"){if(r.isBytes(E)&&(E=r.bytesToHex(E)),typeof E!="string"||!C.includes(E.length))throw new Error("Invalid key");E=E.padStart(2*g,"0")}let S;try{S=typeof E=="bigint"?E:r.bytesToNumberBE((0,a.ensureBytes)("private key",E,g))}catch{throw new Error(`private key must be ${g} bytes, hex or bigint, not ${typeof E}`)}return x&&(S=n.mod(S,O)),r.aInRange("private key",S,d,O),S}function F(E){if(!(E instanceof $))throw new Error("ProjectivePoint expected")}const I=(0,a.memoized)((E,C)=>{const{px:g,py:x,pz:O}=E;if(m.eql(O,m.ONE))return{x:g,y:x};const S=E.is0();C==null&&(C=S?m.ONE:m.inv(O));const w=m.mul(g,C),_=m.mul(x,C),k=m.mul(O,C);if(S)return{x:m.ZERO,y:m.ZERO};if(!m.eql(k,m.ONE))throw new Error("invZ was invalid");return{x:w,y:_}}),P=(0,a.memoized)(E=>{if(E.is0()){if(v.allowInfinityPoint&&!m.is0(E.py))return;throw new Error("bad point: ZERO")}const{x:C,y:g}=E.toAffine();if(!m.isValid(C)||!m.isValid(g))throw new Error("bad point: x or y not FE");const x=m.sqr(g),O=R(C);if(!m.eql(x,O))throw new Error("bad point: equation left != right");if(!E.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class ${constructor(C,g,x){if(this.px=C,this.py=g,this.pz=x,C==null||!m.isValid(C))throw new Error("x required");if(g==null||!m.isValid(g))throw new Error("y required");if(x==null||!m.isValid(x))throw new Error("z required");Object.freeze(this)}static fromAffine(C){const{x:g,y:x}=C||{};if(!C||!m.isValid(g)||!m.isValid(x))throw new Error("invalid affine point");if(C instanceof $)throw new Error("projective point not allowed");const O=S=>m.eql(S,m.ZERO);return O(g)&&O(x)?$.ZERO:new $(g,x,m.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(C){const g=m.invertBatch(C.map(x=>x.pz));return C.map((x,O)=>x.toAffine(g[O])).map($.fromAffine)}static fromHex(C){const g=$.fromAffine(N((0,a.ensureBytes)("pointHex",C)));return g.assertValidity(),g}static fromPrivateKey(C){return $.BASE.multiply(B(C))}static msm(C,g){return(0,e.pippenger)($,T,C,g)}_setWindowSize(C){y.setWindowSize(this,C)}assertValidity(){P(this)}hasEvenY(){const{y:C}=this.toAffine();if(m.isOdd)return!m.isOdd(C);throw new Error("Field doesn't support isOdd")}equals(C){F(C);const{px:g,py:x,pz:O}=this,{px:S,py:w,pz:_}=C,k=m.eql(m.mul(g,_),m.mul(S,O)),L=m.eql(m.mul(x,_),m.mul(w,O));return k&&L}negate(){return new $(this.px,m.neg(this.py),this.pz)}double(){const{a:C,b:g}=v,x=m.mul(g,u),{px:O,py:S,pz:w}=this;let _=m.ZERO,k=m.ZERO,L=m.ZERO,D=m.mul(O,O),U=m.mul(S,S),j=m.mul(w,w),H=m.mul(O,S);return H=m.add(H,H),L=m.mul(O,w),L=m.add(L,L),_=m.mul(C,L),k=m.mul(x,j),k=m.add(_,k),_=m.sub(U,k),k=m.add(U,k),k=m.mul(_,k),_=m.mul(H,_),L=m.mul(x,L),j=m.mul(C,j),H=m.sub(D,j),H=m.mul(C,H),H=m.add(H,L),L=m.add(D,D),D=m.add(L,D),D=m.add(D,j),D=m.mul(D,H),k=m.add(k,D),j=m.mul(S,w),j=m.add(j,j),D=m.mul(j,H),_=m.sub(_,D),L=m.mul(j,U),L=m.add(L,L),L=m.add(L,L),new $(_,k,L)}add(C){F(C);const{px:g,py:x,pz:O}=this,{px:S,py:w,pz:_}=C;let k=m.ZERO,L=m.ZERO,D=m.ZERO;const U=v.a,j=m.mul(v.b,u);let H=m.mul(g,S),W=m.mul(x,w),K=m.mul(O,_),q=m.add(g,x),V=m.add(S,w);q=m.mul(q,V),V=m.add(H,W),q=m.sub(q,V),V=m.add(g,O);let G=m.add(S,_);return V=m.mul(V,G),G=m.add(H,K),V=m.sub(V,G),G=m.add(x,O),k=m.add(w,_),G=m.mul(G,k),k=m.add(W,K),G=m.sub(G,k),D=m.mul(U,V),k=m.mul(j,K),D=m.add(k,D),k=m.sub(W,D),D=m.add(W,D),L=m.mul(k,D),W=m.add(H,H),W=m.add(W,H),K=m.mul(U,K),V=m.mul(j,V),W=m.add(W,K),K=m.sub(H,K),K=m.mul(U,K),V=m.add(V,K),H=m.mul(W,V),L=m.add(L,H),H=m.mul(G,V),k=m.mul(q,k),k=m.sub(k,H),H=m.mul(q,W),D=m.mul(G,D),D=m.add(D,H),new $(k,L,D)}subtract(C){return this.add(C.negate())}is0(){return this.equals($.ZERO)}wNAF(C){return y.wNAFCached(this,C,$.normalizeZ)}multiplyUnsafe(C){r.aInRange("scalar",C,c,v.n);const g=$.ZERO;if(C===c)return g;if(C===d)return this;const{endo:x}=v;if(!x)return y.unsafeLadder(this,C);let{k1neg:O,k1:S,k2neg:w,k2:_}=x.splitScalar(C),k=g,L=g,D=this;for(;S>c||_>c;)S&d&&(k=k.add(D)),_&d&&(L=L.add(D)),D=D.double(),S>>=d,_>>=d;return O&&(k=k.negate()),w&&(L=L.negate()),L=new $(m.mul(L.px,x.beta),L.py,L.pz),k.add(L)}multiply(C){const{endo:g,n:x}=v;let O,S;if(r.aInRange("scalar",C,d,x),g){const{k1neg:w,k1:_,k2neg:k,k2:L}=g.splitScalar(C);let{p:D,f:U}=this.wNAF(_),{p:j,f:H}=this.wNAF(L);D=y.constTimeNegate(w,D),j=y.constTimeNegate(k,j),j=new $(m.mul(j.px,g.beta),j.py,j.pz),O=D.add(j),S=U.add(H)}else{const{p:w,f:_}=this.wNAF(C);O=w,S=_}return $.normalizeZ([O,S])[0]}multiplyAndAddUnsafe(C,g,x){const O=$.BASE,S=(_,k)=>k!==c&&k!==d&&_.equals(O)?_.multiply(k):_.multiplyUnsafe(k),w=S(this,g).add(S(C,x));return w.is0()?void 0:w}toAffine(C){return I(this,C)}isTorsionFree(){const{h:C,isTorsionFree:g}=v;if(C===d)return!0;if(g)return g($,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:C,clearCofactor:g}=v;return C===d?this:g?g($,this):this.multiplyUnsafe(v.h)}toRawBytes(C=!0){return(0,a.abool)("isCompressed",C),this.assertValidity(),A($,this,C)}toHex(C=!0){return(0,a.abool)("isCompressed",C),r.bytesToHex(this.toRawBytes(C))}}$.BASE=new $(v.Gx,v.Gy,m.ONE),$.ZERO=new $(m.ZERO,m.ONE,m.ZERO);const M=v.nBitLength,y=(0,e.wNAF)($,v.endo?Math.ceil(M/2):M);return{CURVE:v,ProjectivePoint:$,normPrivateKeyToScalar:B,weierstrassEquation:R,isWithinCurveOrder:function(E){return r.inRange(E,d,v.n)}}}function h(b,v){const m=b.ORDER;let T=c;for(let E=m-d;E%l===c;E/=l)T+=d;const A=T,N=l<<A-d-d,R=N*l,B=(m-d)/R,F=(B-d)/l,I=R-d,P=N,$=b.pow(v,B),M=b.pow(v,(B+d)/l);let y=(E,C)=>{let g=$,x=b.pow(C,I),O=b.sqr(x);O=b.mul(O,C);let S=b.mul(E,O);S=b.pow(S,F),S=b.mul(S,x),x=b.mul(S,C),O=b.mul(S,E);let w=b.mul(O,x);S=b.pow(w,P);let _=b.eql(S,b.ONE);x=b.mul(O,M),S=b.mul(w,g),O=b.cmov(x,O,_),w=b.cmov(S,w,_);for(let k=A;k>d;k--){let L=k-l;L=l<<L-d;let D=b.pow(w,L);const U=b.eql(D,b.ONE);x=b.mul(O,g),g=b.mul(g,g),D=b.mul(w,g),O=b.cmov(x,O,U),w=b.cmov(D,w,U)}return{isValid:_,value:O}};if(b.ORDER%f===u){const E=(b.ORDER-u)/f,C=b.sqrt(b.neg(v));y=(g,x)=>{let O=b.sqr(x);const S=b.mul(g,x);O=b.mul(O,S);let w=b.pow(O,E);w=b.mul(w,S);const _=b.mul(w,C),k=b.mul(b.sqr(w),x),L=b.eql(k,g);return{isValid:L,value:b.cmov(_,w,L)}}}return y}})(j_),Object.defineProperty(t2,"__esModule",{value:!0}),t2.getHash=hI,t2.createCurve=function(t,e){const n=r=>(0,Ule.weierstrass)({...t,...hI(r)});return Object.freeze({...n(e),create:n})};const Fle=U_,pI=nc,Ule=j_;function hI(t){return{hash:t,hmac:(e,...n)=>(0,Fle.hmac)(t,e,(0,pI.concatBytes)(...n)),randomBytes:pI.randomBytes}}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const e=Ro,n=nc,r=t2,a=Rc,i=Xt,s=_t,o=j_,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(1),u=BigInt(2),f=(S,w)=>(S+w/u)/w;function p(S){const w=c,_=BigInt(3),k=BigInt(6),L=BigInt(11),D=BigInt(22),U=BigInt(23),j=BigInt(44),H=BigInt(88),W=S*S*S%w,K=W*W*S%w,q=(0,i.pow2)(K,_,w)*K%w,V=(0,i.pow2)(q,_,w)*K%w,G=(0,i.pow2)(V,u,w)*W%w,J=(0,i.pow2)(G,L,w)*G%w,z=(0,i.pow2)(J,D,w)*J%w,Y=(0,i.pow2)(z,j,w)*z%w,X=(0,i.pow2)(Y,H,w)*Y%w,ae=(0,i.pow2)(X,j,w)*z%w,ie=(0,i.pow2)(ae,_,w)*K%w,oe=(0,i.pow2)(ie,U,w)*J%w,ue=(0,i.pow2)(oe,k,w)*W%w,Oe=(0,i.pow2)(ue,u,w);if(!h.eql(h.sqr(Oe),S))throw new Error("Cannot find square root");return Oe}const h=(0,i.Field)(c,void 0,void 0,{sqrt:p});t.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:h,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:S=>{const w=d,_=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),k=-l*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),L=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),D=_,U=BigInt("0x100000000000000000000000000000000"),j=f(D*S,w),H=f(-k*S,w);let W=(0,i.mod)(S-j*_-H*L,w),K=(0,i.mod)(-j*k-H*D,w);const q=W>U,V=K>U;if(q&&(W=w-W),V&&(K=w-K),W>U||K>U)throw new Error("splitScalar: Endomorphism failed, k="+S);return{k1neg:q,k1:W,k2neg:V,k2:K}}}},e.sha256);const b=BigInt(0),v={};function m(S,...w){let _=v[S];if(_===void 0){const k=(0,e.sha256)(Uint8Array.from(S,L=>L.charCodeAt(0)));_=(0,s.concatBytes)(k,k),v[S]=_}return(0,e.sha256)((0,s.concatBytes)(_,...w))}const T=S=>S.toRawBytes(!0).slice(1),A=S=>(0,s.numberToBytesBE)(S,32),N=S=>(0,i.mod)(S,c),R=S=>(0,i.mod)(S,d),B=t.secp256k1.ProjectivePoint,F=(S,w,_)=>B.BASE.multiplyAndAddUnsafe(S,w,_);function I(S){let w=t.secp256k1.utils.normPrivateKeyToScalar(S),_=B.fromPrivateKey(w);return{scalar:_.hasEvenY()?w:R(-w),bytes:T(_)}}function P(S){(0,s.aInRange)("x",S,l,c);const w=N(S*S);let _=p(N(w*S+BigInt(7)));_%u!==b&&(_=N(-_));const k=new B(S,_,l);return k.assertValidity(),k}const $=s.bytesToNumberBE;function M(...S){return R($(m("BIP0340/challenge",...S)))}function y(S){return I(S).bytes}function E(S,w,_=(0,n.randomBytes)(32)){const k=(0,s.ensureBytes)("message",S),{bytes:L,scalar:D}=I(w),U=(0,s.ensureBytes)("auxRand",_,32),j=A(D^$(m("BIP0340/aux",U))),H=m("BIP0340/nonce",j,L,k),W=R($(H));if(W===b)throw new Error("sign failed: k is zero");const{bytes:K,scalar:q}=I(W),V=M(K,L,k),G=new Uint8Array(64);if(G.set(K,0),G.set(A(R(q+V*D)),32),!C(G,k,L))throw new Error("sign: Invalid signature produced");return G}function C(S,w,_){const k=(0,s.ensureBytes)("signature",S,64),L=(0,s.ensureBytes)("message",w),D=(0,s.ensureBytes)("publicKey",_,32);try{const U=P($(D)),j=$(k.subarray(0,32));if(!(0,s.inRange)(j,l,c))return!1;const H=$(k.subarray(32,64));if(!(0,s.inRange)(H,l,d))return!1;const W=M(A(j),T(U),L),K=F(U,H,R(-W));return!(!K||!K.hasEvenY()||K.toAffine().x!==j)}catch{return!1}}t.schnorr={getPublicKey:y,sign:E,verify:C,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:P,pointToBytes:T,numberToBytesBE:s.numberToBytesBE,bytesToNumberBE:s.bytesToNumberBE,taggedHash:m,mod:i.mod}};const g=(0,a.isogenyMap)(h,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(S=>S.map(w=>BigInt(w)))),x=(0,o.mapToCurveSimpleSWU)(h,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:h.create(BigInt("-11"))}),O=(0,a.createHasher)(t.secp256k1.ProjectivePoint,S=>{const{x:w,y:_}=x(h.create(S[0]));return g(w,_)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:h.ORDER,m:1,k:128,expand:"xmd",hash:e.sha256});t.hashToCurve=O.hashToCurve,t.encodeToCurve=O.encodeToCurve})(AF);var Tw={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHex=t.remove0x=void 0;var e=Da;t.remove0x=function(n){return n.startsWith("0x")||n.startsWith("0X")?n.slice(2):n},t.decodeHex=function(n){return(0,e.hexToBytes)((0,t.remove0x)(n))}})(Tw),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.hexToPublicKey=t.convertPublicKeyFormat=t.getSharedPoint=t.getPublicKey=t.isValidPrivateKey=t.getValidSecret=void 0;var e=$_,n=WB,r=AF,a=S5,i=g0,s=Tw;t.getValidSecret=function(){var l;do l=(0,e.randomBytes)(i.SECRET_KEY_LENGTH);while(!(0,t.isValidPrivateKey)(l));return l},t.isValidPrivateKey=function(l){return o((0,a.ellipticCurve)(),function(u){return u.utils.isValidPrivateKey(l)},function(){return!0},function(){return!0})},t.getPublicKey=function(l){return o((0,a.ellipticCurve)(),function(u){return u.getPublicKey(l)},function(u){return u.getPublicKey(l)},function(u){return u.getPublicKey(l)})},t.getSharedPoint=function(l,u,f){return o((0,a.ellipticCurve)(),function(p){return p.getSharedSecret(l,u,f)},function(p){return p.getSharedSecret(l,u)},function(p){return d(p,l,u)})},t.convertPublicKeyFormat=function(l,u){return o((0,a.ellipticCurve)(),function(f){return f.getSharedSecret(BigInt(1),l,u)},function(){return l},function(){return l})};function o(l,u,f,p){if(l==="secp256k1")return u(r.secp256k1);if(l==="x25519")return f(n.x25519);if(l==="ed25519")return p(n.ed25519);throw new Error("Not implemented")}t.hexToPublicKey=function(l){var u=(0,s.decodeHex)(l);return o((0,a.ellipticCurve)(),function(){return c(u)},function(){return u},function(){return u})};var c=function(l){if(l.length===i.ETH_PUBLIC_KEY_SIZE){var u=new Uint8Array(1+l.length);return u.set([4]),u.set(l,1),u}return l},d=function(l,u,f){var p=l.utils.getExtendedPublicKey(u).scalar;return l.ExtendedPoint.fromHex(f).multiply(p).toRawBytes()}}(VB);var CF={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.hkdf=void 0,Yl.extract=OF,Yl.expand=MF;const xw=Ea,bI=nc,IF=U_;function OF(t,e,n){return(0,xw.hash)(t),n===void 0&&(n=new Uint8Array(t.outputLen)),(0,IF.hmac)(t,(0,bI.toBytes)(n),(0,bI.toBytes)(e))}const Ng=new Uint8Array([0]),yI=new Uint8Array;function MF(t,e,n,r=32){if((0,xw.hash)(t),(0,xw.number)(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/t.outputLen);n===void 0&&(n=yI);const i=new Uint8Array(a*t.outputLen),s=IF.hmac.create(t,e),o=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let d=0;d<a;d++)Ng[0]=d+1,o.update(d===0?yI:c).update(n).update(Ng).digestInto(c),i.set(c,t.outputLen*d),s._cloneInto(o);return s.destroy(),o.destroy(),c.fill(0),Ng.fill(0),i.slice(0,r)}Yl.hkdf=(t,e,n,r,a)=>MF(t,OF(t,e,n),r,a),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedKey=t.deriveKey=void 0;var e=Da,n=Yl,r=Ro;t.deriveKey=function(a,i,s){return(0,n.hkdf)(r.sha256,a,i,s,32)},t.getSharedKey=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return(0,t.deriveKey)(e.concatBytes.apply(void 0,a))}}(CF);var mI={},h6={},Bn={},Q1={};Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.polyval=Q1.ghash=void 0,Q1._toGHASHKey=PF;const ed=or,Er=Da,wo=16,H_=new Uint8Array(16),vs=(0,Er.u32)(H_),ri=t=>(t>>>0&255)<<24|(t>>>8&255)<<16|(t>>>16&255)<<8|t>>>24&255|0;function PF(t){t.reverse();const e=1&t[15];let n=0;for(let r=0;r<t.length;r++){const a=t[r];t[r]=a>>>1|n,n=(1&a)<<7}return t[0]^=225&-e,t}let kF=class{constructor(e,n){this.blockLen=wo,this.outputLen=wo,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,Er.toBytes)(e),(0,ed.bytes)(e,16);const r=(0,Er.createView)(e);let a=r.getUint32(0,!1),i=r.getUint32(4,!1),s=r.getUint32(8,!1),o=r.getUint32(12,!1);const c=[];for(let m=0;m<128;m++)c.push({s0:ri(a),s1:ri(i),s2:ri(s),s3:ri(o)}),{s0:a,s1:i,s2:s,s3:o}={s3:(u=s)<<31|(f=o)>>>1,s2:(l=i)<<31|u>>>1,s1:(d=a)<<31|l>>>1,s0:d>>>1^225<<24&-(1&f)};var d,l,u,f;const p=(m=>m>65536?8:m>1024?4:2)(n||1024);if(![1,2,4,8].includes(p))throw new Error(`ghash: wrong window size=${p}, should be 2, 4 or 8`);this.W=p;const h=128/p,b=this.windowSize=2**p,v=[];for(let m=0;m<h;m++)for(let T=0;T<b;T++){let A=0,N=0,R=0,B=0;for(let F=0;F<p;F++){if(!(T>>>p-F-1&1))continue;const{s0:I,s1:P,s2:$,s3:M}=c[p*m+F];A^=I,N^=P,R^=$,B^=M}v.push({s0:A,s1:N,s2:R,s3:B})}this.t=v}_updateBlock(e,n,r,a){e^=this.s0,n^=this.s1,r^=this.s2,a^=this.s3;const{W:i,t:s,windowSize:o}=this;let c=0,d=0,l=0,u=0;const f=(1<<i)-1;let p=0;for(const h of[e,n,r,a])for(let b=0;b<4;b++){const v=h>>>8*b&255;for(let m=8/i-1;m>=0;m--){const T=v>>>i*m&f,{s0:A,s1:N,s2:R,s3:B}=s[p*o+T];c^=A,d^=N,l^=R,u^=B,p+=1}}this.s0=c,this.s1=d,this.s2=l,this.s3=u}update(e){e=(0,Er.toBytes)(e),(0,ed.exists)(this);const n=(0,Er.u32)(e),r=Math.floor(e.length/wo),a=e.length%wo;for(let i=0;i<r;i++)this._updateBlock(n[4*i+0],n[4*i+1],n[4*i+2],n[4*i+3]);return a&&(H_.set(e.subarray(r*wo)),this._updateBlock(vs[0],vs[1],vs[2],vs[3]),(0,Er.clean)(vs)),this}destroy(){const{t:e}=this;for(const n of e)n.s0=0,n.s1=0,n.s2=0,n.s3=0}digestInto(e){(0,ed.exists)(this),(0,ed.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:a,s3:i}=this,s=(0,Er.u32)(e);return s[0]=n,s[1]=r,s[2]=a,s[3]=i,e}digest(){const e=new Uint8Array(wo);return this.digestInto(e),this.destroy(),e}},jle=class extends kF{constructor(e,n){e=(0,Er.toBytes)(e);const r=PF((0,Er.copyBytes)(e));super(r,n),(0,Er.clean)(r)}update(e){e=(0,Er.toBytes)(e),(0,ed.exists)(this);const n=(0,Er.u32)(e),r=e.length%wo,a=Math.floor(e.length/wo);for(let i=0;i<a;i++)this._updateBlock(ri(n[4*i+3]),ri(n[4*i+2]),ri(n[4*i+1]),ri(n[4*i+0]));return r&&(H_.set(e.subarray(a*wo)),this._updateBlock(ri(vs[3]),ri(vs[2]),ri(vs[1]),ri(vs[0])),(0,Er.clean)(vs)),this}digestInto(e){(0,ed.exists)(this),(0,ed.output)(e,this),this.finished=!0;const{s0:n,s1:r,s2:a,s3:i}=this,s=(0,Er.u32)(e);return s[0]=n,s[1]=r,s[2]=a,s[3]=i,e.reverse()}};function gI(t){const e=(r,a)=>t(a,r.length).update((0,Er.toBytes)(r)).digest(),n=t(new Uint8Array(16),0);return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=(r,a)=>t(r,a),e}Q1.ghash=gI((t,e)=>new kF(t,e)),Q1.polyval=gI((t,e)=>new jle(t,e)),Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.unsafe=Bn.aeskwp=Bn.aeskw=Bn.siv=Bn.gcm=Bn.cfb=Bn.cbc=Bn.ecb=Bn.ctr=void 0,Bn.expandKeyLE=Ri,Bn.expandKeyDecLE=C5;const $t=or,Sw=Q1,_e=Da,ea=16,Xh=new Uint8Array(ea),Hle=283;function z_(t){return t<<1^Hle&-(t>>7)}function Jl(t,e){let n=0;for(;e>0;e>>=1)n^=t&-(1&e),t=z_(t);return n}const Aw=(()=>{const t=new Uint8Array(256);for(let n=0,r=1;n<256;n++,r^=z_(r))t[n]=r;const e=new Uint8Array(256);e[0]=99;for(let n=0;n<255;n++){let r=t[255-n];r|=r<<8,e[t[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return(0,_e.clean)(t),e})(),zle=Aw.map((t,e)=>Aw.indexOf(e)),qle=t=>t<<24|t>>>8,Rg=t=>t<<8|t>>>24,n8=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;function NF(t,e){if(t.length!==256)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map((d,l)=>e(t[l])),r=n.map(Rg),a=r.map(Rg),i=a.map(Rg),s=new Uint32Array(65536),o=new Uint32Array(65536),c=new Uint16Array(65536);for(let d=0;d<256;d++)for(let l=0;l<256;l++){const u=256*d+l;s[u]=n[d]^r[l],o[u]=a[d]^i[l],c[u]=t[d]<<8|t[l]}return{sbox:t,sbox2:c,T0:n,T1:r,T2:a,T3:i,T01:s,T23:o}}const q_=NF(Aw,t=>Jl(t,3)<<24|t<<16|t<<8|Jl(t,2)),RF=NF(zle,t=>Jl(t,11)<<24|Jl(t,13)<<16|Jl(t,9)<<8|Jl(t,14)),Kle=(()=>{const t=new Uint8Array(16);for(let e=0,n=1;e<16;e++,n=z_(n))t[e]=n;return t})();function Ri(t){(0,$t.bytes)(t);const e=t.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:n}=q_,r=[];(0,_e.isAligned32)(t)||r.push(t=(0,_e.copyBytes)(t));const a=(0,_e.u32)(t),i=a.length,s=c=>_s(n,c,c,c,c),o=new Uint32Array(e+28);o.set(a);for(let c=i;c<o.length;c++){let d=o[c-1];c%i==0?d=s(qle(d))^Kle[c/i-1]:i>6&&c%i==4&&(d=s(d)),o[c]=o[c-i]^d}return(0,_e.clean)(...r),o}function C5(t){const e=Ri(t),n=e.slice(),r=e.length,{sbox2:a}=q_,{T0:i,T1:s,T2:o,T3:c}=RF;for(let d=0;d<r;d+=4)for(let l=0;l<4;l++)n[d+l]=e[r-d-4+l];(0,_e.clean)(e);for(let d=4;d<r-4;d++){const l=n[d],u=_s(a,l,l,l,l);n[d]=i[255&u]^s[u>>>8&255]^o[u>>>16&255]^c[u>>>24]}return n}function Qc(t,e,n,r,a,i){return t[n<<8&65280|r>>>8&255]^e[a>>>8&65280|i>>>24&255]}function _s(t,e,n,r,a){return t[255&e|65280&n]|t[r>>>16&255|a>>>16&65280]<<16}function _r(t,e,n,r,a){const{sbox2:i,T01:s,T23:o}=q_;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],a^=t[c++];const d=t.length/4-2;for(let l=0;l<d;l++){const u=t[c++]^Qc(s,o,e,n,r,a),f=t[c++]^Qc(s,o,n,r,a,e),p=t[c++]^Qc(s,o,r,a,e,n),h=t[c++]^Qc(s,o,a,e,n,r);e=u,n=f,r=p,a=h}return{s0:t[c++]^_s(i,e,n,r,a),s1:t[c++]^_s(i,n,r,a,e),s2:t[c++]^_s(i,r,a,e,n),s3:t[c++]^_s(i,a,e,n,r)}}function I5(t,e,n,r,a){const{sbox2:i,T01:s,T23:o}=RF;let c=0;e^=t[c++],n^=t[c++],r^=t[c++],a^=t[c++];const d=t.length/4-2;for(let l=0;l<d;l++){const u=t[c++]^Qc(s,o,e,a,r,n),f=t[c++]^Qc(s,o,n,e,a,r),p=t[c++]^Qc(s,o,r,n,e,a),h=t[c++]^Qc(s,o,a,r,n,e);e=u,n=f,r=p,a=h}return{s0:t[c++]^_s(i,e,a,r,n),s1:t[c++]^_s(i,n,e,a,r),s2:t[c++]^_s(i,r,n,e,a),s3:t[c++]^_s(i,a,r,n,e)}}function b6(t,e){if(e===void 0)return new Uint8Array(t);if((0,$t.bytes)(e),e.length<t)throw new Error(`aes: wrong destination length, expected at least ${t}, got: ${e.length}`);if(!(0,_e.isAligned32)(e))throw new Error("unaligned dst");return e}function DF(t,e,n,r){(0,$t.bytes)(e,ea),(0,$t.bytes)(n);const a=n.length;r=b6(a,r);const i=e,s=(0,_e.u32)(i);let{s0:o,s1:c,s2:d,s3:l}=_r(t,s[0],s[1],s[2],s[3]);const u=(0,_e.u32)(n),f=(0,_e.u32)(r);for(let h=0;h+4<=u.length;h+=4){f[h+0]=u[h+0]^o,f[h+1]=u[h+1]^c,f[h+2]=u[h+2]^d,f[h+3]=u[h+3]^l;let b=1;for(let v=i.length-1;v>=0;v--)b=b+(255&i[v])|0,i[v]=255&b,b>>>=8;({s0:o,s1:c,s2:d,s3:l}=_r(t,s[0],s[1],s[2],s[3]))}const p=ea*Math.floor(u.length/4);if(p<a){const h=new Uint32Array([o,c,d,l]),b=(0,_e.u8)(h);for(let v=p,m=0;v<a;v++,m++)r[v]=n[v]^b[m];(0,_e.clean)(h)}return r}function Zl(t,e,n,r,a){(0,$t.bytes)(n,ea),(0,$t.bytes)(r),a=b6(r.length,a);const i=n,s=(0,_e.u32)(i),o=(0,_e.createView)(i),c=(0,_e.u32)(r),d=(0,_e.u32)(a),l=e?0:12,u=r.length;let f=o.getUint32(l,e),{s0:p,s1:h,s2:b,s3:v}=_r(t,s[0],s[1],s[2],s[3]);for(let T=0;T+4<=c.length;T+=4)d[T+0]=c[T+0]^p,d[T+1]=c[T+1]^h,d[T+2]=c[T+2]^b,d[T+3]=c[T+3]^v,f=f+1>>>0,o.setUint32(l,f,e),{s0:p,s1:h,s2:b,s3:v}=_r(t,s[0],s[1],s[2],s[3]);const m=ea*Math.floor(c.length/4);if(m<u){const T=new Uint32Array([p,h,b,v]),A=(0,_e.u8)(T);for(let N=m,R=0;N<u;N++,R++)a[N]=r[N]^A[R];(0,_e.clean)(T)}return a}function wI(t){if((0,$t.bytes)(t),t.length%ea!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function vI(t,e,n){(0,$t.bytes)(t);let r=t.length;const a=r%ea;if(!e&&a!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,_e.isAligned32)(t)||(t=(0,_e.copyBytes)(t));const i=(0,_e.u32)(t);if(e){let o=ea-a;o||(o=ea),r+=o}const s=b6(r,n);return{b:i,o:(0,_e.u32)(s),out:s}}function EI(t,e){if(!e)return t;const n=t.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=t[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");const a=t.subarray(0,-r);for(let i=0;i<r;i++)if(t[n-i-1]!==r)throw new Error("aes/pcks5: wrong padding");return a}function _I(t){const e=new Uint8Array(16),n=(0,_e.u32)(e);e.set(t);const r=ea-t.length;for(let a=ea-r;a<ea;a++)e[a]=r;return n}function $F(t,e,n,r,a){const i=a==null?0:a.length,s=t.create(n,r.length+i);a&&s.update(a),s.update(r);const o=new Uint8Array(16),c=(0,_e.createView)(o);a&&(0,_e.setBigUint64)(c,0,BigInt(8*i),e),(0,_e.setBigUint64)(c,8,BigInt(8*r.length),e),s.update(o);const d=s.digest();return(0,_e.clean)(o),d}Bn.ctr=(0,_e.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,a){if((0,$t.bytes)(r),a!==void 0&&((0,$t.bytes)(a),!(0,_e.isAligned32)(a)))throw new Error("unaligned destination");const i=Ri(t),s=(0,_e.copyBytes)(e),o=[i,s];(0,_e.isAligned32)(r)||o.push(r=(0,_e.copyBytes)(r));const c=DF(i,s,r,a);return(0,_e.clean)(...o),c}return(0,$t.bytes)(t),(0,$t.bytes)(e,ea),{encrypt:(r,a)=>n(r,a),decrypt:(r,a)=>n(r,a)}}),Bn.ecb=(0,_e.wrapCipher)({blockSize:16},function(t,e={}){(0,$t.bytes)(t);const n=!e.disablePadding;return{encrypt(r,a){const{b:i,o:s,out:o}=vI(r,n,a),c=Ri(t);let d=0;for(;d+4<=i.length;){const{s0:l,s1:u,s2:f,s3:p}=_r(c,i[d+0],i[d+1],i[d+2],i[d+3]);s[d++]=l,s[d++]=u,s[d++]=f,s[d++]=p}if(n){const l=_I(r.subarray(4*d)),{s0:u,s1:f,s2:p,s3:h}=_r(c,l[0],l[1],l[2],l[3]);s[d++]=u,s[d++]=f,s[d++]=p,s[d++]=h}return(0,_e.clean)(c),o},decrypt(r,a){wI(r);const i=C5(t),s=b6(r.length,a),o=[i];(0,_e.isAligned32)(r)||o.push(r=(0,_e.copyBytes)(r));const c=(0,_e.u32)(r),d=(0,_e.u32)(s);for(let l=0;l+4<=c.length;){const{s0:u,s1:f,s2:p,s3:h}=I5(i,c[l+0],c[l+1],c[l+2],c[l+3]);d[l++]=u,d[l++]=f,d[l++]=p,d[l++]=h}return(0,_e.clean)(...o),EI(s,n)}}}),Bn.cbc=(0,_e.wrapCipher)({blockSize:16,nonceLength:16},function(t,e,n={}){(0,$t.bytes)(t),(0,$t.bytes)(e,16);const r=!n.disablePadding;return{encrypt(a,i){const s=Ri(t),{b:o,o:c,out:d}=vI(a,r,i);let l=e;const u=[s];(0,_e.isAligned32)(l)||u.push(l=(0,_e.copyBytes)(l));const f=(0,_e.u32)(l);let p=f[0],h=f[1],b=f[2],v=f[3],m=0;for(;m+4<=o.length;)p^=o[m+0],h^=o[m+1],b^=o[m+2],v^=o[m+3],{s0:p,s1:h,s2:b,s3:v}=_r(s,p,h,b,v),c[m++]=p,c[m++]=h,c[m++]=b,c[m++]=v;if(r){const T=_I(a.subarray(4*m));p^=T[0],h^=T[1],b^=T[2],v^=T[3],{s0:p,s1:h,s2:b,s3:v}=_r(s,p,h,b,v),c[m++]=p,c[m++]=h,c[m++]=b,c[m++]=v}return(0,_e.clean)(...u),d},decrypt(a,i){wI(a);const s=C5(t);let o=e;const c=[s];(0,_e.isAligned32)(o)||c.push(o=(0,_e.copyBytes)(o));const d=(0,_e.u32)(o),l=b6(a.length,i);(0,_e.isAligned32)(a)||c.push(a=(0,_e.copyBytes)(a));const u=(0,_e.u32)(a),f=(0,_e.u32)(l);let p=d[0],h=d[1],b=d[2],v=d[3];for(let m=0;m+4<=u.length;){const T=p,A=h,N=b,R=v;p=u[m+0],h=u[m+1],b=u[m+2],v=u[m+3];const{s0:B,s1:F,s2:I,s3:P}=I5(s,p,h,b,v);f[m++]=B^T,f[m++]=F^A,f[m++]=I^N,f[m++]=P^R}return(0,_e.clean)(...c),EI(l,r)}}}),Bn.cfb=(0,_e.wrapCipher)({blockSize:16,nonceLength:16},function(t,e){function n(r,a,i){(0,$t.bytes)(r);const s=r.length;i=b6(s,i);const o=Ri(t);let c=e;const d=[o];(0,_e.isAligned32)(c)||d.push(c=(0,_e.copyBytes)(c)),(0,_e.isAligned32)(r)||d.push(r=(0,_e.copyBytes)(r));const l=(0,_e.u32)(r),u=(0,_e.u32)(i),f=a?u:l,p=(0,_e.u32)(c);let h=p[0],b=p[1],v=p[2],m=p[3];for(let A=0;A+4<=l.length;){const{s0:N,s1:R,s2:B,s3:F}=_r(o,h,b,v,m);u[A+0]=l[A+0]^N,u[A+1]=l[A+1]^R,u[A+2]=l[A+2]^B,u[A+3]=l[A+3]^F,h=f[A++],b=f[A++],v=f[A++],m=f[A++]}const T=ea*Math.floor(l.length/4);if(T<s){({s0:h,s1:b,s2:v,s3:m}=_r(o,h,b,v,m));const A=(0,_e.u8)(new Uint32Array([h,b,v,m]));for(let N=T,R=0;N<s;N++,R++)i[N]=r[N]^A[R];(0,_e.clean)(A)}return(0,_e.clean)(...d),i}return(0,$t.bytes)(t),(0,$t.bytes)(e,16),{encrypt:(r,a)=>n(r,!0,a),decrypt:(r,a)=>n(r,!1,a)}}),Bn.gcm=(0,_e.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){if((0,$t.bytes)(t),(0,$t.bytes)(e),n!==void 0&&(0,$t.bytes)(n),e.length<8)throw new Error("aes/gcm: invalid nonce length");const r=16;function a(s,o,c){const d=$F(Sw.ghash,!1,s,c,n);for(let l=0;l<o.length;l++)d[l]^=o[l];return d}function i(){const s=Ri(t),o=Xh.slice(),c=Xh.slice();if(Zl(s,!1,c,c,o),e.length===12)c.set(e);else{const d=Xh.slice(),l=(0,_e.createView)(d);(0,_e.setBigUint64)(l,8,BigInt(8*e.length),!1);const u=Sw.ghash.create(o).update(e).update(d);u.digestInto(c),u.destroy()}return{xk:s,authKey:o,counter:c,tagMask:Zl(s,!1,c,Xh)}}return{encrypt(s){(0,$t.bytes)(s);const{xk:o,authKey:c,counter:d,tagMask:l}=i(),u=new Uint8Array(s.length+r),f=[o,c,d,l];(0,_e.isAligned32)(s)||f.push(s=(0,_e.copyBytes)(s)),Zl(o,!1,d,s,u);const p=a(c,l,u.subarray(0,u.length-r));return f.push(p),u.set(p,s.length),(0,_e.clean)(...f),u},decrypt(s){if((0,$t.bytes)(s),s.length<r)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:o,authKey:c,counter:d,tagMask:l}=i(),u=[o,c,l,d];(0,_e.isAligned32)(s)||u.push(s=(0,_e.copyBytes)(s));const f=s.subarray(0,-16),p=s.subarray(-16),h=a(c,l,f);if(u.push(h),!(0,_e.equalBytes)(h,p))throw new Error("aes/gcm: invalid ghash tag");const b=Zl(o,!1,d,f);return(0,_e.clean)(...u),b}}});const Qh=(t,e,n)=>r=>{if(!Number.isSafeInteger(r)||e>r||r>n)throw new Error(`${t}: invalid value=${r}, must be [${e}..${n}]`)};function LF(t){return t!=null&&typeof t=="object"&&(t instanceof Uint32Array||t.constructor.name==="Uint32Array")}function BF(t,e){if((0,$t.bytes)(e,16),!LF(t))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,_e.u32)(e);let{s0:r,s1:a,s2:i,s3:s}=_r(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=a,n[2]=i,n[3]=s,e}function FF(t,e){if((0,$t.bytes)(e,16),!LF(t))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,_e.u32)(e);let{s0:r,s1:a,s2:i,s3:s}=I5(t,n[0],n[1],n[2],n[3]);return n[0]=r,n[1]=a,n[2]=i,n[3]=s,e}Bn.siv=(0,_e.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(t,e,n){const r=Qh("AAD",0,68719476736),a=Qh("plaintext",0,2**36),i=Qh("nonce",12,12),s=Qh("ciphertext",16,2**36+16);function o(){const l=Ri(t),u=new Uint8Array(t.length),f=new Uint8Array(16),p=[l,u];let h=e;(0,_e.isAligned32)(h)||p.push(h=(0,_e.copyBytes)(h));const b=(0,_e.u32)(h);let v=0,m=b[0],T=b[1],A=b[2],N=0;for(const B of[f,u].map(_e.u32)){const F=(0,_e.u32)(B);for(let I=0;I<F.length;I+=2){const{s0:P,s1:$}=_r(l,v,m,T,A);F[I+0]=P,F[I+1]=$,v=++N}}const R={authKey:f,encKey:Ri(u)};return(0,_e.clean)(...p),R}function c(l,u,f){const p=$F(Sw.polyval,!0,u,f,n);for(let A=0;A<12;A++)p[A]^=e[A];p[15]&=127;const h=(0,_e.u32)(p);let b=h[0],v=h[1],m=h[2],T=h[3];return{s0:b,s1:v,s2:m,s3:T}=_r(l,b,v,m,T),h[0]=b,h[1]=v,h[2]=m,h[3]=T,p}function d(l,u,f){let p=(0,_e.copyBytes)(u);p[15]|=128;const h=Zl(l,!0,p,f);return(0,_e.clean)(p),h}return(0,$t.bytes)(t,16,24,32),(0,$t.bytes)(e),i(e.length),n!==void 0&&((0,$t.bytes)(n),r(n.length)),{encrypt(l){(0,$t.bytes)(l),a(l.length);const{encKey:u,authKey:f}=o(),p=c(u,f,l),h=[u,f,p];(0,_e.isAligned32)(l)||h.push(l=(0,_e.copyBytes)(l));const b=new Uint8Array(l.length+16);return b.set(p,l.length),b.set(d(u,p,l)),(0,_e.clean)(...h),b},decrypt(l){(0,$t.bytes)(l),s(l.length);const u=l.subarray(-16),{encKey:f,authKey:p}=o(),h=[f,p];(0,_e.isAligned32)(l)||h.push(l=(0,_e.copyBytes)(l));const b=d(f,u,l.subarray(0,-16)),v=c(f,p,b);if(h.push(v),!(0,_e.equalBytes)(u,v))throw(0,_e.clean)(...h),new Error("invalid polyval tag");return(0,_e.clean)(...h),b}}});const r8={encrypt(t,e){if(e.length>=2**32)throw new Error("plaintext should be less than 4gb");const n=Ri(t);if(e.length===16)BF(n,e);else{const r=(0,_e.u32)(e);let a=r[0],i=r[1];for(let s=0,o=1;s<6;s++)for(let c=2;c<r.length;c+=2,o++){const{s0:d,s1:l,s2:u,s3:f}=_r(n,a,i,r[c],r[c+1]);a=d,i=l^n8(o),r[c]=u,r[c+1]=f}r[0]=a,r[1]=i}n.fill(0)},decrypt(t,e){if(e.length-8>=2**32)throw new Error("ciphertext should be less than 4gb");const n=C5(t),r=e.length/8-1;if(r===1)FF(n,e);else{const a=(0,_e.u32)(e);let i=a[0],s=a[1];for(let o=0,c=6*r;o<6;o++)for(let d=2*r;d>=1;d-=2,c--){s^=n8(c);const{s0:l,s1:u,s2:f,s3:p}=I5(n,i,s,a[d],a[d+1]);i=l,s=u,a[d]=f,a[d+1]=p}a[0]=i,a[1]=s}n.fill(0)}},TI=new Uint8Array(8).fill(166);Bn.aeskw=(0,_e.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,$t.bytes)(e),!e.length||e.length%8!=0)throw new Error("invalid plaintext length");if(e.length===8)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");const n=(0,_e.concatBytes)(TI,e);return r8.encrypt(t,n),n},decrypt(e){if((0,$t.bytes)(e),e.length%8!=0||e.length<24)throw new Error("invalid ciphertext length");const n=(0,_e.copyBytes)(e);if(r8.decrypt(t,n),!(0,_e.equalBytes)(n.subarray(0,8),TI))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}));const xI=2790873510;Bn.aeskwp=(0,_e.wrapCipher)({blockSize:8},t=>({encrypt(e){if((0,$t.bytes)(e),!e.length)throw new Error("invalid plaintext length");const n=8*Math.ceil(e.length/8),r=new Uint8Array(8+n);r.set(e,8);const a=(0,_e.u32)(r);return a[0]=xI,a[1]=n8(e.length),r8.encrypt(t,r),r},decrypt(e){if((0,$t.bytes)(e),e.length<16)throw new Error("invalid ciphertext length");const n=(0,_e.copyBytes)(e),r=(0,_e.u32)(n);r8.decrypt(t,n);const a=n8(r[1])>>>0,i=8*Math.ceil(a/8);if(r[0]!==xI||n.length-8!==i)throw new Error("integrity check failed");for(let s=a;s<i;s++)if(n[8+s]!==0)throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+a)}})),Bn.unsafe={expandKeyLE:Ri,expandKeyDecLE:C5,encrypt:_r,decrypt:I5,encryptBlock:BF,decryptBlock:FF,ctrCounter:DF,ctr32:Zl},Object.defineProperty(h6,"__esModule",{value:!0}),h6.aes256cbc=h6.aes256gcm=void 0;var UF=Bn;h6.aes256gcm=function(t,e,n){return(0,UF.gcm)(t,e,n)};h6.aes256cbc=function(t,e,n){return(0,UF.cbc)(t,e)};var a8={},jF={},Xl={};Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.sigma=void 0,Xl.rotl=function(t,e){return t<<e|t>>>32-e},Xl.createCipher=function(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:a,counterRight:i,rounds:s}=(0,Xa.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return(0,so.number)(a),(0,so.number)(s),(0,so.bool)(i),(0,so.bool)(n),(o,c,d,l,u=0)=>{(0,so.bytes)(o),(0,so.bytes)(c),(0,so.bytes)(d);const f=d.length;if(l===void 0&&(l=new Uint8Array(f)),(0,so.bytes)(l),(0,so.number)(u),u<0||u>=SI)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const p=[];let h,b,v=o.length;if(v===32)p.push(h=(0,Xa.copyBytes)(o)),b=zF;else{if(v!==16||!n)throw new Error(`arx: invalid 32-byte key, got length=${v}`);h=new Uint8Array(32),h.set(o),h.set(o,16),b=Gle,p.push(h)}Dg(c)||p.push(c=(0,Xa.copyBytes)(c));const m=(0,Xa.u32)(h);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,m,(0,Xa.u32)(c.subarray(0,16)),m),c=c.subarray(16)}const T=16-a;if(T!==c.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,p.push(c)}const A=(0,Xa.u32)(c);return function(N,R,B,F,I,P,$,M){const y=I.length,E=new Uint8Array(eb),C=(0,Xa.u32)(E),g=Dg(I)&&Dg(P),x=g?(0,Xa.u32)(I):AI,O=g?(0,Xa.u32)(P):AI;for(let S=0;S<y;$++){if(N(R,B,F,C,$,M),$>=SI)throw new Error("arx: counter overflow");const w=Math.min(eb,y-S);if(g&&w===eb){const _=S/4;if(S%4!=0)throw new Error("arx: invalid block position");for(let k,L=0;L<Yle;L++)k=_+L,O[k]=x[k]^C[L];S+=eb}else{for(let _,k=0;k<w;k++)_=S+k,P[_]=I[_]^E[k];S+=w}}}(t,b,m,A,d,l,u,s),(0,Xa.clean)(...p),l}};const so=or,Xa=Da,HF=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Vle=HF("expand 16-byte k"),Wle=HF("expand 32-byte k"),Gle=(0,Xa.u32)(Vle),zF=(0,Xa.u32)(Wle);function Dg(t){return t.byteOffset%4==0}Xl.sigma=zF.slice();const eb=64,Yle=16,SI=2**32-1,AI=new Uint32Array;var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0}),Xf.poly1305=void 0,Xf.wrapConstructorWithKey=qF;const tb=or,Lf=Da,H0=(t,e)=>255&t[e++]|(255&t[e++])<<8;let Jle=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,Lf.toBytes)(e),(0,tb.bytes)(e,32);const n=H0(e,0),r=H0(e,2),a=H0(e,4),i=H0(e,6),s=H0(e,8),o=H0(e,10),c=H0(e,12),d=H0(e,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|a<<6),this.r[3]=8191&(a>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|c<<5),this.r[8]=8191&(c>>>8|d<<8),this.r[9]=d>>>5&127;for(let l=0;l<8;l++)this.pad[l]=H0(e,16+2*l)}process(e,n,r=!1){const a=r?0:2048,{h:i,r:s}=this,o=s[0],c=s[1],d=s[2],l=s[3],u=s[4],f=s[5],p=s[6],h=s[7],b=s[8],v=s[9],m=H0(e,n+0),T=H0(e,n+2),A=H0(e,n+4),N=H0(e,n+6),R=H0(e,n+8),B=H0(e,n+10),F=H0(e,n+12),I=H0(e,n+14);let P=i[0]+(8191&m),$=i[1]+(8191&(m>>>13|T<<3)),M=i[2]+(8191&(T>>>10|A<<6)),y=i[3]+(8191&(A>>>7|N<<9)),E=i[4]+(8191&(N>>>4|R<<12)),C=i[5]+(R>>>1&8191),g=i[6]+(8191&(R>>>14|B<<2)),x=i[7]+(8191&(B>>>11|F<<5)),O=i[8]+(8191&(F>>>8|I<<8)),S=i[9]+(I>>>5|a),w=0,_=w+P*o+$*(5*v)+M*(5*b)+y*(5*h)+E*(5*p);w=_>>>13,_&=8191,_+=C*(5*f)+g*(5*u)+x*(5*l)+O*(5*d)+S*(5*c),w+=_>>>13,_&=8191;let k=w+P*c+$*o+M*(5*v)+y*(5*b)+E*(5*h);w=k>>>13,k&=8191,k+=C*(5*p)+g*(5*f)+x*(5*u)+O*(5*l)+S*(5*d),w+=k>>>13,k&=8191;let L=w+P*d+$*c+M*o+y*(5*v)+E*(5*b);w=L>>>13,L&=8191,L+=C*(5*h)+g*(5*p)+x*(5*f)+O*(5*u)+S*(5*l),w+=L>>>13,L&=8191;let D=w+P*l+$*d+M*c+y*o+E*(5*v);w=D>>>13,D&=8191,D+=C*(5*b)+g*(5*h)+x*(5*p)+O*(5*f)+S*(5*u),w+=D>>>13,D&=8191;let U=w+P*u+$*l+M*d+y*c+E*o;w=U>>>13,U&=8191,U+=C*(5*v)+g*(5*b)+x*(5*h)+O*(5*p)+S*(5*f),w+=U>>>13,U&=8191;let j=w+P*f+$*u+M*l+y*d+E*c;w=j>>>13,j&=8191,j+=C*o+g*(5*v)+x*(5*b)+O*(5*h)+S*(5*p),w+=j>>>13,j&=8191;let H=w+P*p+$*f+M*u+y*l+E*d;w=H>>>13,H&=8191,H+=C*c+g*o+x*(5*v)+O*(5*b)+S*(5*h),w+=H>>>13,H&=8191;let W=w+P*h+$*p+M*f+y*u+E*l;w=W>>>13,W&=8191,W+=C*d+g*c+x*o+O*(5*v)+S*(5*b),w+=W>>>13,W&=8191;let K=w+P*b+$*h+M*p+y*f+E*u;w=K>>>13,K&=8191,K+=C*l+g*d+x*c+O*o+S*(5*v),w+=K>>>13,K&=8191;let q=w+P*v+$*b+M*h+y*p+E*f;w=q>>>13,q&=8191,q+=C*u+g*l+x*d+O*c+S*o,w+=q>>>13,q&=8191,w=(w<<2)+w|0,w=w+_|0,_=8191&w,w>>>=13,k+=w,i[0]=_,i[1]=k,i[2]=L,i[3]=D,i[4]=U,i[5]=j,i[6]=H,i[7]=W,i[8]=K,i[9]=q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let a=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=a,a=e[o]>>>13,e[o]&=8191;e[0]+=5*a,a=e[0]>>>13,e[0]&=8191,e[1]+=a,a=e[1]>>>13,e[1]&=8191,e[2]+=a,r[0]=e[0]+5,a=r[0]>>>13,r[0]&=8191;for(let o=1;o<10;o++)r[o]=e[o]+a,a=r[o]>>>13,r[o]&=8191;r[9]-=8192;let i=(1^a)-1;for(let o=0;o<10;o++)r[o]&=i;i=~i;for(let o=0;o<10;o++)e[o]=e[o]&i|r[o];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+n[0];e[0]=65535&s;for(let o=1;o<8;o++)s=(e[o]+n[o]|0)+(s>>>16)|0,e[o]=65535&s;(0,Lf.clean)(r)}update(e){(0,tb.exists)(this);const{buffer:n,blockLen:r}=this,a=(e=(0,Lf.toBytes)(e)).length;for(let i=0;i<a;){const s=Math.min(r-this.pos,a-i);if(s!==r)n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0);else for(;r<=a-i;i+=r)this.process(e,i)}return this}destroy(){(0,Lf.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,tb.exists)(this),(0,tb.output)(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:a}=this;if(a){for(n[a++]=1;a<16;a++)n[a]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)e[i++]=r[s]>>>0,e[i++]=r[s]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}};function qF(t){const e=(r,a)=>t(a).update((0,Lf.toBytes)(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}Xf.poly1305=qF(t=>new Jle(t)),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.xchacha20poly1305=t.chacha20poly1305=t._poly1305_aead=t.chacha12=t.chacha8=t.xchacha20=t.chacha20=t.chacha20orig=void 0,t.hchacha=s;const e=Xl,n=or,r=Xf,a=Da;function i(u,f,p,h,b,v=20){let m=u[0],T=u[1],A=u[2],N=u[3],R=f[0],B=f[1],F=f[2],I=f[3],P=f[4],$=f[5],M=f[6],y=f[7],E=b,C=p[0],g=p[1],x=p[2],O=m,S=T,w=A,_=N,k=R,L=B,D=F,U=I,j=P,H=$,W=M,K=y,q=E,V=C,G=g,J=x;for(let Y=0;Y<v;Y+=2)O=O+k|0,q=(0,e.rotl)(q^O,16),j=j+q|0,k=(0,e.rotl)(k^j,12),O=O+k|0,q=(0,e.rotl)(q^O,8),j=j+q|0,k=(0,e.rotl)(k^j,7),S=S+L|0,V=(0,e.rotl)(V^S,16),H=H+V|0,L=(0,e.rotl)(L^H,12),S=S+L|0,V=(0,e.rotl)(V^S,8),H=H+V|0,L=(0,e.rotl)(L^H,7),w=w+D|0,G=(0,e.rotl)(G^w,16),W=W+G|0,D=(0,e.rotl)(D^W,12),w=w+D|0,G=(0,e.rotl)(G^w,8),W=W+G|0,D=(0,e.rotl)(D^W,7),_=_+U|0,J=(0,e.rotl)(J^_,16),K=K+J|0,U=(0,e.rotl)(U^K,12),_=_+U|0,J=(0,e.rotl)(J^_,8),K=K+J|0,U=(0,e.rotl)(U^K,7),O=O+L|0,J=(0,e.rotl)(J^O,16),W=W+J|0,L=(0,e.rotl)(L^W,12),O=O+L|0,J=(0,e.rotl)(J^O,8),W=W+J|0,L=(0,e.rotl)(L^W,7),S=S+D|0,q=(0,e.rotl)(q^S,16),K=K+q|0,D=(0,e.rotl)(D^K,12),S=S+D|0,q=(0,e.rotl)(q^S,8),K=K+q|0,D=(0,e.rotl)(D^K,7),w=w+U|0,V=(0,e.rotl)(V^w,16),j=j+V|0,U=(0,e.rotl)(U^j,12),w=w+U|0,V=(0,e.rotl)(V^w,8),j=j+V|0,U=(0,e.rotl)(U^j,7),_=_+k|0,G=(0,e.rotl)(G^_,16),H=H+G|0,k=(0,e.rotl)(k^H,12),_=_+k|0,G=(0,e.rotl)(G^_,8),H=H+G|0,k=(0,e.rotl)(k^H,7);let z=0;h[z++]=m+O|0,h[z++]=T+S|0,h[z++]=A+w|0,h[z++]=N+_|0,h[z++]=R+k|0,h[z++]=B+L|0,h[z++]=F+D|0,h[z++]=I+U|0,h[z++]=P+j|0,h[z++]=$+H|0,h[z++]=M+W|0,h[z++]=y+K|0,h[z++]=E+q|0,h[z++]=C+V|0,h[z++]=g+G|0,h[z++]=x+J|0}function s(u,f,p,h){let b=u[0],v=u[1],m=u[2],T=u[3],A=f[0],N=f[1],R=f[2],B=f[3],F=f[4],I=f[5],P=f[6],$=f[7],M=p[0],y=p[1],E=p[2],C=p[3];for(let x=0;x<20;x+=2)b=b+A|0,M=(0,e.rotl)(M^b,16),F=F+M|0,A=(0,e.rotl)(A^F,12),b=b+A|0,M=(0,e.rotl)(M^b,8),F=F+M|0,A=(0,e.rotl)(A^F,7),v=v+N|0,y=(0,e.rotl)(y^v,16),I=I+y|0,N=(0,e.rotl)(N^I,12),v=v+N|0,y=(0,e.rotl)(y^v,8),I=I+y|0,N=(0,e.rotl)(N^I,7),m=m+R|0,E=(0,e.rotl)(E^m,16),P=P+E|0,R=(0,e.rotl)(R^P,12),m=m+R|0,E=(0,e.rotl)(E^m,8),P=P+E|0,R=(0,e.rotl)(R^P,7),T=T+B|0,C=(0,e.rotl)(C^T,16),$=$+C|0,B=(0,e.rotl)(B^$,12),T=T+B|0,C=(0,e.rotl)(C^T,8),$=$+C|0,B=(0,e.rotl)(B^$,7),b=b+N|0,C=(0,e.rotl)(C^b,16),P=P+C|0,N=(0,e.rotl)(N^P,12),b=b+N|0,C=(0,e.rotl)(C^b,8),P=P+C|0,N=(0,e.rotl)(N^P,7),v=v+R|0,M=(0,e.rotl)(M^v,16),$=$+M|0,R=(0,e.rotl)(R^$,12),v=v+R|0,M=(0,e.rotl)(M^v,8),$=$+M|0,R=(0,e.rotl)(R^$,7),m=m+B|0,y=(0,e.rotl)(y^m,16),F=F+y|0,B=(0,e.rotl)(B^F,12),m=m+B|0,y=(0,e.rotl)(y^m,8),F=F+y|0,B=(0,e.rotl)(B^F,7),T=T+A|0,E=(0,e.rotl)(E^T,16),I=I+E|0,A=(0,e.rotl)(A^I,12),T=T+A|0,E=(0,e.rotl)(E^T,8),I=I+E|0,A=(0,e.rotl)(A^I,7);let g=0;h[g++]=b,h[g++]=v,h[g++]=m,h[g++]=T,h[g++]=M,h[g++]=y,h[g++]=E,h[g++]=C}t.chacha20orig=(0,e.createCipher)(i,{counterRight:!1,counterLength:8,allowShortKeys:!0}),t.chacha20=(0,e.createCipher)(i,{counterRight:!1,counterLength:4,allowShortKeys:!1}),t.xchacha20=(0,e.createCipher)(i,{counterRight:!1,counterLength:8,extendNonceFn:s,allowShortKeys:!1}),t.chacha8=(0,e.createCipher)(i,{counterRight:!1,counterLength:4,rounds:8}),t.chacha12=(0,e.createCipher)(i,{counterRight:!1,counterLength:4,rounds:12});const o=new Uint8Array(16),c=(u,f)=>{u.update(f);const p=f.length%16;p&&u.update(o.subarray(p))},d=new Uint8Array(32);function l(u,f,p,h,b){const v=u(f,p,d),m=r.poly1305.create(v);b&&c(m,b),c(m,h);const T=new Uint8Array(16),A=(0,a.createView)(T);(0,a.setBigUint64)(A,0,BigInt(b?b.length:0),!0),(0,a.setBigUint64)(A,8,BigInt(h.length),!0),m.update(T);const N=m.digest();return(0,a.clean)(v,T),N}t._poly1305_aead=u=>(f,p,h)=>((0,n.bytes)(f,32),(0,n.bytes)(p),{encrypt(v,m){const T=v.length,A=T+16;m?(0,n.bytes)(m,A):m=new Uint8Array(A),u(f,p,v,m,1);const N=l(u,f,p,m.subarray(0,-16),h);return m.set(N,T),(0,a.clean)(N),m},decrypt(v,m){const T=v.length,A=T-16;if(T<16)throw new Error("encrypted data must be at least 16 bytes");m?(0,n.bytes)(m,A):m=new Uint8Array(A);const N=v.subarray(0,-16),R=v.subarray(-16),B=l(u,f,p,N,h);if(!(0,a.equalBytes)(R,B))throw new Error("invalid tag");return u(f,p,N,m,1),(0,a.clean)(B),m}}),t.chacha20poly1305=(0,a.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,t._poly1305_aead)(t.chacha20)),t.xchacha20poly1305=(0,a.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,t._poly1305_aead)(t.xchacha20))}(jF),Object.defineProperty(a8,"__esModule",{value:!0}),a8.xchacha20=void 0;var Tl,CI,pf,Zle=jF;a8.xchacha20=function(t,e,n){return(0,Zle.xchacha20poly1305)(t,e,n)},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.aesDecrypt=t.aesEncrypt=t.symDecrypt=t.symEncrypt=void 0;var e=Da,n=$_,r=h6,a=a8,i=S5,s=g0;t.symEncrypt=function(l,u,f){return o(c,l,u,f)};function o(l,u,f,p){var h=(0,i.symmetricAlgorithm)();if(h==="aes-256-gcm")return l(r.aes256gcm,u,f,(0,i.symmetricNonceLength)(),s.AEAD_TAG_LENGTH,p);if(h==="xchacha20")return l(a.xchacha20,u,f,s.XCHACHA20_NONCE_LENGTH,s.AEAD_TAG_LENGTH,p);if(h==="aes-256-cbc")return l(r.aes256cbc,u,f,16,0);throw new Error("Not implemented")}function c(l,u,f,p,h,b){var v=(0,n.randomBytes)(p),m=l(u,v,b).encrypt(f);if(h===0)return(0,e.concatBytes)(v,m);var T=m.length-h,A=m.subarray(0,T),N=m.subarray(T);return(0,e.concatBytes)(v,N,A)}function d(l,u,f,p,h,b){var v=f.subarray(0,p),m=l(u,Uint8Array.from(v),b),T=f.subarray(p);if(h===0)return m.decrypt(T);var A=T.subarray(0,h),N=T.subarray(h);return m.decrypt((0,e.concatBytes)(N,A))}t.symDecrypt=function(l,u,f){return o(d,l,u,f)},t.aesEncrypt=t.symEncrypt,t.aesDecrypt=t.symDecrypt}(mI),Tl=o3,CI=di&&di.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var a=Object.getOwnPropertyDescriptor(e,n);a&&!("get"in a?!e.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,a)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),pf=di&&di.__exportStar||function(t,e){for(var n in t)n==="default"||Object.prototype.hasOwnProperty.call(e,n)||CI(e,t,n)},Object.defineProperty(Tl,"__esModule",{value:!0}),pf(VB,Tl),pf(CF,Tl),pf(Tw,Tl),pf(mI,Tl);var O5={};Object.defineProperty(O5,"__esModule",{value:!0}),O5.PublicKey=void 0;var II=Da,nb=o3,Xle=function(){function t(e){this.data=(0,nb.convertPublicKeyFormat)(e,!0)}return t.fromHex=function(e){return new t((0,nb.hexToPublicKey)(e))},Object.defineProperty(t.prototype,"uncompressed",{get:function(){return ye.from((0,nb.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"compressed",{get:function(){return ye.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(e){return e===void 0&&(e=!0),(0,II.bytesToHex)(e?this.data:this.uncompressed)},t.prototype.decapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.data:this.uncompressed,a=e.multiply(this,n);return(0,nb.getSharedKey)(r,a)},t.prototype.equals=function(e){return(0,II.equalBytes)(this.data,e.data)},t}();O5.PublicKey=Xle,Object.defineProperty(X2,"__esModule",{value:!0}),X2.PrivateKey=void 0;var OI=Da,xl=o3,Qle=O5,e6e=function(){function t(e){if(e===void 0)this.data=(0,xl.getValidSecret)();else{if(!(0,xl.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new Qle.PublicKey((0,xl.getPublicKey)(this.data))}return t.fromHex=function(e){return new t((0,xl.decodeHex)(e))},Object.defineProperty(t.prototype,"secret",{get:function(){return ye.from(this.data)},enumerable:!1,configurable:!0}),t.prototype.toHex=function(){return(0,OI.bytesToHex)(this.data)},t.prototype.encapsulate=function(e,n){n===void 0&&(n=!1);var r=n?this.publicKey.compressed:this.publicKey.uncompressed,a=this.multiply(e,n);return(0,xl.getSharedKey)(r,a)},t.prototype.multiply=function(e,n){return n===void 0&&(n=!1),(0,xl.getSharedPoint)(this.data,e.compressed,n)},t.prototype.equals=function(e){return(0,OI.equalBytes)(this.data,e.data)},t}();X2.PrivateKey=e6e,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.PrivateKey=void 0;var e=X2;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return e.PrivateKey}});var n=O5;Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(vg),function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.PublicKey=t.PrivateKey=t.ECIES_CONFIG=void 0,t.encrypt=function(o,c){var d=new r.PrivateKey,l=o instanceof Uint8Array?new r.PublicKey(o):r.PublicKey.fromHex(o),u=d.encapsulate(l,(0,n.isHkdfKeyCompressed)()),f=(0,n.isEphemeralKeyCompressed)()?d.publicKey.compressed:d.publicKey.uncompressed,p=(0,a.symEncrypt)(u,c);return ye.from((0,e.concatBytes)(f,p))},t.decrypt=function(o,c){var d=o instanceof Uint8Array?new r.PrivateKey(o):r.PrivateKey.fromHex(o),l=(0,n.ephemeralKeySize)(),u=new r.PublicKey(c.subarray(0,l)),f=c.subarray(l),p=u.decapsulate(d,(0,n.isHkdfKeyCompressed)());return ye.from((0,a.symDecrypt)(p,f))};var e=Da,n=S5,r=vg,a=o3,i=S5;Object.defineProperty(t,"ECIES_CONFIG",{enumerable:!0,get:function(){return i.ECIES_CONFIG}});var s=vg;Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return s.PrivateKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return s.PublicKey}}),t.utils={aesEncrypt:a.aesEncrypt,aesDecrypt:a.aesDecrypt,symEncrypt:a.symEncrypt,symDecrypt:a.symDecrypt,decodeHex:a.decodeHex,getValidSecret:a.getValidSecret,remove0x:a.remove0x}}(Hl);const KF=Ir("KeyExchange:Layer"),VF=Ir("SocketService:Layer"),WF=Ir("Ecies:Layer"),GF=Ir("RemoteCommunication:Layer");KF.color="##95c44e",VF.color="#f638d7",WF.color="#465b9c",GF.color="#47a2be";const de={KeyExchange:KF,SocketService:VF,Ecies:WF,RemoteCommunication:GF};let hf,rb=[],$g=[];const Go=(t,e)=>be(void 0,void 0,void 0,function*(){hf=e,$g.push(t),function(n){return be(this,void 0,void 0,function*(){if(!hf||!n)return;(function(){const s=$g;$g=rb,rb=s})();const r=hf.endsWith("/")?`${hf}evt`:`${hf}/evt`,a=Object.assign({},n);if(delete a.params,n.params)for(const[s,o]of Object.entries(n.params))a[s]=o;const i=JSON.stringify(a);de.RemoteCommunication(`[sendBufferedEvents] Sending ${rb.length} analytics events to ${r}`);try{const s=yield wB(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:i}),o=yield s.text();de.RemoteCommunication(`[sendBufferedEvents] Response: ${o}`),rb.length=0}catch{}})}(t).catch(()=>{})});let Lg=class{constructor(e){this.enabled=!0,e!=null&&e.debug&&Ir.enable("Ecies:Layer"),this.ecies=e!=null&&e.privateKey?Hl.PrivateKey.fromHex(e.privateKey):new Hl.PrivateKey,de.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),de.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),de.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new Hl.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,n){let r=e;if(this.enabled)try{de.Ecies("[ECIES: encrypt()] using otherPublicKey",n);const a=ye.from(e),i=Hl.encrypt(n,a);r=ye.from(i).toString("base64")}catch(a){throw de.Ecies("[ECIES: encrypt()] error encrypt:",a),de.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),de.Ecies("[ECIES: encrypt()] data: ",e),de.Ecies("[ECIES: encrypt()] otherkey: ",n),a}return r}decrypt(e){let n=e;if(this.enabled)try{de.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());const r=ye.from(e.toString(),"base64");n=Hl.decrypt(this.ecies.toHex(),r).toString()}catch(r){throw de.Ecies("[ECIES: decrypt()] error decrypt",r),de.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),de.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return n}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){de.Ecies("[ECIES: toString()]",this.getKeyInfo())}};var h1={name:"@metamask/sdk-communication-layer",version:"0.33.0",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk.git",directory:"packages/sdk-communication-layer"},main:"dist/node/cjs/metamask-sdk-communication-layer.js",unpkg:"dist/browser/umd/metamask-sdk-communication-layer.js",module:"dist/node/es/metamask-sdk-communication-layer.js",browser:"dist/browser/es/metamask-sdk-communication-layer.js","react-native":"dist/react-native/es/metamask-sdk-communication-layer.js",types:"dist/types/src/index.d.ts",files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types","build:clean":"yarn clean && yarn build",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs",dev:'concurrently "tsc --watch" "rollup -c --bundleConfigAsCjs -w"',"build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",size:"size-limit",clean:"rimraf ./dist",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk-communication-layer","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore","publish:preview":"yarn npm publish --tag preview",prepack:"../../scripts/prepack.sh",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:coverage":"jest --coverage","test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":"jest",watch:"rollup -c --bundleConfigAsCjs -w"},dependencies:{"@metamask/sdk-analytics":"workspace:*",bufferutil:"^4.0.8","date-fns":"^2.29.3",debug:"^4.3.4","utf-8-validate":"^5.0.2",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@rollup/plugin-commonjs":"^25.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.4","@size-limit/preset-big-lib":"^11.0.2","@types/jest":"^29.2.4","@types/node":"^20.1.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0",concurrently:"^9.1.2","cross-fetch":"^4.0.0",eciesjs:"^0.4.11",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0",eventemitter2:"^6.4.9",jest:"^29.3.1",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^4.26.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-peer-deps-external":"^2.2.4","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.1.6","socket.io-client":"^4.5.1","stream-browserify":"^3.0.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^5.6.3"},peerDependencies:{"cross-fetch":"^4.0.0",eciesjs:"*",eventemitter2:"^6.4.9","readable-stream":"^3.6.2","socket.io-client":"^4.5.1"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,canvas:!0,"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,bufferutil:!1,"utf-8-validate":!1}}};const H6="https://metamask-sdk.api.cx.metamask.io/",t6e=["websocket"],z6=6048e5,n6e=3e3,ir={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_SWITCHETHEREUMCHAIN:"wallet_switchEthereumChain",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},r6e=[ir.METAMASK_CONNECTSIGN,ir.METAMASK_CONNECTWITH,ir.METAMASK_OPEN,ir.METAMASK_BATCH,ir.PERSONAL_SIGN,ir.WALLET_REQUESTPERMISSIONS,ir.WALLET_REVOKEPERMISSIONS,ir.WALLET_WATCHASSET,ir.ETH_SENDTRANSACTION,ir.ETH_SIGNTYPEDDATA,ir.ETH_SIGNTYPEDDATA_V3,ir.ETH_SIGNTYPEDDATA_V4,ir.ETH_SIGNTRANSACTION,ir.ETH_SIGN,ir.PERSONAL_EC_RECOVER];function Vp(t){return r6e.includes(t)}function YF(t){const{context:e}=t;de.RemoteCommunication(`[RemoteCommunication: clean()] context=${e}`),t.channelConfig=void 0,t.ready=!1,t.originatorConnectStarted=!1}var Y0,xe,i8,Zt,Nn,Wn,Sl;(Sl=Y0||(Y0={})).DISCONNECTED="disconnected",Sl.WAITING="waiting",Sl.TIMEOUT="timeout",Sl.LINKED="linked",Sl.PAUSED="paused",Sl.TERMINATED="terminated",function(t){t.KEY_INFO="key_info",t.SERVICE_STATUS="service_status",t.PROVIDER_UPDATE="provider_update",t.RPC_UPDATE="rpc_update",t.KEYS_EXCHANGED="keys_exchanged",t.JOIN_CHANNEL="join_channel",t.PUBLIC_KEY="public_key",t.CHANNEL_CREATED="channel_created",t.CLIENTS_CONNECTED="clients_connected",t.CLIENTS_DISCONNECTED="clients_disconnected",t.CLIENTS_WAITING="clients_waiting",t.CLIENTS_READY="clients_ready",t.REJECTED="rejected",t.WALLET_INIT="wallet_init",t.CHANNEL_PERSISTENCE="channel_persistence",t.CONFIG="config",t.MESSAGE_ACK="ack",t.SOCKET_DISCONNECTED="socket_disconnected",t.SOCKET_RECONNECT="socket_reconnect",t.OTP="otp",t.SDK_RPC_CALL="sdk_rpc_call",t.AUTHORIZED="authorized",t.CONNECTION_STATUS="connection_status",t.MESSAGE="message",t.TERMINATE="terminate"}(xe||(xe={})),(i8||(i8={})).KEY_EXCHANGE="key_exchange",function(t){t.KEY_HANDSHAKE_START="key_handshake_start",t.KEY_HANDSHAKE_CHECK="key_handshake_check",t.KEY_HANDSHAKE_SYN="key_handshake_SYN",t.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",t.KEY_HANDSHAKE_ACK="key_handshake_ACK",t.KEY_HANDSHAKE_WALLET="key_handshake_wallet",t.KEY_HANDSHAKE_NONE="none"}(Zt||(Zt={}));let a6e=class extends a3.EventEmitter2{constructor({communicationLayer:e,otherPublicKey:n,context:r,ecies:a,logging:i}){super(),this.keysExchanged=!1,this.step=Zt.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=e,a!=null&&a.privateKey&&n&&(de.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,a),this.keysExchanged=!0),this.myECIES=new Lg(Object.assign(Object.assign({},a),{debug:i==null?void 0:i.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=(i==null?void 0:i.keyExchangeLayer)===!0,n&&this.setOtherPublicKey(n),this.communicationLayer.on(i8.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){const{relayPersistence:n}=this.communicationLayer.remote.state;if(de.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${n}`,e),n)return void de.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");const{message:r}=e;this.keysExchanged&&de.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(xe.KEY_INFO,r.type),r.type===Zt.KEY_HANDSHAKE_SYN?(this.checkStep([Zt.KEY_HANDSHAKE_NONE,Zt.KEY_HANDSHAKE_ACK]),de.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",r),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Zt.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(a=>{de.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",a)}),this.setStep(Zt.KEY_HANDSHAKE_ACK)):r.type===Zt.KEY_HANDSHAKE_SYNACK?(this.checkStep([Zt.KEY_HANDSHAKE_SYNACK,Zt.KEY_HANDSHAKE_ACK,Zt.KEY_HANDSHAKE_NONE]),de.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),r.pubkey&&this.setOtherPublicKey(r.pubkey),this.communicationLayer.sendMessage({type:Zt.KEY_HANDSHAKE_ACK}).catch(a=>{de.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",a)}),this.keysExchanged=!0,this.setStep(Zt.KEY_HANDSHAKE_ACK),this.emit(xe.KEYS_EXCHANGED)):r.type===Zt.KEY_HANDSHAKE_ACK&&(de.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Zt.KEY_HANDSHAKE_ACK,Zt.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Zt.KEY_HANDSHAKE_ACK),this.emit(xe.KEYS_EXCHANGED))}resetKeys(e){this.clean(),this.myECIES=new Lg(e)}clean(){de.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Zt.KEY_HANDSHAKE_NONE),this.emit(xe.KEY_INFO,this.step),this.keysExchanged=!1}start({isOriginator:e,force:n}){const{relayPersistence:r,protocolVersion:a}=this.communicationLayer.remote.state,i=a>=2;r?de.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(de.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${a} isOriginator=${e} step=${this.step} force=${n} relayPersistence=${r} keysExchanged=${this.keysExchanged}`),e?!(this.keysExchanged||this.step!==Zt.KEY_HANDSHAKE_NONE&&this.step!==Zt.KEY_HANDSHAKE_SYNACK)||n?(de.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Zt.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Zt.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(s=>{de.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",s)})):de.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&n!==!0?de.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):i?this.communicationLayer.sendMessage({type:Zt.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(s=>{de.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",s)}):(this.communicationLayer.sendMessage({type:Zt.KEY_HANDSHAKE_START}).catch(s=>{de.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",s)}),this.clean()))}setStep(e){this.step=e,this.emit(xe.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence({localKey:e,otherKey:n}){this.otherPublicKey=n,this.myECIES=new Lg({privateKey:e,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){de.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){const e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}};(function(t){t.TERMINATE="terminate",t.ANSWER="answer",t.OFFER="offer",t.CANDIDATE="candidate",t.JSONRPC="jsonrpc",t.WALLET_INFO="wallet_info",t.WALLET_INIT="wallet_init",t.ORIGINATOR_INFO="originator_info",t.PAUSE="pause",t.OTP="otp",t.AUTHORIZED="authorized",t.PING="ping",t.READY="ready"})(Nn||(Nn={})),function(t){t.REQUEST="sdk_connect_request_started",t.REQUEST_MOBILE="sdk_connect_request_started_mobile",t.RECONNECT="sdk_reconnect_request_started",t.CONNECTED="sdk_connection_established",t.CONNECTED_MOBILE="sdk_connection_established_mobile",t.AUTHORIZED="sdk_connection_authorized",t.REJECTED="sdk_connection_rejected",t.TERMINATED="sdk_connection_terminated",t.DISCONNECTED="sdk_disconnected",t.SDK_USE_EXTENSION="sdk_use_extension",t.SDK_RPC_REQUEST="sdk_rpc_request",t.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",t.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",t.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",t.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(Wn||(Wn={}));const n2=(t,e,n)=>be(void 0,void 0,void 0,function*(){var r,a,i,s,o,c;const{remote:d,state:l}=t,{channelId:u,isOriginator:f}=l;if(e==="error_terminated")return de.SocketService(`handleJoinChannelResults: Channel ${u} terminated`),void t.emit(xe.TERMINATE);if(!n)return void de.SocketService(`handleJoinChannelResults: No result for channel ${u}`);const{persistence:p,walletKey:h,rejected:b}=n;if(de.SocketService(`handleJoinChannelResults: Channel ${u} persistence=${p} walletKey=${h} rejected=${b}`),b)return de.SocketService(`handleJoinChannelResults: Channel ${u} rejected`),yield t.remote.disconnect({terminate:!0}),t.remote.emit(xe.REJECTED,{channelId:u}),void t.remote.emitServiceStatusEvent();if(h&&!(!((r=d.state.channelConfig)===null||r===void 0)&&r.otherKey)){t.getKeyExchange().setOtherPublicKey(h),(a=t.state.keyExchange)===null||a===void 0||a.setKeysExchanged(!0),d.state.ready=!0,d.state.authorized=!0,d.emit(xe.AUTHORIZED);const{communicationLayer:v,storageManager:m}=d.state,T=Object.assign(Object.assign({},d.state.channelConfig),{channelId:(i=d.state.channelId)!==null&&i!==void 0?i:"",validUntil:Date.now()+z6,localKey:v==null?void 0:v.getKeyInfo().ecies.private,otherKey:h});t.sendMessage({type:Zt.KEY_HANDSHAKE_ACK}).catch(A=>{}),(s=t.state.socket)===null||s===void 0||s.emit(Nn.PING,{id:u,clientType:f?"dapp":"wallet",context:"on_channel_reconnect",message:""}),yield m==null?void 0:m.persistChannelConfig(T),d.emitServiceStatusEvent(),d.setConnectionStatus(Y0.LINKED)}p&&(t.emit(xe.CHANNEL_PERSISTENCE),(o=t.state.keyExchange)===null||o===void 0||o.setKeysExchanged(!0),d.state.ready=!0,d.state.authorized=!0,d.emit(xe.AUTHORIZED),Go(Object.assign(Object.assign({id:u??"",event:f?Wn.CONNECTED:Wn.CONNECTED_MOBILE},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:h1.version,walletVersion:(c=t.remote.state.walletInfo)===null||c===void 0?void 0:c.version}),l.communicationServerUrl).catch(v=>{}))}),y6=t=>new Promise(e=>{setTimeout(e,t)}),MI=(t,e,...n)=>be(void 0,[t,e,...n],void 0,function*(r,a,i=200){let s;const o=Date.now();let c=!1;for(;!c;){if(c=Date.now()-o>3e5,s=a[r],s.elapsedTime!==void 0)return s;yield y6(i)}throw new Error(`RPC ${r} timed out`)}),Cw=t=>be(void 0,void 0,void 0,function*(){const{state:e}=t,{socket:n,channelId:r,context:a,isOriginator:i,isReconnecting:s}=e;if(s)return de.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",t),!1;if(!n)return de.SocketService("[SocketService: reconnectSocket()] socket is not defined",t),!1;if(!r)return!1;const{connected:o}=n;e.isReconnecting=!0,e.reconnectionAttempts=0,de.SocketService(`[SocketService: reconnectSocket()] connected=${o} trying to reconnect after socketio disconnection`,t);try{for(;3>e.reconnectionAttempts;){if(de.SocketService(`[SocketService: reconnectSocket()] Attempt ${e.reconnectionAttempts+1} of 3`,t),yield y6(200),n.connected)return de.SocketService("Socket already connected --- ping to retrieve messages"),n.emit(Nn.PING,{id:r,clientType:i?"dapp":"wallet",context:"on_channel_config",message:""}),!0;e.resumed=!0,n.connect(),t.emit(xe.SOCKET_RECONNECT);try{if(yield new Promise((c,d)=>{n.emit(xe.JOIN_CHANNEL,{channelId:r,context:`${a}connect_again`,clientType:i?"dapp":"wallet"},(l,u)=>be(void 0,void 0,void 0,function*(){try{yield n2(t,l,u),c()}catch(f){d(f)}}))}),yield y6(100),n.connected)return de.SocketService(`Reconnection successful on attempt ${e.reconnectionAttempts+1}`),!0}catch(c){de.SocketService(`Error during reconnection attempt ${e.reconnectionAttempts+1}:`,c)}e.reconnectionAttempts+=1,3>e.reconnectionAttempts&&(yield y6(200))}return de.SocketService("Failed to reconnect after 3 attempts"),!1}finally{e.isReconnecting=!1,e.reconnectionAttempts=0}});function JF(t,e){return be(this,void 0,void 0,function*(){var n;const r=(n=t.state.keyExchange)===null||n===void 0?void 0:n.encryptMessage(JSON.stringify(e)),a={id:t.state.channelId,context:t.state.context,clientType:t.state.isOriginator?"dapp":"wallet",message:r,plaintext:t.state.hasPlaintext?JSON.stringify(e):void 0};return de.SocketService(`[SocketService: encryptAndSendMessage()] context=${t.state.context}`,a),e.type===Nn.TERMINATE&&(t.state.manualDisconnect=!0),new Promise((i,s)=>{var o;(o=t.state.socket)===null||o===void 0||o.emit(xe.MESSAGE,a,(c,d)=>{var l;c&&(de.SocketService(`[SocketService: encryptAndSendMessage()] error=${c}`),s(c)),de.SocketService("[encryptAndSendMessage] response",d),i((l=d==null?void 0:d.success)!==null&&l!==void 0&&l)})})})}var Ql;(function(t){t.RPC_CHECK="rpcCheck",t.SKIPPED_RPC="skippedRpc"})(Ql||(Ql={}));const ZF=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(t=>t.toLowerCase()),i6e=[{event:xe.CLIENTS_CONNECTED,handler:function(t,e){return n=>be(this,void 0,void 0,function*(){var r,a,i,s,o,c,d,l,u,f,p;const h=(a=(r=t.remote.state.channelConfig)===null||r===void 0?void 0:r.relayPersistence)!==null&&a!==void 0&&a;if(de.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected-${e}' relayPersistence=${h} resumed=${t.state.resumed}  clientsPaused=${t.state.clientsPaused} keysExchanged=${(i=t.state.keyExchange)===null||i===void 0?void 0:i.areKeysExchanged()} isOriginator=${t.state.isOriginator}`),t.emit(xe.CLIENTS_CONNECTED,{isOriginator:t.state.isOriginator,keysExchanged:(s=t.state.keyExchange)===null||s===void 0?void 0:s.areKeysExchanged(),context:t.state.context}),t.state.resumed)t.state.isOriginator||(de.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} 'clients_connected' / keysExchanged=${(o=t.state.keyExchange)===null||o===void 0?void 0:o.areKeysExchanged()} -- backward compatibility`),(c=t.state.keyExchange)===null||c===void 0||c.start({isOriginator:(d=t.state.isOriginator)!==null&&d!==void 0&&d})),t.state.resumed=!1;else if(t.state.clientsPaused)de.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause");else if(!t.state.isOriginator){const b=!h;de.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(l=t.state.keyExchange)===null||l===void 0?void 0:l.areKeysExchanged()} -- force=${b} -- backward compatibility`),de.SocketService(`[SocketService: handleClientsConnected()] context=${t.state.context} on 'clients_connected' / keysExchanged=${(u=t.state.keyExchange)===null||u===void 0?void 0:u.areKeysExchanged()} -- force=${b} -- backward compatibility`),(f=t.state.keyExchange)===null||f===void 0||f.start({isOriginator:(p=t.state.isOriginator)!==null&&p!==void 0&&p,force:b})}t.state.clientsConnected=!0,t.state.clientsPaused=!1})}},{event:xe.CHANNEL_CREATED,handler:function(t,e){return n=>{de.SocketService(`[SocketService: handleChannelCreated()] context=${t.state.context} on 'channel_created-${e}'`,n),t.emit(xe.CHANNEL_CREATED,n)}}},{event:xe.CLIENTS_DISCONNECTED,handler:function(t,e){return()=>{var n;t.state.clientsConnected=!1,de.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}'`),t.remote.state.relayPersistence?de.SocketService(`[SocketService: handlesClientsDisconnected()] context=${t.state.context} on 'clients_disconnected-${e}' - relayPersistence enabled, skipping key exchange cleanup.`):(t.state.isOriginator&&!t.state.clientsPaused&&((n=t.state.keyExchange)===null||n===void 0||n.clean()),t.emit(xe.CLIENTS_DISCONNECTED,e))}}},{event:xe.CONFIG,handler:function(t,e){return n=>be(this,void 0,void 0,function*(){var r,a,i;de.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${e}'`,n);const{persistence:s,walletKey:o}=n;t.state.isOriginator&&t.remote.state.channelConfig?(n.walletKey&&!t.remote.state.channelConfig.otherKey&&(de.SocketService(`Setting wallet key ${o}`),t.remote.state.channelConfig.otherKey=o,t.getKeyExchange().setOtherPublicKey(n.walletKey),(r=t.state.keyExchange)===null||r===void 0||r.setKeysExchanged(!0),yield t.remote.sendMessage({type:Zt.KEY_HANDSHAKE_ACK}),yield t.remote.sendMessage({type:Nn.PING}),yield(a=t.remote.state.storageManager)===null||a===void 0?void 0:a.persistChannelConfig(t.remote.state.channelConfig)),s!==!0||t.remote.state.channelConfig.relayPersistence||(de.SocketService(`Setting relay persistence ${s}`),t.remote.state.channelConfig.relayPersistence=s,t.remote.state.relayPersistence=!0,t.remote.emit(xe.CHANNEL_PERSISTENCE),t.remote.state.authorized=!0,t.remote.state.ready=!0,t.remote.emit(xe.AUTHORIZED),yield(i=t.remote.state.storageManager)===null||i===void 0?void 0:i.persistChannelConfig(t.remote.state.channelConfig))):t.state.isOriginator||n.persistence&&(t.remote.state.relayPersistence=!0,t.remote.emit(xe.CHANNEL_PERSISTENCE))})}},{event:xe.MESSAGE,handler:function(t,e){return n=>{var r,a,i,s,o,c,d,l,u,f,p,h,b,v,m,T,A,N;const{ackId:R,message:B,error:F}=n,I=(r=t.remote.state.relayPersistence)!==null&&r!==void 0&&r;if(de.SocketService(`[SocketService handleMessage()]  relayPersistence=${I}  context=${t.state.context} on 'message' ${e} keysExchanged=${(a=t.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()}`,n),F)throw de.SocketService(`
      [SocketService handleMessage()] context=${t.state.context}::on 'message' error=${F}`),new Error(F);const P=typeof B=="string";if(!P&&(B==null?void 0:B.type)===Zt.KEY_HANDSHAKE_START)return I?void 0:(de.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received HANDSHAKE_START isOriginator=${t.state.isOriginator}`,B),void((i=t.state.keyExchange)===null||i===void 0||i.start({isOriginator:(s=t.state.isOriginator)!==null&&s!==void 0&&s,force:!0})));if(!P&&(!((o=B==null?void 0:B.type)===null||o===void 0)&&o.startsWith("key_handshake")))return I?void 0:(de.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' emit KEY_EXCHANGE`,B),void t.emit(i8.KEY_EXCHANGE,{message:B,context:t.state.context}));if(P&&!(!((c=t.state.keyExchange)===null||c===void 0)&&c.areKeysExchanged())){let y=!1;try{de.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' trying to decrypt message`),(d=t.state.keyExchange)===null||d===void 0||d.decryptMessage(B),y=!0}catch(E){de.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' error`,E)}if(!y)return t.state.isOriginator?(u=t.state.keyExchange)===null||u===void 0||u.start({isOriginator:(f=t.state.isOriginator)!==null&&f!==void 0&&f}):t.sendMessage({type:Zt.KEY_HANDSHAKE_START}).catch(E=>{}),void de.SocketService(`Message ignored because invalid key exchange status. step=${(p=t.state.keyExchange)===null||p===void 0?void 0:p.getKeyInfo().step}`,(h=t.state.keyExchange)===null||h===void 0?void 0:h.getKeyInfo(),B);de.SocketService("Invalid key exchange status detected --- updating it."),(l=t.state.keyExchange)===null||l===void 0||l.setKeysExchanged(!0)}else if(!P&&(B!=null&&B.type))return void t.emit(xe.MESSAGE,B);if(!P)return void t.emit(xe.MESSAGE,B);const $=(b=t.state.keyExchange)===null||b===void 0?void 0:b.decryptMessage(B),M=JSON.parse($??"{}");if(R&&(R==null?void 0:R.length)>0&&(de.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' ackid=${R} channelId=${e}`),(v=t.state.socket)===null||v===void 0||v.emit(xe.MESSAGE_ACK,{ackId:R,channelId:e,clientType:t.state.isOriginator?"dapp":"wallet"})),t.state.clientsPaused=(M==null?void 0:M.type)===Nn.PAUSE,t.state.isOriginator&&M.data){const y=M.data,E=t.state.rpcMethodTracker[y.id];if(E){const C=Date.now()-E.timestamp;de.SocketService(`[SocketService handleMessage()] context=${t.state.context}::on 'message' received answer for id=${y.id} method=${E.method} responseTime=${C}`,M),t.remote.state.analytics&&ZF.includes(E.method.toLowerCase())&&Go(Object.assign(Object.assign({id:(m=t.remote.state.channelId)!==null&&m!==void 0?m:"",event:Wn.SDK_RPC_REQUEST_DONE,sdkVersion:t.remote.state.sdkVersion,commLayerVersion:h1.version},t.remote.state.originatorInfo),{walletVersion:(T=t.remote.state.walletInfo)===null||T===void 0?void 0:T.version,params:{method:E.method,from:"mobile"}}),t.remote.state.communicationServerUrl).catch(x=>{}),Vp(E.method)&&zn.analytics.track(y.error?y.error.code===4001?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:E.method});const g=Object.assign(Object.assign({},E),{result:y.result,error:y.error?{code:(A=y.error)===null||A===void 0?void 0:A.code,message:(N=y.error)===null||N===void 0?void 0:N.message}:void 0,elapsedTime:C});t.state.rpcMethodTracker[y.id]=g,t.emit(xe.RPC_UPDATE,g)}}t.emit(xe.MESSAGE,{message:M})}}},{event:xe.REJECTED,handler:function(t,e){return n=>be(this,void 0,void 0,function*(){var r;t.state.isOriginator&&!t.remote.state.ready?(de.SocketService(`[SocketService: handleChannelRejected()] context=${t.state.context} channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`,t.remote.state.originatorInfo),Go(Object.assign(Object.assign({id:e,event:Wn.REJECTED},t.remote.state.originatorInfo),{sdkVersion:t.remote.state.sdkVersion,commLayer:t.state.communicationLayerPreference,commLayerVersion:h1.version,walletVersion:(r=t.remote.state.walletInfo)===null||r===void 0?void 0:r.version}),t.remote.state.communicationServerUrl).catch(a=>{}),zn.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),yield t.remote.disconnect({terminate:!0}),t.remote.emit(xe.REJECTED,{channelId:e}),t.remote.setConnectionStatus(Y0.DISCONNECTED)):de.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${e} isOriginator=${t.state.isOriginator} ready=${t.remote.state.ready}`)})}},{event:"clients_waiting_to_join",handler:function(t,e){return n=>{de.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${t.state.context} on 'clients_waiting_to_join-${e}'`,n),t.emit(xe.CLIENTS_WAITING,n)}}}],s6e=[{event:xe.KEY_INFO,handler:function(t){return e=>{de.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",e),t.emit(xe.KEY_INFO,e)}}},{event:xe.KEYS_EXCHANGED,handler:function(t){return()=>{var e,n,r;de.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${(e=t.state.keyExchange)===null||e===void 0?void 0:e.areKeysExchanged()}`);const{channelConfig:a}=t.remote.state;if(a){const s=t.getKeyExchange().getKeyInfo().ecies;a.localKey=s.private,a.otherKey=s.otherPubKey,t.remote.state.channelConfig=a,(n=t.remote.state.storageManager)===null||n===void 0||n.persistChannelConfig(a).catch(o=>{})}t.emit(xe.KEYS_EXCHANGED,{keysExchanged:(r=t.state.keyExchange)===null||r===void 0?void 0:r.areKeysExchanged(),isOriginator:t.state.isOriginator});const i={keyInfo:t.getKeyInfo()};t.emit(xe.SERVICE_STATUS,i)}}}];function PI(t,e){de.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} setting socket listeners for channel ${e}...`);const{socket:n}=t.state,{keyExchange:r}=t.state;n&&t.state.isOriginator&&(t.state.debug&&(n==null||n.io.on("error",a=>{de.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=error`,a)}),n==null||n.io.on("reconnect",a=>{de.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect`,a),Cw(t).catch(i=>{})}),n==null||n.io.on("reconnect_error",a=>{de.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_error`,a)}),n==null||n.io.on("reconnect_failed",()=>{de.SocketService(`[SocketService: setupChannelListener()] context=${t.state.context} socket event=reconnect_failed`)})),n==null||n.on("disconnect",a=>(de.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${a}' begin recovery...`),function(i){return s=>{de.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${i.state.manualDisconnect}`,s),i.state.manualDisconnect||(i.emit(xe.SOCKET_DISCONNECTED),Cw(i).catch(o=>{}))}}(t)(a)))),i6e.forEach(({event:a,handler:i})=>{n==null||n.on(`${a}-${e}`,i(t,e))}),s6e.forEach(({event:a,handler:i})=>{r==null||r.on(a,i(t))}),t.state.setupChannelListeners=!0}let o6e=class extends a3.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;const{reconnect:n,communicationLayerPreference:r,communicationServerUrl:a,context:i,remote:s,logging:o}=e;this.state.resumed=n,this.state.context=i,this.state.isOriginator=s.state.isOriginator,this.state.communicationLayerPreference=r,this.state.debug=(o==null?void 0:o.serviceLayer)===!0,this.remote=s,(o==null?void 0:o.serviceLayer)===!0&&Ir.enable("SocketService:Layer"),this.state.communicationServerUrl=a,this.state.hasPlaintext=this.state.communicationServerUrl!==H6&&(o==null?void 0:o.plaintext)===!0,de.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e;const{otherPublicKey:n,ecies:r,logging:a}=this.options,i={autoConnect:!1,transports:t6e,withCredentials:!0},s=this.state.communicationServerUrl;de.SocketService(`[SocketService: initSocket()] Socket IO url: ${s}`),this.state.socket=Gf(s,i),function(c){if(typeof window<"u"&&typeof document<"u"&&(de.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,c),!c.state.focusListenerAdded)){const d=()=>{de.SocketService("Document has focus --- reconnecting socket"),Cw(c).catch(l=>{})};window.addEventListener("focus",d),c.state.focusListenerAdded=!0,c.state.removeFocusListener=()=>{window.removeEventListener("focus",d),c.state.focusListenerAdded=!1}}}(this);const o={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:(e=this.state.context)!==null&&e!==void 0?e:"",ecies:r,logging:a};this.state.keyExchange=new a6e(o)}resetKeys(){return de.SocketService("[SocketService: resetKeys()] Resetting keys."),void((e=this.state.keyExchange)===null||e===void 0||e.resetKeys());var e}createChannel(){return be(this,void 0,void 0,function*(){return function(e){return be(this,void 0,void 0,function*(){var n,r,a;if(de.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),(n=e.state.socket)===null||n===void 0?void 0:n.connected)throw new Error("socket already connected");(r=e.state.socket)===null||r===void 0||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0;const i=Uc();e.state.channelId=i,PI(e,i),yield new Promise((o,c)=>{var d;(d=e.state.socket)===null||d===void 0||d.emit(xe.JOIN_CHANNEL,{channelId:i,context:`${e.state.context}createChannel`,clientType:"dapp"},(l,u)=>be(this,void 0,void 0,function*(){try{yield n2(e,l,u),o()}catch(f){c(f)}}))});const s=(a=e.state.keyExchange)===null||a===void 0?void 0:a.getKeyInfo();return{channelId:i,pubKey:(s==null?void 0:s.ecies.public)||"",privKey:(s==null?void 0:s.ecies.private)||""}})}(this)})}connectToChannel({channelId:e,withKeyExchange:n=!1,authorized:r}){return function(a){return be(this,arguments,void 0,function*({options:i,instance:s}){const{channelId:o,authorized:c,withKeyExchange:d}=i,{state:l,remote:u}=s,{isOriginator:f=!1,socket:p,keyExchange:h}=l,{channelConfig:b}=u.state;if(p!=null&&p.connected)throw new Error("socket already connected");if(f&&(b!=null&&b.relayPersistence)){const{localKey:v,otherKey:m}=b;v&&m&&(h==null||h.setRelayPersistence({localKey:v,otherKey:m}))}return Object.assign(l,{manualDisconnect:!1,withKeyExchange:d,isOriginator:f,channelId:o}),p==null||p.connect(),PI(s,o),!f&&c&&(h==null||h.setKeysExchanged(!0),Object.assign(u.state,{ready:!0,authorized:!0})),new Promise(v=>{var m;const T=(m=h==null?void 0:h.getKeyInfo())===null||m===void 0?void 0:m.ecies.public;p==null||p.emit(xe.JOIN_CHANNEL,{channelId:o,context:`${l.context}_connectToChannel`,clientType:f?"dapp":"wallet",publicKey:c&&!f?T:void 0},(A,N)=>be(this,void 0,void 0,function*(){yield n2(s,A,N),v()}))})})}({options:{channelId:e,withKeyExchange:n,authorized:r},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,n;(n=(e=this).state.socket)===null||n===void 0||n.emit(xe.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Zt.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return be(this,void 0,void 0,function*(){return function(n,r){return be(this,void 0,void 0,function*(){var a,i,s;if(!n.state.channelId)throw de.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");if(de.SocketService(`[SocketService: handleSendMessage()] context=${n.state.context} areKeysExchanged=${(a=n.state.keyExchange)===null||a===void 0?void 0:a.areKeysExchanged()}`,r),(i=r==null?void 0:r.type)===null||i===void 0?void 0:i.startsWith("key_handshake"))return function(c,d){var l;de.SocketService(`[SocketService: handleKeyHandshake()] context=${c.state.context}`,d),(l=c.state.socket)===null||l===void 0||l.emit(xe.MESSAGE,{id:c.state.channelId,context:c.state.context,clientType:c.state.isOriginator?"dapp":"wallet",message:d})}(n,r),!0;(function(c,d){var l;if(!(!((l=c.state.keyExchange)===null||l===void 0)&&l.areKeysExchanged())&&!c.remote.state.relayPersistence)throw de.SocketService(`[SocketService: validateKeyExchange()] context=${c.state.context} ERROR keys not exchanged`,d),new Error("Keys not exchanged BBB")})(n,r),function(c,d){var l;const u=(l=d==null?void 0:d.method)!==null&&l!==void 0?l:"",f=d==null?void 0:d.id;c.state.isOriginator&&f&&(c.state.rpcMethodTracker[f]={id:f,timestamp:Date.now(),method:u},c.emit(xe.RPC_UPDATE,c.state.rpcMethodTracker[f]))}(n,r);const o=yield JF(n,r);return n.remote.state.analytics&&n.remote.state.isOriginator&&r.method&&ZF.includes(r.method.toLowerCase())&&Go({id:(s=n.remote.state.channelId)!==null&&s!==void 0?s:"",event:Wn.SDK_RPC_REQUEST,params:{method:r.method,from:"mobile"}},n.remote.state.communicationServerUrl).catch(c=>{}),n.remote.state.isOriginator&&r.method&&Vp(r.method)&&zn.analytics.track("sdk_action_requested",{action:r.method}),function(c,d){return be(this,void 0,void 0,function*(){var l;const u=d==null?void 0:d.id,f=(l=d==null?void 0:d.method)!==null&&l!==void 0?l:"";if(c.state.isOriginator&&u)try{const p=MI(u,c.state.rpcMethodTracker,200).then(v=>({type:Ql.RPC_CHECK,result:v})),h=be(this,void 0,void 0,function*(){const v=yield(T=>be(void 0,[T],void 0,function*({rpcId:A,instance:N}){for(;N.state.lastRpcId===A||N.state.lastRpcId===void 0;)yield y6(200);return N.state.lastRpcId}))({instance:c,rpcId:u}),m=yield MI(v,c.state.rpcMethodTracker,200);return{type:Ql.SKIPPED_RPC,result:m}}),b=yield Promise.race([p,h]);if(b.type===Ql.RPC_CHECK){const v=b.result;de.SocketService(`[SocketService:handleRpcReplies()] id=${d.id} ${f} ( ${v.elapsedTime} ms)`,v.result)}else{if(b.type!==Ql.SKIPPED_RPC)throw new Error(`Error handling RPC replies for ${u}`);{const v=Object.assign(Object.assign({},c.state.rpcMethodTracker[u]),{error:new Error("SDK_CONNECTION_ISSUE")});c.emit(xe.RPC_UPDATE,v);const m={data:Object.assign(Object.assign({},v),{jsonrpc:"2.0"}),name:"metamask-provider"};c.emit(xe.MESSAGE,{message:m})}}}catch(p){throw p}})}(n,r).catch(c=>{}),o})}(this,e)})}ping(){return function(e){return be(this,void 0,void 0,function*(){var n,r;de.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${(n=e.state.keyExchange)===null||n===void 0?void 0:n.areKeysExchanged()}`),(r=e.state.socket)===null||r===void 0||r.emit(Nn.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""})})}(this)}pause(){return function(e){return be(this,void 0,void 0,function*(){var n,r;de.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!((n=e.state.keyExchange)===null||n===void 0)&&n.areKeysExchanged()&&(yield e.sendMessage({type:Nn.PAUSE})),(r=e.state.socket)===null||r===void 0||r.disconnect()})}(this)}isConnected(){var e;return(e=this.state.socket)===null||e===void 0?void 0:e.connected}resume(){return function(e){return be(this,void 0,void 0,function*(){const{state:n,remote:r}=e,{socket:a,channelId:i,context:s,keyExchange:o,isOriginator:c}=n,{isOriginator:d}=r.state;if(de.SocketService(`[SocketService: resume()] channelId=${i} context=${s} connected=${a==null?void 0:a.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${o==null?void 0:o.areKeysExchanged()}`),!i)throw de.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");a!=null&&a.connected?(de.SocketService("[SocketService: resume()] already connected."),a.emit(Nn.PING,{id:i,clientType:d?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||o!=null&&o.areKeysExchanged()||(c?yield e.sendMessage({type:Nn.READY}):o==null||o.start({isOriginator:!1}))):(a==null||a.connect(),de.SocketService(`[SocketService: resume()] after connecting socket --> connected=${a==null?void 0:a.connected}`),a==null||a.emit(xe.JOIN_CHANNEL,{channelId:i,context:`${s}_resume`,clientType:d?"dapp":"wallet"},(l,u)=>be(this,void 0,void 0,function*(){try{yield n2(e,l,u)}catch{}}))),n.manualDisconnect=!1,n.resumed=!0})}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(n,r){var a,i,s,o,c;de.SocketService(`[SocketService: disconnect()] context=${n.state.context}`,r),r!=null&&r.terminate&&((i=(a=n.state).removeFocusListener)===null||i===void 0||i.call(a),n.state.channelId=r.channelId,(s=n.state.socket)===null||s===void 0||s.removeAllListeners(),(o=n.state.keyExchange)===null||o===void 0||o.clean(),n.remote.state.ready=!1,n.state.socket=void 0,n.state.rpcMethodTracker={}),n.state.manualDisconnect=!0,(c=n.state.socket)===null||c===void 0||c.disconnect()}(this,e)}};var Md,lr,kI;function c6e(t){return()=>be(this,void 0,void 0,function*(){var e,n,r;const{state:a}=t;if(a.authorized)return;yield be(this,void 0,void 0,function*(){for(;!a.walletInfo;)yield y6(500)});const i="7.3".localeCompare(((e=a.walletInfo)===null||e===void 0?void 0:e.version)||"");if(de.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${(n=a.walletInfo)===null||n===void 0?void 0:n.version} compareValue=${i}`),i!==1)return;const s=a.platformType===lr.MobileWeb||a.platformType===lr.ReactNative||a.platformType===lr.MetaMaskMobileWebview;de.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${a.platformType} secure=${s} channel=${a.channelId} walletVersion=${(r=a.walletInfo)===null||r===void 0?void 0:r.version}`),s&&(a.authorized=!0,t.emit(xe.AUTHORIZED))})}function d6e(t){return e=>{const{state:n}=t;de.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${e}`),t.emit(xe.CHANNEL_CREATED,e)}}function l6e(t,e){return()=>{var n,r,a,i;const{state:s}=t;de.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${s.channelId} keysExchanged=${(r=(n=s.communicationLayer)===null||n===void 0?void 0:n.getKeyInfo())===null||r===void 0?void 0:r.keysExchanged}`),s.analytics&&Go(Object.assign(Object.assign({id:(a=s.channelId)!==null&&a!==void 0?a:"",event:s.reconnection?Wn.RECONNECT:s.isOriginator?Wn.REQUEST:Wn.REQUEST_MOBILE},s.originatorInfo),{commLayer:e,sdkVersion:s.sdkVersion,walletVersion:(i=s.walletInfo)===null||i===void 0?void 0:i.version,commLayerVersion:h1.version}),s.communicationServerUrl).catch(o=>{}),s.isOriginator&&!s.reconnection&&zn.analytics.track("sdk_connection_established",{transport_type:"websocket"}),s.clientsConnected=!0,s.originatorInfoSent=!1,t.emit(xe.CLIENTS_CONNECTED)}}function u6e(t){return e=>{const{state:n}=t;de.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${e}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),t.emit(xe.CLIENTS_DISCONNECTED,n.channelId),t.setConnectionStatus(Y0.DISCONNECTED)}}function f6e(t){return e=>{var n;const{state:r}=t;if(de.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${e} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),t.setConnectionStatus(Y0.WAITING),t.emit(xe.CLIENTS_WAITING,e),r.originatorConnectStarted){de.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);const a=((n=r.autoConnectOptions)===null||n===void 0?void 0:n.timeout)||3e3,i=setTimeout(()=>{de.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${a}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||t.setConnectionStatus(Y0.TIMEOUT),clearTimeout(i)},a)}}}function p6e(t,e){return n=>{var r,a,i,s,o,c,d,l;const{state:u}=t;if(de.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${u.context} on commLayer.'keys_exchanged' channel=${u.channelId}`,n),(a=(r=u.communicationLayer)===null||r===void 0?void 0:r.getKeyInfo())===null||a===void 0?void 0:a.keysExchanged){const f=Object.assign(Object.assign({},u.channelConfig),{channelId:(i=u.channelId)!==null&&i!==void 0?i:"",validUntil:((s=u.channelConfig)===null||s===void 0?void 0:s.validUntil)||z6,localKey:u.communicationLayer.getKeyInfo().ecies.private,otherKey:u.communicationLayer.getKeyInfo().ecies.otherPubKey});(o=u.storageManager)===null||o===void 0||o.persistChannelConfig(f).catch(p=>{}),t.setConnectionStatus(Y0.LINKED)}(function(f,p){var h,b,v,m,T,A,N,R;const{state:B}=f;de.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${B.channelId}`,p);const F=Object.assign(Object.assign({},B.channelConfig),{channelId:(h=B.channelId)!==null&&h!==void 0?h:"",validUntil:(v=(b=B.channelConfig)===null||b===void 0?void 0:b.validUntil)!==null&&v!==void 0?v:0,relayPersistence:B.relayPersistence,localKey:(T=(m=B.communicationLayer)===null||m===void 0?void 0:m.state.keyExchange)===null||T===void 0?void 0:T.getKeyInfo().ecies.private,otherKey:(N=(A=B.communicationLayer)===null||A===void 0?void 0:A.state.keyExchange)===null||N===void 0?void 0:N.getKeyInfo().ecies.otherPubKey,lastActive:p.getTime()});(R=B.storageManager)===null||R===void 0||R.persistChannelConfig(F)})(t,new Date),u.analytics&&u.channelId&&Go(Object.assign(Object.assign({id:u.channelId,event:n.isOriginator?Wn.CONNECTED:Wn.CONNECTED_MOBILE},u.originatorInfo),{sdkVersion:u.sdkVersion,commLayer:e,commLayerVersion:h1.version,walletVersion:(c=u.walletInfo)===null||c===void 0?void 0:c.version}),u.communicationServerUrl).catch(f=>{}),u.isOriginator=n.isOriginator,n.isOriginator||((d=u.communicationLayer)===null||d===void 0||d.sendMessage({type:Nn.READY}),u.ready=!0,u.paused=!1),n.isOriginator&&!u.originatorInfoSent&&((l=u.communicationLayer)===null||l===void 0||l.sendMessage({type:Nn.ORIGINATOR_INFO,originatorInfo:u.originatorInfo,originator:u.originatorInfo}),u.originatorInfoSent=!0)}}function h6e(t){return e=>{let n=e;e.message&&(n=n.message),function(r,a){const{state:i}=a;if(de.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${i.context} on 'message' typeof=${typeof r}`,r),a.state.ready=!0,i.isOriginator||r.type!==Nn.ORIGINATOR_INFO)if(i.isOriginator&&r.type===Nn.WALLET_INFO)(function(s,o){const{state:c}=s;c.walletInfo=o.walletInfo,c.paused=!1})(a,r);else{if(i.isOriginator&&r.type===Nn.WALLET_INIT)(function(s,o){return be(this,void 0,void 0,function*(){var c,d,l;const{state:u}=s;if(u.isOriginator){const f=o.data||{};if(typeof f=="object"&&"accounts"in f&&"chainId"in f&&"walletKey"in f)try{const{channelConfig:p}=s.state;if(de.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(p,null,2)),p){const h=f.accounts,b=f.chainId,v=f.walletKey;let m,T=!1;"deeplinkProtocol"in f&&(T=!!f.deeplinkProtocol,s.state.deeplinkProtocolAvailable=T),"walletVersion"in f&&(m=f.walletVersion),yield(c=s.state.storageManager)===null||c===void 0?void 0:c.persistChannelConfig(Object.assign(Object.assign({},p),{otherKey:v,walletVersion:m,deeplinkProtocolAvailable:T,relayPersistence:!0})),yield(d=s.state.storageManager)===null||d===void 0?void 0:d.persistAccounts(h),yield(l=s.state.storageManager)===null||l===void 0?void 0:l.persistChainId(b)}s.emit(xe.WALLET_INIT,{accounts:f.accounts,chainId:f.chainId})}catch{}}})})(a,r).catch(s=>{de.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)});else if(r.type===Nn.TERMINATE)(function(s){return be(this,void 0,void 0,function*(){const{state:o}=s;o.isOriginator&&(yield XF({options:{terminate:!0,sendMessage:!1},instance:s}),s.emit(xe.TERMINATE))})})(a).catch(s=>{de.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${s}`)});else if(r.type===Nn.PAUSE)(function(s){const{state:o}=s;o.paused=!0,s.setConnectionStatus(Y0.PAUSED)})(a);else if(r.type===Nn.READY&&i.isOriginator)(function(s){const{state:o}=s;s.setConnectionStatus(Y0.LINKED);const c=o.paused;o.paused=!1,s.emit(xe.CLIENTS_READY,{isOriginator:o.isOriginator,walletInfo:o.walletInfo}),c&&(o.authorized=!0,s.emit(xe.AUTHORIZED))})(a);else{if(r.type===Nn.OTP&&i.isOriginator)return void function(s,o){var c;const{state:d}=s;s.emit(xe.OTP,o.otpAnswer),"6.6".localeCompare(((c=d.walletInfo)===null||c===void 0?void 0:c.version)||"")===1&&s.emit(xe.SDK_RPC_CALL,{method:ir.ETH_REQUESTACCOUNTS,params:[]})}(a,r);r.type===Nn.AUTHORIZED&&i.isOriginator&&function(s){const{state:o}=s;o.authorized=!0,s.emit(xe.AUTHORIZED)}(a)}a.emit(xe.MESSAGE,r)}else(function(s,o){var c;const{state:d}=s;(c=d.communicationLayer)===null||c===void 0||c.sendMessage({type:Nn.WALLET_INFO,walletInfo:d.walletInfo}),d.originatorInfo=o.originatorInfo||o.originator,s.emit(xe.CLIENTS_READY,{isOriginator:d.isOriginator,originatorInfo:d.originatorInfo}),d.paused=!1})(a,r)}(n,t)}}function b6e(t){return()=>{const{state:e}=t;de.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),e.ready=!1,e.authorized=!1,YF(e),t.emitServiceStatusEvent({context:"socket_reconnect"})}}function y6e(t){return()=>{const{state:e}=t;de.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),e.ready=!1}}function m6e(t){return()=>be(this,void 0,void 0,function*(){var e,n,r,a,i,s,o;const{state:c}=t;de.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${c.context}`),t.state.ready=!0,t.state.clientsConnected=!0,t.state.authorized=!0,t.state.relayPersistence=!0,(e=t.state.communicationLayer)===null||e===void 0||e.getKeyExchange().setKeysExchanged(!0),t.emit(xe.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),t.emit(xe.AUTHORIZED),t.emit(xe.CLIENTS_READY),t.emit(xe.CHANNEL_PERSISTENCE);try{c.channelConfig=Object.assign(Object.assign({},c.channelConfig),{localKey:(n=c.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange().getKeyInfo().ecies.private,otherKey:(r=c.communicationLayer)===null||r===void 0?void 0:r.getKeyExchange().getOtherPublicKey(),channelId:(a=c.channelId)!==null&&a!==void 0?a:"",validUntil:(s=(i=c.channelConfig)===null||i===void 0?void 0:i.validUntil)!==null&&s!==void 0?s:z6,relayPersistence:!0}),yield(o=c.storageManager)===null||o===void 0?void 0:o.persistChannelConfig(c.channelConfig)}catch{}})}function NI({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,ecies:r,communicationServerUrl:a=H6,instance:i}){var s,o,c,d,l,u,f,p,h,b,v;const{state:m}=i;if(de.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(m,null,2)),t!==Md.SOCKET)throw new Error("Invalid communication protocol");m.communicationLayer=new o6e({communicationLayerPreference:t,otherPublicKey:e,reconnect:n,transports:m.transports,communicationServerUrl:a,context:m.context,ecies:r,logging:m.logging,remote:i});let T=typeof document<"u"&&document.URL||"",A=typeof document<"u"&&document.title||"";!((s=m.dappMetadata)===null||s===void 0)&&s.url&&(T=m.dappMetadata.url),!((o=m.dappMetadata)===null||o===void 0)&&o.name&&(A=m.dappMetadata.name);const N=(u=(d=(c=m.dappMetadata)===null||c===void 0?void 0:c.name)!==null&&d!==void 0?d:(l=m.dappMetadata)===null||l===void 0?void 0:l.url)!==null&&u!==void 0?u:"N/A",R=typeof window<"u"&&window.location!==void 0&&(f=window.location.hostname)!==null&&f!==void 0?f:N,B={url:T,title:A,source:(p=m.dappMetadata)===null||p===void 0?void 0:p.source,dappId:R,anonId:m.anonId,icon:((h=m.dappMetadata)===null||h===void 0?void 0:h.iconUrl)||((b=m.dappMetadata)===null||b===void 0?void 0:b.base64Icon),platform:m.platformType,apiVersion:h1.version,connector:(v=m.dappMetadata)===null||v===void 0?void 0:v.connector};m.originatorInfo=B;const F={[xe.AUTHORIZED]:c6e(i),[xe.MESSAGE]:h6e(i),[xe.CHANNEL_PERSISTENCE]:m6e(i),[xe.CLIENTS_CONNECTED]:l6e(i,t),[xe.KEYS_EXCHANGED]:p6e(i,t),[xe.SOCKET_DISCONNECTED]:y6e(i),[xe.SOCKET_RECONNECT]:b6e(i),[xe.CLIENTS_DISCONNECTED]:u6e(i),[xe.KEY_INFO]:()=>{},[xe.CHANNEL_CREATED]:d6e(i),[xe.CLIENTS_WAITING]:f6e(i),[xe.RPC_UPDATE]:I=>{i.emit(xe.RPC_UPDATE,I)}};for(const[I,P]of Object.entries(F))try{m.communicationLayer.on(I,P)}catch{}}function XF(t){return be(this,arguments,void 0,function*({options:e,instance:n}){const{state:r}=n;return de.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,e),new Promise((a,i)=>{var s,o,c,d,l,u;e!=null&&e.terminate?(n.state.ready&&Go({id:(s=n.state.channelId)!==null&&s!==void 0?s:"",event:Wn.TERMINATED},n.state.communicationServerUrl).catch(f=>{}),r.ready=!1,r.paused=!1,(o=r.storageManager)===null||o===void 0||o.terminate((c=r.channelId)!==null&&c!==void 0?c:""),n.state.terminated=!0,e.sendMessage?!((d=r.communicationLayer)===null||d===void 0)&&d.getKeyInfo().keysExchanged&&n.state.communicationLayer&&JF(n.state.communicationLayer,{type:Nn.TERMINATE}).then(()=>{a(!0)}).catch(f=>{i(f)}):a(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=Uc(),e.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,(l=r.communicationLayer)===null||l===void 0||l.disconnect(e),n.setConnectionStatus(Y0.TERMINATED)):((u=r.communicationLayer)===null||u===void 0||u.disconnect(e),n.setConnectionStatus(Y0.DISCONNECTED),a(!0))})})}(Md||(Md={})).SOCKET="socket",function(t){t.NonBrowser="nodejs",t.MetaMaskMobileWebview="in-app-browser",t.DesktopWeb="web-desktop",t.MobileWeb="web-mobile",t.ReactNative="react-native"}(lr||(lr={}));let g6e=class extends a3.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:H6,context:"",persist:!1,clientsConnected:!1,sessionDuration:z6,originatorConnectStarted:!1,debug:!1,_connectionStatus:Y0.DISCONNECTED},this._options=e;const{anonId:n,platformType:r,communicationLayerPreference:a,otherPublicKey:i,reconnect:s,walletInfo:o,dappMetadata:c,protocolVersion:d,transports:l,context:u,relayPersistence:f,ecies:p,analytics:h=!1,storage:b,sdkVersion:v,communicationServerUrl:m=H6,logging:T,autoConnect:A={timeout:n6e}}=e;this.state.anonId=n,this.state.otherPublicKey=i,this.state.dappMetadata=c,this.state.walletInfo=o,this.state.transports=l,this.state.platformType=r,this.state.analytics=h,this.state.protocolVersion=d??1,this.state.isOriginator=!i,this.state.relayPersistence=f,this.state.communicationServerUrl=m,this.state.context=u,this.state.terminated=!1,this.state.sdkVersion=v,this.setMaxListeners(50),this.setConnectionStatus(Y0.DISCONNECTED),b!=null&&b.duration&&(this.state.sessionDuration=z6),this.state.storageOptions=b,this.state.autoConnectOptions=A,this.state.debug=(T==null?void 0:T.remoteLayer)===!0,(T==null?void 0:T.remoteLayer)===!0&&Ir.enable("RemoteCommunication:Layer"),(T==null?void 0:T.serviceLayer)===!0&&Ir.enable("SocketService:Layer"),(T==null?void 0:T.eciesLayer)===!0&&Ir.enable("ECIES:Layer"),(T==null?void 0:T.keyExchangeLayer)===!0&&Ir.enable("KeyExchange:Layer"),this.state.logging=T,b!=null&&b.storageManager&&(this.state.storageManager=b.storageManager),de.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${d} relayPersistence=${f} isOriginator=${this.state.isOriginator} communicationLayerPreference=${a} otherPublicKey=${i} reconnect=${s}`),this.state.isOriginator||NI({communicationLayerPreference:a,otherPublicKey:i,reconnect:s,ecies:p,communicationServerUrl:m,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return be(this,void 0,void 0,function*(){var e;if(this.state.storageManager){const n=yield this.state.storageManager.getPersistedChannelConfig({});n&&(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=(e=n.deeplinkProtocolAvailable)!==null&&e!==void 0&&e,n.relayPersistence&&(this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Y0.LINKED),yield this.connectToChannel({channelId:n.channelId})))}NI({communicationLayerPreference:Md.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this})})}originatorSessionConnect(){return be(this,void 0,void 0,function*(){return yield function(e){return be(this,void 0,void 0,function*(){var n;const{state:r}=e;if(!r.storageManager)return void de.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip");const a=yield r.storageManager.getPersistedChannelConfig({});if(de.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,a),(n=r.communicationLayer)===null||n===void 0?void 0:n.isConnected())return de.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),a;if(a){if(a.validUntil>Date.now())return r.channelConfig=a,r.originatorConnectStarted=!0,r.channelId=a==null?void 0:a.channelId,r.reconnection=!0,a;de.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired")}r.originatorConnectStarted=!1})}(this)})}generateChannelIdConnect(){return be(this,void 0,void 0,function*(){return function(e){return be(this,void 0,void 0,function*(){var n,r,a,i,s,o;if(!e.communicationLayer)throw new Error("communication layer not initialized");if(e.ready)throw new Error("Channel already connected");if(e.channelId&&(!((n=e.communicationLayer)===null||n===void 0)&&n.isConnected()))return e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),(r=e.storageManager)===null||r===void 0||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:(i=(a=e.communicationLayer)===null||a===void 0?void 0:a.getKeyInfo())===null||i===void 0?void 0:i.ecies.private,pubKey:(o=(s=e.communicationLayer)===null||s===void 0?void 0:s.getKeyInfo())===null||o===void 0?void 0:o.ecies.public};de.RemoteCommunication("[RemoteCommunication: generateChannelId()]");const c=yield e.communicationLayer.createChannel();de.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c);const d=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration});return e.channelId=c.channelId,e.channelConfig=d,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}})}(this.state)})}clean(){return YF(this.state)}connectToChannel({channelId:e,withKeyExchange:n,authorized:r}){return function(a){return be(this,arguments,void 0,function*({channelId:i,withKeyExchange:s,authorized:o,state:c}){var d,l,u;if(!ES(i))throw de.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} invalid channel channelId=${i}`),new Error(`Invalid channel ${i}`);if(de.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} channelId=${i} withKeyExchange=${s}`),(d=c.communicationLayer)===null||d===void 0?void 0:d.isConnected())return void de.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${c.context} already connected - interrupt connection.`);c.channelId=i,yield(l=c.communicationLayer)===null||l===void 0?void 0:l.connectToChannel({channelId:i,authorized:o,withKeyExchange:s});const f=Object.assign(Object.assign({},c.channelConfig),{channelId:i,validUntil:Date.now()+c.sessionDuration});c.channelConfig=f,(u=c.storageManager)===null||u===void 0||u.persistChannelConfig(f)})}({channelId:e,authorized:r,withKeyExchange:n,state:this.state})}sendMessage(e){return be(this,void 0,void 0,function*(){const n=this.state.isOriginator&&e.method&&Vp(e.method);n&&zn.analytics.track("sdk_action_requested",{action:e.method});try{return yield function(r,a){return be(this,void 0,void 0,function*(){var i,s;const{state:o}=r;de.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${o.context} paused=${o.paused} ready=${o.ready} relayPersistence=${o.relayPersistence} authorized=${o.authorized} socket=${(i=o.communicationLayer)===null||i===void 0?void 0:i.isConnected()} clientsConnected=${o.clientsConnected} status=${o._connectionStatus}`,a),o.relayPersistence||o.ready&&(!((s=o.communicationLayer)===null||s===void 0)&&s.isConnected())&&o.clientsConnected||(de.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${o.context}  SKIP message waiting for MM mobile readiness.`),yield new Promise(c=>{r.once(xe.CLIENTS_READY,c)}),de.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${o.context}  AFTER SKIP / READY -- sending pending message`));try{return yield function(d,l){return be(this,void 0,void 0,function*(){return new Promise(u=>{var f;const{state:p}=d;de.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${p.context} ready=${p.ready} authorized=${p.authorized} method=${l.method}`),!p.isOriginator||p.authorized||p.relayPersistence?(f=p.communicationLayer)===null||f===void 0||f.sendMessage(l).then(h=>{u(h)}).catch(h=>{u(!1)}):d.once(xe.AUTHORIZED,()=>{var h;de.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${p.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),(h=p.communicationLayer)===null||h===void 0||h.sendMessage(l).then(b=>{u(b)}).catch(b=>{u(!1)})})})})}(r,a)}catch(c){throw c}})}(this,e)}catch(r){throw n&&zn.analytics.track("sdk_action_failed",{action:e.method}),r}})}testStorage(){return be(this,void 0,void 0,function*(){return function(e){return be(this,void 0,void 0,function*(){var n;const r=yield(n=e.storageManager)===null||n===void 0?void 0:n.getPersistedChannelConfig();de.RemoteCommunication("[RemoteCommunication: testStorage()] res",r)})}(this.state)})}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return be(this,void 0,void 0,function*(){var e;de.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.ping()})}testLogger(){de.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),de.SocketService(`testLogger() channel=${this.state.channelId}`),de.Ecies(`testLogger() channel=${this.state.channelId}`),de.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;de.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),(e=this.state.communicationLayer)===null||e===void 0||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(xe.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(e={}){this.emit(xe.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getKeyInfo()}resetKeys(){var e;(e=this.state.communicationLayer)===null||e===void 0||e.resetKeys()}setOtherPublicKey(e){var n;const r=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange();if(!r)throw new Error("KeyExchange is not initialized.");r.getOtherPublicKey()!==e&&r.setOtherPublicKey(e)}pause(){return be(this,void 0,void 0,function*(){var e;de.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),yield(e=this.state.communicationLayer)===null||e===void 0?void 0:e.pause(),this.setConnectionStatus(Y0.PAUSED)})}getVersion(){return h1.version}hasRelayPersistence(){var e;return(e=this.state.relayPersistence)!==null&&e!==void 0&&e}resume(){return be(this,void 0,void 0,function*(){return function(e){return be(this,void 0,void 0,function*(){var n;const{state:r}=e;de.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),yield(n=r.communicationLayer)===null||n===void 0?void 0:n.resume(),e.setConnectionStatus(Y0.LINKED)})}(this)})}encrypt(e){var n,r,a;const i=(n=this.state.communicationLayer)===null||n===void 0?void 0:n.getKeyExchange(),s=i==null?void 0:i.getOtherPublicKey();if(!s)throw new Error("KeyExchange not completed");return(a=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||a===void 0?void 0:a.encrypt(e,s)}decrypt(e){var n,r,a;if(!(!((n=this.state.communicationLayer)===null||n===void 0)&&n.state.eciesInstance))throw new Error("ECIES instance is not initialized");return(a=(r=this.state.communicationLayer)===null||r===void 0?void 0:r.state.eciesInstance)===null||a===void 0?void 0:a.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return(e=this.state.communicationLayer)===null||e===void 0?void 0:e.getRPCMethodTracker()}reject({channelId:e}){return function(n){return be(this,arguments,void 0,function*({channelId:r,state:a}){var i,s,o;if(!ES(r))throw de.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${a.context} invalid channel channelId=${r}`),new Error(`Invalid channel ${r}`);if(a.isOriginator)return void de.RemoteCommunication(`[RemoteCommunication: reject()] context=${a.context} isOriginator=${a.isOriginator} channelId=${r}`);const{socket:c}=(s=(i=a.communicationLayer)===null||i===void 0?void 0:i.state)!==null&&s!==void 0?s:{};c!=null&&c.connected||(de.RemoteCommunication(`[RemoteCommunication: reject()] context=${a.context} socket already connected`),c==null||c.connect()),Go(Object.assign(Object.assign({id:r,event:Wn.REJECTED},a.originatorInfo),{sdkVersion:a.sdkVersion,commLayerVersion:h1.version,walletVersion:(o=a.walletInfo)===null||o===void 0?void 0:o.version}),a.communicationServerUrl).catch(d=>{}),yield new Promise((d,l)=>{c==null||c.emit(xe.REJECTED,{channelId:r},(u,f)=>{de.RemoteCommunication(`[RemoteCommunication: reject()] context=${a.context} socket=${c==null?void 0:c.id}`,{error:u,response:f}),u?l(u):d(f)})})})}({channelId:e,state:this.state})}disconnect(e){return be(this,void 0,void 0,function*(){return XF({options:e,instance:this})})}};(function(t){t.RENEW="renew",t.LINK="link"})(kI||(kI={}));var w6e="ERC721",v6e="ERC1155",Fn={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:t=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${t} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:t=>`'args.logger' must include required method '${t}'.`},info:{connected:t=>`MetaMask: Connected to chain with ID "${t}".`},warnings:{chainIdDeprecation:`MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,networkVersionDeprecation:`MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,selectedAddressDeprecation:`MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23`,enableDeprecation:`MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1102`,sendDeprecation:`MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193`,events:{close:`MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect`,data:`MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`,networkChanged:`MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged`,notification:`MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.
For more information, see: https://eips.ethereum.org/EIPS/eip-1193#message`},rpc:{ethDecryptDeprecation:`MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,ethGetEncryptionPublicKeyDeprecation:`MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.
For more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686`,walletWatchAssetNFTExperimental:`MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.
For more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle`},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}};function E6e(t){const e={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,a)=>{var i;e.ethDecryptDeprecation||n.method!=="eth_decrypt"?e.ethGetEncryptionPublicKeyDeprecation||n.method!=="eth_getEncryptionPublicKey"?!e.walletWatchAssetNFTExperimental&&n.method==="wallet_watchAsset"&&[w6e,v6e].includes(((i=n.params)==null?void 0:i.type)||"")&&(t.warn(Fn.warnings.rpc.walletWatchAssetNFTExperimental),e.walletWatchAssetNFTExperimental=!0):(t.warn(Fn.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),e.ethGetEncryptionPublicKeyDeprecation=!0):(t.warn(Fn.warnings.rpc.ethDecryptDeprecation),e.ethDecryptDeprecation=!0),a()}}var QF=4294967295,RI=Math.floor(Math.random()*QF);function _6e(){return(t,e,n,r)=>{const a=t.id,i=RI=(RI+1)%QF;t.id=i,e.id=i,n(s=>{t.id=a,e.id=a,s()})}}var K_=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Kc=(t,e,n)=>(K_(t,e,"read from private field"),n?n.call(t):e.get(t)),Ni=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ab=(t,e,n,r)=>(K_(t,e,"write to private field"),e.set(t,n),n),vr=(t,e,n)=>(K_(t,e,"access private method"),n),$c={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},DI={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}};function $I(t){return!!t&&typeof t=="object"&&!Array.isArray(t)}var s8=(t,e)=>Object.hasOwnProperty.call(t,e);let T6e=class extends TypeError{constructor(e,n){let r;const{message:a,explanation:i,...s}=e,{path:o}=e,c=o.length===0?a:`At path: ${o.join(".")} -- ${a}`;super(i??c),i!=null&&(this.cause=c),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...n()])}};function Lo(t){return typeof t=="object"&&t!=null}function js(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function x6e(t,e,n,r){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:a,branch:i}=e,{type:s}=n,{refinement:o,message:c=`Expected a value of type \`${s}\`${o?` with refinement \`${o}\``:""}, but received: \`${js(r)}\``}=t;return{value:r,type:s,refinement:o,key:a[a.length-1],path:a,branch:i,...t,message:c}}function*LI(t,e,n,r){(function(a){return Lo(a)&&typeof a[Symbol.iterator]=="function"})(t)||(t=[t]);for(const a of t){const i=x6e(a,e,n,r);i&&(yield i)}}function*V_(t,e,n={}){const{path:r=[],branch:a=[t],coerce:i=!1,mask:s=!1}=n,o={path:r,branch:a};if(i&&(t=e.coercer(t,o),s&&e.type!=="type"&&Lo(e.schema)&&Lo(t)&&!Array.isArray(t)))for(const d in t)e.schema[d]===void 0&&delete t[d];let c="valid";for(const d of e.validator(t,o))d.explanation=n.message,c="not_valid",yield[d,void 0];for(let[d,l,u]of e.entries(t,o)){const f=V_(l,u,{path:d===void 0?r:[...r,d],branch:d===void 0?a:[...a,l],coerce:i,mask:s,message:n.message});for(const p of f)p[0]?(c=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):i&&(l=p[1],d===void 0?t=l:t instanceof Map?t.set(d,l):t instanceof Set?t.add(l):Lo(t)&&(l!==void 0||d in t)&&(t[d]=l))}if(c!=="not_valid")for(const d of e.refiner(t,o))d.explanation=n.message,c="not_refined",yield[d,void 0];c==="valid"&&(yield[void 0,t])}let Ji=class{constructor(e){const{type:n,schema:r,validator:a,refiner:i,coercer:s=c=>c,entries:o=function*(){}}=e;this.type=n,this.schema=r,this.entries=o,this.coercer=s,this.validator=a?(c,d)=>LI(a(c,d),d,this,c):()=>[],this.refiner=i?(c,d)=>LI(i(c,d),d,this,c):()=>[]}assert(e,n){return eU(e,this,n)}create(e,n){return tU(e,this,n)}is(e){return Su(e,this)}mask(e,n){return function(r,a,i){const s=M5(r,a,{coerce:!0,mask:!0,message:i});if(s[0])throw s[0];return s[1]}(e,this,n)}validate(e,n={}){return M5(e,this,n)}};function eU(t,e,n){const r=M5(t,e,{message:n});if(r[0])throw r[0]}function tU(t,e,n){const r=M5(t,e,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Su(t,e){return!M5(t,e)[0]}function M5(t,e,n={}){const r=V_(t,e,n),a=function(i){const{done:s,value:o}=i.next();return s?void 0:o}(r);return a[0]?[new T6e(a[0],function*(){for(const s of r)s[0]&&(yield s[0])}),void 0]:[void 0,a[1]]}function b1(t,e){return new Ji({type:t,schema:null,validator:e})}function BI(t){let e;return new Ji({type:"lazy",schema:null,*entries(n,r){e??(e=t()),yield*e.entries(n,r)},validator:(n,r)=>(e??(e=t()),e.validator(n,r)),coercer:(n,r)=>(e??(e=t()),e.coercer(n,r)),refiner:(n,r)=>(e??(e=t()),e.refiner(n,r))})}function nU(t){return new Ji({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${js(e)}`})}function rU(t){const e=js(t),n=typeof t;return new Ji({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator:r=>r===t||`Expected the literal \`${e}\`, but received: ${js(r)}`})}function aU(){return b1("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${js(t)}`)}function iU(t){const e=t?Object.keys(t):[],n=b1("never",()=>!1);return new Ji({type:"object",schema:t||null,*entries(r){if(t&&Lo(r)){const a=new Set(Object.keys(r));for(const i of e)a.delete(i),yield[i,r[i],t[i]];for(const i of a)yield[i,r[i],n]}},validator:r=>Lo(r)||`Expected an object, but received: ${js(r)}`,coercer:r=>Lo(r)?{...r}:r})}function FI(t){return new Ji({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function sU(t,e){return new Ji({type:"record",schema:null,*entries(n){if(Lo(n))for(const r in n){const a=n[r];yield[r,r,t],yield[r,a,e]}},validator:n=>Lo(n)||`Expected an object, but received: ${js(n)}`})}function y1(){return b1("string",t=>typeof t=="string"||`Expected a string, but received: ${js(t)}`)}function c3(t){const e=t.map(n=>n.type).join(" | ");return new Ji({type:"union",schema:null,coercer(n){for(const r of t){const[a,i]=r.validate(n,{coerce:!0});if(!a)return i}return n},validator(n,r){const a=[];for(const i of t){const[...s]=V_(n,i,r),[o]=s;if(!o[0])return[];for(const[c]of s)c&&a.push(c)}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${js(n)}`,...a]}})}function S6e(t){return function(e){return function(n){return typeof n=="object"&&n!==null&&"message"in n}(e)&&typeof e.message=="string"?e.message:e==null?"":String(e)}(t).replace(/\.$/u,"")}function A6e(t,e){var r,a;return n=t,typeof((a=(r=n==null?void 0:n.prototype)==null?void 0:r.constructor)==null?void 0:a.name)=="string"?new t({message:e}):t({message:e});var n}var C6e=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}};function oU(){throw new Error("setTimeout has not been defined")}function cU(){throw new Error("clearTimeout has not been defined")}var Oc=oU,Mc=cU;function dU(t){if(Oc===setTimeout)return setTimeout(t,0);if((Oc===oU||!Oc)&&setTimeout)return Oc=setTimeout,setTimeout(t,0);try{return Oc(t,0)}catch{try{return Oc.call(null,t,0)}catch{return Oc.call(this,t,0)}}}typeof Or.setTimeout=="function"&&(Oc=setTimeout),typeof Or.clearTimeout=="function"&&(Mc=clearTimeout);var td,Do=[],m6=!1,r2=-1;function I6e(){m6&&td&&(m6=!1,td.length?Do=td.concat(Do):r2=-1,Do.length&&lU())}function lU(){if(!m6){var t=dU(I6e);m6=!0;for(var e=Do.length;e;){for(td=Do,Do=[];++r2<e;)td&&td[r2].run();r2=-1,e=Do.length}td=null,m6=!1,function(n){if(Mc===clearTimeout)return clearTimeout(n);if((Mc===cU||!Mc)&&clearTimeout)return Mc=clearTimeout,clearTimeout(n);try{return Mc(n)}catch{try{return Mc.call(null,n)}catch{return Mc.call(this,n)}}}(t)}}function uU(t,e){this.fun=t,this.array=e}uU.prototype.run=function(){this.fun.apply(null,this.array)};function el(){}var O6e=el,M6e=el,P6e=el,k6e=el,N6e=el,R6e=el,D6e=el,zl=Or.performance||{},$6e=zl.now||zl.mozNow||zl.msNow||zl.oNow||zl.webkitNow||function(){return new Date().getTime()},L6e=new Date,Ft={nextTick:function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Do.push(new uU(t,e)),Do.length!==1||m6||dU(lU)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:O6e,addListener:M6e,once:P6e,off:k6e,removeListener:N6e,removeAllListeners:R6e,emit:D6e,binding:function(t){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(t){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*$6e.call(zl),n=Math.floor(e),r=Math.floor(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-L6e)/1e3}},P5=t=>iU(t);function UI({path:t,branch:e}){const n=t[t.length-1];return s8(e[e.length-2],n)}function o8(t){return new Ji({...t,type:`optional ${t.type}`,validator:(e,n)=>!UI(n)||t.validator(e,n),refiner:(e,n)=>!UI(n)||t.refiner(e,n)})}var ib,jI,HI,c8=c3([rU(null),b1("boolean",t=>typeof t=="boolean"),b1("finite number",t=>Su(t,aU())&&Number.isFinite(t)),y1(),nU(BI(()=>c8)),sU(y1(),BI(()=>c8))]),k5=(ib=c8,jI=b1("any",()=>!0),HI=t=>(function(e,n,r="Assertion failed",a=C6e){try{eU(e,n)}catch(i){throw A6e(a,`${r}: ${S6e(i)}.`)}}(t,c8),JSON.parse(JSON.stringify(t,(e,n)=>{if(e!=="__proto__"&&e!=="constructor")return n}))),new Ji({...ib,coercer:(t,e)=>Su(t,jI)?ib.coercer(HI(t,e),e):ib.coercer(t,e)}));function Iw(t){try{return function(e){tU(e,k5)}(t),!0}catch{return!1}}var Qf=rU("2.0"),a2=function(t){return new Ji({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}(c3([aU(),y1()])),Ow=P5({code:b1("integer",t=>typeof t=="number"&&!isNaN(t)&&Number.isInteger(t)||`Expected an integer, but received: ${js(t)}`),message:y1(),data:o8(k5),stack:o8(y1())}),fU=c3([sU(y1(),k5),nU(k5)]),B6e=P5({id:a2,jsonrpc:Qf,method:y1(),params:o8(fU)}),F6e=P5({jsonrpc:Qf,method:y1(),params:o8(fU)});function zI(t){return Su(t,B6e)}function qI(t){return Su(t,Ow)}iU({id:a2,jsonrpc:Qf,result:FI(b1("unknown",()=>!0)),error:FI(Ow)}),c3([P5({id:a2,jsonrpc:Qf,result:k5}),P5({id:a2,jsonrpc:Qf,error:Ow})]);var KI=$c.internal,U6e="Unspecified error message. This is a bug, please report it.",j6e={code:KI,message:pU(KI)},H6e="Unspecified server error.";function pU(t,e=U6e){if(function(n){return Number.isInteger(n)}(t)){const n=t.toString();if(s8(DI,n))return DI[n].message;if(function(r){return r>=-32099&&r<=-32e3}(t))return H6e}return e}function VI(t,{fallbackError:e=j6e,shouldIncludeStack:n=!0}={}){if(!qI(e))throw new Error("Must provide fallback error with integer number code and string message.");const r=function(a,i){if(a&&typeof a=="object"&&"serialize"in a&&typeof a.serialize=="function")return a.serialize();if(qI(a))return a;const s=hU(a);return{...i,data:{cause:s}}}(t,e);return n||delete r.stack,r}function hU(t){return Array.isArray(t)?t.map(e=>Iw(e)?e:$I(e)?WI(e):null):$I(t)?WI(t):Iw(t)?t:null}function WI(t){return Object.getOwnPropertyNames(t).reduce((e,n)=>{const r=t[n];return Iw(r)&&(e[n]=r),e},{})}var bU=Bf;Bf.default=Bf,Bf.stable=GI,Bf.stableStringify=GI;var d8="[...]",yU="[Circular]",Pd=[],nd=[];function mU(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Bf(t,e,n,r){var a;r===void 0&&(r=mU()),Mw(t,"",0,[],void 0,0,r);try{a=nd.length===0?JSON.stringify(t,e,n):JSON.stringify(t,gU(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Pd.length!==0;){var i=Pd.pop();i.length===4?Object.defineProperty(i[0],i[1],i[3]):i[0][i[1]]=i[2]}}return a}function g6(t,e,n,r){var a=Object.getOwnPropertyDescriptor(r,n);a.get!==void 0?a.configurable?(Object.defineProperty(r,n,{value:t}),Pd.push([r,n,e,a])):nd.push([e,n,t]):(r[n]=t,Pd.push([r,n,e]))}function Mw(t,e,n,r,a,i,s){var o;if(i+=1,typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t)return void g6(yU,t,e,a);if(s.depthLimit!==void 0&&i>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void g6(d8,t,e,a);if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)Mw(t[o],o,o,r,t,i,s);else{var c=Object.keys(t);for(o=0;o<c.length;o++){var d=c[o];Mw(t[d],d,o,r,t,i,s)}}r.pop()}}function z6e(t,e){return t<e?-1:t>e?1:0}function GI(t,e,n,r){r===void 0&&(r=mU());var a,i=Pw(t,"",0,[],void 0,0,r)||t;try{a=nd.length===0?JSON.stringify(i,e,n):JSON.stringify(i,gU(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Pd.length!==0;){var s=Pd.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return a}function Pw(t,e,n,r,a,i,s){var o;if(i+=1,typeof t=="object"&&t!==null){for(o=0;o<r.length;o++)if(r[o]===t)return void g6(yU,t,e,a);try{if(typeof t.toJSON=="function")return}catch{return}if(s.depthLimit!==void 0&&i>s.depthLimit||s.edgesLimit!==void 0&&n+1>s.edgesLimit)return void g6(d8,t,e,a);if(r.push(t),Array.isArray(t))for(o=0;o<t.length;o++)Pw(t[o],o,o,r,t,i,s);else{var c={},d=Object.keys(t).sort(z6e);for(o=0;o<d.length;o++){var l=d[o];Pw(t[l],l,o,r,t,i,s),c[l]=t[l]}if(a===void 0)return c;Pd.push([a,e,t]),a[e]=c}r.pop()}}function gU(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(nd.length>0)for(var r=0;r<nd.length;r++){var a=nd[r];if(a[1]===e&&a[0]===n){n=a[2],nd.splice(r,1);break}}return t.call(this,e,n)}}var q6e=s3(bU),vo=class extends Error{constructor(t,e,n){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!e||typeof e!="string")throw new Error('"message" must be a non-empty string.');super(e),this.code=t,n!==void 0&&(this.data=n)}serialize(){const t={code:this.code,message:this.message};return this.data!==void 0&&(t.data=this.data,function(e){if(typeof e!="object"||e===null)return!1;try{let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}catch{return!1}}(this.data)&&(t.data.cause=hU(this.data.cause))),this.stack&&(t.stack=this.stack),t}toString(){return q6e(this.serialize(),K6e,2)}};function K6e(t,e){if(e!=="[Circular]")return e}var e5=t=>V6e($c.invalidRequest,t);function V6e(t,e){const[n,r]=function(a){if(a){if(typeof a=="string")return[a];if(typeof a=="object"&&!Array.isArray(a)){const{message:i,data:s}=a;if(i&&typeof i!="string")throw new Error("Must specify string message.");return[i??void 0,s]}}return[]}(e);return new vo(t,n??pU(t),r)}var wU={};function Pc(){}function Jt(){Jt.init.call(this)}function vU(t){return t._maxListeners===void 0?Jt.defaultMaxListeners:t._maxListeners}function YI(t,e,n,r){var a,i,s;if(typeof n!="function")throw new TypeError('"listener" argument must be a function');if((i=t._events)?(i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),s=i[e]):(i=t._events=new Pc,t._eventsCount=0),s){if(typeof s=="function"?s=i[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),!s.warned&&(a=vU(t))&&a>0&&s.length>a){s.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=s.length,function(c){typeof console.warn=="function"?console.warn(c):console.log(c)}(o)}}else s=i[e]=n,++t._eventsCount;return t}function JI(t,e,n){var r=!1;function a(){t.removeListener(e,a),r||(r=!0,n.apply(t,arguments))}return a.listener=n,a}function ZI(t){var e=this._events;if(e){var n=e[t];if(typeof n=="function")return 1;if(n)return n.length}return 0}function bf(t,e){for(var n=new Array(e);e--;)n[e]=t[e];return n}Pc.prototype=Object.create(null),Jt.EventEmitter=Jt,Jt.usingDomains=!1,Jt.prototype.domain=void 0,Jt.prototype._events=void 0,Jt.prototype._maxListeners=void 0,Jt.defaultMaxListeners=10,Jt.init=function(){this.domain=null,Jt.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Pc,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Jt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},Jt.prototype.getMaxListeners=function(){return vU(this)},Jt.prototype.emit=function(t){var e,n,r,a,i,s,o,c=t==="error";if(s=this._events)c=c&&s.error==null;else if(!c)return!1;if(o=this.domain,c){if(e=arguments[1],!o){if(e instanceof Error)throw e;var d=new Error('Uncaught, unspecified "error" event. ('+e+")");throw d.context=e,d}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=o,e.domainThrown=!1,o.emit("error",e),!1}if(!(n=s[t]))return!1;var l=typeof n=="function";switch(r=arguments.length){case 1:(function(u,f,p){if(f)u.call(p);else for(var h=u.length,b=bf(u,h),v=0;v<h;++v)b[v].call(p)})(n,l,this);break;case 2:(function(u,f,p,h){if(f)u.call(p,h);else for(var b=u.length,v=bf(u,b),m=0;m<b;++m)v[m].call(p,h)})(n,l,this,arguments[1]);break;case 3:(function(u,f,p,h,b){if(f)u.call(p,h,b);else for(var v=u.length,m=bf(u,v),T=0;T<v;++T)m[T].call(p,h,b)})(n,l,this,arguments[1],arguments[2]);break;case 4:(function(u,f,p,h,b,v){if(f)u.call(p,h,b,v);else for(var m=u.length,T=bf(u,m),A=0;A<m;++A)T[A].call(p,h,b,v)})(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=new Array(r-1),i=1;i<r;i++)a[i-1]=arguments[i];(function(u,f,p,h){if(f)u.apply(p,h);else for(var b=u.length,v=bf(u,b),m=0;m<b;++m)v[m].apply(p,h)})(n,l,this,a)}return!0},Jt.prototype.addListener=function(t,e){return YI(this,t,e,!1)},Jt.prototype.on=Jt.prototype.addListener,Jt.prototype.prependListener=function(t,e){return YI(this,t,e,!0)},Jt.prototype.once=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.on(t,JI(this,t,e)),this},Jt.prototype.prependOnceListener=function(t,e){if(typeof e!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(t,JI(this,t,e)),this},Jt.prototype.removeListener=function(t,e){var n,r,a,i,s;if(typeof e!="function")throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[t]))return this;if(n===e||n.listener&&n.listener===e)--this._eventsCount==0?this._events=new Pc:(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,i=n.length;i-- >0;)if(n[i]===e||n[i].listener&&n[i].listener===e){s=n[i].listener,a=i;break}if(a<0)return this;if(n.length===1){if(n[0]=void 0,--this._eventsCount==0)return this._events=new Pc,this;delete r[t]}else(function(o,c){for(var d=c,l=d+1,u=o.length;l<u;d+=1,l+=1)o[d]=o[l];o.pop()})(n,a);r.removeListener&&this.emit("removeListener",t,s||e)}return this},Jt.prototype.off=function(t,e){return this.removeListener(t,e)},Jt.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return arguments.length===0?(this._events=new Pc,this._eventsCount=0):n[t]&&(--this._eventsCount==0?this._events=new Pc:delete n[t]),this;if(arguments.length===0){for(var r,a=Object.keys(n),i=0;i<a.length;++i)(r=a[i])!=="removeListener"&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new Pc,this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e)do this.removeListener(t,e[e.length-1]);while(e[0]);return this},Jt.prototype.listeners=function(t){var e,n,r=this._events;return n=r&&(e=r[t])?typeof e=="function"?[e.listener||e]:function(a){for(var i=new Array(a.length),s=0;s<i.length;++s)i[s]=a[s].listener||a[s];return i}(e):[],n},Jt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ZI.call(t,e)},Jt.prototype.listenerCount=ZI,Jt.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var W_=qp(Object.freeze({__proto__:null,EventEmitter:Jt,default:Jt}));Object.defineProperty(wU,"__esModule",{value:!0});const W6e=W_;function XI(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let G6e=class extends W6e.EventEmitter{emit(e,...n){let r=e==="error";const a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;const o=new Error("Unhandled error."+(s?` (${s.message})`:""));throw o.context=s,o}const i=a[e];if(i===void 0)return!1;if(typeof i=="function")XI(i,this,n);else{const s=i.length,o=function(c){const d=c.length,l=new Array(d);for(let u=0;u<d;u+=1)l[u]=c[u];return l}(i);for(let c=0;c<s;c+=1)XI(o[c],this,n)}return!0}};var l8,Lc,e6,Ff,i2,s2,kw,o2,Nw,Bg,QI,c2,Rw,Fg,eO,t5,u8,Ug,tO,EU=wU.default=G6e,Ii=class d2 extends EU{constructor({notificationHandler:e}={}){super(),Ni(this,Ff),Ni(this,s2),Ni(this,o2),Ni(this,l8,!1),Ni(this,Lc,void 0),Ni(this,e6,void 0),ab(this,Lc,[]),ab(this,e6,e)}destroy(){Kc(this,Lc).forEach(e=>{"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}),ab(this,Lc,[]),ab(this,l8,!0)}push(e){vr(this,Ff,i2).call(this),Kc(this,Lc).push(e)}handle(e,n){if(vr(this,Ff,i2).call(this),n&&typeof n!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?n?vr(this,s2,kw).call(this,e,n):vr(this,s2,kw).call(this,e):n?vr(this,o2,Nw).call(this,e,n):this._promiseHandle(e)}asMiddleware(){return vr(this,Ff,i2).call(this),async(e,n,r,a)=>{var i,s;try{const[o,c,d]=await vr(i=d2,c2,Rw).call(i,e,n,Kc(this,Lc));return c?(await vr(s=d2,t5,u8).call(s,d),a(o)):r(async l=>{var u;try{await vr(u=d2,t5,u8).call(u,d)}catch(f){return l(f)}return l()})}catch(o){return a(o)}}}async _promiseHandle(e){return new Promise((n,r)=>{vr(this,o2,Nw).call(this,e,(a,i)=>{a&&i===void 0?r(a):n(i)}).catch(r)})}};l8=new WeakMap,Lc=new WeakMap,e6=new WeakMap,Ff=new WeakSet,i2=function(){if(Kc(this,l8))throw new Error("This engine is destroyed and can no longer be used.")},s2=new WeakSet,kw=async function(t,e){try{if(t.length===0){const r=[{id:null,jsonrpc:"2.0",error:new vo($c.invalidRequest,"Request batch must contain plain objects. Received an empty array")}];return e?e(null,r):r}const n=(await Promise.all(t.map(this._promiseHandle.bind(this)))).filter(r=>r!==void 0);return e?e(null,n):n}catch(n){if(e)return e(n);throw n}},o2=new WeakSet,Nw=async function(t,e){var n;if(!t||Array.isArray(t)||typeof t!="object"){const s=new vo($c.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t});return e(s,{id:null,jsonrpc:"2.0",error:s})}if(typeof t.method!="string"){const s=new vo($c.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t});return Kc(this,e6)&&!zI(t)?e(null):e(s,{id:t.id??null,jsonrpc:"2.0",error:s})}if(Kc(this,e6)&&Su(t,F6e)&&!zI(t)){try{await Kc(this,e6).call(this,t)}catch(s){return e(s)}return e(null)}let r=null;const a={...t},i={id:a.id,jsonrpc:a.jsonrpc};try{await vr(n=Ii,Bg,QI).call(n,a,i,Kc(this,Lc))}catch(s){r=s}return r&&(delete i.result,i.error||(i.error=VI(r))),e(r,i)},Bg=new WeakSet,QI=async function(t,e,n){var r,a,i;const[s,o,c]=await vr(r=Ii,c2,Rw).call(r,t,e,n);if(vr(a=Ii,Ug,tO).call(a,t,e,o),await vr(i=Ii,t5,u8).call(i,c),s)throw s},c2=new WeakSet,Rw=async function(t,e,n){var r;const a=[];let i=null,s=!1;for(const o of n)if([i,s]=await vr(r=Ii,Fg,eO).call(r,t,e,o,a),s)break;return[i,s,a.reverse()]},Fg=new WeakSet,eO=async function(t,e,n,r){return new Promise(a=>{const i=o=>{const c=o||e.error;c&&(e.error=VI(c)),a([c,!0])},s=o=>{e.error?i(e.error):(o&&(typeof o!="function"&&i(new vo($c.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof o}" for request:
${jg(t)}`,{request:t})),r.push(o)),a([null,!1]))};try{n(t,e,s,i)}catch(o){i(o)}})},t5=new WeakSet,u8=async function(t){for(const e of t)await new Promise((n,r)=>{e(a=>a?r(a):n())})},Ug=new WeakSet,tO=function(t,e,n){if(!s8(e,"result")&&!s8(e,"error"))throw new vo($c.internal,`JsonRpcEngine: Response has no error or result for request:
${jg(t)}`,{request:t});if(!n)throw new vo($c.internal,`JsonRpcEngine: Nothing ended request:
${jg(t)}`,{request:t})},Ni(Ii,Bg),Ni(Ii,c2),Ni(Ii,Fg),Ni(Ii,t5),Ni(Ii,Ug);var Y6e=Ii;function jg(t){return JSON.stringify(t,null,2)}var _U=Object.freeze(["eth_subscription"]),J6e=(t=console)=>[_6e(),Z6e(t),E6e(t)];function Z6e(t){return(e,n,r)=>{typeof e.method=="string"&&e.method||(n.error=e5({message:"The request 'method' must be a non-empty string.",data:e})),r(a=>{const{error:i}=n;return i&&t.error(`MetaMask - RPC Error: ${i.message}`,i),a()})}}var l2=(t,e,n=!0)=>(r,a)=>{r||a.error?e(r||a.error):!n||Array.isArray(a)?t(a):t(a.result)},TU=t=>!!t&&typeof t=="string"&&t.startsWith("0x"),xU=()=>{};async function nO(t,e){try{const n=await async function(){return{name:X6e(window),icon:await Q6e(window)}}();t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:n},xU)}catch(n){e.error({message:Fn.errors.sendSiteMetadata(),originalError:n})}}function X6e(t){const{document:e}=t,n=e.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;const r=e.querySelector('head > meta[name="title"]');return r?r.content:e.title&&e.title.length>0?e.title:window.location.hostname}async function Q6e(t){const{document:e}=t,n=e.querySelectorAll('head > link[rel~="icon"]');for(const r of Array.from(n))if(r&&await eue(r.href))return r.href;return null}async function eue(t){return new Promise((e,n)=>{try{const r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(r){n(r)}})}var SU=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},Es=(t,e,n)=>(SU(t,e,"read from private field"),n?n.call(t):e.get(t)),Dw=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Eo=(t,e,n,r)=>(SU(t,e,"write to private field"),e.set(t,n),n);function rO(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}let tue=class extends Jt{emit(e,...n){let r=e==="error";const a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;const o=new Error("Unhandled error."+(s?` (${s.message})`:""));throw o.context=s,o}const i=a[e];if(i===void 0)return!1;if(typeof i=="function")rO(i,this,n);else{const s=i.length,o=function(c){const d=c.length,l=new Array(d);for(let u=0;u<d;u+=1)l[u]=c[u];return l}(i);for(let c=0;c<s;c+=1)rO(o[c],this,n)}return!0}};var kc,L1,nue=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,a,i;if(Array.isArray(e)){if((r=e.length)!=n.length)return!1;for(a=r;a--!=0;)if(!t(e[a],n[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((r=(i=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(a=r;a--!=0;)if(!Object.prototype.hasOwnProperty.call(n,i[a]))return!1;for(a=r;a--!=0;){var s=i[a];if(!t(e[s],n[s]))return!1}return!0}return e!=e&&n!=n},rue=s3(nue),AU=class CU extends tue{constructor({logger:e=console,maxEventListeners:n=100,rpcMiddleware:r=[]}={}){super(),Dw(this,kc,void 0),Dw(this,L1,void 0),this._log=e,this.setMaxListeners(n),this._state={...CU._defaultState},Eo(this,L1,null),Eo(this,kc,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);const a=new Y6e;r.forEach(i=>a.push(i)),this._rpcEngine=a}get chainId(){return Es(this,kc)}get selectedAddress(){return Es(this,L1)}isConnected(){return this._state.isConnected}async request(e){if(!e||typeof e!="object"||Array.isArray(e))throw e5({message:Fn.errors.invalidRequestArgs(),data:e});const{method:n,params:r}=e;if(typeof n!="string"||n.length===0)throw e5({message:Fn.errors.invalidRequestMethod(),data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw e5({message:Fn.errors.invalidRequestParams(),data:e});const a=r==null?{method:n}:{method:n,params:r};return new Promise((i,s)=>{this._rpcRequest(a,l2(i,s))})}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){const{accounts:n,chainId:r,isUnlocked:a,networkVersion:i}=e;this._handleConnect(r),this._handleChainChanged({chainId:r,networkVersion:i}),this._handleUnlockStateChanged({accounts:n,isUnlocked:a}),this._handleAccountsChanged(n)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,n){let r=n;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),e.method!=="eth_accounts"&&e.method!=="eth_requestAccounts"||(r=(a,i)=>{this._handleAccountsChanged(i.result??[],e.method==="eth_accounts"),n(a,i)})),this._rpcEngine.handle(e,r)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(Fn.info.connected(e)))}_handleDisconnect(e,n){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new vo(1013,n??Fn.errors.disconnected()),this._log.debug(r)):(r=new vo(1011,n??Fn.errors.permanentlyDisconnected()),this._log.error(r),Eo(this,kc,null),this._state.accounts=null,Eo(this,L1,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleChainChanged({chainId:e}={}){TU(e)?(this._handleConnect(e),e!==Es(this,kc)&&(Eo(this,kc,e),this._state.initialized&&this.emit("chainChanged",Es(this,kc)))):this._log.error(Fn.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e,n=!1){let r=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),r=[]);for(const a of e)if(typeof a!="string"){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),r=[];break}if(!rue(this._state.accounts,r)&&(n&&this._state.accounts!==null&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",r),this._state.accounts=r,Es(this,L1)!==r[0]&&Eo(this,L1,r[0]||null),this._state.initialized)){const a=[...r];this.emit("accountsChanged",a)}}_handleUnlockStateChanged({accounts:e,isUnlocked:n}={}){typeof n=="boolean"?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(e??[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}};kc=new WeakMap,L1=new WeakMap,AU._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1};var aO,iO,aue=AU,$w={exports:{}};function IU(){return iO?aO:(iO=1,aO=W_.EventEmitter)}var G_,Y_=qp(wle);G_=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t};var OU=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},iue=/%[sdj%]/g;function d3(t){if(!N5(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(ks(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,a=r.length,i=String(t).replace(iue,function(o){if(o==="%%")return"%";if(n>=a)return o;switch(o){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch{return"[Circular]"}default:return o}}),s=r[n];n<a;s=r[++n])Wp(s)||!tl(s)?i+=" "+s:i+=" "+ks(s);return i}function J_(t,e){if(Ts(Or.process))return function(){return J_(t,e).apply(this,arguments)};if(Ft.noDeprecation===!0)return t;var n=!1;return function(){if(!n){if(Ft.throwDeprecation)throw new Error(e);Ft.traceDeprecation?console.trace(e):console.error(e),n=!0}return t.apply(this,arguments)}}var Hg,sb={};function MU(t){return Ts(Hg)&&(Hg=Ft.env.NODE_DEBUG||""),t=t.toUpperCase(),!sb[t]&&(new RegExp("\\b"+t+"\\b","i").test(Hg)?sb[t]=function(){var e=d3.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:sb[t]=function(){}),sb[t]}function ks(t,e){var n={seen:[],stylize:oue};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),l3(e)?n.showHidden=e:e&&eT(n,e),Ts(n.showHidden)&&(n.showHidden=!1),Ts(n.depth)&&(n.depth=2),Ts(n.colors)&&(n.colors=!1),Ts(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=sue),f8(n,t,n.depth)}function sue(t,e){var n=ks.styles[e];return n?"\x1B["+ks.colors[n][0]+"m"+t+"\x1B["+ks.colors[n][1]+"m":t}function oue(t,e){return t}function f8(t,e,n){if(t.customInspect&&e&&a5(e.inspect)&&e.inspect!==ks&&(!e.constructor||e.constructor.prototype!==e)){var r=e.inspect(n,t);return N5(r)||(r=f8(t,r,n)),r}var a=function(f,p){if(Ts(p))return f.stylize("undefined","undefined");if(N5(p)){var h="'"+JSON.stringify(p).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return f.stylize(h,"string")}if(X_(p))return f.stylize(""+p,"number");if(l3(p))return f.stylize(""+p,"boolean");if(Wp(p))return f.stylize("null","null")}(t,e);if(a)return a;var i=Object.keys(e),s=function(f){var p={};return f.forEach(function(h,b){p[h]=!0}),p}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),r5(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return zg(e);if(i.length===0){if(a5(e)){var o=e.name?": "+e.name:"";return t.stylize("[Function"+o+"]","special")}if(n5(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(p8(e))return t.stylize(Date.prototype.toString.call(e),"date");if(r5(e))return zg(e)}var c,d="",l=!1,u=["{","}"];return Z_(e)&&(l=!0,u=["[","]"]),a5(e)&&(d=" [Function"+(e.name?": "+e.name:"")+"]"),n5(e)&&(d=" "+RegExp.prototype.toString.call(e)),p8(e)&&(d=" "+Date.prototype.toUTCString.call(e)),r5(e)&&(d=" "+zg(e)),i.length!==0||l&&e.length!=0?n<0?n5(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),c=l?function(f,p,h,b,v){for(var m=[],T=0,A=p.length;T<A;++T)$U(p,String(T))?m.push(qg(f,p,h,b,String(T),!0)):m.push("");return v.forEach(function(N){N.match(/^\d+$/)||m.push(qg(f,p,h,b,N,!0))}),m}(t,e,n,s,i):i.map(function(f){return qg(t,e,n,s,f,l)}),t.seen.pop(),function(f,p,h){var b=f.reduce(function(v,m){return m.indexOf(`
`),v+m.replace(/\u001b\[\d\d?m/g,"").length+1},0);return b>60?h[0]+(p===""?"":p+`
 `)+" "+f.join(`,
  `)+" "+h[1]:h[0]+p+" "+f.join(", ")+" "+h[1]}(c,d,u)):u[0]+d+u[1]}function zg(t){return"["+Error.prototype.toString.call(t)+"]"}function qg(t,e,n,r,a,i){var s,o,c;if((c=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]}).get?o=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(o=t.stylize("[Setter]","special")),$U(r,a)||(s="["+a+"]"),o||(t.seen.indexOf(c.value)<0?(o=Wp(n)?f8(t,c.value,null):f8(t,c.value,n-1)).indexOf(`
`)>-1&&(o=i?o.split(`
`).map(function(d){return"  "+d}).join(`
`).substr(2):`
`+o.split(`
`).map(function(d){return"   "+d}).join(`
`)):o=t.stylize("[Circular]","special")),Ts(s)){if(i&&a.match(/^\d+$/))return o;(s=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function Z_(t){return Array.isArray(t)}function l3(t){return typeof t=="boolean"}function Wp(t){return t===null}function PU(t){return t==null}function X_(t){return typeof t=="number"}function N5(t){return typeof t=="string"}function kU(t){return typeof t=="symbol"}function Ts(t){return t===void 0}function n5(t){return tl(t)&&Q_(t)==="[object RegExp]"}function tl(t){return typeof t=="object"&&t!==null}function p8(t){return tl(t)&&Q_(t)==="[object Date]"}function r5(t){return tl(t)&&(Q_(t)==="[object Error]"||t instanceof Error)}function a5(t){return typeof t=="function"}function NU(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||t===void 0}function RU(t){return ye.isBuffer(t)}function Q_(t){return Object.prototype.toString.call(t)}function Kg(t){return t<10?"0"+t.toString(10):t.toString(10)}ks.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},ks.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var cue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function DU(){var t,e;console.log("%s - %s",(t=new Date,e=[Kg(t.getHours()),Kg(t.getMinutes()),Kg(t.getSeconds())].join(":"),[t.getDate(),cue[t.getMonth()],e].join(" ")),d3.apply(null,arguments))}function eT(t,e){if(!e||!tl(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}function $U(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var B1=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;function tT(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');if(B1&&t[B1]){var e;if(typeof(e=t[B1])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,B1,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var n,r,a=new Promise(function(o,c){n=o,r=c}),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push(function(o,c){o?r(o):n(c)});try{t.apply(this,i)}catch(o){r(o)}return a}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),B1&&Object.defineProperty(e,B1,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,OU(t))}function due(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}function LU(t){if(typeof t!="function")throw new TypeError('The "original" argument must be of type Function');function e(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=n.pop();if(typeof a!="function")throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return a.apply(i,arguments)};t.apply(this,n).then(function(o){Ft.nextTick(s.bind(null,null,o))},function(o){Ft.nextTick(due.bind(null,o,s))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,OU(t)),e}tT.custom=B1;var Vg,sO,Wg,oO,lue={inherits:G_,_extend:eT,log:DU,isBuffer:RU,isPrimitive:NU,isFunction:a5,isError:r5,isDate:p8,isObject:tl,isRegExp:n5,isUndefined:Ts,isSymbol:kU,isString:N5,isNumber:X_,isNullOrUndefined:PU,isNull:Wp,isBoolean:l3,isArray:Z_,inspect:ks,deprecate:J_,format:d3,debuglog:MU,promisify:tT,callbackify:LU},BU=qp(Object.freeze({__proto__:null,_extend:eT,callbackify:LU,debuglog:MU,default:lue,deprecate:J_,format:d3,inherits:G_,inspect:ks,isArray:Z_,isBoolean:l3,isBuffer:RU,isDate:p8,isError:r5,isFunction:a5,isNull:Wp,isNullOrUndefined:PU,isNumber:X_,isObject:tl,isPrimitive:NU,isRegExp:n5,isString:N5,isSymbol:kU,isUndefined:Ts,log:DU,promisify:tT}));function uue(){if(sO)return Vg;function t(c,d){var l=Object.keys(c);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(c);d&&(u=u.filter(function(f){return Object.getOwnPropertyDescriptor(c,f).enumerable})),l.push.apply(l,u)}return l}function e(c){for(var d=1;d<arguments.length;d++){var l=arguments[d]!=null?arguments[d]:{};d%2?t(Object(l),!0).forEach(function(u){n(c,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(l)):t(Object(l)).forEach(function(u){Object.defineProperty(c,u,Object.getOwnPropertyDescriptor(l,u))})}return c}function n(c,d,l){return(d=a(d))in c?Object.defineProperty(c,d,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[d]=l,c}function r(c,d,l){return d&&function(u,f){for(var p=0;p<f.length;p++){var h=f[p];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(u,a(h.key),h)}}(c.prototype,d),Object.defineProperty(c,"prototype",{writable:!1}),c}function a(c){var d=function(l,u){if(typeof l!="object"||l===null)return l;var f=l[Symbol.toPrimitive];if(f!==void 0){var p=f.call(l,u);if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(c,"string");return typeof d=="symbol"?d:String(d)}sO=1;var i=Y_.Buffer,s=BU.inspect,o=s&&s.custom||"inspect";return Vg=function(){function c(){(function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")})(this,c),this.head=null,this.tail=null,this.length=0}return r(c,[{key:"push",value:function(d){var l={data:d,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}},{key:"unshift",value:function(d){var l={data:d,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var l=this.head,u=""+l.data;l=l.next;)u+=d+l.data;return u}},{key:"concat",value:function(d){if(this.length===0)return i.alloc(0);for(var l,u,f,p=i.allocUnsafe(d>>>0),h=this.head,b=0;h;)l=h.data,u=p,f=b,i.prototype.copy.call(l,u,f),b+=h.data.length,h=h.next;return p}},{key:"consume",value:function(d,l){var u;return d<this.head.data.length?(u=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):u=d===this.head.data.length?this.shift():l?this._getString(d):this._getBuffer(d),u}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var l=this.head,u=1,f=l.data;for(d-=f.length;l=l.next;){var p=l.data,h=d>p.length?p.length:d;if(h===p.length?f+=p:f+=p.slice(0,d),(d-=h)===0){h===p.length?(++u,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=p.slice(h));break}++u}return this.length-=u,f}},{key:"_getBuffer",value:function(d){var l=i.allocUnsafe(d),u=this.head,f=1;for(u.data.copy(l),d-=u.data.length;u=u.next;){var p=u.data,h=d>p.length?p.length:d;if(p.copy(l,l.length-d,0,h),(d-=h)===0){h===p.length?(++f,u.next?this.head=u.next:this.head=this.tail=null):(this.head=u,u.data=p.slice(h));break}++f}return this.length-=f,l}},{key:o,value:function(d,l){return s(this,e(e({},l),{},{depth:0,customInspect:!1}))}}]),c}(),Vg}function FU(){if(oO)return Wg;function t(r,a){n(r,a),e(r)}function e(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function n(r,a){r.emit("error",a)}return oO=1,Wg={destroy:function(r,a){var i=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(a?a(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ft.nextTick(n,this,r)):Ft.nextTick(n,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(c){!a&&c?i._writableState?i._writableState.errorEmitted?Ft.nextTick(e,i):(i._writableState.errorEmitted=!0,Ft.nextTick(t,i,c)):Ft.nextTick(t,i,c):a?(Ft.nextTick(e,i),a(c)):Ft.nextTick(e,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(r,a){var i=r._readableState,s=r._writableState;i&&i.autoDestroy||s&&s.autoDestroy?r.destroy(a):r.emit("error",a)}},Wg}var nl={},cO,dO,UU={};function qa(t,e,n){n||(n=Error);var r=function(a){var i,s;function o(c,d,l){return a.call(this,function(u,f,p){return typeof e=="string"?e:e(u,f,p)}(c,d,l))||this}return s=a,(i=o).prototype=Object.create(s.prototype),i.prototype.constructor=i,i.__proto__=s,o}(n);r.prototype.name=n.name,r.prototype.code=t,UU[t]=r}function lO(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(r){return String(r)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}function jU(){if(dO)return cO;dO=1;var t=nl.codes.ERR_INVALID_OPT_VALUE;return cO={getHighWaterMark:function(e,n,r,a){var i=function(s,o,c){return s.highWaterMark!=null?s.highWaterMark:o?s[c]:null}(n,a,r);if(i!=null){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new t(a?r:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}}qa("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),qa("ERR_INVALID_ARG_TYPE",function(t,e,n){var r,a,i;if(typeof e=="string"&&(a="not ",e.substr(0,a.length)===a)?(r="must not be",e=e.replace(/^not /,"")):r="must be",function(o,c,d){return(d===void 0||d>o.length)&&(d=o.length),o.substring(d-c.length,d)===c}(t," argument"))i="The ".concat(t," ").concat(r," ").concat(lO(e,"type"));else{var s=function(o,c,d){return typeof d!="number"&&(d=0),!(d+c.length>o.length)&&o.indexOf(c,d)!==-1}(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(r," ").concat(lO(e,"type"))}return i+=". Received type ".concat(typeof n)},TypeError),qa("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),qa("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),qa("ERR_STREAM_PREMATURE_CLOSE","Premature close"),qa("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),qa("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),qa("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),qa("ERR_STREAM_WRITE_AFTER_END","write after end"),qa("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),qa("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),qa("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),nl.codes=UU;var Gg,uO,Yg,fO,Jg,pO,fue=typeof Object.create=="function"?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Gp=qp(Object.freeze({__proto__:null,default:fue}));function pue(){if(uO)return Gg;function t(e){try{if(!di.localStorage)return!1}catch{return!1}var n=di.localStorage[e];return n!=null&&String(n).toLowerCase()==="true"}return uO=1,Gg=function(e,n){if(t("noDeprecation"))return e;var r=!1;return function(){if(!r){if(t("throwDeprecation"))throw new Error(n);t("traceDeprecation")?console.trace(n):console.warn(n),r=!0}return e.apply(this,arguments)}},Gg}function HU(){if(fO)return Yg;function t(y){var E=this;this.next=null,this.entry=null,this.finish=function(){(function(C,g,x){var O=C.entry;for(C.entry=null;O;){var S=O.callback;g.pendingcb--,S(x),O=O.next}g.corkedRequestsFree.next=C})(E,y)}}var e;fO=1,Yg=R,R.WritableState=N;var n={deprecate:pue()},r=IU(),a=Y_.Buffer,i=(di!==void 0?di:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},s,o=FU(),c=jU().getHighWaterMark,d=nl.codes,l=d.ERR_INVALID_ARG_TYPE,u=d.ERR_METHOD_NOT_IMPLEMENTED,f=d.ERR_MULTIPLE_CALLBACK,p=d.ERR_STREAM_CANNOT_PIPE,h=d.ERR_STREAM_DESTROYED,b=d.ERR_STREAM_NULL_VALUES,v=d.ERR_STREAM_WRITE_AFTER_END,m=d.ERR_UNKNOWN_ENCODING,T=o.errorOrDestroy;function A(){}function N(y,E,C){e=e||q6(),y=y||{},typeof C!="boolean"&&(C=E instanceof e),this.objectMode=!!y.objectMode,C&&(this.objectMode=this.objectMode||!!y.writableObjectMode),this.highWaterMark=c(this,y,"writableHighWaterMark",C),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var g=y.decodeStrings===!1;this.decodeStrings=!g,this.defaultEncoding=y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(x){(function(O,S){var w=O._writableState,_=w.sync,k=w.writecb;if(typeof k!="function")throw new f;if(function(D){D.writing=!1,D.writecb=null,D.length-=D.writelen,D.writelen=0}(w),S)(function(D,U,j,H,W){--U.pendingcb,j?(Ft.nextTick(W,H),Ft.nextTick(M,D,U),D._writableState.errorEmitted=!0,T(D,H)):(W(H),D._writableState.errorEmitted=!0,T(D,H),M(D,U))})(O,w,_,S,k);else{var L=P(w)||O.destroyed;L||w.corked||w.bufferProcessing||!w.bufferedRequest||I(O,w),_?Ft.nextTick(F,O,w,L,k):F(O,w,L,k)}})(E,x)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=y.emitClose!==!1,this.autoDestroy=!!y.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function R(y){var E=this instanceof(e=e||q6());if(!E&&!s.call(R,this))return new R(y);this._writableState=new N(y,this,E),this.writable=!0,y&&(typeof y.write=="function"&&(this._write=y.write),typeof y.writev=="function"&&(this._writev=y.writev),typeof y.destroy=="function"&&(this._destroy=y.destroy),typeof y.final=="function"&&(this._final=y.final)),r.call(this)}function B(y,E,C,g,x,O,S){E.writelen=g,E.writecb=S,E.writing=!0,E.sync=!0,E.destroyed?E.onwrite(new h("write")):C?y._writev(x,E.onwrite):y._write(x,O,E.onwrite),E.sync=!1}function F(y,E,C,g){C||function(x,O){O.length===0&&O.needDrain&&(O.needDrain=!1,x.emit("drain"))}(y,E),E.pendingcb--,g(),M(y,E)}function I(y,E){E.bufferProcessing=!0;var C=E.bufferedRequest;if(y._writev&&C&&C.next){var g=E.bufferedRequestCount,x=new Array(g),O=E.corkedRequestsFree;O.entry=C;for(var S=0,w=!0;C;)x[S]=C,C.isBuf||(w=!1),C=C.next,S+=1;x.allBuffers=w,B(y,E,!0,E.length,x,"",O.finish),E.pendingcb++,E.lastBufferedRequest=null,O.next?(E.corkedRequestsFree=O.next,O.next=null):E.corkedRequestsFree=new t(E),E.bufferedRequestCount=0}else{for(;C;){var _=C.chunk,k=C.encoding,L=C.callback;if(B(y,E,!1,E.objectMode?1:_.length,_,k,L),C=C.next,E.bufferedRequestCount--,E.writing)break}C===null&&(E.lastBufferedRequest=null)}E.bufferedRequest=C,E.bufferProcessing=!1}function P(y){return y.ending&&y.length===0&&y.bufferedRequest===null&&!y.finished&&!y.writing}function $(y,E){y._final(function(C){E.pendingcb--,C&&T(y,C),E.prefinished=!0,y.emit("prefinish"),M(y,E)})}function M(y,E){var C=P(E);if(C&&(function(x,O){O.prefinished||O.finalCalled||(typeof x._final!="function"||O.destroyed?(O.prefinished=!0,x.emit("prefinish")):(O.pendingcb++,O.finalCalled=!0,Ft.nextTick($,x,O)))}(y,E),E.pendingcb===0&&(E.finished=!0,y.emit("finish"),E.autoDestroy))){var g=y._readableState;(!g||g.autoDestroy&&g.endEmitted)&&y.destroy()}return C}return Gp(R,r),N.prototype.getBuffer=function(){for(var y=this.bufferedRequest,E=[];y;)E.push(y),y=y.next;return E},function(){try{Object.defineProperty(N.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(R,Symbol.hasInstance,{value:function(y){return!!s.call(this,y)||this===R&&y&&y._writableState instanceof N}})):s=function(y){return y instanceof this},R.prototype.pipe=function(){T(this,new p)},R.prototype.write=function(y,E,C){var g,x=this._writableState,O=!1,S=!x.objectMode&&(g=y,a.isBuffer(g)||g instanceof i);return S&&!a.isBuffer(y)&&(y=function(w){return a.from(w)}(y)),typeof E=="function"&&(C=E,E=null),S?E="buffer":E||(E=x.defaultEncoding),typeof C!="function"&&(C=A),x.ending?function(w,_){var k=new v;T(w,k),Ft.nextTick(_,k)}(this,C):(S||function(w,_,k,L){var D;return k===null?D=new b:typeof k=="string"||_.objectMode||(D=new l("chunk",["string","Buffer"],k)),!D||(T(w,D),Ft.nextTick(L,D),!1)}(this,x,y,C))&&(x.pendingcb++,O=function(w,_,k,L,D,U){if(!k){var j=function(q,V,G){return q.objectMode||q.decodeStrings===!1||typeof V!="string"||(V=a.from(V,G)),V}(_,L,D);L!==j&&(k=!0,D="buffer",L=j)}var H=_.objectMode?1:L.length;_.length+=H;var W=_.length<_.highWaterMark;if(W||(_.needDrain=!0),_.writing||_.corked){var K=_.lastBufferedRequest;_.lastBufferedRequest={chunk:L,encoding:D,isBuf:k,callback:U,next:null},K?K.next=_.lastBufferedRequest:_.bufferedRequest=_.lastBufferedRequest,_.bufferedRequestCount+=1}else B(w,_,!1,H,L,D,U);return W}(this,x,S,y,E,C)),O},R.prototype.cork=function(){this._writableState.corked++},R.prototype.uncork=function(){var y=this._writableState;y.corked&&(y.corked--,y.writing||y.corked||y.bufferProcessing||!y.bufferedRequest||I(this,y))},R.prototype.setDefaultEncoding=function(y){if(typeof y=="string"&&(y=y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((y+"").toLowerCase())>-1))throw new m(y);return this._writableState.defaultEncoding=y,this},Object.defineProperty(R.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(R.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),R.prototype._write=function(y,E,C){C(new u("_write()"))},R.prototype._writev=null,R.prototype.end=function(y,E,C){var g=this._writableState;return typeof y=="function"?(C=y,y=null,E=null):typeof E=="function"&&(C=E,E=null),y!=null&&this.write(y,E),g.corked&&(g.corked=1,this.uncork()),g.ending||function(x,O,S){O.ending=!0,M(x,O),S&&(O.finished?Ft.nextTick(S):x.once("finish",S)),O.ended=!0,x.writable=!1}(this,g,C),this},Object.defineProperty(R.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(y){this._writableState&&(this._writableState.destroyed=y)}}),R.prototype.destroy=o.destroy,R.prototype._undestroy=o.undestroy,R.prototype._destroy=function(y,E){E(y)},Yg}function q6(){if(pO)return Jg;pO=1;var t=Object.keys||function(d){var l=[];for(var u in d)l.push(u);return l};Jg=s;var e=zU(),n=HU();Gp(s,e);for(var r=t(n.prototype),a=0;a<r.length;a++){var i=r[a];s.prototype[i]||(s.prototype[i]=n.prototype[i])}function s(d){if(!(this instanceof s))return new s(d);e.call(this,d),n.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",o)))}function o(){this._writableState.ended||Ft.nextTick(c,this)}function c(d){d.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),Jg}var hue=ye.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u2(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!hue(e))throw new Error("Unknown encoding: "+e)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=yue;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=mue;break;default:return void(this.write=bue)}this.charBuffer=new ye(6),this.charReceived=0,this.charLength=0}function bue(t){return t.toString(this.encoding)}function yue(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function mue(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}u2.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((a=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&a<=56319)){if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var a;if(r=(e+=t.toString(this.encoding,0,r)).length-1,(a=e.charCodeAt(r))>=55296&&a<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),t.copy(this.charBuffer,0,0,i),e.substring(0,r)}return e},u2.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},u2.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,a=this.encoding;e+=r.slice(0,n).toString(a)}return e};var hO=qp(Object.freeze({__proto__:null,StringDecoder:u2})),bO=nl.codes.ERR_STREAM_PREMATURE_CLOSE;function gue(){}var Zg,yO,mO,gO,Xg,wO,nT=function t(e,n,r){if(typeof n=="function")return t(e,null,n);n||(n={}),r=function(h){var b=!1;return function(){if(!b){b=!0;for(var v=arguments.length,m=new Array(v),T=0;T<v;T++)m[T]=arguments[T];h.apply(this,m)}}}(r||gue);var a=n.readable||n.readable!==!1&&e.readable,i=n.writable||n.writable!==!1&&e.writable,s=function(){e.writable||c()},o=e._writableState&&e._writableState.finished,c=function(){i=!1,o=!0,a||r.call(e)},d=e._readableState&&e._readableState.endEmitted,l=function(){a=!1,d=!0,i||r.call(e)},u=function(h){r.call(e,h)},f=function(){var h;return a&&!d?(e._readableState&&e._readableState.ended||(h=new bO),r.call(e,h)):i&&!o?(e._writableState&&e._writableState.ended||(h=new bO),r.call(e,h)):void 0},p=function(){e.req.on("finish",c)};return function(h){return h.setHeader&&typeof h.abort=="function"}(e)?(e.on("complete",c),e.on("abort",f),e.req?p():e.on("request",p)):i&&!e._writableState&&(e.on("end",s),e.on("close",s)),e.on("end",l),e.on("finish",c),n.error!==!1&&e.on("error",u),e.on("close",f),function(){e.removeListener("complete",c),e.removeListener("abort",f),e.removeListener("request",p),e.req&&e.req.removeListener("finish",c),e.removeListener("end",s),e.removeListener("close",s),e.removeListener("finish",c),e.removeListener("end",l),e.removeListener("error",u),e.removeListener("close",f)}};function wue(){if(yO)return Zg;var t;function e(b,v,m){return(v=function(T){var A=function(N,R){if(typeof N!="object"||N===null)return N;var B=N[Symbol.toPrimitive];if(B!==void 0){var F=B.call(N,R||"default");if(typeof F!="object")return F;throw new TypeError("@@toPrimitive must return a primitive value.")}return(R==="string"?String:Number)(N)}(T,"string");return typeof A=="symbol"?A:String(A)}(v))in b?Object.defineProperty(b,v,{value:m,enumerable:!0,configurable:!0,writable:!0}):b[v]=m,b}yO=1;var n=nT,r=Symbol("lastResolve"),a=Symbol("lastReject"),i=Symbol("error"),s=Symbol("ended"),o=Symbol("lastPromise"),c=Symbol("handlePromise"),d=Symbol("stream");function l(b,v){return{value:b,done:v}}function u(b){var v=b[r];if(v!==null){var m=b[d].read();m!==null&&(b[o]=null,b[r]=null,b[a]=null,v(l(m,!1)))}}function f(b){Ft.nextTick(u,b)}var p=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((e(t={get stream(){return this[d]},next:function(){var b=this,v=this[i];if(v!==null)return Promise.reject(v);if(this[s])return Promise.resolve(l(void 0,!0));if(this[d].destroyed)return new Promise(function(N,R){Ft.nextTick(function(){b[i]?R(b[i]):N(l(void 0,!0))})});var m,T=this[o];if(T)m=new Promise(function(N,R){return function(B,F){N.then(function(){R[s]?B(l(void 0,!0)):R[c](B,F)},F)}}(T,this));else{var A=this[d].read();if(A!==null)return Promise.resolve(l(A,!1));m=new Promise(this[c])}return this[o]=m,m}},Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var b=this;return new Promise(function(v,m){b[d].destroy(null,function(T){T?m(T):v(l(void 0,!0))})})}),t),p);return Zg=function(b){var v,m=Object.create(h,(e(v={},d,{value:b,writable:!0}),e(v,r,{value:null,writable:!0}),e(v,a,{value:null,writable:!0}),e(v,i,{value:null,writable:!0}),e(v,s,{value:b._readableState.endEmitted,writable:!0}),e(v,c,{value:function(T,A){var N=m[d].read();N?(m[o]=null,m[r]=null,m[a]=null,T(l(N,!1))):(m[r]=T,m[a]=A)},writable:!0}),v));return m[o]=null,n(b,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var A=m[a];return A!==null&&(m[o]=null,m[r]=null,m[a]=null,A(T)),void(m[i]=T)}var N=m[r];N!==null&&(m[o]=null,m[r]=null,m[a]=null,N(l(void 0,!0))),m[s]=!0}),b.on("readable",f.bind(null,m)),m},Zg}function zU(){if(wO)return Xg;var t;wO=1,Xg=R,R.ReadableState=N,W_.EventEmitter;var e=function(L,D){return L.listeners(D).length},n=IU(),r=Y_.Buffer,a=(di!==void 0?di:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},i,s=BU;i=s&&s.debuglog?s.debuglog("stream"):function(){};var o,c,d,l=uue(),u=FU(),f=jU().getHighWaterMark,p=nl.codes,h=p.ERR_INVALID_ARG_TYPE,b=p.ERR_STREAM_PUSH_AFTER_EOF,v=p.ERR_METHOD_NOT_IMPLEMENTED,m=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Gp(R,n);var T=u.errorOrDestroy,A=["error","close","destroy","pause","resume"];function N(L,D,U){t=t||q6(),L=L||{},typeof U!="boolean"&&(U=D instanceof t),this.objectMode=!!L.objectMode,U&&(this.objectMode=this.objectMode||!!L.readableObjectMode),this.highWaterMark=f(this,L,"readableHighWaterMark",U),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=L.emitClose!==!1,this.autoDestroy=!!L.autoDestroy,this.destroyed=!1,this.defaultEncoding=L.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,L.encoding&&(o||(o=hO.StringDecoder),this.decoder=new o(L.encoding),this.encoding=L.encoding)}function R(L){if(t=t||q6(),!(this instanceof R))return new R(L);var D=this instanceof t;this._readableState=new N(L,this,D),this.readable=!0,L&&(typeof L.read=="function"&&(this._read=L.read),typeof L.destroy=="function"&&(this._destroy=L.destroy)),n.call(this)}function B(L,D,U,j,H){i("readableAddChunk",D);var W,K=L._readableState;if(D===null)K.reading=!1,function(q,V){if(i("onEofChunk"),!V.ended){if(V.decoder){var G=V.decoder.end();G&&G.length&&(V.buffer.push(G),V.length+=V.objectMode?1:G.length)}V.ended=!0,V.sync?$(q):(V.needReadable=!1,V.emittedReadable||(V.emittedReadable=!0,M(q)))}}(L,K);else if(H||(W=function(q,V){var G;J=V,r.isBuffer(J)||J instanceof a||typeof V=="string"||V===void 0||q.objectMode||(G=new h("chunk",["string","Buffer","Uint8Array"],V));var J;return G}(K,D)),W)T(L,W);else if(K.objectMode||D&&D.length>0)if(typeof D=="string"||K.objectMode||Object.getPrototypeOf(D)===r.prototype||(D=function(q){return r.from(q)}(D)),j)K.endEmitted?T(L,new m):F(L,K,D,!0);else if(K.ended)T(L,new b);else{if(K.destroyed)return!1;K.reading=!1,K.decoder&&!U?(D=K.decoder.write(D),K.objectMode||D.length!==0?F(L,K,D,!1):y(L,K)):F(L,K,D,!1)}else j||(K.reading=!1,y(L,K));return!K.ended&&(K.length<K.highWaterMark||K.length===0)}function F(L,D,U,j){D.flowing&&D.length===0&&!D.sync?(D.awaitDrain=0,L.emit("data",U)):(D.length+=D.objectMode?1:U.length,j?D.buffer.unshift(U):D.buffer.push(U),D.needReadable&&$(L)),y(L,D)}Object.defineProperty(R.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(L){this._readableState&&(this._readableState.destroyed=L)}}),R.prototype.destroy=u.destroy,R.prototype._undestroy=u.undestroy,R.prototype._destroy=function(L,D){D(L)},R.prototype.push=function(L,D){var U,j=this._readableState;return j.objectMode?U=!0:typeof L=="string"&&((D=D||j.defaultEncoding)!==j.encoding&&(L=r.from(L,D),D=""),U=!0),B(this,L,D,!1,U)},R.prototype.unshift=function(L){return B(this,L,null,!0,!1)},R.prototype.isPaused=function(){return this._readableState.flowing===!1},R.prototype.setEncoding=function(L){o||(o=hO.StringDecoder);var D=new o(L);this._readableState.decoder=D,this._readableState.encoding=this._readableState.decoder.encoding;for(var U=this._readableState.buffer.head,j="";U!==null;)j+=D.write(U.data),U=U.next;return this._readableState.buffer.clear(),j!==""&&this._readableState.buffer.push(j),this._readableState.length=j.length,this};var I=1073741824;function P(L,D){return L<=0||D.length===0&&D.ended?0:D.objectMode?1:L!=L?D.flowing&&D.length?D.buffer.head.data.length:D.length:(L>D.highWaterMark&&(D.highWaterMark=function(U){return U>=I?U=I:(U--,U|=U>>>1,U|=U>>>2,U|=U>>>4,U|=U>>>8,U|=U>>>16,U++),U}(L)),L<=D.length?L:D.ended?D.length:(D.needReadable=!0,0))}function $(L){var D=L._readableState;i("emitReadable",D.needReadable,D.emittedReadable),D.needReadable=!1,D.emittedReadable||(i("emitReadable",D.flowing),D.emittedReadable=!0,Ft.nextTick(M,L))}function M(L){var D=L._readableState;i("emitReadable_",D.destroyed,D.length,D.ended),D.destroyed||!D.length&&!D.ended||(L.emit("readable"),D.emittedReadable=!1),D.needReadable=!D.flowing&&!D.ended&&D.length<=D.highWaterMark,O(L)}function y(L,D){D.readingMore||(D.readingMore=!0,Ft.nextTick(E,L,D))}function E(L,D){for(;!D.reading&&!D.ended&&(D.length<D.highWaterMark||D.flowing&&D.length===0);){var U=D.length;if(i("maybeReadMore read 0"),L.read(0),U===D.length)break}D.readingMore=!1}function C(L){var D=L._readableState;D.readableListening=L.listenerCount("readable")>0,D.resumeScheduled&&!D.paused?D.flowing=!0:L.listenerCount("data")>0&&L.resume()}function g(L){i("readable nexttick read 0"),L.read(0)}function x(L,D){i("resume",D.reading),D.reading||L.read(0),D.resumeScheduled=!1,L.emit("resume"),O(L),D.flowing&&!D.reading&&L.read(0)}function O(L){var D=L._readableState;for(i("flow",D.flowing);D.flowing&&L.read()!==null;);}function S(L,D){return D.length===0?null:(D.objectMode?U=D.buffer.shift():!L||L>=D.length?(U=D.decoder?D.buffer.join(""):D.buffer.length===1?D.buffer.first():D.buffer.concat(D.length),D.buffer.clear()):U=D.buffer.consume(L,D.decoder),U);var U}function w(L){var D=L._readableState;i("endReadable",D.endEmitted),D.endEmitted||(D.ended=!0,Ft.nextTick(_,D,L))}function _(L,D){if(i("endReadableNT",L.endEmitted,L.length),!L.endEmitted&&L.length===0&&(L.endEmitted=!0,D.readable=!1,D.emit("end"),L.autoDestroy)){var U=D._writableState;(!U||U.autoDestroy&&U.finished)&&D.destroy()}}function k(L,D){for(var U=0,j=L.length;U<j;U++)if(L[U]===D)return U;return-1}return R.prototype.read=function(L){i("read",L),L=parseInt(L,10);var D=this._readableState,U=L;if(L!==0&&(D.emittedReadable=!1),L===0&&D.needReadable&&((D.highWaterMark!==0?D.length>=D.highWaterMark:D.length>0)||D.ended))return i("read: emitReadable",D.length,D.ended),D.length===0&&D.ended?w(this):$(this),null;if((L=P(L,D))===0&&D.ended)return D.length===0&&w(this),null;var j,H=D.needReadable;return i("need readable",H),(D.length===0||D.length-L<D.highWaterMark)&&i("length less than watermark",H=!0),D.ended||D.reading?i("reading or ended",H=!1):H&&(i("do read"),D.reading=!0,D.sync=!0,D.length===0&&(D.needReadable=!0),this._read(D.highWaterMark),D.sync=!1,D.reading||(L=P(U,D))),(j=L>0?S(L,D):null)===null?(D.needReadable=D.length<=D.highWaterMark,L=0):(D.length-=L,D.awaitDrain=0),D.length===0&&(D.ended||(D.needReadable=!0),U!==L&&D.ended&&w(this)),j!==null&&this.emit("data",j),j},R.prototype._read=function(L){T(this,new v("_read()"))},R.prototype.pipe=function(L,D){var U=this,j=this._readableState;switch(j.pipesCount){case 0:j.pipes=L;break;case 1:j.pipes=[j.pipes,L];break;default:j.pipes.push(L)}j.pipesCount+=1,i("pipe count=%d opts=%j",j.pipesCount,D);var H=(!D||D.end!==!1)&&L!==Ft.stdout&&L!==Ft.stderr?K:X;function W(ae,ie){i("onunpipe"),ae===U&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,i("cleanup"),L.removeListener("close",z),L.removeListener("finish",Y),L.removeListener("drain",q),L.removeListener("error",J),L.removeListener("unpipe",W),U.removeListener("end",K),U.removeListener("end",X),U.removeListener("data",G),V=!0,!j.awaitDrain||L._writableState&&!L._writableState.needDrain||q())}function K(){i("onend"),L.end()}j.endEmitted?Ft.nextTick(H):U.once("end",H),L.on("unpipe",W);var q=function(ae){return function(){var ie=ae._readableState;i("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&e(ae,"data")&&(ie.flowing=!0,O(ae))}}(U);L.on("drain",q);var V=!1;function G(ae){i("ondata");var ie=L.write(ae);i("dest.write",ie),ie===!1&&((j.pipesCount===1&&j.pipes===L||j.pipesCount>1&&k(j.pipes,L)!==-1)&&!V&&(i("false write response, pause",j.awaitDrain),j.awaitDrain++),U.pause())}function J(ae){i("onerror",ae),X(),L.removeListener("error",J),e(L,"error")===0&&T(L,ae)}function z(){L.removeListener("finish",Y),X()}function Y(){i("onfinish"),L.removeListener("close",z),X()}function X(){i("unpipe"),U.unpipe(L)}return U.on("data",G),function(ae,ie,oe){if(typeof ae.prependListener=="function")return ae.prependListener(ie,oe);ae._events&&ae._events[ie]?Array.isArray(ae._events[ie])?ae._events[ie].unshift(oe):ae._events[ie]=[oe,ae._events[ie]]:ae.on(ie,oe)}(L,"error",J),L.once("close",z),L.once("finish",Y),L.emit("pipe",U),j.flowing||(i("pipe resume"),U.resume()),L},R.prototype.unpipe=function(L){var D=this._readableState,U={hasUnpiped:!1};if(D.pipesCount===0)return this;if(D.pipesCount===1)return L&&L!==D.pipes||(L||(L=D.pipes),D.pipes=null,D.pipesCount=0,D.flowing=!1,L&&L.emit("unpipe",this,U)),this;if(!L){var j=D.pipes,H=D.pipesCount;D.pipes=null,D.pipesCount=0,D.flowing=!1;for(var W=0;W<H;W++)j[W].emit("unpipe",this,{hasUnpiped:!1});return this}var K=k(D.pipes,L);return K===-1||(D.pipes.splice(K,1),D.pipesCount-=1,D.pipesCount===1&&(D.pipes=D.pipes[0]),L.emit("unpipe",this,U)),this},R.prototype.on=function(L,D){var U=n.prototype.on.call(this,L,D),j=this._readableState;return L==="data"?(j.readableListening=this.listenerCount("readable")>0,j.flowing!==!1&&this.resume()):L==="readable"&&(j.endEmitted||j.readableListening||(j.readableListening=j.needReadable=!0,j.flowing=!1,j.emittedReadable=!1,i("on readable",j.length,j.reading),j.length?$(this):j.reading||Ft.nextTick(g,this))),U},R.prototype.addListener=R.prototype.on,R.prototype.removeListener=function(L,D){var U=n.prototype.removeListener.call(this,L,D);return L==="readable"&&Ft.nextTick(C,this),U},R.prototype.removeAllListeners=function(L){var D=n.prototype.removeAllListeners.apply(this,arguments);return L!=="readable"&&L!==void 0||Ft.nextTick(C,this),D},R.prototype.resume=function(){var L=this._readableState;return L.flowing||(i("resume"),L.flowing=!L.readableListening,function(D,U){U.resumeScheduled||(U.resumeScheduled=!0,Ft.nextTick(x,D,U))}(this,L)),L.paused=!1,this},R.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},R.prototype.wrap=function(L){var D=this,U=this._readableState,j=!1;for(var H in L.on("end",function(){if(i("wrapped end"),U.decoder&&!U.ended){var K=U.decoder.end();K&&K.length&&D.push(K)}D.push(null)}),L.on("data",function(K){i("wrapped data"),U.decoder&&(K=U.decoder.write(K)),U.objectMode&&K==null||(U.objectMode||K&&K.length)&&(D.push(K)||(j=!0,L.pause()))}),L)this[H]===void 0&&typeof L[H]=="function"&&(this[H]=function(K){return function(){return L[K].apply(L,arguments)}}(H));for(var W=0;W<A.length;W++)L.on(A[W],this.emit.bind(this,A[W]));return this._read=function(K){i("wrapped _read",K),j&&(j=!1,L.resume())},this},typeof Symbol=="function"&&(R.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=wue()),c(this)}),Object.defineProperty(R.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(R.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(R.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(L){this._readableState&&(this._readableState.flowing=L)}}),R._fromList=S,Object.defineProperty(R.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(R.from=function(L,D){return d===void 0&&(d=gO?mO:(gO=1,mO=function(){throw new Error("Readable.from is not available in the browser")})),d(R,L,D)}),Xg}var qU=_o,u3=nl.codes,vue=u3.ERR_METHOD_NOT_IMPLEMENTED,Eue=u3.ERR_MULTIPLE_CALLBACK,_ue=u3.ERR_TRANSFORM_ALREADY_TRANSFORMING,Tue=u3.ERR_TRANSFORM_WITH_LENGTH_0,f2=q6();function xue(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(r===null)return this.emit("error",new Eue);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),r(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function _o(t){if(!(this instanceof _o))return new _o(t);f2.call(this,t),this._transformState={afterTransform:xue.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",Sue)}function Sue(){var t=this;typeof this._flush!="function"||this._readableState.destroyed?vO(this,null,null):this._flush(function(e,n){vO(t,e,n)})}function vO(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new Tue;if(t._transformState.transforming)throw new _ue;return t.push(null)}Gp(_o,f2),_o.prototype.push=function(t,e){return this._transformState.needTransform=!1,f2.prototype.push.call(this,t,e)},_o.prototype._transform=function(t,e,n){n(new vue("_transform()"))},_o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},_o.prototype._read=function(t){var e=this._transformState;e.writechunk===null||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},_o.prototype._destroy=function(t,e){f2.prototype._destroy.call(this,t,function(n){e(n)})};var Qg,Aue=R5,KU=qU;function R5(t){if(!(this instanceof R5))return new R5(t);KU.call(this,t)}Gp(R5,KU),R5.prototype._transform=function(t,e,n){n(null,t)};var VU=nl.codes,Cue=VU.ERR_MISSING_ARGS,Iue=VU.ERR_STREAM_DESTROYED;function EO(t){if(t)throw t}function _O(t){t()}function Oue(t,e){return t.pipe(e)}var Mue=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,a=function(s){return s.length?typeof s[s.length-1]!="function"?EO:s.pop():EO}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Cue("streams");var i=e.map(function(s,o){var c=o<e.length-1;return function(d,l,u,f){f=function(b){var v=!1;return function(){v||(v=!0,b.apply(void 0,arguments))}}(f);var p=!1;d.on("close",function(){p=!0}),Qg===void 0&&(Qg=nT),Qg(d,{readable:l,writable:u},function(b){if(b)return f(b);p=!0,f()});var h=!1;return function(b){if(!p&&!h)return h=!0,function(v){return v.setHeader&&typeof v.abort=="function"}(d)?d.abort():typeof d.destroy=="function"?d.destroy():void f(b||new Iue("pipe"))}}(s,c,o>0,function(d){r||(r=d),d&&i.forEach(_O),c||(i.forEach(_O),a(r))})});return e.reduce(Oue)};(function(t,e){(e=$w.exports=zU()).Stream=e,e.Readable=e,e.Writable=HU(),e.Duplex=q6(),e.Transform=qU,e.PassThrough=Aue,e.finished=nT,e.pipeline=Mue})(0,$w.exports);var K6=$w.exports;function Pue(t={}){const e={},n=new K6.Duplex({objectMode:!0,read:()=>{},write:function(i,s,o){let c=null;try{i.id?function(d){const{id:l}=d;if(l===null)return;const u=e[l];if(!u)return void console.warn(`StreamMiddleware - Unknown response id "${l}"`);delete e[l],Object.assign(u.res,d),setTimeout(u.end)}(i):function(d){t!=null&&t.retryOnMessage&&d.method===t.retryOnMessage&&Object.values(e).forEach(({req:l,retryCount:u=0})=>{if(!l.id)return;if(u>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${l.id}"`);const f=e[l.id];f&&(f.retryCount=u+1),a(l)}),r.emit("notification",d)}(i)}catch(d){c=d}o(c)}}),r=new EU;return{events:r,middleware:(i,s,o,c)=>{e[i.id]={req:i,res:s,next:o,end:c},a(i)},stream:n};function a(i){n.push(i)}}var h8={},Lw={exports:{}},kue=function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(a){r[a]=e[a]}),r;function r(){for(var a=new Array(arguments.length),i=0;i<a.length;i++)a[i]=arguments[i];var s=e.apply(this,a),o=a[a.length-1];return typeof s=="function"&&s!==o&&Object.keys(o).forEach(function(c){s[c]=o[c]}),s}},TO=kue;function ob(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function xO(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}Lw.exports=TO(ob),Lw.exports.strict=TO(xO),ob.proto=ob(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return ob(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return xO(this)},configurable:!0})});var Nue=Lw.exports,b8={};Object.defineProperty(b8,"__esModule",{value:!0}),b8.Substream=void 0;const Rue=K6;class Due extends Rue.Duplex{constructor({parent:e,name:n}){super({objectMode:!0}),this._parent=e,this._name=n}_read(){}_write(e,n,r){this._parent.push({name:this._name,data:e}),r()}}b8.Substream=Due;var $ue=di&&di.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(h8,"__esModule",{value:!0}),h8.ObjectMultiplex=void 0;const e9=K6,Lue=$ue(Nue),Bue=b8,SO=Symbol("IGNORE_SUBSTREAM");let Fue=class extends e9.Duplex{constructor(t={}){super(Object.assign(Object.assign({},t),{objectMode:!0})),this._substreams={}}createStream(t){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${t}" already ended`);if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);const e=new Bue.Substream({parent:this,name:t});return this._substreams[t]=e,function(n,r){const a=(0,Lue.default)(r);(0,e9.finished)(n,{readable:!1},a),(0,e9.finished)(n,{writable:!1},a)}(this,n=>e.destroy(n||void 0)),e}ignoreStream(t){if(!t)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[t])throw new Error(`ObjectMultiplex - Substream for name "${t}" already exists`);this._substreams[t]=SO}_read(){}_write(t,e,n){const{name:r,data:a}=t;if(!r)return console.warn(`ObjectMultiplex - malformed chunk without name "${t}"`),n();const i=this._substreams[r];return i?(i!==SO&&i.push(a),n()):(console.warn(`ObjectMultiplex - orphaned data for stream "${r}"`),n())}};h8.ObjectMultiplex=Fue;var Uue=s3(h8.ObjectMultiplex);const ss=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";ss.writable=t=>ss(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object",ss.readable=t=>ss(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object",ss.duplex=t=>ss.writable(t)&&ss.readable(t),ss.transform=t=>ss.duplex(t)&&typeof t._transform=="function";var os,jue=ss,Hue=class extends aue{constructor(t,{jsonRpcStreamName:e,logger:n=console,maxEventListeners:r=100,rpcMiddleware:a=[]}){if(super({logger:n,maxEventListeners:r,rpcMiddleware:a}),!jue.duplex(t))throw new Error(Fn.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);const i=new Uue;K6.pipeline(t,i,t,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=Pue({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),K6.pipeline(this._jsonRpcConnection.stream,i.createStream(e),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",s=>{const{method:o,params:c}=s;o==="metamask_accountsChanged"?this._handleAccountsChanged(c):o==="metamask_unlockStateChanged"?this._handleUnlockStateChanged(c):o==="metamask_chainChanged"?this._handleChainChanged(c):_U.includes(o)?this.emit("message",{type:o,data:c}):o==="METAMASK_STREAM_FAILURE"&&t.destroy(new Error(Fn.errors.permanentlyDisconnected()))})}async _initializeStateAsync(){let t;try{t=await this.request({method:"metamask_getProviderState"})}catch(e){this._log.error("MetaMask: Failed to get initial state. Please report this bug.",e)}this._initializeState(t)}_handleStreamDisconnect(t,e){let n=`MetaMask: Lost connection to "${t}".`;e!=null&&e.stack&&(n+=`
${e.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,e?e.message:void 0)}_handleChainChanged({chainId:t,networkVersion:e}={}){TU(t)&&(n=>!!n&&typeof n=="string")(e)?e==="loading"?this._handleDisconnect(!0):super._handleChainChanged({chainId:t}):this._log.error(Fn.errors.invalidNetworkParams(),{chainId:t,networkVersion:e})}},zue=class extends Hue{constructor(t,{jsonRpcStreamName:e="metamask-provider",logger:n=console,maxEventListeners:r=100,shouldSendMetadata:a}={}){if(super(t,{jsonRpcStreamName:e,logger:n,maxEventListeners:r,rpcMiddleware:J6e(n)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},Dw(this,os,void 0),this._initializeStateAsync(),Eo(this,os,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",i=>{const{method:s}=i;_U.includes(s)&&(this.emit("data",i),this.emit("notification",i.params.result))}),a)if(document.readyState==="complete")nO(this._rpcEngine,this._log);else{const i=()=>{nO(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",i)};window.addEventListener("DOMContentLoaded",i)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(Fn.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(Fn.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Es(this,os)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(Fn.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(t,e){this._rpcRequest(t,e)}addListener(t,e){return this._warnOfDeprecation(t),super.addListener(t,e)}on(t,e){return this._warnOfDeprecation(t),super.on(t,e)}once(t,e){return this._warnOfDeprecation(t),super.once(t,e)}prependListener(t,e){return this._warnOfDeprecation(t),super.prependListener(t,e)}prependOnceListener(t,e){return this._warnOfDeprecation(t),super.prependOnceListener(t,e)}_handleDisconnect(t,e){super._handleDisconnect(t,e),Es(this,os)&&!t&&Eo(this,os,null)}_warnOfDeprecation(t){var e;((e=this._sentWarnings)==null?void 0:e.events[t])===!1&&(this._log.warn(Fn.warnings.events[t]),this._sentWarnings.events[t]=!0)}async enable(){return this._sentWarnings.enable||(this._log.warn(Fn.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise((t,e)=>{try{this._rpcRequest({method:"eth_requestAccounts",params:[]},l2(t,e))}catch(n){e(n)}})}send(t,e){return this._sentWarnings.send||(this._log.warn(Fn.warnings.sendDeprecation),this._sentWarnings.send=!0),typeof t!="string"||e&&!Array.isArray(e)?t&&typeof t=="object"&&typeof e=="function"?this._rpcRequest(t,e):this._sendSync(t):new Promise((n,r)=>{try{this._rpcRequest({method:t,params:e},l2(n,r,!1))}catch(a){r(a)}})}_sendSync(t){let e;switch(t.method){case"eth_accounts":e=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":e=this.selectedAddress??null;break;case"eth_uninstallFilter":this._rpcRequest(t,xU),e=!0;break;case"net_version":e=Es(this,os)??null;break;default:throw new Error(Fn.errors.unsupportedSync(t.method))}return{id:t.id,jsonrpc:t.jsonrpc,result:e}}_getExperimentalApi(){return new Proxy({isUnlocked:async()=>(this._state.initialized||await new Promise(t=>{this.on("_initialized",()=>t())}),this._state.isUnlocked),requestBatch:async t=>{if(!Array.isArray(t))throw e5({message:"Batch requests must be made with an array of request objects.",data:t});return new Promise((e,n)=>{this._rpcRequest(t,l2(e,n))})}},{get:(t,e,...n)=>(this._sentWarnings.experimentalMethods||(this._log.warn(Fn.warnings.experimentalMethods),this._sentWarnings.experimentalMethods=!0),Reflect.get(t,e,...n))})}_handleChainChanged({chainId:t,networkVersion:e}={}){super._handleChainChanged({chainId:t,networkVersion:e}),this._state.isConnected&&e!==Es(this,os)&&(Eo(this,os,e),this._state.initialized&&this.emit("networkChanged",Es(this,os)))}};os=new WeakMap;const le=Ir("MM_SDK");let AO;le.color="#FFAC1C";var WU={},i1={};Object.defineProperty(i1,"__esModule",{value:!0}),i1.EthereumProviderError=i1.EthereumRpcError=void 0;const que=bU;class GU extends Error{constructor(e,n,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=e,r!==void 0&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return que.default(this.serialize(),Kue,2)}}i1.EthereumRpcError=GU;function Kue(t,e){if(e!=="[Circular]")return e}i1.EthereumProviderError=class extends GU{constructor(t,e,n){if(!function(r){return Number.isInteger(r)&&r>=1e3&&r<=4999}(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,e,n)}};var rT={},Bc={};Object.defineProperty(Bc,"__esModule",{value:!0}),Bc.errorValues=Bc.errorCodes=void 0,Bc.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Bc.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.serializeError=t.isValidCode=t.getMessageFromCode=t.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Bc,n=i1,r=e.errorCodes.rpc.internal,a="Unspecified error message. This is a bug, please report it.",i={code:r,message:s(r)};function s(u,f=a){if(Number.isInteger(u)){const p=u.toString();if(l(e.errorValues,p))return e.errorValues[p].message;if(c(u))return t.JSON_RPC_SERVER_ERROR_MESSAGE}return f}function o(u){if(!Number.isInteger(u))return!1;const f=u.toString();return!!e.errorValues[f]||!!c(u)}function c(u){return u>=-32099&&u<=-32e3}function d(u){return u&&typeof u=="object"&&!Array.isArray(u)?Object.assign({},u):u}function l(u,f){return Object.prototype.hasOwnProperty.call(u,f)}t.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",t.getMessageFromCode=s,t.isValidCode=o,t.serializeError=function(u,{fallbackError:f=i,shouldIncludeStack:p=!1}={}){var h,b;if(!f||!Number.isInteger(f.code)||typeof f.message!="string")throw new Error("Must provide fallback error with integer number code and string message.");if(u instanceof n.EthereumRpcError)return u.serialize();const v={};if(u&&typeof u=="object"&&!Array.isArray(u)&&l(u,"code")&&o(u.code)){const T=u;v.code=T.code,T.message&&typeof T.message=="string"?(v.message=T.message,l(T,"data")&&(v.data=T.data)):(v.message=s(v.code),v.data={originalError:d(u)})}else{v.code=f.code;const T=(h=u)===null||h===void 0?void 0:h.message;v.message=T&&typeof T=="string"?T:f.message,v.data={originalError:d(u)}}const m=(b=u)===null||b===void 0?void 0:b.stack;return p&&u&&m&&typeof m=="string"&&(v.stack=m),v}}(rT);var y8={};Object.defineProperty(y8,"__esModule",{value:!0}),y8.ethErrors=void 0;const aT=i1,YU=rT,nr=Bc;function Ka(t,e){const[n,r]=JU(e);return new aT.EthereumRpcError(t,n||YU.getMessageFromCode(t),r)}function yf(t,e){const[n,r]=JU(e);return new aT.EthereumProviderError(t,n||YU.getMessageFromCode(t),r)}function JU(t){if(t){if(typeof t=="string")return[t];if(typeof t=="object"&&!Array.isArray(t)){const{message:e,data:n}=t;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,n]}}return[]}y8.ethErrors={rpc:{parse:t=>Ka(nr.errorCodes.rpc.parse,t),invalidRequest:t=>Ka(nr.errorCodes.rpc.invalidRequest,t),invalidParams:t=>Ka(nr.errorCodes.rpc.invalidParams,t),methodNotFound:t=>Ka(nr.errorCodes.rpc.methodNotFound,t),internal:t=>Ka(nr.errorCodes.rpc.internal,t),server:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=t;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Ka(e,t)},invalidInput:t=>Ka(nr.errorCodes.rpc.invalidInput,t),resourceNotFound:t=>Ka(nr.errorCodes.rpc.resourceNotFound,t),resourceUnavailable:t=>Ka(nr.errorCodes.rpc.resourceUnavailable,t),transactionRejected:t=>Ka(nr.errorCodes.rpc.transactionRejected,t),methodNotSupported:t=>Ka(nr.errorCodes.rpc.methodNotSupported,t),limitExceeded:t=>Ka(nr.errorCodes.rpc.limitExceeded,t)},provider:{userRejectedRequest:t=>yf(nr.errorCodes.provider.userRejectedRequest,t),unauthorized:t=>yf(nr.errorCodes.provider.unauthorized,t),unsupportedMethod:t=>yf(nr.errorCodes.provider.unsupportedMethod,t),disconnected:t=>yf(nr.errorCodes.provider.disconnected,t),chainDisconnected:t=>yf(nr.errorCodes.provider.chainDisconnected,t),custom:t=>{if(!t||typeof t!="object"||Array.isArray(t))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:n,data:r}=t;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new aT.EthereumProviderError(e,n,r)}}},function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMessageFromCode=t.serializeError=t.EthereumProviderError=t.EthereumRpcError=t.ethErrors=t.errorCodes=void 0;const e=i1;Object.defineProperty(t,"EthereumRpcError",{enumerable:!0,get:function(){return e.EthereumRpcError}}),Object.defineProperty(t,"EthereumProviderError",{enumerable:!0,get:function(){return e.EthereumProviderError}});const n=rT;Object.defineProperty(t,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(t,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});const r=y8;Object.defineProperty(t,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});const a=Bc;Object.defineProperty(t,"errorCodes",{enumerable:!0,get:function(){return a.errorCodes}})}(WU);var ZU={exports:{}};ZU.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(r,a,i){n.o(r,a)||Object.defineProperty(r,a,{enumerable:!0,get:i})},n.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,a){if(1&a&&(r=n(r)),8&a||4&a&&typeof r=="object"&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&a&&typeof r!="string")for(var s in r)n.d(i,s,(function(o){return r[o]}).bind(null,s));return i},n.n=function(r){var a=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(a,"a",a),a},n.o=function(r,a){return Object.prototype.hasOwnProperty.call(r,a)},n.p="",n(n.s=90)}({17:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=n(18),a=function(){function i(){}return i.getFirstMatch=function(s,o){var c=o.match(s);return c&&c.length>0&&c[1]||""},i.getSecondMatch=function(s,o){var c=o.match(s);return c&&c.length>1&&c[2]||""},i.matchAndReturnConst=function(s,o,c){if(s.test(o))return c},i.getWindowsVersionName=function(s){switch(s){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},i.getMacOSVersionName=function(s){var o=s.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(o.push(0),o[0]===10)switch(o[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},i.getAndroidVersionName=function(s){var o=s.split(".").splice(0,2).map(function(c){return parseInt(c,10)||0});if(o.push(0),!(o[0]===1&&o[1]<5))return o[0]===1&&o[1]<6?"Cupcake":o[0]===1&&o[1]>=6?"Donut":o[0]===2&&o[1]<2?"Eclair":o[0]===2&&o[1]===2?"Froyo":o[0]===2&&o[1]>2?"Gingerbread":o[0]===3?"Honeycomb":o[0]===4&&o[1]<1?"Ice Cream Sandwich":o[0]===4&&o[1]<4?"Jelly Bean":o[0]===4&&o[1]>=4?"KitKat":o[0]===5?"Lollipop":o[0]===6?"Marshmallow":o[0]===7?"Nougat":o[0]===8?"Oreo":o[0]===9?"Pie":void 0},i.getVersionPrecision=function(s){return s.split(".").length},i.compareVersions=function(s,o,c){c===void 0&&(c=!1);var d=i.getVersionPrecision(s),l=i.getVersionPrecision(o),u=Math.max(d,l),f=0,p=i.map([s,o],function(h){var b=u-i.getVersionPrecision(h),v=h+new Array(b+1).join(".0");return i.map(v.split("."),function(m){return new Array(20-m.length).join("0")+m}).reverse()});for(c&&(f=u-Math.min(d,l)),u-=1;u>=f;){if(p[0][u]>p[1][u])return 1;if(p[0][u]===p[1][u]){if(u===f)return 0;u-=1}else if(p[0][u]<p[1][u])return-1}},i.map=function(s,o){var c,d=[];if(Array.prototype.map)return Array.prototype.map.call(s,o);for(c=0;c<s.length;c+=1)d.push(o(s[c]));return d},i.find=function(s,o){var c,d;if(Array.prototype.find)return Array.prototype.find.call(s,o);for(c=0,d=s.length;c<d;c+=1){var l=s[c];if(o(l,c))return l}},i.assign=function(s){for(var o,c,d=s,l=arguments.length,u=new Array(l>1?l-1:0),f=1;f<l;f++)u[f-1]=arguments[f];if(Object.assign)return Object.assign.apply(Object,[s].concat(u));var p=function(){var h=u[o];typeof h=="object"&&h!==null&&Object.keys(h).forEach(function(b){d[b]=h[b]})};for(o=0,c=u.length;o<c;o+=1)p();return s},i.getBrowserAlias=function(s){return r.BROWSER_ALIASES_MAP[s]},i.getBrowserTypeByAlias=function(s){return r.BROWSER_MAP[s]||""},i}();e.default=a,t.exports=e.default},18:function(t,e,n){e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,a=(r=n(91))&&r.__esModule?r:{default:r},i=n(18);function s(c,d){for(var l=0;l<d.length;l++){var u=d[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(c,u.key,u)}}var o=function(){function c(){}var d,l,u;return c.getParser=function(f,p){if(p===void 0&&(p=!1),typeof f!="string")throw new Error("UserAgent should be a string");return new a.default(f,p)},c.parse=function(f){return new a.default(f).getResult()},d=c,u=[{key:"BROWSER_MAP",get:function(){return i.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return i.ENGINE_MAP}},{key:"OS_MAP",get:function(){return i.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return i.PLATFORMS_MAP}}],(l=null)&&s(d.prototype,l),u&&s(d,u),c}();e.default=o,t.exports=e.default},91:function(t,e,n){e.__esModule=!0,e.default=void 0;var r=c(n(92)),a=c(n(93)),i=c(n(94)),s=c(n(95)),o=c(n(17));function c(l){return l&&l.__esModule?l:{default:l}}var d=function(){function l(f,p){if(p===void 0&&(p=!1),f==null||f==="")throw new Error("UserAgent parameter can't be empty");this._ua=f,this.parsedResult={},p!==!0&&this.parse()}var u=l.prototype;return u.getUA=function(){return this._ua},u.test=function(f){return f.test(this._ua)},u.parseBrowser=function(){var f=this;this.parsedResult.browser={};var p=o.default.find(r.default,function(h){if(typeof h.test=="function")return h.test(f);if(h.test instanceof Array)return h.test.some(function(b){return f.test(b)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.browser=p.describe(this.getUA())),this.parsedResult.browser},u.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},u.getBrowserName=function(f){return f?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},u.getBrowserVersion=function(){return this.getBrowser().version},u.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},u.parseOS=function(){var f=this;this.parsedResult.os={};var p=o.default.find(a.default,function(h){if(typeof h.test=="function")return h.test(f);if(h.test instanceof Array)return h.test.some(function(b){return f.test(b)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.os=p.describe(this.getUA())),this.parsedResult.os},u.getOSName=function(f){var p=this.getOS().name;return f?String(p).toLowerCase()||"":p||""},u.getOSVersion=function(){return this.getOS().version},u.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},u.getPlatformType=function(f){f===void 0&&(f=!1);var p=this.getPlatform().type;return f?String(p).toLowerCase()||"":p||""},u.parsePlatform=function(){var f=this;this.parsedResult.platform={};var p=o.default.find(i.default,function(h){if(typeof h.test=="function")return h.test(f);if(h.test instanceof Array)return h.test.some(function(b){return f.test(b)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.platform=p.describe(this.getUA())),this.parsedResult.platform},u.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},u.getEngineName=function(f){return f?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},u.parseEngine=function(){var f=this;this.parsedResult.engine={};var p=o.default.find(s.default,function(h){if(typeof h.test=="function")return h.test(f);if(h.test instanceof Array)return h.test.some(function(b){return f.test(b)});throw new Error("Browser's test function is not valid")});return p&&(this.parsedResult.engine=p.describe(this.getUA())),this.parsedResult.engine},u.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},u.getResult=function(){return o.default.assign({},this.parsedResult)},u.satisfies=function(f){var p=this,h={},b=0,v={},m=0;if(Object.keys(f).forEach(function(P){var $=f[P];typeof $=="string"?(v[P]=$,m+=1):typeof $=="object"&&(h[P]=$,b+=1)}),b>0){var T=Object.keys(h),A=o.default.find(T,function(P){return p.isOS(P)});if(A){var N=this.satisfies(h[A]);if(N!==void 0)return N}var R=o.default.find(T,function(P){return p.isPlatform(P)});if(R){var B=this.satisfies(h[R]);if(B!==void 0)return B}}if(m>0){var F=Object.keys(v),I=o.default.find(F,function(P){return p.isBrowser(P,!0)});if(I!==void 0)return this.compareVersion(v[I])}},u.isBrowser=function(f,p){p===void 0&&(p=!1);var h=this.getBrowserName().toLowerCase(),b=f.toLowerCase(),v=o.default.getBrowserTypeByAlias(b);return p&&v&&(b=v.toLowerCase()),b===h},u.compareVersion=function(f){var p=[0],h=f,b=!1,v=this.getBrowserVersion();if(typeof v=="string")return f[0]===">"||f[0]==="<"?(h=f.substr(1),f[1]==="="?(b=!0,h=f.substr(2)):p=[],f[0]===">"?p.push(1):p.push(-1)):f[0]==="="?h=f.substr(1):f[0]==="~"&&(b=!0,h=f.substr(1)),p.indexOf(o.default.compareVersions(v,h,b))>-1},u.isOS=function(f){return this.getOSName(!0)===String(f).toLowerCase()},u.isPlatform=function(f){return this.getPlatformType(!0)===String(f).toLowerCase()},u.isEngine=function(f){return this.getEngineName(!0)===String(f).toLowerCase()},u.is=function(f,p){return p===void 0&&(p=!1),this.isBrowser(f,p)||this.isOS(f)||this.isPlatform(f)},u.some=function(f){var p=this;return f===void 0&&(f=[]),f.some(function(h){return p.is(h)})},l}();e.default=d,t.exports=e.default},92:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,a=(r=n(17))&&r.__esModule?r:{default:r},i=/version\/(\d+(\.?_?\d+)+)/i,s=[{test:[/googlebot/i],describe:function(o){var c={name:"Googlebot"},d=a.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/opera/i],describe:function(o){var c={name:"Opera"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/opr\/|opios/i],describe:function(o){var c={name:"Opera"},d=a.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/SamsungBrowser/i],describe:function(o){var c={name:"Samsung Internet for Android"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/Whale/i],describe:function(o){var c={name:"NAVER Whale Browser"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/MZBrowser/i],describe:function(o){var c={name:"MZ Browser"},d=a.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/focus/i],describe:function(o){var c={name:"Focus"},d=a.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/swing/i],describe:function(o){var c={name:"Swing"},d=a.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/coast/i],describe:function(o){var c={name:"Opera Coast"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(o){var c={name:"Opera Touch"},d=a.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/yabrowser/i],describe:function(o){var c={name:"Yandex Browser"},d=a.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/ucbrowser/i],describe:function(o){var c={name:"UC Browser"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/Maxthon|mxios/i],describe:function(o){var c={name:"Maxthon"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/epiphany/i],describe:function(o){var c={name:"Epiphany"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/puffin/i],describe:function(o){var c={name:"Puffin"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/sleipnir/i],describe:function(o){var c={name:"Sleipnir"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/k-meleon/i],describe:function(o){var c={name:"K-Meleon"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/micromessenger/i],describe:function(o){var c={name:"WeChat"},d=a.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/qqbrowser/i],describe:function(o){var c={name:/qqbrowserlite/i.test(o)?"QQ Browser Lite":"QQ Browser"},d=a.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/msie|trident/i],describe:function(o){var c={name:"Internet Explorer"},d=a.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/\sedg\//i],describe:function(o){var c={name:"Microsoft Edge"},d=a.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/edg([ea]|ios)/i],describe:function(o){var c={name:"Microsoft Edge"},d=a.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/vivaldi/i],describe:function(o){var c={name:"Vivaldi"},d=a.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/seamonkey/i],describe:function(o){var c={name:"SeaMonkey"},d=a.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/sailfish/i],describe:function(o){var c={name:"Sailfish"},d=a.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,o);return d&&(c.version=d),c}},{test:[/silk/i],describe:function(o){var c={name:"Amazon Silk"},d=a.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/phantom/i],describe:function(o){var c={name:"PhantomJS"},d=a.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/slimerjs/i],describe:function(o){var c={name:"SlimerJS"},d=a.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var c={name:"BlackBerry"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var c={name:"WebOS Browser"},d=a.default.getFirstMatch(i,o)||a.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/bada/i],describe:function(o){var c={name:"Bada"},d=a.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/tizen/i],describe:function(o){var c={name:"Tizen"},d=a.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/qupzilla/i],describe:function(o){var c={name:"QupZilla"},d=a.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/firefox|iceweasel|fxios/i],describe:function(o){var c={name:"Firefox"},d=a.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/electron/i],describe:function(o){var c={name:"Electron"},d=a.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/MiuiBrowser/i],describe:function(o){var c={name:"Miui"},d=a.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/chromium/i],describe:function(o){var c={name:"Chromium"},d=a.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,o)||a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/chrome|crios|crmo/i],describe:function(o){var c={name:"Chrome"},d=a.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/GSA/i],describe:function(o){var c={name:"Google Search"},d=a.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:function(o){var c=!o.test(/like android/i),d=o.test(/android/i);return c&&d},describe:function(o){var c={name:"Android Browser"},d=a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/playstation 4/i],describe:function(o){var c={name:"PlayStation 4"},d=a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/safari|applewebkit/i],describe:function(o){var c={name:"Safari"},d=a.default.getFirstMatch(i,o);return d&&(c.version=d),c}},{test:[/.*/i],describe:function(o){var c=o.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:a.default.getFirstMatch(c,o),version:a.default.getSecondMatch(c,o)}}}];e.default=s,t.exports=e.default},93:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,a=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/Roku\/DVP/],describe:function(o){var c=a.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,o);return{name:i.OS_MAP.Roku,version:c}}},{test:[/windows phone/i],describe:function(o){var c=a.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,o);return{name:i.OS_MAP.WindowsPhone,version:c}}},{test:[/windows /i],describe:function(o){var c=a.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,o),d=a.default.getWindowsVersionName(c);return{name:i.OS_MAP.Windows,version:c,versionName:d}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(o){var c={name:i.OS_MAP.iOS},d=a.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,o);return d&&(c.version=d),c}},{test:[/macintosh/i],describe:function(o){var c=a.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,o).replace(/[_\s]/g,"."),d=a.default.getMacOSVersionName(c),l={name:i.OS_MAP.MacOS,version:c};return d&&(l.versionName=d),l}},{test:[/(ipod|iphone|ipad)/i],describe:function(o){var c=a.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,o).replace(/[_\s]/g,".");return{name:i.OS_MAP.iOS,version:c}}},{test:function(o){var c=!o.test(/like android/i),d=o.test(/android/i);return c&&d},describe:function(o){var c=a.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,o),d=a.default.getAndroidVersionName(c),l={name:i.OS_MAP.Android,version:c};return d&&(l.versionName=d),l}},{test:[/(web|hpw)[o0]s/i],describe:function(o){var c=a.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,o),d={name:i.OS_MAP.WebOS};return c&&c.length&&(d.version=c),d}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(o){var c=a.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,o)||a.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,o)||a.default.getFirstMatch(/\bbb(\d+)/i,o);return{name:i.OS_MAP.BlackBerry,version:c}}},{test:[/bada/i],describe:function(o){var c=a.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,o);return{name:i.OS_MAP.Bada,version:c}}},{test:[/tizen/i],describe:function(o){var c=a.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,o);return{name:i.OS_MAP.Tizen,version:c}}},{test:[/linux/i],describe:function(){return{name:i.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:i.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(o){var c=a.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,o);return{name:i.OS_MAP.PlayStation4,version:c}}}];e.default=s,t.exports=e.default},94:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,a=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(o){var c=a.default.getFirstMatch(/(can-l01)/i,o)&&"Nova",d={type:i.PLATFORMS_MAP.mobile,vendor:"Huawei"};return c&&(d.model=c),d}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(o){var c=o.test(/ipod|iphone/i),d=o.test(/like (ipod|iphone)/i);return c&&!d},describe:function(o){var c=a.default.getFirstMatch(/(ipod|iphone)/i,o);return{type:i.PLATFORMS_MAP.mobile,vendor:"Apple",model:c}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName(!0)==="blackberry"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(o){return o.getBrowserName(!0)==="bada"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getBrowserName()==="windows phone"},describe:function(){return{type:i.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(o){var c=Number(String(o.getOSVersion()).split(".")[0]);return o.getOSName(!0)==="android"&&c>=3},describe:function(){return{type:i.PLATFORMS_MAP.tablet}}},{test:function(o){return o.getOSName(!0)==="android"},describe:function(){return{type:i.PLATFORMS_MAP.mobile}}},{test:function(o){return o.getOSName(!0)==="macos"},describe:function(){return{type:i.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(o){return o.getOSName(!0)==="windows"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="linux"},describe:function(){return{type:i.PLATFORMS_MAP.desktop}}},{test:function(o){return o.getOSName(!0)==="playstation 4"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}},{test:function(o){return o.getOSName(!0)==="roku"},describe:function(){return{type:i.PLATFORMS_MAP.tv}}}];e.default=s,t.exports=e.default},95:function(t,e,n){e.__esModule=!0,e.default=void 0;var r,a=(r=n(17))&&r.__esModule?r:{default:r},i=n(18),s=[{test:function(o){return o.getBrowserName(!0)==="microsoft edge"},describe:function(o){if(/\sedg\//i.test(o))return{name:i.ENGINE_MAP.Blink};var c=a.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,o);return{name:i.ENGINE_MAP.EdgeHTML,version:c}}},{test:[/trident/i],describe:function(o){var c={name:i.ENGINE_MAP.Trident},d=a.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:function(o){return o.test(/presto/i)},describe:function(o){var c={name:i.ENGINE_MAP.Presto},d=a.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:function(o){var c=o.test(/gecko/i),d=o.test(/like gecko/i);return c&&!d},describe:function(o){var c={name:i.ENGINE_MAP.Gecko},d=a.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:i.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(o){var c={name:i.ENGINE_MAP.WebKit},d=a.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,o);return d&&(c.version=d),c}}];e.default=s,t.exports=e.default}});var XU=s3(ZU.exports);const Xr={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"};class Bi{constructor({shouldSetOnWindow:e,connectionStream:n,shouldSendMetadata:r=!1,shouldShimWeb3:a,sdkInstance:i}){const s=new Vue({connectionStream:n,shouldSendMetadata:r,shouldSetOnWindow:e,shouldShimWeb3:a,autoRequestAccounts:!1}),o=new Proxy(s,{deleteProperty:()=>!0});if(this.provider=o,this.sdkInstance=i,e&&typeof window<"u")try{c=s,window.ethereum=c,window.dispatchEvent(new Event("ethereum#initialized"))}catch(d){le("[Ethereum] Unable to set global provider - window.ethereum may be read-only",d)}var c;if(a&&typeof window<"u")try{(function(d,l=console){let u=!1,f=!1;if(!window.web3){const p="__isMetaMaskShim__";let h={currentProvider:d};Object.defineProperty(h,p,{value:!0,enumerable:!0,configurable:!1,writable:!1}),h=new Proxy(h,{get:(b,v,...m)=>(v!=="currentProvider"||u?v==="currentProvider"||v===p||f||(f=!0,l.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),d.request({method:"metamask_logWeb3ShimUsage"}).catch(T=>{l.debug("MetaMask: Failed to log web3 shim usage.",T)})):(u=!0,l.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(b,v,...m)),set:(...b)=>(l.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...b))}),Object.defineProperty(window,"web3",{value:h,enumerable:!1,configurable:!0,writable:!0})}})(this.provider)}catch(d){le("[Ethereum] Unable to shim web3 - window.web3 may be read-only",d)}this.provider.on("display_uri",d=>{this.sdkInstance.emit(Xr.DisplayURI,d)}),this.provider.on("_initialized",()=>{const d={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Xr.Initialized,d),le("[Ethereum: constructor()] provider initialized",d)})}static init(e){var n;return le("[Ethereum: init()] Initializing Ethereum service"),this.instance=new Bi(e),(n=this.instance)===null||n===void 0?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(!((e=this.instance)===null||e===void 0)&&e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}class D5{constructor({useDeepLink:e,preferredOpenLink:n,debug:r=!1}){this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=e,this.state.preferredOpenLink=n,this.state.debug=r}openDeeplink(e,n,r){return function(a,i,s,o){const{state:c}=a;le(`[PlatfformManager: openDeeplink()] universalLink --> ${i}`),le(`[PlatfformManager: openDeeplink()] deepLink --> ${s}`);try{if(c.preferredOpenLink)return void c.preferredOpenLink(c.useDeeplink?s:i,o);if(le(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${c.useDeeplink} link=${c.useDeeplink?s:i}`),c.useDeeplink)typeof window<"u"&&(window.location.href=s);else if(typeof document<"u"){const d=document.createElement("a");d.href=i,d.target="_self",d.rel="noreferrer noopener",d.click()}}catch(d){console.log("[PlatfformManager: openDeeplink()] can't open link",d)}}(this,e,n,r)}isReactNative(){var e;return this.isNotBrowser()&&typeof window<"u"&&(window==null?void 0:window.navigator)&&((e=window.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"}isMetaMaskInstalled(){return function(){const e=Bi.getProvider()||(window==null?void 0:window.ethereum);return le(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${e==null?void 0:e.isMetaMask} isConnected=${e==null?void 0:e.isConnected()}`),(e==null?void 0:e.isMetaMask)&&(e==null?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,n;const r=XU.parse(window.navigator.userAgent);return((e=r==null?void 0:r.platform)===null||e===void 0?void 0:e.type)==="mobile"||((n=r==null?void 0:r.platform)===null||n===void 0?void 0:n.type)==="tablet"}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return typeof window<"u"&&!!window.ReactNativeWebView&&!!navigator.userAgent.endsWith("MetaMaskMobile")}isMobileWeb(){return this.state.platformType===lr.MobileWeb}static isNotBrowser(){var e;return typeof window>"u"||!(window!=null&&window.navigator)||Or!==void 0&&((e=Or==null?void 0:Or.navigator)===null||e===void 0?void 0:e.product)==="ReactNative"||(navigator==null?void 0:navigator.product)==="ReactNative"}isNotBrowser(){return D5.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return D5.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){const{state:n}=e;return n.platformType?n.platformType:e.isReactNative()?lr.ReactNative:e.isNotBrowser()?lr.NonBrowser:e.isMetaMaskMobileWebView()?lr.MetaMaskMobileWebview:e.isMobile()?lr.MobileWeb:lr.DesktopWeb}(this)}}const QU=t=>be(void 0,void 0,void 0,function*(){if(D5.isBrowser()){const{StorageManagerWeb:n}=yield Promise.resolve().then(function(){return Efe});return new n(t)}const e={persistChannelConfig:()=>be(void 0,void 0,void 0,function*(){}),getPersistedChannelConfig:()=>be(void 0,void 0,void 0,function*(){}),persistAccounts:()=>be(void 0,void 0,void 0,function*(){}),getCachedAccounts:()=>be(void 0,void 0,void 0,function*(){return[]}),persistChainId:()=>be(void 0,void 0,void 0,function*(){}),getCachedChainId:()=>be(void 0,void 0,void 0,function*(){}),terminate:()=>be(void 0,void 0,void 0,function*(){})};return Promise.resolve(e)});class Vue extends zue{constructor({connectionStream:e,shouldSendMetadata:n,autoRequestAccounts:r=!1}){super(e,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},le(`[SDKProvider: constructor()] autoRequestAccounts=${r}`),this.state.autoRequestAccounts=r}forceInitializeState(){return be(this,void 0,void 0,function*(){return le(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()})}_setConnected(){le("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e;const{accounts:n}=this._state;return n&&n.length!==0?((e=n[0])===null||e===void 0?void 0:e.toLowerCase())||"":(le("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,n){return this._handleAccountsChanged(e,n)}handleDisconnect({terminate:e=!1}){(function({terminate:n=!1,instance:r}){const{state:a}=r;le(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",WU.ethErrors.provider.disconnected()),a.providerStateRequested=!1})({terminate:e,instance:this})}_initializeStateAsync(){return be(this,void 0,void 0,function*(){return function(e){var n,r;return be(this,void 0,void 0,function*(){e.state===void 0&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""});const{state:a}=e;let i;if(a.providerStateRequested)le("[SDKProvider: initializeStateAsync()] initialization already in progress");else{let s;a.providerStateRequested=!0;let o=null,c=!1,d=!1;const l=yield QU({enabled:!0});if(l){const u=yield l.getPersistedChannelConfig({});c=(n=u==null?void 0:u.relayPersistence)!==null&&n!==void 0&&n,s=yield l.getCachedChainId();const f=yield l.getCachedAccounts();f.length>0&&(o=f[0])}if(le(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:s,cachedSelectedAddress:o}),c)if(s&&o)i={accounts:[o],chainId:s,isUnlocked:!1},d=!0;else try{i=yield e.request({method:"metamask_getProviderState"})}catch(u){return e._log.error("MetaMask: Failed to get initial state. Please report this bug.",u),void(a.providerStateRequested=!1)}if(((r=i==null?void 0:i.accounts)===null||r===void 0?void 0:r.length)===0)if(e.getSelectedAddress())i.accounts=[e.getSelectedAddress()];else{le("[SDKProvider: initializeStateAsync()] Fetch accounts remotely.");const u=yield e.request({method:"eth_requestAccounts",params:[]});i.accounts=u}e._initializeState(i),a.providerStateRequested=!1,d&&(e._state.isConnected=!0,e.emit("connect",{chainId:i==null?void 0:i.chainId}))}})}(this)})}_initializeState(e){return le("[SDKProvider: _initializeState()]",e),function(n,r,a){return le("[SDKProvider: initializeState()] set state._initialized to false"),n._state.initialized=!1,r(a)}(this,super._initializeState.bind(this),e)}_handleChainChanged({chainId:e,networkVersion:n}={}){this.state.chainId=e,this.state.networkVersion=n,function({instance:r,chainId:a,networkVersion:i,superHandleChainChanged:s}){le(`[SDKProvider: handleChainChanged()] chainId=${a} networkVersion=${i}`);let o=i;i||(le("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),o="1"),a!==AO&&(zn.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(a??"0x1",16)}`}),AO=a),r._state.isConnected=!0,r.emit("connect",{chainId:a}),s({chainId:a,networkVersion:o})}({instance:this,chainId:e,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}var $5,rl={name:"@metamask/sdk",version:"0.33.0",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"^4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}};(function(t){t.INPAGE="metamask-inpage",t.CONTENT_SCRIPT="metamask-contentscript",t.PROVIDER="metamask-provider"})($5||($5={}));const CO="direct",L5="https://metamask.app.link/connect",B5="metamask://connect",IO={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},Wue=/(?:^[a-f0-9]{8}-[a-f0-9]{4}-4[a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/u,st={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},F5={[st.ETH_REQUESTACCOUNTS]:!0,[st.ETH_SENDTRANSACTION]:!0,[st.ETH_SIGNTRANSACTION]:!0,[st.ETH_SIGN]:!0,[st.PERSONAL_SIGN]:!0,[st.ETH_ACCOUNTS]:!1,[st.ETH_CHAINID]:!1,[st.PERSONAL_SIGN]:!0,[st.ETH_SIGNTYPEDDATA]:!0,[st.ETH_SIGNTYPEDDATA_V3]:!0,[st.ETH_SIGNTYPEDDATA_V4]:!0,[st.WALLET_REQUESTPERMISSIONS]:!0,[st.WALLET_GETPERMISSIONS]:!0,[st.WALLET_WATCHASSET]:!0,[st.WALLET_ADDETHEREUMCHAIN]:!0,[st.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[st.METAMASK_CONNECTSIGN]:!0,[st.METAMASK_CONNECTWITH]:!0,[st.PERSONAL_EC_RECOVER]:!0,[st.METAMASK_BATCH]:!0,[st.METAMASK_OPEN]:!0},Gue=Object.keys(F5).filter(t=>F5[t]===!0).map(t=>t.toLowerCase()),ej=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(t=>t.toLowerCase()),t9=".sdk-comm",m8="providerType",Bw=".MMSDK_cached_address",Fw=".MMSDK_cached_chainId",es={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},Yue=1e6;var Ns;(function(t){t.TERMINATE="terminate",t.EXTENSION="extension",t.INITIALIZED="initialized"})(Ns||(Ns={}));const Jue=typeof window<"u"&&window.localStorage;function Zue({instance:t,msg:e}){return be(this,void 0,void 0,function*(){if(t._initialized||(le("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),yield t.init()),le(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),!t.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=/^0x([0-9A-Fa-f]{2})*$/u.test(e)?e:function(r){let a;if(ye!==void 0)a=ye.from(r,"utf8").toString("hex");else if(typeof TextEncoder<"u"){const i=new TextEncoder().encode(r);a=Array.from(i).map(s=>s.toString(16).padStart(2,"0")).join("")}else{if(typeof Or!="object"||!("Buffer"in Or))throw new Error("Unable to convert string to hex: No available method.");a=Or.Buffer.from(r,"utf8").toString("hex")}return`0x${a}`}(e);return t.activeProvider.request({method:st.METAMASK_CONNECTWITH,params:[{method:st.PERSONAL_SIGN,params:[n]}]})})}function OO(t){var e,n;return be(this,void 0,void 0,function*(){le("[MetaMaskSDK: connectWithExtensionProvider()] ",t),t.sdkProvider=t.activeProvider,t.activeProvider=window.extension,window.ethereum=window.extension;try{const r=yield(e=window.extension)===null||e===void 0?void 0:e.request({method:"eth_requestAccounts"});le(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${r}`)}catch(r){return void console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",r)}localStorage.setItem(m8,"extension"),t.extensionActive=!0,t.emit(Xr.ProviderUpdate,Ns.EXTENSION),t.options.enableAnalytics&&((n=t.analytics)===null||n===void 0||n.send({event:Wn.SDK_USE_EXTENSION}))})}function g8(t){let e;if(ye!==void 0)e=ye.from(t,"utf8").toString("base64");else if(typeof btoa=="function")e=btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/gu,(n,r)=>String.fromCharCode(parseInt(r,16))));else{if(typeof Or!="object"||!("Buffer"in Or))throw new Error("Unable to base64 encode: No available method.");e=Or.Buffer.from(t,"utf8").toString("base64")}return e}function Xue(t,e,n,r){var a,i,s,o,c,d,l,u,f,p,h,b,v,m,T,A,N,R,B,F;return be(this,void 0,void 0,function*(){const I=(a=t.state.remote)===null||a===void 0?void 0:a.isReady(),P=(i=t.state.remote)===null||i===void 0?void 0:i.isConnected(),$=(s=t.state.remote)===null||s===void 0?void 0:s.isPaused(),M=Bi.getProvider(),y=(o=t.state.remote)===null||o===void 0?void 0:o.getChannelId(),E=(c=t.state.remote)===null||c===void 0?void 0:c.isAuthorized(),{deeplinkProtocol:C}=t.state,{method:g,data:x,triggeredInstaller:O}=(k=>{var L,D,U,j;let H;ye.isBuffer(k)?(H=k.toJSON(),H._isBuffer=!0):H=k;const W=(L=H==null?void 0:H.data)===null||L===void 0?void 0:L.method;let K=!1;return typeof((D=H==null?void 0:H.data)===null||D===void 0?void 0:D.params)=="object"&&((j=(U=H==null?void 0:H.data)===null||U===void 0?void 0:U.params)===null||j===void 0?void 0:j.__triggeredInstaller)===!0&&(K=!0,H.data.params=H.data.params.wrappedParams),{method:W,data:H,triggeredInstaller:K}})(e);if(le(`[RCPMS: write()] method='${g}' isRemoteReady=${I} channelId=${y} isSocketConnected=${P} isRemotePaused=${$} providerConnected=${M.isConnected()}`,e),!y)return g!==st.METAMASK_GETPROVIDERSTATE&&le(`[RCPMS: write()] ${g} --> channelId is undefined`),r(new Error("disconnected"));le(`[RCPMS: write()] remote.isPaused()=${(d=t.state.remote)===null||d===void 0?void 0:d.isPaused()} authorized=${E} ready=${I} socketConnected=${P}`,e);const S=(l=t.state.platformManager)===null||l===void 0?void 0:l.isSecure(),w=(f=(u=t.state.platformManager)===null||u===void 0?void 0:u.isMobileWeb())!==null&&f!==void 0&&f,_=(h=(p=t.state.remote)===null||p===void 0?void 0:p.hasDeeplinkProtocol())!==null&&h!==void 0&&h&&w&&E;try{if(!O){const D=JSON.stringify(x==null?void 0:x.data);if(D.length>Yue)return r(new Error(`Message size ${D.length} exceeds maximum allowed size of 1000000 bytes`));(b=t.state.remote)===null||b===void 0||b.sendMessage(x==null?void 0:x.data).then(()=>{le(`[RCPMS: _write()] ${g} sent successfully`)}).catch(U=>{le("[RCPMS: _write()] error sending message",U)})}if(!S)return le(`[RCPMS: _write()] unsecure platform for method ${g} -- return callback`),r();if(O)return le("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r();const k=(T=(m=(v=t.state.remote)===null||v===void 0?void 0:v.getKeyInfo())===null||m===void 0?void 0:m.ecies.public)!==null&&T!==void 0?T:"";let L=encodeURI(`channelId=${y}&pubkey=${k}&comm=socket&t=d&v=2`);if(_){const D=JSON.stringify(x==null?void 0:x.data),U=(A=t.state.remote)===null||A===void 0?void 0:A.encrypt(D);if(!U)return le("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"));L+=`&scheme=${C}&rpc=${g8(U)}`}if(!(!((N=t.state.platformManager)===null||N===void 0)&&N.isMetaMaskInstalled()))return le("[RCPMS: _write()] prevent deeplink until installation is completed."),r();F5[g]?(le(`[RCPMS: _write()] redirect link for '${g}' socketConnected=${P} connect?${L}`),(R=t.state.platformManager)===null||R===void 0||R.openDeeplink(`${L5}?${L}`,`${B5}?${L}`,"_self")):!((B=t.state.remote)===null||B===void 0)&&B.isPaused()?(le(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${g}`),(F=t.state.platformManager)===null||F===void 0||F.openDeeplink(`${L5}?redirect=true&${L}`,`${B5}?redirect=true&${L}`,"_self")):le(`[RCPMS: _write()] method ${g} doesn't need redirect.`)}catch(k){return le("[RCPMS: _write()] error sending message",k),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))}return r()})}class Que extends K6.Duplex{constructor({name:e,remote:n,deeplinkProtocol:r,platformManager:a}){super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=e,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=a,this._onMessage=this._onMessage.bind(this),this.state.remote.on(xe.MESSAGE,this._onMessage)}_write(e,n,r){return be(this,void 0,void 0,function*(){return Xue(this,e,0,r)})}_read(){}_onMessage(e){return function(n,r){try{if(le("[RCPMS: onMessage()] message",r),!r||typeof r!="object"||typeof(r==null?void 0:r.data)!="object")return;if(!(r!=null&&r.name))return void le("[RCPMS: onMessage()] ignore message without name",r);if((r==null?void 0:r.name)!==$5.PROVIDER)return void le(`[RCPMS: onMessage()] ignore message with wrong name message=${r}`);if(ye.isBuffer(r)){const a=ye.from(r);n.push(a)}else n.push(r)}catch(a){le(`[RCPMS: onMessage()] ignore message error err=${a}`)}}(this,e)}start(){}}let MO=1;const tj=t=>new Promise(e=>{setTimeout(()=>{e(!0)},t)}),efe=({checkInstallationOnAllCalls:t=!1,communicationLayerPreference:e,injectProvider:n,shouldShimWeb3:r,platformManager:a,installer:i,sdk:s,remoteConnection:o,debug:c})=>be(void 0,void 0,void 0,function*(){var d,l;const u=(({name:$,remoteConnection:M})=>{if(!M||!(M!=null&&M.getConnector()))throw new Error("Missing remote connection parameter");return new Que({name:$,remote:M==null?void 0:M.getConnector(),deeplinkProtocol:M==null?void 0:M.state.deeplinkProtocol,platformManager:M==null?void 0:M.getPlatformManager()})})({name:$5.INPAGE,target:$5.CONTENT_SCRIPT,platformManager:a,communicationLayerPreference:e,remoteConnection:o}),f=a.getPlatformType(),p=s.options.dappMetadata,h=`Sdk/Javascript SdkVersion/${rl.version} Platform/${f} dApp/${(d=p.url)!==null&&d!==void 0?d:p.name} dAppTitle/${p.name}`;let b=null,v=null;const m=(l=s.options.storage)===null||l===void 0?void 0:l.storageManager;if(m){try{const $=yield m.getCachedAccounts();$.length>0&&(b=$[0])}catch($){console.error(`[initializeMobileProvider] failed to get cached addresses: ${$}`)}try{const $=yield m.getCachedChainId();$&&(v=$)}catch($){console.error(`[initializeMobileProvider] failed to parse cached chainId: ${$}`)}}le(`[initializeMobileProvider] cachedAccountAddress: ${b}, cachedChainId: ${v}`);const T=!(!n||f===lr.NonBrowser||f===lr.ReactNative),A=Bi.init({shouldSetOnWindow:T,connectionStream:u,shouldShimWeb3:r,sdkInstance:s});let N=!1;const R=$=>{N=$},B=()=>N,F=($,M,y,E)=>be(void 0,void 0,void 0,function*(){var C,g,x,O,S,w,_,k,L;const D=Bi.getProvider();if(N){D.emit("display_uri",(o==null?void 0:o.state.qrcodeLink)||""),o==null||o.showActiveModal();let J=B();for(;J;){const z=B(),Y=o==null?void 0:o.isAuthorized();J=z&&!Y,le(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${z} authorized: ${Y}`),yield tj(1e3)}return le("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),y(...M)}const U=a.isMetaMaskInstalled(),j=o==null?void 0:o.isConnected();let H=null,W=null,K=null;if(H=(C=D.getSelectedAddress())!==null&&C!==void 0?C:b,K=D.getChainId()||v,H&&m&&H!==b&&m.persistAccounts([H]).catch(J=>{console.error(`[initializeMobileProvider] failed to persist account: ${J}`)}),K&&(v=K,m&&m.persistChainId(K).catch(J=>{console.error(`[initializeMobileProvider] failed to persist chainId: ${J}`)})),le("[initializeMobileProvider: sendRequest()]",{selectedAddress:H,chainId:K}),E&&le(`[initializeMobileProvider: sendRequest()] method=${$} ongoing=${N} selectedAddress=${H} isInstalled=${U} checkInstallationOnAllCalls=${t} socketConnected=${j}`),H&&$.toLowerCase()===st.ETH_ACCOUNTS.toLowerCase())return[H];if(K&&$.toLowerCase()===st.ETH_CHAINID.toLowerCase())return K;const q=[st.ETH_REQUESTACCOUNTS,st.WALLET_REQUESTPERMISSIONS,st.METAMASK_CONNECTSIGN,st.METAMASK_CONNECTWITH],V=!F5[$],G=(g=s.options.readonlyRPCMap)===null||g===void 0?void 0:g[K];if(G&&V)try{const J=(x=M==null?void 0:M[0])===null||x===void 0?void 0:x.params,z=yield(({rpcEndpoint:Y,method:X,sdkInfo:ae,params:ie})=>be(void 0,void 0,void 0,function*(){const oe=JSON.stringify({jsonrpc:"2.0",method:X,params:ie,id:(MO+=1,MO)}),ue={Accept:"application/json","Content-Type":"application/json"};let Oe;Y.includes("infura")&&(ue["Metamask-Sdk-Info"]=ae);try{Oe=yield wB(Y,{method:"POST",headers:ue,body:oe})}catch(Re){throw Re instanceof Error?new Error(`Failed to fetch from RPC: ${Re.message}`):new Error(`Failed to fetch from RPC: ${Re}`)}if(!Oe.ok)throw new Error(`Server responded with a status of ${Oe.status}`);return(yield Oe.json()).result}))({rpcEndpoint:G,sdkInfo:h,method:$,params:J||[]});return E&&le(`initializeProvider::ReadOnlyRPCResponse ${z}`),z}catch(J){console.warn(`[initializeMobileProvider: sendRequest()] method=${$} readOnlyRPCRequest failed:`,J)}if((!U||U&&!j)&&$!==st.METAMASK_GETPROVIDERSTATE){const J=((O=M==null?void 0:M[0])===null||O===void 0?void 0:O.params)||[];if(q.indexOf($)!==-1||t){R(!0);const z=$===st.METAMASK_CONNECTWITH,Y=`${Date.now()}`;try{yield i.start({wait:!1,connectWith:z?{method:$,id:Y,params:J}:void 0}),yield new Promise((X,ae)=>{o!=null&&o.isAuthorized()&&(le("[initializeMobileProvider: sendRequest()] already authorized"),X(!0)),o==null||o.getConnector().once(xe.AUTHORIZED,()=>{X(!0)}),s.once(xe.PROVIDER_UPDATE,ie=>{le(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${ie}`),ie===Ns.EXTENSION?ae(xe.PROVIDER_UPDATE):ae(new Error("Connection Terminated"))})})}catch(X){if(Ns.EXTENSION===X){if(le(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${$} on the active provider`),$.toLowerCase()===st.METAMASK_CONNECTSIGN.toLowerCase()){const ae=yield(S=s.getProvider())===null||S===void 0?void 0:S.request({method:st.ETH_REQUESTACCOUNTS,params:[]});if(!ae.length)throw new Error("SDK state invalid -- undefined accounts");const ie=yield(w=s.getProvider())===null||w===void 0?void 0:w.request({method:st.PERSONAL_SIGN,params:[J[0],ae[0]]});return s.emit(Xr.ConnectWithResponse,ie),ie}if($.toLowerCase()===st.METAMASK_CONNECTWITH.toLowerCase()){const[ae]=J,ie=yield(({method:oe,sdk:ue,params:Oe})=>be(void 0,void 0,void 0,function*(){var Re,pe,Ze,je;if(!ue.isExtensionActive())throw new Error("SDK state invalid -- extension is not active");le("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",oe,Oe);const it=yield(Re=ue.getProvider())===null||Re===void 0?void 0:Re.request({method:st.ETH_REQUESTACCOUNTS,params:[]});if(!it.length)throw new Error("SDK state invalid -- undefined accounts");if((oe==null?void 0:oe.toLowerCase())===st.PERSONAL_SIGN.toLowerCase()){const De={method:oe,params:[Oe[0],it[0]]};return yield(pe=ue.getProvider())===null||pe===void 0?void 0:pe.request(De)}if((oe==null?void 0:oe.toLowerCase())===st.ETH_SENDTRANSACTION.toLowerCase()){const De={method:oe,params:[Object.assign(Object.assign({},Oe[0]),{from:it[0]})]};return yield(Ze=ue.getProvider())===null||Ze===void 0?void 0:Ze.request(De)}return ej.includes(oe.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${oe} -- not handled by the extension -- call separately`),it):yield(je=ue.getProvider())===null||je===void 0?void 0:je.request({method:oe,params:Oe})}))({method:ae.method,sdk:s,params:ae.params});return s.emit(Xr.ConnectWithResponse,ie),ie}return le(`[initializeMobileProvider: sendRequest()] sending '${$}' on active provider`,J),yield(_=s.getProvider())===null||_===void 0?void 0:_.request({method:$,params:J})}throw X===xe.REJECTED?(o==null||o.closeModal(),(k=s.getProvider())===null||k===void 0||k.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001})):(le(`[initializeMobileProvider: sendRequest()] failed to start installer: ${X}`),X)}finally{R(!1)}if($===st.ETH_REQUESTACCOUNTS)return W=yield new Promise(X=>{const ae=setInterval(()=>{const{accounts:ie}=D.getState();ie&&(clearInterval(ae),X(ie))},100)}),le(`[initializeMobileProvider: sendRequest()] selectedAddress: ${H} --- SKIP rpc call`),W;if($===st.METAMASK_CONNECTWITH)try{let X=0;const ae=5,ie=({resolve:Re,reject:pe})=>{X+=1;const Ze=o==null?void 0:o.getConnector().getRPCMethodTracker(),je=Ze==null?void 0:Ze[Y];return le(`TRACKER: update method ${Y}`,je),je!=null&&je.result?(le("[initializeMobileProvider: sendRequest()] found result",je.result),s.emit(Xr.ConnectWithResponse,je.result),void Re(je.result)):je!=null&&je.error?(le("[initializeMobileProvider: sendRequest()] found error",je.error),void pe(je.error)):X>=ae?(le("[initializeMobileProvider: sendRequest()] max message count reached without result"),void pe(new Error("Max message count reached without result"))):void le("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")};let oe,ue;const Oe=yield new Promise((Re,pe)=>{const Ze=o==null?void 0:o.getConnector().getRPCMethodTracker();le(`TRACKER: method ${Y}`,Ze),Ze!=null&&Ze[Y].result?(le("[initializeMobileProvider: sendRequest()] found result",Ze==null?void 0:Ze[Y].result),Re(Ze==null?void 0:Ze[Y].result)):Ze!=null&&Ze[Y].error&&(le("[initializeMobileProvider: sendRequest()] found error",Ze==null?void 0:Ze[Y].error),pe(Ze==null?void 0:Ze[Y].error)),ue=()=>ie({resolve:Re,reject:pe}),oe=o==null?void 0:o.getConnector().on(xe.RPC_UPDATE,ue)});return ue&&(oe==null||oe.off(xe.RPC_UPDATE,ue)),le("TRACKER: result",Oe),Oe}catch(X){throw le("[initializeMobileProvider: sendRequest()] error:",X),X}return M[0]&&typeof M[0]=="object"&&(M[0].params={__triggeredInstaller:!0,wrappedParams:M[0].params}),y(...M)}if(a.isSecure()&&F5[$])return y(...M);if(s.isExtensionActive())return le(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${$}' to it`,M,J),yield(L=s.getProvider())===null||L===void 0?void 0:L.request({method:$,params:J});throw le(`[initializeMobileProvider: sendRequest()] method=${$} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.")}try{const J=yield y(...M);if(le(`[initializeMobileProvider: sendRequest()] method=${$} rpcResponse`,J),$===st.WALLET_REQUESTPERMISSIONS){const z=J.reduce((Y,X)=>{var ae;if(X.parentCapability==="eth_accounts"){const ie=(ae=X.caveats.find(oe=>oe.type==="restrictReturnedAccounts"))===null||ae===void 0?void 0:ae.value;ie&&Y.push(...ie)}return Y},[]);le("[initializeMobileProvider: sendRequest()] accountsToPersist:",z),z.length>0&&(D.handleAccountsChanged(z,!1),m==null||m.persistAccounts(z))}return J}catch(J){throw console.error("[initializeMobileProvider: sendRequest()] error:",J),J}}),{request:I}=A;A.request=(...$)=>be(void 0,void 0,void 0,function*(){return F($==null?void 0:$[0].method,$,I,c)});const{send:P}=A;return A.send=(...$)=>be(void 0,void 0,void 0,function*(){return F($==null?void 0:$[0],$,P,c)}),le("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),u.start(),A});function tfe(t){var e,n,r,a;return be(this,void 0,void 0,function*(){const{options:i}=t,s={communicationLayerPreference:(e=i.communicationLayerPreference)!==null&&e!==void 0?e:Md.SOCKET,platformManager:t.platformManager,sdk:t,checkInstallationOnAllCalls:i.checkInstallationOnAllCalls,injectProvider:(n=i.injectProvider)===null||n===void 0||n,shouldShimWeb3:(r=i.shouldShimWeb3)===null||r===void 0||r,extensionOnly:(a=i.extensionOnly)===null||a===void 0||a,installer:t.installer,remoteConnection:t.remoteConnection,debug:t.debug},o=yield efe(s);t.activeProvider=o,function(c){var d,l,u,f;(l=(d=c.remoteConnection)===null||d===void 0?void 0:d.getConnector())===null||l===void 0||l.on(Xr.ConnectionStatus,p=>{c.emit(Xr.ConnectionStatus,p)}),(f=(u=c.remoteConnection)===null||u===void 0?void 0:u.getConnector())===null||f===void 0||f.on(Xr.ServiceStatus,p=>{c.emit(Xr.ServiceStatus,p)})}(t)})}const nfe="sdk";class rfe{constructor({serverUrl:e,enabled:n,originatorInfo:r}){this.serverURL=H6,this.serverURL=e,this.originatorInfo=r,this.enabled=n==null||n}send({event:e,params:n}){if(!this.enabled)return;const r=Object.assign(Object.assign({id:nfe,event:e,sdkVersion:rl.version},this.originatorInfo),{params:n});le(`[Analytics: send()] event: ${e}`,r),Go(r,this.serverURL).catch(a=>{le(`[Analytics: send()] error: ${a}`)})}}const afe=()=>{if(typeof document>"u")return;let t;const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++)e[n].getAttribute("rel")!=="icon"&&e[n].getAttribute("rel")!=="shortcut icon"||(t=e[n].getAttribute("href"));return t},ife=163400;function PO(t){var e,n,r;const{dappMetadata:a}=t,i=function({url:l,name:u}){var f;const p=l+u,h=g8(p);if(!localStorage)return"";let b=(f=localStorage.getItem(h))!==null&&f!==void 0?f:"";if(!b){b=Uc();try{localStorage.setItem(h,b)}catch{return""}}return b}({url:(e=a==null?void 0:a.url)!==null&&e!==void 0?e:"no_url",name:(n=a==null?void 0:a.name)!==null&&n!==void 0?n:"no_name"}),s=(r=t.platformManager)===null||r===void 0?void 0:r.getPlatformType(),o=s===lr.DesktopWeb,c=s===lr.MetaMaskMobileWebview;let d="N/A";return o?d="extension":c&&(d="mobile"),{id:i,from:d}}const cb=(t,e,n)=>{if(Vp(t))if(n||e&&typeof e=="object"&&e!==null&&"error"in e){const r=n||(e==null?void 0:e.error);r&&r.code===4001?zn.analytics.track("sdk_action_rejected",{action:t}):zn.analytics.track("sdk_action_failed",{action:t})}else zn.analytics.track("sdk_action_succeeded",{action:t})},Uw=({provider:t,sdkInstance:e})=>{if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(n,r)=>r==="request"?function(a){var i,s;return be(this,void 0,void 0,function*(){le("[wrapExtensionProvider()] Overwriting request method",a);const{method:o,params:c}=a,d=Gue.includes(o.toLowerCase()),{id:l,from:u}=PO(e);if(d&&((i=e.analytics)===null||i===void 0||i.send({event:Wn.SDK_RPC_REQUEST,params:{method:o,from:u,id:l}})),Vp(o)&&zn.analytics.track("sdk_action_requested",{action:o}),o===st.METAMASK_BATCH&&Array.isArray(c))return(({target:h,args:b,trackEvent:v,sdkInstance:m})=>be(void 0,void 0,void 0,function*(){var T,A;if(b.method!=="metamask_batch")throw new Error("Invalid usage");const N=[],R=(T=b==null?void 0:b.params)!==null&&T!==void 0?T:[];for(const I of R){const P=yield h==null?void 0:h.request({method:I.method,params:I.params});N.push(P)}const{id:B,from:F}=PO(m);v&&((A=m.analytics)===null||A===void 0||A.send({event:Wn.SDK_RPC_REQUEST_DONE,params:{method:b.method,from:F,id:B}}));for(const I of N)cb(b.method,I,null);return N}))({target:n,args:a,trackEvent:d,sdkInstance:e});if(o.toLowerCase()===st.METAMASK_CONNECTSIGN.toLowerCase()&&Array.isArray(c))return(({target:h,params:b})=>be(void 0,void 0,void 0,function*(){let v,m=null;try{const T=yield h.request({method:st.ETH_REQUESTACCOUNTS,params:[]});if(!T.length)throw new Error("SDK state invalid -- undefined accounts");return v=yield h.request({method:st.PERSONAL_SIGN,params:[b[0],T[0]]}),v}catch(T){throw m=T,T}finally{cb(st.PERSONAL_SIGN,v,m)}}))({target:n,params:c});if(o.toLowerCase()===st.METAMASK_CONNECTWITH.toLowerCase()&&Array.isArray(c))return(({target:h,params:b})=>be(void 0,void 0,void 0,function*(){const[v]=b,m=v.method,T=v.params;let A,N=null;try{const R=yield h.request({method:st.ETH_REQUESTACCOUNTS,params:[]});if(!Array.isArray(R)||!R.length)throw new Error("SDK state invalid -- undefined accounts");return(m==null?void 0:m.toLowerCase())===st.PERSONAL_SIGN.toLowerCase()?(A=yield h.request({method:m,params:[T[0],R[0]]}),A):(m==null?void 0:m.toLowerCase())===st.ETH_SENDTRANSACTION.toLowerCase()?(A=yield h.request({method:m,params:[Object.assign(Object.assign({},T[0]),{from:R[0]})]}),A):ej.includes(m.toLowerCase())?(console.warn(`MetaMaskSDK connectWith method=${m} -- not handled by the extension -- call separately`),A=R,A):(A=yield h.request({method:m,params:T}),A)}catch(R){throw N=R,R}finally{cb(m,A,N)}}))({target:n,params:c});let f,p=null;try{return f=yield n.request(a),f}catch(h){throw p=h,h}finally{d&&((s=e.analytics)===null||s===void 0||s.send({event:Wn.SDK_RPC_REQUEST_DONE,params:{method:o,from:u,id:l}})),cb(o,f,p)}})}:r==="getChainId"?function(){return t.chainId}:r==="getNetworkVersion"?function(){return t.networkVersion}:r==="getSelectedAddress"?function(){return t.selectedAddress}:r==="isConnected"?function(){return t._state.isConnected}:n[r]})};var w8;function sfe({mustBeMetaMask:t,sdkInstance:e}){return be(this,void 0,void 0,function*(){if(typeof window>"u")throw new Error("window not available");try{const n=yield new Promise((r,a)=>{const i=setTimeout(()=>{a(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(w8.Announce,s=>{const o=s,{detail:{info:c,provider:d}={}}=o,{name:l,rdns:u,uuid:f}=c??{};Wue.test(f)&&l.startsWith(IO.NAME)&&IO.RDNS.includes(u)&&(clearTimeout(i),r(d))}),window.dispatchEvent(new Event(w8.Request))});return Uw({provider:n,sdkInstance:e})}catch{if(!t&&window.ethereum)return Uw({provider:window.ethereum,sdkInstance:e});throw new Error("Provider not found")}})}(function(t){t.Announce="eip6963:announceProvider",t.Request="eip6963:requestProvider"})(w8||(w8={}));const ofe=t=>be(void 0,void 0,void 0,function*(){const{options:e}=t,{infuraAPIKey:n}=e;if(!n)return;const r={"0x1":`https://mainnet.infura.io/v3/${n}`,"0x5":`https://goerli.infura.io/v3/${n}`,"0xaa36a7":`https://sepolia.infura.io/v3/${n}`,"0xe708":`https://linea-mainnet.infura.io/v3/${n}`,"0xe704":`https://linea-goerli.infura.io/v3/${n}`,"0x89":`https://polygon-mainnet.infura.io/v3/${n}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${n}`,"0x45":`https://optimism-mainnet.infura.io/v3/${n}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${n}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${n}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${n}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${n}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${n}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${n}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${n}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${n}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${n}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${n}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${n}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${n}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${n}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${n}`};t.options.readonlyRPCMap?t.options.readonlyRPCMap=Object.assign(Object.assign({},t.options.readonlyRPCMap),r):t.options.readonlyRPCMap=r}),cfe=t=>be(void 0,void 0,void 0,function*(){const{options:e}=t,{readonlyRPCMap:n}=e;if(n)try{le("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",n),t.setReadOnlyRPCCalls(!0)}catch{throw new Error("Invalid Infura Settings")}});function dfe(t,e,n,r){return new(n||(n=Promise))(function(a,i){function s(d){try{c(r.next(d))}catch(l){i(l)}}function o(d){try{c(r.throw(d))}catch(l){i(l)}}function c(d){var l;d.done?a(d.value):(l=d.value,l instanceof n?l:new n(function(u){u(l)})).then(s,o)}c((r=r.apply(t,[])).next())})}function lfe(t,e){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(c){return function(d){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!((a=a.length>0&&a[a.length-1])||l[0]!==6&&l[0]!==2)){s=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){s.label=l[1];break}if(l[0]===6&&s.label<a[1]){s.label=a[1],a=l;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(l);break}a[2]&&s.ops.pop(),s.trys.pop();continue}l=e.call(t,s)}catch(u){l=[6,u],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([c,d])}}}var kO="INSTALLED",NO="NOT_INSTALLED",RO="REGISTERED",DO="REGISTERING",$O="RELOADING",LO={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},db="REGISTRATION_IN_PROGRESS",BO="FORWARDER_ID",ufe=function(){function t(e){var n=e===void 0?{}:e,r=n.forwarderOrigin,a=r===void 0?"https://fwd.metamask.io":r,i=n.forwarderMode,s=i===void 0?t.FORWARDER_MODE.INJECT:i;this.forwarderOrigin=a,this.forwarderMode=s,this.state=t.isMetaMaskInstalled()?kO:NO;var o=t._detectBrowser();this.downloadUrl=o?LO[o]:LO.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),s===t.FORWARDER_MODE.INJECT&&sessionStorage.getItem(db)==="true"&&t._injectForwarder(this.forwarderOrigin)}return t.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return e.data.type==="metamask:reload"?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},t.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},t.prototype._onMessageFromForwarder=function(e){return dfe(this,0,void 0,function(){return lfe(this,function(n){switch(n.label){case 0:switch(this.state){case $O:return[3,1];case NO:return[3,2];case kO:return[3,3];case DO:return[3,5];case RO:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=$O,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=DO,[4,t._register()];case 4:return n.sent(),this.state=RO,e.source.postMessage({type:"metamask:registrationCompleted"},e.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},t.prototype.startOnboarding=function(){sessionStorage.setItem(db,"true"),this._openDownloadPage(),this._openForwarder()},t.prototype.stopOnboarding=function(){sessionStorage.getItem(db)==="true"&&(this.forwarderMode===t.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),t._removeForwarder()),sessionStorage.setItem(db,"false"))},t.prototype._openForwarder=function(){this.forwarderMode===t.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):t._injectForwarder(this.forwarderOrigin)},t.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},t.isMetaMaskInstalled=function(){return!!(window.ethereum&&window.ethereum.isMetaMask)},t._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},t._injectForwarder=function(e){var n=document.body,r=document.createElement("iframe");r.setAttribute("height","0"),r.setAttribute("width","0"),r.setAttribute("style","display: none;"),r.setAttribute("src",e),r.setAttribute("id",BO),n.insertBefore(r,n.children[0])},t._removeForwarder=function(){var e;(e=document.getElementById(BO))===null||e===void 0||e.remove()},t._detectBrowser=function(){var e=XU.parse(window.navigator.userAgent);return e.browser.name==="Firefox"?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},t.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},t}();function ffe(t,{wait:e=!1}){return be(this,void 0,void 0,function*(){return le(`[MetamaskInstaller: startInstaller()] wait=${e}`),e&&(yield tj(1e3)),yield t.checkInstallation()})}class pfe{constructor({remote:e,preferDesktop:n,platformManager:r,debug:a=!1}){this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=e,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=a}startDesktopOnboarding(){return function(){return be(this,void 0,void 0,function*(){le("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),new ufe().startOnboarding()})}()}redirectToProperInstall(){return be(this,void 0,void 0,function*(){return function(e){var n,r;return be(this,void 0,void 0,function*(){const{state:a}=e,i=(n=a.platformManager)===null||n===void 0?void 0:n.getPlatformType();if(le(`[MetamaskInstaller: redirectToProperInstall()] platform=${i}`),i===lr.MetaMaskMobileWebview)return!1;a.isInstalling=!0;try{yield(r=a.remote)===null||r===void 0?void 0:r.startConnection({connectWith:a.connectWith}),a.isInstalling=!1,a.hasInstalled=!0}catch(s){throw a.isInstalling=!1,s}return!0})}(this)})}checkInstallation(){return be(this,void 0,void 0,function*(){return function(e){var n;return be(this,void 0,void 0,function*(){const{state:r}=e,a=(n=r.platformManager)===null||n===void 0?void 0:n.isMetaMaskInstalled();return le(`[MetamaskInstaller: checkInstallation()] isInstalled=${a}`),!!a||(yield e.redirectToProperInstall())})}(this)})}start({wait:e=!1,connectWith:n}){return be(this,void 0,void 0,function*(){this.state.connectWith=n,le(`[MetaMaskInstaller: start()] wait=${e}`,n),yield ffe(this,{wait:e})})}}class nj{constructor({debug:e,sdkVersion:n}){this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=e!=null&&e,this.sdkVersion=n}loadComponent(e){return be(this,void 0,void 0,function*(){if(!this.defined[e]){this.defined[e]=!0;try{const n=yield Promise.resolve().then(function(){return Gfe});console.log("loader",n),n.defineCustomElements()}catch(n){console.error(`Failed to load ${e} modal:`,n)}}})}renderInstallModal(e){var n;return be(this,void 0,void 0,function*(){this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,yield this.loadComponent("install");const r=document.createElement("mm-install-modal");r.link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.addEventListener("close",({detail:{shouldTerminate:a}})=>e.onClose(a)),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",a=>{var i;return(i=e.onAnalyticsEvent)===null||i===void 0?void 0:i.call(e,a.detail)}),e.parentElement.appendChild(r)})}renderSelectModal(e){var n;return be(this,void 0,void 0,function*(){this.containers.select=e.parentElement,yield this.loadComponent("select");const r=document.createElement("mm-select-modal");r.link=e.link,r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",({detail:{shouldTerminate:a}})=>e.onClose(a)),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100)})}renderPendingModal(e){var n;return be(this,void 0,void 0,function*(){this.containers.pending=e.parentElement,yield this.loadComponent("pending");const r=document.createElement("mm-pending-modal");r.sdkVersion=(n=e.sdkVersion)!==null&&n!==void 0?n:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",({detail:{otpValue:a}})=>e.updateOTPValue(a)),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r)})}updateOTPValue(e){const n=()=>{var r;const a=(r=this.containers.pending)===null||r===void 0?void 0:r.querySelector("mm-pending-modal");return!!a&&(a.otpCode=e,!0)};setTimeout(()=>{n()},800)}updateQRCode(e){var n,r;const a=(n=this.containers.install)===null||n===void 0?void 0:n.querySelector("mm-install-modal");if(a)a.link=e;else{const i=(r=this.containers.select)===null||r===void 0?void 0:r.querySelector("mm-select-modal");i&&(i.link=e)}}unmount(){Object.entries(this.containers).forEach(([e,n])=>{var r;(r=n==null?void 0:n.parentNode)===null||r===void 0||r.removeChild(n),this.containers[e]=void 0})}}const hfe=({link:t,debug:e,installer:n,terminate:r,connectWithExtension:a,preferDesktop:i,onAnalyticsEvent:s})=>{let o=null,c=null;le("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),le(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),le(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),le(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),le(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);const d=l=>{var u;le("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",l,c),c!=null&&c.parentNode&&((u=c.parentNode)===null||u===void 0||u.removeChild(c)),c=null,o=null,l===!0&&(r==null||r())};return{mount:l=>{if(le("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",c),c)return c.style.display="block",void(o==null||o.updateQRCode(l));o=new nj({debug:e,sdkVersion:rl.version}),c=document.createElement("div"),document.body.appendChild(c),window.extension?o.renderSelectModal({parentElement:c,connectWithExtension:()=>{d(),a==null||a()},onClose:d,link:t,preferDesktop:i!=null&&i}).catch(u=>{console.error(u)}):o.renderInstallModal({parentElement:c,preferDesktop:i!=null&&i,link:t,metaMaskInstaller:n,onClose:d,onAnalyticsEvent:s}).catch(u=>{console.error("[UI: InstallModal-web: sdkWebInstallModal()]",u)})},unmount:d}},bfe=({onDisconnect:t,debug:e})=>{let n=null,r=null;const a=()=>{le("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",n),n!=null&&n.parentNode&&n.parentNode.removeChild(n),n=null,r=null},i=o=>{le("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",o),r&&r.updateOTPValue(o)},s=({displayOTP:o}={displayOTP:!0})=>{le("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",n),n?n.style.display="block":(r=new nj({debug:e,sdkVersion:rl.version}),n=document.createElement("div"),document.body.appendChild(n),r.renderPendingModal({parentElement:n,onClose:a,onDisconnect:t,updateOTPValue:i,displayOTP:o}).catch(c=>{console.error("[UI: pendingModal-web: sdkWebPendingModal()]",c)}))};return s(),{mount:s,unmount:a,updateOTPValue:i}};function rj(t,e){var n,r,a,i;t.connector||(le("[RemoteConnection: initializeConnector()] initialize connector"),t.connector=new g6e({anonId:e.anonId,platformType:e.platformManager.getPlatformType(),communicationLayerPreference:e.communicationLayerPreference,transports:e.transports,dappMetadata:Object.assign(Object.assign({},e.dappMetadata),{source:e._source}),analytics:e.enableAnalytics,communicationServerUrl:e.communicationServerUrl,sdkVersion:rl.version,context:"dapp",ecies:e.ecies,storage:e.storage,logging:e.logging}),e.timer&&(le("[RemoteConnection: initializeConnector()] reset background timer",e.timer),(r=(n=e.timer)===null||n===void 0?void 0:n.stopBackgroundTimer)===null||r===void 0||r.call(n),(i=(a=e.timer)===null||a===void 0?void 0:a.runBackgroundTimer)===null||i===void 0||i.call(a,()=>!1,1e4)))}function jw(t){t.listeners.forEach(({event:e,handler:n})=>{var r;(r=t.connector)===null||r===void 0||r.off(e,n)}),t.listeners=[]}function yfe(t,e,n){return be(this,void 0,void 0,function*(){const r=setTimeout(()=>{zn.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return new Promise((a,i)=>{if(!t.connector)return void i(new Error("No connector available"));le("[RemoteConnection: connectWithModalInstaller()]",{state:t,options:e,linkParams:n});const s=`${t.useDeeplink?B5:L5}?${n}`;(function(o,c,d){var l,u,f,p;o.installModal=(u=(l=c.modals).install)===null||u===void 0?void 0:u.call(l,{link:d,preferDesktop:o.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:()=>{le("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch(h=>{console.warn("[MMSDK] failed to terminate connection",h)})},debug:o.developerMode,connectWithExtension:()=>{var h;return(h=c.connectWithExtensionProvider)===null||h===void 0||h.call(c),!1},onAnalyticsEvent:({event:h,params:b})=>{var v,m,T;const A=Object.assign(Object.assign({},b),{sdkVersion:c.sdk.getVersion(),dappId:(v=c.dappMetadata)===null||v===void 0?void 0:v.name,source:c._source,url:(m=c.dappMetadata)===null||m===void 0?void 0:m.url});(T=o.analytics)===null||T===void 0||T.send({event:h,params:A})}}),(p=(f=o.installModal)===null||f===void 0?void 0:f.mount)===null||p===void 0||p.call(f,d)})(t,e,s),e.sdk.once(xe.PROVIDER_UPDATE,o=>be(this,void 0,void 0,function*(){if(le("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),o===Ns.TERMINATE){const c={code:4001,message:"User rejected the request."};return clearTimeout(r),void i(c)}i(o)})),t.connector.once(xe.AUTHORIZED,()=>{clearTimeout(r),a()}),t.connector.once(xe.REJECTED,()=>{clearTimeout(r),i(xe.REJECTED)}),t.connector.once(xe.CLIENTS_READY,()=>be(this,void 0,void 0,function*(){le("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(r),a()}))})})}function aj(t,e){function n(r,a){var i;(i=t.connector)===null||i===void 0||i.on(r,a),t.listeners.push({event:r,handler:a})}t.connector&&(jw(t),n(xe.WALLET_INIT,({accounts:r,chainId:a})=>be(this,void 0,void 0,function*(){le(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${r} chainId=${a}`);const i=Bi.getProvider();i._setConnected();const s={accounts:r,chainId:a,isUnlocked:!1};i._initializeState(s),i.emit("chainChanged",a),i.emit("accountsChanged",r)})),n(xe.AUTHORIZED,()=>be(this,void 0,void 0,function*(){var r,a,i,s;try{le("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",t.pendingModal,t.installModal);const o=Bi.getProvider();o._setConnected(),(a=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||a===void 0||a.call(r),(s=(i=t.installModal)===null||i===void 0?void 0:i.unmount)===null||s===void 0||s.call(i,!1),t.otpAnswer=void 0,t.authorized=!0,le("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",o.getState()),yield o.forceInitializeState()}catch{}})),n(xe.TERMINATE,()=>{var r,a,i,s,o;(a=(r=t.pendingModal)===null||r===void 0?void 0:r.unmount)===null||a===void 0||a.call(r),(s=(i=t.installModal)===null||i===void 0?void 0:i.unmount)===null||s===void 0||s.call(i,!0),t.pendingModal=void 0,t.installModal=void 0,t.otpAnswer=void 0,(o=t.connector)===null||o===void 0||o.disconnect({terminate:!0}),t.authorized=!1,Bi.getProvider().handleDisconnect({terminate:!0}),jw(t),le("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function mfe(t,e,{initialCheck:n,connectWith:r}={}){var a,i,s,o,c,d,l,u,f,p,h,b,v,m,T,A,N,R,B;return be(this,void 0,void 0,function*(){try{if(rj(t,e),!t.connector)throw new Error("no connector defined");aj(t);const F=Bi.getProvider();t.authorized=!1,F.emit("connecting");const I=yield(a=t.connector)===null||a===void 0?void 0:a.originatorSessionConnect();le(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${n}`,I);let P=(i=I==null?void 0:I.channelId)!==null&&i!==void 0?i:"",$=(o=(s=t.connector.getKeyInfo())===null||s===void 0?void 0:s.ecies.public)!==null&&o!==void 0?o:"",M=(d=(c=t.connector.getKeyInfo())===null||c===void 0?void 0:c.ecies.private)!==null&&d!==void 0?d:"";if(n&&!I)return Promise.resolve();if(!I&&!n){const j=yield t.connector.generateChannelIdConnect();P=(l=j.channelId)!==null&&l!==void 0?l:"",$=(u=j.pubKey)!==null&&u!==void 0?u:"",M=(f=j.privKey)!==null&&f!==void 0?f:"";const H=Date.now();(p=t.connector.state.storageManager)===null||p===void 0||p.persistChannelConfig({channelId:P,localKey:M,lastActive:H,validUntil:H+z6})}if(n&&(I!=null&&I.channelId))return!((h=t.connector)===null||h===void 0)&&h.isConnected()||(le(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${n}`,I),yield(b=t.connector)===null||b===void 0?void 0:b.connectToChannel({channelId:P})),Promise.resolve();I&&!(!((v=t.connector)===null||v===void 0)&&v.isConnected())&&(le("[RemoteConnection: startConnection()] reconnecting to channel",I),yield(m=t.connector)===null||m===void 0?void 0:m.connectToChannel({channelId:P}));const y=!((T=t.platformManager)===null||T===void 0)&&T.isSecure()?"":"&t=q",E=rl.version,{iconUrl:C,name:g,url:x,scheme:O}=e.dappMetadata||{},S=(A=t.platformManager)===null||A===void 0?void 0:A.getPlatformType();let w="N/A";typeof window<"u"&&window.location&&window.location.hostname?w=window.location.hostname:g!==void 0?w=g:x!==void 0&&(w=x);const _={url:x??"",title:g??"",icon:C,scheme:O??"",apiVersion:E,dappId:w||x||"N/A",anonId:e.anonId,platform:S??"",source:(N=e._source)!==null&&N!==void 0?N:""},k=g8(JSON.stringify(_));let L=`channelId=${P}&v=2&comm=${(R=t.communicationLayerPreference)!==null&&R!==void 0?R:""}&pubkey=${$}${y}&originatorInfo=${k}`;if(r){L+=`&rpc=${g8(JSON.stringify(r))}`;const j=t.connector.getRPCMethodTracker();j&&(j[`${r.id}`]=Object.assign(Object.assign({},r),{id:`${r.id}`,timestamp:Date.now()}))}const D=encodeURI(L),U=`${t.useDeeplink?B5:L5}?${L}`;if(t.qrcodeLink=U,t.developerMode&&le(`[RemoteConnection: startConnection()] qrcodeLink=${D}`),F.emit("display_uri",U),zn.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),(B=t.platformManager)===null||B===void 0?void 0:B.isSecure()){const j=setTimeout(()=>{zn.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4);return yield function(H,W){var K,q;return be(this,void 0,void 0,function*(){const V=`${L5}?${W}`,G=`${B5}?${W}`;(q=(K=H.platformManager)===null||K===void 0?void 0:K.openDeeplink)===null||q===void 0||q.call(K,V,G,"_self")})}(t,D),new Promise((H,W)=>{var K,q,V;if(!((K=t.connector)===null||K===void 0)&&K.isAuthorized())return clearTimeout(j),void H();(q=t.connector)===null||q===void 0||q.once(xe.AUTHORIZED,()=>{clearTimeout(j),H()}),(V=t.connector)===null||V===void 0||V.once(xe.REJECTED,()=>{clearTimeout(j),W(xe.REJECTED)})})}return yfe(t,e,D)}catch(F){throw console.error("[startConnection] error",F),F}})}class gfe{constructor(e){var n,r,a;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;const i=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0||((r=e.logging)===null||r===void 0?void 0:r.sdk)===!0;this.state.developerMode=i,this.state.analytics=e.analytics,this.state.preferDesktop=(a=e.preferDesktop)!==null&&a!==void 0&&a,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=hfe),e.modals.otp||(e.modals.otp=bfe)}startConnection(e){return be(this,void 0,void 0,function*(){return mfe(this.state,this.options,e)})}initRemoteCommunication({sdkInstance:e}){var n,r,a;return be(this,void 0,void 0,function*(){const i=yield(r=(n=e.options.storage)===null||n===void 0?void 0:n.storageManager)===null||r===void 0?void 0:r.getPersistedChannelConfig();if(!this.options.ecies){const s={privateKey:i==null?void 0:i.localKey};this.options.ecies=s}rj(this.state,this.options),yield(a=this.getConnector())===null||a===void 0?void 0:a.initFromDappStorage(),aj(this.state,this.options)})}showActiveModal(){return function(e){var n,r,a,i;e.authorized?le("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?(r=(n=e.pendingModal).mount)===null||r===void 0||r.call(n):e.installModal&&((i=(a=e.installModal).mount)===null||i===void 0||i.call(a,e.qrcodeLink||""))}(this.state)}closeModal(){var e,n,r,a;(n=(e=this.state.pendingModal)===null||e===void 0?void 0:e.unmount)===null||n===void 0||n.call(e),(a=(r=this.state.installModal)===null||r===void 0?void 0:r.unmount)===null||a===void 0||a.call(r,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getChannelConfig()}getKeyInfo(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isReady())||!1}isAuthorized(){var e;return((e=this.state.connector)===null||e===void 0?void 0:e.isAuthorized())||!1}isPaused(){var e;return(e=this.state.connector)===null||e===void 0?void 0:e.isPaused()}disconnect(e){var n,r,a;le("[RemoteConnection: disconnect()]",e),e!=null&&e.terminate&&(Bi.getProvider().handleDisconnect({terminate:!0}),(r=(n=this.state.pendingModal)===null||n===void 0?void 0:n.unmount)===null||r===void 0||r.call(n),this.state.otpAnswer=void 0),(a=this.state.connector)===null||a===void 0||a.disconnect(e),function(i){le("[RemoteConnection: cleanupConnector()] cleaning up connector"),i.connector&&(jw(i),i.connector.disconnect({terminate:!0}).catch(s=>{le("[RemoteConnection: cleanupConnector()] error disconnecting connector",s)}))}(this.state)}}function wfe(t){var e,n,r,a,i,s,o,c,d,l,u;return be(this,void 0,void 0,function*(){const{options:f}=t;if(f.logging=(e=f.logging)!==null&&e!==void 0?e:{},f.communicationLayerPreference=(n=f.communicationLayerPreference)!==null&&n!==void 0?n:Md.SOCKET,f.enableDebug!==void 0&&(Ir.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),f.enableAnalytics=(r=f.enableAnalytics)===null||r===void 0||r,f.injectProvider=(a=f.injectProvider)===null||a===void 0||a,f.shouldShimWeb3=(i=f.shouldShimWeb3)===null||i===void 0||i,f.extensionOnly=(s=f.extensionOnly)===null||s===void 0||s,f.useDeeplink=(o=f.useDeeplink)===null||o===void 0||o,f.storage=(c=f.storage)!==null&&c!==void 0?c:{enabled:!0},f.headless){Ir("[MetaMaskSDK: performSDKInitialization()] headless mode enabled");const T=()=>{},A={install:()=>({mount:T,unmount:T})},N={installer:T};f.modals=A,f.ui=N}const p=((d=f.logging)===null||d===void 0?void 0:d.developerMode)===!0;t.debug=((l=f.logging)===null||l===void 0?void 0:l.sdk)||p,le("[MetaMaskSDK: performSDKInitialization()] options",t.options);const h=Object.assign({},f.logging);p&&(h.sdk=!0,h.eciesLayer=!0,h.keyExchangeLayer=!0,h.remoteLayer=!0,h.serviceLayer=!0,h.plaintext=!0),yield function(T){var A;return be(this,void 0,void 0,function*(){const{options:N}=T;T.platformManager=new D5({useDeepLink:(A=N.useDeeplink)!==null&&A!==void 0&&A,preferredOpenLink:N.openDeeplink,debug:T.debug})})}(t),yield function(T){var A,N,R,B,F;return be(this,void 0,void 0,function*(){const{options:I}=T,P=(A=T.platformManager)===null||A===void 0?void 0:A.getPlatformType();T.analytics=new rfe({serverUrl:(N=I.communicationServerUrl)!==null&&N!==void 0?N:H6,enabled:I.enableAnalytics,originatorInfo:{url:(R=I.dappMetadata.url)!==null&&R!==void 0?R:"",title:(B=I.dappMetadata.name)!==null&&B!==void 0?B:"",dappId:T.getDappId(),platform:P??"",source:(F=I._source)!==null&&F!==void 0?F:"",anonId:""}})})}(t),yield function(T){var A,N,R;return be(this,void 0,void 0,function*(){if(!T.options.enableAnalytics||!(!((A=T.platformManager)===null||A===void 0)&&A.isBrowser())&&!(!((N=T.platformManager)===null||N===void 0)&&N.isReactNative()))return;const B=T.getVersion(),F=T.getDappId(),I=yield T.getAnonId(),P=(R=T.platformManager)===null||R===void 0?void 0:R.getPlatformType(),$=T.options._source;zn.analytics.setGlobalProperty("sdk_version",B),zn.analytics.setGlobalProperty("dapp_id",F),zn.analytics.setGlobalProperty("anon_id",I),zn.analytics.setGlobalProperty("platform",P),zn.analytics.setGlobalProperty("integration_type",$),zn.analytics.enable(),zn.analytics.track("sdk_initialized",{})})}(t),yield function(T){var A;return be(this,void 0,void 0,function*(){const{options:N}=T;((A=N.storage)===null||A===void 0?void 0:A.enabled)!==!0||N.storage.storageManager||(N.storage.storageManager=yield QU(N.storage))})}(t),yield function(T){return be(this,void 0,void 0,function*(){const{options:A}=T,N=/^(http|https):\/\/[^\s]*$/;if(A.dappMetadata){A.dappMetadata.iconUrl&&!N.test(A.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),A.dappMetadata.iconUrl=void 0),A.dappMetadata.base64Icon&&A.dappMetadata.base64Icon.length>ife&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),A.dappMetadata.base64Icon=void 0),A.dappMetadata.url&&!N.test(A.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://");const R=afe();if(R&&!A.dappMetadata.iconUrl&&!A.dappMetadata.base64Icon){const B=`${window.location.protocol}//${window.location.host}${R}`;A.dappMetadata.iconUrl=B}}T.dappMetadata=A.dappMetadata})}(t),yield ofe(t),yield cfe(t);const{metamaskBrowserExtension:b,preferExtension:v,shouldReturn:m}=yield function(T){var A,N,R,B;return be(this,void 0,void 0,function*(){const{options:F}=T;let I,P=!1,$=!1;if(typeof window<"u"&&window.ethereum&&!(!((A=T.platformManager)===null||A===void 0)&&A.isMetaMaskMobileWebView())){P=localStorage.getItem(m8)==="extension";try{I=yield sfe({mustBeMetaMask:!0,sdkInstance:T}),window.extension=I,I.on(es.CHAIN_CHANGED,M=>{le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${M}`),T.sdkProvider&&T.getMobileProvider().emit(es.CHAIN_CHANGED,M)}),I.on(es.ACCOUNTS_CHANGED,M=>be(this,void 0,void 0,function*(){var y;le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${M}`);const E=!!T.sdkProvider,C=!!T.extensionActive;if(E&&T.getMobileProvider().emit(es.ACCOUNTS_CHANGED,M),C&&(M==null?void 0:M.length)===0&&(yield(y=T.getProvider())===null||y===void 0?void 0:y.request({method:st.WALLET_GETPERMISSIONS,params:[]})).length===0)try{yield T.terminate()}catch(g){le("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",g)}})),I.on(es.DISCONNECT,M=>{le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${M}`),T.sdkProvider&&T.getMobileProvider().emit(es.DISCONNECT,M)}),I.on(es.CONNECT,M=>{le(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${M}`),T.sdkProvider&&T.getMobileProvider().emit(es.CONNECT,M)}),I.on(es.CONNECTED,M=>{le("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",M),T.sdkProvider&&T.getMobileProvider().emit(es.CONNECTED,M)})}catch{window.extension=void 0}}else!((N=T.platformManager)===null||N===void 0)&&N.isMetaMaskMobileWebView()&&((R=T.analytics)===null||R===void 0||R.send({event:Wn.SDK_USE_INAPP_BROWSER}),T.activeProvider=Uw({provider:window.ethereum,sdkInstance:T}),T._initialized=!0,$=!0);return I&&F.extensionOnly&&(le("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),(B=T.analytics)===null||B===void 0||B.send({event:Wn.SDK_USE_EXTENSION}),T.activeProvider=I,T.extensionActive=!0,T.extension=I,T._initialized=!0,$=!0),{preferExtension:P,shouldReturn:$,metamaskBrowserExtension:I}})}(t);if(m)le("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization");else{yield function(T,A){var N,R,B,F,I;return be(this,void 0,void 0,function*(){const{options:P}=T,$=Object.assign({},P.logging);T.remoteConnection=new gfe({anonId:yield T.getAnonId(),preferDesktop:(N=P.preferDesktop)!==null&&N!==void 0&&N,communicationLayerPreference:(R=P.communicationLayerPreference)!==null&&R!==void 0?R:Md.SOCKET,analytics:T.analytics,dappMetadata:P.dappMetadata,_source:P._source,enableAnalytics:(B=P.enableAnalytics)===null||B===void 0||B,timer:P.timer,sdk:T,platformManager:T.platformManager,transports:P.transports,communicationServerUrl:P.communicationServerUrl,storage:(F=P.storage)!==null&&F!==void 0?F:{enabled:!0},getMetaMaskInstaller:()=>{if(!T.installer)throw new Error("Invalid SDK status -- installer not initialized");return T.installer},logging:$,connectWithExtensionProvider:A===void 0?void 0:()=>OO(T),modals:Object.assign(Object.assign({},P.modals),{onPendingModalDisconnect:T.terminate.bind(T)})}),yield T.remoteConnection.initRemoteCommunication({sdkInstance:T}),T.installer=new pfe({remote:T.remoteConnection,preferDesktop:(I=P.preferDesktop)!==null&&I!==void 0&&I,platformManager:T.platformManager,debug:T.debug})})}(t,b),yield tfe(t),yield function(T,A){var N,R;return be(this,void 0,void 0,function*(){const{options:B}=T;A?(le("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),(N=T.analytics)===null||N===void 0||N.send({event:Wn.SDK_EXTENSION_UTILIZED}),OO(T).catch(F=>{console.warn("Can't connect with MetaMask extension...",F),localStorage.removeItem(m8)})):B.checkInstallationImmediately&&(!((R=T.platformManager)===null||R===void 0)&&R.isDesktopWeb()?(le("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),T.connect().catch(F=>{le(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${F}`)})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),T._initialized=!0})}(t,v);try{yield(u=t.remoteConnection)===null||u===void 0?void 0:u.startConnection({initialCheck:!0})}catch(T){console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",T)}t.emit(Xr.ProviderUpdate,Ns.INITIALIZED)}})}class vfe extends tle{constructor(e={storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:CO,i18nOptions:{enabled:!1}}){var n,r,a;super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",Ir.disable();const i=((n=e.logging)===null||n===void 0?void 0:n.developerMode)===!0;if((!((r=e.logging)===null||r===void 0)&&r.sdk||i)&&Ir.enable("MM_SDK"),le("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(!((a=e.dappMetadata)===null||a===void 0)&&a.url)){if(typeof window>"u"||typeof document>"u")throw new Error("You must provide dAppMetadata url");e.dappMetadata=Object.assign(Object.assign({},e.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=e,this.options._source||(e._source=CO),this.init().then(()=>{le("[MetaMaskSDK: constructor()]: initialized successfully."),typeof window<"u"&&(window.mmsdk=this)}).catch(s=>{console.error("[MetaMaskSDK: constructor()] error during initialization",s)})}init(){return be(this,void 0,void 0,function*(){return function(e){var n;return be(this,void 0,void 0,function*(){if(typeof window<"u"&&(!((n=window.mmsdk)===null||n===void 0)&&n.isInitialized()))return le("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk);if(e._initialized)return le("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise;if(e.sdkInitPromise)return le("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise;try{e.sdkInitPromise=wfe(e),yield e.sdkInitPromise}catch(r){throw console.error(r),r}return e.sdkInitPromise})}(this)})}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return typeof window<"u"&&!!(!((e=window.ethereum)===null||e===void 0)&&e.isMetaMask)}connect(){return be(this,void 0,void 0,function*(){return function(e){return be(this,void 0,void 0,function*(){if(e._initialized||(le("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),yield e.init()),le(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),!e.activeProvider)throw new Error("SDK state invalid -- undefined provider");const n=e.activeProvider.getSelectedAddress();return n?[n]:e.activeProvider.request({method:st.ETH_REQUESTACCOUNTS,params:[]})})}(this)})}connectAndSign({msg:e}){return be(this,void 0,void 0,function*(){return Zue({instance:this,msg:e})})}connectWith(e){return be(this,void 0,void 0,function*(){return function({instance:n,rpc:r}){return be(this,void 0,void 0,function*(){if(n._initialized||(le("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),yield n.init()),le(`[MetaMaskSDK: connectWith()] method: ${r.method} rpc=${r}`),!n.activeProvider)throw new Error("SDK state invalid -- undefined provider");return n.activeProvider.request({method:st.METAMASK_CONNECTWITH,params:[r]})})}({instance:this,rpc:e})})}resume(){return function(e){var n,r,a;return be(this,void 0,void 0,function*(){if(!(!((r=(n=e.remoteConnection)===null||n===void 0?void 0:n.getConnector())===null||r===void 0)&&r.isReady()))return le("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void((a=e.remoteConnection)===null||a===void 0||a.startConnection());le("[MetaMaskSDK: resume()] channel is ready")})}(this)}disconnect(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}isAuthorized(){var e;(e=this.remoteConnection)===null||e===void 0||e.isAuthorized()}terminate(){return function(e){var n,r,a;return be(this,void 0,void 0,function*(){if(!(!((n=e.platformManager)===null||n===void 0)&&n.isMetaMaskMobileWebView())){if(Jue&&(window.localStorage.removeItem(m8),window.localStorage.removeItem(Fw),window.localStorage.removeItem(Bw)),e.extensionActive){try{yield(r=e.activeProvider)===null||r===void 0?void 0:r.request({method:st.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]})}catch(i){le("[MetaMaskSDK: terminate()] error revoking permissions",i)}return e.options.extensionOnly?(e.emit(Xr.ProviderUpdate,Ns.TERMINATE),void le("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,void e.emit(Xr.ProviderUpdate,Ns.TERMINATE))}e.emit(Xr.ProviderUpdate,Ns.TERMINATE),le(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),(a=e.remoteConnection)===null||a===void 0||a.disconnect({terminate:!0,sendMessage:!0})}})}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e;const n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getUniversalLink();if(!n)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return n}getChannelId(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig())===null||n===void 0?void 0:n.channelId}getRPCHistory(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getRPCMethodTracker()}getVersion(){return rl.version}getDappId(){var e,n,r,a;return typeof window>"u"||window.location===void 0?(a=(n=(e=this.options.dappMetadata)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:(r=this.options.dappMetadata)===null||r===void 0?void 0:r.url)!==null&&a!==void 0?a:"N/A":window.location.hostname}getAnonId(){var e,n;return be(this,void 0,void 0,function*(){if(this._anonId)return this._anonId;let r;return r=!((e=this.platformManager)===null||e===void 0)&&e.isBrowser()?this.getBrowserAnonId():!((n=this.platformManager)===null||n===void 0)&&n.isReactNative()?yield this.getReactNativeAnonId():Uc(),this._anonId=r,r})}getBrowserAnonId(){const e=this.ANON_ID_STORAGE_KEY;try{const n=localStorage.getItem(e);if(n)return n;const r=Uc();return localStorage.setItem(e,r),r}catch(n){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",n),Uc()}}getReactNativeAnonId(){return be(this,void 0,void 0,function*(){const e=this.ANON_ID_STORAGE_KEY;try{const n=require("@react-native-async-storage/async-storage").default,r=yield n.getItem(e);if(r)return r;const a=Uc();return yield n.setItem(e,a),a}catch(n){return console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",n),Uc()}})}getWalletStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getConnectionStatus()}_getChannelConfig(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getChannelConfig()}_ping(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.ping()}_keyCheck(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.keyCheck()}_getServiceStatus(){var e,n;return(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0?void 0:n.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return(e=this.remoteConnection)===null||e===void 0?void 0:e.getKeyInfo()}_resetKeys(){var e,n;(n=(e=this.remoteConnection)===null||e===void 0?void 0:e.getConnector())===null||n===void 0||n.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,n){return super.emit(e,n)}on(e,n){return super.on(e,n)}}var Efe=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor({enabled:t}={enabled:!1}){this.enabled=!1,this.enabled=t}persistChannelConfig(t){return be(this,void 0,void 0,function*(){const e=JSON.stringify(t);le(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,t),localStorage.setItem(t9,e)})}getPersistedChannelConfig(){return be(this,void 0,void 0,function*(){let t;try{if(le(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(t9),le("[StorageManagerWeb: getPersistedChannelConfig()]",t),!t)return;const e=JSON.parse(t);return le("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",e),e}catch(e){return void console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",e)}})}persistAccounts(t){return be(this,void 0,void 0,function*(){le(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,t);const e=JSON.stringify(t);localStorage.setItem(Bw,e)})}getCachedAccounts(){return be(this,void 0,void 0,function*(){try{const t=localStorage.getItem(Bw);return t?JSON.parse(t):[]}catch(t){throw console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",t),t}})}persistChainId(t){return be(this,void 0,void 0,function*(){le(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,t),localStorage.setItem(Fw,t)})}getCachedChainId(){return be(this,void 0,void 0,function*(){try{const t=localStorage.getItem(Fw);return t??void 0}catch(t){throw console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",t),t}})}terminate(){return be(this,void 0,void 0,function*(){le(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(t9)})}}});const _fe="hydrated",Tfe=!1,xfe=!1,Sfe=!0;var Afe=Object.defineProperty,iT=new WeakMap,e1=t=>iT.get(t),sT=(t,e)=>iT.set(e.$lazyInstance$=t,e),FO=(t,e)=>e in t,md=(t,e)=>(0,console.error)(t,e),n9=new Map,p2=new Map,ij="slot-fb{display:contents}slot-fb[hidden]{display:none}",f3=typeof window<"u"?window:{},xs=f3.document||{head:{}},G0={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},sj=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Hw=!1,UO=[],oj=[],Cfe=(t,e)=>n=>{t.push(n),Hw||(Hw=!0,4&G0.$flags$?oT(zw):G0.raf(zw))},jO=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){md(n)}t.length=0},zw=()=>{jO(UO),jO(oj),(Hw=UO.length>0)&&G0.raf(zw)},oT=t=>(e=>Promise.resolve(e))().then(t),Ife=Cfe(oj),HO={},cT=t=>(t=typeof t)=="object"||t==="function";function cj(t){var e,n,r;return(r=(n=(e=t.head)==null?void 0:e.querySelector('meta[name="csp-nonce"]'))==null?void 0:n.getAttribute("content"))!=null?r:void 0}((t,e)=>{for(var n in e)Afe(t,n,{get:e[n],enumerable:!0})})({},{err:()=>dj,map:()=>Ofe,ok:()=>qw,unwrap:()=>Mfe,unwrapErr:()=>Pfe});var qw=t=>({isOk:!0,isErr:!1,value:t}),dj=t=>({isOk:!1,isErr:!0,value:t});function Ofe(t,e){if(t.isOk){const n=e(t.value);return n instanceof Promise?n.then(r=>qw(r)):qw(n)}if(t.isErr){const n=t.value;return dj(n)}throw"should never get here"}var h2,dT,Mfe=t=>{if(t.isOk)return t.value;throw t.value},Pfe=t=>{if(t.isErr)return t.value;throw t.value},fe=(t,e,...n)=>{let r=null,a=!1,i=!1;const s=[],o=d=>{for(let l=0;l<d.length;l++)r=d[l],Array.isArray(r)?o(r):r!=null&&typeof r!="boolean"&&((a=typeof t!="function"&&!cT(r))&&(r=String(r)),a&&i?s[s.length-1].$text$+=r:s.push(a?v8(null,r):r),i=a)};if(o(n),e){const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(l=>d[l]).join(" "))}if(typeof t=="function")return t(e===null?{}:e,s,Nfe);const c=v8(t,null);return c.$attrs$=e,s.length>0&&(c.$children$=s),c},v8=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null}),kfe={},Nfe={forEach:(t,e)=>t.map(zO).forEach(e),map:(t,e)=>t.map(zO).map(e).map(Rfe)},zO=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),Rfe=t=>{if(typeof t.vtag=="function"){const n={...t.vattrs};return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),fe(t.vtag,n,...t.vchildren||[])}const e=v8(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},p3=t=>e1(t).$hostElement$,s1=(t,e,n)=>{const r=p3(t);return{emit:a=>lj(r,e,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:a})}},lj=(t,e,n)=>{const r=G0.ce(e,n);return t.dispatchEvent(r),r},qO=new WeakMap,Dfe=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$;e.$tagName$;const a=((i,s,o)=>{var c;const d=uj(s),l=p2.get(d);if(i=i.nodeType===11?i:xs,l)if(typeof l=="string"){i=i.head||i;let u,f=qO.get(i);if(f||qO.set(i,f=new Set),!f.has(d)){{u=xs.createElement("style"),u.innerHTML=l;const p=(c=G0.$nonce$)!=null?c:cj(xs);if(p!=null&&u.setAttribute("nonce",p),!(1&s.$flags$))if(i.nodeName==="HEAD"){const h=i.querySelectorAll("link[rel=preconnect]"),b=h.length>0?h[h.length-1].nextSibling:i.querySelector("style");i.insertBefore(u,b)}else if("host"in i)if(sj){const h=new CSSStyleSheet;h.replaceSync(l),i.adoptedStyleSheets=[h,...i.adoptedStyleSheets]}else{const h=i.querySelector("style");h?h.innerHTML=l+h.innerHTML:i.prepend(u)}else i.append(u);1&s.$flags$&&i.nodeName!=="HEAD"&&i.insertBefore(u,null)}4&s.$flags$&&(u.innerHTML+=ij),f&&f.add(d)}}else i.adoptedStyleSheets.includes(l)||(i.adoptedStyleSheets=[...i.adoptedStyleSheets,l]);return d})(n.shadowRoot?n.shadowRoot:n.getRootNode(),e);10&r&&2&r&&(n["s-sc"]=a,n.classList.add(a+"-h"))},uj=(t,e)=>"sc-"+t.$tagName$,KO=(t,e,n,r,a,i)=>{if(n!==r){let s=FO(t,e),o=e.toLowerCase();if(e==="class"){const c=t.classList,d=VO(n),l=VO(r);c.remove(...d.filter(u=>u&&!l.includes(u))),c.add(...l.filter(u=>u&&!d.includes(u)))}else if(e==="style"){for(const c in n)r&&r[c]!=null||(c.includes("-")?t.style.removeProperty(c):t.style[c]="");for(const c in r)n&&r[c]===n[c]||(c.includes("-")?t.style.setProperty(c,r[c]):t.style[c]=r[c])}else if(s||e[0]!=="o"||e[1]!=="n"){const c=cT(r);if((s||c&&r!==null)&&!a)try{if(t.tagName.includes("-"))t[e]=r;else{const d=r??"";e==="list"?s=!1:n!=null&&t[e]==d||(typeof t.__lookupSetter__(e)=="function"?t[e]=d:t.setAttribute(e,d))}}catch{}r==null||r===!1?r===!1&&t.getAttribute(e)!==""||t.removeAttribute(e):(!s||4&i||a)&&!c&&(r=r===!0?"":r,t.setAttribute(e,r))}else if(e=e[2]==="-"?e.slice(3):FO(f3,o)?o.slice(2):o[2]+e.slice(3),n||r){const c=e.endsWith(fj);e=e.replace(Lfe,""),n&&G0.rel(t,e,n,c),r&&G0.ael(t,e,r,c)}}},$fe=/\s/,VO=t=>t?t.split($fe):[],fj="Capture",Lfe=new RegExp(fj+"$"),pj=(t,e,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,a=t&&t.$attrs$||HO,i=e.$attrs$||HO;for(const s of WO(Object.keys(a)))s in i||KO(r,s,a[s],void 0,n,e.$flags$);for(const s of WO(Object.keys(i)))KO(r,s,a[s],i[s],n,e.$flags$)};function WO(t){return t.includes("ref")?[...t.filter(e=>e!=="ref"),"ref"]:t}var hj=!1,ai=!1,lT=(t,e,n,r)=>{const a=e.$children$[n];let i,s,o=0;if(a.$text$!==null)i=a.$elm$=xs.createTextNode(a.$text$);else{if(ai||(ai=a.$tag$==="svg"),i=a.$elm$=xs.createElementNS(ai?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",!hj&&xfe&&2&a.$flags$?"slot-fb":a.$tag$),ai&&a.$tag$==="foreignObject"&&(ai=!1),pj(null,a,ai),i.getRootNode().querySelector("body")&&Tfe&&(c=>c!=null)(h2)&&i["s-si"]!==h2&&i.classList.add(i["s-si"]=h2),a.$children$)for(o=0;o<a.$children$.length;++o)s=lT(t,a,o),s&&i.appendChild(s);a.$tag$==="svg"?ai=!1:i.tagName==="foreignObject"&&(ai=!0)}return i["s-hn"]=dT,i},GO=(t,e,n,r,a,i)=>{let s,o=t;for(o.shadowRoot&&o.tagName===dT&&(o=o.shadowRoot);a<=i;++a)r[a]&&(s=lT(null,n,a),s&&(r[a].$elm$=s,b2(o,s,e)))},YO=(t,e,n)=>{for(let r=e;r<=n;++r){const a=t[r];if(a){const i=a.$elm$;i&&i.remove()}}},lb=(t,e,n=!1)=>t.$tag$===e.$tag$,Uf=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,a=t.$children$,i=e.$children$,s=e.$tag$,o=e.$text$;o===null?(pj(t,e,ai=s==="svg"||s!=="foreignObject"&&ai),a!==null&&i!==null?((c,d,l,u,f=!1)=>{let p,h=0,b=0,v=d.length-1,m=d[0],T=d[v],A=u.length-1,N=u[0],R=u[A];for(;h<=v&&b<=A;)m==null?m=d[++h]:T==null?T=d[--v]:N==null?N=u[++b]:R==null?R=u[--A]:lb(m,N,f)?(Uf(m,N,f),m=d[++h],N=u[++b]):lb(T,R,f)?(Uf(T,R,f),T=d[--v],R=u[--A]):lb(m,R,f)?(Uf(m,R,f),b2(c,m.$elm$,T.$elm$.nextSibling),m=d[++h],R=u[--A]):lb(T,N,f)?(Uf(T,N,f),b2(c,T.$elm$,m.$elm$),T=d[--v],N=u[++b]):(p=lT(d&&d[b],l,b),N=u[++b],p&&b2(m.$elm$.parentNode,p,m.$elm$));h>v?GO(c,u[A+1]==null?null:u[A+1].$elm$,l,u,b,A):b>A&&YO(d,h,v)})(r,a,e,i,n):i!==null?(t.$text$!==null&&(r.textContent=""),GO(r,null,e,i,0,i.length-1)):!n&&Sfe&&a!==null&&YO(a,0,a.length-1),ai&&s==="svg"&&(ai=!1)):t.$text$!==o&&(r.data=o)},b2=(t,e,n)=>t==null?void 0:t.insertBefore(e,n),Bfe=(t,e,n=!1)=>{const r=t.$hostElement$,a=t.$cmpMeta$,i=t.$vnode$||v8(null,null),s=(o=e)&&o.$tag$===kfe?e:fe(null,null,e);var o;if(dT=r.tagName,n&&s.$attrs$)for(const c of Object.keys(s.$attrs$))r.hasAttribute(c)&&!["key","ref","style","class"].includes(c)&&(s.$attrs$[c]=r[c]);s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=i.$elm$=r.shadowRoot||r,h2=r["s-sc"],hj=(1&a.$flags$)!=0,Uf(i,s,n)},bj=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(n=>t.$onRenderResolve$=n))},uT=(t,e)=>(t.$flags$|=16,4&t.$flags$?void(t.$flags$|=512):(bj(t,t.$ancestorComponent$),Ife(()=>Ffe(t,e)))),Ffe=(t,e)=>{const n=t.$hostElement$;t.$cmpMeta$.$tagName$;const r=t.$lazyInstance$;if(!r)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return Ufe(void 0,()=>Hfe(t,r,e))},Ufe=(t,e)=>jfe(t)?t.then(e).catch(n=>{console.error(n),e()}):e(),jfe=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",Hfe=async(t,e,n)=>{var r;const a=t.$hostElement$;t.$cmpMeta$.$tagName$;const i=a["s-rc"];n&&Dfe(t),t.$cmpMeta$.$tagName$,zfe(t,e,a,n),i&&(i.map(s=>s()),a["s-rc"]=void 0);{const s=(r=a["s-p"])!=null?r:[],o=()=>qfe(t);s.length===0?o():(Promise.all(s).then(o),t.$flags$|=4,s.length=0)}},zfe=(t,e,n,r)=>{try{e=e.render(),t.$flags$&=-17,t.$flags$|=2,Bfe(t,e,r)}catch(a){md(a,t.$hostElement$)}return null},qfe=t=>{t.$cmpMeta$.$tagName$;const e=t.$hostElement$,n=()=>{},r=t.$lazyInstance$,a=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,mj(e),fT(r,"componentDidLoad"),t.$onReadyResolve$(e),a||yj()),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&oT(()=>uT(t,!1)),t.$flags$&=-517},yj=t=>{mj(xs.documentElement),oT(()=>lj(f3,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},fT=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){md(r)}},mj=t=>{var e;return t.classList.add((e=_fe)!=null?e:"hydrated")},Kfe=(t,e,n,r)=>{const a=e1(t);if(!a)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);const i=a.$hostElement$,s=a.$instanceValues$.get(e),o=a.$flags$,c=a.$lazyInstance$;var d,l;d=n,l=r.$members$[e][0],n=d==null||cT(d)?d:4&l?d!=="false"&&(d===""||!!d):1&l?String(d):d;const u=Number.isNaN(s)&&Number.isNaN(n);if((!(8&o)||s===void 0)&&n!==s&&!u&&(a.$instanceValues$.set(e,n),c)){if(r.$watchers$&&128&o){const f=r.$watchers$[e];f&&f.map(p=>{try{c[p](n,s,e)}catch(h){md(h,i)}})}(18&o)==2&&uT(a,!1)}},gj=(t,e,n)=>{var r,a;const i=t.prototype;if(e.$members$||e.$watchers$||t.watchers){t.watchers&&!e.$watchers$&&(e.$watchers$=t.watchers);const s=Object.entries((r=e.$members$)!=null?r:{});if(s.map(([o,[c]])=>{(31&c||2&n&&32&c)&&Object.defineProperty(i,o,{get(){return d=o,e1(this).$instanceValues$.get(d);var d},set(d){Kfe(this,o,d,e)},configurable:!0,enumerable:!0})}),1&n){const o=new Map;i.attributeChangedCallback=function(c,d,l){G0.jmp(()=>{var u;const f=o.get(c);if(this.hasOwnProperty(f))l=this[f],delete this[f];else{if(i.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==l)return;if(f==null){const p=e1(this),h=p==null?void 0:p.$flags$;if(h&&!(8&h)&&128&h&&l!==d){const b=p.$lazyInstance$,v=(u=e.$watchers$)==null?void 0:u[c];v==null||v.forEach(m=>{b[m]!=null&&b[m].call(b,l,d,c)})}return}}this[f]=(l!==null||typeof this[f]!="boolean")&&l})},t.observedAttributes=Array.from(new Set([...Object.keys((a=e.$watchers$)!=null?a:{}),...s.filter(([c,d])=>15&d[0]).map(([c,d])=>{const l=d[1]||c;return o.set(l,c),l})]))}}return t},Vfe=async(t,e,n,r)=>{let a;if(!(32&e.$flags$)){if(e.$flags$|=32,n.$lazyBundleId$){const o=((c,d,l)=>{const u=c.$tagName$.replace(/-/g,"_"),f=c.$lazyBundleId$;if(!f)return;const p=n9.get(f);if(p)return p[u];{const h=b=>(n9.set(f,b),b[u]);if(f==="mm-install-modal_3")return Promise.resolve().then(function(){return o5e}).then(h,md)}return xt(()=>import(`./${f}.entry.js`),[]).then(h=>(n9.set(f,h),h[u]),md)})(n);if(o&&"then"in o?a=await o:a=o,!a)throw new Error(`Constructor for "${n.$tagName$}#${e.$modeName$}" was not found`);a.isProxied||(n.$watchers$=a.watchers,gj(a,n,2),a.isProxied=!0),n.$tagName$,e.$flags$|=8;try{new a(e)}catch(c){md(c)}e.$flags$&=-9,e.$flags$|=128,Kw(e.$lazyInstance$)}else{a=t.constructor;const o=t.localName;customElements.whenDefined(o).then(()=>e.$flags$|=128)}if(a&&a.style){let o;typeof a.style=="string"&&(o=a.style);const c=uj(n);p2.has(c)||(n.$tagName$,((d,l,u)=>{let f=p2.get(d);sj&&u?(f=f||new CSSStyleSheet,typeof f=="string"?f=l:f.replaceSync(l)):f=l,p2.set(d,f)})(c,o,!!(1&n.$flags$)))}}const i=e.$ancestorComponent$,s=()=>uT(e,!0);i&&i["s-rc"]?i["s-rc"].push(s):s()},Kw=t=>{fT(t,"connectedCallback")},JO=t=>{fT(t,"disconnectedCallback")},Wfe=(t,e={})=>{var n;const r=[],a=e.exclude||[],i=f3.customElements,s=xs.head,o=s.querySelector("meta[charset]"),c=xs.createElement("style"),d=[];let l,u=!0;Object.assign(G0,e),G0.$resourcesUrl$=new URL(e.resourcesUrl||"./",xs.baseURI).href;let f=!1;if(t.map(p=>{p[1].map(h=>{var b;const v={$flags$:h[0],$tagName$:h[1],$members$:h[2],$listeners$:h[3]};4&v.$flags$&&(f=!0),v.$members$=h[2],v.$watchers$=(b=h[4])!=null?b:{};const m=v.$tagName$,T=class extends HTMLElement{constructor(A){if(super(A),this.hasRegisteredEventListeners=!1,((N,R)=>{const B={$flags$:0,$hostElement$:N,$cmpMeta$:R,$instanceValues$:new Map};B.$onReadyPromise$=new Promise(F=>B.$onReadyResolve$=F),N["s-p"]=[],N["s-rc"]=[],iT.set(N,B)})(A=this,v),1&v.$flags$)if(A.shadowRoot){if(A.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${v.$tagName$}! Mode is set to ${A.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else A.attachShadow({mode:"open"})}connectedCallback(){e1(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),l&&(clearTimeout(l),l=null),u?d.push(this):G0.jmp(()=>(A=>{if(!(1&G0.$flags$)){const N=e1(A),R=N.$cmpMeta$;if(R.$tagName$,1&N.$flags$)N!=null&&N.$lazyInstance$?Kw(N.$lazyInstance$):N!=null&&N.$onReadyPromise$&&N.$onReadyPromise$.then(()=>Kw(N.$lazyInstance$));else{N.$flags$|=1;{let B=A;for(;B=B.parentNode||B.host;)if(B["s-p"]){bj(N,N.$ancestorComponent$=B);break}}R.$members$&&Object.entries(R.$members$).map(([B,[F]])=>{if(31&F&&A.hasOwnProperty(B)){const I=A[B];delete A[B],A[B]=I}}),Vfe(A,N,R)}}})(this))}disconnectedCallback(){G0.jmp(()=>(async A=>{if(!(1&G0.$flags$)){const N=e1(A);N!=null&&N.$lazyInstance$?JO(N.$lazyInstance$):N!=null&&N.$onReadyPromise$&&N.$onReadyPromise$.then(()=>JO(N.$lazyInstance$))}})(this))}componentOnReady(){return e1(this).$onReadyPromise$}};v.$lazyBundleId$=p[0],a.includes(m)||i.get(m)||(r.push(m),i.define(m,gj(T,v,1)))})}),r.length>0&&(f&&(c.textContent+=ij),c.textContent+=r.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",c.innerHTML.length)){c.setAttribute("data-styles","");const p=(n=G0.$nonce$)!=null?n:cj(xs);p!=null&&c.setAttribute("nonce",p),s.insertBefore(c,o?o.nextSibling:s.firstChild)}u=!1,d.length?d.map(p=>p.connectedCallback()):G0.jmp(()=>l=setTimeout(yj,30))};(function(){if(typeof window<"u"&&window.Reflect!==void 0&&window.customElements!==void 0){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}})();var Gfe=Object.freeze({__proto__:null,defineCustomElements:async(t,e)=>{if(typeof window<"u")return await void 0,Wfe([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],e)},setNonce:t=>G0.$nonce$=t});const Yfe={fontFamily:"Roboto, sans-serif"},pT=({className:t},e)=>fe("div",{style:Yfe,class:t},e),r9=({Icon:t,text:e})=>fe("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},fe("div",{class:"flexItem1"},fe(t,null)),fe("div",{class:"flexItem11"},fe("span",{style:{lineHeight:"2",color:"black"}},e))),Jfe=()=>fe("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),fe("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),Zfe=()=>fe("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),Xfe=()=>fe("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),Qfe=()=>fe("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),fe("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),fe("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}));function hT({version:t}){return fe("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}const bT=()=>fe("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("rect",{width:"16",height:"16",fill:"white"}),fe("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),yT=()=>fe("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},fe("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}));function O1(t,e){return t.toString(2).padStart(e,"0")}function ZO(t,e){const n=t%e;return n>=0?n:e+n}function Ca(t,e){return new Array(t).fill(e)}function XO(...t){let e=0;for(const r of t)e=Math.max(e,r.length);const n=[];for(let r=0;r<e;r++)for(const a of t)r>=a.length||n.push(a[r]);return new Uint8Array(n)}function QO(t,e,n){if(n<0||n+e.length>t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n+r])return!1;return!0}function eM(t){return{has:e=>t.includes(e),decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(n=>{if(typeof n!="string")throw new Error(`alphabet.decode: not string element=${n}`);const r=t.indexOf(n);if(r===-1)throw new Error(`Unknown letter: "${n}". Allowed: ${t}`);return r})},encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(n=>{if(function(r){if(!Number.isSafeInteger(r))throw new Error(`Wrong integer: ${r}`)}(n),n<0||n>=t.length)throw new Error(`Digit index outside alphabet: ${n} (alphabet: ${t.length})`);return t[n]})}}}class va{static size(e,n){if(typeof e=="number"&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return n!==void 0&&(e={width:Math.min(e.width,n.width),height:Math.min(e.height,n.height)}),e}static fromString(e){const n=(e=e.replace(/^\n+/g,"").replace(/\n+$/g,"")).split(`
`),r=n.length,a=new Array(r);let i;for(const s of n){const o=s.split("").map(c=>{if(c==="X")return!0;if(c===" ")return!1;if(c!=="?")throw new Error(`Bitmap.fromString: unknown symbol=${c}`)});if(i&&o.length!==i)throw new Error(`Bitmap.fromString different row sizes: width=${i} cur=${o.length}`);i=o.length,a.push(o)}return i||(i=0),new va({height:r,width:i},a)}constructor(e,n){const{height:r,width:a}=va.size(e);this.data=n||Array.from({length:r},()=>Ca(a,void 0)),this.height=r,this.width=a}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};const{x:n,y:r}=this.xy(e);return{height:this.height-r,width:this.width-n}}xy(e){if(typeof e=="number"&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=ZO(e.x,this.width),e.y=ZO(e.y,this.height),e}rect(e,n,r){const{x:a,y:i}=this.xy(e),{height:s,width:o}=va.size(n,this.size({x:a,y:i}));for(let c=0;c<s;c++)for(let d=0;d<o;d++)this.data[i+c][a+d]=typeof r=="function"?r({x:d,y:c},this.data[i+c][a+d]):r;return this}rectRead(e,n,r){return this.rect(e,n,(a,i)=>(r(a,i),i))}hLine(e,n,r){return this.rect(e,{width:n,height:1},r)}vLine(e,n,r){return this.rect(e,{width:1,height:n},r)}border(e=2,n){const r=this.height+2*e,a=this.width+2*e,i=Ca(e,n),s=Array.from({length:e},()=>Ca(a,n));return new va({height:r,width:a},[...s,...this.data.map(o=>[...i,...o,...i]),...s])}embed(e,n){return this.rect(e,n.size(),({x:r,y:a})=>n.data[a][r])}rectSlice(e,n=this.size()){const r=new va(va.size(n,this.size(this.xy(e))));return this.rect(e,n,({x:a,y:i},s)=>r.data[i][a]=s),r}inverse(){const{height:e,width:n}=this;return new va({height:n,width:e}).rect({x:0,y:0},1/0,({x:r,y:a})=>this.data[r][a])}scale(e){if(!Number.isSafeInteger(e)||e>1024)throw new Error(`Wrong scale factor: ${e}`);const{height:n,width:r}=this;return new va({height:e*n,width:e*r}).rect({x:0,y:0},1/0,({x:a,y:i})=>this.data[Math.floor(i/e)][Math.floor(a/e)])}clone(){return new va(this.size()).rect({x:0,y:0},this.size(),({x:e,y:n})=>this.data[n][e])}assertDrawn(){this.rectRead(0,1/0,(e,n)=>{if(typeof n!="boolean")throw new Error("Invalid color type="+typeof n)})}toString(){return this.data.map(e=>e.map(n=>n===void 0?"?":n?"X":" ").join("")).join(`
`)}toASCII(){const{height:e,width:n,data:r}=this;let a="";for(let i=0;i<e;i+=2){for(let s=0;s<n;s++){const o=r[i][s],c=i+1>=e||r[i+1][s];o||c?!o&&c?a+="":o&&!c?a+="":o&&c&&(a+=" "):a+=""}a+=`
`}return a}toTerm(){const e="\x1B[0m",n=`\x1B[1;47m  ${e}`,r=`\x1B[40m  ${e}`;return this.data.map(a=>a.map(i=>i?r:n).join("")).join(`
`)}toSVG(){let e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,({x:n,y:r},a)=>{a&&(e+=`<rect x="${n}" y="${r}" width="1" height="1" />`)}),e+="</svg>",e}toGIF(){const e=o=>[255&o,o>>>8&255],n=[...e(this.width),...e(this.height)],r=[];this.rectRead(0,1/0,(o,c)=>r.push(+(c===!0)));const a=126,i=[71,73,70,56,55,97,...n,246,0,0,255,255,255,...Ca(381,0),44,0,0,0,0,...n,0,7],s=Math.floor(r.length/a);for(let o=0;o<s;o++)i.push(127,128,...r.slice(a*o,a*(o+1)).map(c=>+c));return i.push(r.length%a+1,128,...r.slice(s*a).map(o=>+o)),i.push(1,129,0,59),new Uint8Array(i)}toImage(e=!1){const{height:n,width:r}=this.size(),a=new Uint8Array(n*r*(e?3:4));let i=0;for(let s=0;s<n;s++)for(let o=0;o<r;o++){const c=this.data[s][o]?0:255;a[i++]=c,a[i++]=c,a[i++]=c,e||(a[i++]=255)}return{height:n,width:r,data:a}}}const tM=["low","medium","quartile","high"],nM=["numeric","alphanumeric","byte","kanji","eci"],e5e=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],t5e={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},n5e={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},ur={size:{encode:t=>21+4*(t-1),decode:t=>(t-17)/4},sizeType:t=>Math.floor((t+7)/17),alignmentPatterns(t){if(t===1)return[];const e=ur.size.encode(t)-6-1,n=e-6,r=Math.ceil(n/28);let a=Math.floor(n/r);a%2?a+=1:n%r*2>=r&&(a+=2);const i=[6];for(let s=1;s<r;s++)i.push(e-(r-s)*a);return i.push(e),i},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(t,e){const n=ur.ECCode[t]<<3|e;let r=n;for(let a=0;a<10;a++)r=r<<1^1335*(r>>9);return(n<<10|r)^ur.formatMask},versionBits(t){let e=t;for(let n=0;n<12;n++)e=e<<1^7973*(e>>11);return t<<12|e},alphabet:{numeric:eM("0123456789"),alphanumerc:eM("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(t,e)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]})[e][ur.sizeType(t)],modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(t,e){const n=e5e[t-1],r=t5e[e][t-1],a=n5e[e][t-1],i=Math.floor(n/a)-r,s=a-n%a;return{words:r,numBlocks:a,shortBlocks:s,blockLen:i,capacity:8*(n-r*a),total:(r+i)*a+a-s}}},Vw=[(t,e)=>(t+e)%2==0,(t,e)=>e%2==0,(t,e)=>t%3==0,(t,e)=>(t+e)%3==0,(t,e)=>(Math.floor(e/2)+Math.floor(t/3))%2==0,(t,e)=>t*e%2+t*e%3==0,(t,e)=>(t*e%2+t*e%3)%2==0,(t,e)=>((t+e)%2+t*e%3)%2==0],Ve={tables:(t=>{const e=Ca(256,0),n=Ca(256,0);for(let r=0,a=1;r<256;r++)e[r]=a,n[a]=r,a<<=1,256&a&&(a^=285);return{exp:e,log:n}})(),exp:t=>Ve.tables.exp[t],log(t){if(t===0)throw new Error(`GF.log: wrong arg=${t}`);return Ve.tables.log[t]%255},mul:(t,e)=>t===0||e===0?0:Ve.tables.exp[(Ve.tables.log[t]+Ve.tables.log[e])%255],add:(t,e)=>t^e,pow:(t,e)=>Ve.tables.exp[Ve.tables.log[t]*e%255],inv(t){if(t===0)throw new Error(`GF.inverse: wrong arg=${t}`);return Ve.tables.exp[255-Ve.tables.log[t]]},polynomial(t){if(t.length==0)throw new Error("GF.polymomial: wrong length");if(t[0]!==0)return t;let e=0;for(;e<t.length-1&&t[e]==0;e++);return t.slice(e)},monomial(t,e){if(t<0)throw new Error(`GF.monomial: wrong degree=${t}`);if(e==0)return[0];let n=Ca(t+1,0);return n[0]=e,Ve.polynomial(n)},degree:t=>t.length-1,coefficient:(t,e)=>t[Ve.degree(t)-e],mulPoly(t,e){if(t[0]===0||e[0]===0)return[0];const n=Ca(t.length+e.length-1,0);for(let r=0;r<t.length;r++)for(let a=0;a<e.length;a++)n[r+a]=Ve.add(n[r+a],Ve.mul(t[r],e[a]));return Ve.polynomial(n)},mulPolyScalar(t,e){if(e==0)return[0];if(e==1)return t;const n=Ca(t.length,0);for(let r=0;r<t.length;r++)n[r]=Ve.mul(t[r],e);return Ve.polynomial(n)},mulPolyMonomial(t,e,n){if(e<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(n==0)return[0];const r=Ca(t.length+e,0);for(let a=0;a<t.length;a++)r[a]=Ve.mul(t[a],n);return Ve.polynomial(r)},addPoly(t,e){if(t[0]===0)return e;if(e[0]===0)return t;let n=t,r=e;n.length>r.length&&([n,r]=[r,n]);let a=Ca(r.length,0),i=r.length-n.length,s=r.slice(0,i);for(let o=0;o<s.length;o++)a[o]=s[o];for(let o=i;o<r.length;o++)a[o]=Ve.add(n[o-i],r[o]);return Ve.polynomial(a)},remainderPoly(t,e){const n=Array.from(t);for(let r=0;r<t.length-e.length+1;r++){const a=n[r];if(a!==0)for(let i=1;i<e.length;i++)e[i]!==0&&(n[r+i]=Ve.add(n[r+i],Ve.mul(e[i],a)))}return n.slice(t.length-e.length+1,n.length)},divisorPoly(t){let e=[1];for(let n=0;n<t;n++)e=Ve.mulPoly(e,[1,Ve.pow(2,n)]);return e},evalPoly(t,e){if(e==0)return Ve.coefficient(t,0);let n=t[0];for(let r=1;r<t.length;r++)n=Ve.add(Ve.mul(e,n),t[r]);return n},euclidian(t,e,n){Ve.degree(t)<Ve.degree(e)&&([t,e]=[e,t]);let r=t,a=e,i=[0],s=[1];for(;2*Ve.degree(a)>=n;){let d=r,l=i;if(r=a,i=s,r[0]===0)throw new Error("rLast[0] === 0");a=d;let u=[0];const f=Ve.inv(r[0]);for(;Ve.degree(a)>=Ve.degree(r)&&a[0]!==0;){const p=Ve.degree(a)-Ve.degree(r),h=Ve.mul(a[0],f);u=Ve.addPoly(u,Ve.monomial(p,h)),a=Ve.addPoly(a,Ve.mulPolyMonomial(r,p,h))}if(u=Ve.mulPoly(u,i),s=Ve.addPoly(u,l),Ve.degree(a)>=Ve.degree(r))throw new Error(`Division failed r: ${a}, rLast: ${r}`)}const o=Ve.coefficient(s,0);if(o==0)throw new Error("sigmaTilde(0) was zero");const c=Ve.inv(o);return[Ve.mulPolyScalar(s,c),Ve.mulPolyScalar(a,c)]}};function r5e(t,e){const{words:n,shortBlocks:r,numBlocks:a,blockLen:i,total:s}=ur.capacity(t,e),o=(c=n,{encode(d){const l=Ve.divisorPoly(c),u=Array.from(d);return u.push(...l.slice(0,-1).fill(0)),Uint8Array.from(Ve.remainderPoly(u,l))},decode(d){const l=d.slice(),u=Ve.polynomial(Array.from(d));let f=Ca(c,0),p=!1;for(let A=0;A<c;A++){const N=Ve.evalPoly(u,Ve.exp(A));f[f.length-1-A]=N,N!==0&&(p=!0)}if(!p)return l;f=Ve.polynomial(f);const h=Ve.monomial(c,1),[b,v]=Ve.euclidian(h,f,c),m=Ca(Ve.degree(b),0);let T=0;for(let A=1;A<256&&T<m.length;A++)Ve.evalPoly(b,A)===0&&(m[T++]=Ve.inv(A));if(T!==m.length)throw new Error("RS.decode: wrong errors number");for(let A=0;A<m.length;A++){const N=l.length-1-Ve.log(m[A]);if(N<0)throw new Error("RS.decode: wrong error location");const R=Ve.inv(m[A]);let B=1;for(let F=0;F<m.length;F++)A!==F&&(B=Ve.mul(B,Ve.add(1,Ve.mul(m[F],R))));l[N]=Ve.add(l[N],Ve.mul(Ve.evalPoly(v,R),Ve.inv(B)))}return l}});var c;return{encode(d){const l=[],u=[];for(let b=0;b<a;b++){const v=i+(b<r?0:1);l.push(d.subarray(0,v)),u.push(o.encode(d.subarray(0,v))),d=d.subarray(v)}const f=XO(...l),p=XO(...u),h=new Uint8Array(f.length+p.length);return h.set(f),h.set(p,f.length),h},decode(d){if(d.length!==s)throw new Error(`interleave.decode: len(data)=${d.length}, total=${s}`);const l=[];for(let p=0;p<a;p++){const h=p<r;l.push(new Uint8Array(n+i+(h?0:1)))}let u=0;for(let p=0;p<i;p++)for(let h=0;h<a;h++)l[h][p]=d[u++];for(let p=r;p<a;p++)l[p][i]=d[u++];for(let p=i;p<i+n;p++)for(let h=0;h<a;h++){const b=h<r;l[h][p+(b?0:1)]=d[u++]}const f=[];for(const p of l)f.push(...Array.from(o.decode(p)).slice(0,-n));return Uint8Array.from(f)}}}function rM(t,e,n,r){let a="",i=n.length;if(r==="numeric"){const u=ur.alphabet.numeric.decode(n.split("")),f=u.length;for(let p=0;p<f-2;p+=3)a+=O1(100*u[p]+10*u[p+1]+u[p+2],10);f%3==1?a+=O1(u[f-1],4):f%3==2&&(a+=O1(10*u[f-2]+u[f-1],7))}else if(r==="alphanumeric"){const u=ur.alphabet.alphanumerc.decode(n.split("")),f=u.length;for(let p=0;p<f-1;p+=2)a+=O1(45*u[p]+u[p+1],11);f%2==1&&(a+=O1(u[f-1],6))}else{if(r!=="byte")throw new Error("encode: unsupported type");{const u=function(f){if(typeof f!="string")throw new Error("utf8ToBytes expected string, got "+typeof f);return new Uint8Array(new TextEncoder().encode(f))}(n);i=u.length,a=Array.from(u).map(f=>O1(f,8)).join("")}}const{capacity:s}=ur.capacity(t,e),o=O1(i,ur.lengthBits(t,r));let c=ur.modeBits[r]+o+a;if(c.length>s)throw new Error("Capacity overflow");c+="0".repeat(Math.min(4,Math.max(0,s-c.length))),c.length%8&&(c+="0".repeat(8-c.length%8));const d="1110110000010001";for(let u=0;c.length!==s;u++)c+=d[u%16];const l=Uint8Array.from(c.match(/(.{8})/g).map(u=>+`0b${u}`));return r5e(t,e).encode(l)}function aM(t,e,n,r,a=!1){const i=function(c,d,l,u=!1){const f=ur.size.encode(c);let p=new va(f+2);const h=new va(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);p=p.embed(0,h).embed({x:-h.width,y:0},h).embed({x:0,y:-h.height},h),p=p.rectSlice(1,f);const b=new va(1).rect(0,1,!0).border(1,!1).border(1,!0),v=ur.alignmentPatterns(c);for(const m of v)for(const T of v)p.data[m][T]===void 0&&p.embed({x:T-2,y:m-2},b);p=p.hLine({x:0,y:6},1/0,({x:m},T)=>T===void 0?m%2==0:T).vLine({x:6,y:0},1/0,({y:m},T)=>T===void 0?m%2==0:T);{const m=ur.formatBits(d,l),T=A=>!u&&(m>>A&1)==1;for(let A=0;A<6;A++)p.data[A][8]=T(A);for(let A=6;A<8;A++)p.data[A+1][8]=T(A);for(let A=8;A<15;A++)p.data[f-15+A][8]=T(A);for(let A=0;A<8;A++)p.data[8][f-A-1]=T(A);for(let A=8;A<9;A++)p.data[8][15-A-1+1]=T(A);for(let A=9;A<15;A++)p.data[8][15-A-1]=T(A);p.data[f-8][8]=!u}if(c>=7){const m=ur.versionBits(c);for(let T=0;T<18;T+=1){const A=!u&&(m>>T&1)==1,N=Math.floor(T/3),R=T%3+f-8-3;p.data[N][R]=A,p.data[R][N]=A}}return p}(t,e,r,a);let s=0;const o=8*n.length;if(function(c,d,l){const u=c.height,f=Vw[d];let p=-1,h=u-1;for(let b=u-1;b>0;b-=2){for(b==6&&(b=5);;h+=p){for(let v=0;v<2;v+=1){const m=b-v;c.data[h][m]===void 0&&l(m,h,f(m,h))}if(h+p<0||h+p>=u)break}p=-p}}(i,r,(c,d,l)=>{let u=!1;s<o&&(u=(n[s>>>3]>>(7-s&7)&1)!=0,s++),i.data[d][c]=u!==l}),s!==o)throw new Error("QR: bytes left after draw");return i}function a5e(t){const e=t.inverse(),n=p=>{let h=0;for(let b,v=0,m=1;v<p.length;v++)b===p[v]&&(m++,v!==p.length-1)||(m>=5&&(h+=m-5+3),b=p[v],m=1);return h};let r=0;t.data.forEach(p=>r+=n(p)),e.data.forEach(p=>r+=n(p));let a=0,i=t.data;const s=t.width-1,o=t.height-1;for(let p=0;p<s;p++)for(let h=0;h<o;h++){const b=p+1,v=h+1;i[p][h]===i[b][h]&&i[b][h]===i[p][v]&&i[b][h]===i[b][v]&&(a+=3)}const c=p=>{const h=[!0,!1,!0,!0,!0,!1,!0],b=[!1,!1,!1,!1],v=[...h,...b],m=[...b,...h];let T=0;for(let A=0;A<p.length;A++)QO(p,v,A)&&(T+=40),QO(p,m,A)&&(T+=40);return T};let d=0;for(const p of t.data)d+=c(p);for(const p of e.data)d+=c(p);let l=0;t.rectRead(0,1/0,(p,h)=>l+=h?1:0);const u=l/(t.height*t.width)*100,f=10*Math.floor(Math.abs(u-50)/5);return r+a+d+f}function wj(t,e="raw",n={}){const r=n.ecc!==void 0?n.ecc:"medium";(function(l){if(!tM.includes(l))throw new Error(`Invalid error correction mode=${l}. Expected: ${tM}`)})(r);const a=n.encoding!==void 0?n.encoding:function(l){let u="numeric";for(let f of l)if(!ur.alphabet.numeric.has(f)&&(u="alphanumeric",!ur.alphabet.alphanumerc.has(f)))return"byte";return u}(t);(function(l){if(!nM.includes(l))throw new Error(`Encoding: invalid mode=${l}. Expected: ${nM}`);if(l==="kanji"||l==="eci")throw new Error(`Encoding: ${l} is not supported (yet?).`)})(a),n.mask!==void 0&&function(l){if(![0,1,2,3,4,5,6,7].includes(l)||!Vw[l])throw new Error(`Invalid mask=${l}. Expected number [0..7]`)}(n.mask);let i,s=n.version,o=new Error("Unknown error");if(s!==void 0)(function(l){if(!Number.isSafeInteger(l)||l<1||l>40)throw new Error(`Invalid version=${l}. Expected number [1..40]`)})(s),i=rM(s,r,t,a);else for(let l=1;l<=40;l++)try{i=rM(l,r,t,a),s=l;break}catch(u){o=u}if(!s||!i)throw o;let c=function(l,u,f,p){if(p===void 0){const h=function(){let b,v=1/0;return{add(m,T){m>=v||(b=T,v=m)},get:()=>b,score:()=>v}}();for(let b=0;b<Vw.length;b++)h.add(a5e(aM(l,u,f,b,!0)),b);p=h.get()}if(p===void 0)throw new Error("Cannot find mask");return aM(l,u,f,p)}(s,r,i,n.mask);c.assertDrawn();const d=n.border===void 0?2:n.border;if(!Number.isSafeInteger(d))throw new Error("Wrong border type="+typeof d);if(c=c.border(d,!1),n.scale!==void 0&&(c=c.scale(n.scale)),e==="raw")return c.data;if(e==="ascii")return c.toASCII();if(e==="svg")return c.toSVG();if(e==="gif")return c.toGIF();if(e==="term")return c.toTerm();throw new Error(`Unknown output: ${e}`)}const a9={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}};class mT{constructor(e){var n;this.translations=a9,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=(n=e==null?void 0:e.baseUrl)!==null&&n!==void 0?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(n=>n.toLowerCase().startsWith("en")))return"en";const e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}async init(e){const n=this.getBrowserLanguage()||e.fallbackLng;await this.loadTranslations(n)}async loadTranslations(e){const n=e.split("-")[0];if(n!=="en"&&this.supportedLocales.includes(n))try{const r=`${this.baseUrl}/${n}.json`,a=await fetch(r);if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);this.translations=await a.json()}catch(r){console.warn(` Failed to load ${n} translations, falling back to English:`,r),this.translations=a9}else this.translations=a9}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,n){const r=e.split(".");let a=n;for(const i of r){if(typeof a!="object")return"";a=a[i]}return typeof a=="string"?a:""}}var i5;(function(t){t.SDK_MODAL_VIEWED="sdk_modal_viewed",t.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",t.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"})(i5||(i5={}));const vj=class{constructor(t){sT(this,t),this.close=s1(this,"close",7),this.startDesktopOnboarding=s1(this,"startDesktopOnboarding",7),this.trackAnalytics=s1(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new mT}componentDidLoad(){this.trackAnalytics.emit({event:i5.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:this.tab===1?"desktop":"mobile"}})}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}onClose(t=!1){this.close.emit({shouldTerminate:t})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:i5.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(t,e=!1){e&&this.trackAnalytics.emit({event:i5.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:this.tab===1?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=t,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;const t=r=>this.i18nInstance.t(r),e=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=wj(this.link,"svg",{ecc:"medium",scale:2});return fe(pT,{className:"install-model"},fe("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),fe("div",{class:"modal"},fe("div",{class:"closeButtonContainer"},fe("div",{class:"right"},fe("span",{class:"closeButton",onClick:()=>this.onClose(!0)},fe(bT,null)))),fe("div",{class:"logoContainer"},fe(yT,null)),fe("div",null,fe("div",{class:"tabcontainer"},fe("div",{class:"flexContainer"},fe("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(e===1?"tabactive":"")},t("DESKTOP")),fe("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(e===2?"tabactive":"")},t("MOBILE")))),fe("div",{style:{display:e===1?"none":"block"}},fe("div",{class:"flexContainer"},fe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&fe("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),fe("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",fe("br",null),fe("span",{class:"blue"},fe("b",null,t("META_MASK_MOBILE_APP"))))))),fe("div",{style:{display:e===2?"none":"block"}},fe("div",{class:"item"},fe(r9,{Icon:Zfe,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),fe("div",{class:"item"},fe(r9,{Icon:Jfe,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),fe("div",{class:"item"},fe(r9,{Icon:Xfe,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),fe("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},fe(Qfe,null),fe("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),fe(hT,{version:this.sdkVersion})))}get el(){return p3(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};vj.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const Ej=class{constructor(t){sT(this,t),this.close=s1(this,"close",7),this.disconnect=s1(this,"disconnect",7),this.updateOTPValue=s1(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new mT}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(t){this.updateOTPValue.emit({otpValue:t})}disconnectedCallback(){this.onClose()}render(){var t;if(!this.translationsLoaded)return null;const e=(t=this.displayOTP)===null||t===void 0||t,n=this.sdkVersion,r=a=>this.i18nInstance.t(a);return fe(pT,{className:"pending-modal"},fe("div",{class:"backdrop",onClick:()=>this.onClose()}),fe("div",{class:"modal"},fe("div",{class:"closeButtonContainer"},fe("div",{class:"right"},fe("span",{class:"closeButton",onClick:()=>this.onClose()},fe(bT,null)))),fe("div",{class:"logoContainer"},fe(yT,null)),fe("div",null,fe("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},fe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(e?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),fe("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),e&&fe("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),fe("div",{style:{marginTop:"20px"}},fe("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),fe(hT,{version:n})))}get el(){return p3(this)}};Ej.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;const i5e=()=>fe("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),s5e=()=>fe("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe("rect",{width:"400",height:"300",fill:"white"}),fe("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),fe("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),fe("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),fe("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),fe("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),fe("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),fe("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),fe("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),fe("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),fe("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),fe("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),fe("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),fe("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),fe("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),fe("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),fe("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),fe("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),fe("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),fe("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),fe("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),fe("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),fe("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),_j=class{constructor(t){sT(this,t),this.close=s1(this,"close",7),this.connectWithExtension=s1(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new mT,this.setTab(this.preferDesktop?1:2)}async connectedCallback(){await this.i18nInstance.init({fallbackLng:"en"}),this.translationsLoaded=!0}onClose(t=!1){this.close.emit({shouldTerminate:t})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(t){this.tab=t,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(t){t?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;const t=a=>this.i18nInstance.t(a),e=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=wj(this.link,"svg",{ecc:"medium",scale:2});return fe(pT,{className:"select-modal"},fe("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),fe("div",{class:"modal"},fe("div",{class:"closeButtonContainer"},fe("div",{class:"right"},fe("span",{class:"closeButton",onClick:()=>this.onClose(!0)},fe(bT,null)))),fe("div",{class:"logoContainer"},fe(yT,null)),fe("div",null,fe("div",{class:"tabcontainer"},fe("div",{class:"flexContainer"},fe("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(n===1?"tabactive":"")},t("DESKTOP")),fe("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(n===2?"tabactive":"")},t("MOBILE")))),fe("div",{style:{display:n===1?"none":"block"}},fe("div",{class:"flexContainer"},fe("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},fe("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),fe("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),fe("br",null),fe("span",{class:"blue"},fe("b",null,t("META_MASK_MOBILE_APP"))))))),fe("div",{style:{display:n===2?"none":"block"}},fe("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},fe(s5e,null)),fe("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),fe("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},fe(i5e,null),fe("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),fe(hT,{version:e})))}get el(){return p3(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}};_j.style=`.flexContainer {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: row;
}

.flexItem {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.flexItem11 {
    flex: 11;
    justify-content: center;
    align-items: center;
}

.flexItem1 {
    flex: 1;
    justify-content: center;
    align-items: center;
}

.tab {
    padding: 8px;
    cursor: pointer;
    background-color: #F2F4F6;
    font-size: 12px;
    text-align: center;
    color: #24292E;
}

.tabcontainer {
    padding: 4px;
    background-color: #F2F4F6;
    border-radius: 8px;
    margin-bottom: 30px;
    margin-top: 30px;
}

.tabactive {
    background-color: white;
    -webkit-transition: background-color 300ms linear;
    -ms-transition: background-color 300ms linear;
    transition: background-color 300ms linear;
    border-radius: 8px;
}

.item {
    font-size: 12px;
    margin-bottom: 16px;
    border-radius: 8px;
    padding: 10px;
    border: 2px #F2F4F6 solid;
    color: #24292E;
}

.extensionLabel {
    font-style: normal;
    font-weight: bold;
    font-size: 14px;
    text-align: cetner;
    color: #24272A;
}

.notice {
    font-size: 12px;
    margin-left: 10px;
    margin-right: 10px;
    color: grey;
}

.button {
    margin-top: 41.5px;
    margin-bottom: 20px;
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    padding: 12px 20px;
    background: #037DD6;
    border-radius: 32px;
    color: white;
    border: 0;
    font-size: 14px;
    cursor: pointer;
}

.backdrop {
    visibility: visible;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    z-index: 99998;
    background: rgba(0, 0, 0, 0.87);
    opacity: 0.3;
}

.modal {
    visibility: visible;
    position: fixed;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 99999;
    background: white;
    padding: 20px;
    border-radius: 8px;
    top: 50%;
    max-width: 100%;
    width: 460px;
    min-width: 300px;
    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;
    -webkit-font-smoothing: antialiased;
}

.closeButton {
    color: #BBC0C5;
    cursor: pointer;
}

.logoContainer {
    margin-left: 24px;
    margin-right: 24px;
    margin-top: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.connectMobileText {
    font-size: 14px;
    color: black;
    margin-top: 28px;
    margin-bottom: 28px;
    line-height: 2;
}

.blue {
    color: #037DD6;
    font-weight: 700;
}

.installExtensionText {
    margin-left: 10px;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.right {
    display: flex;
    align-items: center;
    justify-content: right;
}

#sdk-mm-qrcode {
    svg {
        width: 50%;
    }
}`;var o5e=Object.freeze({__proto__:null,mm_install_modal:vj,mm_pending_modal:Ej,mm_select_modal:_j});const Tr={GET_ACCOUNTS:"getAccounts",SOLANA_REQUEST_ACCOUNTS:"solana_requestAccounts",SEND_TRANSACTION:"solana_sendTransaction",SIGN_TRANSACTION:"solana_signTransaction",SIGN_ALL_TRANSACTIONS:"solana_signAllTransactions",SIGN_MESSAGE:"solana_signMessage",SOLANA_PRIVATE_KEY:"solana_privateKey",PRIVATE_KEY:"private_key",SOLANA_PUBLIC_KEY:"solana_publicKey",PUBLIC_KEY:"public_key"},OHe={SOLANA_MAINNET:"0x65",SOLANA_TESTNET:"0x66",SOLANA_DEVNET:"0x67"},t1={GET_ACCOUNTS:"eth_accounts",ETH_TRANSACTION:"eth_sendTransaction",ETH_ESTIMATE_AA_TRANSACTION_GAS:"eth_estimateAATransactionGas",ETH_REQUEST_ACCOUNTS:"eth_requestAccounts",ETH_SEND_RAW_TRANSACTION:"eth_sendRawTransaction",ETH_SIGN:"eth_sign",ETH_SIGN_TYPED_DATA_V4:"eth_signTypedData_v4",PERSONAL_SIGN:"personal_sign",ETH_GET_TRANSACTION_COUNT:"eth_getTransactionCount",ETH_GET_TRANSACTION_BY_HASH:"eth_getTransactionByHash",ETH_GET_TRANSACTION_RECEIPT:"eth_getTransactionReceipt",WATCH_ASSET:"wallet_watchAsset",ETH_GET_BLOCK_BY_HASH:"eth_getBlockByHash",ETH_GET_CODE:"eth_getCode",ETH_GET_GAS_PRICE:"eth_gasPrice",ETH_PRIVATE_KEY:"eth_privateKey",PRIVATE_KEY:"private_key",ETH_PUBLIC_KEY:"eth_publicKey",PUBLIC_KEY:"public_key",SWITCH_CHAIN:"wallet_switchEthereumChain",ADD_CHAIN:"wallet_addEthereumChain"},c5e={POPUP:"popup",MODAL:"modal",AUTO_APPROVE:"auto-approve",DEFAULT:"default"},MHe={PRODUCTION:"production",STAGING:"staging",DEVELOPMENT:"development",TESTING:"testing"},d5e={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};function V6(t){let e=!1,n=0,r;try{r=window[t],e=!0,n=r.length;const a="__storage_test__";return r.setItem(a,a),r.removeItem(a),!0}catch(a){const i=a;return!!(i&&(i.code===22||i.code===1014||i.name==="QuotaExceededError"||i.name==="NS_ERROR_DOM_QUOTA_REACHED")&&e&&n!==0)}}const h3=t=>{const e=eoe(t);return!e.exp||e.exp<Math.floor(Date.now()/1e3)},b3=(t,e)=>V6("localStorage")?localStorage.getItem(`${t.toLowerCase()}_${e}`):null,y3=(t,e,n)=>V6("localStorage")?localStorage.setItem(`${t.toLowerCase()}_${e}`,n):null,gT=(t,e)=>V6("localStorage")?localStorage.removeItem(`${t.toLowerCase()}_${e}`):null;class wT extends Hp{async init(e){}async getIdentityToken(){if(!this.provider||this.status!==ge.CONNECTED)throw Pe.notConnectedError();if(!this.coreOptions)throw Me.invalidParams("Please initialize Web3Auth with valid options");const e=await this.provider.request({method:t1.GET_ACCOUNTS});if(e&&e.length>0){const n=b3(e[0],this.name);if(n&&!h3(n))return{idToken:n};const r=await this.provider.request({method:"eth_chainId"}),a=this.coreOptions.chains.find(u=>u.chainId===r);if(!a)throw Me.invalidParams("chainConfig is required before authentication");const{chainNamespace:i}=a,s={domain:window.location.origin,uri:window.location.href,address:e[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await YE(s,i),c=`0x${Buffer.from(o,"utf8").toString("hex")}`,d=await this.provider.request({method:t1.PERSONAL_SIGN,params:[c,e[0]]}),l=await JE(i,d,o,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return y3(e[0],this.name,l),{idToken:l}}throw Pe.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const e=await this.provider.request({method:"eth_accounts"});e&&e.length>0&&gT(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(Ue.DISCONNECTED)}}class l5e extends wT{constructor(e){super(e),re(this,"connectorNamespace",ui.EIP155),re(this,"currentChainNamespace",Qe.EIP155),re(this,"type",Aa.EXTERNAL),re(this,"name",Be.METAMASK),re(this,"status",ge.NOT_READY),re(this,"metamaskProvider",null),re(this,"metamaskSDK",null),re(this,"metamaskOptions",void 0),re(this,"analytics",void 0),this.metamaskOptions=e.connectorSettings,this.analytics=e.analytics}get provider(){return this.status!==ge.NOT_READY&&this.metamaskProvider?this.metamaskProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){var n;await super.init(e);const r=this.coreOptions.chains.find(c=>c.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:r});const a=await yB(window),i={name:bB(window)||"web3auth",url:window.location.origin||"https://web3auth.io",iconUrl:a},s=Kt(this.metamaskOptions||{},{dappMetadata:i});this.metamaskSDK=new vfe(Q(Q({},s),{},{_source:"web3auth",useDeeplink:(n=s.useDeeplink)!==null&&n!==void 0?n:!0}));const o=await this.metamaskSDK.init();o&&(this.metamaskSDK=o),this.isInjected=this.metamaskSDK.isExtensionActive(),this.status=ge.READY,this.emit(Ue.READY,Be.METAMASK);try{if(e.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:e.chainId})))throw this.rehydrated=!1,Pe.connectionError("Failed to rehydrate.")}catch(c){this.emit(Ue.REHYDRATION_ERROR,c)}}async connect({chainId:e}){if(super.checkConnectionRequirements(),!this.metamaskSDK)throw Pe.notConnectedError("Connector is not initialized");const n=this.coreOptions.chains.find(u=>u.chainId===e);if(!n)throw Pe.connectionError("Chain config is not available");const r=!this.isInjected&&!this.rehydrated,a=Date.now(),i={connector:this.name,connector_type:this.type,is_injected:this.isInjected,chain_id:Xc(n),chain_name:n==null?void 0:n.displayName,chain_namespace:n==null?void 0:n.chainNamespace};try{if(this.status!==ge.CONNECTING){var s;this.status=ge.CONNECTING,this.emit(Ue.CONNECTING,{connector:Be.METAMASK}),!this.metamaskSDK.isExtensionActive()&&(s=this.metamaskOptions)!==null&&s!==void 0&&s.headless&&this.metamaskSDK.getProvider().on("display_uri",p=>{this.updateConnectorData({uri:p})}),await this.metamaskSDK.connect()}if(this.metamaskProvider=this.metamaskSDK.getProvider(),!this.metamaskProvider)throw Pe.notConnectedError("Failed to connect with provider");await this.metamaskProvider.request({method:"eth_chainId"})!==n.chainId&&await this.switchChain(n,!0);const f=p=>{p.length===0&&this.disconnect()};if(this.metamaskProvider.on("accountsChanged",f),this.metamaskProvider.once("disconnect",()=>{this.disconnect()}),this.status=ge.CONNECTED,r){var o,c;(o=this.analytics)===null||o===void 0||o.track(Lt.CONNECTION_STARTED,i),(c=this.analytics)===null||c===void 0||c.track(Lt.CONNECTION_COMPLETED,Q(Q({},i),{},{duration:Date.now()-a}))}return this.emit(Ue.CONNECTED,{connector:Be.METAMASK,reconnected:this.rehydrated,provider:this.metamaskProvider}),this.metamaskProvider}catch(u){if(this.status=ge.READY,this.rehydrated||this.emit(Ue.ERRORED,u),this.rehydrated=!1,r){var d,l;(d=this.analytics)===null||d===void 0||d.track(Lt.CONNECTION_STARTED,i),(l=this.analytics)===null||l===void 0||l.track(Lt.CONNECTION_FAILED,Q(Q(Q({},i),TL(u)),{},{duration:Date.now()-a}))}throw u instanceof Cr?u:Pe.connectionError("Failed to login with MetaMask wallet",u)}}async disconnect(e={cleanup:!1}){if(!this.metamaskProvider)throw Pe.connectionError("MetaMask provider is not available");await super.disconnectSession(),typeof this.metamaskProvider.removeAllListeners<"u"&&this.metamaskProvider.removeAllListeners(),await this.metamaskSDK.terminate(),e.cleanup?(this.status=ge.NOT_READY,this.metamaskProvider=null):this.status=ge.READY,await super.disconnect()}async getUserInfo(){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(e,n=!1){super.checkSwitchChainRequirements(e,n);const r=()=>this.metamaskProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]});try{await r()}catch(a){if((a==null?void 0:a.code)===4902){const i=this.coreOptions.chains.find(s=>s.chainId===e.chainId&&[Qe.EIP155,Qe.SOLANA].includes(s.chainNamespace));await this.addChain(i),await r()}else throw a}}async enableMFA(){throw new Error("Method Not implemented")}async manageMFA(){throw new Error("Method Not implemented")}async addChain(e){if(!this.metamaskProvider)throw Pe.connectionError("Injected provider is not available");await this.metamaskProvider.request({method:"wallet_addEthereumChain",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget],blockExplorerUrls:[e.blockExplorerUrl],nativeCurrency:{name:e.tickerName,symbol:e.ticker,decimals:e.decimals||18},iconUrls:[e.logo]}]})}}const Tj=t=>({coreOptions:e,analytics:n})=>new l5e({connectorSettings:t,coreOptions:e,analytics:n}),vT=Q(Q({},Qe),{},{MULTICHAIN:"multichain"}),ki={READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},ql=Q({},ki),ET={WALLET_SERVICES:"wallet-services",NFT_CHECKOUT:"nft-checkout"},xj={SOLANA:"solana"};Q(Q({},ET),xj);class nn extends Cr{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"WalletServicesPluginError"})}static fromCode(e,n="",r){return new nn(e,`${nn.messages[e]}${n}`,r)}static notInitialized(e="",n){return nn.fromCode(5210,e,n)}static unsupportedConnector(e="",n){return nn.fromCode(5211,e,n)}static providerRequired(e="",n){return nn.fromCode(5212,e,n)}static web3authRequired(e="",n){return nn.fromCode(5213,e,n)}static web3AuthNotConnected(e="",n){return nn.fromCode(5214,e,n)}static alreadyInitialized(e="",n){return nn.fromCode(5216,e,n)}static unsupportedChainNamespace(e="",n){return nn.fromCode(5218,e,n)}static differentWeb3AuthNetwork(e="",n){return nn.fromCode(5219,e,n)}static invalidParams(e="",n){return nn.fromCode(5220,e,n)}static web3authNotInitialized(e="",n){return nn.fromCode(5221,e,n)}static invalidSession(e="",n){return nn.fromCode(5222,e,n)}static walletPluginNotConnected(e="",n){return nn.fromCode(5223,e,n)}}re(nn,"messages",{5210:"Wallet Services Plugin is not initialized",5211:"Web3Auth is connected to unsupported connector. Wallet services connector plugin requires web3auth connected to auth connector.",5212:"Provider is required..",5213:"Web3Auth instance is required while initialization.",5214:"Web3Auth is not connected.",5216:"Plugin is already initialized",5218:"Unsupported chain namespace.",5219:"Plugin network different than web3auth instance network.",5221:"Web3Auth is not initialized",5222:"Invalid session inside wallet services. Please report this issue.",5223:"Wallet plugin is not connected Yet. Please wait for plugin to connect and listen via `connected` event on the plugin"});class hs extends Cr{constructor(e,n,r){super(e,n,r),Object.defineProperty(this,"name",{value:"NFTCheckoutPluginError"})}static fromCode(e,n="",r){return new hs(e,`${hs.messages[e]}${n}`,r)}static notInitialized(e="",n){return hs.fromCode(6210,e,n)}static providerRequired(e="",n){return hs.fromCode(6212,e,n)}static web3authRequired(e="",n){return hs.fromCode(6213,e,n)}static web3AuthNotConnected(e="",n){return hs.fromCode(6214,e,n)}static pluginNotConnected(e="",n){return hs.fromCode(6223,e,n)}}re(hs,"messages",{6210:"NFT Checkout Plugin is not initialized",6212:"Provider is required..",6213:"Web3Auth instance is required while initialization.",6214:"Web3Auth is not connected.",6223:"NFT Checkout plugin is not connected Yet. Please wait for plugin to connect and listen via `connected` event on the plugin"});class u5e extends wu{constructor(...e){super(...e),re(this,"name",ET.WALLET_SERVICES),re(this,"status",ki.DISCONNECTED),re(this,"SUPPORTED_CONNECTORS",[Be.AUTH]),re(this,"pluginNamespace",vT.MULTICHAIN),re(this,"wsEmbedInstance",void 0),re(this,"provider",null),re(this,"web3auth",null),re(this,"isInitialized",!1),re(this,"analytics",void 0)}get proxyProvider(){var e;return(e=this.wsEmbedInstance)!==null&&e!==void 0&&e.provider?this.wsEmbedInstance.provider:null}async initWithWeb3Auth(e,n,r){if(this.isInitialized)return;if(!e)throw nn.web3authRequired();if(e.provider&&!this.SUPPORTED_CONNECTORS.includes(e.connectedConnectorName))throw nn.notInitialized();const a=e.currentChain;if(![Qe.EIP155,Qe.SOLANA].includes(a==null?void 0:a.chainNamespace))throw nn.unsupportedChainNamespace();e.provider&&(this.provider=e.provider),this.web3auth=e,this.analytics=r;const i=e.getConnector(Be.AUTH);if(!i||!i.wsEmbed)throw nn.web3AuthNotConnected();this.wsEmbedInstance=i.wsEmbed,this.isInitialized=!0,this.status=ki.READY,this.emit(ql.READY)}initWithProvider(){throw new Error("Method not implemented.")}async connect(){if(!this.isInitialized)throw nn.notInitialized();if(this.emit(ql.CONNECTING),this.status=ki.CONNECTING,!this.provider){var e;(e=this.web3auth)!==null&&e!==void 0&&e.provider&&(this.provider=this.web3auth.provider)}if(this.web3auth.status!==ge.CONNECTED)throw nn.web3AuthNotConnected();if(!this.web3auth.provider)throw nn.providerRequired();try{this.emit(ql.CONNECTED),this.status=ki.CONNECTED}catch(n){Te.error(n),this.status=ki.ERRORED,this.emit(ql.ERRORED,{error:n.message||"Something went wrong"})}}async showWalletConnectScanner(e){var n,r;if(!((n=this.wsEmbedInstance)!==null&&n!==void 0&&n.isLoggedIn))throw nn.walletPluginNotConnected();return(r=this.analytics)===null||r===void 0||r.track(Lt.WALLET_CONNECT_SCANNER_CLICKED,{is_visible:e==null?void 0:e.show}),this.wsEmbedInstance.showWalletConnectScanner(e)}async showCheckout(e){var n,r;if(!((n=this.wsEmbedInstance)!==null&&n!==void 0&&n.isLoggedIn))throw nn.walletPluginNotConnected();return(r=this.analytics)===null||r===void 0||r.track(Lt.WALLET_CHECKOUT_CLICKED,{is_visible:e==null?void 0:e.show,receive_wallet_address_enabled:!!(e!=null&&e.receiveWalletAddress),token_list:e==null?void 0:e.tokenList,fiat_list:e==null?void 0:e.fiatList}),this.wsEmbedInstance.showCheckout(e)}async showWalletUi(e){var n,r;if(!((n=this.wsEmbedInstance)!==null&&n!==void 0&&n.isLoggedIn))throw nn.walletPluginNotConnected();return(r=this.analytics)===null||r===void 0||r.track(Lt.WALLET_UI_CLICKED,{is_visible:e==null?void 0:e.show,path:e==null?void 0:e.path}),this.wsEmbedInstance.showWalletUi(e)}async showSwap(e){var n,r;if(!((n=this.wsEmbedInstance)!==null&&n!==void 0&&n.isLoggedIn))throw nn.walletPluginNotConnected();return(r=this.analytics)===null||r===void 0||r.track(Lt.WALLET_SWAP_CLICKED,{is_visible:e==null?void 0:e.show,from_token:e==null?void 0:e.fromToken,to_token:e==null?void 0:e.toToken,from_value_enabled:!!(e!=null&&e.fromValue),to_address_enabled:!!(e!=null&&e.toAddress)}),this.wsEmbedInstance.showSwap(e)}async cleanup(){var e;return(e=this.wsEmbedInstance)===null||e===void 0?void 0:e.cleanUp()}async disconnect(){var e;if(this.status!==ki.CONNECTED)throw nn.invalidSession("Wallet Services plugin is not connected");(e=this.wsEmbedInstance)!==null&&e!==void 0&&e.isLoggedIn&&await this.wsEmbedInstance.logout(),this.emit(ql.DISCONNECTED),this.status=ki.DISCONNECTED}}const Sj=()=>()=>new u5e,f5e=["walletScope"];class Aj extends wu{constructor(e,n){if(super(),re(this,"coreOptions",void 0),re(this,"status",ge.NOT_READY),re(this,"aaProvider",null),re(this,"connectors",[]),re(this,"commonJRPCProvider",null),re(this,"analytics",void 0),re(this,"plugins",{}),re(this,"storage",void 0),re(this,"state",{connectedConnectorName:null,cachedConnector:null,currentChainId:null,idToken:null}),re(this,"loginMode",F6.NO_MODAL),!e.clientId)throw Me.invalidParams("Please provide a valid clientId in constructor");e.enableLogging?Te.enableAll():Te.setLevel("error"),e.storageType||(e.storageType="local"),this.coreOptions=e,this.storage=this.getStorageMethod(),this.analytics=new cB,this.analytics.setGlobalProperties({integration_type:dB.NATIVE_SDK}),this.loadState(n),this.state.idToken&&this.coreOptions.ssr&&(this.status=ge.CONNECTED)}get currentChain(){var e;if(this.currentChainId)return(e=this.coreOptions.chains)===null||e===void 0?void 0:e.find(n=>n.chainId===this.currentChainId)}get connected(){return!!this.connectedConnector}get provider(){return this.status!==ge.NOT_READY&&this.commonJRPCProvider?this.commonJRPCProvider:null}get connectedConnectorName(){return this.state.connectedConnectorName}get cachedConnector(){return this.state.cachedConnector}get currentChainId(){var e;return this.state.currentChainId||this.coreOptions.defaultChainId||((e=this.coreOptions.chains)===null||e===void 0||(e=e[0])===null||e===void 0?void 0:e.chainId)||null}get connectedConnector(){var e;return this.getConnector(this.connectedConnectorName,(e=this.currentChain)===null||e===void 0?void 0:e.chainNamespace)}get accountAbstractionProvider(){return this.aaProvider}set provider(e){throw new Error("Not implemented")}async init(e){const n=Date.now();this.analytics.init(),this.analytics.identify(this.coreOptions.clientId,{web3auth_client_id:this.coreOptions.clientId,web3auth_network:this.coreOptions.web3AuthNetwork}),this.analytics.setGlobalProperties({dapp_url:window.location.origin,sdk_name:T_.WEB_NO_MODAL,sdk_version:C_});let r={};try{var a,i;const{signal:o}=e||{};let c;try{var s;c=await x_({clientId:this.coreOptions.clientId,web3AuthNetwork:this.coreOptions.web3AuthNetwork,aaProvider:(s=this.coreOptions.accountAbstractionConfig)===null||s===void 0?void 0:s.smartAccountType,authBuildEnv:this.coreOptions.authBuildEnv})}catch(l){const u=await xE(l);throw Te.error("Failed to fetch project configurations",u),Me.notReady("failed to fetch project configurations",u)}this.initAccountAbstractionConfig(c),this.initChainsConfig(c),this.initCachedConnectorAndChainId(),this.initUIConfig(c),this.initWalletServicesConfig(c),r=this.getInitializationTrackData(),await ms(()=>this.setupCommonJRPCProvider(),o),this.on(Ue.CONNECTORS_UPDATED,async({connectors:l})=>{await ms(()=>Promise.all(l.map(this.setupConnector.bind(this))),o,()=>{var f;((f=this.connectors)===null||f===void 0?void 0:f.length)>0&&this.cleanup()}),this.status===ge.NOT_READY&&(this.status=ge.READY,this.emit(Ue.READY))}),await ms(()=>this.loadConnectors({projectConfig:c}),o),await ms(()=>this.initPlugins(),o);const d=this.getConnector(Be.AUTH);r=Q(Q({},r),{},{connectors:this.connectors.map(l=>l.name),plugins:Object.keys(this.plugins),auth_ux_mode:(d==null||(a=d.authInstance)===null||a===void 0||(a=a.options)===null||a===void 0?void 0:a.uxMode)||((i=this.coreOptions.uiConfig)===null||i===void 0?void 0:i.uxMode)}),this.analytics.track(Lt.SDK_INITIALIZATION_COMPLETED,Q(Q({},r),{},{duration:Date.now()-n}))}catch(o){if(o instanceof DOMException&&o.name==="AbortError")return;throw this.analytics.track(Lt.SDK_INITIALIZATION_FAILED,Q(Q(Q({},r),H1(o)),{},{duration:Date.now()-n})),Te.error("Failed to initialize modal",o),o}}getConnector(e,n){return this.connectors.find(r=>r.name!==e?!1:n?r.connectorNamespace===ui.MULTICHAIN?!0:r.connectorNamespace===n:!0)||null}clearCache(){this.setState({connectedConnectorName:null,cachedConnector:null,currentChainId:null,idToken:null})}async cleanup(){for(const e of this.connectors)e.cleanup&&await e.cleanup()}async switchChain(e){var n;if(e.chainId===((n=this.currentChain)===null||n===void 0?void 0:n.chainId))return;if(!this.coreOptions.chains.find(a=>a.chainId===e.chainId))throw Me.invalidParams("Invalid chainId");if(this.status===ge.CONNECTED&&this.connectedConnector){await this.connectedConnector.switchChain(e);return}if(this.commonJRPCProvider){await this.commonJRPCProvider.switchChain(e);return}throw Me.notReady("No wallet is ready")}async connectTo(e,n,r){this.loginMode=r||"no-modal";const a=this.getConnector(e,n==null?void 0:n.chainNamespace);if(!a||!this.commonJRPCProvider)throw Me.notFound(`Please add wallet connector for ${e} wallet, before connecting`);const i=this.getInitialChainIdForConnector(a),s=Q(Q({},n),{},{chainId:i.chainId}),o=Date.now();let c;if(e===Be.AUTH){var d;const l=n,u=a.getOAuthProviderConfig({authConnection:l.authConnection,authConnectionId:l.authConnectionId,groupedAuthConnectionId:l.groupedAuthConnectionId});c={connector:e,connector_type:a.type,chain_id:Xc(i),chain_name:i.displayName,chain_namespace:i.chainNamespace,auth_connection:l.authConnection,auth_connection_id:l.authConnectionId,group_auth_connection_id:l.groupedAuthConnectionId,mfa_level:l.mfaLevel,wallet_key_enabled:l.getWalletKey,extra_login_options_enabled:!!l.extraLoginOptions,dapp_share_enabled:!!l.dappShare,curve:l.curve,auth_dapp_url:l.dappUrl,is_sfa:!!l.idToken,is_default_auth_connection:u==null?void 0:u.isDefault,auth_ux_mode:(d=a.authInstance)===null||d===void 0||(d=d.options)===null||d===void 0?void 0:d.uxMode}}else c={connector:e,connector_type:a.type,is_injected:a.isInjected,chain_id:Xc(i),chain_name:i.displayName,chain_namespace:i.chainNamespace};return this.analytics.track(Lt.CONNECTION_STARTED,c),new Promise((l,u)=>{const f=()=>{this.off(Ue.CONNECTED,p),this.off(Ue.ERRORED,h)},p=async()=>{const b=await a.getUserInfo();this.analytics.track(Lt.CONNECTION_COMPLETED,Q(Q({},c),{},{is_mfa_enabled:b==null?void 0:b.isMfaEnabled,duration:Date.now()-o})),f(),l(this.provider)},h=async b=>{this.analytics.track(Lt.CONNECTION_FAILED,Q(Q(Q({},c),H1(b)),{},{duration:Date.now()-o})),f(),u(b)};this.once(Ue.CONNECTED,p),this.once(Ue.ERRORED,h),a.connect(s),this.setCurrentChain(i.chainId)})}async logout(e={cleanup:!1}){if(this.status!==ge.CONNECTED||!this.connectedConnector)throw Pe.notConnectedError("No wallet is connected");await this.connectedConnector.disconnect(e)}async getUserInfo(){var e;if(Te.debug("Getting user info",this.status,(e=this.connectedConnector)===null||e===void 0?void 0:e.name),this.status!==ge.CONNECTED||!this.connectedConnector)throw Pe.notConnectedError("No wallet is connected");return this.connectedConnector.getUserInfo()}async enableMFA(e){var n;if(this.status!==ge.CONNECTED||!this.connectedConnector)throw Pe.notConnectedError("No wallet is connected");if(this.connectedConnector.name!==Be.AUTH)throw Pe.unsupportedOperation("EnableMFA is not supported for this connector.");const r=this.connectedConnector,a={connector:this.connectedConnector.name,auth_ux_mode:(n=r.authInstance)===null||n===void 0||(n=n.options)===null||n===void 0?void 0:n.uxMode};try{this.analytics.track(Lt.MFA_ENABLEMENT_STARTED,a),await this.connectedConnector.enableMFA(e)}catch(i){throw this.analytics.track(Lt.MFA_ENABLEMENT_FAILED,Q(Q({},a),H1(i))),i}}async manageMFA(e){var n;if(this.status!==ge.CONNECTED||!this.connectedConnector)throw Pe.notConnectedError("No wallet is connected");if(this.connectedConnector.name!==Be.AUTH)throw Pe.unsupportedOperation("ManageMFA is not supported for this connector.");const r=this.connectedConnector,a={connector:this.connectedConnector.name,auth_ux_mode:(n=r.authInstance)===null||n===void 0||(n=n.options)===null||n===void 0?void 0:n.uxMode};try{this.analytics.track(Lt.MFA_MANAGEMENT_SELECTED,a),await this.connectedConnector.manageMFA(e)}catch(i){throw this.analytics.track(Lt.MFA_MANAGEMENT_FAILED,Q(Q({},a),H1(i))),i}}async getIdentityToken(){if(this.status!==ge.CONNECTED||!this.connectedConnector)throw Pe.notConnectedError("No wallet is connected");const e={connector:this.connectedConnector.name};try{this.analytics.track(Lt.IDENTITY_TOKEN_STARTED,e);const n=await this.connectedConnector.getIdentityToken();return this.analytics.track(Lt.IDENTITY_TOKEN_COMPLETED,e),n}catch(n){throw this.analytics.track(Lt.IDENTITY_TOKEN_FAILED,Q(Q({},e),H1(n))),n}}getPlugin(e){return this.plugins[e]||null}setAnalyticsProperties(e){this.analytics.setGlobalProperties(e)}initChainsConfig(e){const n=new Map,r=[...e.chains||[],...this.coreOptions.chains||[]];for(const s of r){const o=n.get(s.chainId);o?n.set(s.chainId,Q(Q({},o),s)):n.set(s.chainId,s)}if(this.coreOptions.chains=Array.from(n.values()),this.coreOptions.chains.length===0)throw Te.error("chain info not found. Please configure chains on dashboard at https://dashboard.web3auth.io"),Me.invalidParams("Please configure chains on dashboard at https://dashboard.web3auth.io");const a=new Set(Object.values(Qe));for(const s of this.coreOptions.chains){if(!s.chainNamespace||!a.has(s.chainNamespace))throw Te.error(`Please provide a valid chainNamespace in chains for chain ${s.chainId}`),Me.invalidParams(`Please provide a valid chainNamespace in chains for chain ${s.chainId}`);if(s.chainNamespace!==Qe.OTHER&&!Zb(s.chainId))throw Te.error(`Please provide a valid chainId in chains for chain ${s.chainId}`),Me.invalidParams(`Please provide a valid chainId as hex string in chains for chain ${s.chainId}`);if(s.chainNamespace!==Qe.OTHER)try{new URL(s.rpcTarget)}catch(o){throw Te.error(`Please provide a valid rpcTarget in chains for chain ${s.chainId}`,o),Me.invalidParams(`Please provide a valid rpcTarget in chains for chain ${s.chainId}`)}}if(this.coreOptions.accountAbstractionConfig){if(this.coreOptions.accountAbstractionConfig.chains.length===0)throw Te.error("Please configure chains for smart accounts on dashboard at https://dashboard.web3auth.io"),Me.invalidParams("Please configure chains for smart accounts on dashboard at https://dashboard.web3auth.io");for(const s of this.coreOptions.accountAbstractionConfig.chains){if(!Zb(s.chainId))throw Te.error(`Please provide a valid chainId in accountAbstractionConfig.chains for chain ${s.chainId}`),Me.invalidParams(`Please provide a valid chainId in accountAbstractionConfig.chains for chain ${s.chainId}`);try{var i;new URL((i=s.bundlerConfig)===null||i===void 0?void 0:i.url)}catch(o){throw Te.error(`Please provide a valid bundlerConfig.url in accountAbstractionConfig.chains for chain ${s.chainId}`,o),Me.invalidParams(`Please provide a valid bundlerConfig.url in accountAbstractionConfig.chains for chain ${s.chainId}`)}if(!n.has(s.chainId))throw Te.error(`Please provide chain config for AA chain in accountAbstractionConfig.chains for chain ${s.chainId}`),Me.invalidParams(`Please provide chain config for AA chain in accountAbstractionConfig.chains for chain ${s.chainId}`)}}}initAccountAbstractionConfig(e){var n;if(!!!(this.coreOptions.accountAbstractionConfig||e!=null&&e.smartAccounts))return;const a=(e==null?void 0:e.smartAccounts)||{},{walletScope:i}=a,s=iE(a,f5e),o=new Map,c=[...(s==null?void 0:s.chains)||[],...((n=this.coreOptions.accountAbstractionConfig)===null||n===void 0?void 0:n.chains)||[]];for(const d of c){const l=o.get(d.chainId);l?o.set(d.chainId,Q(Q({},l),d)):o.set(d.chainId,d)}this.coreOptions.accountAbstractionConfig=Q(Q({},Kt(s||{},this.coreOptions.accountAbstractionConfig||{})),{},{chains:Array.from(o.values())}),this.coreOptions.useAAWithExternalWallet===void 0&&(this.coreOptions.useAAWithExternalWallet=i===SL.ALL)}initUIConfig(e){this.coreOptions.uiConfig=Kt.all([{mode:"light",uxMode:W0.POPUP},Zte(e.whitelabel||{}),this.coreOptions.uiConfig||{}])}initCachedConnectorAndChainId(){const e=this.state.currentChainId,n=e&&this.coreOptions.chains.some(a=>a.chainId===e);if(this.coreOptions.defaultChainId&&!Zb(this.coreOptions.defaultChainId))throw Me.invalidParams("Please provide a valid defaultChainId in constructor");const r=n?e:this.coreOptions.defaultChainId||this.coreOptions.chains[0].chainId;this.setState({currentChainId:r})}initWalletServicesConfig(e){var n,r,a,i,s,o;const{enableKeyExport:c,walletUi:d}=e,{enablePortfolioWidget:l=!1,enableTokenDisplay:u=!0,enableNftDisplay:f=!0,enableWalletConnect:p=!0,enableBuyButton:h=!0,enableSendButton:b=!0,enableSwapButton:v=!0,enableReceiveButton:m=!0,enableShowAllTokensButton:T=!0,enableConfirmationModal:A=!1,portfolioWidgetPosition:N=jse.BOTTOM_LEFT,defaultPortfolio:R="token"}=d||{},B={showWidgetButton:l,hideNftDisplay:!f,hideTokenDisplay:!u,hideTransfers:!b,hideTopup:!h,hideReceive:!m,hideSwap:!v,hideShowAllTokens:!T,hideWalletConnect:!p,buttonPosition:N,defaultPortfolio:R},F=Kt.all([B,((n=this.coreOptions.walletServicesConfig)===null||n===void 0?void 0:n.whiteLabel)||{}]),I=(r=(a=this.coreOptions.walletServicesConfig)===null||a===void 0?void 0:a.confirmationStrategy)!==null&&r!==void 0?r:A?vC.MODAL:vC.AUTO_APPROVE,P=(i=(s=(o=this.coreOptions.walletServicesConfig)===null||o===void 0?void 0:o.enableKeyExport)!==null&&s!==void 0?s:c)!==null&&i!==void 0?i:!0;this.coreOptions.walletServicesConfig=Q(Q({},this.coreOptions.walletServicesConfig),{},{confirmationStrategy:I,whiteLabel:F,enableKeyExport:P})}getInitializationTrackData(){try{var e,n,r,a,i;const s=(e=this.coreOptions.chains)===null||e===void 0?void 0:e.find(c=>c.chainId===this.coreOptions.defaultChainId),o=Array.from(new Set((n=this.coreOptions.chains)===null||n===void 0?void 0:n.map(c=>G2(c.rpcTarget)))).filter(Boolean);return Q(Q(Q({chain_ids:(r=this.coreOptions.chains)===null||r===void 0?void 0:r.map(c=>Xc(c)),chain_names:(a=this.coreOptions.chains)===null||a===void 0?void 0:a.map(c=>c.displayName),chain_rpc_targets:o,default_chain_id:s?Xc(s):void 0,default_chain_name:s==null?void 0:s.displayName,logging_enabled:this.coreOptions.enableLogging,storage_type:this.coreOptions.storageType,session_time:this.coreOptions.sessionTime,sfa_key_enabled:this.coreOptions.useSFAKey,mipd_enabled:this.coreOptions.multiInjectedProviderDiscovery,private_key_provider_enabled:!!this.coreOptions.privateKeyProvider,ssr_enabled:this.coreOptions.ssr,auth_build_env:this.coreOptions.authBuildEnv,auth_ux_mode:(i=this.coreOptions.uiConfig)===null||i===void 0?void 0:i.uxMode,auth_mfa_level:this.coreOptions.mfaLevel,auth_mfa_settings:Object.keys(this.coreOptions.mfaSettings||{}),aa_enabled_for_external_wallets:this.coreOptions.accountAbstractionConfig?this.coreOptions.useAAWithExternalWallet:void 0},A_(this.coreOptions.uiConfig)),fB(this.coreOptions.accountAbstractionConfig)),pB(this.coreOptions.walletServicesConfig))}catch(s){return Te.error("Failed to get initialization track data",s),{}}}async setupCommonJRPCProvider(){this.commonJRPCProvider=await jp.getProviderInstance({chain:this.currentChain,chains:this.coreOptions.chains}),this.commonJRPCProvider.on("chainChanged",e=>this.setCurrentChain(e))}async setupConnector(e){this.subscribeToConnectorEvents(e);try{const n=this.getInitialChainIdForConnector(e),r=this.checkIfAutoConnect(e);await e.init({autoConnect:r,chainId:n.chainId})}catch(n){Te.error(n,e.name)}}async loadConnectors({projectConfig:e,modalMode:n}){var r;const a=[...this.coreOptions.connectors||[],gB()],i={projectConfig:e,coreOptions:this.coreOptions,analytics:this.analytics},s=!!e.externalWalletAuth,o=s&&((r=this.coreOptions.multiInjectedProviderDiscovery)!==null&&r!==void 0?r:!0),c=new Set(this.coreOptions.chains.map(l=>l.chainNamespace));if(o&&Xb()){if(c.has(Qe.SOLANA)){const{createSolanaMipd:l,hasSolanaWalletStandardFeatures:u,walletStandardConnector:f}=await xt(async()=>{const{createSolanaMipd:h,hasSolanaWalletStandardFeatures:b,walletStandardConnector:v}=await Promise.resolve().then(()=>A5e);return{createSolanaMipd:h,hasSolanaWalletStandardFeatures:b,walletStandardConnector:v}},void 0),p=l();p.on("register",async(...h)=>{const b=h.filter(u).map(v=>f(v)(i));this.setConnectors(b)}),a.push(...p.get().filter(h=>u(h)).map(f))}if(c.has(Qe.EIP155)){const{createMipd:l,injectedEvmConnector:u}=await xt(async()=>{const{createMipd:p,injectedEvmConnector:h}=await Promise.resolve().then(()=>Hje);return{createMipd:p,injectedEvmConnector:h}},void 0),f=l();f.subscribe(p=>{const h=p.map(b=>u(b)(i));this.setConnectors(h)}),a.push(...f.getProviders().map(u))}}if(Xb()&&(c.has(Qe.EIP155)||c.has(Qe.SOLANA))&&a.push(Tj(n?{headless:!0}:void 0)),Xb()&&s&&(c.has(Qe.SOLANA)||c.has(Qe.EIP155))){const{walletConnectV2Connector:l}=await xt(async()=>{const{walletConnectV2Connector:u}=await Promise.resolve().then(()=>zje);return{walletConnectV2Connector:u}},void 0);a.push(l())}const d=a.map(l=>l(i));this.setConnectors(d)}async initPlugins(){const{chains:e,plugins:n}=this.coreOptions,r=n||[];e.some(i=>i.chainNamespace===Qe.EIP155||i.chainNamespace===Qe.SOLANA)&&r.push(Sj());for(const i of r){const s=i();this.plugins[s.name]||(this.plugins[s.name]=s)}}setConnectors(e){const n=i=>`${i.connectorNamespace}-${i.name}`,r=new Set(this.connectors.map(n)),a=e.map(i=>{const s=n(i);return r.has(s)?null:(r.add(s),i)}).filter(i=>i!==null);a.length>0&&(this.connectors=[...this.connectors,...a],this.emit(Ue.CONNECTORS_UPDATED,{connectors:a}))}subscribeToConnectorEvents(e){e.on(Ue.CONNECTED,async n=>{var r,a;if(!this.commonJRPCProvider)throw Me.notFound("CommonJrpcProvider not found");const{provider:i}=n;if(this.coreOptions.ssr)try{const l=await e.getIdentityToken();if(!l.idToken)throw Pe.connectionError("No idToken found");this.setState({idToken:l.idToken})}catch(l){Te.error(l),this.status=ge.ERRORED,this.emit(Ue.ERRORED,l,this.loginMode);return}let s=i.provider||i;const{accountAbstractionConfig:o}=this.coreOptions;if(((r=this.currentChain)===null||r===void 0?void 0:r.chainNamespace)===Qe.EIP155&&(o==null||(a=o.chains)===null||a===void 0?void 0:a.some(l=>{var u;return l.chainId===((u=this.currentChain)===null||u===void 0?void 0:u.chainId)}))&&(n.connector===Be.AUTH||this.coreOptions.useAAWithExternalWallet)){var d;const{accountAbstractionProvider:l,toEoaProvider:u}=await xt(async()=>{const{accountAbstractionProvider:b,toEoaProvider:v}=await Promise.resolve().then(()=>qje);return{accountAbstractionProvider:b,toEoaProvider:v}},void 0),f=n.connector===Be.AUTH?await u(i):i,p=new Set((o==null||(d=o.chains)===null||d===void 0?void 0:d.map(b=>b.chainId))||[]),h=await l({accountAbstractionConfig:o,provider:f,chain:this.currentChain,chains:this.coreOptions.chains.filter(b=>p.has(b.chainId)),useProviderAsTransport:n.connector===Be.AUTH});this.aaProvider=h,n.connector!==Be.AUTH&&this.coreOptions.useAAWithExternalWallet&&(s=this.aaProvider)}this.commonJRPCProvider.updateProviderEngineProxy(s),this.setState({connectedConnectorName:n.connector}),this.cacheWallet(n.connector),this.status=ge.CONNECTED,Te.debug("connected",this.status,this.connectedConnectorName),this.connectToPlugins(n),this.emit(Ue.CONNECTED,Q(Q({},n),{},{loginMode:this.loginMode}))}),e.on(Ue.DISCONNECTED,async()=>{this.commonJRPCProvider.removeAllListeners(),this.setupCommonJRPCProvider(),this.status=ge.READY;const n=this.state.cachedConnector;this.connectedConnectorName===n&&this.clearCache(),Te.debug("disconnected",this.status,this.connectedConnectorName),await Promise.all(Object.values(this.plugins).map(async r=>{if(r.SUPPORTED_CONNECTORS.includes(e.name)&&r.status===ki.CONNECTED)return r.disconnect().catch(a=>{a.code!==5211&&Te.error(a)})})),this.setState({connectedConnectorName:null}),this.emit(Ue.DISCONNECTED)}),e.on(Ue.CONNECTING,n=>{this.status=ge.CONNECTING,this.emit(Ue.CONNECTING,n),Te.debug("connecting",this.status,this.connectedConnectorName)}),e.on(Ue.ERRORED,n=>{this.status=ge.ERRORED,this.clearCache(),this.emit(Ue.ERRORED,n,this.loginMode),Te.debug("errored",this.status,this.connectedConnectorName)}),e.on(Ue.REHYDRATION_ERROR,n=>{this.status=ge.READY,this.clearCache(),this.emit(Ue.REHYDRATION_ERROR,n)}),e.on(Ue.CONNECTOR_DATA_UPDATED,n=>{Te.debug("connector data updated",n),this.emit(Ue.CONNECTOR_DATA_UPDATED,n)}),e.on(Ue.CACHE_CLEAR,n=>{Te.debug("connector cache clear",n),this.clearCache()}),e.on(Ue.MFA_ENABLED,n=>{var r;Te.debug("mfa enabled",n);const a=this.connectedConnector;this.analytics.track(Lt.MFA_ENABLEMENT_COMPLETED,{connector:this.connectedConnector.name,auth_ux_mode:(r=a.authInstance)===null||r===void 0||(r=r.options)===null||r===void 0?void 0:r.uxMode,is_mfa_enabled:n}),this.emit(Ue.MFA_ENABLED,n)})}checkInitRequirements(){if(this.status===ge.READY)throw Me.notReady("Connector is already initialized")}checkIfAutoConnect(e){var n;let r=this.cachedConnector===e.name;return r&&(n=this.currentChain)!==null&&n!==void 0&&n.chainNamespace&&(e.connectorNamespace===ui.MULTICHAIN?r=!0:r=e.connectorNamespace===this.currentChain.chainNamespace),r}getInitialChainIdForConnector(e){var n;let r=this.currentChain;if(((n=r)===null||n===void 0?void 0:n.chainNamespace)!==e.connectorNamespace&&e.connectorNamespace!==ui.MULTICHAIN&&(r=this.coreOptions.chains.find(a=>a.chainNamespace===e.connectorNamespace),!r))throw Me.invalidParams(`No chain found for ${e.connectorNamespace}`);return r}cacheWallet(e){this.setState({cachedConnector:e})}setCurrentChain(e){if(e===this.currentChainId)return;if(!this.coreOptions.chains.find(r=>r.chainId===e))throw Me.invalidParams(`Invalid chainId: ${e}`);this.setState({currentChainId:e})}connectToPlugins(e){Object.values(this.plugins).map(async n=>{try{var r;if(!n.SUPPORTED_CONNECTORS.includes(e.connector)||n.pluginNamespace!==vT.MULTICHAIN&&n.pluginNamespace!==((r=this.currentChain)===null||r===void 0?void 0:r.chainNamespace)||n.status===ki.CONNECTED)return;await n.initWithWeb3Auth(this,this.coreOptions.uiConfig,this.analytics),await n.connect()}catch(a){if(a.code===5211)return;Te.error(a)}})}setState(e){this.state=Q(Q({},this.state),e),this.storage.setItem(Q4,JSON.stringify(this.state))}loadState(e){if(e){this.state=e;return}const n=this.storage.getItem(Q4);n&&(this.state=toe(n))}getStorageMethod(){return this.coreOptions.ssr||this.coreOptions.storageType==="cookies"?noe({expiry:this.coreOptions.sessionTime}):this.coreOptions.storageType==="session"&&V6("sessionStorage")?window.sessionStorage:this.coreOptions.storageType==="local"&&V6("localStorage")?window.localStorage:new a$}}class Cj extends Hp{async init(e){}async getIdentityToken(){if(!this.provider||this.status!==ge.CONNECTED)throw Pe.notConnectedError();if(!this.coreOptions)throw Me.invalidParams("Please initialize Web3Auth with a valid options");const e=await this.provider.request({method:Tr.GET_ACCOUNTS});if(e&&e.length>0){const n=b3(e[0],this.name);if(n&&!h3(n))return{idToken:n};const r=await this.provider.request({method:"solana_chainId"}),a=this.coreOptions.chains.find(l=>l.chainId===r);if(!a)throw Me.invalidParams("chainConfig is required before authentication");const{chainNamespace:i}=a,s={domain:window.location.origin,uri:window.location.href,address:e[0],chainId:parseInt(r,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await YE(s,i),c=await this.provider.request({method:Tr.SIGN_MESSAGE,params:{data:o,display:"utf8"}}),d=await JE(i,c,o,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return y3(e[0],this.name,d),{idToken:d}}throw Pe.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnectSession(){super.checkDisconnectionRequirements();const e=await this.provider.request({method:Tr.GET_ACCOUNTS});e&&e.length>0&&gT(e[0],this.name)}async disconnect(){this.rehydrated=!1,this.emit(Ue.DISCONNECTED)}}class p5e extends wT{constructor(e){super(e),re(this,"connectorNamespace",ui.EIP155),re(this,"currentChainNamespace",Qe.EIP155),re(this,"type",Aa.EXTERNAL),re(this,"name",void 0),re(this,"isInjected",!0),re(this,"status",ge.NOT_READY),re(this,"injectedProvider",null),this.name=e.name,this.injectedProvider=e.provider,this.icon=e.icon}get provider(){return this.status!==ge.NOT_READY&&this.injectedProvider?this.injectedProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){await super.init(e);const n=this.coreOptions.chains.find(r=>r.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:n}),this.status=ge.READY,this.emit(Ue.READY,this.name);try{if(Te.debug(`initializing ${this.name} injected connector`),e.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:e.chainId})))throw this.rehydrated=!1,Pe.connectionError("Failed to rehydrate.")}catch(r){this.emit(Ue.REHYDRATION_ERROR,r)}}async connect({chainId:e}){if(super.checkConnectionRequirements(),!this.injectedProvider)throw Pe.connectionError("Injected provider is not available");const n=this.coreOptions.chains.find(r=>r.chainId===e);if(!n)throw Pe.connectionError("Chain config is not available");this.status=ge.CONNECTING,this.emit(Ue.CONNECTING,{connector:this.name});try{if(await this.injectedProvider.request({method:"eth_requestAccounts"}),this.injectedProvider.chainId!==n.chainId)try{await this.switchChain(n,!0)}catch{await this.addChain(n,!0),await this.switchChain(n,!0)}this.status=ge.CONNECTED;const r=a=>{if(a.length===0){var i;this.disconnect(),(i=this.injectedProvider)!==null&&i!==void 0&&i.removeListener&&this.injectedProvider.removeListener("accountsChanged",r)}};return this.injectedProvider.on("accountsChanged",r),this.emit(Ue.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.injectedProvider}),this.injectedProvider}catch(r){throw this.status=ge.READY,this.rehydrated||this.emit(Ue.ERRORED,r),this.rehydrated=!1,r instanceof Cr?r:Pe.connectionError(`Failed to login with ${this.name} injected wallet`)}}async disconnect(e={cleanup:!1}){if(!this.injectedProvider)throw Pe.connectionError("Injected provider is not available");await super.disconnectSession(),typeof this.injectedProvider.removeAllListeners<"u"&&this.injectedProvider.removeAllListeners();try{await this.injectedProvider.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]})}catch{}e.cleanup?(this.status=ge.NOT_READY,this.injectedProvider=null):this.status=ge.READY,await super.disconnect()}async getUserInfo(){if(this.status!==ge.CONNECTED)throw Pe.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async addChain(e,n=!1){if(!this.injectedProvider)throw Pe.connectionError("Injected provider is not available");await this.injectedProvider.request({method:"wallet_addEthereumChain",params:[{chainId:e.chainId,chainName:e.displayName,rpcUrls:[e.rpcTarget],blockExplorerUrls:[e.blockExplorerUrl],nativeCurrency:{name:e.tickerName,symbol:e.ticker,decimals:e.decimals||18},iconUrls:[e.logo]}]})}async switchChain(e,n=!1){if(!this.injectedProvider)throw Pe.connectionError("Injected provider is not available");super.checkSwitchChainRequirements(e,n),await this.injectedProvider.request({method:"wallet_switchEthereumChain",params:[{chainId:e.chainId}]})}async enableMFA(){throw new Error("Method Not implemented")}async manageMFA(){throw new Error("Method Not implemented")}}const Ij=t=>({coreOptions:e})=>new p5e({name:S_(t.info.name),provider:t.provider,icon:t.info.icon,coreOptions:e});function h5e(t){if(typeof window>"u")return;const e=n=>t(n.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function Oj(){const t=new Set;let e=[];const n=()=>h5e(a=>{e.some(({info:i})=>i.uuid===a.info.uuid)||(e=[...e,a],t.forEach(i=>i(e,{added:[a]})))});let r=n();return{_listeners(){return t},clear(){t.forEach(a=>a([],{removed:[...e]})),e=[]},destroy(){this.clear(),t.clear(),r==null||r()},findProvider({rdns:a}){return e.find(i=>i.info.rdns===a)},getProviders(){return e},reset(){this.clear(),r==null||r(),r=n()},subscribe(a,{emitImmediately:i}={}){return t.add(a),i&&a(e,{added:e}),()=>t.delete(a)}}}var b5e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},y5e=function(t,e,n,r,a){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?a.call(t,n):a?a.value=n:e.set(t,n),n},y2;let mf;const m3=new Set;function m5e(t){s5=void 0,m3.add(t)}function g5e(t){s5=void 0,m3.delete(t)}const t6={};function Mj(){if(mf||(mf=Object.freeze({register:iM,get:w5e,on:v5e}),typeof window>"u"))return mf;const t=Object.freeze({register:iM});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new E5e(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return mf}function iM(...t){var e;return t=t.filter(n=>!m3.has(n)),t.length?(t.forEach(n=>m5e(n)),(e=t6.register)==null||e.forEach(n=>sM(()=>n(...t))),function(){var r;t.forEach(a=>g5e(a)),(r=t6.unregister)==null||r.forEach(a=>sM(()=>a(...t)))}):()=>{}}let s5;function w5e(){return s5||(s5=[...m3]),s5}function v5e(t,e){var n;return(n=t6[t])!=null&&n.push(e)||(t6[t]=[e]),function(){var a;t6[t]=(a=t6[t])==null?void 0:a.filter(i=>e!==i)}}function sM(t){try{t()}catch(e){console.error(e)}}class E5e extends Event{get detail(){return b5e(this,y2,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),y2.set(this,void 0),y5e(this,y2,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}y2=new WeakMap;const Pj="solana:signAndSendTransaction",kj="solana:signMessage",Ww="solana:signTransaction",Nj="standard:connect",_5e="standard:disconnect";function Rj(t){return(e,n,r,a)=>e.method==="solana_chainId"?(n.result=t,a()):r()}function Dj(t){return(e,n,r,a)=>e.method==="solana_provider_config"?(n.result=t,a()):r()}function _T(t){const{chainId:e}=t;return Eu([Rj(e),Dj(t)])}function $j(t){const{rpcTarget:e}=t,n=GE({rpcTarget:e});return{networkMiddleware:Eu([_T(t),n]),fetchMiddleware:n}}function Lj({getAccounts:t}){return Qt(async(e,n,r)=>{const{method:a}=e;if(a!==Tr.GET_ACCOUNTS)return r();if(!t)throw new Error("WalletMiddleware - opts.getAccounts not provided");const i=await t(e);n.result=i})}function Bj({requestAccounts:t}){return Qt(async(e,n,r)=>{const{method:a}=e;if(a!==Tr.SOLANA_REQUEST_ACCOUNTS)return r();if(!t)throw new Error("WalletMiddleware - opts.requestAccounts not provided");const i=await t(e);n.result=i})}function cs(t,e){return Qt(async(n,r,a)=>{const{method:i}=n;if(i!==t)return a();if(!e)throw new Error(`WalletMiddleware - ${t} not provided`);const s=await e(n);r.result=s})}function TT(t){const{getAccounts:e,requestAccounts:n,signTransaction:r,signAndSendTransaction:a,signAllTransactions:i,signMessage:s,getPrivateKey:o,getSecretKey:c,getPublicKey:d}=t;return Eu([Bj({requestAccounts:n}),Lj({getAccounts:e}),cs(Tr.SIGN_TRANSACTION,r),cs(Tr.SEND_TRANSACTION,a),cs(Tr.SIGN_ALL_TRANSACTIONS,i),cs(Tr.SIGN_MESSAGE,s),cs(Tr.SOLANA_PRIVATE_KEY,o),cs(Tr.PRIVATE_KEY,o),cs("public_key",d),cs("solanaPublicKey",d),cs("solanaSecretKey",c)])}class T5e extends Qd{constructor({config:e,state:n}){super({config:e,state:n})}async switchChain(e){throw Pe.unsupportedOperation("Chain switching is not supported by this connector")}async setupProvider(e,n){const r=new cr,a=this.getChain(n),i=this.getProviderHandlers(e),s=TT(i);r.push(s);const o=_T(a);r.push(o);const c=this.getInjectedProviderProxy(e);c&&r.push(c);const d=Sd(r);this.updateProviderEngineProxy(d),await this.lookupNetwork(e,n)}async lookupNetwork(e,n){return this.update({chainId:n}),n||""}getInjectedProviderProxy(e){}}const x5e=t=>({requestAccounts:async()=>t.publicKey?[fd.encode(t.publicKey.toBytes())]:[],getPublicKey:async()=>t.publicKey?fd.encode(t.publicKey.toBytes()):"",getAccounts:async()=>t.publicKey?[fd.encode(t.publicKey.toBytes())]:[],getPrivateKey:async()=>{throw Ut.methodNotSupported()},getSecretKey:async()=>{throw Ut.methodNotSupported()},signTransaction:async n=>await t.signTransaction(n.params.message),signMessage:async n=>await t.signMessage(n.params.data,n.params.from,n.params.display),signAllTransactions:async n=>{var r,a;if(!((r=n.params)!==null&&r!==void 0&&r.message)||!((a=n.params)!==null&&a!==void 0&&a.message.length))throw Ut.invalidParams("message");return await t.signAllTransactions(n.params.message)},signAndSendTransaction:async n=>await t.signAndSendTransaction(n.params.message)}),xT=t=>{switch(t.chainId){case"0x65":return"solana:mainnet";case"0x66":return"solana:testnet";case"0x67":return"solana:devnet";default:return null}};class Fj extends T5e{getProviderHandlers(e){const n=xT(this.config.chain),r=()=>{const c=e==null?void 0:e.accounts[0];if(!c)throw Pe.notConnectedError();return c};return x5e({get publicKey(){return new CY(r().publicKey)},signMessage:async c=>{const d=r(),l=new Uint8Array(Buffer.from(c,"utf-8")),u=await e.features[kj].signMessage({account:d,message:l});return fd.encode(u[0].signature)},signTransaction:async c=>{const d=r(),l=await e.features[Ww].signTransaction({account:d,transaction:new Uint8Array(Buffer.from(c,"base64")),chain:n});return fd.encode(IY.deserialize(l[0].signedTransaction).signatures[0])},signAllTransactions:async c=>{const d=r();return Promise.all(c.map(async l=>{const u=await e.features[Ww].signTransaction({account:d,transaction:new Uint8Array(Buffer.from(l,"base64")),chain:n});return Buffer.from(u[0].signedTransaction).toString("base64")}))},signAndSendTransaction:async c=>{const d=r(),l=await e.features[Pj].signAndSendTransaction({account:d,transaction:new Uint8Array(Buffer.from(c,"base64")),chain:n});return fd.encode(l[0].signature)}})}}class S5e extends Cj{constructor(e){super(e),re(this,"name",void 0),re(this,"connectorNamespace",ui.SOLANA),re(this,"currentChainNamespace",Qe.SOLANA),re(this,"type",Aa.EXTERNAL),re(this,"isInjected",!0),re(this,"status",ge.NOT_READY),re(this,"wallet",null),re(this,"injectedProvider",null),this.name=e.name,this.icon=e.wallet.icon,this.wallet=["gate","solflare"].includes(this.name)?Object.freeze(e.wallet):e.wallet}get provider(){return this.status!==ge.NOT_READY&&this.injectedProvider?this.injectedProvider:null}get isWalletConnected(){return this.status===ge.CONNECTED&&this.wallet.accounts.length>0}async init(e){await super.init(e);const n=this.coreOptions.chains.find(r=>r.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:n}),this.injectedProvider=new Fj({config:{chain:n,chains:this.coreOptions.chains}}),await this.injectedProvider.setupProvider(this.wallet,e.chainId),this.status=ge.READY,this.emit(Ue.READY,this.name);try{if(Te.debug("initializing solana injected connector"),e.autoConnect&&(this.rehydrated=!0,!await this.connect({chainId:e.chainId})))throw this.rehydrated=!1,Pe.connectionError("Failed to rehydrate.")}catch(r){this.emit(Ue.REHYDRATION_ERROR,r)}}async connect({chainId:e}){try{super.checkConnectionRequirements();const n=this.coreOptions.chains.find(a=>a.chainId===e);if(!n)throw Pe.connectionError("Chain config is not available");this.status=ge.CONNECTING,this.emit(Ue.CONNECTING,{connector:this.name});const r=xT(n);if(!this.wallet.chains.find(a=>a===r))throw Pe.connectionError(`Chain ${r} not supported. Supported chains are ${this.wallet.chains.join(", ")}`);if(this.isWalletConnected||await this.wallet.features[Nj].connect(),this.wallet.accounts.length===0)throw Pe.connectionError();return this.status=ge.CONNECTED,this.emit(Ue.CONNECTED,{connector:this.name,reconnected:this.rehydrated,provider:this.provider}),this.provider}catch(n){throw this.status=ge.READY,this.rehydrated||this.emit(Ue.ERRORED,n),this.rehydrated=!1,n}}async disconnect(e={cleanup:!1}){await super.disconnectSession();try{var n;await((n=this.wallet.features[_5e])===null||n===void 0?void 0:n.disconnect()),e.cleanup?(this.status=ge.NOT_READY,this.injectedProvider=null):this.status=ge.READY,await super.disconnect()}catch(r){this.emit(Ue.ERRORED,Pe.disconnectionError(r==null?void 0:r.message))}}async getUserInfo(){if(!this.isWalletConnected)throw Pe.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async switchChain(e,n=!1){var r;super.checkSwitchChainRequirements(e,n),await((r=this.injectedProvider)===null||r===void 0?void 0:r.switchChain(e))}async enableMFA(){throw new Error("Method not implemented.")}async manageMFA(){throw new Error("Method Not implemented")}}const Uj=t=>({coreOptions:e})=>new S5e({name:S_(t.name),wallet:t,coreOptions:e}),jj=t=>{const{chains:e,features:n}=t;return e.some(i=>i.startsWith("solana"))?!![Nj,kj,Ww,Pj].every(i=>Object.keys(n).includes(i)):void 0},A5e=Object.freeze(Object.defineProperty({__proto__:null,createSolanaMipd:Mj,hasSolanaWalletStandardFeatures:jj,walletStandardConnector:Uj},Symbol.toStringTag,{value:"Module"}));let ST=function(t){return t.ETH_SEND_TRANSACTION="eth_sendTransaction",t.ETH_SIGN_TRANSACTION="eth_signTransaction",t.ETH_SIGN="eth_sign",t.PERSONAL_SIGN="personal_sign",t.ETH_SIGN_TYPED_DATA="eth_signTypedData",t.ETH_SIGN_TYPED_DATA_V3="eth_signTypedData_v3",t.ETH_SIGN_TYPED_DATA_V4="eth_signTypedData_v4",t.ADD_ETHEREUM_CHAIN="wallet_addEthereumChain",t.SWITCH_ETHEREUM_CHAIN="wallet_switchEthereumChain",t}({}),AT=function(t){return t.SIGN_TRANSACTION="solana_signTransaction",t.SIGN_MESSAGE="solana_signMessage",t}({}),CT=function(t){return t.ETH_CHAIN_CHANGED="chainChanged",t.ETH_ACCOUNTS_CHANGED="accountsChanged",t}({}),IT=function(t){return t.SOL_CHAIN_CHANGED="chainChanged",t.SOL_ACCOUNTS_CHANGED="accountsChanged",t}({});const C5e=async()=>({name:bB(window),icon:await yB(window)}),OT=t=>{const e=[];return t.forEach(n=>{const[r]=n.split(":");e.includes(r)||e.push(r)}),e},MT=t=>{switch(t){case Qe.EIP155:return Object.values(ST);case Qe.SOLANA:return Object.values(AT);default:throw new Error(`No default methods for namespace: ${t}`)}},PT=t=>{switch(t){case Qe.EIP155:return Object.values(CT);case Qe.SOLANA:return Object.values(IT);default:throw new Error(`No default events for namespace: ${t}`)}},kT=t=>{const e=OT(t);return Object.fromEntries(e.map(n=>[n,{methods:MT(n),chains:t.filter(r=>r.startsWith(n)),events:PT(n)}]))},NT=async(t,e)=>{const n=await C5e(),r={walletConnectInitOptions:{projectId:e,relayUrl:"wss://relay.walletconnect.com",metadata:{name:n.name,description:n.name,url:window.location.origin,icons:[n.icon||""]}}},a=t.map(s=>{if(s.chainNamespace===Qe.SOLANA)return`${s.chainNamespace}:${E5[s.chainId]}`;if(s.chainNamespace===Qe.EIP155)return`${s.chainNamespace}:${parseInt(s.chainId,16)}`;throw new Error(`Unsupported chain namespace: ${s.chainNamespace}`)}),i={optionalNamespaces:kT(a)};return{connectorSettings:r,loginSettings:i}};var ke={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gw=function(t,e){return Gw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},Gw(t,e)};function I5e(t,e){Gw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yw=function(){return Yw=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yw.apply(this,arguments)};function O5e(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function M5e(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function P5e(t,e){return function(n,r){e(n,r,t)}}function k5e(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function N5e(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(l){try{d(r.next(l))}catch(u){s(u)}}function c(l){try{d(r.throw(l))}catch(u){s(u)}}function d(l){l.done?i(l.value):a(l.value).then(o,c)}d((r=r.apply(t,e||[])).next())})}function R5e(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(l){d=[6,l],a=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function D5e(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function $5e(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Jw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Hj(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,i=[],s;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function L5e(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Hj(arguments[e]));return t}function B5e(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function U5(t){return this instanceof U5?(this.v=t,this):new U5(t)}function F5e(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,i=[];return a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a;function s(f){r[f]&&(a[f]=function(p){return new Promise(function(h,b){i.push([f,p,h,b])>1||o(f,p)})})}function o(f,p){try{c(r[f](p))}catch(h){u(i[0][3],h)}}function c(f){f.value instanceof U5?Promise.resolve(f.value.v).then(d,l):u(i[0][2],f)}function d(f){o("next",f)}function l(f){o("throw",f)}function u(f,p){f(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}function U5e(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,i){e[a]=t[a]?function(s){return(n=!n)?{value:U5(t[a](s)),done:a==="return"}:i?i(s):s}:i}}function j5e(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Jw=="function"?Jw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(o,c){s=t[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(d){i({value:d,done:o})},s)}}function H5e(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function z5e(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function q5e(t){return t&&t.__esModule?t:{default:t}}function K5e(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function V5e(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const W5e=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Yw},__asyncDelegator:U5e,__asyncGenerator:F5e,__asyncValues:j5e,__await:U5,__awaiter:N5e,__classPrivateFieldGet:K5e,__classPrivateFieldSet:V5e,__createBinding:D5e,__decorate:M5e,__exportStar:$5e,__extends:I5e,__generator:R5e,__importDefault:q5e,__importStar:z5e,__makeTemplateObject:H5e,__metadata:k5e,__param:P5e,__read:Hj,__rest:O5e,__spread:L5e,__spreadArrays:B5e,__values:Jw},Symbol.toStringTag,{value:"Module"})),g3=bR(W5e);var i9={},gf={},oM;function G5e(){if(oM)return gf;oM=1,Object.defineProperty(gf,"__esModule",{value:!0}),gf.delay=void 0;function t(e){return new Promise(n=>{setTimeout(()=>{n(!0)},e)})}return gf.delay=t,gf}var M1={},s9={},P1={},cM;function Y5e(){return cM||(cM=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.ONE_THOUSAND=P1.ONE_HUNDRED=void 0,P1.ONE_HUNDRED=100,P1.ONE_THOUSAND=1e3),P1}var o9={},dM;function J5e(){return dM||(dM=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(o9)),o9}var lM;function zj(){return lM||(lM=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=g3;e.__exportStar(Y5e(),t),e.__exportStar(J5e(),t)}(s9)),s9}var uM;function Z5e(){if(uM)return M1;uM=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.fromMiliseconds=M1.toMiliseconds=void 0;const t=zj();function e(r){return r*t.ONE_THOUSAND}M1.toMiliseconds=e;function n(r){return Math.floor(r/t.ONE_THOUSAND)}return M1.fromMiliseconds=n,M1}var fM;function X5e(){return fM||(fM=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=g3;e.__exportStar(G5e(),t),e.__exportStar(Z5e(),t)}(i9)),i9}var Al={},pM;function Q5e(){if(pM)return Al;pM=1,Object.defineProperty(Al,"__esModule",{value:!0}),Al.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(n){if(this.timestamps.has(n))throw new Error(`Watch already started for label: ${n}`);this.timestamps.set(n,{started:Date.now()})}stop(n){const r=this.get(n);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${n}`);const a=Date.now()-r.started;this.timestamps.set(n,{started:r.started,elapsed:a})}get(n){const r=this.timestamps.get(n);if(typeof r>"u")throw new Error(`No timestamp found for label: ${n}`);return r}elapsed(n){const r=this.get(n);return r.elapsed||Date.now()-r.started}}return Al.Watch=t,Al.default=t,Al}var c9={},wf={},hM;function epe(){if(hM)return wf;hM=1,Object.defineProperty(wf,"__esModule",{value:!0}),wf.IWatch=void 0;class t{}return wf.IWatch=t,wf}var bM;function tpe(){return bM||(bM=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),g3.__exportStar(epe(),t)}(c9)),c9}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=g3;e.__exportStar(X5e(),t),e.__exportStar(Q5e(),t),e.__exportStar(tpe(),t),e.__exportStar(zj(),t)})(ke);class al{}let npe=class extends al{constructor(e){super()}};const yM=ke.FIVE_SECONDS,il={pulse:"heartbeat_pulse"};let rpe=class qj extends npe{constructor(e){super(e),this.events=new l0.EventEmitter,this.interval=yM,this.interval=(e==null?void 0:e.interval)||yM}static async init(e){const n=new qj(e);return await n.init(),n}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),ke.toMiliseconds(this.interval))}pulse(){this.events.emit(il.pulse)}};const ape=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ipe=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,spe=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function ope(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){cpe(t);return}return e}function cpe(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function ub(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const n=t.trim();if(n.length<=9)switch(n.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!spe.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(ape.test(t)||ipe.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,ope)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}function dpe(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function m0(t,...e){try{return dpe(t(...e))}catch(n){return Promise.reject(n)}}function lpe(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function upe(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function m2(t){if(lpe(t))return String(t);if(upe(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return m2(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Zw="base64:";function fpe(t){return typeof t=="string"?t:Zw+bpe(t)}function ppe(t){return typeof t!="string"||!t.startsWith(Zw)?t:hpe(t.slice(Zw.length))}function hpe(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function bpe(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function Vr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function ype(...t){return Vr(t.join(":"))}function fb(t){return t=Vr(t),t?t+":":""}function mpe(t,e){if(e===void 0)return!0;let n=0,r=t.indexOf(":");for(;r>-1;)n++,r=t.indexOf(":",r+1);return n<=e}function gpe(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const wpe="memory",vpe=()=>{const t=new Map;return{name:wpe,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,n){t.set(e,n)},setItemRaw(e,n){t.set(e,n)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function Epe(t={}){const e={mounts:{"":t.driver||vpe()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},n=d=>{for(const l of e.mountpoints)if(d.startsWith(l))return{base:l,relativeKey:d.slice(l.length),driver:e.mounts[l]};return{base:"",relativeKey:d,driver:e.mounts[""]}},r=(d,l)=>e.mountpoints.filter(u=>u.startsWith(d)||l&&d.startsWith(u)).map(u=>({relativeBase:d.length>u.length?d.slice(u.length):void 0,mountpoint:u,driver:e.mounts[u]})),a=(d,l)=>{if(e.watching){l=Vr(l);for(const u of e.watchListeners)u(d,l)}},i=async()=>{if(!e.watching){e.watching=!0;for(const d in e.mounts)e.unwatch[d]=await mM(e.mounts[d],a,d)}},s=async()=>{if(e.watching){for(const d in e.unwatch)await e.unwatch[d]();e.unwatch={},e.watching=!1}},o=(d,l,u)=>{const f=new Map,p=h=>{let b=f.get(h.base);return b||(b={driver:h.driver,base:h.base,items:[]},f.set(h.base,b)),b};for(const h of d){const b=typeof h=="string",v=Vr(b?h:h.key),m=b?void 0:h.value,T=b||!h.options?l:{...l,...h.options},A=n(v);p(A).items.push({key:v,value:m,relativeKey:A.relativeKey,options:T})}return Promise.all([...f.values()].map(h=>u(h))).then(h=>h.flat())},c={hasItem(d,l={}){d=Vr(d);const{relativeKey:u,driver:f}=n(d);return m0(f.hasItem,u,l)},getItem(d,l={}){d=Vr(d);const{relativeKey:u,driver:f}=n(d);return m0(f.getItem,u,l).then(p=>ub(p))},getItems(d,l={}){return o(d,l,u=>u.driver.getItems?m0(u.driver.getItems,u.items.map(f=>({key:f.relativeKey,options:f.options})),l).then(f=>f.map(p=>({key:ype(u.base,p.key),value:ub(p.value)}))):Promise.all(u.items.map(f=>m0(u.driver.getItem,f.relativeKey,f.options).then(p=>({key:f.key,value:ub(p)})))))},getItemRaw(d,l={}){d=Vr(d);const{relativeKey:u,driver:f}=n(d);return f.getItemRaw?m0(f.getItemRaw,u,l):m0(f.getItem,u,l).then(p=>ppe(p))},async setItem(d,l,u={}){if(l===void 0)return c.removeItem(d);d=Vr(d);const{relativeKey:f,driver:p}=n(d);p.setItem&&(await m0(p.setItem,f,m2(l),u),p.watch||a("update",d))},async setItems(d,l){await o(d,l,async u=>{if(u.driver.setItems)return m0(u.driver.setItems,u.items.map(f=>({key:f.relativeKey,value:m2(f.value),options:f.options})),l);u.driver.setItem&&await Promise.all(u.items.map(f=>m0(u.driver.setItem,f.relativeKey,m2(f.value),f.options)))})},async setItemRaw(d,l,u={}){if(l===void 0)return c.removeItem(d,u);d=Vr(d);const{relativeKey:f,driver:p}=n(d);if(p.setItemRaw)await m0(p.setItemRaw,f,l,u);else if(p.setItem)await m0(p.setItem,f,fpe(l),u);else return;p.watch||a("update",d)},async removeItem(d,l={}){typeof l=="boolean"&&(l={removeMeta:l}),d=Vr(d);const{relativeKey:u,driver:f}=n(d);f.removeItem&&(await m0(f.removeItem,u,l),(l.removeMeta||l.removeMata)&&await m0(f.removeItem,u+"$",l),f.watch||a("remove",d))},async getMeta(d,l={}){typeof l=="boolean"&&(l={nativeOnly:l}),d=Vr(d);const{relativeKey:u,driver:f}=n(d),p=Object.create(null);if(f.getMeta&&Object.assign(p,await m0(f.getMeta,u,l)),!l.nativeOnly){const h=await m0(f.getItem,u+"$",l).then(b=>ub(b));h&&typeof h=="object"&&(typeof h.atime=="string"&&(h.atime=new Date(h.atime)),typeof h.mtime=="string"&&(h.mtime=new Date(h.mtime)),Object.assign(p,h))}return p},setMeta(d,l,u={}){return this.setItem(d+"$",l,u)},removeMeta(d,l={}){return this.removeItem(d+"$",l)},async getKeys(d,l={}){var v;d=fb(d);const u=r(d,!0);let f=[];const p=[];let h=!0;for(const m of u){(v=m.driver.flags)!=null&&v.maxDepth||(h=!1);const T=await m0(m.driver.getKeys,m.relativeBase,l);for(const A of T){const N=m.mountpoint+Vr(A);f.some(R=>N.startsWith(R))||p.push(N)}f=[m.mountpoint,...f.filter(A=>!A.startsWith(m.mountpoint))]}const b=l.maxDepth!==void 0&&!h;return p.filter(m=>(!b||mpe(m,l.maxDepth))&&gpe(m,d))},async clear(d,l={}){d=fb(d),await Promise.all(r(d,!1).map(async u=>{if(u.driver.clear)return m0(u.driver.clear,u.relativeBase,l);if(u.driver.removeItem){const f=await u.driver.getKeys(u.relativeBase||"",l);return Promise.all(f.map(p=>u.driver.removeItem(p,l)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(d=>gM(d)))},async watch(d){return await i(),e.watchListeners.push(d),async()=>{e.watchListeners=e.watchListeners.filter(l=>l!==d),e.watchListeners.length===0&&await s()}},async unwatch(){e.watchListeners=[],await s()},mount(d,l){if(d=fb(d),d&&e.mounts[d])throw new Error(`already mounted at ${d}`);return d&&(e.mountpoints.push(d),e.mountpoints.sort((u,f)=>f.length-u.length)),e.mounts[d]=l,e.watching&&Promise.resolve(mM(l,a,d)).then(u=>{e.unwatch[d]=u}).catch(console.error),c},async unmount(d,l=!0){var u,f;d=fb(d),!(!d||!e.mounts[d])&&(e.watching&&d in e.unwatch&&((f=(u=e.unwatch)[d])==null||f.call(u),delete e.unwatch[d]),l&&await gM(e.mounts[d]),e.mountpoints=e.mountpoints.filter(p=>p!==d),delete e.mounts[d])},getMount(d=""){d=Vr(d)+":";const l=n(d);return{driver:l.driver,base:l.base}},getMounts(d="",l={}){return d=Vr(d),r(d,l.parents).map(f=>({driver:f.driver,base:f.mountpoint}))},keys:(d,l={})=>c.getKeys(d,l),get:(d,l={})=>c.getItem(d,l),set:(d,l,u={})=>c.setItem(d,l,u),has:(d,l={})=>c.hasItem(d,l),del:(d,l={})=>c.removeItem(d,l),remove:(d,l={})=>c.removeItem(d,l)};return c}function mM(t,e,n){return t.watch?t.watch((r,a)=>e(r,n+a)):()=>{}}async function gM(t){typeof t.dispose=="function"&&await m0(t.dispose)}function sl(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Kj(t,e){let n;const r=()=>{if(n)return n;const a=indexedDB.open(t);return a.onupgradeneeded=()=>a.result.createObjectStore(e),n=sl(a),n.then(i=>{i.onclose=()=>n=void 0},()=>{}),n};return(a,i)=>r().then(s=>i(s.transaction(e,a).objectStore(e)))}let d9;function Yp(){return d9||(d9=Kj("keyval-store","keyval")),d9}function wM(t,e=Yp()){return e("readonly",n=>sl(n.get(t)))}function _pe(t,e,n=Yp()){return n("readwrite",r=>(r.put(e,t),sl(r.transaction)))}function Tpe(t,e=Yp()){return e("readwrite",n=>(n.delete(t),sl(n.transaction)))}function xpe(t=Yp()){return t("readwrite",e=>(e.clear(),sl(e.transaction)))}function Spe(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},sl(t.transaction)}function Ape(t=Yp()){return t("readonly",e=>{if(e.getAllKeys)return sl(e.getAllKeys());const n=[];return Spe(e,r=>n.push(r.key)).then(()=>n)})}const Cpe=t=>JSON.stringify(t,(e,n)=>typeof n=="bigint"?n.toString()+"n":n),Ipe=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,n=t.replace(e,'$1"$2n"$3');return JSON.parse(n,(r,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function W6(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return Ipe(t)}catch{return t}}function kd(t){return typeof t=="string"?t:Cpe(t)||""}const Ope="idb-keyval";var Mpe=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",n=a=>e+a;let r;return t.dbName&&t.storeName&&(r=Kj(t.dbName,t.storeName)),{name:Ope,options:t,async hasItem(a){return!(typeof await wM(n(a),r)>"u")},async getItem(a){return await wM(n(a),r)??null},setItem(a,i){return _pe(n(a),i,r)},removeItem(a){return Tpe(n(a),r)},getKeys(){return Ape(r)},clear(){return xpe(r)}}};const Ppe="WALLET_CONNECT_V2_INDEXED_DB",kpe="keyvaluestorage";let Npe=class{constructor(){this.indexedDb=Epe({driver:Mpe({dbName:Ppe,storeName:kpe})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const n=await this.indexedDb.getItem(e);if(n!==null)return n}async setItem(e,n){await this.indexedDb.setItem(e,kd(n))}async removeItem(e){await this.indexedDb.removeItem(e)}};var l9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},g2={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(n){return this.hasOwnProperty(n)?String(this[n]):null},t.prototype.setItem=function(n,r){this[n]=String(r)},t.prototype.removeItem=function(n){delete this[n]},t.prototype.clear=function(){const n=this;Object.keys(n).forEach(function(r){n[r]=void 0,delete n[r]})},t.prototype.key=function(n){return n=n||0,Object.keys(this)[n]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof l9<"u"&&l9.localStorage?g2.exports=l9.localStorage:typeof window<"u"&&window.localStorage?g2.exports=window.localStorage:g2.exports=new e})();function Rpe(t){var e;return[t[0],W6((e=t[1])!=null?e:"")]}let Dpe=class{constructor(){this.localStorage=g2.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(Rpe)}async getItem(e){const n=this.localStorage.getItem(e);if(n!==null)return W6(n)}async setItem(e,n){this.localStorage.setItem(e,kd(n))}async removeItem(e){this.localStorage.removeItem(e)}};const $pe="wc_storage_version",vM=1,Lpe=async(t,e,n)=>{const r=$pe,a=await e.getItem(r);if(a&&a>=vM){n(e);return}const i=await t.getKeys();if(!i.length){n(e);return}const s=[];for(;i.length;){const o=i.shift();if(!o)continue;const c=o.toLowerCase();if(c.includes("wc@")||c.includes("walletconnect")||c.includes("wc_")||c.includes("wallet_connect")){const d=await t.getItem(o);await e.setItem(o,d),s.push(o)}}await e.setItem(r,vM),n(e),Bpe(t,s)},Bpe=async(t,e)=>{e.length&&e.forEach(async n=>{await t.removeItem(n)})};let Fpe=class{constructor(){this.initialized=!1,this.setInitialized=n=>{this.storage=n,this.initialized=!0};const e=new Dpe;this.storage=e;try{const n=new Npe;Lpe(e,n,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,n){return await this.initialize(),this.storage.setItem(e,n)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const n=setInterval(()=>{this.initialized&&(clearInterval(n),e())},20)})}};function Upe(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var jpe=Hpe;function Hpe(t,e,n){var r=n&&n.stringify||Upe,a=1;if(typeof t=="object"&&t!==null){var i=e.length+a;if(i===1)return t;var s=new Array(i);s[0]=r(t);for(var o=1;o<i;o++)s[o]=r(e[o]);return s.join(" ")}if(typeof t!="string")return t;var c=e.length;if(c===0)return t;for(var d="",l=1-a,u=-1,f=t&&t.length||0,p=0;p<f;){if(t.charCodeAt(p)===37&&p+1<f){switch(u=u>-1?u:0,t.charCodeAt(p+1)){case 100:case 102:if(l>=c||e[l]==null)break;u<p&&(d+=t.slice(u,p)),d+=Number(e[l]),u=p+2,p++;break;case 105:if(l>=c||e[l]==null)break;u<p&&(d+=t.slice(u,p)),d+=Math.floor(Number(e[l])),u=p+2,p++;break;case 79:case 111:case 106:if(l>=c||e[l]===void 0)break;u<p&&(d+=t.slice(u,p));var h=typeof e[l];if(h==="string"){d+="'"+e[l]+"'",u=p+2,p++;break}if(h==="function"){d+=e[l].name||"<anonymous>",u=p+2,p++;break}d+=r(e[l]),u=p+2,p++;break;case 115:if(l>=c)break;u<p&&(d+=t.slice(u,p)),d+=String(e[l]),u=p+2,p++;break;case 37:u<p&&(d+=t.slice(u,p)),d+="%",u=p+2,p++,l--;break}++l}++p}return u===-1?t:(u<f&&(d+=t.slice(u)),d)}const EM=jpe;var Kl=Rs;const j5=Xpe().console||{},zpe={mapHttpRequest:pb,mapHttpResponse:pb,wrapRequestSerializer:u9,wrapResponseSerializer:u9,wrapErrorSerializer:u9,req:pb,res:pb,err:Gpe};function qpe(t,e){return Array.isArray(t)?t.filter(function(r){return r!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Rs(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const n=t.browser.write||j5;t.browser.write&&(t.browser.asObject=!0);const r=t.serializers||{},a=qpe(t.browser.serialize,r);let i=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(i=!1);const s=["error","fatal","warn","info","debug","trace"];typeof n=="function"&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),t.enabled===!1&&(t.level="silent");const o=t.level||"info",c=Object.create(n);c.log||(c.log=H5),Object.defineProperty(c,"levelVal",{get:l}),Object.defineProperty(c,"level",{get:u,set:f});const d={transmit:e,serialize:a,asObject:t.browser.asObject,levels:s,timestamp:Ype(t)};c.levels=Rs.levels,c.level=o,c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=H5,c.serializers=r,c._serialize=a,c._stdErrSerialize=i,c.child=p,e&&(c._logEvent=Xw());function l(){return this.level==="silent"?1/0:this.levels.values[this.level]}function u(){return this._level}function f(h){if(h!=="silent"&&!this.levels.values[h])throw Error("unknown level "+h);this._level=h,Cl(d,c,"error","log"),Cl(d,c,"fatal","error"),Cl(d,c,"warn","error"),Cl(d,c,"info","log"),Cl(d,c,"debug","log"),Cl(d,c,"trace","log")}function p(h,b){if(!h)throw new Error("missing bindings for child Pino");b=b||{},a&&h.serializers&&(b.serializers=h.serializers);const v=b.serializers;if(a&&v){var m=Object.assign({},r,v),T=t.browser.serialize===!0?Object.keys(m):a;delete h.serializers,w3([h],T,m,this._stdErrSerialize)}function A(N){this._childLevel=(N._childLevel|0)+1,this.error=Il(N,h,"error"),this.fatal=Il(N,h,"fatal"),this.warn=Il(N,h,"warn"),this.info=Il(N,h,"info"),this.debug=Il(N,h,"debug"),this.trace=Il(N,h,"trace"),m&&(this.serializers=m,this._serialize=T),e&&(this._logEvent=Xw([].concat(N._logEvent.bindings,h)))}return A.prototype=this,new A(this)}return c}Rs.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Rs.stdSerializers=zpe;Rs.stdTimeFunctions=Object.assign({},{nullTime:Vj,epochTime:Wj,unixTime:Jpe,isoTime:Zpe});function Cl(t,e,n,r){const a=Object.getPrototypeOf(e);e[n]=e.levelVal>e.levels.values[n]?H5:a[n]?a[n]:j5[n]||j5[r]||H5,Kpe(t,e,n)}function Kpe(t,e,n){!t.transmit&&e[n]===H5||(e[n]=function(r){return function(){const i=t.timestamp(),s=new Array(arguments.length),o=Object.getPrototypeOf&&Object.getPrototypeOf(this)===j5?j5:this;for(var c=0;c<s.length;c++)s[c]=arguments[c];if(t.serialize&&!t.asObject&&w3(s,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?r.call(o,Vpe(this,n,s,i)):r.apply(o,s),t.transmit){const d=t.transmit.level||e.level,l=Rs.levels.values[d],u=Rs.levels.values[n];if(u<l)return;Wpe(this,{ts:i,methodLevel:n,methodValue:u,transmitLevel:d,transmitValue:Rs.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},s)}}}(e[n]))}function Vpe(t,e,n,r){t._serialize&&w3(n,t._serialize,t.serializers,t._stdErrSerialize);const a=n.slice();let i=a[0];const s={};r&&(s.time=r),s.level=Rs.levels.values[e];let o=(t._childLevel|0)+1;if(o<1&&(o=1),i!==null&&typeof i=="object"){for(;o--&&typeof a[0]=="object";)Object.assign(s,a.shift());i=a.length?EM(a.shift(),a):void 0}else typeof i=="string"&&(i=EM(a.shift(),a));return i!==void 0&&(s.msg=i),s}function w3(t,e,n,r){for(const a in t)if(r&&t[a]instanceof Error)t[a]=Rs.stdSerializers.err(t[a]);else if(typeof t[a]=="object"&&!Array.isArray(t[a]))for(const i in t[a])e&&e.indexOf(i)>-1&&i in n&&(t[a][i]=n[i](t[a][i]))}function Il(t,e,n){return function(){const r=new Array(1+arguments.length);r[0]=e;for(var a=1;a<r.length;a++)r[a]=arguments[a-1];return t[n].apply(this,r)}}function Wpe(t,e,n){const r=e.send,a=e.ts,i=e.methodLevel,s=e.methodValue,o=e.val,c=t._logEvent.bindings;w3(n,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=a,t._logEvent.messages=n.filter(function(d){return c.indexOf(d)===-1}),t._logEvent.level.label=i,t._logEvent.level.value=s,r(i,t._logEvent,o),t._logEvent=Xw(c)}function Xw(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function Gpe(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const n in t)e[n]===void 0&&(e[n]=t[n]);return e}function Ype(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?Vj:Wj}function pb(){return{}}function u9(t){return t}function H5(){}function Vj(){return!1}function Wj(){return Date.now()}function Jpe(){return Math.round(Date.now()/1e3)}function Zpe(){return new Date(Date.now()).toISOString()}function Xpe(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}const v3=Wi(Kl),Qpe={level:"info"},Jp="custom_context",RT=1e3*1024;let ehe=class{constructor(e){this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},_M=class{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const n=new ehe(e);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let n=this.head;for(;n!==null;)e.push(n.value),n=n.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const n=e.value;return e=e.next,{done:!1,value:n}}}}},Gj=class{constructor(e,n=RT){this.level=e??"error",this.levelValue=Kl.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new _M(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,n){n===Kl.levels.values.error?console.error(e):n===Kl.levels.values.warn?console.warn(e):n===Kl.levels.values.debug?console.debug(e):n===Kl.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(kd({timestamp:new Date().toISOString(),log:e}));const n=typeof e=="string"?JSON.parse(e).level:e.level;n>=this.levelValue&&this.forwardToConsole(e,n)}getLogs(){return this.logs}clearLogs(){this.logs=new _M(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const n=this.getLogArray();return n.push(kd({extraMetadata:e})),new Blob(n,{type:"application/json"})}},the=class{constructor(e,n=RT){this.baseChunkLogger=new Gj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const n=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=n,r.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}},nhe=class{constructor(e,n=RT){this.baseChunkLogger=new Gj(e,n)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var rhe=Object.defineProperty,ahe=Object.defineProperties,ihe=Object.getOwnPropertyDescriptors,TM=Object.getOwnPropertySymbols,she=Object.prototype.hasOwnProperty,ohe=Object.prototype.propertyIsEnumerable,xM=(t,e,n)=>e in t?rhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E8=(t,e)=>{for(var n in e||(e={}))she.call(e,n)&&xM(t,n,e[n]);if(TM)for(var n of TM(e))ohe.call(e,n)&&xM(t,n,e[n]);return t},_8=(t,e)=>ahe(t,ihe(e));function DT(t){return _8(E8({},t),{level:(t==null?void 0:t.level)||Qpe.level})}function che(t,e=Jp){return t[e]||""}function dhe(t,e,n=Jp){return t[n]=e,t}function ca(t,e=Jp){let n="";return typeof t.bindings>"u"?n=che(t,e):n=t.bindings().context||"",n}function lhe(t,e,n=Jp){const r=ca(t,n);return r.trim()?`${r}/${e}`:e}function Dr(t,e,n=Jp){const r=lhe(t,e,n),a=t.child({context:r});return dhe(a,r,n)}function uhe(t){var e,n;const r=new the((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:v3(_8(E8({},t.opts),{level:"trace",browser:_8(E8({},(n=t.opts)==null?void 0:n.browser),{write:a=>r.write(a)})})),chunkLoggerController:r}}function fhe(t){var e;const n=new nhe((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:v3(_8(E8({},t.opts),{level:"trace"}),n),chunkLoggerController:n}}function phe(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?uhe(t):fhe(t)}var hhe=Object.defineProperty,bhe=(t,e,n)=>e in t?hhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SM=(t,e,n)=>bhe(t,typeof e!="symbol"?e+"":e,n);let yhe=class extends al{constructor(e){super(),this.opts=e,SM(this,"protocol","wc"),SM(this,"version",2)}};var mhe=Object.defineProperty,ghe=(t,e,n)=>e in t?mhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,whe=(t,e,n)=>ghe(t,e+"",n);let vhe=class extends al{constructor(e,n){super(),this.core=e,this.logger=n,whe(this,"records",new Map)}},Ehe=class{constructor(e,n){this.logger=e,this.core=n}};class _he extends al{constructor(e,n){super(),this.relayer=e,this.logger=n}}let The=class extends al{constructor(e){super()}},xhe=class{constructor(e,n,r,a){this.core=e,this.logger=n,this.name=r}},She=class extends al{constructor(e,n){super(),this.relayer=e,this.logger=n}},Ahe=class extends al{constructor(e,n){super(),this.core=e,this.logger=n}},Che=class{constructor(e,n,r){this.core=e,this.logger=n,this.store=r}},Ihe=class{constructor(e,n){this.projectId=e,this.logger=n}},Ohe=class{constructor(e,n,r){this.core=e,this.logger=n,this.telemetryEnabled=r}};var Mhe=Object.defineProperty,Phe=(t,e,n)=>e in t?Mhe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,AM=(t,e,n)=>Phe(t,typeof e!="symbol"?e+"":e,n);let khe=class{constructor(e){this.opts=e,AM(this,"protocol","wc"),AM(this,"version",2)}},Nhe=class{constructor(e){this.client=e}};function Rhe(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yj(t,...e){if(!Rhe(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function CM(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Dhe(t,e){Yj(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const Ol=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const f9=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function $he(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Jj(t){return typeof t=="string"&&(t=$he(t)),Yj(t),t}let Lhe=class{clone(){return this._cloneInto()}};function Bhe(t){const e=r=>t().update(Jj(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Zj(t=32){if(Ol&&typeof Ol.getRandomValues=="function")return Ol.getRandomValues(new Uint8Array(t));if(Ol&&typeof Ol.randomBytes=="function")return Ol.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function Fhe(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const a=BigInt(32),i=BigInt(4294967295),s=Number(n>>a&i),o=Number(n&i),c=r?4:0,d=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+d,o,r)}let Uhe=class extends Lhe{constructor(e,n,r,a){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=f9(this.buffer)}update(e){CM(this);const{view:n,buffer:r,blockLen:a}=this;e=Jj(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(a-this.pos,i-s);if(o===a){const c=f9(e);for(;a<=i-s;s+=a)this.process(c,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===a&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){CM(this),Dhe(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:a,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>a-s&&(this.process(r,0),s=0);for(let u=s;u<a;u++)n[u]=0;Fhe(r,a-8,BigInt(this.length*8),i),this.process(r,0);const o=f9(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<d;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:a,finished:i,destroyed:s,pos:o}=this;return e.length=a,e.pos=o,e.finished=i,e.destroyed=s,a%n&&e.buffer.set(r),e}};const hb=BigInt(2**32-1),Qw=BigInt(32);function Xj(t,e=!1){return e?{h:Number(t&hb),l:Number(t>>Qw&hb)}:{h:Number(t>>Qw&hb)|0,l:Number(t&hb)|0}}function jhe(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:i,l:s}=Xj(t[a],e);[n[a],r[a]]=[i,s]}return[n,r]}const Hhe=(t,e)=>BigInt(t>>>0)<<Qw|BigInt(e>>>0),zhe=(t,e,n)=>t>>>n,qhe=(t,e,n)=>t<<32-n|e>>>n,Khe=(t,e,n)=>t>>>n|e<<32-n,Vhe=(t,e,n)=>t<<32-n|e>>>n,Whe=(t,e,n)=>t<<64-n|e>>>n-32,Ghe=(t,e,n)=>t>>>n-32|e<<64-n,Yhe=(t,e)=>e,Jhe=(t,e)=>t,Zhe=(t,e,n)=>t<<n|e>>>32-n,Xhe=(t,e,n)=>e<<n|t>>>32-n,Qhe=(t,e,n)=>e<<n-32|t>>>64-n,ebe=(t,e,n)=>t<<n-32|e>>>64-n;function tbe(t,e,n,r){const a=(e>>>0)+(r>>>0);return{h:t+n+(a/2**32|0)|0,l:a|0}}const nbe=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),rbe=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,abe=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),ibe=(t,e,n,r,a)=>e+n+r+a+(t/2**32|0)|0,sbe=(t,e,n,r,a)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(a>>>0),obe=(t,e,n,r,a,i)=>e+n+r+a+i+(t/2**32|0)|0,wt={fromBig:Xj,split:jhe,toBig:Hhe,shrSH:zhe,shrSL:qhe,rotrSH:Khe,rotrSL:Vhe,rotrBH:Whe,rotrBL:Ghe,rotr32H:Yhe,rotr32L:Jhe,rotlSH:Zhe,rotlSL:Xhe,rotlBH:Qhe,rotlBL:ebe,add:tbe,add3L:nbe,add3H:rbe,add4L:abe,add4H:ibe,add5H:obe,add5L:sbe},[cbe,dbe]=wt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),wc=new Uint32Array(80),vc=new Uint32Array(80);let lbe=class extends Uhe{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:a,Ch:i,Cl:s,Dh:o,Dl:c,Eh:d,El:l,Fh:u,Fl:f,Gh:p,Gl:h,Hh:b,Hl:v}=this;return[e,n,r,a,i,s,o,c,d,l,u,f,p,h,b,v]}set(e,n,r,a,i,s,o,c,d,l,u,f,p,h,b,v){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=a|0,this.Ch=i|0,this.Cl=s|0,this.Dh=o|0,this.Dl=c|0,this.Eh=d|0,this.El=l|0,this.Fh=u|0,this.Fl=f|0,this.Gh=p|0,this.Gl=h|0,this.Hh=b|0,this.Hl=v|0}process(e,n){for(let A=0;A<16;A++,n+=4)wc[A]=e.getUint32(n),vc[A]=e.getUint32(n+=4);for(let A=16;A<80;A++){const N=wc[A-15]|0,R=vc[A-15]|0,B=wt.rotrSH(N,R,1)^wt.rotrSH(N,R,8)^wt.shrSH(N,R,7),F=wt.rotrSL(N,R,1)^wt.rotrSL(N,R,8)^wt.shrSL(N,R,7),I=wc[A-2]|0,P=vc[A-2]|0,$=wt.rotrSH(I,P,19)^wt.rotrBH(I,P,61)^wt.shrSH(I,P,6),M=wt.rotrSL(I,P,19)^wt.rotrBL(I,P,61)^wt.shrSL(I,P,6),y=wt.add4L(F,M,vc[A-7],vc[A-16]),E=wt.add4H(y,B,$,wc[A-7],wc[A-16]);wc[A]=E|0,vc[A]=y|0}let{Ah:r,Al:a,Bh:i,Bl:s,Ch:o,Cl:c,Dh:d,Dl:l,Eh:u,El:f,Fh:p,Fl:h,Gh:b,Gl:v,Hh:m,Hl:T}=this;for(let A=0;A<80;A++){const N=wt.rotrSH(u,f,14)^wt.rotrSH(u,f,18)^wt.rotrBH(u,f,41),R=wt.rotrSL(u,f,14)^wt.rotrSL(u,f,18)^wt.rotrBL(u,f,41),B=u&p^~u&b,F=f&h^~f&v,I=wt.add5L(T,R,F,dbe[A],vc[A]),P=wt.add5H(I,m,N,B,cbe[A],wc[A]),$=I|0,M=wt.rotrSH(r,a,28)^wt.rotrBH(r,a,34)^wt.rotrBH(r,a,39),y=wt.rotrSL(r,a,28)^wt.rotrBL(r,a,34)^wt.rotrBL(r,a,39),E=r&i^r&o^i&o,C=a&s^a&c^s&c;m=b|0,T=v|0,b=p|0,v=h|0,p=u|0,h=f|0,{h:u,l:f}=wt.add(d|0,l|0,P|0,$|0),d=o|0,l=c|0,o=i|0,c=s|0,i=r|0,s=a|0;const g=wt.add3L($,y,C);r=wt.add3H(g,P,M,E),a=g|0}({h:r,l:a}=wt.add(this.Ah|0,this.Al|0,r|0,a|0)),{h:i,l:s}=wt.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:o,l:c}=wt.add(this.Ch|0,this.Cl|0,o|0,c|0),{h:d,l}=wt.add(this.Dh|0,this.Dl|0,d|0,l|0),{h:u,l:f}=wt.add(this.Eh|0,this.El|0,u|0,f|0),{h:p,l:h}=wt.add(this.Fh|0,this.Fl|0,p|0,h|0),{h:b,l:v}=wt.add(this.Gh|0,this.Gl|0,b|0,v|0),{h:m,l:T}=wt.add(this.Hh|0,this.Hl|0,m|0,T|0),this.set(r,a,i,s,o,c,d,l,u,f,p,h,b,v,m,T)}roundClean(){wc.fill(0),vc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const ube=Bhe(()=>new lbe);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $T=BigInt(0),Qj=BigInt(1),fbe=BigInt(2);function LT(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function BT(t){if(!LT(t))throw new Error("Uint8Array expected")}function p9(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const pbe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function FT(t){BT(t);let e="";for(let n=0;n<t.length;n++)e+=pbe[t[n]];return e}function eH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?$T:BigInt("0x"+t)}const oo={_0:48,_9:57,A:65,F:70,a:97,f:102};function IM(t){if(t>=oo._0&&t<=oo._9)return t-oo._0;if(t>=oo.A&&t<=oo.F)return t-(oo.A-10);if(t>=oo.a&&t<=oo.f)return t-(oo.a-10)}function tH(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let a=0,i=0;a<n;a++,i+=2){const s=IM(t.charCodeAt(i)),o=IM(t.charCodeAt(i+1));if(s===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[a]=s*16+o}return r}function hbe(t){return eH(FT(t))}function w2(t){return BT(t),eH(FT(Uint8Array.from(t).reverse()))}function nH(t,e){return tH(t.toString(16).padStart(e*2,"0"))}function ev(t,e){return nH(t,e).reverse()}function co(t,e,n){let r;if(typeof e=="string")try{r=tH(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(LT(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const a=r.length;if(typeof n=="number"&&a!==n)throw new Error(t+" of length "+n+" expected, got "+a);return r}function OM(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];BT(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}const h9=t=>typeof t=="bigint"&&$T<=t;function bbe(t,e,n){return h9(t)&&h9(e)&&h9(n)&&e<=t&&t<n}function vf(t,e,n,r){if(!bbe(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ybe(t){let e;for(e=0;t>$T;t>>=Qj,e+=1);return e}const mbe=t=>(fbe<<BigInt(t-1))-Qj,gbe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||LT(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function UT(t,e,n={}){const r=(a,i,s)=>{const o=gbe[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[a];if(!(s&&c===void 0)&&!o(c,t))throw new Error("param "+String(a)+" is invalid. Expected "+i+", got "+c)};for(const[a,i]of Object.entries(e))r(a,i,!1);for(const[a,i]of Object.entries(n))r(a,i,!0);return t}function MM(t){const e=new WeakMap;return(n,...r)=>{const a=e.get(n);if(a!==void 0)return a;const i=t(n,...r);return e.set(n,i),i}}const M0=BigInt(0),Kn=BigInt(1),z1=BigInt(2),wbe=BigInt(3),tv=BigInt(4),PM=BigInt(5),kM=BigInt(8);function a0(t,e){const n=t%e;return n>=M0?n:e+n}function vbe(t,e,n){if(e<M0)throw new Error("invalid exponent, negatives unsupported");if(n<=M0)throw new Error("invalid modulus");if(n===Kn)return M0;let r=Kn;for(;e>M0;)e&Kn&&(r=r*t%n),t=t*t%n,e>>=Kn;return r}function ts(t,e,n){let r=t;for(;e-- >M0;)r*=r,r%=n;return r}function NM(t,e){if(t===M0)throw new Error("invert: expected non-zero number");if(e<=M0)throw new Error("invert: expected positive modulus, got "+e);let n=a0(t,e),r=e,a=M0,i=Kn;for(;n!==M0;){const s=r/n,o=r%n,c=a-i*s;r=n,n=o,a=i,i=c}if(r!==Kn)throw new Error("invert: does not exist");return a0(a,e)}function Ebe(t){const e=(t-Kn)/z1;let n,r,a;for(n=t-Kn,r=0;n%z1===M0;n/=z1,r++);for(a=z1;a<t&&vbe(a,e,t)!==t-Kn;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(t+Kn)/tv;return function(o,c){const d=o.pow(c,s);if(!o.eql(o.sqr(d),c))throw new Error("Cannot find square root");return d}}const i=(n+Kn)/z1;return function(s,o){if(s.pow(o,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,d=s.pow(s.mul(s.ONE,a),n),l=s.pow(o,i),u=s.pow(o,n);for(;!s.eql(u,s.ONE);){if(s.eql(u,s.ZERO))return s.ZERO;let f=1;for(let h=s.sqr(u);f<c&&!s.eql(h,s.ONE);f++)h=s.sqr(h);const p=s.pow(d,Kn<<BigInt(c-f-1));d=s.sqr(p),l=s.mul(l,p),u=s.mul(u,d),c=f}return l}}function _be(t){if(t%tv===wbe){const e=(t+Kn)/tv;return function(n,r){const a=n.pow(r,e);if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}if(t%kM===PM){const e=(t-PM)/kM;return function(n,r){const a=n.mul(r,z1),i=n.pow(a,e),s=n.mul(r,i),o=n.mul(n.mul(s,z1),i),c=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return Ebe(t)}const Tbe=(t,e)=>(a0(t,e)&Kn)===Kn,xbe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Sbe(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=xbe.reduce((r,a)=>(r[a]="function",r),e);return UT(t,n)}function Abe(t,e,n){if(n<M0)throw new Error("invalid exponent, negatives unsupported");if(n===M0)return t.ONE;if(n===Kn)return e;let r=t.ONE,a=e;for(;n>M0;)n&Kn&&(r=t.mul(r,a)),a=t.sqr(a),n>>=Kn;return r}function Cbe(t,e){const n=new Array(e.length),r=e.reduce((i,s,o)=>t.is0(s)?i:(n[o]=i,t.mul(i,s)),t.ONE),a=t.inv(r);return e.reduceRight((i,s,o)=>t.is0(s)?i:(n[o]=t.mul(i,n[o]),t.mul(i,s)),a),n}function rH(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function aH(t,e,n=!1,r={}){if(t<=M0)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:a,nByteLength:i}=rH(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const o=Object.freeze({ORDER:t,isLE:n,BITS:a,BYTES:i,MASK:mbe(a),ZERO:M0,ONE:Kn,create:c=>a0(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return M0<=c&&c<t},is0:c=>c===M0,isOdd:c=>(c&Kn)===Kn,neg:c=>a0(-c,t),eql:(c,d)=>c===d,sqr:c=>a0(c*c,t),add:(c,d)=>a0(c+d,t),sub:(c,d)=>a0(c-d,t),mul:(c,d)=>a0(c*d,t),pow:(c,d)=>Abe(o,c,d),div:(c,d)=>a0(c*NM(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>NM(c,t),sqrt:r.sqrt||(c=>(s||(s=_be(t)),s(o,c))),invertBatch:c=>Cbe(o,c),cmov:(c,d,l)=>l?d:c,toBytes:c=>n?ev(c,i):nH(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?w2(c):hbe(c)}});return Object.freeze(o)}const RM=BigInt(0),bb=BigInt(1);function b9(t,e){const n=e.negate();return t?n:e}function iH(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function y9(t,e){iH(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function Ibe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function Obe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const m9=new WeakMap,sH=new WeakMap;function g9(t){return sH.get(t)||1}function Mbe(t,e){return{constTimeNegate:b9,hasPrecomputes(n){return g9(n)!==1},unsafeLadder(n,r,a=t.ZERO){let i=n;for(;r>RM;)r&bb&&(a=a.add(i)),i=i.double(),r>>=bb;return a},precomputeWindow(n,r){const{windows:a,windowSize:i}=y9(r,e),s=[];let o=n,c=o;for(let d=0;d<a;d++){c=o,s.push(c);for(let l=1;l<i;l++)c=c.add(o),s.push(c);o=c.double()}return s},wNAF(n,r,a){const{windows:i,windowSize:s}=y9(n,e);let o=t.ZERO,c=t.BASE;const d=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let f=0;f<i;f++){const p=f*s;let h=Number(a&d);a>>=u,h>s&&(h-=l,a+=bb);const b=p,v=p+Math.abs(h)-1,m=f%2!==0,T=h<0;h===0?c=c.add(b9(m,r[b])):o=o.add(b9(T,r[v]))}return{p:o,f:c}},wNAFUnsafe(n,r,a,i=t.ZERO){const{windows:s,windowSize:o}=y9(n,e),c=BigInt(2**n-1),d=2**n,l=BigInt(n);for(let u=0;u<s;u++){const f=u*o;if(a===RM)break;let p=Number(a&c);if(a>>=l,p>o&&(p-=d,a+=bb),p===0)continue;let h=r[f+Math.abs(p)-1];p<0&&(h=h.negate()),i=i.add(h)}return i},getPrecomputes(n,r,a){let i=m9.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&m9.set(r,a(i))),i},wNAFCached(n,r,a){const i=g9(n);return this.wNAF(i,this.getPrecomputes(i,n,a),r)},wNAFCachedUnsafe(n,r,a,i){const s=g9(n);return s===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,n,a),r,i)},setWindowSize(n,r){iH(r,e),sH.set(n,r),m9.delete(n)}}}function Pbe(t,e,n,r){if(Ibe(n,t),Obe(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,i=ybe(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,c=new Array(o+1).fill(a),d=Math.floor((e.BITS-1)/s)*s;let l=a;for(let u=d;u>=0;u-=s){c.fill(a);for(let p=0;p<r.length;p++){const h=r[p],b=Number(h>>BigInt(u)&BigInt(o));c[b]=c[b].add(n[p])}let f=a;for(let p=c.length-1,h=a;p>0;p--)h=h.add(c[p]),f=f.add(h);if(l=l.add(f),u!==0)for(let p=0;p<s;p++)l=l.double()}return l}function kbe(t){return Sbe(t.Fp),UT(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rH(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const xi=BigInt(0),Hr=BigInt(1),yb=BigInt(2),Nbe=BigInt(8),Rbe={zip215:!0};function Dbe(t){const e=kbe(t);return UT(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function $be(t){const e=Dbe(t),{Fp:n,n:r,prehash:a,hash:i,randomBytes:s,nByteLength:o,h:c}=e,d=yb<<BigInt(o*8)-Hr,l=n.create,u=aH(e.n,e.nBitLength),f=e.uvRatio||((g,x)=>{try{return{isValid:!0,value:n.sqrt(g*n.inv(x))}}catch{return{isValid:!1,value:xi}}}),p=e.adjustScalarBytes||(g=>g),h=e.domain||((g,x,O)=>{if(p9("phflag",O),x.length||O)throw new Error("Contexts/pre-hash are not supported");return g});function b(g,x){vf("coordinate "+g,x,xi,d)}function v(g){if(!(g instanceof A))throw new Error("ExtendedPoint expected")}const m=MM((g,x)=>{const{ex:O,ey:S,ez:w}=g,_=g.is0();x==null&&(x=_?Nbe:n.inv(w));const k=l(O*x),L=l(S*x),D=l(w*x);if(_)return{x:xi,y:Hr};if(D!==Hr)throw new Error("invZ was invalid");return{x:k,y:L}}),T=MM(g=>{const{a:x,d:O}=e;if(g.is0())throw new Error("bad point: ZERO");const{ex:S,ey:w,ez:_,et:k}=g,L=l(S*S),D=l(w*w),U=l(_*_),j=l(U*U),H=l(L*x),W=l(U*l(H+D)),K=l(j+l(O*l(L*D)));if(W!==K)throw new Error("bad point: equation left != right (1)");const q=l(S*w),V=l(_*k);if(q!==V)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(x,O,S,w){this.ex=x,this.ey=O,this.ez=S,this.et=w,b("x",x),b("y",O),b("z",S),b("t",w),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(x){if(x instanceof A)throw new Error("extended point not allowed");const{x:O,y:S}=x||{};return b("x",O),b("y",S),new A(O,S,Hr,l(O*S))}static normalizeZ(x){const O=n.invertBatch(x.map(S=>S.ez));return x.map((S,w)=>S.toAffine(O[w])).map(A.fromAffine)}static msm(x,O){return Pbe(A,u,x,O)}_setWindowSize(x){B.setWindowSize(this,x)}assertValidity(){T(this)}equals(x){v(x);const{ex:O,ey:S,ez:w}=this,{ex:_,ey:k,ez:L}=x,D=l(O*L),U=l(_*w),j=l(S*L),H=l(k*w);return D===U&&j===H}is0(){return this.equals(A.ZERO)}negate(){return new A(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){const{a:x}=e,{ex:O,ey:S,ez:w}=this,_=l(O*O),k=l(S*S),L=l(yb*l(w*w)),D=l(x*_),U=O+S,j=l(l(U*U)-_-k),H=D+k,W=H-L,K=D-k,q=l(j*W),V=l(H*K),G=l(j*K),J=l(W*H);return new A(q,V,J,G)}add(x){v(x);const{a:O,d:S}=e,{ex:w,ey:_,ez:k,et:L}=this,{ex:D,ey:U,ez:j,et:H}=x;if(O===BigInt(-1)){const ue=l((_-w)*(U+D)),Oe=l((_+w)*(U-D)),Re=l(Oe-ue);if(Re===xi)return this.double();const pe=l(k*yb*H),Ze=l(L*yb*j),je=Ze+pe,it=Oe+ue,De=Ze-pe,Ke=l(je*Re),Xe=l(it*De),mt=l(je*De),He=l(Re*it);return new A(Ke,Xe,He,mt)}const W=l(w*D),K=l(_*U),q=l(L*S*H),V=l(k*j),G=l((w+_)*(D+U)-W-K),J=V-q,z=V+q,Y=l(K-O*W),X=l(G*J),ae=l(z*Y),ie=l(G*Y),oe=l(J*z);return new A(X,ae,oe,ie)}subtract(x){return this.add(x.negate())}wNAF(x){return B.wNAFCached(this,x,A.normalizeZ)}multiply(x){const O=x;vf("scalar",O,Hr,r);const{p:S,f:w}=this.wNAF(O);return A.normalizeZ([S,w])[0]}multiplyUnsafe(x,O=A.ZERO){const S=x;return vf("scalar",S,xi,r),S===xi?R:this.is0()||S===Hr?this:B.wNAFCachedUnsafe(this,S,A.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return B.unsafeLadder(this,r).is0()}toAffine(x){return m(this,x)}clearCofactor(){const{h:x}=e;return x===Hr?this:this.multiplyUnsafe(x)}static fromHex(x,O=!1){const{d:S,a:w}=e,_=n.BYTES;x=co("pointHex",x,_),p9("zip215",O);const k=x.slice(),L=x[_-1];k[_-1]=L&-129;const D=w2(k),U=O?d:n.ORDER;vf("pointHex.y",D,xi,U);const j=l(D*D),H=l(j-Hr),W=l(S*j-w);let{isValid:K,value:q}=f(H,W);if(!K)throw new Error("Point.fromHex: invalid y coordinate");const V=(q&Hr)===Hr,G=(L&128)!==0;if(!O&&q===xi&&G)throw new Error("Point.fromHex: x=0 and x_0=1");return G!==V&&(q=l(-q)),A.fromAffine({x:q,y:D})}static fromPrivateKey(x){return P(x).point}toRawBytes(){const{x,y:O}=this.toAffine(),S=ev(O,n.BYTES);return S[S.length-1]|=x&Hr?128:0,S}toHex(){return FT(this.toRawBytes())}}A.BASE=new A(e.Gx,e.Gy,Hr,l(e.Gx*e.Gy)),A.ZERO=new A(xi,Hr,Hr,xi);const{BASE:N,ZERO:R}=A,B=Mbe(A,o*8);function F(g){return a0(g,r)}function I(g){return F(w2(g))}function P(g){const x=n.BYTES;g=co("private key",g,x);const O=co("hashed private key",i(g),2*x),S=p(O.slice(0,x)),w=O.slice(x,2*x),_=I(S),k=N.multiply(_),L=k.toRawBytes();return{head:S,prefix:w,scalar:_,point:k,pointBytes:L}}function $(g){return P(g).pointBytes}function M(g=new Uint8Array,...x){const O=OM(...x);return I(i(h(O,co("context",g),!!a)))}function y(g,x,O={}){g=co("message",g),a&&(g=a(g));const{prefix:S,scalar:w,pointBytes:_}=P(x),k=M(O.context,S,g),L=N.multiply(k).toRawBytes(),D=M(O.context,L,_,g),U=F(k+D*w);vf("signature.s",U,xi,r);const j=OM(L,ev(U,n.BYTES));return co("result",j,n.BYTES*2)}const E=Rbe;function C(g,x,O,S=E){const{context:w,zip215:_}=S,k=n.BYTES;g=co("signature",g,2*k),x=co("message",x),O=co("publicKey",O,k),_!==void 0&&p9("zip215",_),a&&(x=a(x));const L=w2(g.slice(k,2*k));let D,U,j;try{D=A.fromHex(O,_),U=A.fromHex(g.slice(0,k),_),j=N.multiplyUnsafe(L)}catch{return!1}if(!_&&D.isSmallOrder())return!1;const H=M(w,U.toRawBytes(),D.toRawBytes(),x);return U.add(D.multiplyUnsafe(H)).subtract(j).clearCofactor().equals(A.ZERO)}return N._setWindowSize(8),{CURVE:e,getPublicKey:$,sign:y,verify:C,ExtendedPoint:A,utils:{getExtendedPublicKey:P,randomPrivateKey:()=>s(n.BYTES),precompute(g=8,x=A.BASE){return x._setWindowSize(g),x.multiply(BigInt(3)),x}}}}BigInt(0),BigInt(1);const jT=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),DM=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Lbe=BigInt(1),$M=BigInt(2);BigInt(3);const Bbe=BigInt(5),Fbe=BigInt(8);function Ube(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),a=BigInt(80),i=jT,s=t*t%i*t%i,o=ts(s,$M,i)*s%i,c=ts(o,Lbe,i)*t%i,d=ts(c,Bbe,i)*c%i,l=ts(d,e,i)*d%i,u=ts(l,n,i)*l%i,f=ts(u,r,i)*u%i,p=ts(f,a,i)*f%i,h=ts(p,a,i)*f%i,b=ts(h,e,i)*d%i;return{pow_p_5_8:ts(b,$M,i)*t%i,b2:s}}function jbe(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Hbe(t,e){const n=jT,r=a0(e*e*e,n),a=a0(r*r*e,n),i=Ube(t*a).pow_p_5_8;let s=a0(t*r*i,n);const o=a0(e*s*s,n),c=s,d=a0(s*DM,n),l=o===t,u=o===a0(-t,n),f=o===a0(-t*DM,n);return l&&(s=c),(u||f)&&(s=d),Tbe(s,n)&&(s=a0(-s,n)),{isValid:l||u,value:s}}const zbe=aH(jT,void 0,!0),qbe={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:zbe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Fbe,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:ube,randomBytes:Zj,adjustScalarBytes:jbe,uvRatio:Hbe},oH=$be(qbe),Kbe="EdDSA",Vbe="JWT",T8=".",E3="base64url",cH="utf8",dH="utf8",Wbe=":",Gbe="did",Ybe="key",LM="base58btc",Jbe="z",Zbe="K36",Xbe=32;function HT(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function lH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?HT(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function uH(t,e){e||(e=t.reduce((a,i)=>a+i.length,0));const n=lH(e);let r=0;for(const a of t)n.set(a,r),r+=a.length;return HT(n)}function Qbe(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var a=0;a<t.length;a++){var i=t.charAt(a),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=a}var o=t.length,c=t.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var b=0,v=0,m=0,T=h.length;m!==T&&h[m]===0;)m++,b++;for(var A=(T-m)*l+1>>>0,N=new Uint8Array(A);m!==T;){for(var R=h[m],B=0,F=A-1;(R!==0||B<v)&&F!==-1;F--,B++)R+=256*N[F]>>>0,N[F]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");v=B,m++}for(var I=A-v;I!==A&&N[I]===0;)I++;for(var P=c.repeat(b);I<A;++I)P+=t.charAt(N[I]);return P}function f(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var b=0;if(h[b]!==" "){for(var v=0,m=0;h[b]===c;)v++,b++;for(var T=(h.length-b)*d+1>>>0,A=new Uint8Array(T);h[b];){var N=n[h.charCodeAt(b)];if(N===255)return;for(var R=0,B=T-1;(N!==0||R<m)&&B!==-1;B--,R++)N+=o*A[B]>>>0,A[B]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=R,b++}if(h[b]!==" "){for(var F=T-m;F!==T&&A[F]===0;)F++;for(var I=new Uint8Array(v+(T-F)),P=v;F!==T;)I[P++]=A[F++];return I}}}function p(h){var b=f(h);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:f,decode:p}}var e2e=Qbe,t2e=e2e;const fH=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},n2e=t=>new TextEncoder().encode(t),r2e=t=>new TextDecoder().decode(t);let a2e=class{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},i2e=class{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return pH(this,e)}},s2e=class{constructor(e){this.decoders=e}or(e){return pH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const pH=(t,e)=>new s2e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let o2e=class{constructor(e,n,r,a){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=a,this.encoder=new a2e(e,n,r),this.decoder=new i2e(e,n,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const _3=({name:t,prefix:e,encode:n,decode:r})=>new o2e(t,e,n,r),Zp=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:a}=t2e(n,e);return _3({prefix:t,name:e,encode:r,decode:i=>fH(a(i))})},c2e=(t,e,n,r)=>{const a={};for(let l=0;l<e.length;++l)a[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let o=0,c=0,d=0;for(let l=0;l<i;++l){const u=a[t[l]];if(u===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|u,o+=n,o>=8&&(o-=8,s[d++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return s},d2e=(t,e,n)=>{const r=e[e.length-1]==="=",a=(1<<n)-1;let i="",s=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],s+=8;s>n;)s-=n,i+=e[a&o>>s];if(s&&(i+=e[a&o<<n-s]),r)for(;i.length*n&7;)i+="=";return i},X0=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>_3({prefix:e,name:t,encode(a){return d2e(a,r,n)},decode(a){return c2e(a,r,n,t)}}),l2e=_3({prefix:"\0",name:"identity",encode:t=>r2e(t),decode:t=>n2e(t)});var u2e=Object.freeze({__proto__:null,identity:l2e});const f2e=X0({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var p2e=Object.freeze({__proto__:null,base2:f2e});const h2e=X0({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var b2e=Object.freeze({__proto__:null,base8:h2e});const y2e=Zp({prefix:"9",name:"base10",alphabet:"0123456789"});var m2e=Object.freeze({__proto__:null,base10:y2e});const g2e=X0({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),w2e=X0({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var v2e=Object.freeze({__proto__:null,base16:g2e,base16upper:w2e});const E2e=X0({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),_2e=X0({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),T2e=X0({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),x2e=X0({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),S2e=X0({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),A2e=X0({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),C2e=X0({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),I2e=X0({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),O2e=X0({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var M2e=Object.freeze({__proto__:null,base32:E2e,base32upper:_2e,base32pad:T2e,base32padupper:x2e,base32hex:S2e,base32hexupper:A2e,base32hexpad:C2e,base32hexpadupper:I2e,base32z:O2e});const P2e=Zp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),k2e=Zp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var N2e=Object.freeze({__proto__:null,base36:P2e,base36upper:k2e});const R2e=Zp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),D2e=Zp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $2e=Object.freeze({__proto__:null,base58btc:R2e,base58flickr:D2e});const L2e=X0({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),B2e=X0({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),F2e=X0({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),U2e=X0({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var j2e=Object.freeze({__proto__:null,base64:L2e,base64pad:B2e,base64url:F2e,base64urlpad:U2e});const hH=Array.from(""),H2e=hH.reduce((t,e,n)=>(t[n]=e,t),[]),z2e=hH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function q2e(t){return t.reduce((e,n)=>(e+=H2e[n],e),"")}function K2e(t){const e=[];for(const n of t){const r=z2e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const V2e=_3({prefix:"",name:"base256emoji",encode:q2e,decode:K2e});var W2e=Object.freeze({__proto__:null,base256emoji:V2e}),G2e=bH,BM=128,Y2e=127,J2e=~Y2e,Z2e=Math.pow(2,31);function bH(t,e,n){e=e||[],n=n||0;for(var r=n;t>=Z2e;)e[n++]=t&255|BM,t/=128;for(;t&J2e;)e[n++]=t&255|BM,t>>>=7;return e[n]=t|0,bH.bytes=n-r+1,e}var X2e=nv,Q2e=128,FM=127;function nv(t,r){var n=0,r=r||0,a=0,i=r,s,o=t.length;do{if(i>=o)throw nv.bytes=0,new RangeError("Could not decode varint");s=t[i++],n+=a<28?(s&FM)<<a:(s&FM)*Math.pow(2,a),a+=7}while(s>=Q2e);return nv.bytes=i-r,n}var e8e=Math.pow(2,7),t8e=Math.pow(2,14),n8e=Math.pow(2,21),r8e=Math.pow(2,28),a8e=Math.pow(2,35),i8e=Math.pow(2,42),s8e=Math.pow(2,49),o8e=Math.pow(2,56),c8e=Math.pow(2,63),d8e=function(t){return t<e8e?1:t<t8e?2:t<n8e?3:t<r8e?4:t<a8e?5:t<i8e?6:t<s8e?7:t<o8e?8:t<c8e?9:10},l8e={encode:G2e,decode:X2e,encodingLength:d8e},yH=l8e;const UM=(t,e,n=0)=>(yH.encode(t,e,n),e),jM=t=>yH.encodingLength(t),rv=(t,e)=>{const n=e.byteLength,r=jM(t),a=r+jM(n),i=new Uint8Array(a+n);return UM(t,i,0),UM(n,i,r),i.set(e,a),new u8e(t,n,e,i)};let u8e=class{constructor(e,n,r,a){this.code=e,this.size=n,this.digest=r,this.bytes=a}};const mH=({name:t,code:e,encode:n})=>new f8e(t,e,n);let f8e=class{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?rv(this.code,n):n.then(r=>rv(this.code,r))}else throw Error("Unknown type, must be binary type")}};const gH=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),p8e=mH({name:"sha2-256",code:18,encode:gH("SHA-256")}),h8e=mH({name:"sha2-512",code:19,encode:gH("SHA-512")});var b8e=Object.freeze({__proto__:null,sha256:p8e,sha512:h8e});const wH=0,y8e="identity",vH=fH,m8e=t=>rv(wH,vH(t)),g8e={code:wH,name:y8e,encode:vH,digest:m8e};var w8e=Object.freeze({__proto__:null,identity:g8e});new TextEncoder,new TextDecoder;const HM={...u2e,...p2e,...b2e,...m2e,...v2e,...M2e,...N2e,...$2e,...j2e,...W2e};({...b8e,...w8e});function EH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const zM=EH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),w9=EH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=lH(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),_H={utf8:zM,"utf-8":zM,hex:HM.base16,latin1:w9,ascii:w9,binary:w9,...HM};function T3(t,e="utf8"){const n=_H[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function Au(t,e="utf8"){const n=_H[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?HT(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function qM(t){return W6(T3(Au(t,E3),cH))}function x8(t){return T3(Au(kd(t),cH),E3)}function TH(t){const e=Au(Zbe,LM),n=Jbe+T3(uH([e,t]),LM);return[Gbe,Ybe,n].join(Wbe)}function v8e(t){return T3(t,E3)}function E8e(t){return Au(t,E3)}function _8e(t){return Au([x8(t.header),x8(t.payload)].join(T8),dH)}function T8e(t){return[x8(t.header),x8(t.payload),v8e(t.signature)].join(T8)}function av(t){const e=t.split(T8),n=qM(e[0]),r=qM(e[1]),a=E8e(e[2]),i=Au(e.slice(0,2).join(T8),dH);return{header:n,payload:r,signature:a,data:i}}function KM(t=Zj(Xbe)){const e=oH.getPublicKey(t);return{secretKey:uH([t,e]),publicKey:e}}async function x8e(t,e,n,r,a=ke.fromMiliseconds(Date.now())){const i={alg:Kbe,typ:Vbe},s=TH(r.publicKey),o=a+n,c={iss:s,sub:t,aud:e,iat:a,exp:o},d=_8e({header:i,payload:c}),l=oH.sign(d,r.secretKey.slice(0,32));return T8e({header:i,payload:c,signature:l})}var VM=function(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,i;r<a;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},S8e=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),A8e=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),C8e=function(){function t(e,n,r,a){this.name=e,this.version=n,this.os=r,this.bot=a,this.type="bot-device"}return t}(),I8e=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),O8e=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),M8e=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,P8e=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,WM=3,k8e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",M8e]],GM=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function N8e(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new O8e:typeof navigator<"u"?D8e(navigator.userAgent):L8e()}function R8e(t){return t!==""&&k8e.reduce(function(e,n){var r=n[0],a=n[1];if(e)return e;var i=a.exec(t);return!!i&&[r,i]},!1)}function D8e(t){var e=R8e(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new I8e;var a=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);a?a.length<WM&&(a=VM(VM([],a,!0),B8e(WM-a.length),!0)):a=[];var i=a.join("."),s=$8e(t),o=P8e.exec(t);return o&&o[1]?new C8e(n,i,s,o[1]):new S8e(n,i,s)}function $8e(t){for(var e=0,n=GM.length;e<n;e++){var r=GM[e],a=r[0],i=r[1],s=i.exec(t);if(s)return a}return null}function L8e(){var t=typeof process<"u"&&process.version;return t?new A8e(process.version.slice(1)):null}function B8e(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}var bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.getLocalStorage=bn.getLocalStorageOrThrow=bn.getCrypto=bn.getCryptoOrThrow=xH=bn.getLocation=bn.getLocationOrThrow=zT=bn.getNavigator=bn.getNavigatorOrThrow=Nd=bn.getDocument=bn.getDocumentOrThrow=bn.getFromWindowOrThrow=bn.getFromWindow=void 0;function ol(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}bn.getFromWindow=ol;function Cu(t){const e=ol(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}bn.getFromWindowOrThrow=Cu;function F8e(){return Cu("document")}bn.getDocumentOrThrow=F8e;function U8e(){return ol("document")}var Nd=bn.getDocument=U8e;function j8e(){return Cu("navigator")}bn.getNavigatorOrThrow=j8e;function H8e(){return ol("navigator")}var zT=bn.getNavigator=H8e;function z8e(){return Cu("location")}bn.getLocationOrThrow=z8e;function q8e(){return ol("location")}var xH=bn.getLocation=q8e;function K8e(){return Cu("crypto")}bn.getCryptoOrThrow=K8e;function V8e(){return ol("crypto")}bn.getCrypto=V8e;function W8e(){return Cu("localStorage")}bn.getLocalStorageOrThrow=W8e;function G8e(){return ol("localStorage")}bn.getLocalStorage=G8e;var qT={};Object.defineProperty(qT,"__esModule",{value:!0});var SH=qT.getWindowMetadata=void 0;const YM=bn;function Y8e(){let t,e;try{t=YM.getDocumentOrThrow(),e=YM.getLocationOrThrow()}catch{return null}function n(){const u=t.getElementsByTagName("link"),f=[];for(let p=0;p<u.length;p++){const h=u[p],b=h.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const v=h.getAttribute("href");if(v)if(v.toLowerCase().indexOf("https:")===-1&&v.toLowerCase().indexOf("http:")===-1&&v.indexOf("//")!==0){let m=e.protocol+"//"+e.host;if(v.indexOf("/")===0)m+=v;else{const T=e.pathname.split("/");T.pop();const A=T.join("/");m+=A+"/"+v}f.push(m)}else if(v.indexOf("//")===0){const m=e.protocol+v;f.push(m)}else f.push(v)}}return f}function r(...u){const f=t.getElementsByTagName("meta");for(let p=0;p<f.length;p++){const h=f[p],b=["itemprop","property","name"].map(v=>h.getAttribute(v)).filter(v=>v?u.includes(v):!1);if(b.length&&b){const v=h.getAttribute("content");if(v)return v}}return""}function a(){let u=r("name","og:site_name","og:title","twitter:title");return u||(u=t.title),u}function i(){return r("description","og:description","twitter:description","keywords")}const s=a(),o=i(),c=e.origin,d=n();return{description:o,url:c,icons:d,name:s}}SH=qT.getWindowMetadata=Y8e;const J8e="1.0.8";let da=class iv extends Error{constructor(e,n={}){var s;const r=n.cause instanceof iv?n.cause.details:(s=n.cause)!=null&&s.message?n.cause.message:n.details,a=n.cause instanceof iv&&n.cause.docsPath||n.docsPath,i=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...a?[`Docs: https://abitype.dev${a}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${J8e}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=a,this.metaMessages=n.metaMessages,this.shortMessage=e}};function rc(t,e){const n=t.exec(e);return n==null?void 0:n.groups}const AH=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,CH=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,IH=/^\(.+?\).*?$/,JM=/^tuple(?<array>(\[(\d*)\])*)$/;function sv(t){let e=t.type;if(JM.test(t.type)&&"components"in t){e="(";const n=t.components.length;for(let a=0;a<n;a++){const i=t.components[a];e+=sv(i),a<n-1&&(e+=", ")}const r=rc(JM,t.type);return e+=`)${(r==null?void 0:r.array)??""}`,sv({...t,type:e})}return"indexed"in t&&t.indexed&&(e=`${e} indexed`),t.name?`${e} ${t.name}`:e}function Ef(t){let e="";const n=t.length;for(let r=0;r<n;r++){const a=t[r];e+=sv(a),r!==n-1&&(e+=", ")}return e}function S8(t){var e;return t.type==="function"?`function ${t.name}(${Ef(t.inputs)})${t.stateMutability&&t.stateMutability!=="nonpayable"?` ${t.stateMutability}`:""}${(e=t.outputs)!=null&&e.length?` returns (${Ef(t.outputs)})`:""}`:t.type==="event"?`event ${t.name}(${Ef(t.inputs)})`:t.type==="error"?`error ${t.name}(${Ef(t.inputs)})`:t.type==="constructor"?`constructor(${Ef(t.inputs)})${t.stateMutability==="payable"?" payable":""}`:t.type==="fallback"?`fallback() external${t.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const OH=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Z8e(t){return OH.test(t)}function X8e(t){return rc(OH,t)}const MH=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function Q8e(t){return MH.test(t)}function eye(t){return rc(MH,t)}const PH=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function tye(t){return PH.test(t)}function nye(t){return rc(PH,t)}const kH=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function x3(t){return kH.test(t)}function rye(t){return rc(kH,t)}const NH=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function aye(t){return NH.test(t)}function iye(t){return rc(NH,t)}const RH=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function sye(t){return RH.test(t)}function oye(t){return rc(RH,t)}const cye=/^receive\(\) external payable$/;function dye(t){return cye.test(t)}const ZM=new Set(["memory","indexed","storage","calldata"]),lye=new Set(["indexed"]),ov=new Set(["calldata","memory","storage"]);class uye extends da{constructor({signature:e}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class fye extends da{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class pye extends da{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class hye extends da{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class bye extends da{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class yye extends da{constructor({param:e,name:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class mye extends da{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class gye extends da{constructor({param:e,type:n,modifier:r}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class wye extends da{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class Iu extends da{constructor({signature:e,type:n}){super(`Invalid ${n} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class vye extends da{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Eye extends da{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class _ye extends da{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Tye extends da{constructor({current:e,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function xye(t,e,n){let r="";if(n)for(const a of Object.entries(n)){if(!a)continue;let i="";for(const s of a[1])i+=`[${s.type}${s.name?`:${s.name}`:""}]`;r+=`(${a[0]}{${i}})`}return e?`${e}:${t}${r}`:t}const v9=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function cv(t,e={}){if(tye(t))return Sye(t,e);if(Q8e(t))return Aye(t,e);if(Z8e(t))return Cye(t,e);if(aye(t))return Iye(t,e);if(sye(t))return Oye(t);if(dye(t))return{type:"receive",stateMutability:"payable"};throw new vye({signature:t})}function Sye(t,e={}){const n=nye(t);if(!n)throw new Iu({signature:t,type:"function"});const r=Oa(n.parameters),a=[],i=r.length;for(let o=0;o<i;o++)a.push(Yo(r[o],{modifiers:ov,structs:e,type:"function"}));const s=[];if(n.returns){const o=Oa(n.returns),c=o.length;for(let d=0;d<c;d++)s.push(Yo(o[d],{modifiers:ov,structs:e,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:a,outputs:s}}function Aye(t,e={}){const n=eye(t);if(!n)throw new Iu({signature:t,type:"event"});const r=Oa(n.parameters),a=[],i=r.length;for(let s=0;s<i;s++)a.push(Yo(r[s],{modifiers:lye,structs:e,type:"event"}));return{name:n.name,type:"event",inputs:a}}function Cye(t,e={}){const n=X8e(t);if(!n)throw new Iu({signature:t,type:"error"});const r=Oa(n.parameters),a=[],i=r.length;for(let s=0;s<i;s++)a.push(Yo(r[s],{structs:e,type:"error"}));return{name:n.name,type:"error",inputs:a}}function Iye(t,e={}){const n=iye(t);if(!n)throw new Iu({signature:t,type:"constructor"});const r=Oa(n.parameters),a=[],i=r.length;for(let s=0;s<i;s++)a.push(Yo(r[s],{structs:e,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:a}}function Oye(t){const e=oye(t);if(!e)throw new Iu({signature:t,type:"fallback"});return{type:"fallback",stateMutability:e.stateMutability??"nonpayable"}}const Mye=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Pye=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,kye=/^u?int$/;function Yo(t,e){var u,f;const n=xye(t,e==null?void 0:e.type,e==null?void 0:e.structs);if(v9.has(n))return v9.get(n);const r=IH.test(t),a=rc(r?Pye:Mye,t);if(!a)throw new bye({param:t});if(a.name&&Rye(a.name))throw new yye({param:t,name:a.name});const i=a.name?{name:a.name}:{},s=a.modifier==="indexed"?{indexed:!0}:{},o=(e==null?void 0:e.structs)??{};let c,d={};if(r){c="tuple";const p=Oa(a.type),h=[],b=p.length;for(let v=0;v<b;v++)h.push(Yo(p[v],{structs:o}));d={components:h}}else if(a.type in o)c="tuple",d={components:o[a.type]};else if(kye.test(a.type))c=`${a.type}256`;else if(c=a.type,(e==null?void 0:e.type)!=="struct"&&!DH(c))throw new pye({type:c});if(a.modifier){if(!((f=(u=e==null?void 0:e.modifiers)==null?void 0:u.has)!=null&&f.call(u,a.modifier)))throw new mye({param:t,type:e==null?void 0:e.type,modifier:a.modifier});if(ov.has(a.modifier)&&!Dye(c,!!a.array))throw new gye({param:t,type:e==null?void 0:e.type,modifier:a.modifier})}const l={type:`${c}${a.array??""}`,...i,...s,...d};return v9.set(n,l),l}function Oa(t,e=[],n="",r=0){const a=t.trim().length;for(let i=0;i<a;i++){const s=t[i],o=t.slice(i+1);switch(s){case",":return r===0?Oa(o,[...e,n.trim()]):Oa(o,e,`${n}${s}`,r);case"(":return Oa(o,e,`${n}${s}`,r+1);case")":return Oa(o,e,`${n}${s}`,r-1);default:return Oa(o,e,`${n}${s}`,r)}}if(n==="")return e;if(r!==0)throw new Tye({current:n,depth:r});return e.push(n.trim()),e}function DH(t){return t==="address"||t==="bool"||t==="function"||t==="string"||AH.test(t)||CH.test(t)}const Nye=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Rye(t){return t==="address"||t==="bool"||t==="function"||t==="string"||t==="tuple"||AH.test(t)||CH.test(t)||Nye.test(t)}function Dye(t,e){return e||t==="bytes"||t==="string"||t==="tuple"}function KT(t){const e={},n=t.length;for(let s=0;s<n;s++){const o=t[s];if(!x3(o))continue;const c=rye(o);if(!c)throw new Iu({signature:o,type:"struct"});const d=c.properties.split(";"),l=[],u=d.length;for(let f=0;f<u;f++){const h=d[f].trim();if(!h)continue;const b=Yo(h,{type:"struct"});l.push(b)}if(!l.length)throw new Eye({signature:o});e[c.name]=l}const r={},a=Object.entries(e),i=a.length;for(let s=0;s<i;s++){const[o,c]=a[s];r[o]=$H(c,e)}return r}const $ye=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function $H(t,e,n=new Set){const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(IH.test(s.type))r.push(s);else{const c=rc($ye,s.type);if(!(c!=null&&c.type))throw new wye({abiParameter:s});const{array:d,type:l}=c;if(l in e){if(n.has(l))throw new _ye({type:l});r.push({...s,type:`tuple${d??""}`,components:$H(e[l]??[],e,new Set([...n,l]))})}else if(DH(l))r.push(s);else throw new fye({type:l})}}return r}function VT(t){const e=KT(t),n=[],r=t.length;for(let a=0;a<r;a++){const i=t[a];x3(i)||n.push(cv(i,e))}return n}function XM(t){let e;if(typeof t=="string")e=cv(t);else{const n=KT(t),r=t.length;for(let a=0;a<r;a++){const i=t[a];if(!x3(i)){e=cv(i,n);break}}}if(!e)throw new uye({signature:t});return e}function LH(t){const e=[];if(typeof t=="string"){const n=Oa(t),r=n.length;for(let a=0;a<r;a++)e.push(Yo(n[a],{modifiers:ZM}))}else{const n=KT(t),r=t.length;for(let a=0;a<r;a++){const i=t[a];if(x3(i))continue;const s=Oa(i),o=s.length;for(let c=0;c<o;c++)e.push(Yo(s[c],{modifiers:ZM,structs:n}))}}if(e.length===0)throw new hye({params:t});return e}function z5(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function QM(t){return z5(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const BH="2.23.2";let _f={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${BH}`},S3=class dv extends Error{constructor(e,n={}){var o;const r=(()=>{var c;return n.cause instanceof dv?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),a=n.cause instanceof dv&&n.cause.docsPath||n.docsPath,i=(o=_f.getDocsUrl)==null?void 0:o.call(_f,{...n,docsPath:a}),s=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],..._f.version?[`Version: ${_f.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=a,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=BH}walk(e){return FH(this,e)}};function FH(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?FH(t.cause,e):e?null:t}let UH=class extends S3{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};function Ou(t,{dir:e,size:n=32}={}){return typeof t=="string"?Lye(t,{dir:e,size:n}):Bye(t,{dir:e,size:n})}function Lye(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new UH({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function Bye(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new UH({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let a=0;a<n;a++){const i=e==="right";r[i?a:n-a-1]=t[i?a:t.length-a-1]}return r}let Fye=class extends S3{constructor({max:e,min:n,signed:r,size:a,value:i}){super(`Number "${i}" is not in safe ${a?`${a*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},Uye=class extends S3{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Mu(t,{size:e}){if(QM(t)>e)throw new Uye({givenSize:QM(t),maxSize:e})}function lv(t,e={}){const{signed:n}=e;e.size&&Mu(t,{size:e.size});const r=BigInt(t);if(!n)return r;const a=(t.length-2)/2,i=(1n<<BigInt(a)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(a*2,"f")}`)-1n}function jye(t,e={}){return Number(lv(t,e))}const Hye=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function uv(t,e={}){return typeof t=="number"||typeof t=="bigint"?HH(t,e):typeof t=="string"?Kye(t,e):typeof t=="boolean"?zye(t,e):jH(t,e)}function zye(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Mu(n,{size:e.size}),Ou(n,{size:e.size})):n}function jH(t,e={}){let n="";for(let a=0;a<t.length;a++)n+=Hye[t[a]];const r=`0x${n}`;return typeof e.size=="number"?(Mu(r,{size:e.size}),Ou(r,{dir:"right",size:e.size})):r}function HH(t,e={}){const{signed:n,size:r}=e,a=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<s){const c=typeof t=="bigint"?"n":"";throw new Fye({max:i?`${i}${c}`:void 0,min:`${s}${c}`,signed:n,size:r,value:`${t}${c}`})}const o=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Ou(o,{size:r}):o}const qye=new TextEncoder;function Kye(t,e={}){const n=qye.encode(t);return jH(n,e)}const Vye=new TextEncoder;function Wye(t,e={}){return typeof t=="number"||typeof t=="bigint"?Yye(t,e):typeof t=="boolean"?Gye(t,e):z5(t)?zH(t,e):qH(t,e)}function Gye(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Mu(n,{size:e.size}),Ou(n,{size:e.size})):n}const lo={zero:48,nine:57,A:65,F:70,a:97,f:102};function eP(t){if(t>=lo.zero&&t<=lo.nine)return t-lo.zero;if(t>=lo.A&&t<=lo.F)return t-(lo.A-10);if(t>=lo.a&&t<=lo.f)return t-(lo.a-10)}function zH(t,e={}){let n=t;e.size&&(Mu(n,{size:e.size}),n=Ou(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const a=r.length/2,i=new Uint8Array(a);for(let s=0,o=0;s<a;s++){const c=eP(r.charCodeAt(o++)),d=eP(r.charCodeAt(o++));if(c===void 0||d===void 0)throw new S3(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[s]=c*16+d}return i}function Yye(t,e){const n=HH(t,e);return zH(n)}function qH(t,e={}){const n=Vye.encode(t);return typeof e.size=="number"?(Mu(n,{size:e.size}),Ou(n,{dir:"right",size:e.size})):n}function A8(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Jye(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function A3(t,...e){if(!Jye(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function lze(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");A8(t.outputLen),A8(t.blockLen)}function tP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Zye(t,e){A3(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const mb=BigInt(2**32-1),nP=BigInt(32);function Xye(t,e=!1){return e?{h:Number(t&mb),l:Number(t>>nP&mb)}:{h:Number(t>>nP&mb)|0,l:Number(t&mb)|0}}function Qye(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:i,l:s}=Xye(t[a],e);[n[a],r[a]]=[i,s]}return[n,r]}const e3e=(t,e,n)=>t<<n|e>>>32-n,t3e=(t,e,n)=>e<<n|t>>>32-n,n3e=(t,e,n)=>e<<n-32|t>>>64-n,r3e=(t,e,n)=>t<<n-32|e>>>64-n,Ml=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function a3e(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function uze(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function fze(t,e){return t<<32-e|t>>>e}const rP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function i3e(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function aP(t){for(let e=0;e<t.length;e++)t[e]=i3e(t[e])}function s3e(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function KH(t){return typeof t=="string"&&(t=s3e(t)),A3(t),t}function pze(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];A3(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}class o3e{clone(){return this._cloneInto()}}function c3e(t){const e=r=>t().update(KH(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function hze(t=32){if(Ml&&typeof Ml.getRandomValues=="function")return Ml.getRandomValues(new Uint8Array(t));if(Ml&&typeof Ml.randomBytes=="function")return Ml.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const VH=[],WH=[],GH=[],d3e=BigInt(0),Tf=BigInt(1),l3e=BigInt(2),u3e=BigInt(7),f3e=BigInt(256),p3e=BigInt(113);for(let t=0,e=Tf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],VH.push(2*(5*r+n)),WH.push((t+1)*(t+2)/2%64);let a=d3e;for(let i=0;i<7;i++)e=(e<<Tf^(e>>u3e)*p3e)%f3e,e&l3e&&(a^=Tf<<(Tf<<BigInt(i))-Tf);GH.push(a)}const[h3e,b3e]=Qye(GH,!0),iP=(t,e,n)=>n>32?n3e(t,e,n):e3e(t,e,n),sP=(t,e,n)=>n>32?r3e(t,e,n):t3e(t,e,n);function y3e(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const o=(s+8)%10,c=(s+2)%10,d=n[c],l=n[c+1],u=iP(d,l,1)^n[o],f=sP(d,l,1)^n[o+1];for(let p=0;p<50;p+=10)t[s+p]^=u,t[s+p+1]^=f}let a=t[2],i=t[3];for(let s=0;s<24;s++){const o=WH[s],c=iP(a,i,o),d=sP(a,i,o),l=VH[s];a=t[l],i=t[l+1],t[l]=c,t[l+1]=d}for(let s=0;s<50;s+=10){for(let o=0;o<10;o++)n[o]=t[s+o];for(let o=0;o<10;o++)t[s+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=h3e[r],t[1]^=b3e[r]}n.fill(0)}class WT extends o3e{constructor(e,n,r,a=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=a,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,A8(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=a3e(this.state)}keccak(){rP||aP(this.state32),y3e(this.state32,this.rounds),rP||aP(this.state32),this.posOut=0,this.pos=0}update(e){tP(this);const{blockLen:n,state:r}=this;e=KH(e);const a=e.length;for(let i=0;i<a;){const s=Math.min(n-this.pos,a-i);for(let o=0;o<s;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:a}=this;e[r]^=n,n&128&&r===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){tP(this,!1),A3(e),this.finish();const n=this.state,{blockLen:r}=this;for(let a=0,i=e.length;a<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-a);e.set(n.subarray(this.posOut,this.posOut+s),a),this.posOut+=s,a+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return A8(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Zye(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:a,rounds:i,enableXOF:s}=this;return e||(e=new WT(n,r,a,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=a,e.enableXOF=s,e.destroyed=this.destroyed,e}}const m3e=(t,e,n)=>c3e(()=>new WT(e,t,n)),g3e=m3e(1,136,256/8);function YH(t,e){const n=e||"hex",r=g3e(z5(t,{strict:!1})?Wye(t):t);return n==="bytes"?r:uv(r)}let w3e=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const E9=new w3e(8192);function v3e(t,e){if(E9.has(`${t}.${e}`))return E9.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=YH(qH(n),"bytes"),a=n.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&a[s]&&(a[s]=a[s].toUpperCase()),(r[s>>1]&15)>=8&&a[s+1]&&(a[s+1]=a[s+1].toUpperCase());const i=`0x${a.join("")}`;return E9.set(`${t}.${e}`,i),i}function E3e(t){const e=YH(`0x${t.substring(4)}`).substring(26);return v3e(`0x${e}`)}async function _3e({hash:t,signature:e}){const n=z5(t)?t:uv(t),{secp256k1:r}=await xt(async()=>{const{secp256k1:s}=await import("./secp256k1-Y93CWhDZ.js");return{secp256k1:s}},__vite__mapDeps([13,1,2,3,4]));return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:l,v:u,yParity:f}=e,p=Number(f??u),h=oP(p);return new r.Signature(lv(d),lv(l)).addRecoveryBit(h)}const s=z5(e)?e:uv(e),o=jye(`0x${s.slice(130)}`),c=oP(o);return r.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function oP(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function T3e({hash:t,signature:e}){return E3e(await _3e({hash:t,signature:e}))}function x3e(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let d=0;d<e.length;d++)e[d]=255;for(let d=0;d<t.length;d++){const l=t.charAt(d),u=l.charCodeAt(0);if(e[u]!==255)throw new TypeError(l+" is ambiguous");e[u]=d}const n=t.length,r=t.charAt(0),a=Math.log(n)/Math.log(256),i=Math.log(256)/Math.log(n);function s(d){if(d instanceof Uint8Array||(ArrayBuffer.isView(d)?d=new Uint8Array(d.buffer,d.byteOffset,d.byteLength):Array.isArray(d)&&(d=Uint8Array.from(d))),!(d instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(d.length===0)return"";let l=0,u=0,f=0;const p=d.length;for(;f!==p&&d[f]===0;)f++,l++;const h=(p-f)*i+1>>>0,b=new Uint8Array(h);for(;f!==p;){let T=d[f],A=0;for(let N=h-1;(T!==0||A<u)&&N!==-1;N--,A++)T+=256*b[N]>>>0,b[N]=T%n>>>0,T=T/n>>>0;if(T!==0)throw new Error("Non-zero carry");u=A,f++}let v=h-u;for(;v!==h&&b[v]===0;)v++;let m=r.repeat(l);for(;v<h;++v)m+=t.charAt(b[v]);return m}function o(d){if(typeof d!="string")throw new TypeError("Expected String");if(d.length===0)return new Uint8Array;let l=0,u=0,f=0;for(;d[l]===r;)u++,l++;const p=(d.length-l)*a+1>>>0,h=new Uint8Array(p);for(;l<d.length;){const T=d.charCodeAt(l);if(T>255)return;let A=e[T];if(A===255)return;let N=0;for(let R=p-1;(A!==0||N<f)&&R!==-1;R--,N++)A+=n*h[R]>>>0,h[R]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");f=N,l++}let b=p-f;for(;b!==p&&h[b]===0;)b++;const v=new Uint8Array(u+(p-b));let m=u;for(;b!==p;)v[m++]=h[b++];return v}function c(d){const l=o(d);if(l)return l;throw new Error("Non-base"+n+" character")}return{encode:s,decodeUnsafe:o,decode:c}}var S3e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const A3e=x3e(S3e);function JH(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function o5(t,e){e||(e=t.reduce((a,i)=>a+i.length,0));const n=JH(e);let r=0;for(const a of t)n.set(a,r),r+=a.length;return n}function C3e(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var a=0;a<t.length;a++){var i=t.charAt(a),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=a}var o=t.length,c=t.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var b=0,v=0,m=0,T=h.length;m!==T&&h[m]===0;)m++,b++;for(var A=(T-m)*l+1>>>0,N=new Uint8Array(A);m!==T;){for(var R=h[m],B=0,F=A-1;(R!==0||B<v)&&F!==-1;F--,B++)R+=256*N[F]>>>0,N[F]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");v=B,m++}for(var I=A-v;I!==A&&N[I]===0;)I++;for(var P=c.repeat(b);I<A;++I)P+=t.charAt(N[I]);return P}function f(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var b=0;if(h[b]!==" "){for(var v=0,m=0;h[b]===c;)v++,b++;for(var T=(h.length-b)*d+1>>>0,A=new Uint8Array(T);h[b];){var N=n[h.charCodeAt(b)];if(N===255)return;for(var R=0,B=T-1;(N!==0||R<m)&&B!==-1;B--,R++)N+=o*A[B]>>>0,A[B]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=R,b++}if(h[b]!==" "){for(var F=T-m;F!==T&&A[F]===0;)F++;for(var I=new Uint8Array(v+(T-F)),P=v;F!==T;)I[P++]=A[F++];return I}}}function p(h){var b=f(h);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:f,decode:p}}var I3e=C3e,O3e=I3e;const M3e=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},P3e=t=>new TextEncoder().encode(t),k3e=t=>new TextDecoder().decode(t);class N3e{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class R3e{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return ZH(this,e)}}class D3e{constructor(e){this.decoders=e}or(e){return ZH(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ZH=(t,e)=>new D3e({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class $3e{constructor(e,n,r,a){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=a,this.encoder=new N3e(e,n,r),this.decoder=new R3e(e,n,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const C3=({name:t,prefix:e,encode:n,decode:r})=>new $3e(t,e,n,r),Xp=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:a}=O3e(n,e);return C3({prefix:t,name:e,encode:r,decode:i=>M3e(a(i))})},L3e=(t,e,n,r)=>{const a={};for(let l=0;l<e.length;++l)a[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let o=0,c=0,d=0;for(let l=0;l<i;++l){const u=a[t[l]];if(u===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|u,o+=n,o>=8&&(o-=8,s[d++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return s},B3e=(t,e,n)=>{const r=e[e.length-1]==="=",a=(1<<n)-1;let i="",s=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],s+=8;s>n;)s-=n,i+=e[a&o>>s];if(s&&(i+=e[a&o<<n-s]),r)for(;i.length*n&7;)i+="=";return i},Q0=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>C3({prefix:e,name:t,encode(a){return B3e(a,r,n)},decode(a){return L3e(a,r,n,t)}}),F3e=C3({prefix:"\0",name:"identity",encode:t=>k3e(t),decode:t=>P3e(t)}),U3e=Object.freeze(Object.defineProperty({__proto__:null,identity:F3e},Symbol.toStringTag,{value:"Module"})),j3e=Q0({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),H3e=Object.freeze(Object.defineProperty({__proto__:null,base2:j3e},Symbol.toStringTag,{value:"Module"})),z3e=Q0({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),q3e=Object.freeze(Object.defineProperty({__proto__:null,base8:z3e},Symbol.toStringTag,{value:"Module"})),K3e=Xp({prefix:"9",name:"base10",alphabet:"0123456789"}),V3e=Object.freeze(Object.defineProperty({__proto__:null,base10:K3e},Symbol.toStringTag,{value:"Module"})),W3e=Q0({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),G3e=Q0({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Y3e=Object.freeze(Object.defineProperty({__proto__:null,base16:W3e,base16upper:G3e},Symbol.toStringTag,{value:"Module"})),J3e=Q0({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Z3e=Q0({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),X3e=Q0({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Q3e=Q0({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eme=Q0({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tme=Q0({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nme=Q0({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rme=Q0({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ame=Q0({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),ime=Object.freeze(Object.defineProperty({__proto__:null,base32:J3e,base32hex:eme,base32hexpad:nme,base32hexpadupper:rme,base32hexupper:tme,base32pad:X3e,base32padupper:Q3e,base32upper:Z3e,base32z:ame},Symbol.toStringTag,{value:"Module"})),sme=Xp({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ome=Xp({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cme=Object.freeze(Object.defineProperty({__proto__:null,base36:sme,base36upper:ome},Symbol.toStringTag,{value:"Module"})),dme=Xp({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lme=Xp({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ume=Object.freeze(Object.defineProperty({__proto__:null,base58btc:dme,base58flickr:lme},Symbol.toStringTag,{value:"Module"})),fme=Q0({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pme=Q0({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),hme=Q0({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),bme=Q0({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yme=Object.freeze(Object.defineProperty({__proto__:null,base64:fme,base64pad:pme,base64url:hme,base64urlpad:bme},Symbol.toStringTag,{value:"Module"})),XH=Array.from(""),mme=XH.reduce((t,e,n)=>(t[n]=e,t),[]),gme=XH.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function wme(t){return t.reduce((e,n)=>(e+=mme[n],e),"")}function vme(t){const e=[];for(const n of t){const r=gme[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const Eme=C3({prefix:"",name:"base256emoji",encode:wme,decode:vme}),_me=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Eme},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const cP={...U3e,...H3e,...q3e,...V3e,...Y3e,...ime,...cme,...ume,...yme,..._me};function QH(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const dP=QH("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),_9=QH("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=JH(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),ez={utf8:dP,"utf-8":dP,hex:cP.base16,latin1:_9,ascii:_9,binary:_9,...cP};function li(t,e="utf8"){const n=ez[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}function ta(t,e="utf8"){const n=ez[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}const Tme={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var xme={};const tz=":";function v2(t){const[e,n]=t.split(tz);return{namespace:e,reference:n}}function nz(t){const[e,n,r]=t.split(tz);return{namespace:e,reference:n,address:r}}function rz(t,e=[]){const n=[];return Object.keys(t).forEach(r=>{if(e.length&&!e.includes(r))return;const a=t[r];n.push(...a.accounts)}),n}function az(t,e){return t.includes(":")?[t]:e.chains||[]}var Sme=Object.defineProperty,Ame=Object.defineProperties,Cme=Object.getOwnPropertyDescriptors,lP=Object.getOwnPropertySymbols,Ime=Object.prototype.hasOwnProperty,Ome=Object.prototype.propertyIsEnumerable,uP=(t,e,n)=>e in t?Sme(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,fP=(t,e)=>{for(var n in e||(e={}))Ime.call(e,n)&&uP(t,n,e[n]);if(lP)for(var n of lP(e))Ome.call(e,n)&&uP(t,n,e[n]);return t},Mme=(t,e)=>Ame(t,Cme(e));const Pme="ReactNative",ka={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},kme="js";function C8(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function w1(){return!Nd()&&!!zT()&&navigator.product===Pme}function Nme(){return w1()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Rme(){return w1()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function Pu(){return!C8()&&!!zT()&&!!Nd()}function Qp(){return w1()?ka.reactNative:C8()?ka.node:Pu()?ka.browser:ka.unknown}function pP(){var t;try{return w1()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Dme(t,e){const n=new URLSearchParams(t);for(const r of Object.keys(e).sort())if(e.hasOwnProperty(r)){const a=e[r];a!==void 0&&n.set(r,a)}return n.toString()}function $me(t){var e,n;const r=iz();try{return t!=null&&t.url&&r.url&&new URL(t.url).host!==new URL(r.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${r.url}. This is probably unintended and can lead to issues.`),t.url=r.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(a=>a!=="")),Mme(fP(fP({},r),t),{url:(t==null?void 0:t.url)||r.url,name:(t==null?void 0:t.name)||r.name,description:(t==null?void 0:t.description)||r.description,icons:(n=t==null?void 0:t.icons)!=null&&n.length&&t.icons.length>0?t.icons:r.icons})}catch(a){return console.warn("Error populating app metadata",a),t||r}}function iz(){return SH()||{name:"",description:"",url:"",icons:[""]}}function Lme(){if(Qp()===ka.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:n,Version:r}=global.Platform;return[n,r].join("-")}const t=N8e();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Bme(){var t;const e=Qp();return e===ka.browser?[e,((t=xH())==null?void 0:t.host)||"unknown"].join(":"):e}function sz(t,e,n){const r=Lme(),a=Bme();return[[t,e].join("-"),[kme,n].join("-"),r,a].join("/")}function Fme({protocol:t,version:e,relayUrl:n,sdkVersion:r,auth:a,projectId:i,useOnCloseEvent:s,bundleId:o,packageName:c}){const d=n.split("?"),l=sz(t,e,r),u={auth:a,ua:l,projectId:i,useOnCloseEvent:s||void 0,packageName:c||void 0,bundleId:o||void 0},f=Dme(d[1]||"",u);return d[0]+"?"+f}function rd(t,e){return t.filter(n=>e.includes(n)).length===t.length}function fv(t){return Object.fromEntries(t.entries())}function pv(t){return new Map(Object.entries(t))}function F1(t=ke.FIVE_MINUTES,e){const n=ke.toMiliseconds(t||ke.FIVE_MINUTES);let r,a,i,s;return{resolve:o=>{i&&r&&(clearTimeout(i),r(o),s=Promise.resolve(o))},reject:o=>{i&&a&&(clearTimeout(i),a(o))},done:()=>new Promise((o,c)=>{if(s)return o(s);i=setTimeout(()=>{const d=new Error(e);s=Promise.reject(d),c(d)},n),r=o,a=c})}}function n1(t,e,n){return new Promise(async(r,a)=>{const i=setTimeout(()=>a(new Error(n)),e);try{const s=await t;r(s)}catch(s){a(s)}clearTimeout(i)})}function oz(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function Ume(t){return oz("topic",t)}function jme(t){return oz("id",t)}function cz(t){const[e,n]=t.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof n=="string")r.topic=n;else if(e==="id"&&Number.isInteger(Number(n)))r.id=Number(n);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${n}`);return r}function r0(t,e){return ke.fromMiliseconds(Date.now()+ke.toMiliseconds(t))}function Fc(t){return Date.now()>=ke.toMiliseconds(t)}function Yt(t,e){return`${t}${e?`:${e}`:""}`}function gd(t=[],e=[]){return[...new Set([...t,...e])]}async function Hme({id:t,topic:e,wcDeepLink:n}){var r;try{if(!n)return;const a=typeof n=="string"?JSON.parse(n):n,i=a==null?void 0:a.href;if(typeof i!="string")return;const s=zme(i,t,e),o=Qp();if(o===ka.browser){if(!((r=Nd())!=null&&r.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}qme(s)}else o===ka.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(a){console.error(a)}}function zme(t,e,n){const r=`requestId=${e}&sessionTopic=${n}`;t.endsWith("/")&&(t=t.slice(0,-1));let a=`${t}`;if(t.startsWith("https://t.me")){const i=t.includes("?")?"&startapp=":"?startapp=";a=`${a}${i}${Gme(r,!0)}`}else a=`${a}/wc?${r}`;return a}function qme(t){let e="_self";Wme()?e="_top":(Vme()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Kme(t,e){let n="";try{if(Pu()&&(n=localStorage.getItem(e),n))return n;n=await t.getItem(e)}catch(r){console.error(r)}return n}function hP(t,e){if(!t.includes(e))return null;const n=t.split(/([&,?,=])/),r=n.indexOf(e);return n[r+2]}function bP(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function GT(){return typeof process<"u"&&xme.IS_VITEST==="true"}function Vme(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Wme(){try{return window.self!==window.top}catch{return!1}}function Gme(t,e=!1){const n=Buffer.from(t).toString("base64");return e?n.replace(/[=]/g,""):n}function dz(t){return Buffer.from(t,"base64").toString("utf-8")}function Yme(t){return new Promise(e=>setTimeout(e,t))}function q5(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Jme(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function eh(t,...e){if(!Jme(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function YT(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");q5(t.outputLen),q5(t.blockLen)}function G6(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function lz(t,e){eh(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const gb=BigInt(2**32-1),yP=BigInt(32);function Zme(t,e=!1){return e?{h:Number(t&gb),l:Number(t>>yP&gb)}:{h:Number(t>>yP&gb)|0,l:Number(t&gb)|0}}function Xme(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let a=0;a<t.length;a++){const{h:i,l:s}=Zme(t[a],e);[n[a],r[a]]=[i,s]}return[n,r]}const Qme=(t,e,n)=>t<<n|e>>>32-n,ege=(t,e,n)=>e<<n|t>>>32-n,tge=(t,e,n)=>e<<n-32|t>>>64-n,nge=(t,e,n)=>t<<n-32|e>>>64-n,Pl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function rge(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function T9(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function ns(t,e){return t<<32-e|t>>>e}const mP=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function age(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function gP(t){for(let e=0;e<t.length;e++)t[e]=age(t[e])}function ige(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function Y6(t){return typeof t=="string"&&(t=ige(t)),eh(t),t}function sge(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];eh(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}let JT=class{clone(){return this._cloneInto()}};function uz(t){const e=r=>t().update(Y6(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function ku(t=32){if(Pl&&typeof Pl.getRandomValues=="function")return Pl.getRandomValues(new Uint8Array(t));if(Pl&&typeof Pl.randomBytes=="function")return Pl.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}const fz=[],pz=[],hz=[],oge=BigInt(0),xf=BigInt(1),cge=BigInt(2),dge=BigInt(7),lge=BigInt(256),uge=BigInt(113);for(let t=0,e=xf,n=1,r=0;t<24;t++){[n,r]=[r,(2*n+3*r)%5],fz.push(2*(5*r+n)),pz.push((t+1)*(t+2)/2%64);let a=oge;for(let i=0;i<7;i++)e=(e<<xf^(e>>dge)*uge)%lge,e&cge&&(a^=xf<<(xf<<BigInt(i))-xf);hz.push(a)}const[fge,pge]=Xme(hz,!0),wP=(t,e,n)=>n>32?tge(t,e,n):Qme(t,e,n),vP=(t,e,n)=>n>32?nge(t,e,n):ege(t,e,n);function hge(t,e=24){const n=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let s=0;s<10;s++)n[s]=t[s]^t[s+10]^t[s+20]^t[s+30]^t[s+40];for(let s=0;s<10;s+=2){const o=(s+8)%10,c=(s+2)%10,d=n[c],l=n[c+1],u=wP(d,l,1)^n[o],f=vP(d,l,1)^n[o+1];for(let p=0;p<50;p+=10)t[s+p]^=u,t[s+p+1]^=f}let a=t[2],i=t[3];for(let s=0;s<24;s++){const o=pz[s],c=wP(a,i,o),d=vP(a,i,o),l=fz[s];a=t[l],i=t[l+1],t[l]=c,t[l+1]=d}for(let s=0;s<50;s+=10){for(let o=0;o<10;o++)n[o]=t[s+o];for(let o=0;o<10;o++)t[s+o]^=~n[(o+2)%10]&n[(o+4)%10]}t[0]^=fge[r],t[1]^=pge[r]}n.fill(0)}let bge=class bz extends JT{constructor(e,n,r,a=!1,i=24){if(super(),this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=a,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,q5(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=rge(this.state)}keccak(){mP||gP(this.state32),hge(this.state32,this.rounds),mP||gP(this.state32),this.posOut=0,this.pos=0}update(e){G6(this);const{blockLen:n,state:r}=this;e=Y6(e);const a=e.length;for(let i=0;i<a;){const s=Math.min(n-this.pos,a-i);for(let o=0;o<s;o++)r[this.pos++]^=e[i++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:n,pos:r,blockLen:a}=this;e[r]^=n,n&128&&r===a-1&&this.keccak(),e[a-1]^=128,this.keccak()}writeInto(e){G6(this,!1),eh(e),this.finish();const n=this.state,{blockLen:r}=this;for(let a=0,i=e.length;a<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-a);e.set(n.subarray(this.posOut,this.posOut+s),a),this.posOut+=s,a+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return q5(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(lz(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:n,suffix:r,outputLen:a,rounds:i,enableXOF:s}=this;return e||(e=new bz(n,r,a,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=a,e.enableXOF=s,e.destroyed=this.destroyed,e}};const yge=(t,e,n)=>uz(()=>new bge(e,t,n)),mge=yge(1,136,256/8),gge="https://rpc.walletconnect.org/v1";function yz(t){const e=`Ethereum Signed Message:
${t.length}`,n=new TextEncoder().encode(e+t);return"0x"+Buffer.from(mge(n)).toString("hex")}async function wge(t,e,n,r,a,i){switch(n.t){case"eip191":return await vge(t,e,n.s);case"eip1271":return await Ege(t,e,n.s,r,a,i);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${n.t}`)}}async function vge(t,e,n){return(await T3e({hash:yz(e),signature:n})).toLowerCase()===t.toLowerCase()}async function Ege(t,e,n,r,a,i){const s=v2(r);if(!s.namespace||!s.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${r}`);try{const o="0x1626ba7e",c="0000000000000000000000000000000000000000000000000000000000000040",d="0000000000000000000000000000000000000000000000000000000000000041",l=n.substring(2),u=yz(e).substring(2),f=o+u+c+d+l,p=await fetch(`${i||gge}/?chainId=${r}&projectId=${a}`,{method:"POST",body:JSON.stringify({id:_ge(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:f},"latest"]})}),{result:h}=await p.json();return h?h.slice(0,o.length).toLowerCase()===o.toLowerCase():!1}catch(o){return console.error("isValidEip1271Signature: ",o),!1}}function _ge(){return Date.now()+Math.floor(Math.random()*1e3)}function Tge(t){const e=atob(t),n=new Uint8Array(e.length);for(let s=0;s<e.length;s++)n[s]=e.charCodeAt(s);const r=n[0];if(r===0)throw new Error("No signatures found");const a=1+r*64;if(n.length<a)throw new Error("Transaction data too short for claimed signature count");if(n.length<100)throw new Error("Transaction too short");const i=Buffer.from(t,"base64").slice(1,65);return A3e.encode(i)}var xge=Object.defineProperty,Sge=Object.defineProperties,Age=Object.getOwnPropertyDescriptors,EP=Object.getOwnPropertySymbols,Cge=Object.prototype.hasOwnProperty,Ige=Object.prototype.propertyIsEnumerable,_P=(t,e,n)=>e in t?xge(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oge=(t,e)=>{for(var n in e||(e={}))Cge.call(e,n)&&_P(t,n,e[n]);if(EP)for(var n of EP(e))Ige.call(e,n)&&_P(t,n,e[n]);return t},Mge=(t,e)=>Sge(t,Age(e));const Pge="did:pkh:",ZT=t=>t==null?void 0:t.split(":"),kge=t=>{const e=t&&ZT(t);if(e)return t.includes(Pge)?e[3]:e[1]},hv=t=>{const e=t&&ZT(t);if(e)return e[2]+":"+e[3]},I8=t=>{const e=t&&ZT(t);if(e)return e.pop()};async function TP(t){const{cacao:e,projectId:n}=t,{s:r,p:a}=e,i=mz(a,a.iss),s=I8(a.iss);return await wge(s,i,r,hv(a.iss),n)}const mz=(t,e)=>{const n=`${t.domain} wants you to sign in with your Ethereum account:`,r=I8(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let a=t.statement||void 0;const i=`URI: ${t.aud||t.uri}`,s=`Version: ${t.version}`,o=`Chain ID: ${kge(e)}`,c=`Nonce: ${t.nonce}`,d=`Issued At: ${t.iat}`,l=t.exp?`Expiration Time: ${t.exp}`:void 0,u=t.nbf?`Not Before: ${t.nbf}`:void 0,f=t.requestId?`Request ID: ${t.requestId}`:void 0,p=t.resources?`Resources:${t.resources.map(b=>`
- ${b}`).join("")}`:void 0,h=E2(t.resources);if(h){const b=K5(h);a=jge(a,b)}return[n,r,"",a,"",i,s,o,c,d,l,u,f,p].filter(b=>b!=null).join(`
`)};function Nge(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function Rge(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Rd(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(n=>{const r=t.att[n];if(Array.isArray(r))throw new Error(`Resource must be an object: ${n}`);if(typeof r!="object")throw new Error(`Resource must be an object: ${n}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${n}`);Object.keys(r).forEach(a=>{const i=r[a];if(!Array.isArray(i))throw new Error(`Ability limits ${a} must be an array of objects, found: ${i}`);if(!i.length)throw new Error(`Value of ${a} is empty array, must be an array with objects`);i.forEach(s=>{if(typeof s!="object")throw new Error(`Ability limits (${a}) must be an array of objects, found: ${s}`)})})})}function Dge(t,e,n,r={}){return n==null||n.sort((a,i)=>a.localeCompare(i)),{att:{[t]:$ge(e,n,r)}}}function $ge(t,e,n={}){e=e==null?void 0:e.sort((a,i)=>a.localeCompare(i));const r=e.map(a=>({[`${t}/${a}`]:[n]}));return Object.assign({},...r)}function gz(t){return Rd(t),`urn:recap:${Nge(t).replace(/=/g,"")}`}function K5(t){const e=Rge(t.replace("urn:recap:",""));return Rd(e),e}function Lge(t,e,n){const r=Dge(t,e,n);return gz(r)}function Bge(t){return t&&t.includes("urn:recap:")}function Fge(t,e){const n=K5(t),r=K5(e),a=Uge(n,r);return gz(a)}function Uge(t,e){Rd(t),Rd(e);const n=Object.keys(t.att).concat(Object.keys(e.att)).sort((a,i)=>a.localeCompare(i)),r={att:{}};return n.forEach(a=>{var i,s;Object.keys(((i=t.att)==null?void 0:i[a])||{}).concat(Object.keys(((s=e.att)==null?void 0:s[a])||{})).sort((o,c)=>o.localeCompare(c)).forEach(o=>{var c,d;r.att[a]=Mge(Oge({},r.att[a]),{[o]:((c=t.att[a])==null?void 0:c[o])||((d=e.att[a])==null?void 0:d[o])})})}),r}function jge(t="",e){Rd(e);const n="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(n))return t;const r=[];let a=0;Object.keys(e.att).forEach(o=>{const c=Object.keys(e.att[o]).map(u=>({ability:u.split("/")[0],action:u.split("/")[1]}));c.sort((u,f)=>u.action.localeCompare(f.action));const d={};c.forEach(u=>{d[u.ability]||(d[u.ability]=[]),d[u.ability].push(u.action)});const l=Object.keys(d).map(u=>(a++,`(${a}) '${u}': '${d[u].join("', '")}' for '${o}'.`));r.push(l.join(", ").replace(".,","."))});const i=r.join(" "),s=`${n}${i}`;return`${t?t+" ":""}${s}`}function xP(t){var e;const n=K5(t);Rd(n);const r=(e=n.att)==null?void 0:e.eip155;return r?Object.keys(r).map(a=>a.split("/")[1]):[]}function SP(t){const e=K5(t);Rd(e);const n=[];return Object.values(e.att).forEach(r=>{Object.values(r).forEach(a=>{var i;(i=a==null?void 0:a[0])!=null&&i.chains&&n.push(a[0].chains)})}),[...new Set(n.flat())]}function E2(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return Bge(e)?e:void 0}function x9(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function wz(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ia(t,...e){if(!wz(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function AP(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Hge(t,e){Ia(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function CP(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}const o1=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),zge=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),qge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!qge)throw new Error("Non little-endian hardware is not supported");function Kge(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function bv(t){if(typeof t=="string")t=Kge(t);else if(wz(t))t=yv(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Vge(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Wge(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Gge=(t,e)=>{function n(r,...a){if(Ia(r),t.nonceLength!==void 0){const d=a[0];if(!d)throw new Error("nonce / iv required");t.varSizeNonce?Ia(d):Ia(d,t.nonceLength)}const i=t.tagLength;i&&a[1]!==void 0&&Ia(a[1]);const s=e(r,...a),o=(d,l)=>{if(l!==void 0){if(d!==2)throw new Error("cipher output not supported");Ia(l)}};let c=!1;return{encrypt(d,l){if(c)throw new Error("cannot encrypt() twice with same key + nonce");return c=!0,Ia(d),o(s.encrypt.length,l),s.encrypt(d,l)},decrypt(d,l){if(Ia(d),i&&d.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(s.decrypt.length,l),s.decrypt(d,l)}}}return Object.assign(n,t),n};function IP(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Yge(e))throw new Error("invalid output, must be aligned");return e}function OP(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const a=BigInt(32),i=BigInt(4294967295),s=Number(n>>a&i),o=Number(n&i);t.setUint32(e+4,s,r),t.setUint32(e+0,o,r)}function Yge(t){return t.byteOffset%4===0}function yv(t){return Uint8Array.from(t)}function J6(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const vz=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Jge=vz("expand 16-byte k"),Zge=vz("expand 32-byte k"),Xge=o1(Jge),Qge=o1(Zge);function Ht(t,e){return t<<e|t>>>32-e}function mv(t){return t.byteOffset%4===0}const wb=64,e9e=16,Ez=2**32-1,MP=new Uint32Array;function t9e(t,e,n,r,a,i,s,o){const c=a.length,d=new Uint8Array(wb),l=o1(d),u=mv(a)&&mv(i),f=u?o1(a):MP,p=u?o1(i):MP;for(let h=0;h<c;s++){if(t(e,n,r,l,s,o),s>=Ez)throw new Error("arx: counter overflow");const b=Math.min(wb,c-h);if(u&&b===wb){const v=h/4;if(h%4!==0)throw new Error("arx: invalid block position");for(let m=0,T;m<e9e;m++)T=v+m,p[T]=f[T]^l[m];h+=wb;continue}for(let v=0,m;v<b;v++)m=h+v,i[m]=a[m]^d[v];h+=b}}function n9e(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:a,counterRight:i,rounds:s}=Vge({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return x9(a),x9(s),CP(i),CP(n),(o,c,d,l,u=0)=>{Ia(o),Ia(c),Ia(d);const f=d.length;if(l===void 0&&(l=new Uint8Array(f)),Ia(l),x9(u),u<0||u>=Ez)throw new Error("arx: counter overflow");if(l.length<f)throw new Error(`arx: output (${l.length}) is shorter than data (${f})`);const p=[];let h=o.length,b,v;if(h===32)p.push(b=yv(o)),v=Qge;else if(h===16&&n)b=new Uint8Array(32),b.set(o),b.set(o,16),v=Xge,p.push(b);else throw new Error(`arx: invalid 32-byte key, got length=${h}`);mv(c)||p.push(c=yv(c));const m=o1(b);if(r){if(c.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(v,m,o1(c.subarray(0,16)),m),c=c.subarray(16)}const T=16-a;if(T!==c.length)throw new Error(`arx: nonce must be ${T} or 16 bytes`);if(T!==12){const N=new Uint8Array(12);N.set(c,i?0:12-c.length),c=N,p.push(c)}const A=o1(c);return t9e(t,v,m,A,d,l,u,s),J6(...p),l}}const z0=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class r9e{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=bv(e),Ia(e,32);const n=z0(e,0),r=z0(e,2),a=z0(e,4),i=z0(e,6),s=z0(e,8),o=z0(e,10),c=z0(e,12),d=z0(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|a<<6)&7939,this.r[3]=(a>>>7|i<<9)&8191,this.r[4]=(i>>>4|s<<12)&255,this.r[5]=s>>>1&8190,this.r[6]=(s>>>14|o<<2)&8191,this.r[7]=(o>>>11|c<<5)&8065,this.r[8]=(c>>>8|d<<8)&8191,this.r[9]=d>>>5&127;for(let l=0;l<8;l++)this.pad[l]=z0(e,16+2*l)}process(e,n,r=!1){const a=r?0:2048,{h:i,r:s}=this,o=s[0],c=s[1],d=s[2],l=s[3],u=s[4],f=s[5],p=s[6],h=s[7],b=s[8],v=s[9],m=z0(e,n+0),T=z0(e,n+2),A=z0(e,n+4),N=z0(e,n+6),R=z0(e,n+8),B=z0(e,n+10),F=z0(e,n+12),I=z0(e,n+14);let P=i[0]+(m&8191),$=i[1]+((m>>>13|T<<3)&8191),M=i[2]+((T>>>10|A<<6)&8191),y=i[3]+((A>>>7|N<<9)&8191),E=i[4]+((N>>>4|R<<12)&8191),C=i[5]+(R>>>1&8191),g=i[6]+((R>>>14|B<<2)&8191),x=i[7]+((B>>>11|F<<5)&8191),O=i[8]+((F>>>8|I<<8)&8191),S=i[9]+(I>>>5|a),w=0,_=w+P*o+$*(5*v)+M*(5*b)+y*(5*h)+E*(5*p);w=_>>>13,_&=8191,_+=C*(5*f)+g*(5*u)+x*(5*l)+O*(5*d)+S*(5*c),w+=_>>>13,_&=8191;let k=w+P*c+$*o+M*(5*v)+y*(5*b)+E*(5*h);w=k>>>13,k&=8191,k+=C*(5*p)+g*(5*f)+x*(5*u)+O*(5*l)+S*(5*d),w+=k>>>13,k&=8191;let L=w+P*d+$*c+M*o+y*(5*v)+E*(5*b);w=L>>>13,L&=8191,L+=C*(5*h)+g*(5*p)+x*(5*f)+O*(5*u)+S*(5*l),w+=L>>>13,L&=8191;let D=w+P*l+$*d+M*c+y*o+E*(5*v);w=D>>>13,D&=8191,D+=C*(5*b)+g*(5*h)+x*(5*p)+O*(5*f)+S*(5*u),w+=D>>>13,D&=8191;let U=w+P*u+$*l+M*d+y*c+E*o;w=U>>>13,U&=8191,U+=C*(5*v)+g*(5*b)+x*(5*h)+O*(5*p)+S*(5*f),w+=U>>>13,U&=8191;let j=w+P*f+$*u+M*l+y*d+E*c;w=j>>>13,j&=8191,j+=C*o+g*(5*v)+x*(5*b)+O*(5*h)+S*(5*p),w+=j>>>13,j&=8191;let H=w+P*p+$*f+M*u+y*l+E*d;w=H>>>13,H&=8191,H+=C*c+g*o+x*(5*v)+O*(5*b)+S*(5*h),w+=H>>>13,H&=8191;let W=w+P*h+$*p+M*f+y*u+E*l;w=W>>>13,W&=8191,W+=C*d+g*c+x*o+O*(5*v)+S*(5*b),w+=W>>>13,W&=8191;let K=w+P*b+$*h+M*p+y*f+E*u;w=K>>>13,K&=8191,K+=C*l+g*d+x*c+O*o+S*(5*v),w+=K>>>13,K&=8191;let q=w+P*v+$*b+M*h+y*p+E*f;w=q>>>13,q&=8191,q+=C*u+g*l+x*d+O*c+S*o,w+=q>>>13,q&=8191,w=(w<<2)+w|0,w=w+_|0,_=w&8191,w=w>>>13,k+=w,i[0]=_,i[1]=k,i[2]=L,i[3]=D,i[4]=U,i[5]=j,i[6]=H,i[7]=W,i[8]=K,i[9]=q}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let a=e[1]>>>13;e[1]&=8191;for(let o=2;o<10;o++)e[o]+=a,a=e[o]>>>13,e[o]&=8191;e[0]+=a*5,a=e[0]>>>13,e[0]&=8191,e[1]+=a,a=e[1]>>>13,e[1]&=8191,e[2]+=a,r[0]=e[0]+5,a=r[0]>>>13,r[0]&=8191;for(let o=1;o<10;o++)r[o]=e[o]+a,a=r[o]>>>13,r[o]&=8191;r[9]-=8192;let i=(a^1)-1;for(let o=0;o<10;o++)r[o]&=i;i=~i;for(let o=0;o<10;o++)e[o]=e[o]&i|r[o];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let s=e[0]+n[0];e[0]=s&65535;for(let o=1;o<8;o++)s=(e[o]+n[o]|0)+(s>>>16)|0,e[o]=s&65535;J6(r)}update(e){AP(this);const{buffer:n,blockLen:r}=this;e=bv(e);const a=e.length;for(let i=0;i<a;){const s=Math.min(r-this.pos,a-i);if(s===r){for(;r<=a-i;i+=r)this.process(e,i);continue}n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){J6(this.h,this.r,this.buffer,this.pad)}digestInto(e){AP(this),Hge(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:a}=this;if(a){for(n[a++]=1;a<16;a++)n[a]=0;this.process(n,0,!0)}this.finalize();let i=0;for(let s=0;s<8;s++)e[i++]=r[s]>>>0,e[i++]=r[s]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function a9e(t){const e=(r,a)=>t(a).update(bv(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const i9e=a9e(t=>new r9e(t));function s9e(t,e,n,r,a,i=20){let s=t[0],o=t[1],c=t[2],d=t[3],l=e[0],u=e[1],f=e[2],p=e[3],h=e[4],b=e[5],v=e[6],m=e[7],T=a,A=n[0],N=n[1],R=n[2],B=s,F=o,I=c,P=d,$=l,M=u,y=f,E=p,C=h,g=b,x=v,O=m,S=T,w=A,_=N,k=R;for(let D=0;D<i;D+=2)B=B+$|0,S=Ht(S^B,16),C=C+S|0,$=Ht($^C,12),B=B+$|0,S=Ht(S^B,8),C=C+S|0,$=Ht($^C,7),F=F+M|0,w=Ht(w^F,16),g=g+w|0,M=Ht(M^g,12),F=F+M|0,w=Ht(w^F,8),g=g+w|0,M=Ht(M^g,7),I=I+y|0,_=Ht(_^I,16),x=x+_|0,y=Ht(y^x,12),I=I+y|0,_=Ht(_^I,8),x=x+_|0,y=Ht(y^x,7),P=P+E|0,k=Ht(k^P,16),O=O+k|0,E=Ht(E^O,12),P=P+E|0,k=Ht(k^P,8),O=O+k|0,E=Ht(E^O,7),B=B+M|0,k=Ht(k^B,16),x=x+k|0,M=Ht(M^x,12),B=B+M|0,k=Ht(k^B,8),x=x+k|0,M=Ht(M^x,7),F=F+y|0,S=Ht(S^F,16),O=O+S|0,y=Ht(y^O,12),F=F+y|0,S=Ht(S^F,8),O=O+S|0,y=Ht(y^O,7),I=I+E|0,w=Ht(w^I,16),C=C+w|0,E=Ht(E^C,12),I=I+E|0,w=Ht(w^I,8),C=C+w|0,E=Ht(E^C,7),P=P+$|0,_=Ht(_^P,16),g=g+_|0,$=Ht($^g,12),P=P+$|0,_=Ht(_^P,8),g=g+_|0,$=Ht($^g,7);let L=0;r[L++]=s+B|0,r[L++]=o+F|0,r[L++]=c+I|0,r[L++]=d+P|0,r[L++]=l+$|0,r[L++]=u+M|0,r[L++]=f+y|0,r[L++]=p+E|0,r[L++]=h+C|0,r[L++]=b+g|0,r[L++]=v+x|0,r[L++]=m+O|0,r[L++]=T+S|0,r[L++]=A+w|0,r[L++]=N+_|0,r[L++]=R+k|0}const o9e=n9e(s9e,{counterRight:!1,counterLength:4,allowShortKeys:!1}),c9e=new Uint8Array(16),PP=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(c9e.subarray(n))},d9e=new Uint8Array(32);function kP(t,e,n,r,a){const i=t(e,n,d9e),s=i9e.create(i);a&&PP(s,a),PP(s,r);const o=new Uint8Array(16),c=zge(o);OP(c,0,BigInt(a?a.length:0),!0),OP(c,8,BigInt(r.length),!0),s.update(o);const d=s.digest();return J6(i,o),d}const l9e=t=>(e,n,r)=>({encrypt(a,i){const s=a.length;i=IP(s+16,i,!1),i.set(a);const o=i.subarray(0,-16);t(e,n,o,o,1);const c=kP(t,e,n,o,r);return i.set(c,s),J6(c),i},decrypt(a,i){i=IP(a.length-16,i,!1);const s=a.subarray(0,-16),o=a.subarray(-16),c=kP(t,e,n,s,r);if(!Wge(o,c))throw new Error("invalid tag");return i.set(a.subarray(0,-16)),t(e,n,i,i,1),J6(c),i}}),_z=Gge({blockSize:64,nonceLength:12,tagLength:16},l9e(o9e));let Tz=class extends JT{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,YT(e);const r=Y6(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,i=new Uint8Array(a);i.set(r.length>a?e.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return G6(this),this.iHash.update(e),this}digestInto(e){G6(this),eh(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:a,destroyed:i,blockLen:s,outputLen:o}=this;return e=e,e.finished=a,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const I3=(t,e,n)=>new Tz(t,e).update(n).digest();I3.create=(t,e)=>new Tz(t,e);function u9e(t,e,n){return YT(t),n===void 0&&(n=new Uint8Array(t.outputLen)),I3(t,Y6(n),Y6(e))}const S9=new Uint8Array([0]),NP=new Uint8Array;function f9e(t,e,n,r=32){if(YT(t),q5(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(r/t.outputLen);n===void 0&&(n=NP);const i=new Uint8Array(a*t.outputLen),s=I3.create(t,e),o=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let d=0;d<a;d++)S9[0]=d+1,o.update(d===0?NP:c).update(n).update(S9).digestInto(c),i.set(c,t.outputLen*d),s._cloneInto(o);return s.destroy(),o.destroy(),c.fill(0),S9.fill(0),i.slice(0,r)}const p9e=(t,e,n,r,a)=>f9e(t,u9e(t,e,n),r,a);function h9e(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const a=BigInt(32),i=BigInt(4294967295),s=Number(n>>a&i),o=Number(n&i),c=r?4:0,d=r?0:4;t.setUint32(e+c,s,r),t.setUint32(e+d,o,r)}function b9e(t,e,n){return t&e^~t&n}function y9e(t,e,n){return t&e^t&n^e&n}let m9e=class extends JT{constructor(e,n,r,a){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=T9(this.buffer)}update(e){G6(this);const{view:n,buffer:r,blockLen:a}=this;e=Y6(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(a-this.pos,i-s);if(o===a){const c=T9(e);for(;a<=i-s;s+=a)this.process(c,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===a&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){G6(this),lz(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:a,isLE:i}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>a-s&&(this.process(r,0),s=0);for(let u=s;u<a;u++)n[u]=0;h9e(r,a-8,BigInt(this.length*8),i),this.process(r,0);const o=T9(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=c/4,l=this.get();if(d>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<d;u++)o.setUint32(4*u,l[u],i)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:a,finished:i,destroyed:s,pos:o}=this;return e.length=a,e.pos=o,e.finished=i,e.destroyed=s,a%n&&e.buffer.set(r),e}};const g9e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ec=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),_c=new Uint32Array(64);class w9e extends m9e{constructor(){super(64,32,8,!1),this.A=Ec[0]|0,this.B=Ec[1]|0,this.C=Ec[2]|0,this.D=Ec[3]|0,this.E=Ec[4]|0,this.F=Ec[5]|0,this.G=Ec[6]|0,this.H=Ec[7]|0}get(){const{A:e,B:n,C:r,D:a,E:i,F:s,G:o,H:c}=this;return[e,n,r,a,i,s,o,c]}set(e,n,r,a,i,s,o,c){this.A=e|0,this.B=n|0,this.C=r|0,this.D=a|0,this.E=i|0,this.F=s|0,this.G=o|0,this.H=c|0}process(e,n){for(let u=0;u<16;u++,n+=4)_c[u]=e.getUint32(n,!1);for(let u=16;u<64;u++){const f=_c[u-15],p=_c[u-2],h=ns(f,7)^ns(f,18)^f>>>3,b=ns(p,17)^ns(p,19)^p>>>10;_c[u]=b+_c[u-7]+h+_c[u-16]|0}let{A:r,B:a,C:i,D:s,E:o,F:c,G:d,H:l}=this;for(let u=0;u<64;u++){const f=ns(o,6)^ns(o,11)^ns(o,25),p=l+f+b9e(o,c,d)+g9e[u]+_c[u]|0,h=(ns(r,2)^ns(r,13)^ns(r,22))+y9e(r,a,i)|0;l=d,d=c,c=o,o=s+p|0,s=i,i=a,a=r,r=p+h|0}r=r+this.A|0,a=a+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(r,a,i,s,o,c,d,l)}roundClean(){_c.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const th=uz(()=>new w9e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const O3=BigInt(0),M3=BigInt(1),v9e=BigInt(2);function Dd(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function nh(t){if(!Dd(t))throw new Error("Uint8Array expected")}function Z6(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const E9e=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function X6(t){nh(t);let e="";for(let n=0;n<t.length;n++)e+=E9e[t[n]];return e}function n6(t){const e=t.toString(16);return e.length&1?"0"+e:e}function XT(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?O3:BigInt("0x"+t)}const uo={_0:48,_9:57,A:65,F:70,a:97,f:102};function RP(t){if(t>=uo._0&&t<=uo._9)return t-uo._0;if(t>=uo.A&&t<=uo.F)return t-(uo.A-10);if(t>=uo.a&&t<=uo.f)return t-(uo.a-10)}function Q6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let a=0,i=0;a<n;a++,i+=2){const s=RP(t.charCodeAt(i)),o=RP(t.charCodeAt(i+1));if(s===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[a]=s*16+o}return r}function wd(t){return XT(X6(t))}function V5(t){return nh(t),XT(X6(Uint8Array.from(t).reverse()))}function eu(t,e){return Q6(t.toString(16).padStart(e*2,"0"))}function P3(t,e){return eu(t,e).reverse()}function _9e(t){return Q6(n6(t))}function _a(t,e,n){let r;if(typeof e=="string")try{r=Q6(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(Dd(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const a=r.length;if(typeof n=="number"&&a!==n)throw new Error(t+" of length "+n+" expected, got "+a);return r}function W5(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];nh(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}function T9e(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function x9e(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}const A9=t=>typeof t=="bigint"&&O3<=t;function k3(t,e,n){return A9(t)&&A9(e)&&A9(n)&&e<=t&&t<n}function Bo(t,e,n,r){if(!k3(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function xz(t){let e;for(e=0;t>O3;t>>=M3,e+=1);return e}function S9e(t,e){return t>>BigInt(e)&M3}function A9e(t,e,n){return t|(n?M3:O3)<<BigInt(e)}const QT=t=>(v9e<<BigInt(t-1))-M3,C9=t=>new Uint8Array(t),DP=t=>Uint8Array.from(t);function Sz(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=C9(t),a=C9(t),i=0;const s=()=>{r.fill(1),a.fill(0),i=0},o=(...l)=>n(a,r,...l),c=(l=C9())=>{a=o(DP([0]),l),r=o(),l.length!==0&&(a=o(DP([1]),l),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const u=[];for(;l<e;){r=o();const f=r.slice();u.push(f),l+=r.length}return W5(...u)};return(l,u)=>{s(),c(l);let f;for(;!(f=u(d()));)c();return s(),f}}const C9e={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Dd(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Nu(t,e,n={}){const r=(a,i,s)=>{const o=C9e[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[a];if(!(s&&c===void 0)&&!o(c,t))throw new Error("param "+String(a)+" is invalid. Expected "+i+", got "+c)};for(const[a,i]of Object.entries(e))r(a,i,!1);for(const[a,i]of Object.entries(n))r(a,i,!0);return t}const I9e=()=>{throw new Error("not implemented")};function gv(t){const e=new WeakMap;return(n,...r)=>{const a=e.get(n);if(a!==void 0)return a;const i=t(n,...r);return e.set(n,i),i}}var O9e=Object.freeze({__proto__:null,isBytes:Dd,abytes:nh,abool:Z6,bytesToHex:X6,numberToHexUnpadded:n6,hexToNumber:XT,hexToBytes:Q6,bytesToNumberBE:wd,bytesToNumberLE:V5,numberToBytesBE:eu,numberToBytesLE:P3,numberToVarBytesBE:_9e,ensureBytes:_a,concatBytes:W5,equalBytes:T9e,utf8ToBytes:x9e,inRange:k3,aInRange:Bo,bitLen:xz,bitGet:S9e,bitSet:A9e,bitMask:QT,createHmacDrbg:Sz,validateObject:Nu,notImplemented:I9e,memoized:gv});const P0=BigInt(0),Vn=BigInt(1),q1=BigInt(2),M9e=BigInt(3),wv=BigInt(4),$P=BigInt(5),LP=BigInt(8);function Yr(t,e){const n=t%e;return n>=P0?n:e+n}function Az(t,e,n){if(e<P0)throw new Error("invalid exponent, negatives unsupported");if(n<=P0)throw new Error("invalid modulus");if(n===Vn)return P0;let r=Vn;for(;e>P0;)e&Vn&&(r=r*t%n),t=t*t%n,e>>=Vn;return r}function Oi(t,e,n){let r=t;for(;e-- >P0;)r*=r,r%=n;return r}function vv(t,e){if(t===P0)throw new Error("invert: expected non-zero number");if(e<=P0)throw new Error("invert: expected positive modulus, got "+e);let n=Yr(t,e),r=e,a=P0,i=Vn;for(;n!==P0;){const s=r/n,o=r%n,c=a-i*s;r=n,n=o,a=i,i=c}if(r!==Vn)throw new Error("invert: does not exist");return Yr(a,e)}function P9e(t){const e=(t-Vn)/q1;let n,r,a;for(n=t-Vn,r=0;n%q1===P0;n/=q1,r++);for(a=q1;a<t&&Az(a,e,t)!==t-Vn;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const s=(t+Vn)/wv;return function(o,c){const d=o.pow(c,s);if(!o.eql(o.sqr(d),c))throw new Error("Cannot find square root");return d}}const i=(n+Vn)/q1;return function(s,o){if(s.pow(o,e)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,d=s.pow(s.mul(s.ONE,a),n),l=s.pow(o,i),u=s.pow(o,n);for(;!s.eql(u,s.ONE);){if(s.eql(u,s.ZERO))return s.ZERO;let f=1;for(let h=s.sqr(u);f<c&&!s.eql(h,s.ONE);f++)h=s.sqr(h);const p=s.pow(d,Vn<<BigInt(c-f-1));d=s.sqr(p),l=s.mul(l,p),u=s.mul(u,d),c=f}return l}}function k9e(t){if(t%wv===M9e){const e=(t+Vn)/wv;return function(n,r){const a=n.pow(r,e);if(!n.eql(n.sqr(a),r))throw new Error("Cannot find square root");return a}}if(t%LP===$P){const e=(t-$P)/LP;return function(n,r){const a=n.mul(r,q1),i=n.pow(a,e),s=n.mul(r,i),o=n.mul(n.mul(s,q1),i),c=n.mul(s,n.sub(o,n.ONE));if(!n.eql(n.sqr(c),r))throw new Error("Cannot find square root");return c}}return P9e(t)}const N9e=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function R9e(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=N9e.reduce((r,a)=>(r[a]="function",r),e);return Nu(t,n)}function D9e(t,e,n){if(n<P0)throw new Error("invalid exponent, negatives unsupported");if(n===P0)return t.ONE;if(n===Vn)return e;let r=t.ONE,a=e;for(;n>P0;)n&Vn&&(r=t.mul(r,a)),a=t.sqr(a),n>>=Vn;return r}function $9e(t,e){const n=new Array(e.length),r=e.reduce((i,s,o)=>t.is0(s)?i:(n[o]=i,t.mul(i,s)),t.ONE),a=t.inv(r);return e.reduceRight((i,s,o)=>t.is0(s)?i:(n[o]=t.mul(i,n[o]),t.mul(i,s)),a),n}function Cz(t,e){const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Iz(t,e,n=!1,r={}){if(t<=P0)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:a,nByteLength:i}=Cz(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const o=Object.freeze({ORDER:t,isLE:n,BITS:a,BYTES:i,MASK:QT(a),ZERO:P0,ONE:Vn,create:c=>Yr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return P0<=c&&c<t},is0:c=>c===P0,isOdd:c=>(c&Vn)===Vn,neg:c=>Yr(-c,t),eql:(c,d)=>c===d,sqr:c=>Yr(c*c,t),add:(c,d)=>Yr(c+d,t),sub:(c,d)=>Yr(c-d,t),mul:(c,d)=>Yr(c*d,t),pow:(c,d)=>D9e(o,c,d),div:(c,d)=>Yr(c*vv(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>vv(c,t),sqrt:r.sqrt||(c=>(s||(s=k9e(t)),s(o,c))),invertBatch:c=>$9e(o,c),cmov:(c,d,l)=>l?d:c,toBytes:c=>n?P3(c,i):eu(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?V5(c):wd(c)}});return Object.freeze(o)}function Oz(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Mz(t){const e=Oz(t);return e+Math.ceil(e/2)}function L9e(t,e,n=!1){const r=t.length,a=Oz(e),i=Mz(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?V5(t):wd(t),o=Yr(s,e-Vn)+Vn;return n?P3(o,a):eu(o,a)}const BP=BigInt(0),vb=BigInt(1);function I9(t,e){const n=e.negate();return t?n:e}function Pz(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function O9(t,e){Pz(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1);return{windows:n,windowSize:r}}function B9e(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function F9e(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const M9=new WeakMap,kz=new WeakMap;function P9(t){return kz.get(t)||1}function U9e(t,e){return{constTimeNegate:I9,hasPrecomputes(n){return P9(n)!==1},unsafeLadder(n,r,a=t.ZERO){let i=n;for(;r>BP;)r&vb&&(a=a.add(i)),i=i.double(),r>>=vb;return a},precomputeWindow(n,r){const{windows:a,windowSize:i}=O9(r,e),s=[];let o=n,c=o;for(let d=0;d<a;d++){c=o,s.push(c);for(let l=1;l<i;l++)c=c.add(o),s.push(c);o=c.double()}return s},wNAF(n,r,a){const{windows:i,windowSize:s}=O9(n,e);let o=t.ZERO,c=t.BASE;const d=BigInt(2**n-1),l=2**n,u=BigInt(n);for(let f=0;f<i;f++){const p=f*s;let h=Number(a&d);a>>=u,h>s&&(h-=l,a+=vb);const b=p,v=p+Math.abs(h)-1,m=f%2!==0,T=h<0;h===0?c=c.add(I9(m,r[b])):o=o.add(I9(T,r[v]))}return{p:o,f:c}},wNAFUnsafe(n,r,a,i=t.ZERO){const{windows:s,windowSize:o}=O9(n,e),c=BigInt(2**n-1),d=2**n,l=BigInt(n);for(let u=0;u<s;u++){const f=u*o;if(a===BP)break;let p=Number(a&c);if(a>>=l,p>o&&(p-=d,a+=vb),p===0)continue;let h=r[f+Math.abs(p)-1];p<0&&(h=h.negate()),i=i.add(h)}return i},getPrecomputes(n,r,a){let i=M9.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&M9.set(r,a(i))),i},wNAFCached(n,r,a){const i=P9(n);return this.wNAF(i,this.getPrecomputes(i,n,a),r)},wNAFCachedUnsafe(n,r,a,i){const s=P9(n);return s===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,n,a),r,i)},setWindowSize(n,r){Pz(r,e),kz.set(n,r),M9.delete(n)}}}function j9e(t,e,n,r){if(B9e(n,t),F9e(r,e),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const a=t.ZERO,i=xz(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,c=new Array(o+1).fill(a),d=Math.floor((e.BITS-1)/s)*s;let l=a;for(let u=d;u>=0;u-=s){c.fill(a);for(let p=0;p<r.length;p++){const h=r[p],b=Number(h>>BigInt(u)&BigInt(o));c[b]=c[b].add(n[p])}let f=a;for(let p=c.length-1,h=a;p>0;p--)h=h.add(c[p]),f=f.add(h);if(l=l.add(f),u!==0)for(let p=0;p<s;p++)l=l.double()}return l}function Nz(t){return R9e(t.Fp),Nu(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Cz(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const kl=BigInt(0),k9=BigInt(1);function H9e(t){return Nu(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function z9e(t){const e=H9e(t),{P:n}=e,r=T=>Yr(T,n),a=e.montgomeryBits,i=Math.ceil(a/8),s=e.nByteLength,o=e.adjustScalarBytes||(T=>T),c=e.powPminus2||(T=>Az(T,n-BigInt(2),n));function d(T,A,N){const R=r(T*(A-N));return A=r(A-R),N=r(N+R),[A,N]}const l=(e.a-BigInt(2))/BigInt(4);function u(T,A){Bo("u",T,kl,n),Bo("scalar",A,kl,n);const N=A,R=T;let B=k9,F=kl,I=T,P=k9,$=kl,M;for(let E=BigInt(a-1);E>=kl;E--){const C=N>>E&k9;$^=C,M=d($,B,I),B=M[0],I=M[1],M=d($,F,P),F=M[0],P=M[1],$=C;const g=B+F,x=r(g*g),O=B-F,S=r(O*O),w=x-S,_=I+P,k=I-P,L=r(k*g),D=r(_*O),U=L+D,j=L-D;I=r(U*U),P=r(R*r(j*j)),B=r(x*S),F=r(w*(x+r(l*w)))}M=d($,B,I),B=M[0],I=M[1],M=d($,F,P),F=M[0],P=M[1];const y=c(F);return r(B*y)}function f(T){return P3(r(T),i)}function p(T){const A=_a("u coordinate",T,i);return s===32&&(A[31]&=127),V5(A)}function h(T){const A=_a("scalar",T),N=A.length;if(N!==i&&N!==s){let R=""+i+" or "+s;throw new Error("invalid scalar, expected "+R+" bytes, got "+N)}return V5(o(A))}function b(T,A){const N=p(A),R=h(T),B=u(N,R);if(B===kl)throw new Error("invalid private or public key received");return f(B)}const v=f(e.Gu);function m(T){return b(T,v)}return{scalarMult:b,scalarMultBase:m,getSharedSecret:(T,A)=>b(T,A),getPublicKey:T=>m(T),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:v}}const Ev=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const q9e=BigInt(1),FP=BigInt(2),K9e=BigInt(3),V9e=BigInt(5);BigInt(8);function W9e(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),a=BigInt(80),i=Ev,s=t*t%i*t%i,o=Oi(s,FP,i)*s%i,c=Oi(o,q9e,i)*t%i,d=Oi(c,V9e,i)*c%i,l=Oi(d,e,i)*d%i,u=Oi(l,n,i)*l%i,f=Oi(u,r,i)*u%i,p=Oi(f,a,i)*f%i,h=Oi(p,a,i)*f%i,b=Oi(h,e,i)*d%i;return{pow_p_5_8:Oi(b,FP,i)*t%i,b2:s}}function G9e(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const _v=z9e({P:Ev,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=Ev,{pow_p_5_8:n,b2:r}=W9e(t);return Yr(Oi(n,K9e,e)*r,e)},adjustScalarBytes:G9e,randomBytes:ku});function UP(t){t.lowS!==void 0&&Z6("lowS",t.lowS),t.prehash!==void 0&&Z6("prehash",t.prehash)}function Y9e(t){const e=Nz(t);Nu(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a}=e;if(n){if(!r.eql(a,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:J9e,hexToBytes:Z9e}=O9e;class X9e extends Error{constructor(e=""){super(e)}}const To={Err:X9e,_tlv:{encode:(t,e)=>{const{Err:n}=To;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,a=n6(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?n6(a.length/2|128):"";return n6(t)+i+a+e},decode(t,e){const{Err:n}=To;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const a=e[r++],i=!!(a&128);let s=0;if(!i)s=a;else{const c=a&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+c);if(d.length!==c)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of d)s=s<<8|l;if(r+=c,s<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=To;if(t<Co)throw new e("integer: negative integers are not allowed");let n=n6(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=To;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return J9e(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=To,a=typeof t=="string"?Z9e(t):t;nh(a);const{v:i,l:s}=r.decode(48,a);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:d,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(d)}},hexFromSig(t){const{_tlv:e,_int:n}=To,r=e.encode(2,n.encode(t.r)),a=e.encode(2,n.encode(t.s)),i=r+a;return e.encode(48,i)}},Co=BigInt(0),v0=BigInt(1);BigInt(2);const jP=BigInt(3);BigInt(4);function Q9e(t){const e=Y9e(t),{Fp:n}=e,r=Iz(e.n,e.nBitLength),a=e.toBytes||((b,v,m)=>{const T=v.toAffine();return W5(Uint8Array.from([4]),n.toBytes(T.x),n.toBytes(T.y))}),i=e.fromBytes||(b=>{const v=b.subarray(1),m=n.fromBytes(v.subarray(0,n.BYTES)),T=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:m,y:T}});function s(b){const{a:v,b:m}=e,T=n.sqr(b),A=n.mul(T,b);return n.add(n.add(A,n.mul(b,v)),m)}if(!n.eql(n.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(b){return k3(b,v0,e.n)}function c(b){const{allowedPrivateKeyLengths:v,nByteLength:m,wrapPrivateKey:T,n:A}=e;if(v&&typeof b!="bigint"){if(Dd(b)&&(b=X6(b)),typeof b!="string"||!v.includes(b.length))throw new Error("invalid private key");b=b.padStart(m*2,"0")}let N;try{N=typeof b=="bigint"?b:wd(_a("private key",b,m))}catch{throw new Error("invalid private key, expected hex or "+m+" bytes, got "+typeof b)}return T&&(N=Yr(N,A)),Bo("private key",N,v0,A),N}function d(b){if(!(b instanceof f))throw new Error("ProjectivePoint expected")}const l=gv((b,v)=>{const{px:m,py:T,pz:A}=b;if(n.eql(A,n.ONE))return{x:m,y:T};const N=b.is0();v==null&&(v=N?n.ONE:n.inv(A));const R=n.mul(m,v),B=n.mul(T,v),F=n.mul(A,v);if(N)return{x:n.ZERO,y:n.ZERO};if(!n.eql(F,n.ONE))throw new Error("invZ was invalid");return{x:R,y:B}}),u=gv(b=>{if(b.is0()){if(e.allowInfinityPoint&&!n.is0(b.py))return;throw new Error("bad point: ZERO")}const{x:v,y:m}=b.toAffine();if(!n.isValid(v)||!n.isValid(m))throw new Error("bad point: x or y not FE");const T=n.sqr(m),A=s(v);if(!n.eql(T,A))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class f{constructor(v,m,T){if(this.px=v,this.py=m,this.pz=T,v==null||!n.isValid(v))throw new Error("x required");if(m==null||!n.isValid(m))throw new Error("y required");if(T==null||!n.isValid(T))throw new Error("z required");Object.freeze(this)}static fromAffine(v){const{x:m,y:T}=v||{};if(!v||!n.isValid(m)||!n.isValid(T))throw new Error("invalid affine point");if(v instanceof f)throw new Error("projective point not allowed");const A=N=>n.eql(N,n.ZERO);return A(m)&&A(T)?f.ZERO:new f(m,T,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const m=n.invertBatch(v.map(T=>T.pz));return v.map((T,A)=>T.toAffine(m[A])).map(f.fromAffine)}static fromHex(v){const m=f.fromAffine(i(_a("pointHex",v)));return m.assertValidity(),m}static fromPrivateKey(v){return f.BASE.multiply(c(v))}static msm(v,m){return j9e(f,r,v,m)}_setWindowSize(v){h.setWindowSize(this,v)}assertValidity(){u(this)}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){d(v);const{px:m,py:T,pz:A}=this,{px:N,py:R,pz:B}=v,F=n.eql(n.mul(m,B),n.mul(N,A)),I=n.eql(n.mul(T,B),n.mul(R,A));return F&&I}negate(){return new f(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b:m}=e,T=n.mul(m,jP),{px:A,py:N,pz:R}=this;let B=n.ZERO,F=n.ZERO,I=n.ZERO,P=n.mul(A,A),$=n.mul(N,N),M=n.mul(R,R),y=n.mul(A,N);return y=n.add(y,y),I=n.mul(A,R),I=n.add(I,I),B=n.mul(v,I),F=n.mul(T,M),F=n.add(B,F),B=n.sub($,F),F=n.add($,F),F=n.mul(B,F),B=n.mul(y,B),I=n.mul(T,I),M=n.mul(v,M),y=n.sub(P,M),y=n.mul(v,y),y=n.add(y,I),I=n.add(P,P),P=n.add(I,P),P=n.add(P,M),P=n.mul(P,y),F=n.add(F,P),M=n.mul(N,R),M=n.add(M,M),P=n.mul(M,y),B=n.sub(B,P),I=n.mul(M,$),I=n.add(I,I),I=n.add(I,I),new f(B,F,I)}add(v){d(v);const{px:m,py:T,pz:A}=this,{px:N,py:R,pz:B}=v;let F=n.ZERO,I=n.ZERO,P=n.ZERO;const $=e.a,M=n.mul(e.b,jP);let y=n.mul(m,N),E=n.mul(T,R),C=n.mul(A,B),g=n.add(m,T),x=n.add(N,R);g=n.mul(g,x),x=n.add(y,E),g=n.sub(g,x),x=n.add(m,A);let O=n.add(N,B);return x=n.mul(x,O),O=n.add(y,C),x=n.sub(x,O),O=n.add(T,A),F=n.add(R,B),O=n.mul(O,F),F=n.add(E,C),O=n.sub(O,F),P=n.mul($,x),F=n.mul(M,C),P=n.add(F,P),F=n.sub(E,P),P=n.add(E,P),I=n.mul(F,P),E=n.add(y,y),E=n.add(E,y),C=n.mul($,C),x=n.mul(M,x),E=n.add(E,C),C=n.sub(y,C),C=n.mul($,C),x=n.add(x,C),y=n.mul(E,x),I=n.add(I,y),y=n.mul(O,x),F=n.mul(g,F),F=n.sub(F,y),y=n.mul(g,E),P=n.mul(O,P),P=n.add(P,y),new f(F,I,P)}subtract(v){return this.add(v.negate())}is0(){return this.equals(f.ZERO)}wNAF(v){return h.wNAFCached(this,v,f.normalizeZ)}multiplyUnsafe(v){const{endo:m,n:T}=e;Bo("scalar",v,Co,T);const A=f.ZERO;if(v===Co)return A;if(this.is0()||v===v0)return this;if(!m||h.hasPrecomputes(this))return h.wNAFCachedUnsafe(this,v,f.normalizeZ);let{k1neg:N,k1:R,k2neg:B,k2:F}=m.splitScalar(v),I=A,P=A,$=this;for(;R>Co||F>Co;)R&v0&&(I=I.add($)),F&v0&&(P=P.add($)),$=$.double(),R>>=v0,F>>=v0;return N&&(I=I.negate()),B&&(P=P.negate()),P=new f(n.mul(P.px,m.beta),P.py,P.pz),I.add(P)}multiply(v){const{endo:m,n:T}=e;Bo("scalar",v,v0,T);let A,N;if(m){const{k1neg:R,k1:B,k2neg:F,k2:I}=m.splitScalar(v);let{p:P,f:$}=this.wNAF(B),{p:M,f:y}=this.wNAF(I);P=h.constTimeNegate(R,P),M=h.constTimeNegate(F,M),M=new f(n.mul(M.px,m.beta),M.py,M.pz),A=P.add(M),N=$.add(y)}else{const{p:R,f:B}=this.wNAF(v);A=R,N=B}return f.normalizeZ([A,N])[0]}multiplyAndAddUnsafe(v,m,T){const A=f.BASE,N=(B,F)=>F===Co||F===v0||!B.equals(A)?B.multiplyUnsafe(F):B.multiply(F),R=N(this,m).add(N(v,T));return R.is0()?void 0:R}toAffine(v){return l(this,v)}isTorsionFree(){const{h:v,isTorsionFree:m}=e;if(v===v0)return!0;if(m)return m(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:m}=e;return v===v0?this:m?m(f,this):this.multiplyUnsafe(e.h)}toRawBytes(v=!0){return Z6("isCompressed",v),this.assertValidity(),a(f,this,v)}toHex(v=!0){return Z6("isCompressed",v),X6(this.toRawBytes(v))}}f.BASE=new f(e.Gx,e.Gy,n.ONE),f.ZERO=new f(n.ZERO,n.ONE,n.ZERO);const p=e.nBitLength,h=U9e(f,e.endo?Math.ceil(p/2):p);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:c,weierstrassEquation:s,isWithinCurveOrder:o}}function e4e(t){const e=Nz(t);return Nu(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function t4e(t){const e=e4e(t),{Fp:n,n:r}=e,a=n.BYTES+1,i=2*n.BYTES+1;function s(C){return Yr(C,r)}function o(C){return vv(C,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:u}=Q9e({...e,toBytes(C,g,x){const O=g.toAffine(),S=n.toBytes(O.x),w=W5;return Z6("isCompressed",x),x?w(Uint8Array.from([g.hasEvenY()?2:3]),S):w(Uint8Array.from([4]),S,n.toBytes(O.y))},fromBytes(C){const g=C.length,x=C[0],O=C.subarray(1);if(g===a&&(x===2||x===3)){const S=wd(O);if(!k3(S,v0,n.ORDER))throw new Error("Point is not on curve");const w=l(S);let _;try{_=n.sqrt(w)}catch(L){const D=L instanceof Error?": "+L.message:"";throw new Error("Point is not on curve"+D)}const k=(_&v0)===v0;return(x&1)===1!==k&&(_=n.neg(_)),{x:S,y:_}}else if(g===i&&x===4){const S=n.fromBytes(O.subarray(0,n.BYTES)),w=n.fromBytes(O.subarray(n.BYTES,2*n.BYTES));return{x:S,y:w}}else{const S=a,w=i;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+w+", got "+g)}}}),f=C=>X6(eu(C,e.nByteLength));function p(C){const g=r>>v0;return C>g}function h(C){return p(C)?s(-C):C}const b=(C,g,x)=>wd(C.slice(g,x));class v{constructor(g,x,O){this.r=g,this.s=x,this.recovery=O,this.assertValidity()}static fromCompact(g){const x=e.nByteLength;return g=_a("compactSignature",g,x*2),new v(b(g,0,x),b(g,x,2*x))}static fromDER(g){const{r:x,s:O}=To.toSig(_a("DER",g));return new v(x,O)}assertValidity(){Bo("r",this.r,v0,r),Bo("s",this.s,v0,r)}addRecoveryBit(g){return new v(this.r,this.s,g)}recoverPublicKey(g){const{r:x,s:O,recovery:S}=this,w=B(_a("msgHash",g));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const _=S===2||S===3?x+e.n:x;if(_>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const k=S&1?"03":"02",L=c.fromHex(k+f(_)),D=o(_),U=s(-w*D),j=s(O*D),H=c.BASE.multiplyAndAddUnsafe(L,U,j);if(!H)throw new Error("point at infinify");return H.assertValidity(),H}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new v(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Q6(this.toDERHex())}toDERHex(){return To.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Q6(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const m={isValidPrivateKey(C){try{return d(C),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const C=Mz(e.n);return L9e(e.randomBytes(C),e.n)},precompute(C=8,g=c.BASE){return g._setWindowSize(C),g.multiply(BigInt(3)),g}};function T(C,g=!0){return c.fromPrivateKey(C).toRawBytes(g)}function A(C){const g=Dd(C),x=typeof C=="string",O=(g||x)&&C.length;return g?O===a||O===i:x?O===2*a||O===2*i:C instanceof c}function N(C,g,x=!0){if(A(C))throw new Error("first arg must be private key");if(!A(g))throw new Error("second arg must be public key");return c.fromHex(g).multiply(d(C)).toRawBytes(x)}const R=e.bits2int||function(C){if(C.length>8192)throw new Error("input is too large");const g=wd(C),x=C.length*8-e.nBitLength;return x>0?g>>BigInt(x):g},B=e.bits2int_modN||function(C){return s(R(C))},F=QT(e.nBitLength);function I(C){return Bo("num < 2^"+e.nBitLength,C,Co,F),eu(C,e.nByteLength)}function P(C,g,x=$){if(["recovered","canonical"].some(K=>K in x))throw new Error("sign() legacy options not supported");const{hash:O,randomBytes:S}=e;let{lowS:w,prehash:_,extraEntropy:k}=x;w==null&&(w=!0),C=_a("msgHash",C),UP(x),_&&(C=_a("prehashed msgHash",O(C)));const L=B(C),D=d(g),U=[I(D),I(L)];if(k!=null&&k!==!1){const K=k===!0?S(n.BYTES):k;U.push(_a("extraEntropy",K))}const j=W5(...U),H=L;function W(K){const q=R(K);if(!u(q))return;const V=o(q),G=c.BASE.multiply(q).toAffine(),J=s(G.x);if(J===Co)return;const z=s(V*s(H+J*D));if(z===Co)return;let Y=(G.x===J?0:2)|Number(G.y&v0),X=z;return w&&p(z)&&(X=h(z),Y^=1),new v(J,X,Y)}return{seed:j,k2sig:W}}const $={lowS:e.lowS,prehash:!1},M={lowS:e.lowS,prehash:!1};function y(C,g,x=$){const{seed:O,k2sig:S}=P(C,g,x),w=e;return Sz(w.hash.outputLen,w.nByteLength,w.hmac)(O,S)}c.BASE._setWindowSize(8);function E(C,g,x,O=M){var z;const S=C;g=_a("msgHash",g),x=_a("publicKey",x);const{lowS:w,prehash:_,format:k}=O;if(UP(O),"strict"in O)throw new Error("options.strict was renamed to lowS");if(k!==void 0&&k!=="compact"&&k!=="der")throw new Error("format must be compact or der");const L=typeof S=="string"||Dd(S),D=!L&&!k&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!L&&!D)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let U,j;try{if(D&&(U=new v(S.r,S.s)),L){try{k!=="compact"&&(U=v.fromDER(S))}catch(Y){if(!(Y instanceof To.Err))throw Y}!U&&k!=="der"&&(U=v.fromCompact(S))}j=c.fromHex(x)}catch{return!1}if(!U||w&&U.hasHighS())return!1;_&&(g=e.hash(g));const{r:H,s:W}=U,K=B(g),q=o(W),V=s(K*q),G=s(H*q),J=(z=c.BASE.multiplyAndAddUnsafe(j,V,G))==null?void 0:z.toAffine();return J?s(J.x)===H:!1}return{CURVE:e,getPublicKey:T,getSharedSecret:N,sign:y,verify:E,ProjectivePoint:c,Signature:v,utils:m}}function n4e(t){return{hash:t,hmac:(e,...n)=>I3(t,e,sge(...n)),randomBytes:ku}}function r4e(t,e){const n=r=>t4e({...t,...n4e(r)});return{...n(e),create:n}}const Rz=Iz(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),a4e=Rz.create(BigInt("-3")),i4e=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),s4e=r4e({a:a4e,b:i4e,Fp:Rz,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},th),Dz="base10",Mr="base16",Li="base64pad",Vc="base64url",rh="utf8",$z=0,Fo=1,ah=2,o4e=0,HP=1,c5=12,ex=32;function c4e(){const t=_v.utils.randomPrivateKey(),e=_v.getPublicKey(t);return{privateKey:ta(t,Mr),publicKey:ta(e,Mr)}}function Tv(){const t=ku(ex);return ta(t,Mr)}function d4e(t,e){const n=_v.getSharedSecret(li(t,Mr),li(e,Mr)),r=p9e(th,n,void 0,void 0,ex);return ta(r,Mr)}function _2(t){const e=th(li(t,Mr));return ta(e,Mr)}function ys(t){const e=th(li(t,rh));return ta(e,Mr)}function Lz(t){return li(`${t}`,Dz)}function $d(t){return Number(ta(t,Dz))}function Bz(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Fz(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),n=(4-e.length%4)%4;return e+"=".repeat(n)}function l4e(t){const e=Lz(typeof t.type<"u"?t.type:$z);if($d(e)===Fo&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const n=typeof t.senderPublicKey<"u"?li(t.senderPublicKey,Mr):void 0,r=typeof t.iv<"u"?li(t.iv,Mr):ku(c5),a=li(t.symKey,Mr),i=_z(a,r).encrypt(li(t.message,rh)),s=Uz({type:e,sealed:i,iv:r,senderPublicKey:n});return t.encoding===Vc?Bz(s):s}function u4e(t){const e=li(t.symKey,Mr),{sealed:n,iv:r}=G5({encoded:t.encoded,encoding:t.encoding}),a=_z(e,r).decrypt(n);if(a===null)throw new Error("Failed to decrypt");return ta(a,rh)}function f4e(t,e){const n=Lz(ah),r=ku(c5),a=li(t,rh),i=Uz({type:n,sealed:a,iv:r});return e===Vc?Bz(i):i}function p4e(t,e){const{sealed:n}=G5({encoded:t,encoding:e});return ta(n,rh)}function Uz(t){if($d(t.type)===ah)return ta(o5([t.type,t.sealed]),Li);if($d(t.type)===Fo){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ta(o5([t.type,t.senderPublicKey,t.iv,t.sealed]),Li)}return ta(o5([t.type,t.iv,t.sealed]),Li)}function G5(t){const e=(t.encoding||Li)===Vc?Fz(t.encoded):t.encoded,n=li(e,Li),r=n.slice(o4e,HP),a=HP;if($d(r)===Fo){const c=a+ex,d=c+c5,l=n.slice(a,c),u=n.slice(c,d),f=n.slice(d);return{type:r,sealed:f,iv:u,senderPublicKey:l}}if($d(r)===ah){const c=n.slice(a),d=ku(c5);return{type:r,sealed:c,iv:d}}const i=a+c5,s=n.slice(a,i),o=n.slice(i);return{type:r,sealed:o,iv:s}}function h4e(t,e){const n=G5({encoded:t,encoding:e==null?void 0:e.encoding});return jz({type:$d(n.type),senderPublicKey:typeof n.senderPublicKey<"u"?ta(n.senderPublicKey,Mr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function jz(t){const e=(t==null?void 0:t.type)||$z;if(e===Fo){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function zP(t){return t.type===Fo&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function qP(t){return t.type===ah}function b4e(t){const e=Buffer.from(t.x,"base64"),n=Buffer.from(t.y,"base64");return o5([new Uint8Array([4]),e,n])}function y4e(t,e){const[n,r,a]=t.split("."),i=Buffer.from(Fz(a),"base64");if(i.length!==64)throw new Error("Invalid signature length");const s=i.slice(0,32),o=i.slice(32,64),c=`${n}.${r}`,d=th(c),l=b4e(e);if(!s4e.verify(o5([s,o]),d,l))throw new Error("Invalid signature");return av(t).payload}const m4e="irn";function O8(t){return(t==null?void 0:t.relay)||{protocol:m4e}}function jf(t){const e=Tme[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}function g4e(t,e="-"){const n={},r="relay"+e;return Object.keys(t).forEach(a=>{if(a.startsWith(r)){const i=a.replace(r,""),s=t[a];n[i]=s}}),n}function KP(t){if(!t.includes("wc:")){const d=dz(t);d!=null&&d.includes("wc:")&&(t=d)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),n=t.indexOf("?")!==-1?t.indexOf("?"):void 0,r=t.substring(0,e),a=t.substring(e+1,n).split("@"),i=typeof n<"u"?t.substring(n):"",s=new URLSearchParams(i),o={};s.forEach((d,l)=>{o[l]=d});const c=typeof o.methods=="string"?o.methods.split(","):void 0;return{protocol:r,topic:w4e(a[0]),version:parseInt(a[1],10),symKey:o.symKey,relay:g4e(o),methods:c,expiryTimestamp:o.expiryTimestamp?parseInt(o.expiryTimestamp,10):void 0}}function w4e(t){return t.startsWith("//")?t.substring(2):t}function v4e(t,e="-"){const n="relay",r={};return Object.keys(t).forEach(a=>{const i=a,s=n+e+i;t[i]&&(r[s]=t[i])}),r}function VP(t){const e=new URLSearchParams,n=v4e(t.relay);Object.keys(n).sort().forEach(a=>{e.set(a,n[a])}),e.set("symKey",t.symKey),t.expiryTimestamp&&e.set("expiryTimestamp",t.expiryTimestamp.toString()),t.methods&&e.set("methods",t.methods.join(","));const r=e.toString();return`${t.protocol}:${t.topic}@${t.version}?${r}`}function Eb(t,e,n){return`${t}?wc_ev=${n}&topic=${e}`}var E4e=Object.defineProperty,_4e=Object.defineProperties,T4e=Object.getOwnPropertyDescriptors,WP=Object.getOwnPropertySymbols,x4e=Object.prototype.hasOwnProperty,S4e=Object.prototype.propertyIsEnumerable,GP=(t,e,n)=>e in t?E4e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A4e=(t,e)=>{for(var n in e||(e={}))x4e.call(e,n)&&GP(t,n,e[n]);if(WP)for(var n of WP(e))S4e.call(e,n)&&GP(t,n,e[n]);return t},C4e=(t,e)=>_4e(t,T4e(e));function Ru(t){const e=[];return t.forEach(n=>{const[r,a]=n.split(":");e.push(`${r}:${a}`)}),e}function I4e(t){const e=[];return Object.values(t).forEach(n=>{e.push(...Ru(n.accounts))}),e}function O4e(t,e){const n=[];return Object.values(t).forEach(r=>{Ru(r.accounts).includes(e)&&n.push(...r.methods)}),n}function M4e(t,e){const n=[];return Object.values(t).forEach(r=>{Ru(r.accounts).includes(e)&&n.push(...r.events)}),n}function Hz(t){return t.includes(":")}function P4e(t){return Hz(t)?t.split(":")[0]:t}function YP(t){var e,n,r;const a={};if(!Y5(t))return a;for(const[i,s]of Object.entries(t)){const o=Hz(i)?[i]:s.chains,c=s.methods||[],d=s.events||[],l=P4e(i);a[l]=C4e(A4e({},a[l]),{chains:gd(o,(e=a[l])==null?void 0:e.chains),methods:gd(c,(n=a[l])==null?void 0:n.methods),events:gd(d,(r=a[l])==null?void 0:r.events)})}return a}function k4e(t){const e={};return t==null||t.forEach(n=>{var r;const[a,i]=n.split(":");e[a]||(e[a]={accounts:[],chains:[],events:[],methods:[]}),e[a].accounts.push(n),(r=e[a].chains)==null||r.push(`${a}:${i}`)}),e}function JP(t,e){e=e.map(r=>r.replace("did:pkh:",""));const n=k4e(e);for(const[r,a]of Object.entries(n))a.methods?a.methods=gd(a.methods,t):a.methods=t,a.events=["chainChanged","accountsChanged"];return n}function N4e(t,e){var n,r,a,i,s,o;const c=YP(t),d=YP(e),l={},u=Object.keys(c).concat(Object.keys(d));for(const f of u)l[f]={chains:gd((n=c[f])==null?void 0:n.chains,(r=d[f])==null?void 0:r.chains),methods:gd((a=c[f])==null?void 0:a.methods,(i=d[f])==null?void 0:i.methods),events:gd((s=c[f])==null?void 0:s.events,(o=d[f])==null?void 0:o.events)};return l}const R4e={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},D4e={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Ne(t,e){const{message:n,code:r}=D4e[t];return{message:e?`${n} ${e}`:n,code:r}}function tn(t,e){const{message:n,code:r}=R4e[t];return{message:e?`${n} ${e}`:n,code:r}}function Du(t,e){return!!Array.isArray(t)}function Y5(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function dr(t){return typeof t>"u"}function Xn(t,e){return e&&dr(t)?!0:typeof t=="string"&&!!t.trim().length}function tx(t,e){return typeof t=="number"&&!isNaN(t)}function $4e(t,e){const{requiredNamespaces:n}=e,r=Object.keys(t.namespaces),a=Object.keys(n);let i=!0;return rd(a,r)?(r.forEach(s=>{const{accounts:o,methods:c,events:d}=t.namespaces[s],l=Ru(o),u=n[s];(!rd(az(s,u),l)||!rd(u.methods,c)||!rd(u.events,d))&&(i=!1)}),i):!1}function M8(t){return Xn(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function L4e(t){if(Xn(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const n=e[0]+":"+e[1];return!!e[2]&&M8(n)}}return!1}function B4e(t){function e(n){try{return typeof new URL(n)<"u"}catch{return!1}}try{if(Xn(t,!1)){if(e(t))return!0;const n=dz(t);return e(n)}}catch{}return!1}function F4e(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function U4e(t){return t==null?void 0:t.topic}function j4e(t,e){let n=null;return Xn(t==null?void 0:t.publicKey,!1)||(n=Ne("MISSING_OR_INVALID",`${e} controller public key should be a string`)),n}function ZP(t){let e=!0;return Du(t)?t.length&&(e=t.every(n=>Xn(n,!1))):e=!1,e}function H4e(t,e,n){let r=null;return Du(e)&&e.length?e.forEach(a=>{r||M8(a)||(r=tn("UNSUPPORTED_CHAINS",`${n}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):M8(t)||(r=tn("UNSUPPORTED_CHAINS",`${n}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function z4e(t,e,n){let r=null;return Object.entries(t).forEach(([a,i])=>{if(r)return;const s=H4e(a,az(a,i),`${e} ${n}`);s&&(r=s)}),r}function q4e(t,e){let n=null;return Du(t)?t.forEach(r=>{n||L4e(r)||(n=tn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):n=tn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),n}function K4e(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const a=q4e(r==null?void 0:r.accounts,`${e} namespace`);a&&(n=a)}),n}function V4e(t,e){let n=null;return ZP(t==null?void 0:t.methods)?ZP(t==null?void 0:t.events)||(n=tn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):n=tn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),n}function zz(t,e){let n=null;return Object.values(t).forEach(r=>{if(n)return;const a=V4e(r,`${e}, namespace`);a&&(n=a)}),n}function W4e(t,e,n){let r=null;if(t&&Y5(t)){const a=zz(t,e);a&&(r=a);const i=z4e(t,e,n);i&&(r=i)}else r=Ne("MISSING_OR_INVALID",`${e}, ${n} should be an object with data`);return r}function N9(t,e){let n=null;if(t&&Y5(t)){const r=zz(t,e);r&&(n=r);const a=K4e(t,e);a&&(n=a)}else n=Ne("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return n}function qz(t){return Xn(t.protocol,!0)}function G4e(t,e){let n=!1;return t?t&&Du(t)&&t.length&&t.forEach(r=>{n=qz(r)}):n=!0,n}function Y4e(t){return typeof t=="number"}function Wr(t){return typeof t<"u"&&typeof t!==null}function J4e(t){return!(!t||typeof t!="object"||!t.code||!tx(t.code)||!t.message||!Xn(t.message,!1))}function Z4e(t){return!(dr(t)||!Xn(t.method,!1))}function X4e(t){return!(dr(t)||dr(t.result)&&dr(t.error)||!tx(t.id)||!Xn(t.jsonrpc,!1))}function Q4e(t){return!(dr(t)||!Xn(t.name,!1))}function XP(t,e){return!(!M8(e)||!I4e(t).includes(e))}function ewe(t,e,n){return Xn(n,!1)?O4e(t,e).includes(n):!1}function twe(t,e,n){return Xn(n,!1)?M4e(t,e).includes(n):!1}function QP(t,e,n){let r=null;const a=nwe(t),i=rwe(e),s=Object.keys(a),o=Object.keys(i),c=ek(Object.keys(t)),d=ek(Object.keys(e)),l=c.filter(u=>!d.includes(u));return l.length&&(r=Ne("NON_CONFORMING_NAMESPACES",`${n} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(e).toString()}`)),rd(s,o)||(r=Ne("NON_CONFORMING_NAMESPACES",`${n} namespaces chains don't satisfy required namespaces.
      Required: ${s.toString()}
      Approved: ${o.toString()}`)),Object.keys(e).forEach(u=>{if(!u.includes(":")||r)return;const f=Ru(e[u].accounts);f.includes(u)||(r=Ne("NON_CONFORMING_NAMESPACES",`${n} namespaces accounts don't satisfy namespace accounts for ${u}
        Required: ${u}
        Approved: ${f.toString()}`))}),s.forEach(u=>{r||(rd(a[u].methods,i[u].methods)?rd(a[u].events,i[u].events)||(r=Ne("NON_CONFORMING_NAMESPACES",`${n} namespaces events don't satisfy namespace events for ${u}`)):r=Ne("NON_CONFORMING_NAMESPACES",`${n} namespaces methods don't satisfy namespace methods for ${u}`))}),r}function nwe(t){const e={};return Object.keys(t).forEach(n=>{var r;n.includes(":")?e[n]=t[n]:(r=t[n].chains)==null||r.forEach(a=>{e[a]={methods:t[n].methods,events:t[n].events}})}),e}function ek(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function rwe(t){const e={};return Object.keys(t).forEach(n=>{if(n.includes(":"))e[n]=t[n];else{const r=Ru(t[n].accounts);r==null||r.forEach(a=>{e[a]={accounts:t[n].accounts.filter(i=>i.includes(`${a}:`)),methods:t[n].methods,events:t[n].events}})}}),e}function awe(t,e){return tx(t)&&t<=e.max&&t>=e.min}function tk(){const t=Qp();return new Promise(e=>{switch(t){case ka.browser:e(iwe());break;case ka.reactNative:e(swe());break;case ka.node:e(owe());break;default:e(!0)}})}function iwe(){return Pu()&&(navigator==null?void 0:navigator.onLine)}async function swe(){if(w1()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function owe(){return!0}function cwe(t){switch(Qp()){case ka.browser:dwe(t);break;case ka.reactNative:lwe(t);break}}function dwe(t){!w1()&&Pu()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function lwe(t){w1()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function uwe(){var t;return Pu()&&Nd()?((t=Nd())==null?void 0:t.visibilityState)==="visible":!0}const R9={};class Sf{static get(e){return R9[e]}static set(e,n){R9[e]=n}static delete(e){delete R9[e]}}const fwe="PARSE_ERROR",pwe="INVALID_REQUEST",hwe="METHOD_NOT_FOUND",bwe="INVALID_PARAMS",Kz="INTERNAL_ERROR",nx="SERVER_ERROR",ywe=[-32700,-32600,-32601,-32602,-32603],d5={[fwe]:{code:-32700,message:"Parse error"},[pwe]:{code:-32600,message:"Invalid Request"},[hwe]:{code:-32601,message:"Method not found"},[bwe]:{code:-32602,message:"Invalid params"},[Kz]:{code:-32603,message:"Internal error"},[nx]:{code:-32e3,message:"Server error"}},Vz=nx;function mwe(t){return ywe.includes(t)}function nk(t){return Object.keys(d5).includes(t)?d5[t]:d5[Vz]}function gwe(t){const e=Object.values(d5).find(n=>n.code===t);return e||d5[Vz]}function wwe(t,e,n){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${n} RPC url at ${e}`):t}var Wz={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var xv=function(t,e){return xv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var a in r)r.hasOwnProperty(a)&&(n[a]=r[a])},xv(t,e)};function vwe(t,e){xv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sv=function(){return Sv=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sv.apply(this,arguments)};function Ewe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(n[r[a]]=t[r[a]]);return n}function _we(t,e,n,r){var a=arguments.length,i=a<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(t,e,n,r);else for(var o=t.length-1;o>=0;o--)(s=t[o])&&(i=(a<3?s(i):a>3?s(e,n,i):s(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i}function Twe(t,e){return function(n,r){e(n,r,t)}}function xwe(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Swe(t,e,n,r){function a(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function o(l){try{d(r.next(l))}catch(u){s(u)}}function c(l){try{d(r.throw(l))}catch(u){s(u)}}function d(l){l.done?i(l.value):a(l.value).then(o,c)}d((r=r.apply(t,e||[])).next())})}function Awe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(d){return function(l){return c([d,l])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=d[0]&2?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(l){d=[6,l],a=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Cwe(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}function Iwe(t,e){for(var n in t)n!=="default"&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Av(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Gz(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),a,i=[],s;try{for(;(e===void 0||e-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function Owe(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Gz(arguments[e]));return t}function Mwe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),a=0,e=0;e<n;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)r[a]=i[s];return r}function J5(t){return this instanceof J5?(this.v=t,this):new J5(t)}function Pwe(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),a,i=[];return a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a;function s(f){r[f]&&(a[f]=function(p){return new Promise(function(h,b){i.push([f,p,h,b])>1||o(f,p)})})}function o(f,p){try{c(r[f](p))}catch(h){u(i[0][3],h)}}function c(f){f.value instanceof J5?Promise.resolve(f.value.v).then(d,l):u(i[0][2],f)}function d(f){o("next",f)}function l(f){o("throw",f)}function u(f,p){f(p),i.shift(),i.length&&o(i[0][0],i[0][1])}}function kwe(t){var e,n;return e={},r("next"),r("throw",function(a){throw a}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(a,i){e[a]=t[a]?function(s){return(n=!n)?{value:J5(t[a](s)),done:a==="return"}:i?i(s):s}:i}}function Nwe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Av=="function"?Av(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(o,c){s=t[i](s),a(o,c,s.done,s.value)})}}function a(i,s,o,c){Promise.resolve(c).then(function(d){i({value:d,done:o})},s)}}function Rwe(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function Dwe(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function $we(t){return t&&t.__esModule?t:{default:t}}function Lwe(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function Bwe(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}const Fwe=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return Sv},__asyncDelegator:kwe,__asyncGenerator:Pwe,__asyncValues:Nwe,__await:J5,__awaiter:Swe,__classPrivateFieldGet:Lwe,__classPrivateFieldSet:Bwe,__createBinding:Cwe,__decorate:_we,__exportStar:Iwe,__extends:vwe,__generator:Awe,__importDefault:$we,__importStar:Dwe,__makeTemplateObject:Rwe,__metadata:xwe,__param:Twe,__read:Gz,__rest:Ewe,__spread:Owe,__spreadArrays:Mwe,__values:Av},Symbol.toStringTag,{value:"Module"})),Uwe=bR(Fwe);var fo={},rk;function jwe(){if(rk)return fo;rk=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.isBrowserCryptoAvailable=fo.getSubtleCrypto=fo.getBrowerCrypto=void 0;function t(){return(vt===null||vt===void 0?void 0:vt.crypto)||(vt===null||vt===void 0?void 0:vt.msCrypto)||{}}fo.getBrowerCrypto=t;function e(){const r=t();return r.subtle||r.webkitSubtle}fo.getSubtleCrypto=e;function n(){return!!t()&&!!e()}return fo.isBrowserCryptoAvailable=n,fo}var po={},ak;function Hwe(){if(ak)return po;ak=1,Object.defineProperty(po,"__esModule",{value:!0}),po.isBrowser=po.isNode=po.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}po.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}po.isNode=e;function n(){return!t()&&!e()}return po.isBrowser=n,po}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=Uwe;e.__exportStar(jwe(),t),e.__exportStar(Hwe(),t)})(Wz);function ls(t=3){const e=Date.now()*Math.pow(10,t),n=Math.floor(Math.random()*Math.pow(10,t));return e+n}function ad(t=6){return BigInt(ls(t))}function id(t,e,n){return{id:n||ls(),jsonrpc:"2.0",method:t,params:e}}function rx(t,e){return{id:t,jsonrpc:"2.0",result:e}}function ax(t,e,n){return{id:t,jsonrpc:"2.0",error:zwe(e)}}function zwe(t,e){return typeof t>"u"?nk(Kz):(typeof t=="string"&&(t=Object.assign(Object.assign({},nk(nx)),{message:t})),mwe(t.code)&&(t=gwe(t.code)),t)}class qwe{}class Kwe extends qwe{constructor(){super()}}class Vwe extends Kwe{constructor(e){super()}}const Wwe="^wss?:";function Gwe(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Ywe(t,e){const n=Gwe(t);return typeof n>"u"?!1:new RegExp(e).test(n)}function ik(t){return Ywe(t,Wwe)}function Jwe(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function Yz(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function ix(t){return Yz(t)&&"method"in t}function N3(t){return Yz(t)&&(us(t)||ii(t))}function us(t){return"result"in t}function ii(t){return"error"in t}class Zwe extends Vwe{constructor(e){super(e),this.events=new l0.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async request(e,n){return this.requestStrict(id(e.method,e.params||[],e.id||ad().toString()),n)}async requestStrict(e,n){return new Promise(async(r,a)=>{if(!this.connection.connected)try{await this.open()}catch(i){a(i)}this.events.on(`${e.id}`,i=>{ii(i)?a(i.error):r(i.result)});try{await this.connection.send(e,n)}catch(i){a(i)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),N3(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const Xwe=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),Qwe=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",sk=t=>t.split("?")[0],ok=10,eve=Xwe();let tve=class{constructor(e){if(this.url=e,this.events=new l0.EventEmitter,this.registering=!1,!ik(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,n)=>{if(typeof this.socket>"u"){n(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(kd(e))}catch(n){this.onError(e.id,n)}}register(e=this.url){if(!ik(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((r,a)=>{this.events.once("register_error",i=>{this.resetMaxListeners(),a(i)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((n,r)=>{const a=Wz.isReactNative()?void 0:{rejectUnauthorized:!Jwe(e)},i=new eve(e,[],a);Qwe()?i.onerror=s=>{const o=s;r(this.emitError(o.error))}:i.on("error",s=>{r(this.emitError(s))}),i.onopen=()=>{this.onOpen(i),n(i)}})}onOpen(e){e.onmessage=n=>this.onPayload(n),e.onclose=n=>this.onClose(n),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const n=typeof e.data=="string"?W6(e.data):e.data;this.events.emit("payload",n)}onError(e,n){const r=this.parseError(n),a=r.message||r.toString(),i=ax(e,a);this.events.emit("payload",i)}parseError(e,n=this.url){return wwe(e,sk(n),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ok&&this.events.setMaxListeners(ok)}emitError(e){const n=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${sk(this.url)}`));return this.events.emit("register_error",n),n}};var nve={};const Jz="wc",Zz=2,P8="core",Hs=`${Jz}@2:${P8}:`,rve={name:P8,logger:"error"},ave={database:":memory:"},ive="crypto",ck="client_ed25519_seed",sve=ke.ONE_DAY,ove="keychain",cve="0.3",dve="messages",lve="0.3",dk=ke.SIX_HOURS,uve="publisher",Xz="irn",fve="error",Qz="wss://relay.walletconnect.org",pve="relayer",S0={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},hve="_subscription",Va={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},bve=.1,Cv="2.21.1",Tn={link_mode:"link_mode",relay:"relay"},T2={inbound:"inbound",outbound:"outbound"},yve="0.3",mve="WALLETCONNECT_CLIENT_ID",lk="WALLETCONNECT_LINK_MODE_APPS",ga={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},gve="subscription",wve="0.3",vve="pairing",Eve="0.3",Af={wc_pairingDelete:{req:{ttl:ke.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:ke.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:ke.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:ke.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:ke.ONE_DAY,prompt:!1,tag:0},res:{ttl:ke.ONE_DAY,prompt:!1,tag:0}}},K1={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Si={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_ve="history",Tve="0.3",xve="expirer",Qa={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Sve="0.3",Ave="verify-api",Cve="https://verify.walletconnect.com",eq="https://verify.walletconnect.org",l5=eq,Ive=`${l5}/v3`,Ove=[Cve,eq],Mve="echo",Pve="https://echo.walletconnect.com",ds={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},go={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Ai={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},k1={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},N1={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Cf={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},kve=.1,Nve="event-client",Rve=86400,Dve="https://pulse.walletconnect.org/batch";function $ve(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),r=0;r<n.length;r++)n[r]=255;for(var a=0;a<t.length;a++){var i=t.charAt(a),s=i.charCodeAt(0);if(n[s]!==255)throw new TypeError(i+" is ambiguous");n[s]=a}var o=t.length,c=t.charAt(0),d=Math.log(o)/Math.log(256),l=Math.log(256)/Math.log(o);function u(h){if(h instanceof Uint8Array||(ArrayBuffer.isView(h)?h=new Uint8Array(h.buffer,h.byteOffset,h.byteLength):Array.isArray(h)&&(h=Uint8Array.from(h))),!(h instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(h.length===0)return"";for(var b=0,v=0,m=0,T=h.length;m!==T&&h[m]===0;)m++,b++;for(var A=(T-m)*l+1>>>0,N=new Uint8Array(A);m!==T;){for(var R=h[m],B=0,F=A-1;(R!==0||B<v)&&F!==-1;F--,B++)R+=256*N[F]>>>0,N[F]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");v=B,m++}for(var I=A-v;I!==A&&N[I]===0;)I++;for(var P=c.repeat(b);I<A;++I)P+=t.charAt(N[I]);return P}function f(h){if(typeof h!="string")throw new TypeError("Expected String");if(h.length===0)return new Uint8Array;var b=0;if(h[b]!==" "){for(var v=0,m=0;h[b]===c;)v++,b++;for(var T=(h.length-b)*d+1>>>0,A=new Uint8Array(T);h[b];){var N=n[h.charCodeAt(b)];if(N===255)return;for(var R=0,B=T-1;(N!==0||R<m)&&B!==-1;B--,R++)N+=o*A[B]>>>0,A[B]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");m=R,b++}if(h[b]!==" "){for(var F=T-m;F!==T&&A[F]===0;)F++;for(var I=new Uint8Array(v+(T-F)),P=v;F!==T;)I[P++]=A[F++];return I}}}function p(h){var b=f(h);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:u,decodeUnsafe:f,decode:p}}var Lve=$ve,Bve=Lve;const tq=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Fve=t=>new TextEncoder().encode(t),Uve=t=>new TextDecoder().decode(t);class jve{constructor(e,n,r){this.name=e,this.prefix=n,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Hve{constructor(e,n,r){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nq(this,e)}}class zve{constructor(e){this.decoders=e}or(e){return nq(this,e)}decode(e){const n=e[0],r=this.decoders[n];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const nq=(t,e)=>new zve({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class qve{constructor(e,n,r,a){this.name=e,this.prefix=n,this.baseEncode=r,this.baseDecode=a,this.encoder=new jve(e,n,r),this.decoder=new Hve(e,n,a)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const R3=({name:t,prefix:e,encode:n,decode:r})=>new qve(t,e,n,r),ih=({prefix:t,name:e,alphabet:n})=>{const{encode:r,decode:a}=Bve(n,e);return R3({prefix:t,name:e,encode:r,decode:i=>tq(a(i))})},Kve=(t,e,n,r)=>{const a={};for(let l=0;l<e.length;++l)a[e[l]]=l;let i=t.length;for(;t[i-1]==="=";)--i;const s=new Uint8Array(i*n/8|0);let o=0,c=0,d=0;for(let l=0;l<i;++l){const u=a[t[l]];if(u===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<n|u,o+=n,o>=8&&(o-=8,s[d++]=255&c>>o)}if(o>=n||255&c<<8-o)throw new SyntaxError("Unexpected end of data");return s},Vve=(t,e,n)=>{const r=e[e.length-1]==="=",a=(1<<n)-1;let i="",s=0,o=0;for(let c=0;c<t.length;++c)for(o=o<<8|t[c],s+=8;s>n;)s-=n,i+=e[a&o>>s];if(s&&(i+=e[a&o<<n-s]),r)for(;i.length*n&7;)i+="=";return i},er=({name:t,prefix:e,bitsPerChar:n,alphabet:r})=>R3({prefix:e,name:t,encode(a){return Vve(a,r,n)},decode(a){return Kve(a,r,n,t)}}),Wve=R3({prefix:"\0",name:"identity",encode:t=>Uve(t),decode:t=>Fve(t)});var Gve=Object.freeze({__proto__:null,identity:Wve});const Yve=er({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Jve=Object.freeze({__proto__:null,base2:Yve});const Zve=er({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Xve=Object.freeze({__proto__:null,base8:Zve});const Qve=ih({prefix:"9",name:"base10",alphabet:"0123456789"});var e7e=Object.freeze({__proto__:null,base10:Qve});const t7e=er({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),n7e=er({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var r7e=Object.freeze({__proto__:null,base16:t7e,base16upper:n7e});const a7e=er({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),i7e=er({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),s7e=er({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),o7e=er({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),c7e=er({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),d7e=er({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),l7e=er({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),u7e=er({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),f7e=er({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var p7e=Object.freeze({__proto__:null,base32:a7e,base32upper:i7e,base32pad:s7e,base32padupper:o7e,base32hex:c7e,base32hexupper:d7e,base32hexpad:l7e,base32hexpadupper:u7e,base32z:f7e});const h7e=ih({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),b7e=ih({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var y7e=Object.freeze({__proto__:null,base36:h7e,base36upper:b7e});const m7e=ih({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),g7e=ih({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var w7e=Object.freeze({__proto__:null,base58btc:m7e,base58flickr:g7e});const v7e=er({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),E7e=er({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),_7e=er({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),T7e=er({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var x7e=Object.freeze({__proto__:null,base64:v7e,base64pad:E7e,base64url:_7e,base64urlpad:T7e});const rq=Array.from(""),S7e=rq.reduce((t,e,n)=>(t[n]=e,t),[]),A7e=rq.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function C7e(t){return t.reduce((e,n)=>(e+=S7e[n],e),"")}function I7e(t){const e=[];for(const n of t){const r=A7e[n.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(r)}return new Uint8Array(e)}const O7e=R3({prefix:"",name:"base256emoji",encode:C7e,decode:I7e});var M7e=Object.freeze({__proto__:null,base256emoji:O7e}),P7e=aq,uk=128,k7e=127,N7e=~k7e,R7e=Math.pow(2,31);function aq(t,e,n){e=e||[],n=n||0;for(var r=n;t>=R7e;)e[n++]=t&255|uk,t/=128;for(;t&N7e;)e[n++]=t&255|uk,t>>>=7;return e[n]=t|0,aq.bytes=n-r+1,e}var D7e=Iv,$7e=128,fk=127;function Iv(t,r){var n=0,r=r||0,a=0,i=r,s,o=t.length;do{if(i>=o)throw Iv.bytes=0,new RangeError("Could not decode varint");s=t[i++],n+=a<28?(s&fk)<<a:(s&fk)*Math.pow(2,a),a+=7}while(s>=$7e);return Iv.bytes=i-r,n}var L7e=Math.pow(2,7),B7e=Math.pow(2,14),F7e=Math.pow(2,21),U7e=Math.pow(2,28),j7e=Math.pow(2,35),H7e=Math.pow(2,42),z7e=Math.pow(2,49),q7e=Math.pow(2,56),K7e=Math.pow(2,63),V7e=function(t){return t<L7e?1:t<B7e?2:t<F7e?3:t<U7e?4:t<j7e?5:t<H7e?6:t<z7e?7:t<q7e?8:t<K7e?9:10},W7e={encode:P7e,decode:D7e,encodingLength:V7e},iq=W7e;const pk=(t,e,n=0)=>(iq.encode(t,e,n),e),hk=t=>iq.encodingLength(t),Ov=(t,e)=>{const n=e.byteLength,r=hk(t),a=r+hk(n),i=new Uint8Array(a+n);return pk(t,i,0),pk(n,i,r),i.set(e,a),new G7e(t,n,e,i)};class G7e{constructor(e,n,r,a){this.code=e,this.size=n,this.digest=r,this.bytes=a}}const sq=({name:t,code:e,encode:n})=>new Y7e(t,e,n);class Y7e{constructor(e,n,r){this.name=e,this.code=n,this.encode=r}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?Ov(this.code,n):n.then(r=>Ov(this.code,r))}else throw Error("Unknown type, must be binary type")}}const oq=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),J7e=sq({name:"sha2-256",code:18,encode:oq("SHA-256")}),Z7e=sq({name:"sha2-512",code:19,encode:oq("SHA-512")});var X7e=Object.freeze({__proto__:null,sha256:J7e,sha512:Z7e});const cq=0,Q7e="identity",dq=tq,eEe=t=>Ov(cq,dq(t)),tEe={code:cq,name:Q7e,encode:dq,digest:eEe};var nEe=Object.freeze({__proto__:null,identity:tEe});new TextEncoder,new TextDecoder;const bk={...Gve,...Jve,...Xve,...e7e,...r7e,...p7e,...y7e,...w7e,...x7e,...M7e};({...X7e,...nEe});function rEe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}function lq(t,e,n,r){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:r}}}const yk=lq("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),D9=lq("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=rEe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),aEe={utf8:yk,"utf-8":yk,hex:bk.base16,latin1:D9,ascii:D9,binary:D9,...bk};function iEe(t,e="utf8"){const n=aEe[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t,"utf8"):n.decoder.decode(`${n.prefix}${t}`)}var sEe=Object.defineProperty,oEe=(t,e,n)=>e in t?sEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rs=(t,e,n)=>oEe(t,typeof e!="symbol"?e+"":e,n);class cEe{constructor(e,n){this.core=e,this.logger=n,rs(this,"keychain",new Map),rs(this,"name",ove),rs(this,"version",cve),rs(this,"initialized",!1),rs(this,"storagePrefix",Hs),rs(this,"init",async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}}),rs(this,"has",r=>(this.isInitialized(),this.keychain.has(r))),rs(this,"set",async(r,a)=>{this.isInitialized(),this.keychain.set(r,a),await this.persist()}),rs(this,"get",r=>{this.isInitialized();const a=this.keychain.get(r);if(typeof a>"u"){const{message:i}=Ne("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(i)}return a}),rs(this,"del",async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()}),this.core=e,this.logger=Dr(n,this.name)}get context(){return ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,fv(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?pv(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var dEe=Object.defineProperty,lEe=(t,e,n)=>e in t?dEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q0=(t,e,n)=>lEe(t,typeof e!="symbol"?e+"":e,n);class uEe{constructor(e,n,r){this.core=e,this.logger=n,q0(this,"name",ive),q0(this,"keychain"),q0(this,"randomSessionIdentifier",Tv()),q0(this,"initialized",!1),q0(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),q0(this,"hasKeys",a=>(this.isInitialized(),this.keychain.has(a))),q0(this,"getClientId",async()=>{this.isInitialized();const a=await this.getClientSeed(),i=KM(a);return TH(i.publicKey)}),q0(this,"generateKeyPair",()=>{this.isInitialized();const a=c4e();return this.setPrivateKey(a.publicKey,a.privateKey)}),q0(this,"signJWT",async a=>{this.isInitialized();const i=await this.getClientSeed(),s=KM(i),o=this.randomSessionIdentifier;return await x8e(o,a,sve,s)}),q0(this,"generateSharedKey",(a,i,s)=>{this.isInitialized();const o=this.getPrivateKey(a),c=d4e(o,i);return this.setSymKey(c,s)}),q0(this,"setSymKey",async(a,i)=>{this.isInitialized();const s=i||_2(a);return await this.keychain.set(s,a),s}),q0(this,"deleteKeyPair",async a=>{this.isInitialized(),await this.keychain.del(a)}),q0(this,"deleteSymKey",async a=>{this.isInitialized(),await this.keychain.del(a)}),q0(this,"encode",async(a,i,s)=>{this.isInitialized();const o=jz(s),c=kd(i);if(qP(o))return f4e(c,s==null?void 0:s.encoding);if(zP(o)){const f=o.senderPublicKey,p=o.receiverPublicKey;a=await this.generateSharedKey(f,p)}const d=this.getSymKey(a),{type:l,senderPublicKey:u}=o;return l4e({type:l,symKey:d,message:c,senderPublicKey:u,encoding:s==null?void 0:s.encoding})}),q0(this,"decode",async(a,i,s)=>{this.isInitialized();const o=h4e(i,s);if(qP(o)){const c=p4e(i,s==null?void 0:s.encoding);return W6(c)}if(zP(o)){const c=o.receiverPublicKey,d=o.senderPublicKey;a=await this.generateSharedKey(c,d)}try{const c=this.getSymKey(a),d=u4e({symKey:c,encoded:i,encoding:s==null?void 0:s.encoding});return W6(d)}catch(c){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(c)}}),q0(this,"getPayloadType",(a,i=Li)=>{const s=G5({encoded:a,encoding:i});return $d(s.type)}),q0(this,"getPayloadSenderPublicKey",(a,i=Li)=>{const s=G5({encoded:a,encoding:i});return s.senderPublicKey?ta(s.senderPublicKey,Mr):void 0}),this.core=e,this.logger=Dr(n,this.name),this.keychain=r||new cEe(this.core,this.logger)}get context(){return ca(this.logger)}async setPrivateKey(e,n){return await this.keychain.set(e,n),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(ck)}catch{e=Tv(),await this.keychain.set(ck,e)}return iEe(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var fEe=Object.defineProperty,pEe=Object.defineProperties,hEe=Object.getOwnPropertyDescriptors,mk=Object.getOwnPropertySymbols,bEe=Object.prototype.hasOwnProperty,yEe=Object.prototype.propertyIsEnumerable,Mv=(t,e,n)=>e in t?fEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,mEe=(t,e)=>{for(var n in e||(e={}))bEe.call(e,n)&&Mv(t,n,e[n]);if(mk)for(var n of mk(e))yEe.call(e,n)&&Mv(t,n,e[n]);return t},gEe=(t,e)=>pEe(t,hEe(e)),ya=(t,e,n)=>Mv(t,typeof e!="symbol"?e+"":e,n);class wEe extends Ehe{constructor(e,n){super(e,n),this.logger=e,this.core=n,ya(this,"messages",new Map),ya(this,"messagesWithoutClientAck",new Map),ya(this,"name",dve),ya(this,"version",lve),ya(this,"initialized",!1),ya(this,"storagePrefix",Hs),ya(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r);const a=await this.getRelayerMessagesWithoutClientAck();typeof a<"u"&&(this.messagesWithoutClientAck=a),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}}),ya(this,"set",async(r,a,i)=>{this.isInitialized();const s=ys(a);let o=this.messages.get(r);if(typeof o>"u"&&(o={}),typeof o[s]<"u")return s;if(o[s]=a,this.messages.set(r,o),i===T2.inbound){const c=this.messagesWithoutClientAck.get(r)||{};this.messagesWithoutClientAck.set(r,gEe(mEe({},c),{[s]:a}))}return await this.persist(),s}),ya(this,"get",r=>{this.isInitialized();let a=this.messages.get(r);return typeof a>"u"&&(a={}),a}),ya(this,"getWithoutAck",r=>{this.isInitialized();const a={};for(const i of r){const s=this.messagesWithoutClientAck.get(i)||{};a[i]=Object.values(s)}return a}),ya(this,"has",(r,a)=>{this.isInitialized();const i=this.get(r),s=ys(a);return typeof i[s]<"u"}),ya(this,"ack",async(r,a)=>{this.isInitialized();const i=this.messagesWithoutClientAck.get(r);if(typeof i>"u")return;const s=ys(a);delete i[s],Object.keys(i).length===0?this.messagesWithoutClientAck.delete(r):this.messagesWithoutClientAck.set(r,i),await this.persist()}),ya(this,"del",async r=>{this.isInitialized(),this.messages.delete(r),this.messagesWithoutClientAck.delete(r),await this.persist()}),this.logger=Dr(e,this.name),this.core=n}get context(){return ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,fv(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,fv(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?pv(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?pv(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var vEe=Object.defineProperty,EEe=Object.defineProperties,_Ee=Object.getOwnPropertyDescriptors,gk=Object.getOwnPropertySymbols,TEe=Object.prototype.hasOwnProperty,xEe=Object.prototype.propertyIsEnumerable,Pv=(t,e,n)=>e in t?vEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_b=(t,e)=>{for(var n in e||(e={}))TEe.call(e,n)&&Pv(t,n,e[n]);if(gk)for(var n of gk(e))xEe.call(e,n)&&Pv(t,n,e[n]);return t},$9=(t,e)=>EEe(t,_Ee(e)),Ci=(t,e,n)=>Pv(t,typeof e!="symbol"?e+"":e,n);class SEe extends _he{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,Ci(this,"events",new l0.EventEmitter),Ci(this,"name",uve),Ci(this,"queue",new Map),Ci(this,"publishTimeout",ke.toMiliseconds(ke.ONE_MINUTE)),Ci(this,"initialPublishTimeout",ke.toMiliseconds(ke.ONE_SECOND*15)),Ci(this,"needsTransportRestart",!1),Ci(this,"publish",async(r,a,i)=>{var s;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:a,opts:i}});const o=(i==null?void 0:i.ttl)||dk,c=O8(i),d=(i==null?void 0:i.prompt)||!1,l=(i==null?void 0:i.tag)||0,u=(i==null?void 0:i.id)||ad().toString(),f={topic:r,message:a,opts:{ttl:o,relay:c,prompt:d,tag:l,id:u,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}},p=`Failed to publish payload, please try again. id:${u} tag:${l}`;try{const h=new Promise(async b=>{const v=({id:T})=>{f.opts.id===T&&(this.removeRequestFromQueue(T),this.relayer.events.removeListener(S0.publish,v),b(f))};this.relayer.events.on(S0.publish,v);const m=n1(new Promise((T,A)=>{this.rpcPublish({topic:r,message:a,ttl:o,prompt:d,tag:l,id:u,attestation:i==null?void 0:i.attestation,tvf:i==null?void 0:i.tvf}).then(T).catch(N=>{this.logger.warn(N,N==null?void 0:N.message),A(N)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${u} tag:${l}`);try{await m,this.events.removeListener(S0.publish,v)}catch(T){this.queue.set(u,$9(_b({},f),{attempt:1})),this.logger.warn(T,T==null?void 0:T.message)}});this.logger.trace({type:"method",method:"publish",params:{id:u,topic:r,message:a,opts:i}}),await n1(h,this.publishTimeout,p)}catch(h){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(h),(s=i==null?void 0:i.internal)!=null&&s.throwOnFailedPublish)throw h}finally{this.queue.delete(u)}}),Ci(this,"on",(r,a)=>{this.events.on(r,a)}),Ci(this,"once",(r,a)=>{this.events.once(r,a)}),Ci(this,"off",(r,a)=>{this.events.off(r,a)}),Ci(this,"removeListener",(r,a)=>{this.events.removeListener(r,a)}),this.relayer=e,this.logger=Dr(n,this.name),this.registerEventListeners()}get context(){return ca(this.logger)}async rpcPublish(e){var n,r,a,i;const{topic:s,message:o,ttl:c=dk,prompt:d,tag:l,id:u,attestation:f,tvf:p}=e,h={method:jf(O8().protocol).publish,params:_b({topic:s,message:o,ttl:c,prompt:d,tag:l,attestation:f},p),id:u};dr((n=h.params)==null?void 0:n.prompt)&&((r=h.params)==null||delete r.prompt),dr((a=h.params)==null?void 0:a.tag)&&((i=h.params)==null||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:h});const b=await this.relayer.request(h);return this.relayer.events.emit(S0.publish,e),this.logger.debug("Successfully Published Payload"),b}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,n)=>{const r=e.attempt+1;this.queue.set(n,$9(_b({},e),{attempt:r}));const{topic:a,message:i,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish($9(_b({},e),{topic:a,message:i,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(il.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(S0.connection_stalled);return}this.checkQueue()}),this.relayer.on(S0.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var AEe=Object.defineProperty,CEe=(t,e,n)=>e in t?AEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nl=(t,e,n)=>CEe(t,typeof e!="symbol"?e+"":e,n);class IEe{constructor(){Nl(this,"map",new Map),Nl(this,"set",(e,n)=>{const r=this.get(e);this.exists(e,n)||this.map.set(e,[...r,n])}),Nl(this,"get",e=>this.map.get(e)||[]),Nl(this,"exists",(e,n)=>this.get(e).includes(n)),Nl(this,"delete",(e,n)=>{if(typeof n>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,n))return;const a=r.filter(i=>i!==n);if(!a.length){this.map.delete(e);return}this.map.set(e,a)}),Nl(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var OEe=Object.defineProperty,MEe=Object.defineProperties,PEe=Object.getOwnPropertyDescriptors,wk=Object.getOwnPropertySymbols,kEe=Object.prototype.hasOwnProperty,NEe=Object.prototype.propertyIsEnumerable,kv=(t,e,n)=>e in t?OEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,If=(t,e)=>{for(var n in e||(e={}))kEe.call(e,n)&&kv(t,n,e[n]);if(wk)for(var n of wk(e))NEe.call(e,n)&&kv(t,n,e[n]);return t},L9=(t,e)=>MEe(t,PEe(e)),dn=(t,e,n)=>kv(t,typeof e!="symbol"?e+"":e,n);class REe extends She{constructor(e,n){super(e,n),this.relayer=e,this.logger=n,dn(this,"subscriptions",new Map),dn(this,"topicMap",new IEe),dn(this,"events",new l0.EventEmitter),dn(this,"name",gve),dn(this,"version",wve),dn(this,"pending",new Map),dn(this,"cached",[]),dn(this,"initialized",!1),dn(this,"storagePrefix",Hs),dn(this,"subscribeTimeout",ke.toMiliseconds(ke.ONE_MINUTE)),dn(this,"initialSubscribeTimeout",ke.toMiliseconds(ke.ONE_SECOND*15)),dn(this,"clientId"),dn(this,"batchSubscribeTopicsLimit",500),dn(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),dn(this,"subscribe",async(r,a)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:a}});try{const i=O8(a),s={topic:r,relay:i,transportType:a==null?void 0:a.transportType};this.pending.set(r,s);const o=await this.rpcSubscribe(r,i,a);return typeof o=="string"&&(this.onSubscribe(o,s),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:a}})),o}catch(i){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(i),i}}),dn(this,"unsubscribe",async(r,a)=>{this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(r,a.id,a):await this.unsubscribeByTopic(r,a)}),dn(this,"isSubscribed",r=>new Promise(a=>{a(this.topicMap.topics.includes(r))})),dn(this,"isKnownTopic",r=>new Promise(a=>{a(this.topicMap.topics.includes(r)||this.pending.has(r)||this.cached.some(i=>i.topic===r))})),dn(this,"on",(r,a)=>{this.events.on(r,a)}),dn(this,"once",(r,a)=>{this.events.once(r,a)}),dn(this,"off",(r,a)=>{this.events.off(r,a)}),dn(this,"removeListener",(r,a)=>{this.events.removeListener(r,a)}),dn(this,"start",async()=>{await this.onConnect()}),dn(this,"stop",async()=>{await this.onDisconnect()}),dn(this,"restart",async()=>{await this.restore(),await this.onRestart()}),dn(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const r=[];this.pending.forEach(a=>{r.push(a)}),await this.batchSubscribe(r)}),dn(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(il.pulse,async()=>{await this.checkPending()}),this.events.on(ga.created,async r=>{const a=ga.created;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:r}),await this.persist()}),this.events.on(ga.deleted,async r=>{const a=ga.deleted;this.logger.info(`Emitting ${a}`),this.logger.debug({type:"event",event:a,data:r}),await this.persist()})}),this.relayer=e,this.logger=Dr(n,this.name),this.clientId=""}get context(){return ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,n){let r=!1;try{r=this.getSubscription(e).topic===n}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,n){const r=this.topicMap.get(e);await Promise.all(r.map(async a=>await this.unsubscribeById(e,a,n)))}async unsubscribeById(e,n,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}});try{const a=O8(r);await this.restartToComplete({topic:e,id:n,relay:a}),await this.rpcUnsubscribe(e,n,a);const i=tn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,n,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:n,opts:r}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(e,n,r){var a;(!r||(r==null?void 0:r.transportType)===Tn.relay)&&await this.restartToComplete({topic:e,id:e,relay:n});const i={method:jf(n.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const s=(a=r==null?void 0:r.internal)==null?void 0:a.throwOnFailedPublish;try{const o=await this.getSubscriptionId(e);if((r==null?void 0:r.transportType)===Tn.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch(l=>this.logger.warn(l))},ke.toMiliseconds(ke.ONE_SECOND)),o;const c=new Promise(async l=>{const u=f=>{f.topic===e&&(this.events.removeListener(ga.created,u),l(f.id))};this.events.on(ga.created,u);try{const f=await n1(new Promise((p,h)=>{this.relayer.request(i).catch(b=>{this.logger.warn(b,b==null?void 0:b.message),h(b)}).then(p)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ga.created,u),l(f)}catch{}}),d=await n1(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!d&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return d?o:null}catch(o){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(S0.connection_stalled),s)throw o}return null}async rpcBatchSubscribe(e){if(!e.length)return;const n=e[0].relay,r={method:jf(n.protocol).batchSubscribe,params:{topics:e.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await n1(new Promise(a=>{this.relayer.request(r).catch(i=>this.logger.warn(i)).then(a)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(S0.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const n=e[0].relay,r={method:jf(n.protocol).batchFetchMessages,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});let a;try{a=await await n1(new Promise((i,s)=>{this.relayer.request(r).catch(o=>{this.logger.warn(o),s(o)}).then(i)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(S0.connection_stalled)}return a}rpcUnsubscribe(e,n,r){const a={method:jf(r.protocol).unsubscribe,params:{topic:e,id:n}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(e,n){this.setSubscription(e,L9(If({},n),{id:e})),this.pending.delete(n.topic)}onBatchSubscribe(e){e.length&&e.forEach(n=>{this.setSubscription(n.id,If({},n)),this.pending.delete(n.topic)})}async onUnsubscribe(e,n,r){this.events.removeAllListeners(n),this.hasSubscription(n,e)&&this.deleteSubscription(n,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,n){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:n}),this.addSubscription(e,n)}addSubscription(e,n){this.subscriptions.set(e,If({},n)),this.topicMap.set(n.topic,e),this.events.emit(ga.created,n)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const n=this.subscriptions.get(e);if(!n){const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}deleteSubscription(e,n){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:n});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(ga.deleted,L9(If({},r),{reason:n}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ga.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const a=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(a)}}this.events.emit(ga.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:n}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async n=>L9(If({},n),{id:await this.getSubscriptionId(n.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const n=await this.rpcBatchFetchMessages(e);n&&n.messages&&(await Yme(ke.toMiliseconds(ke.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(n.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return ys(e+await this.getClientId())}}var DEe=Object.defineProperty,vk=Object.getOwnPropertySymbols,$Ee=Object.prototype.hasOwnProperty,LEe=Object.prototype.propertyIsEnumerable,Nv=(t,e,n)=>e in t?DEe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ek=(t,e)=>{for(var n in e||(e={}))$Ee.call(e,n)&&Nv(t,n,e[n]);if(vk)for(var n of vk(e))LEe.call(e,n)&&Nv(t,n,e[n]);return t},zt=(t,e,n)=>Nv(t,typeof e!="symbol"?e+"":e,n);class BEe extends The{constructor(e){super(e),zt(this,"protocol","wc"),zt(this,"version",2),zt(this,"core"),zt(this,"logger"),zt(this,"events",new l0.EventEmitter),zt(this,"provider"),zt(this,"messages"),zt(this,"subscriber"),zt(this,"publisher"),zt(this,"name",pve),zt(this,"transportExplicitlyClosed",!1),zt(this,"initialized",!1),zt(this,"connectionAttemptInProgress",!1),zt(this,"relayUrl"),zt(this,"projectId"),zt(this,"packageName"),zt(this,"bundleId"),zt(this,"hasExperiencedNetworkDisruption",!1),zt(this,"pingTimeout"),zt(this,"heartBeatTimeout",ke.toMiliseconds(ke.THIRTY_SECONDS+ke.FIVE_SECONDS)),zt(this,"reconnectTimeout"),zt(this,"connectPromise"),zt(this,"reconnectInProgress",!1),zt(this,"requestsInFlight",[]),zt(this,"connectTimeout",ke.toMiliseconds(ke.ONE_SECOND*15)),zt(this,"request",async n=>{var r,a;this.logger.debug("Publishing Request Payload");const i=n.id||ad().toString();await this.toEstablishConnection();try{this.logger.trace({id:i,method:n.method,topic:(r=n.params)==null?void 0:r.topic},"relayer.request - publishing...");const s=`${i}:${((a=n.params)==null?void 0:a.tag)||""}`;this.requestsInFlight.push(s);const o=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==s),o}catch(s){throw this.logger.debug(`Failed to Publish Request: ${i}`),s}}),zt(this,"resetPingTimeout",()=>{C8()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,r,a,i;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(i=(a=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null?void 0:a.terminate)==null||i.call(a)}catch(s){this.logger.warn(s,s==null?void 0:s.message)}},this.heartBeatTimeout))}),zt(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),zt(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(S0.connect)}),zt(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),zt(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(S0.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),zt(this,"registerProviderListeners",()=>{this.provider.on(Va.payload,this.onPayloadHandler),this.provider.on(Va.connect,this.onConnectHandler),this.provider.on(Va.disconnect,this.onDisconnectHandler),this.provider.on(Va.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Dr(e.logger,this.name):v3(DT({level:e.logger||fve})),this.messages=new wEe(this.logger,e.core),this.subscriber=new REe(this,this.logger),this.publisher=new SEe(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Qz,this.projectId=e.projectId,Nme()?this.packageName=pP():Rme()&&(this.bundleId=pP()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e==null?void 0:e.message)}}get context(){return ca(this.logger)}get connected(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===1||!1}get connecting(){var e,n,r;return((r=(n=(e=this.provider)==null?void 0:e.connection)==null?void 0:n.socket)==null?void 0:r.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,n,r){this.isInitialized(),await this.publisher.publish(e,n,r),await this.recordMessageEvent({topic:e,message:n,publishedAt:Date.now(),transportType:Tn.relay},T2.outbound)}async subscribe(e,n){var r,a,i;this.isInitialized(),(!(n!=null&&n.transportType)||(n==null?void 0:n.transportType)==="relay")&&await this.toEstablishConnection();const s=typeof((r=n==null?void 0:n.internal)==null?void 0:r.throwOnFailedPublish)>"u"?!0:(a=n==null?void 0:n.internal)==null?void 0:a.throwOnFailedPublish;let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"",c;const d=l=>{l.topic===e&&(this.subscriber.off(ga.created,d),c())};return await Promise.all([new Promise(l=>{c=l,this.subscriber.on(ga.created,d)}),new Promise(async(l,u)=>{o=await this.subscriber.subscribe(e,Ek({internal:{throwOnFailedPublish:s}},n)).catch(f=>{s&&u(f)})||o,l()})]),o}async unsubscribe(e,n){this.isInitialized(),await this.subscriber.unsubscribe(e,n)}on(e,n){this.events.on(e,n)}once(e,n){this.events.once(e,n)}off(e,n){this.events.off(e,n)}removeListener(e,n){this.events.removeListener(e,n)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await n1(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.warn("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(n,r)=>{await this.connect(e).then(n).catch(r).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await tk())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const n=e.sort((r,a)=>r.publishedAt-a.publishedAt);this.logger.debug(`Batch of ${n.length} message events sorted`);for(const r of n)try{await this.onMessageEvent(r)}catch(a){this.logger.warn(a,"Error while processing batch message event: "+(a==null?void 0:a.message))}this.logger.trace(`Batch of ${n.length} message events processed`)}async onLinkMessageEvent(e,n){const{topic:r}=e;if(!n.sessionExists){const a=r0(ke.FIVE_MINUTES),i={topic:r,expiry:a,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,i)}this.events.emit(S0.message,e),await this.recordMessageEvent(e,T2.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let n=1;for(;n<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${n}...`),await this.createProvider(),await new Promise(async(r,a)=>{const i=()=>{a(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Va.disconnect,i),await n1(new Promise((s,o)=>{this.provider.connect().then(s).catch(o)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>{a(s)}).finally(()=>{this.provider.off(Va.disconnect,i),clearTimeout(this.reconnectTimeout)}),await new Promise(async(s,o)=>{const c=()=>{o(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Va.disconnect,c),await this.subscriber.start().then(s).catch(o).finally(()=>{this.provider.off(Va.disconnect,c)})}),this.hasExperiencedNetworkDisruption=!1,r()})}catch(r){await this.subscriber.stop();const a=r;this.logger.warn({},a.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${n}`);break}await new Promise(r=>setTimeout(r,ke.toMiliseconds(n*1))),n++}}startPingTimeout(){var e,n,r,a,i;if(C8())try{(n=(e=this.provider)==null?void 0:e.connection)!=null&&n.socket&&((i=(a=(r=this.provider)==null?void 0:r.connection)==null?void 0:a.socket)==null||i.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(s){this.logger.warn(s,s==null?void 0:s.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Zwe(new tve(Fme({sdkVersion:Cv,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,n){const{topic:r,message:a}=e;await this.messages.set(r,a,n)}async shouldIgnoreMessageEvent(e){const{topic:n,message:r}=e;if(!r||r.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(n))return this.logger.warn(`Ignoring message for unknown topic ${n}`),!0;const a=this.messages.has(n,r);return a&&this.logger.warn(`Ignoring duplicate message: ${r}`),a}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),ix(e)){if(!e.method.endsWith(hve))return;const n=e.params,{topic:r,message:a,publishedAt:i,attestation:s}=n.data,o={topic:r,message:a,publishedAt:i,transportType:Tn.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ek({type:"event",event:n.id},o)),this.events.emit(n.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else N3(e)&&this.events.emit(S0.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,T2.inbound),this.events.emit(S0.message,e))}async acknowledgePayload(e){const n=rx(e.id,!0);await this.provider.connection.send(n)}unregisterProviderListeners(){this.provider.off(Va.payload,this.onPayloadHandler),this.provider.off(Va.connect,this.onConnectHandler),this.provider.off(Va.disconnect,this.onDisconnectHandler),this.provider.off(Va.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await tk();cwe(async n=>{e!==n&&(e=n,n?await this.transportOpen().catch(r=>this.logger.error(r,r==null?void 0:r.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(il.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&uwe())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(n){this.logger.warn(n,n==null?void 0:n.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(S0.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},ke.toMiliseconds(bve)))))}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function FEe(){}function _k(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function Tk(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function xk(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const UEe="[object RegExp]",jEe="[object String]",HEe="[object Number]",zEe="[object Boolean]",Sk="[object Arguments]",qEe="[object Symbol]",KEe="[object Date]",VEe="[object Map]",WEe="[object Set]",GEe="[object Array]",YEe="[object Function]",JEe="[object ArrayBuffer]",B9="[object Object]",ZEe="[object Error]",XEe="[object DataView]",QEe="[object Uint8Array]",e_e="[object Uint8ClampedArray]",t_e="[object Uint16Array]",n_e="[object Uint32Array]",r_e="[object BigUint64Array]",a_e="[object Int8Array]",i_e="[object Int16Array]",s_e="[object Int32Array]",o_e="[object BigInt64Array]",c_e="[object Float32Array]",d_e="[object Float64Array]";function l_e(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function u_e(t,e,n){return Hf(t,e,void 0,void 0,void 0,void 0,n)}function Hf(t,e,n,r,a,i,s){const o=s(t,e,n,r,a,i);if(o!==void 0)return o;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return u5(t,e,i,s)}return u5(t,e,i,s)}function u5(t,e,n,r){if(Object.is(t,e))return!0;let a=xk(t),i=xk(e);if(a===Sk&&(a=B9),i===Sk&&(i=B9),a!==i)return!1;switch(a){case jEe:return t.toString()===e.toString();case HEe:{const c=t.valueOf(),d=e.valueOf();return l_e(c,d)}case zEe:case KEe:case qEe:return Object.is(t.valueOf(),e.valueOf());case UEe:return t.source===e.source&&t.flags===e.flags;case YEe:return t===e}n=n??new Map;const s=n.get(t),o=n.get(e);if(s!=null&&o!=null)return s===e;n.set(t,e),n.set(e,t);try{switch(a){case VEe:{if(t.size!==e.size)return!1;for(const[c,d]of t.entries())if(!e.has(c)||!Hf(d,e.get(c),c,t,e,n,r))return!1;return!0}case WEe:{if(t.size!==e.size)return!1;const c=Array.from(t.values()),d=Array.from(e.values());for(let l=0;l<c.length;l++){const u=c[l],f=d.findIndex(p=>Hf(u,p,void 0,t,e,n,r));if(f===-1)return!1;d.splice(f,1)}return!0}case GEe:case QEe:case e_e:case t_e:case n_e:case r_e:case a_e:case i_e:case s_e:case o_e:case c_e:case d_e:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let c=0;c<t.length;c++)if(!Hf(t[c],e[c],c,t,e,n,r))return!1;return!0}case JEe:return t.byteLength!==e.byteLength?!1:u5(new Uint8Array(t),new Uint8Array(e),n,r);case XEe:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:u5(new Uint8Array(t),new Uint8Array(e),n,r);case ZEe:return t.name===e.name&&t.message===e.message;case B9:{if(!(u5(t.constructor,e.constructor,n,r)||_k(t)&&_k(e)))return!1;const c=[...Object.keys(t),...Tk(t)],d=[...Object.keys(e),...Tk(e)];if(c.length!==d.length)return!1;for(let l=0;l<c.length;l++){const u=c[l],f=t[u];if(!Object.hasOwn(e,u))return!1;const p=e[u];if(!Hf(f,p,u,t,e,n,r))return!1}return!0}default:return!1}}finally{n.delete(t),n.delete(e)}}function f_e(t,e){return u_e(t,e,FEe)}var p_e=Object.defineProperty,Ak=Object.getOwnPropertySymbols,h_e=Object.prototype.hasOwnProperty,b_e=Object.prototype.propertyIsEnumerable,Rv=(t,e,n)=>e in t?p_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ck=(t,e)=>{for(var n in e||(e={}))h_e.call(e,n)&&Rv(t,n,e[n]);if(Ak)for(var n of Ak(e))b_e.call(e,n)&&Rv(t,n,e[n]);return t},zr=(t,e,n)=>Rv(t,typeof e!="symbol"?e+"":e,n);class cl extends xhe{constructor(e,n,r,a=Hs,i=void 0){super(e,n,r,a),this.core=e,this.logger=n,this.name=r,zr(this,"map",new Map),zr(this,"version",yve),zr(this,"cached",[]),zr(this,"initialized",!1),zr(this,"getKey"),zr(this,"storagePrefix",Hs),zr(this,"recentlyDeleted",[]),zr(this,"recentlyDeletedLimit",200),zr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>{this.getKey&&s!==null&&!dr(s)?this.map.set(this.getKey(s),s):F4e(s)?this.map.set(s.id,s):U4e(s)&&this.map.set(s.topic,s)}),this.cached=[],this.initialized=!0)}),zr(this,"set",async(s,o)=>{this.isInitialized(),this.map.has(s)?await this.update(s,o):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:s,value:o}),this.map.set(s,o),await this.persist())}),zr(this,"get",s=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:s}),this.getData(s))),zr(this,"getAll",s=>(this.isInitialized(),s?this.values.filter(o=>Object.keys(s).every(c=>f_e(o[c],s[c]))):this.values)),zr(this,"update",async(s,o)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:s,update:o});const c=Ck(Ck({},this.getData(s)),o);this.map.set(s,c),await this.persist()}),zr(this,"delete",async(s,o)=>{this.isInitialized(),this.map.has(s)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:s,reason:o}),this.map.delete(s),this.addToRecentlyDeleted(s),await this.persist())}),this.logger=Dr(n,this.name),this.storagePrefix=a,this.getKey=i}get context(){return ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const n=this.map.get(e);if(!n){if(this.recentlyDeleted.includes(e)){const{message:a}=Ne("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(a),new Error(a)}const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return n}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:n}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var y_e=Object.defineProperty,m_e=(t,e,n)=>e in t?y_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Nt=(t,e,n)=>m_e(t,typeof e!="symbol"?e+"":e,n);class g_e{constructor(e,n){this.core=e,this.logger=n,Nt(this,"name",vve),Nt(this,"version",Eve),Nt(this,"events",new wD),Nt(this,"pairings"),Nt(this,"initialized",!1),Nt(this,"storagePrefix",Hs),Nt(this,"ignoredPayloadTypes",[Fo]),Nt(this,"registeredMethods",[]),Nt(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),Nt(this,"register",({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]}),Nt(this,"create",async r=>{this.isInitialized();const a=Tv(),i=await this.core.crypto.setSymKey(a),s=r0(ke.FIVE_MINUTES),o={protocol:Xz},c={topic:i,expiry:s,relay:o,active:!1,methods:r==null?void 0:r.methods},d=VP({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:a,relay:o,expiryTimestamp:s,methods:r==null?void 0:r.methods});return this.events.emit(K1.create,c),this.core.expirer.set(i,s),await this.pairings.set(i,c),await this.core.relayer.subscribe(i,{transportType:r==null?void 0:r.transportType}),{topic:i,uri:d}}),Nt(this,"pair",async r=>{this.isInitialized();const a=this.core.eventClient.createEvent({properties:{topic:r==null?void 0:r.uri,trace:[ds.pairing_started]}});this.isValidPair(r,a);const{topic:i,symKey:s,relay:o,expiryTimestamp:c,methods:d}=KP(r.uri);a.props.properties.topic=i,a.addTrace(ds.pairing_uri_validation_success),a.addTrace(ds.pairing_uri_not_expired);let l;if(this.pairings.keys.includes(i)){if(l=this.pairings.get(i),a.addTrace(ds.existing_pairing),l.active)throw a.setError(go.active_pairing_already_exists),new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);a.addTrace(ds.pairing_not_expired)}const u=c||r0(ke.FIVE_MINUTES),f={topic:i,relay:o,expiry:u,active:!1,methods:d};this.core.expirer.set(i,u),await this.pairings.set(i,f),a.addTrace(ds.store_new_pairing),r.activatePairing&&await this.activate({topic:i}),this.events.emit(K1.create,f),a.addTrace(ds.emit_inactive_pairing),this.core.crypto.keychain.has(i)||await this.core.crypto.setSymKey(s,i),a.addTrace(ds.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{a.setError(go.no_internet_connection)}try{await this.core.relayer.subscribe(i,{relay:o})}catch(p){throw a.setError(go.subscribe_pairing_topic_failure),p}return a.addTrace(ds.subscribe_pairing_topic_success),f}),Nt(this,"activate",async({topic:r})=>{this.isInitialized();const a=r0(ke.FIVE_MINUTES);this.core.expirer.set(r,a),await this.pairings.update(r,{active:!0,expiry:a})}),Nt(this,"ping",async r=>{this.isInitialized(),await this.isValidPing(r),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:a}=r;if(this.pairings.keys.includes(a)){const i=await this.sendRequest(a,"wc_pairingPing",{}),{done:s,resolve:o,reject:c}=F1();this.events.once(Yt("pairing_ping",i),({error:d})=>{d?c(d):o()}),await s()}}),Nt(this,"updateExpiry",async({topic:r,expiry:a})=>{this.isInitialized(),await this.pairings.update(r,{expiry:a})}),Nt(this,"updateMetadata",async({topic:r,metadata:a})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:a})}),Nt(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),Nt(this,"disconnect",async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:a}=r;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",tn("USER_DISCONNECTED")),await this.deletePairing(a))}),Nt(this,"formatUriFromPairing",r=>{this.isInitialized();const{topic:a,relay:i,expiry:s,methods:o}=r,c=this.core.crypto.keychain.get(a);return VP({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:c,relay:i,expiryTimestamp:s,methods:o})}),Nt(this,"sendRequest",async(r,a,i)=>{const s=id(a,i),o=await this.core.crypto.encode(r,s),c=Af[a].req;return this.core.history.set(r,s),this.core.relayer.publish(r,o,c),s.id}),Nt(this,"sendResult",async(r,a,i)=>{const s=rx(r,i),o=await this.core.crypto.encode(a,s),c=(await this.core.history.get(a,r)).request.method,d=Af[c].res;await this.core.relayer.publish(a,o,d),await this.core.history.resolve(s)}),Nt(this,"sendError",async(r,a,i)=>{const s=ax(r,i),o=await this.core.crypto.encode(a,s),c=(await this.core.history.get(a,r)).request.method,d=Af[c]?Af[c].res:Af.unregistered_method.res;await this.core.relayer.publish(a,o,d),await this.core.history.resolve(s)}),Nt(this,"deletePairing",async(r,a)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,tn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),a?Promise.resolve():this.core.expirer.del(r)])}),Nt(this,"cleanup",async()=>{const r=this.pairings.getAll().filter(a=>Fc(a.expiry));await Promise.all(r.map(a=>this.deletePairing(a.topic)))}),Nt(this,"onRelayEventRequest",async r=>{const{topic:a,payload:i}=r;switch(i.method){case"wc_pairingPing":return await this.onPairingPingRequest(a,i);case"wc_pairingDelete":return await this.onPairingDeleteRequest(a,i);default:return await this.onUnknownRpcMethodRequest(a,i)}}),Nt(this,"onRelayEventResponse",async r=>{const{topic:a,payload:i}=r,s=(await this.core.history.get(a,i.id)).request.method;switch(s){case"wc_pairingPing":return this.onPairingPingResponse(a,i);default:return this.onUnknownRpcMethodResponse(s)}}),Nt(this,"onPairingPingRequest",async(r,a)=>{const{id:i}=a;try{this.isValidPing({topic:r}),await this.sendResult(i,r,!0),this.events.emit(K1.ping,{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.logger.error(s)}}),Nt(this,"onPairingPingResponse",(r,a)=>{const{id:i}=a;setTimeout(()=>{us(a)?this.events.emit(Yt("pairing_ping",i),{}):ii(a)&&this.events.emit(Yt("pairing_ping",i),{error:a.error})},500)}),Nt(this,"onPairingDeleteRequest",async(r,a)=>{const{id:i}=a;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(K1.delete,{id:i,topic:r})}catch(s){await this.sendError(i,r,s),this.logger.error(s)}}),Nt(this,"onUnknownRpcMethodRequest",async(r,a)=>{const{id:i,method:s}=a;try{if(this.registeredMethods.includes(s))return;const o=tn("WC_METHOD_UNSUPPORTED",s);await this.sendError(i,r,o),this.logger.error(o)}catch(o){await this.sendError(i,r,o),this.logger.error(o)}}),Nt(this,"onUnknownRpcMethodResponse",r=>{this.registeredMethods.includes(r)||this.logger.error(tn("WC_METHOD_UNSUPPORTED",r))}),Nt(this,"isValidPair",(r,a)=>{var i;if(!Wr(r)){const{message:o}=Ne("MISSING_OR_INVALID",`pair() params: ${r}`);throw a.setError(go.malformed_pairing_uri),new Error(o)}if(!B4e(r.uri)){const{message:o}=Ne("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw a.setError(go.malformed_pairing_uri),new Error(o)}const s=KP(r==null?void 0:r.uri);if(!((i=s==null?void 0:s.relay)!=null&&i.protocol)){const{message:o}=Ne("MISSING_OR_INVALID","pair() uri#relay-protocol");throw a.setError(go.malformed_pairing_uri),new Error(o)}if(!(s!=null&&s.symKey)){const{message:o}=Ne("MISSING_OR_INVALID","pair() uri#symKey");throw a.setError(go.malformed_pairing_uri),new Error(o)}if(s!=null&&s.expiryTimestamp&&ke.toMiliseconds(s==null?void 0:s.expiryTimestamp)<Date.now()){a.setError(go.pairing_expired);const{message:o}=Ne("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(o)}}),Nt(this,"isValidPing",async r=>{if(!Wr(r)){const{message:i}=Ne("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:a}=r;await this.isValidPairingTopic(a)}),Nt(this,"isValidDisconnect",async r=>{if(!Wr(r)){const{message:i}=Ne("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:a}=r;await this.isValidPairingTopic(a)}),Nt(this,"isValidPairingTopic",async r=>{if(!Xn(r,!1)){const{message:a}=Ne("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(a)}if(!this.pairings.keys.includes(r)){const{message:a}=Ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(a)}if(Fc(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:a}=Ne("EXPIRED",`pairing topic: ${r}`);throw new Error(a)}}),this.core=e,this.logger=Dr(n,this.name),this.pairings=new cl(this.core,this.logger,this.name,this.storagePrefix)}get context(){return ca(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(S0.message,async e=>{const{topic:n,message:r,transportType:a}=e;if(this.pairings.keys.includes(n)&&a!==Tn.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const i=await this.core.crypto.decode(n,r);ix(i)?(this.core.history.set(n,i),await this.onRelayEventRequest({topic:n,payload:i})):N3(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:n,payload:i}),this.core.history.delete(n,i.id)),await this.core.relayer.messages.ack(n,r)}catch(i){this.logger.error(i)}})}registerExpirerEvents(){this.core.expirer.on(Qa.expired,async e=>{const{topic:n}=cz(e.target);n&&this.pairings.keys.includes(n)&&(await this.deletePairing(n,!0),this.events.emit(K1.expire,{topic:n}))})}}var w_e=Object.defineProperty,v_e=(t,e,n)=>e in t?w_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K0=(t,e,n)=>v_e(t,typeof e!="symbol"?e+"":e,n);class E_e extends vhe{constructor(e,n){super(e,n),this.core=e,this.logger=n,K0(this,"records",new Map),K0(this,"events",new l0.EventEmitter),K0(this,"name",_ve),K0(this,"version",Tve),K0(this,"cached",[]),K0(this,"initialized",!1),K0(this,"storagePrefix",Hs),K0(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),K0(this,"set",(r,a,i)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:a,chainId:i}),this.records.has(a.id))return;const s={id:a.id,topic:r,request:{method:a.method,params:a.params||null},chainId:i,expiry:r0(ke.THIRTY_DAYS)};this.records.set(s.id,s),this.persist(),this.events.emit(Si.created,s)}),K0(this,"resolve",async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const a=await this.getRecord(r.id);typeof a.response>"u"&&(a.response=ii(r)?{error:r.error}:{result:r.result},this.records.set(a.id,a),this.persist(),this.events.emit(Si.updated,a))}),K0(this,"get",async(r,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:a}),await this.getRecord(a))),K0(this,"delete",(r,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(i=>{if(i.topic===r){if(typeof a<"u"&&i.id!==a)return;this.records.delete(i.id),this.events.emit(Si.deleted,i)}}),this.persist()}),K0(this,"exists",async(r,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===r:!1)),K0(this,"on",(r,a)=>{this.events.on(r,a)}),K0(this,"once",(r,a)=>{this.events.once(r,a)}),K0(this,"off",(r,a)=>{this.events.off(r,a)}),K0(this,"removeListener",(r,a)=>{this.events.removeListener(r,a)}),this.logger=Dr(n,this.name)}get context(){return ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(n=>{if(typeof n.response<"u")return;const r={topic:n.topic,request:id(n.request.method,n.request.params,n.id),chainId:n.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const n=this.records.get(e);if(!n){const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return n}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Si.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:n}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Si.created,e=>{const n=Si.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Si.updated,e=>{const n=Si.updated;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.events.on(Si.deleted,e=>{const n=Si.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,record:e})}),this.core.heartbeat.on(il.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(n=>{ke.toMiliseconds(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.records.delete(n.id),this.events.emit(Si.deleted,n,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var __e=Object.defineProperty,T_e=(t,e,n)=>e in t?__e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,rr=(t,e,n)=>T_e(t,typeof e!="symbol"?e+"":e,n);class x_e extends Ahe{constructor(e,n){super(e,n),this.core=e,this.logger=n,rr(this,"expirations",new Map),rr(this,"events",new l0.EventEmitter),rr(this,"name",xve),rr(this,"version",Sve),rr(this,"cached",[]),rr(this,"initialized",!1),rr(this,"storagePrefix",Hs),rr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),rr(this,"has",r=>{try{const a=this.formatTarget(r);return typeof this.getExpiration(a)<"u"}catch{return!1}}),rr(this,"set",(r,a)=>{this.isInitialized();const i=this.formatTarget(r),s={target:i,expiry:a};this.expirations.set(i,s),this.checkExpiry(i,s),this.events.emit(Qa.created,{target:i,expiration:s})}),rr(this,"get",r=>{this.isInitialized();const a=this.formatTarget(r);return this.getExpiration(a)}),rr(this,"del",r=>{if(this.isInitialized(),this.has(r)){const a=this.formatTarget(r),i=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Qa.deleted,{target:a,expiration:i})}}),rr(this,"on",(r,a)=>{this.events.on(r,a)}),rr(this,"once",(r,a)=>{this.events.once(r,a)}),rr(this,"off",(r,a)=>{this.events.off(r,a)}),rr(this,"removeListener",(r,a)=>{this.events.removeListener(r,a)}),this.logger=Dr(n,this.name)}get context(){return ca(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Ume(e);if(typeof e=="number")return jme(e);const{message:n}=Ne("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(n)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Qa.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:n}=Ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(n),new Error(n)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const n=this.expirations.get(e);if(!n){const{message:r}=Ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(r),new Error(r)}return n}checkExpiry(e,n){const{expiry:r}=n;ke.toMiliseconds(r)-Date.now()<=0&&this.expire(e,n)}expire(e,n){this.expirations.delete(e),this.events.emit(Qa.expired,{target:e,expiration:n})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,n)=>this.checkExpiry(n,e))}registerEventListeners(){this.core.heartbeat.on(il.pulse,()=>this.checkExpirations()),this.events.on(Qa.created,e=>{const n=Qa.created;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Qa.expired,e=>{const n=Qa.expired;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()}),this.events.on(Qa.deleted,e=>{const n=Qa.deleted;this.logger.info(`Emitting ${n}`),this.logger.debug({type:"event",event:n,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var S_e=Object.defineProperty,A_e=(t,e,n)=>e in t?S_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jn=(t,e,n)=>A_e(t,typeof e!="symbol"?e+"":e,n);class C_e extends Che{constructor(e,n,r){super(e,n,r),this.core=e,this.logger=n,this.store=r,Jn(this,"name",Ave),Jn(this,"abortController"),Jn(this,"isDevEnv"),Jn(this,"verifyUrlV3",Ive),Jn(this,"storagePrefix",Hs),Jn(this,"version",Zz),Jn(this,"publicKey"),Jn(this,"fetchPromise"),Jn(this,"init",async()=>{var a;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&ke.toMiliseconds((a=this.publicKey)==null?void 0:a.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),Jn(this,"register",async a=>{if(!Pu()||this.isDevEnv)return;const i=window.location.origin,{id:s,decryptedId:o}=a,c=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${i}&id=${s}&decryptedId=${o}`;try{const d=Nd(),l=this.startAbortTimer(ke.ONE_SECOND*5),u=await new Promise((f,p)=>{const h=()=>{window.removeEventListener("message",v),d.body.removeChild(b),p("attestation aborted")};this.abortController.signal.addEventListener("abort",h);const b=d.createElement("iframe");b.src=c,b.style.display="none",b.addEventListener("error",h,{signal:this.abortController.signal});const v=m=>{if(m.data&&typeof m.data=="string")try{const T=JSON.parse(m.data);if(T.type==="verify_attestation"){if(av(T.attestation).payload.id!==s)return;clearInterval(l),d.body.removeChild(b),this.abortController.signal.removeEventListener("abort",h),window.removeEventListener("message",v),f(T.attestation===null?"":T.attestation)}}catch(T){this.logger.warn(T)}};d.body.appendChild(b),window.addEventListener("message",v,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",u),u}catch(d){this.logger.warn(d)}return""}),Jn(this,"resolve",async a=>{if(this.isDevEnv)return"";const{attestationId:i,hash:s,encryptedId:o}=a;if(i===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(i){if(av(i).payload.id!==o)return;const d=await this.isValidJwtAttestation(i);if(d){if(!d.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return d}}if(!s)return;const c=this.getVerifyUrl(a==null?void 0:a.verifyUrl);return this.fetchAttestation(s,c)}),Jn(this,"fetchAttestation",async(a,i)=>{this.logger.debug(`resolving attestation: ${a} from url: ${i}`);const s=this.startAbortTimer(ke.ONE_SECOND*5),o=await fetch(`${i}/attestation/${a}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?await o.json():void 0}),Jn(this,"getVerifyUrl",a=>{let i=a||l5;return Ove.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${l5}`),i=l5),i}),Jn(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const a=this.startAbortTimer(ke.FIVE_SECONDS),i=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(a),await i.json()}catch(a){this.logger.warn(a)}}),Jn(this,"persistPublicKey",async a=>{this.logger.debug("persisting public key to local storage",a),await this.store.setItem(this.storeKey,a),this.publicKey=a}),Jn(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),Jn(this,"isValidJwtAttestation",async a=>{const i=await this.getPublicKey();try{if(i)return this.validateAttestation(a,i)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}const s=await this.fetchAndPersistPublicKey();try{if(s)return this.validateAttestation(a,s)}catch(o){this.logger.error(o),this.logger.warn("error validating attestation")}}),Jn(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),Jn(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async i=>{const s=await this.fetchPublicKey();s&&(await this.persistPublicKey(s),i(s))});const a=await this.fetchPromise;return this.fetchPromise=void 0,a}),Jn(this,"validateAttestation",(a,i)=>{const s=y4e(a,i.publicKey),o={hasExpired:ke.toMiliseconds(s.exp)<Date.now(),payload:s};if(o.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:o.payload.origin,isScam:o.payload.isScam,isVerified:o.payload.isVerified}}),this.logger=Dr(n,this.name),this.abortController=new AbortController,this.isDevEnv=GT(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return ca(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),ke.toMiliseconds(e))}}var I_e=Object.defineProperty,O_e=(t,e,n)=>e in t?I_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ik=(t,e,n)=>O_e(t,typeof e!="symbol"?e+"":e,n);class M_e extends Ihe{constructor(e,n){super(e,n),this.projectId=e,this.logger=n,Ik(this,"context",Mve),Ik(this,"registerDeviceToken",async r=>{const{clientId:a,token:i,notificationType:s,enableEncrypted:o=!1}=r,c=`${Pve}/${this.projectId}/clients`;await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:a,type:s,token:i,always_raw:o})})}),this.logger=Dr(n,this.context)}}var P_e=Object.defineProperty,Ok=Object.getOwnPropertySymbols,k_e=Object.prototype.hasOwnProperty,N_e=Object.prototype.propertyIsEnumerable,Dv=(t,e,n)=>e in t?P_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Of=(t,e)=>{for(var n in e||(e={}))k_e.call(e,n)&&Dv(t,n,e[n]);if(Ok)for(var n of Ok(e))N_e.call(e,n)&&Dv(t,n,e[n]);return t},b0=(t,e,n)=>Dv(t,typeof e!="symbol"?e+"":e,n);class R_e extends Ohe{constructor(e,n,r=!0){super(e,n,r),this.core=e,this.logger=n,b0(this,"context",Nve),b0(this,"storagePrefix",Hs),b0(this,"storageVersion",kve),b0(this,"events",new Map),b0(this,"shouldPersist",!1),b0(this,"init",async()=>{if(!GT())try{const a={eventId:bP(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:sz(this.core.relayer.protocol,this.core.relayer.version,Cv)}}};await this.sendEvent([a])}catch(a){this.logger.warn(a)}}),b0(this,"createEvent",a=>{const{event:i="ERROR",type:s="",properties:{topic:o,trace:c}}=a,d=bP(),l=this.core.projectId||"",u=Date.now(),f=Of({eventId:d,timestamp:u,props:{event:i,type:s,properties:{topic:o,trace:c}},bundleId:l,domain:this.getAppDomain()},this.setMethods(d));return this.telemetryEnabled&&(this.events.set(d,f),this.shouldPersist=!0),f}),b0(this,"getEvent",a=>{const{eventId:i,topic:s}=a;if(i)return this.events.get(i);const o=Array.from(this.events.values()).find(c=>c.props.properties.topic===s);if(o)return Of(Of({},o),this.setMethods(o.eventId))}),b0(this,"deleteEvent",a=>{const{eventId:i}=a;this.events.delete(i),this.shouldPersist=!0}),b0(this,"setEventListeners",()=>{this.core.heartbeat.on(il.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(a=>{ke.fromMiliseconds(Date.now())-ke.fromMiliseconds(a.timestamp)>Rve&&(this.events.delete(a.eventId),this.shouldPersist=!0)})})}),b0(this,"setMethods",a=>({addTrace:i=>this.addTrace(a,i),setError:i=>this.setError(a,i)})),b0(this,"addTrace",(a,i)=>{const s=this.events.get(a);s&&(s.props.properties.trace.push(i),this.events.set(a,s),this.shouldPersist=!0)}),b0(this,"setError",(a,i)=>{const s=this.events.get(a);s&&(s.props.type=i,s.timestamp=Date.now(),this.events.set(a,s),this.shouldPersist=!0)}),b0(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),b0(this,"restore",async()=>{try{const a=await this.core.storage.getItem(this.storageKey)||[];if(!a.length)return;a.forEach(i=>{this.events.set(i.eventId,Of(Of({},i),this.setMethods(i.eventId)))})}catch(a){this.logger.warn(a)}}),b0(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const a=[];for(const[i,s]of this.events)s.props.type&&a.push(s);if(a.length!==0)try{if((await this.sendEvent(a)).ok)for(const i of a)this.events.delete(i.eventId),this.shouldPersist=!0}catch(i){this.logger.warn(i)}}),b0(this,"sendEvent",async a=>{const i=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${Dve}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Cv}${i}`,{method:"POST",body:JSON.stringify(a)})}),b0(this,"getAppDomain",()=>iz().url),this.logger=Dr(n,this.context),this.telemetryEnabled=r,r?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var D_e=Object.defineProperty,Mk=Object.getOwnPropertySymbols,$_e=Object.prototype.hasOwnProperty,L_e=Object.prototype.propertyIsEnumerable,$v=(t,e,n)=>e in t?D_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pk=(t,e)=>{for(var n in e||(e={}))$_e.call(e,n)&&$v(t,n,e[n]);if(Mk)for(var n of Mk(e))L_e.call(e,n)&&$v(t,n,e[n]);return t},hn=(t,e,n)=>$v(t,typeof e!="symbol"?e+"":e,n);class sx extends yhe{constructor(e){var n;super(e),hn(this,"protocol",Jz),hn(this,"version",Zz),hn(this,"name",P8),hn(this,"relayUrl"),hn(this,"projectId"),hn(this,"customStoragePrefix"),hn(this,"events",new l0.EventEmitter),hn(this,"logger"),hn(this,"heartbeat"),hn(this,"relayer"),hn(this,"crypto"),hn(this,"storage"),hn(this,"history"),hn(this,"expirer"),hn(this,"pairing"),hn(this,"verify"),hn(this,"echoClient"),hn(this,"linkModeSupportedApps"),hn(this,"eventClient"),hn(this,"initialized",!1),hn(this,"logChunkController"),hn(this,"on",(o,c)=>this.events.on(o,c)),hn(this,"once",(o,c)=>this.events.once(o,c)),hn(this,"off",(o,c)=>this.events.off(o,c)),hn(this,"removeListener",(o,c)=>this.events.removeListener(o,c)),hn(this,"dispatchEnvelope",({topic:o,message:c,sessionExists:d})=>{if(!o||!c)return;const l={topic:o,message:c,publishedAt:Date.now(),transportType:Tn.link_mode};this.relayer.onLinkMessageEvent(l,{sessionExists:d})});const r=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(o){console.warn("Failed to copy global core",o)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Qz,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const a=DT({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:rve.logger,name:P8}),{logger:i,chunkLoggerController:s}=phe({opts:a,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=s,(n=this.logChunkController)!=null&&n.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var o,c;(o=this.logChunkController)!=null&&o.downloadLogsBlobInBrowser&&((c=this.logChunkController)==null||c.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Dr(i,this.name),this.heartbeat=new rpe,this.crypto=new uEe(this,this.logger,e==null?void 0:e.keychain),this.history=new E_e(this,this.logger),this.expirer=new x_e(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new Fpe(Pk(Pk({},ave),e==null?void 0:e.storageOptions)),this.relayer=new BEe({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new g_e(this,this.logger),this.verify=new C_e(this,this.logger,this.storage),this.echoClient=new M_e(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new R_e(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const n=new sx(e);await n.initialize();const r=await n.crypto.getClientId();return await n.storage.setItem(mve,r),n}get context(){return ca(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(lk,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(lk)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${e}`,r=`${n}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[n]}catch(n){console.warn("Failed to get global WalletConnect core",n);return}}setGlobalCore(e){var n;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${((n=e.opts)==null?void 0:n.customStoragePrefix)||""}`;globalThis[r]=e}catch(r){console.warn("Failed to set global WalletConnect core",r)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&nve.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}}const B_e=sx,uq="wc",fq=2,pq="client",ox=`${uq}@${fq}:${pq}:`,F9={name:pq,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.org"},kk="WALLETCONNECT_DEEPLINK_CHOICE",F_e="proposal",Nk="Proposal expired",U_e="session",Rl=ke.SEVEN_DAYS,j_e="engine",y0={wc_sessionPropose:{req:{ttl:ke.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:ke.ONE_DAY,prompt:!1,tag:1104},res:{ttl:ke.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:ke.ONE_DAY,prompt:!1,tag:1106},res:{ttl:ke.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:ke.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:ke.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:ke.ONE_DAY,prompt:!1,tag:1112},res:{ttl:ke.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:ke.ONE_DAY,prompt:!1,tag:1114},res:{ttl:ke.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:ke.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:ke.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:ke.FIVE_MINUTES,prompt:!1,tag:1119}}},U9={min:ke.FIVE_MINUTES,max:ke.SEVEN_DAYS},as={idle:"IDLE",active:"ACTIVE"},Rk={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},H_e="request",z_e=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],q_e="wc",K_e="auth",V_e="authKeys",W_e="pairingTopics",G_e="requests",D3=`${q_e}@${1.5}:${K_e}:`,x2=`${D3}:PUB_KEY`;var Y_e=Object.defineProperty,J_e=Object.defineProperties,Z_e=Object.getOwnPropertyDescriptors,Dk=Object.getOwnPropertySymbols,X_e=Object.prototype.hasOwnProperty,Q_e=Object.prototype.propertyIsEnumerable,Lv=(t,e,n)=>e in t?Y_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ln=(t,e)=>{for(var n in e||(e={}))X_e.call(e,n)&&Lv(t,n,e[n]);if(Dk)for(var n of Dk(e))Q_e.call(e,n)&&Lv(t,n,e[n]);return t},gr=(t,e)=>J_e(t,Z_e(e)),Se=(t,e,n)=>Lv(t,typeof e!="symbol"?e+"":e,n);class eTe extends Nhe{constructor(e){super(e),Se(this,"name",j_e),Se(this,"events",new wD),Se(this,"initialized",!1),Se(this,"requestQueue",{state:as.idle,queue:[]}),Se(this,"sessionRequestQueue",{state:as.idle,queue:[]}),Se(this,"requestQueueDelay",ke.ONE_SECOND),Se(this,"expectedPairingMethodMap",new Map),Se(this,"recentlyDeletedMap",new Map),Se(this,"recentlyDeletedLimit",200),Se(this,"relayMessageCache",[]),Se(this,"pendingSessions",new Map),Se(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(y0)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},ke.toMiliseconds(this.requestQueueDelay)))}),Se(this,"connect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const r=gr(ln({},n),{requiredNamespaces:n.requiredNamespaces||{},optionalNamespaces:n.optionalNamespaces||{}});await this.isValidConnect(r),r.optionalNamespaces=N4e(r.requiredNamespaces,r.optionalNamespaces),r.requiredNamespaces={};const{pairingTopic:a,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:c,relays:d}=r;let l=a,u,f=!1;try{if(l){const B=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),f=B.active}}catch(B){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),B}if(!l||!f){const{topic:B,uri:F}=await this.client.core.pairing.create();l=B,u=F}if(!l){const{message:B}=Ne("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(B)}const p=await this.client.core.crypto.generateKeyPair(),h=y0.wc_sessionPropose.req.ttl||ke.FIVE_MINUTES,b=r0(h),v=gr(ln(ln({requiredNamespaces:i,optionalNamespaces:s,relays:d??[{protocol:Xz}],proposer:{publicKey:p,metadata:this.client.metadata},expiryTimestamp:b,pairingTopic:l},o&&{sessionProperties:o}),c&&{scopedProperties:c}),{id:ls()}),m=Yt("session_connect",v.id),{reject:T,resolve:A,done:N}=F1(h,Nk),R=({id:B})=>{B===v.id&&(this.client.events.off("proposal_expire",R),this.pendingSessions.delete(v.id),this.events.emit(m,{error:{message:Nk,code:0}}))};return this.client.events.on("proposal_expire",R),this.events.once(m,({error:B,session:F})=>{this.client.events.off("proposal_expire",R),B?T(B):F&&A(F)}),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:v,throwOnFailedPublish:!0,clientRpcId:v.id}),await this.setProposal(v.id,v),{uri:u,approval:N}}),Se(this,"pair",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(n)}catch(r){throw this.client.logger.error("pair() failed"),r}}),Se(this,"approve",async n=>{var r,a,i;const s=this.client.core.eventClient.createEvent({properties:{topic:(r=n==null?void 0:n.id)==null?void 0:r.toString(),trace:[Ai.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(P){throw s.setError(k1.no_internet_connection),P}try{await this.isValidProposalId(n==null?void 0:n.id)}catch(P){throw this.client.logger.error(`approve() -> proposal.get(${n==null?void 0:n.id}) failed`),s.setError(k1.proposal_not_found),P}try{await this.isValidApprove(n)}catch(P){throw this.client.logger.error("approve() -> isValidApprove() failed"),s.setError(k1.session_approve_namespace_validation_failure),P}const{id:o,relayProtocol:c,namespaces:d,sessionProperties:l,scopedProperties:u,sessionConfig:f}=n,p=this.client.proposal.get(o);this.client.core.eventClient.deleteEvent({eventId:s.eventId});const{pairingTopic:h,proposer:b,requiredNamespaces:v,optionalNamespaces:m}=p;let T=(a=this.client.core.eventClient)==null?void 0:a.getEvent({topic:h});T||(T=(i=this.client.core.eventClient)==null?void 0:i.createEvent({type:Ai.session_approve_started,properties:{topic:h,trace:[Ai.session_approve_started,Ai.session_namespaces_validation_success]}}));const A=await this.client.core.crypto.generateKeyPair(),N=b.publicKey,R=await this.client.core.crypto.generateSharedKey(A,N),B=ln(ln(ln({relay:{protocol:c??"irn"},namespaces:d,controller:{publicKey:A,metadata:this.client.metadata},expiry:r0(Rl)},l&&{sessionProperties:l}),u&&{scopedProperties:u}),f&&{sessionConfig:f}),F=Tn.relay;T.addTrace(Ai.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:F})}catch(P){throw T.setError(k1.subscribe_session_topic_failure),P}T.addTrace(Ai.subscribe_session_topic_success);const I=gr(ln({},B),{topic:R,requiredNamespaces:v,optionalNamespaces:m,pairingTopic:h,acknowledged:!1,self:B.controller,peer:{publicKey:b.publicKey,metadata:b.metadata},controller:A,transportType:Tn.relay});await this.client.session.set(R,I),T.addTrace(Ai.store_session);try{T.addTrace(Ai.publishing_session_settle),await this.sendRequest({topic:R,method:"wc_sessionSettle",params:B,throwOnFailedPublish:!0}).catch(P=>{throw T==null||T.setError(k1.session_settle_publish_failure),P}),T.addTrace(Ai.session_settle_publish_success),T.addTrace(Ai.publishing_session_approve),await this.sendResult({id:o,topic:h,result:{relay:{protocol:c??"irn"},responderPublicKey:A},throwOnFailedPublish:!0}).catch(P=>{throw T==null||T.setError(k1.session_approve_publish_failure),P}),T.addTrace(Ai.session_approve_publish_success)}catch(P){throw this.client.logger.error(P),this.client.session.delete(R,tn("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),P}return this.client.core.eventClient.deleteEvent({eventId:T.eventId}),await this.client.core.pairing.updateMetadata({topic:h,metadata:b.metadata}),await this.client.proposal.delete(o,tn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:h}),await this.setExpiry(R,r0(Rl)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}}),Se(this,"reject",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(n)}catch(s){throw this.client.logger.error("reject() -> isValidReject() failed"),s}const{id:r,reason:a}=n;let i;try{i=this.client.proposal.get(r).pairingTopic}catch(s){throw this.client.logger.error(`reject() -> proposal.get(${r}) failed`),s}i&&(await this.sendError({id:r,topic:i,error:a,rpcOpts:y0.wc_sessionPropose.reject}),await this.client.proposal.delete(r,tn("USER_DISCONNECTED")))}),Se(this,"update",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(n)}catch(u){throw this.client.logger.error("update() -> isValidUpdate() failed"),u}const{topic:r,namespaces:a}=n,{done:i,resolve:s,reject:o}=F1(),c=ls(),d=ad().toString(),l=this.client.session.get(r).namespaces;return this.events.once(Yt("session_update",c),({error:u})=>{u?o(u):s()}),await this.client.session.update(r,{namespaces:a}),await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:a},throwOnFailedPublish:!0,clientRpcId:c,relayRpcId:d}).catch(u=>{this.client.logger.error(u),this.client.session.update(r,{namespaces:l}),o(u)}),{acknowledged:i}}),Se(this,"extend",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(n)}catch(c){throw this.client.logger.error("extend() -> isValidExtend() failed"),c}const{topic:r}=n,a=ls(),{done:i,resolve:s,reject:o}=F1();return this.events.once(Yt("session_extend",a),({error:c})=>{c?o(c):s()}),await this.setExpiry(r,r0(Rl)),this.sendRequest({topic:r,method:"wc_sessionExtend",params:{},clientRpcId:a,throwOnFailedPublish:!0}).catch(c=>{o(c)}),{acknowledged:i}}),Se(this,"request",async n=>{this.isInitialized();try{await this.isValidRequest(n)}catch(m){throw this.client.logger.error("request() -> isValidRequest() failed"),m}const{chainId:r,request:a,topic:i,expiry:s=y0.wc_sessionRequest.req.ttl}=n,o=this.client.session.get(i);(o==null?void 0:o.transportType)===Tn.relay&&await this.confirmOnlineStateOrThrow();const c=ls(),d=ad().toString(),{done:l,resolve:u,reject:f}=F1(s,"Request expired. Please try again.");this.events.once(Yt("session_request",c),({error:m,result:T})=>{m?f(m):u(T)});const p="wc_sessionRequest",h=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(h)return await this.sendRequest({clientRpcId:c,relayRpcId:d,topic:i,method:p,params:{request:gr(ln({},a),{expiryTimestamp:r0(s)}),chainId:r},expiry:s,throwOnFailedPublish:!0,appLink:h}).catch(m=>f(m)),this.client.events.emit("session_request_sent",{topic:i,request:a,chainId:r,id:c}),await l();const b={request:gr(ln({},a),{expiryTimestamp:r0(s)}),chainId:r},v=this.shouldSetTVF(p,b);return await Promise.all([new Promise(async m=>{await this.sendRequest(ln({clientRpcId:c,relayRpcId:d,topic:i,method:p,params:b,expiry:s,throwOnFailedPublish:!0},v&&{tvf:this.getTVFParams(c,b)})).catch(T=>f(T)),this.client.events.emit("session_request_sent",{topic:i,request:a,chainId:r,id:c}),m()}),new Promise(async m=>{var T;if(!((T=o.sessionConfig)!=null&&T.disableDeepLink)){const A=await Kme(this.client.core.storage,kk);await Hme({id:c,topic:i,wcDeepLink:A})}m()}),l()]).then(m=>m[2])}),Se(this,"respond",async n=>{this.isInitialized(),await this.isValidRespond(n);const{topic:r,response:a}=n,{id:i}=a,s=this.client.session.get(r);s.transportType===Tn.relay&&await this.confirmOnlineStateOrThrow();const o=this.getAppLinkIfEnabled(s.peer.metadata,s.transportType);us(a)?await this.sendResult({id:i,topic:r,result:a.result,throwOnFailedPublish:!0,appLink:o}):ii(a)&&await this.sendError({id:i,topic:r,error:a.error,appLink:o}),this.cleanupAfterResponse(n)}),Se(this,"ping",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(n)}catch(a){throw this.client.logger.error("ping() -> isValidPing() failed"),a}const{topic:r}=n;if(this.client.session.keys.includes(r)){const a=ls(),i=ad().toString(),{done:s,resolve:o,reject:c}=F1();this.events.once(Yt("session_ping",a),({error:d})=>{d?c(d):o()}),await Promise.all([this.sendRequest({topic:r,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:i}),s()])}else this.client.core.pairing.pairings.keys.includes(r)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:r}))}),Se(this,"emit",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(n);const{topic:r,event:a,chainId:i}=n,s=ad().toString(),o=ls();await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:a,chainId:i},throwOnFailedPublish:!0,relayRpcId:s,clientRpcId:o})}),Se(this,"disconnect",async n=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(n);const{topic:r}=n;if(this.client.session.keys.includes(r))await this.sendRequest({topic:r,method:"wc_sessionDelete",params:tn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:r,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(r))await this.client.core.pairing.disconnect({topic:r});else{const{message:a}=Ne("MISMATCHED_TOPIC",`Session or pairing topic not found: ${r}`);throw new Error(a)}}),Se(this,"find",n=>(this.isInitialized(),this.client.session.getAll().filter(r=>$4e(r,n)))),Se(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),Se(this,"authenticate",async(n,r)=>{var a;this.isInitialized(),this.isValidAuthenticate(n);const i=r&&this.client.core.linkModeSupportedApps.includes(r)&&((a=this.client.metadata.redirect)==null?void 0:a.linkMode),s=i?Tn.link_mode:Tn.relay;s===Tn.relay&&await this.confirmOnlineStateOrThrow();const{chains:o,statement:c="",uri:d,domain:l,nonce:u,type:f,exp:p,nbf:h,methods:b=[],expiry:v}=n,m=[...n.resources||[]],{topic:T,uri:A}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:s});this.client.logger.info({message:"Generated new pairing",pairing:{topic:T,uri:A}});const N=await this.client.core.crypto.generateKeyPair(),R=_2(N);if(await Promise.all([this.client.auth.authKeys.set(x2,{responseTopic:R,publicKey:N}),this.client.auth.pairingTopics.set(R,{topic:R,pairingTopic:T})]),await this.client.core.relayer.subscribe(R,{transportType:s}),this.client.logger.info(`sending request to new pairing topic: ${T}`),b.length>0){const{namespace:w}=v2(o[0]);let _=Lge(w,"request",b);E2(m)&&(_=Fge(_,m.pop())),m.push(_)}const B=v&&v>y0.wc_sessionAuthenticate.req.ttl?v:y0.wc_sessionAuthenticate.req.ttl,F={authPayload:{type:f??"caip122",chains:o,statement:c,aud:d,domain:l,version:"1",nonce:u,iat:new Date().toISOString(),exp:p,nbf:h,resources:m},requester:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:r0(B)},I={eip155:{chains:o,methods:[...new Set(["personal_sign",...b])],events:["chainChanged","accountsChanged"]}},P={requiredNamespaces:{},optionalNamespaces:I,relays:[{protocol:"irn"}],pairingTopic:T,proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:r0(y0.wc_sessionPropose.req.ttl),id:ls()},{done:$,resolve:M,reject:y}=F1(B,"Request expired"),E=ls(),C=Yt("session_connect",P.id),g=Yt("session_request",E),x=async({error:w,session:_})=>{this.events.off(g,O),w?y(w):_&&M({session:_})},O=async w=>{var _,k,L;if(await this.deletePendingAuthRequest(E,{message:"fulfilled",code:0}),w.error){const q=tn("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return w.error.code===q.code?void 0:(this.events.off(C,x),y(w.error.message))}await this.deleteProposal(P.id),this.events.off(C,x);const{cacaos:D,responder:U}=w.result,j=[],H=[];for(const q of D){await TP({cacao:q,projectId:this.client.core.projectId})||(this.client.logger.error(q,"Signature verification failed"),y(tn("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:V}=q,G=E2(V.resources),J=[hv(V.iss)],z=I8(V.iss);if(G){const Y=xP(G),X=SP(G);j.push(...Y),J.push(...X)}for(const Y of J)H.push(`${Y}:${z}`)}const W=await this.client.core.crypto.generateSharedKey(N,U.publicKey);let K;j.length>0&&(K={topic:W,acknowledged:!0,self:{publicKey:N,metadata:this.client.metadata},peer:U,controller:U.publicKey,expiry:r0(Rl),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:T,namespaces:JP([...new Set(j)],[...new Set(H)]),transportType:s},await this.client.core.relayer.subscribe(W,{transportType:s}),await this.client.session.set(W,K),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:U.metadata}),K=this.client.session.get(W)),(_=this.client.metadata.redirect)!=null&&_.linkMode&&(k=U.metadata.redirect)!=null&&k.linkMode&&(L=U.metadata.redirect)!=null&&L.universal&&r&&(this.client.core.addLinkModeSupportedApp(U.metadata.redirect.universal),this.client.session.update(W,{transportType:Tn.link_mode})),M({auths:D,session:K})};this.events.once(C,x),this.events.once(g,O);let S;try{if(i){const w=id("wc_sessionAuthenticate",F,E);this.client.core.history.set(T,w);const _=await this.client.core.crypto.encode("",w,{type:ah,encoding:Vc});S=Eb(r,T,_)}else await Promise.all([this.sendRequest({topic:T,method:"wc_sessionAuthenticate",params:F,expiry:n.expiry,throwOnFailedPublish:!0,clientRpcId:E}),this.sendRequest({topic:T,method:"wc_sessionPropose",params:P,expiry:y0.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:P.id})])}catch(w){throw this.events.off(C,x),this.events.off(g,O),w}return await this.setProposal(P.id,P),await this.setAuthRequest(E,{request:gr(ln({},F),{verifyContext:{}}),pairingTopic:T,transportType:s}),{uri:S??A,response:$}}),Se(this,"approveSessionAuthenticate",async n=>{const{id:r,auths:a}=n,i=this.client.core.eventClient.createEvent({properties:{topic:r.toString(),trace:[N1.authenticated_session_approve_started]}});try{this.isInitialized()}catch(v){throw i.setError(Cf.no_internet_connection),v}const s=this.getPendingAuthRequest(r);if(!s)throw i.setError(Cf.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${r}`);const o=s.transportType||Tn.relay;o===Tn.relay&&await this.confirmOnlineStateOrThrow();const c=s.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),l=_2(c),u={type:Fo,receiverPublicKey:c,senderPublicKey:d},f=[],p=[];for(const v of a){if(!await TP({cacao:v,projectId:this.client.core.projectId})){i.setError(Cf.invalid_cacao);const R=tn("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:r,topic:l,error:R,encodeOpts:u}),new Error(R.message)}i.addTrace(N1.cacaos_verified);const{p:m}=v,T=E2(m.resources),A=[hv(m.iss)],N=I8(m.iss);if(T){const R=xP(T),B=SP(T);f.push(...R),A.push(...B)}for(const R of A)p.push(`${R}:${N}`)}const h=await this.client.core.crypto.generateSharedKey(d,c);i.addTrace(N1.create_authenticated_session_topic);let b;if((f==null?void 0:f.length)>0){b={topic:h,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:c,metadata:s.requester.metadata},controller:c,expiry:r0(Rl),authentication:a,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:s.pairingTopic,namespaces:JP([...new Set(f)],[...new Set(p)]),transportType:o},i.addTrace(N1.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(h,{transportType:o})}catch(v){throw i.setError(Cf.subscribe_authenticated_session_topic_failure),v}i.addTrace(N1.subscribe_authenticated_session_topic_success),await this.client.session.set(h,b),i.addTrace(N1.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:s.pairingTopic,metadata:s.requester.metadata})}i.addTrace(N1.publishing_authenticated_session_approve);try{await this.sendResult({topic:l,id:r,result:{cacaos:a,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:u,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(s.requester.metadata,o)})}catch(v){throw i.setError(Cf.authenticated_session_approve_publish_failure),v}return await this.client.auth.requests.delete(r,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:s.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:i.eventId}),{session:b}}),Se(this,"rejectSessionAuthenticate",async n=>{this.isInitialized();const{id:r,reason:a}=n,i=this.getPendingAuthRequest(r);if(!i)throw new Error(`Could not find pending auth request with id ${r}`);i.transportType===Tn.relay&&await this.confirmOnlineStateOrThrow();const s=i.requester.publicKey,o=await this.client.core.crypto.generateKeyPair(),c=_2(s),d={type:Fo,receiverPublicKey:s,senderPublicKey:o};await this.sendError({id:r,topic:c,error:a,encodeOpts:d,rpcOpts:y0.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(i.requester.metadata,i.transportType)}),await this.client.auth.requests.delete(r,{message:"rejected",code:0}),await this.client.proposal.delete(r,tn("USER_DISCONNECTED"))}),Se(this,"formatAuthMessage",n=>{this.isInitialized();const{request:r,iss:a}=n;return mz(r,a)}),Se(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const n=this.relayMessageCache.shift();n&&await this.onRelayMessage(n)}catch(n){this.client.logger.error(n)}},50)}),Se(this,"cleanupDuplicatePairings",async n=>{if(n.pairingTopic)try{const r=this.client.core.pairing.pairings.get(n.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(i=>{var s,o;return((s=i.peerMetadata)==null?void 0:s.url)&&((o=i.peerMetadata)==null?void 0:o.url)===n.peer.metadata.url&&i.topic&&i.topic!==r.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(i=>this.client.core.pairing.disconnect({topic:i.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}}),Se(this,"deleteSession",async n=>{var r;const{topic:a,expirerHasDeleted:i=!1,emitEvent:s=!0,id:o=0}=n,{self:c}=this.client.session.get(a);await this.client.core.relayer.unsubscribe(a),await this.client.session.delete(a,tn("USER_DISCONNECTED")),this.addToRecentlyDeleted(a,"session"),this.client.core.crypto.keychain.has(c.publicKey)&&await this.client.core.crypto.deleteKeyPair(c.publicKey),this.client.core.crypto.keychain.has(a)&&await this.client.core.crypto.deleteSymKey(a),i||this.client.core.expirer.del(a),this.client.core.storage.removeItem(kk).catch(d=>this.client.logger.warn(d)),this.getPendingSessionRequests().forEach(d=>{d.topic===a&&this.deletePendingSessionRequest(d.id,tn("USER_DISCONNECTED"))}),a===((r=this.sessionRequestQueue.queue[0])==null?void 0:r.topic)&&(this.sessionRequestQueue.state=as.idle),s&&this.client.events.emit("session_delete",{id:o,topic:a})}),Se(this,"deleteProposal",async(n,r)=>{if(r)try{const a=this.client.proposal.get(n),i=this.client.core.eventClient.getEvent({topic:a.pairingTopic});i==null||i.setError(k1.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(n,tn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"proposal")}),Se(this,"deletePendingSessionRequest",async(n,r,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(n,r),a?Promise.resolve():this.client.core.expirer.del(n)]),this.addToRecentlyDeleted(n,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(i=>i.id!==n),a&&(this.sessionRequestQueue.state=as.idle,this.client.events.emit("session_request_expire",{id:n}))}),Se(this,"deletePendingAuthRequest",async(n,r,a=!1)=>{await Promise.all([this.client.auth.requests.delete(n,r),a?Promise.resolve():this.client.core.expirer.del(n)])}),Se(this,"setExpiry",async(n,r)=>{this.client.session.keys.includes(n)&&(this.client.core.expirer.set(n,r),await this.client.session.update(n,{expiry:r}))}),Se(this,"setProposal",async(n,r)=>{this.client.core.expirer.set(n,r0(y0.wc_sessionPropose.req.ttl)),await this.client.proposal.set(n,r)}),Se(this,"setAuthRequest",async(n,r)=>{const{request:a,pairingTopic:i,transportType:s=Tn.relay}=r;this.client.core.expirer.set(n,a.expiryTimestamp),await this.client.auth.requests.set(n,{authPayload:a.authPayload,requester:a.requester,expiryTimestamp:a.expiryTimestamp,id:n,pairingTopic:i,verifyContext:a.verifyContext,transportType:s})}),Se(this,"setPendingSessionRequest",async n=>{const{id:r,topic:a,params:i,verifyContext:s}=n,o=i.request.expiryTimestamp||r0(y0.wc_sessionRequest.req.ttl);this.client.core.expirer.set(r,o),await this.client.pendingRequest.set(r,{id:r,topic:a,params:i,verifyContext:s})}),Se(this,"sendRequest",async n=>{const{topic:r,method:a,params:i,expiry:s,relayRpcId:o,clientRpcId:c,throwOnFailedPublish:d,appLink:l,tvf:u}=n,f=id(a,i,c);let p;const h=!!l;try{const m=h?Vc:Li;p=await this.client.core.crypto.encode(r,f,{encoding:m})}catch(m){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${r} failed`),m}let b;if(z_e.includes(a)){const m=ys(JSON.stringify(f)),T=ys(p);b=await this.client.core.verify.register({id:T,decryptedId:m})}const v=y0[a].req;if(v.attestation=b,s&&(v.ttl=s),o&&(v.id=o),this.client.core.history.set(r,f),h){const m=Eb(l,r,p);await global.Linking.openURL(m,this.client.name)}else{const m=y0[a].req;s&&(m.ttl=s),o&&(m.id=o),m.tvf=gr(ln({},u),{correlationId:f.id}),d?(m.internal=gr(ln({},m.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,p,m)):this.client.core.relayer.publish(r,p,m).catch(T=>this.client.logger.error(T))}return f.id}),Se(this,"sendResult",async n=>{const{id:r,topic:a,result:i,throwOnFailedPublish:s,encodeOpts:o,appLink:c}=n,d=rx(r,i);let l;const u=c&&typeof(global==null?void 0:global.Linking)<"u";try{const h=u?Vc:Li;l=await this.client.core.crypto.encode(a,d,gr(ln({},o||{}),{encoding:h}))}catch(h){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${a} failed`),h}let f,p;try{f=await this.client.core.history.get(a,r);const h=f.request;try{this.shouldSetTVF(h.method,h.params)&&(p=this.getTVFParams(r,h.params,i))}catch(b){this.client.logger.warn("sendResult() -> getTVFParams() failed",b)}}catch(h){throw this.client.logger.error(`sendResult() -> history.get(${a}, ${r}) failed`),h}if(u){const h=Eb(c,a,l);await global.Linking.openURL(h,this.client.name)}else{const h=f.request.method,b=y0[h].res;b.tvf=gr(ln({},p),{correlationId:r}),s?(b.internal=gr(ln({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,l,b)):this.client.core.relayer.publish(a,l,b).catch(v=>this.client.logger.error(v))}await this.client.core.history.resolve(d)}),Se(this,"sendError",async n=>{const{id:r,topic:a,error:i,encodeOpts:s,rpcOpts:o,appLink:c}=n,d=ax(r,i);let l;const u=c&&typeof(global==null?void 0:global.Linking)<"u";try{const p=u?Vc:Li;l=await this.client.core.crypto.encode(a,d,gr(ln({},s||{}),{encoding:p}))}catch(p){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${a} failed`),p}let f;try{f=await this.client.core.history.get(a,r)}catch(p){throw this.client.logger.error(`sendError() -> history.get(${a}, ${r}) failed`),p}if(u){const p=Eb(c,a,l);await global.Linking.openURL(p,this.client.name)}else{const p=f.request.method,h=o||y0[p].res;this.client.core.relayer.publish(a,l,h)}await this.client.core.history.resolve(d)}),Se(this,"cleanup",async()=>{const n=[],r=[];this.client.session.getAll().forEach(a=>{let i=!1;Fc(a.expiry)&&(i=!0),this.client.core.crypto.keychain.has(a.topic)||(i=!0),i&&n.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{Fc(a.expiryTimestamp)&&r.push(a.id)}),await Promise.all([...n.map(a=>this.deleteSession({topic:a})),...r.map(a=>this.deleteProposal(a))])}),Se(this,"onProviderMessageEvent",async n=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(n):await this.onRelayMessage(n)}),Se(this,"onRelayEventRequest",async n=>{this.requestQueue.queue.push(n),await this.processRequestsQueue()}),Se(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===as.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=as.active;const n=this.requestQueue.queue.shift();if(n)try{await this.processRequest(n)}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=as.idle}),Se(this,"processRequest",async n=>{const{topic:r,payload:a,attestation:i,transportType:s,encryptedId:o}=n,c=a.method;if(!this.shouldIgnorePairingRequest({topic:r,requestMethod:c}))switch(c){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:r,payload:a,attestation:i,encryptedId:o});case"wc_sessionSettle":return await this.onSessionSettleRequest(r,a);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(r,a);case"wc_sessionExtend":return await this.onSessionExtendRequest(r,a);case"wc_sessionPing":return await this.onSessionPingRequest(r,a);case"wc_sessionDelete":return await this.onSessionDeleteRequest(r,a);case"wc_sessionRequest":return await this.onSessionRequest({topic:r,payload:a,attestation:i,encryptedId:o,transportType:s});case"wc_sessionEvent":return await this.onSessionEventRequest(r,a);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:r,payload:a,attestation:i,encryptedId:o,transportType:s});default:return this.client.logger.info(`Unsupported request method ${c}`)}}),Se(this,"onRelayEventResponse",async n=>{const{topic:r,payload:a,transportType:i}=n,s=(await this.client.core.history.get(r,a.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(r,a,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,a);case"wc_sessionExtend":return this.onSessionExtendResponse(r,a);case"wc_sessionPing":return this.onSessionPingResponse(r,a);case"wc_sessionRequest":return this.onSessionRequestResponse(r,a);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(r,a);default:return this.client.logger.info(`Unsupported response method ${s}`)}}),Se(this,"onRelayEventUnknownPayload",n=>{const{topic:r}=n,{message:a}=Ne("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)}),Se(this,"shouldIgnorePairingRequest",n=>{const{topic:r,requestMethod:a}=n,i=this.expectedPairingMethodMap.get(r);return!i||i.includes(a)?!1:!!(i.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),Se(this,"onSessionProposeRequest",async n=>{const{topic:r,payload:a,attestation:i,encryptedId:s}=n,{params:o,id:c}=a;try{const d=this.client.core.eventClient.getEvent({topic:r});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),d==null||d.setError(go.proposal_listener_not_found)),this.isValidConnect(ln({},a.params));const l=o.expiryTimestamp||r0(y0.wc_sessionPropose.req.ttl),u=ln({id:c,pairingTopic:r,expiryTimestamp:l},o);await this.setProposal(c,u);const f=await this.getVerifyContext({attestationId:i,hash:ys(JSON.stringify(a)),encryptedId:s,metadata:u.proposer.metadata});d==null||d.addTrace(ds.emit_session_proposal),this.client.events.emit("session_proposal",{id:c,params:u,verifyContext:f})}catch(d){await this.sendError({id:c,topic:r,error:d,rpcOpts:y0.wc_sessionPropose.autoReject}),this.client.logger.error(d)}}),Se(this,"onSessionProposeResponse",async(n,r,a)=>{const{id:i}=r;if(us(r)){const{result:s}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const c=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const d=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const l=await this.client.core.crypto.generateSharedKey(c,d);this.pendingSessions.set(i,{sessionTopic:l,pairingTopic:n,proposalId:i,publicKey:c});const u=await this.client.core.relayer.subscribe(l,{transportType:a});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:n})}else if(ii(r)){await this.client.proposal.delete(i,tn("USER_DISCONNECTED"));const s=Yt("session_connect",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners, 954`);this.events.emit(s,{error:r.error})}}),Se(this,"onSessionSettleRequest",async(n,r)=>{const{id:a,params:i}=r;try{this.isValidSessionSettleRequest(i);const{relay:s,controller:o,expiry:c,namespaces:d,sessionProperties:l,scopedProperties:u,sessionConfig:f}=r.params,p=[...this.pendingSessions.values()].find(v=>v.sessionTopic===n);if(!p)return this.client.logger.error(`Pending session not found for topic ${n}`);const h=this.client.proposal.get(p.proposalId),b=gr(ln(ln(ln({topic:n,relay:s,expiry:c,namespaces:d,acknowledged:!0,pairingTopic:p.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:o.publicKey,self:{publicKey:p.publicKey,metadata:this.client.metadata},peer:{publicKey:o.publicKey,metadata:o.metadata}},l&&{sessionProperties:l}),u&&{scopedProperties:u}),f&&{sessionConfig:f}),{transportType:Tn.relay});await this.client.session.set(b.topic,b),await this.setExpiry(b.topic,b.expiry),await this.client.core.pairing.updateMetadata({topic:p.pairingTopic,metadata:b.peer.metadata}),this.client.events.emit("session_connect",{session:b}),this.events.emit(Yt("session_connect",p.proposalId),{session:b}),this.pendingSessions.delete(p.proposalId),this.deleteProposal(p.proposalId,!1),this.cleanupDuplicatePairings(b),await this.sendResult({id:r.id,topic:n,result:!0,throwOnFailedPublish:!0})}catch(s){await this.sendError({id:a,topic:n,error:s}),this.client.logger.error(s)}}),Se(this,"onSessionSettleResponse",async(n,r)=>{const{id:a}=r;us(r)?(await this.client.session.update(n,{acknowledged:!0}),this.events.emit(Yt("session_approve",a),{})):ii(r)&&(await this.client.session.delete(n,tn("USER_DISCONNECTED")),this.events.emit(Yt("session_approve",a),{error:r.error}))}),Se(this,"onSessionUpdateRequest",async(n,r)=>{const{params:a,id:i}=r;try{const s=`${n}_session_update`,o=Sf.get(s);if(o&&this.isRequestOutOfSync(o,i)){this.client.logger.warn(`Discarding out of sync request - ${i}`),this.sendError({id:i,topic:n,error:tn("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ln({topic:n},a));try{Sf.set(s,i),await this.client.session.update(n,{namespaces:a.namespaces}),await this.sendResult({id:i,topic:n,result:!0,throwOnFailedPublish:!0})}catch(c){throw Sf.delete(s),c}this.client.events.emit("session_update",{id:i,topic:n,params:a})}catch(s){await this.sendError({id:i,topic:n,error:s}),this.client.logger.error(s)}}),Se(this,"isRequestOutOfSync",(n,r)=>r.toString().slice(0,-3)<n.toString().slice(0,-3)),Se(this,"onSessionUpdateResponse",(n,r)=>{const{id:a}=r,i=Yt("session_update",a);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);us(r)?this.events.emit(Yt("session_update",a),{}):ii(r)&&this.events.emit(Yt("session_update",a),{error:r.error})}),Se(this,"onSessionExtendRequest",async(n,r)=>{const{id:a}=r;try{this.isValidExtend({topic:n}),await this.setExpiry(n,r0(Rl)),await this.sendResult({id:a,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:a,topic:n})}catch(i){await this.sendError({id:a,topic:n,error:i}),this.client.logger.error(i)}}),Se(this,"onSessionExtendResponse",(n,r)=>{const{id:a}=r,i=Yt("session_extend",a);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);us(r)?this.events.emit(Yt("session_extend",a),{}):ii(r)&&this.events.emit(Yt("session_extend",a),{error:r.error})}),Se(this,"onSessionPingRequest",async(n,r)=>{const{id:a}=r;try{this.isValidPing({topic:n}),await this.sendResult({id:a,topic:n,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:a,topic:n})}catch(i){await this.sendError({id:a,topic:n,error:i}),this.client.logger.error(i)}}),Se(this,"onSessionPingResponse",(n,r)=>{const{id:a}=r,i=Yt("session_ping",a);setTimeout(()=>{if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners 2176`);us(r)?this.events.emit(Yt("session_ping",a),{}):ii(r)&&this.events.emit(Yt("session_ping",a),{error:r.error})},500)}),Se(this,"onSessionDeleteRequest",async(n,r)=>{const{id:a}=r;try{this.isValidDisconnect({topic:n,reason:r.params}),Promise.all([new Promise(i=>{this.client.core.relayer.once(S0.publish,async()=>{i(await this.deleteSession({topic:n,id:a}))})}),this.sendResult({id:a,topic:n,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:n,error:tn("USER_DISCONNECTED")})]).catch(i=>this.client.logger.error(i))}catch(i){this.client.logger.error(i)}}),Se(this,"onSessionRequest",async n=>{var r,a,i;const{topic:s,payload:o,attestation:c,encryptedId:d,transportType:l}=n,{id:u,params:f}=o;try{await this.isValidRequest(ln({topic:s},f));const p=this.client.session.get(s),h=await this.getVerifyContext({attestationId:c,hash:ys(JSON.stringify(id("wc_sessionRequest",f,u))),encryptedId:d,metadata:p.peer.metadata,transportType:l}),b={id:u,topic:s,params:f,verifyContext:h};await this.setPendingSessionRequest(b),l===Tn.link_mode&&(r=p.peer.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp((a=p.peer.metadata.redirect)==null?void 0:a.universal),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(b):(this.addSessionRequestToSessionRequestQueue(b),this.processSessionRequestQueue())}catch(p){await this.sendError({id:u,topic:s,error:p}),this.client.logger.error(p)}}),Se(this,"onSessionRequestResponse",(n,r)=>{const{id:a}=r,i=Yt("session_request",a);if(this.events.listenerCount(i)===0)throw new Error(`emitting ${i} without any listeners`);us(r)?this.events.emit(Yt("session_request",a),{result:r.result}):ii(r)&&this.events.emit(Yt("session_request",a),{error:r.error})}),Se(this,"onSessionEventRequest",async(n,r)=>{const{id:a,params:i}=r;try{const s=`${n}_session_event_${i.event.name}`,o=Sf.get(s);if(o&&this.isRequestOutOfSync(o,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(ln({topic:n},i)),this.client.events.emit("session_event",{id:a,topic:n,params:i}),Sf.set(s,a)}catch(s){await this.sendError({id:a,topic:n,error:s}),this.client.logger.error(s)}}),Se(this,"onSessionAuthenticateResponse",(n,r)=>{const{id:a}=r;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:n,payload:r}),us(r)?this.events.emit(Yt("session_request",a),{result:r.result}):ii(r)&&this.events.emit(Yt("session_request",a),{error:r.error})}),Se(this,"onSessionAuthenticateRequest",async n=>{var r;const{topic:a,payload:i,attestation:s,encryptedId:o,transportType:c}=n;try{const{requester:d,authPayload:l,expiryTimestamp:u}=i.params,f=await this.getVerifyContext({attestationId:s,hash:ys(JSON.stringify(i)),encryptedId:o,metadata:d.metadata,transportType:c}),p={requester:d,pairingTopic:a,id:i.id,authPayload:l,verifyContext:f,expiryTimestamp:u};await this.setAuthRequest(i.id,{request:p,pairingTopic:a,transportType:c}),c===Tn.link_mode&&(r=d.metadata.redirect)!=null&&r.universal&&this.client.core.addLinkModeSupportedApp(d.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:a,params:i.params,id:i.id,verifyContext:f})}catch(d){this.client.logger.error(d);const l=i.params.requester.publicKey,u=await this.client.core.crypto.generateKeyPair(),f=this.getAppLinkIfEnabled(i.params.requester.metadata,c),p={type:Fo,receiverPublicKey:l,senderPublicKey:u};await this.sendError({id:i.id,topic:a,error:d,encodeOpts:p,rpcOpts:y0.wc_sessionAuthenticate.autoReject,appLink:f})}}),Se(this,"addSessionRequestToSessionRequestQueue",n=>{this.sessionRequestQueue.queue.push(n)}),Se(this,"cleanupAfterResponse",n=>{this.deletePendingSessionRequest(n.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=as.idle,this.processSessionRequestQueue()},ke.toMiliseconds(this.requestQueueDelay))}),Se(this,"cleanupPendingSentRequestsForTopic",({topic:n,error:r})=>{const a=this.client.core.history.pending;a.length>0&&a.filter(i=>i.topic===n&&i.request.method==="wc_sessionRequest").forEach(i=>{const s=i.request.id,o=Yt("session_request",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);this.events.emit(Yt("session_request",i.request.id),{error:r})})}),Se(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===as.active){this.client.logger.info("session request queue is already active.");return}const n=this.sessionRequestQueue.queue[0];if(!n){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=as.active,this.emitSessionRequest(n)}catch(r){this.client.logger.error(r)}}),Se(this,"emitSessionRequest",n=>{this.client.events.emit("session_request",n)}),Se(this,"onPairingCreated",n=>{if(n.methods&&this.expectedPairingMethodMap.set(n.topic,n.methods),n.active)return;const r=this.client.proposal.getAll().find(a=>a.pairingTopic===n.topic);r&&this.onSessionProposeRequest({topic:n.topic,payload:id("wc_sessionPropose",gr(ln({},r),{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties,scopedProperties:r.scopedProperties}),r.id)})}),Se(this,"isValidConnect",async n=>{if(!Wr(n)){const{message:d}=Ne("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(n)}`);throw new Error(d)}const{pairingTopic:r,requiredNamespaces:a,optionalNamespaces:i,sessionProperties:s,scopedProperties:o,relays:c}=n;if(dr(r)||await this.isValidPairingTopic(r),!G4e(c)){const{message:d}=Ne("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(d)}if(!dr(a)&&Y5(a)!==0){const d="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(d):this.client.logger.warn(d),this.validateNamespaces(a,"requiredNamespaces")}if(!dr(i)&&Y5(i)!==0&&this.validateNamespaces(i,"optionalNamespaces"),dr(s)||this.validateSessionProps(s,"sessionProperties"),!dr(o)){this.validateSessionProps(o,"scopedProperties");const d=Object.keys(a||{}).concat(Object.keys(i||{}));if(!Object.keys(o).every(l=>d.includes(l)))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(o)}, required/optional namespaces: ${JSON.stringify(d)}`)}}),Se(this,"validateNamespaces",(n,r)=>{const a=W4e(n,"connect()",r);if(a)throw new Error(a.message)}),Se(this,"isValidApprove",async n=>{if(!Wr(n))throw new Error(Ne("MISSING_OR_INVALID",`approve() params: ${n}`).message);const{id:r,namespaces:a,relayProtocol:i,sessionProperties:s,scopedProperties:o}=n;this.checkRecentlyDeleted(r),await this.isValidProposalId(r);const c=this.client.proposal.get(r),d=N9(a,"approve()");if(d)throw new Error(d.message);const l=QP(c.requiredNamespaces,a,"approve()");if(l)throw new Error(l.message);if(!Xn(i,!0)){const{message:u}=Ne("MISSING_OR_INVALID",`approve() relayProtocol: ${i}`);throw new Error(u)}if(dr(s)||this.validateSessionProps(s,"sessionProperties"),!dr(o)){this.validateSessionProps(o,"scopedProperties");const u=new Set(Object.keys(a));if(!Object.keys(o).every(f=>u.has(f)))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(o)}, approved namespaces: ${Array.from(u).join(", ")}`)}}),Se(this,"isValidReject",async n=>{if(!Wr(n)){const{message:i}=Ne("MISSING_OR_INVALID",`reject() params: ${n}`);throw new Error(i)}const{id:r,reason:a}=n;if(this.checkRecentlyDeleted(r),await this.isValidProposalId(r),!J4e(a)){const{message:i}=Ne("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(i)}}),Se(this,"isValidSessionSettleRequest",n=>{if(!Wr(n)){const{message:d}=Ne("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${n}`);throw new Error(d)}const{relay:r,controller:a,namespaces:i,expiry:s}=n;if(!qz(r)){const{message:d}=Ne("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(d)}const o=j4e(a,"onSessionSettleRequest()");if(o)throw new Error(o.message);const c=N9(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);if(Fc(s)){const{message:d}=Ne("EXPIRED","onSessionSettleRequest()");throw new Error(d)}}),Se(this,"isValidUpdate",async n=>{if(!Wr(n)){const{message:c}=Ne("MISSING_OR_INVALID",`update() params: ${n}`);throw new Error(c)}const{topic:r,namespaces:a}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const i=this.client.session.get(r),s=N9(a,"update()");if(s)throw new Error(s.message);const o=QP(i.requiredNamespaces,a,"update()");if(o)throw new Error(o.message)}),Se(this,"isValidExtend",async n=>{if(!Wr(n)){const{message:a}=Ne("MISSING_OR_INVALID",`extend() params: ${n}`);throw new Error(a)}const{topic:r}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r)}),Se(this,"isValidRequest",async n=>{if(!Wr(n)){const{message:c}=Ne("MISSING_OR_INVALID",`request() params: ${n}`);throw new Error(c)}const{topic:r,request:a,chainId:i,expiry:s}=n;this.checkRecentlyDeleted(r),await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!XP(o,i)){const{message:c}=Ne("MISSING_OR_INVALID",`request() chainId: ${i}`);throw new Error(c)}if(!Z4e(a)){const{message:c}=Ne("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(c)}if(!ewe(o,i,a.method)){const{message:c}=Ne("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(c)}if(s&&!awe(s,U9)){const{message:c}=Ne("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${U9.min} and ${U9.max}`);throw new Error(c)}}),Se(this,"isValidRespond",async n=>{var r;if(!Wr(n)){const{message:s}=Ne("MISSING_OR_INVALID",`respond() params: ${n}`);throw new Error(s)}const{topic:a,response:i}=n;try{await this.isValidSessionTopic(a)}catch(s){throw(r=n==null?void 0:n.response)!=null&&r.id&&this.cleanupAfterResponse(n),s}if(!X4e(i)){const{message:s}=Ne("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(i)}`);throw new Error(s)}}),Se(this,"isValidPing",async n=>{if(!Wr(n)){const{message:a}=Ne("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(a)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Se(this,"isValidEmit",async n=>{if(!Wr(n)){const{message:o}=Ne("MISSING_OR_INVALID",`emit() params: ${n}`);throw new Error(o)}const{topic:r,event:a,chainId:i}=n;await this.isValidSessionTopic(r);const{namespaces:s}=this.client.session.get(r);if(!XP(s,i)){const{message:o}=Ne("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw new Error(o)}if(!Q4e(a)){const{message:o}=Ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(o)}if(!twe(s,i,a.name)){const{message:o}=Ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(o)}}),Se(this,"isValidDisconnect",async n=>{if(!Wr(n)){const{message:a}=Ne("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(a)}const{topic:r}=n;await this.isValidSessionOrPairingTopic(r)}),Se(this,"isValidAuthenticate",n=>{const{chains:r,uri:a,domain:i,nonce:s}=n;if(!Array.isArray(r)||r.length===0)throw new Error("chains is required and must be a non-empty array");if(!Xn(a,!1))throw new Error("uri is required parameter");if(!Xn(i,!1))throw new Error("domain is required parameter");if(!Xn(s,!1))throw new Error("nonce is required parameter");if([...new Set(r.map(c=>v2(c).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:o}=v2(r[0]);if(o!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),Se(this,"getVerifyContext",async n=>{const{attestationId:r,hash:a,encryptedId:i,metadata:s,transportType:o}=n,c={verified:{verifyUrl:s.verifyUrl||l5,validation:"UNKNOWN",origin:s.url||""}};try{if(o===Tn.link_mode){const l=this.getAppLinkIfEnabled(s,o);return c.verified.validation=l&&new URL(l).origin===new URL(s.url).origin?"VALID":"INVALID",c}const d=await this.client.core.verify.resolve({attestationId:r,hash:a,encryptedId:i,verifyUrl:s.verifyUrl});d&&(c.verified.origin=d.origin,c.verified.isScam=d.isScam,c.verified.validation=d.origin===new URL(s.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(c)}`),c}),Se(this,"validateSessionProps",(n,r)=>{Object.values(n).forEach((a,i)=>{if(a==null){const{message:s}=Ne("MISSING_OR_INVALID",`${r} must contain an existing value for each key. Received: ${a} for key ${Object.keys(n)[i]}`);throw new Error(s)}})}),Se(this,"getPendingAuthRequest",n=>{const r=this.client.auth.requests.get(n);return typeof r=="object"?r:void 0}),Se(this,"addToRecentlyDeleted",(n,r)=>{if(this.recentlyDeletedMap.set(n,r),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let a=0;const i=this.recentlyDeletedLimit/2;for(const s of this.recentlyDeletedMap.keys()){if(a++>=i)break;this.recentlyDeletedMap.delete(s)}}}),Se(this,"checkRecentlyDeleted",n=>{const r=this.recentlyDeletedMap.get(n);if(r){const{message:a}=Ne("MISSING_OR_INVALID",`Record was recently deleted - ${r}: ${n}`);throw new Error(a)}}),Se(this,"isLinkModeEnabled",(n,r)=>{var a,i,s,o,c,d,l,u,f;return!n||r!==Tn.link_mode?!1:((i=(a=this.client.metadata)==null?void 0:a.redirect)==null?void 0:i.linkMode)===!0&&((o=(s=this.client.metadata)==null?void 0:s.redirect)==null?void 0:o.universal)!==void 0&&((d=(c=this.client.metadata)==null?void 0:c.redirect)==null?void 0:d.universal)!==""&&((l=n==null?void 0:n.redirect)==null?void 0:l.universal)!==void 0&&((u=n==null?void 0:n.redirect)==null?void 0:u.universal)!==""&&((f=n==null?void 0:n.redirect)==null?void 0:f.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(n.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),Se(this,"getAppLinkIfEnabled",(n,r)=>{var a;return this.isLinkModeEnabled(n,r)?(a=n==null?void 0:n.redirect)==null?void 0:a.universal:void 0}),Se(this,"handleLinkModeMessage",({url:n})=>{if(!n||!n.includes("wc_ev")||!n.includes("topic"))return;const r=hP(n,"topic")||"",a=decodeURIComponent(hP(n,"wc_ev")||""),i=this.client.session.keys.includes(r);i&&this.client.session.update(r,{transportType:Tn.link_mode}),this.client.core.dispatchEnvelope({topic:r,message:a,sessionExists:i})}),Se(this,"registerLinkModeListeners",async()=>{var n;if(GT()||w1()&&(n=this.client.metadata.redirect)!=null&&n.linkMode){const r=global==null?void 0:global.Linking;if(typeof r<"u"){r.addEventListener("url",this.handleLinkModeMessage,this.client.name);const a=await r.getInitialURL();a&&setTimeout(()=>{this.handleLinkModeMessage({url:a})},50)}}}),Se(this,"shouldSetTVF",(n,r)=>{if(!r||n!=="wc_sessionRequest")return!1;const{request:a}=r;return Object.keys(Rk).includes(a.method)}),Se(this,"getTVFParams",(n,r,a)=>{var i,s;try{const o=r.request.method,c=this.extractTxHashesFromResult(o,a);return gr(ln({correlationId:n,rpcMethods:[o],chainId:r.chainId},this.isValidContractData(r.request.params)&&{contractAddresses:[(s=(i=r.request.params)==null?void 0:i[0])==null?void 0:s.to]}),{txHashes:c})}catch(o){this.client.logger.warn("Error getting TVF params",o)}return{}}),Se(this,"isValidContractData",n=>{var r;if(!n)return!1;try{const a=(n==null?void 0:n.data)||((r=n==null?void 0:n[0])==null?void 0:r.data);if(!a.startsWith("0x"))return!1;const i=a.slice(2);return/^[0-9a-fA-F]*$/.test(i)?i.length%2===0:!1}catch{}return!1}),Se(this,"extractTxHashesFromResult",(n,r)=>{try{const a=Rk[n];if(typeof r=="string")return[r];const i=r[a.key];if(Du(i))return n==="solana_signAllTransactions"?i.map(s=>Tge(s)):i;if(typeof i=="string")return[i]}catch(a){this.client.logger.warn("Error extracting tx hashes from result",a)}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,n=this.client.core.relayer.messages.getWithoutAck(e);for(const[r,a]of Object.entries(n))for(const i of a)try{await this.onProviderMessageEvent({topic:r,message:i,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${r}, message: ${i}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(S0.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:n,message:r,attestation:a,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(x2)?this.client.auth.authKeys.get(x2):{responseTopic:void 0,publicKey:void 0};try{const o=await this.client.core.crypto.decode(n,r,{receiverPublicKey:s,encoding:i===Tn.link_mode?Vc:Li});ix(o)?(this.client.core.history.set(n,o),await this.onRelayEventRequest({topic:n,payload:o,attestation:a,transportType:i,encryptedId:ys(r)})):N3(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:n,payload:o,transportType:i}),this.client.core.history.delete(n,o.id)):await this.onRelayEventUnknownPayload({topic:n,payload:o,transportType:i}),await this.client.core.relayer.messages.ack(n,r)}catch(o){this.client.logger.error(o)}}registerExpirerEvents(){this.client.core.expirer.on(Qa.expired,async e=>{const{topic:n,id:r}=cz(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,Ne("EXPIRED"),!0);if(r&&this.client.auth.requests.keys.includes(r))return await this.deletePendingAuthRequest(r,Ne("EXPIRED"),!0);n?this.client.session.keys.includes(n)&&(await this.deleteSession({topic:n,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:n})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(K1.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(K1.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Xn(e,!1)){const{message:n}=Ne("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(n)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:n}=Ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(n)}if(Fc(this.client.core.pairing.pairings.get(e).expiry)){const{message:n}=Ne("EXPIRED",`pairing topic: ${e}`);throw new Error(n)}}async isValidSessionTopic(e){if(!Xn(e,!1)){const{message:n}=Ne("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(n)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:n}=Ne("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(n)}if(Fc(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:n}=Ne("EXPIRED",`session topic: ${e}`);throw new Error(n)}if(!this.client.core.crypto.keychain.has(e)){const{message:n}=Ne("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(n)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Xn(e,!1)){const{message:n}=Ne("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(n)}else{const{message:n}=Ne("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(n)}}async isValidProposalId(e){if(!Y4e(e)){const{message:n}=Ne("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(n)}if(!this.client.proposal.keys.includes(e)){const{message:n}=Ne("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(n)}if(Fc(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:n}=Ne("EXPIRED",`proposal id: ${e}`);throw new Error(n)}}}class tTe extends cl{constructor(e,n){super(e,n,F_e,ox),this.core=e,this.logger=n}}class nTe extends cl{constructor(e,n){super(e,n,U_e,ox),this.core=e,this.logger=n}}class rTe extends cl{constructor(e,n){super(e,n,H_e,ox,r=>r.id),this.core=e,this.logger=n}}class aTe extends cl{constructor(e,n){super(e,n,V_e,D3,()=>x2),this.core=e,this.logger=n}}class iTe extends cl{constructor(e,n){super(e,n,W_e,D3),this.core=e,this.logger=n}}class sTe extends cl{constructor(e,n){super(e,n,G_e,D3,r=>r.id),this.core=e,this.logger=n}}var oTe=Object.defineProperty,cTe=(t,e,n)=>e in t?oTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j9=(t,e,n)=>cTe(t,typeof e!="symbol"?e+"":e,n);class dTe{constructor(e,n){this.core=e,this.logger=n,j9(this,"authKeys"),j9(this,"pairingTopics"),j9(this,"requests"),this.authKeys=new aTe(this.core,this.logger),this.pairingTopics=new iTe(this.core,this.logger),this.requests=new sTe(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var lTe=Object.defineProperty,uTe=(t,e,n)=>e in t?lTe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Rt=(t,e,n)=>uTe(t,typeof e!="symbol"?e+"":e,n);class cx extends khe{constructor(e){super(e),Rt(this,"protocol",uq),Rt(this,"version",fq),Rt(this,"name",F9.name),Rt(this,"metadata"),Rt(this,"core"),Rt(this,"logger"),Rt(this,"events",new l0.EventEmitter),Rt(this,"engine"),Rt(this,"session"),Rt(this,"proposal"),Rt(this,"pendingRequest"),Rt(this,"auth"),Rt(this,"signConfig"),Rt(this,"on",(r,a)=>this.events.on(r,a)),Rt(this,"once",(r,a)=>this.events.once(r,a)),Rt(this,"off",(r,a)=>this.events.off(r,a)),Rt(this,"removeListener",(r,a)=>this.events.removeListener(r,a)),Rt(this,"removeAllListeners",r=>this.events.removeAllListeners(r)),Rt(this,"connect",async r=>{try{return await this.engine.connect(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"pair",async r=>{try{return await this.engine.pair(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"approve",async r=>{try{return await this.engine.approve(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"reject",async r=>{try{return await this.engine.reject(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"update",async r=>{try{return await this.engine.update(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"extend",async r=>{try{return await this.engine.extend(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"request",async r=>{try{return await this.engine.request(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"respond",async r=>{try{return await this.engine.respond(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"ping",async r=>{try{return await this.engine.ping(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"emit",async r=>{try{return await this.engine.emit(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"disconnect",async r=>{try{return await this.engine.disconnect(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"find",r=>{try{return this.engine.find(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}}),Rt(this,"authenticate",async(r,a)=>{try{return await this.engine.authenticate(r,a)}catch(i){throw this.logger.error(i.message),i}}),Rt(this,"formatAuthMessage",r=>{try{return this.engine.formatAuthMessage(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"approveSessionAuthenticate",async r=>{try{return await this.engine.approveSessionAuthenticate(r)}catch(a){throw this.logger.error(a.message),a}}),Rt(this,"rejectSessionAuthenticate",async r=>{try{return await this.engine.rejectSessionAuthenticate(r)}catch(a){throw this.logger.error(a.message),a}}),this.name=(e==null?void 0:e.name)||F9.name,this.metadata=$me(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const n=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:v3(DT({level:(e==null?void 0:e.logger)||F9.logger}));this.core=(e==null?void 0:e.core)||new B_e(e),this.logger=Dr(n,this.name),this.session=new nTe(this.core,this.logger),this.proposal=new tTe(this.core,this.logger),this.pendingRequest=new rTe(this.core,this.logger),this.engine=new eTe(this),this.auth=new dTe(this.core,this.logger)}static async init(e){const n=new cx(e);return await n.initialize(),n}get context(){return ca(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout(()=>{this.engine.processRelayMessageCache()},ke.toMiliseconds(ke.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}async function hq(t){if(t.session.length){const e=t.session.keys.length-1;return t.session.get(t.session.keys[e])}return null}function fTe(){return/Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(window.navigator.userAgent)}function pTe(t){return t.startsWith("solana:")}async function Wc(t,e,n,r){const a=await hq(t);if(!a)throw Ar.disconnected();return typeof window<"u"&&fTe()&&a.peer.metadata.redirect&&a.peer.metadata.redirect.native&&window.open(a.peer.metadata.redirect.native,"_blank"),t.request({topic:a.topic,chainId:e,request:{method:n,params:pTe(e)?Q(Q({},r),{},{pubkey:a.self.publicKey}):r}})}async function w6(t){const e=await hq(t);if(!e)throw Ar.disconnected();const n=rz(e.namespaces);if(n&&n.length)return[...new Set(n.map(r=>nz(r).address))];throw Pe.connectionError("Failed to get accounts")}function hTe({connector:t,chainId:e}){return{getPrivateKey:async()=>{throw Ut.methodNotSupported()},getPublicKey:async()=>{throw Ut.methodNotSupported()},getAccounts:async n=>w6(t),processTransaction:async(n,r)=>await Wc(t,`eip155:${e}`,t1.ETH_TRANSACTION,[n]),processSignTransaction:async(n,r)=>await Wc(t,`eip155:${e}`,"eth_signTransaction",[n]),processEthSignMessage:async(n,r)=>await Wc(t,`eip155:${e}`,t1.ETH_SIGN,[n.from,n.data]),processPersonalMessage:async(n,r)=>await Wc(t,`eip155:${e}`,t1.PERSONAL_SIGN,[n.data,n.from]),processTypedMessageV4:async n=>await Wc(t,`eip155:${e}`,t1.ETH_SIGN_TYPED_DATA_V4,[n.from,n.data])}}function bTe({connector:t,chainId:e}){return{requestAccounts:async n=>w6(t),getPrivateKey:async()=>{throw Ut.methodNotSupported()},getSecretKey:async()=>{throw Ut.methodNotSupported()},getPublicKey:async()=>{throw Ut.methodNotSupported()},getAccounts:async n=>w6(t),signAllTransactions:async n=>{throw Ut.methodNotSupported()},signAndSendTransaction:async n=>{throw Ut.methodNotSupported()},signMessage:async n=>(await Wc(t,`solana:${E5[e]}`,Tr.SIGN_MESSAGE,{message:fd.encode(Buffer.from(n.params.data,"utf-8"))})).signature,signTransaction:async n=>{if((await w6(t)).length===0)throw Ar.disconnected();return(await Wc(t,`solana:${E5[e]}`,Tr.SIGN_TRANSACTION,{transaction:n.params.message})).signature}}}async function yTe({connector:t,chainId:e,newChainId:n}){await Wc(t,`eip155:${e}`,"wallet_switchEthereumChain",[{chainId:n}])}function bq({getAccounts:t,getPrivateKey:e,getPublicKey:n,processEthSignMessage:r,processPersonalMessage:a,processTransaction:i,processSignTransaction:s,processTypedMessageV4:o}){if(!t)throw new Error("opts.getAccounts is required");async function c(m,T){if(typeof m=="string"&&m.length>0){const N=(await t(T)).map(B=>B.toLowerCase()),R=m.toLowerCase();if(N.includes(R))return R}throw Ut.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}async function d(m,T){T.result=await t(m)}async function l(m,T){if(!i)throw Ut.methodNotSupported();const A=m.params[0]||{from:""};A.from=await c(A.from,m),T.result=await i(A,m)}async function u(m,T){if(!s)throw Ut.methodNotSupported();const A=m.params[0]||{from:""};A.from=await c(A.from,m),T.result=await s(A,m)}async function f(m,T){if(!r)throw Ut.methodNotSupported();let A=m.params;const N=m.params[2]||{};if(Array.isArray(m.params)){if(m.params.length!==2)throw new Error(`WalletMiddleware - incorrect params for ${m.method} method. expected [address, message]`);const R=m.params,B=R[0],F=R[1];A={from:B,data:F}}A=Q(Q({},N),A),T.result=await r(A,m)}async function p(m,T){if(!o)throw Ut.methodNotSupported();if(!(m!=null&&m.params))throw new Error("WalletMiddleware - missing params");let A=m.params;if(Array.isArray(m.params)){if(m.params.length!==2)throw new Error(`WalletMiddleware - incorrect params for ${m.method} method. expected [address, typedData]`);const N=m.params,R=N[0],B=N[1];A={from:R,data:B}}T.result=await o(A,m)}async function h(m,T){if(!a)throw Ut.methodNotSupported();let A=m.params;const N=m.params[2]||{};if(Array.isArray(m.params)){if(!(m.params.length>=2))throw new Error(`WalletMiddleware - incorrect params for ${m.method} method. expected [message, address]`);const R=m.params;if(typeof R[0]=="object"){const{challenge:B,address:F}=R[0];A={from:F,data:B}}else{const B=R[0];A={from:R[1],data:B}}}A=Q(Q({},N),A),T.result=await a(A,m)}async function b(m,T){if(!e)throw Ut.methodNotSupported();T.result=await e(m)}async function v(m,T){if(!n)throw Ut.methodNotSupported();T.result=await n(m)}return vu({eth_accounts:Qt(d),eth_requestAccounts:Qt(d),eth_private_key:Qt(b),eth_public_key:Qt(v),public_key:Qt(v),private_key:Qt(b),eth_sendTransaction:Qt(l),eth_signTransaction:Qt(u),eth_sign:Qt(f),eth_signTypedData_v4:Qt(p),personal_sign:Qt(h)})}function yq(t){const{getAccounts:e,getPrivateKey:n,getPublicKey:r,processTransaction:a,processSignTransaction:i,processEthSignMessage:s,processTypedMessageV4:o,processPersonalMessage:c}=t;return Eu([vu({eth_syncing:!1}),bq({getAccounts:e,getPrivateKey:n,getPublicKey:r,processTransaction:a,processEthSignMessage:s,processSignTransaction:i,processTypedMessageV4:o,processPersonalMessage:c})])}function mq({switchChain:t}){async function e(n,r){var a;const i=(a=n.params)!==null&&a!==void 0&&a.length?n.params[0]:void 0;if(!i)throw Ut.invalidParams("Missing chainId");r.result=await t(i)}return vu({wallet_switchEthereumChain:Qt(e)})}function gq(t){return(e,n,r,a)=>e.method==="eth_chainId"?(n.result=t,a()):r()}function wq(t){return(e,n,r,a)=>e.method==="eth_provider_config"?(n.result=t,a()):r()}function vq(t){const{chainId:e,rpcTarget:n}=t,r=GE({rpcTarget:n});return{networkMiddleware:Eu([gq(e),wq(t),r]),fetchMiddleware:r}}var Eq;class tu extends Qd{constructor({config:e,state:n,connector:r}){super({config:{chain:e.chain,chains:e.chains,skipLookupNetwork:!!e.skipLookupNetwork},state:Q(Q({},n||{}),{},{chainId:"loading",accounts:[]})}),re(this,"connector",null),this.connector=r||null}async enable(){if(!this.connector)throw Ar.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});return await this.setupProvider(this.connector),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){this.onConnectorStateUpdate(e),await this.setupEngine(e,this.config.chain.chainId)}async switchChain({chainId:e}){if(!this.connector)throw Ar.custom({message:"Connector is not initialized, pass wallet connect connector in constructor",code:4902});const n=this.getChain(e),{chainId:r}=n,a=parseInt(r,16);await yTe({connector:this.connector,chainId:a,newChainId:e}),await this.setupEngine(this.connector,e),this.lookupNetwork(this.connector,e),this.update({chainId:e})}async lookupNetwork(e,n){return n}async setupEngine(e,n){const r=this.getChain(n);if(r.chainNamespace===Qe.EIP155)await this.setupEthEngine(e,n);else if(r.chainNamespace===Qe.SOLANA)await this.setupSolEngine(e,n);else throw new Error(`Unsupported chainNamespace: ${r.chainNamespace}`);this.emit("chainChanged",n),this.emit("connect",{chainId:n}),this.update({chainId:n})}async setupEthEngine(e,n){const r=this.getChain(n),a=parseInt(n,16),i=hTe({connector:e,chainId:a}),s=await w6(e);this.update({accounts:s||[]});const o=yq(i),c=this.getEthChainSwitchMiddleware(),d=new cr,{networkMiddleware:l}=vq(r);d.push(o),d.push(c),d.push(l);const u=Sd(d);this.updateProviderEngineProxy(u)}async setupSolEngine(e,n){const r=this.getChain(n),a=bTe({connector:e,chainId:n}),i=await w6(e);this.update({accounts:i||[]});const s=TT(a),o=new cr,{networkMiddleware:c}=$j(r);o.push(s),o.push(c);const d=Sd(o);this.updateProviderEngineProxy(d)}getEthChainSwitchMiddleware(){return mq({switchChain:async r=>{const{chainId:a}=r;await this.switchChain({chainId:a})}})}connectedTopic(){var e;if(!this.connector)throw Pe.notConnectedError("Wallet connect connector is not connected");if((e=this.connector)!==null&&e!==void 0&&(e=e.session)!==null&&e!==void 0&&e.length){var n;const r=this.connector.session.keys.length-1;return(n=this.connector.session.get(this.connector.session.keys[r]))===null||n===void 0?void 0:n.topic}}checkIfAccountAllowed(e){if(!this.connector||!this.connectedTopic())return!1;const n=this.connector.session.get(this.connectedTopic()),r=rz(n.namespaces);let a=!1;for(const s of r){var i;if(((i=nz(s).address)===null||i===void 0?void 0:i.toLowerCase())===(e==null?void 0:e.toLowerCase())){a=!0;break}}return a}async onConnectorStateUpdate(e){e.events.on("session_event",async n=>{if(Te.debug("session_event data",n),!this.provider)throw Pe.notConnectedError("Wallet connect connector is not connected");const{event:r}=n.params,{name:a,data:i}=r||{};if(a==="accountsChanged"&&i!==null&&i!==void 0&&i.length&&this.state.accounts[0]!==i[0]&&this.checkIfAccountAllowed(i[0])&&(this.update({accounts:i}),this.emit("accountsChanged",i)),r.name==="chainChanged"){if(!i)return;const o=`0x${i.toString(16)}`,{currentChain:c}=this;o&&c.chainId!==o&&await this.setupEngine(e,o)}})}}Eq=tu;re(tu,"getProviderInstance",async t=>{const e=new Eq({config:{chain:t.chain,chains:t.chains,skipLookupNetwork:t.skipLookupNetwork}});return await e.setupProvider(t.connector),e});class mTe extends Hp{constructor(e){var n,r,a,i,s;super(e),re(this,"name",Be.WALLET_CONNECT_V2),re(this,"connectorNamespace",ui.MULTICHAIN),re(this,"currentChainNamespace",Qe.OTHER),re(this,"type",Aa.EXTERNAL),re(this,"connectorOptions",void 0),re(this,"status",ge.NOT_READY),re(this,"connectorData",{uri:""}),re(this,"connector",null),re(this,"activeSession",null),re(this,"wcProvider",null),re(this,"analytics",void 0),this.connectorOptions=Q({},e);const{qrcodeModal:o,walletConnectInitOptions:c}=(e==null?void 0:e.connectorSettings)||{};this.connectorOptions=Q(Q({},this.connectorOptions),{},{connectorSettings:(n=(r=this.connectorOptions)===null||r===void 0?void 0:r.connectorSettings)!==null&&n!==void 0?n:{},loginSettings:(a=(i=this.connectorOptions)===null||i===void 0?void 0:i.loginSettings)!==null&&a!==void 0?a:{}}),this.analytics=e.analytics,o&&(this.connectorOptions.connectorSettings.qrcodeModal=o),c&&(this.connectorOptions.connectorSettings.walletConnectInitOptions=Q(Q({},(s=this.connectorOptions.connectorSettings.walletConnectInitOptions)!==null&&s!==void 0?s:{}),c));const{loginSettings:d}=e;d&&(this.connectorOptions.loginSettings=Q(Q({},this.connectorOptions.loginSettings||{}),d))}get connected(){return!!this.activeSession}get provider(){return this.status!==ge.NOT_READY&&this.wcProvider?this.wcProvider:null}set provider(e){throw new Error("Not implemented")}async init(e){var n;const r=this.coreOptions.chains.find(c=>c.chainId===e.chainId);super.checkInitializationRequirements({chainConfig:r});const a=(n=this.connectorOptions.connectorSettings)===null||n===void 0||(n=n.walletConnectInitOptions)===null||n===void 0?void 0:n.projectId,i=this.coreOptions.chains.filter(c=>c.chainNamespace===Qe.EIP155||c.chainNamespace===Qe.SOLANA);if(i.length===0)throw Me.invalidParams("No supported chains found");const s=await NT(i,a);(!this.connectorOptions.loginSettings||Object.keys(this.connectorOptions.loginSettings).length===0)&&(this.connectorOptions.loginSettings=s.loginSettings),this.connectorOptions.connectorSettings=Kt(s.connectorSettings||{},this.connectorOptions.connectorSettings||{});const{connectorSettings:o}=this.connectorOptions;if(this.connector=await cx.init(o==null?void 0:o.walletConnectInitOptions),this.wcProvider=new tu({config:{chain:r,chains:this.coreOptions.chains},connector:this.connector}),this.emit(Ue.READY,Be.WALLET_CONNECT_V2),this.status=ge.READY,Te.debug("initializing wallet connect v2 connector"),e.autoConnect)if(await this.checkForPersistedSession(),this.connected){this.rehydrated=!0;try{await this.onConnectHandler({chain:r})}catch(c){Te.error("wallet auto connect",c),this.emit(Ue.REHYDRATION_ERROR,c)}}else this.status=ge.NOT_READY,this.emit(Ue.CACHE_CLEAR)}async connect({chainId:e}){super.checkConnectionRequirements();const n=this.coreOptions.chains.find(c=>c.chainId===e);if(!n)throw Pe.connectionError("Chain config is not available");if(!this.connector)throw Me.notReady("Wallet connector is not ready yet");const r=!this.connected&&!this.rehydrated,a=Date.now();let i={connector:this.name,connector_type:this.type,is_injected:this.isInjected,is_wallet_connect:!0,chain_id:Xc(n),chain_name:n==null?void 0:n.displayName,chain_namespace:n==null?void 0:n.chainNamespace};try{const c=()=>{if(r){var d,l,u;const{name:f,url:p,redirect:h}=((d=this.activeSession)===null||d===void 0||(d=d.peer)===null||d===void 0?void 0:d.metadata)||{},{native:b,universal:v,linkMode:m}=h||{};i=Q(Q({},i),{},{connector:f||this.name,wallet_url:p,redirect_native:b,redirect_universal:v,redirect_link_mode_enabled:m}),(l=this.analytics)===null||l===void 0||l.track(Lt.CONNECTION_STARTED,i),(u=this.analytics)===null||u===void 0||u.track(Lt.CONNECTION_COMPLETED,Q(Q({},i),{},{duration:Date.now()-a}))}};return this.connected?(await this.onConnectHandler({chain:n}),this.provider):(this.status!==ge.CONNECTING&&await this.createNewSession({chainConfig:n,trackCompletionEvents:c}),this.provider)}catch(c){if(Te.error("Wallet connect v2 connector error while connecting",c),this.status=ge.READY,this.rehydrated=!0,this.emit(Ue.ERRORED,c),r){var s,o;(s=this.analytics)===null||s===void 0||s.track(Lt.CONNECTION_STARTED,i),(o=this.analytics)===null||o===void 0||o.track(Lt.CONNECTION_FAILED,Q(Q(Q({},i),TL(c)),{},{duration:Date.now()-a}))}throw c instanceof Cr?c:Pe.connectionError(`Failed to login with wallet connect: ${(c==null?void 0:c.message)||""}`,c)}}async switchChain(e,n=!1){if(super.checkSwitchChainRequirements(e,n),!this.wcProvider)throw Me.notReady("Wallet Connect provider is not ready yet");try{await this.wcProvider.switchChain({chainId:e.chainId})}catch(r){throw Te.error("error while switching chain",r),r}}async getUserInfo(){if(!this.connected)throw Pe.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async disconnect(e={cleanup:!1,sessionRemovedByWallet:!1}){var n,r;const{cleanup:a}=e;if(!this.connector||!this.connected||!((n=this.activeSession)!==null&&n!==void 0&&n.topic))throw Pe.notConnectedError("Not connected with wallet");e.sessionRemovedByWallet||await this.connector.disconnect({topic:(r=this.activeSession)===null||r===void 0?void 0:r.topic,reason:tn("USER_DISCONNECTED")}),this.rehydrated=!1,a?(this.connector=null,this.status=ge.NOT_READY,this.wcProvider=null):this.status=ge.READY,this.activeSession=null,this.emit(Ue.DISCONNECTED)}async getIdentityToken(){if(!this.provider||this.status!==ge.CONNECTED)throw Pe.notConnectedError();const{chainId:e}=this.provider,n=this.coreOptions.chains.find(i=>i.chainId===e);if(!n)throw Pe.connectionError("Chain config is not available");const{chainNamespace:r}=n,a=await this.provider.request({method:r===Qe.EIP155?t1.GET_ACCOUNTS:Tr.GET_ACCOUNTS});if(a&&a.length>0){const i=b3(a[0],this.name);if(i&&!h3(i))return{idToken:i};const s={domain:window.location.origin,uri:window.location.href,address:a[0],chainId:parseInt(e,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},o=await YE(s,r),c=await this._getSignedMessage(o,a,r),d=await JE(r,c,o,this.name,this.coreOptions.sessionTime,this.coreOptions.clientId,this.coreOptions.web3AuthNetwork);return y3(a[0],this.name,d),{idToken:d}}throw Pe.notConnectedError("Not connected with wallet, Please login/connect first")}async enableMFA(){throw new Error("Method Not implemented")}async manageMFA(){throw new Error("Method Not implemented")}cleanupPendingPairings(){if(!this.connector)throw Me.notReady("Wallet connector is not ready yet");const e=this.connector.pairing.getAll({active:!1});Du(e)&&e.forEach(n=>{this.connector&&this.connector.pairing.delete(n.topic,tn("USER_DISCONNECTED"))})}async checkForPersistedSession(){if(!this.connector)throw Me.notReady("Wallet connector is not ready yet");if(this.connector.session.length){const e=this.connector.session.keys.length-1;this.activeSession=this.connector.session.get(this.connector.session.keys[e])}return this.activeSession}async createNewSession({forceNewSession:e=!1,chainConfig:n,trackCompletionEvents:r}){try{var a,i;if(!this.connector)throw Me.notReady("Wallet connector is not ready yet");if(!this.connectorOptions.loginSettings||Object.keys(this.connectorOptions.loginSettings).length===0)throw Me.notReady("login settings are not set yet");if(this.status=ge.CONNECTING,this.emit(Ue.CONNECTING,{connector:Be.WALLET_CONNECT_V2}),e&&(a=this.activeSession)!==null&&a!==void 0&&a.topic){var s;await this.connector.disconnect({topic:(s=this.activeSession)===null||s===void 0?void 0:s.topic,reason:tn("USER_DISCONNECTED")})}const{uri:c,approval:d}=await this.connector.connect(this.connectorOptions.loginSettings),l=(i=this.connectorOptions)===null||i===void 0||(i=i.connectorSettings)===null||i===void 0?void 0:i.qrcodeModal;if(c)if(l)try{await l.openModal({uri:c}),Te.debug("EVENT","QR Code Modal closed"),this.status=ge.READY,this.emit(Ue.READY,Be.WALLET_CONNECT_V2)}catch(f){Te.error("unable to open qr code modal",f)}else this.updateConnectorData({uri:c});Te.info("awaiting session approval from wallet");const u=await d();this.activeSession=u,await this.onConnectHandler({chain:n,trackCompletionEvents:r}),l&&l.closeModal()}catch(c){var o;if((o=c.message)!==null&&o!==void 0&&o.toLowerCase().includes("proposal expired")){if(Te.info("current connector status: ",this.status),this.status===ge.CONNECTING)return Te.info("retrying to create new wallet connect session since proposal expired"),this.createNewSession({forceNewSession:!0,chainConfig:n});if(this.status===ge.READY){Te.info("ignoring proposal expired error since some other connector is connected");return}}throw Te.error("error while creating new wallet connect session",c),this.emit(Ue.ERRORED,c),c}}async onConnectHandler({chain:e,trackCompletionEvents:n}){var r;if(!this.connector||!this.wcProvider)throw Me.notReady("Wallet connect connector is not ready yet");this.subscribeEvents(),(r=this.connectorOptions.connectorSettings)!==null&&r!==void 0&&r.qrcodeModal&&(this.wcProvider=new tu({config:{chain:e,chains:this.coreOptions.chains,skipLookupNetwork:!0},connector:this.connector})),await this.wcProvider.setupProvider(this.connector),this.cleanupPendingPairings(),this.status=ge.CONNECTED,n&&n(),this.emit(Ue.CONNECTED,{connector:Be.WALLET_CONNECT_V2,reconnected:this.rehydrated,provider:this.provider})}subscribeEvents(){if(!this.connector)throw Me.notReady("Wallet connector is not ready yet");this.connector.events.on("session_update",({topic:e,params:n})=>{if(!this.connector)return;const{namespaces:r}=n,a=this.connector.session.get(e),i=Q(Q({},a),{},{namespaces:r});this.activeSession=i}),this.connector.events.on("session_delete",()=>{this.disconnect({sessionRemovedByWallet:!0})})}async _getSignedMessage(e,n,r){return await this.provider.request({method:r===Qe.EIP155?t1.PERSONAL_SIGN:Tr.SIGN_MESSAGE,params:r===Qe.EIP155?[e,n[0]]:{data:e}})}}const _q=t=>({coreOptions:e,projectConfig:n,analytics:r})=>{var a;const i=(t==null||(a=t.walletConnectInitOptions)===null||a===void 0?void 0:a.projectId)||(n==null?void 0:n.walletConnectProjectId),s=Q(Q({},t),{},{walletConnectInitOptions:Q(Q({},t==null?void 0:t.walletConnectInitOptions),{},{projectId:i})});return new mTe({connectorSettings:s,coreOptions:e,analytics:r})},Z5={GET_ACCOUNTS:"eth_accounts",ETH_TRANSACTION:"eth_sendTransaction",ETH_SIGN_TRANSACTION:"eth_signTransaction",ETH_ESTIMATE_AA_TRANSACTION_GAS:"eth_estimateAATransactionGas",ETH_ESTIMATE_USER_OPERATION_GAS:"eth_estimateUserOperationGas",ETH_GET_SUPPORTED_ENTRY_POINTS:"eth_supportedEntryPoints",ETH_GET_USER_OPERATION:"eth_getUserOperationByHash",ETH_GET_USER_OPERATION_RECEIPT:"eth_getUserOperationReceipt",ETH_SEND_USER_OPERATION:"eth_sendUserOperation",PIMLICO_GET_USER_OPERATION_GAS_PRICE:"pimlico_getUserOperationGasPrice",PIMLICO_GET_USER_OPERATION_STATUS:"pimlico_getUserOperationStatus",PIMLICO_SIMULATE_ASSET_CHANGES:"pimlico_simulateAssetChanges",BICONOMY_GET_GAS_FEE_VALUES:"biconomy_getGasFeeValues",BICONOMY_GET_USER_OPERATION_STATUS:"biconomy_getUserOperationStatus",ETH_GET_PAYMASTER_DATA:"pm_getPaymasterData",ETH_GET_PAYMASTER_STUB_DATA:"pm_getPaymasterStubData",ETH_SPONSOR_USER_OPERATION:"pm_sponsorUserOperation",ETH_GET_FEE_QUOTE_OR_DATA:"pm_getFeeQuoteOrData",PIMLICO_GET_TOKEN_QUOTES:"pimlico_getTokenQuotes",ETH_REQUEST_ACCOUNTS:"eth_requestAccounts",ETH_SEND_RAW_TRANSACTION:"eth_sendRawTransaction",ETH_SIGN:"eth_sign",ETH_SIGN_TYPED_DATA_V4:"eth_signTypedData_v4",PERSONAL_SIGN:"personal_sign",ETH_GET_TRANSACTION_COUNT:"eth_getTransactionCount",ETH_GET_TRANSACTION_BY_HASH:"eth_getTransactionByHash",ETH_GET_TRANSACTION_RECEIPT:"eth_getTransactionReceipt",WATCH_ASSET:"wallet_watchAsset",ETH_GET_BLOCK_BY_HASH:"eth_getBlockByHash",ETH_GET_CODE:"eth_getCode",ETH_GET_GAS_PRICE:"eth_gasPrice",ETH_PRIVATE_KEY:"eth_privateKey",PRIVATE_KEY:"private_key",ETH_PUBLIC_KEY:"eth_publicKey",PUBLIC_KEY:"public_key",SWITCH_CHAIN:"wallet_switchEthereumChain",ADD_CHAIN:"wallet_addEthereumChain"},xr={BICONOMY:"biconomy",KERNEL:"kernel",SAFE:"safe",TRUST:"trust",LIGHT:"light",SIMPLE:"simple",NEXUS:"nexus",METAMASK:"metamask"};function ze(t,e,n){const r=t[e.name];if(typeof r=="function")return r;const a=t[n];return typeof a=="function"?a:i=>e(t,i)}function zi(t,{includeName:e=!1}={}){if(t.type!=="function"&&t.type!=="event"&&t.type!=="error")throw new ITe(t.type);return`${t.name}(${$3(t.inputs,{includeName:e})})`}function $3(t,{includeName:e=!1}={}){return t?t.map(n=>gTe(n,{includeName:e})).join(e?", ":","):""}function gTe(t,{includeName:e}){return t.type.startsWith("tuple")?`(${$3(t.components,{includeName:e})})${t.type.slice(5)}`:t.type+(e&&t.name?` ${t.name}`:"")}function zs(t,{strict:e=!0}={}){return!t||typeof t!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x")}function An(t){return zs(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}const Tq="2.31.0";let Mf={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:n})=>e?`${t??"https://viem.sh"}${e}${n?`#${n}`:""}`:void 0,version:`viem@${Tq}`},ce=class Bv extends Error{constructor(e,n={}){var o;const r=(()=>{var c;return n.cause instanceof Bv?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),a=n.cause instanceof Bv&&n.cause.docsPath||n.docsPath,i=(o=Mf.getDocsUrl)==null?void 0:o.call(Mf,{...n,docsPath:a}),s=[e||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Mf.version?[`Version: ${Mf.version}`]:[]].join(`
`);super(s,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=a,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=e,this.version=Tq}walk(e){return xq(this,e)}};function xq(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause!==void 0?xq(t.cause,e):e?null:t}class wTe extends ce{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class $k extends ce{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class Sq extends ce{constructor({data:e,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${$3(n,{includeName:!0})})`,`Data:   ${e} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=n,this.size=r}}class sh extends ce{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class vTe extends ce{constructor({expectedLength:e,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${e}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class ETe extends ce{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${An(n)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Aq extends ce{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class _Te extends ce{constructor(e,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Lk extends ce{constructor(e,{docsPath:n}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Cq extends ce{constructor(e,{docsPath:n}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class TTe extends ce{constructor({docsPath:e}){super("Cannot extract event signature from empty topics.",{docsPath:e,name:"AbiEventSignatureEmptyTopicsError"})}}class Iq extends ce{constructor(e,{docsPath:n}){super([`Encoded event signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Bk extends ce{constructor(e,{docsPath:n}={}){super([`Event ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class nu extends ce{constructor(e,{docsPath:n}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Oq extends ce{constructor(e,{docsPath:n}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class xTe extends ce{constructor(e,{docsPath:n}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class STe extends ce{constructor(e,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${zi(e.abiItem)}\`, and`,`\`${n.type}\` in \`${zi(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let Mq=class extends ce{constructor({expectedSize:e,givenSize:n}){super(`Expected bytes${e}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class X5 extends ce{constructor({abiItem:e,data:n,params:r,size:a}){super([`Data size of ${a} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${$3(r,{includeName:!0})})`,`Data:   ${n} (${a} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e,this.data=n,this.params=r,this.size=a}}class L3 extends ce{constructor({abiItem:e,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${zi(e,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=e}}class ATe extends ce{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class CTe extends ce{constructor(e,{docsPath:n}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Pq=class extends ce{constructor(e){super([`Value "${e}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class ITe extends ce{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class OTe extends ce{constructor(e){super(`Type "${e}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class MTe extends ce{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let kq=class extends ce{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Nq=class extends ce{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Fk extends ce{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${e} ${r} long.`,{name:"InvalidBytesLengthError"})}}function Rn(t,{dir:e,size:n=32}={}){return typeof t=="string"?c1(t,{dir:e,size:n}):PTe(t,{dir:e,size:n})}function c1(t,{dir:e,size:n=32}={}){if(n===null)return t;const r=t.replace("0x","");if(r.length>n*2)throw new Nq({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[e==="right"?"padEnd":"padStart"](n*2,"0")}`}function PTe(t,{dir:e,size:n=32}={}){if(n===null)return t;if(t.length>n)throw new Nq({size:t.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let a=0;a<n;a++){const i=e==="right";r[i?a:n-a-1]=t[i?a:t.length-a-1]}return r}let Rq=class extends ce{constructor({max:e,min:n,signed:r,size:a,value:i}){super(`Number "${i}" is not in safe ${a?`${a*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${n} to ${e})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}};class kTe extends ce{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class NTe extends ce{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let RTe=class extends ce{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function d1(t,{dir:e="left"}={}){let n=typeof t=="string"?t.replace("0x",""):t,r=0;for(let a=0;a<n.length-1&&n[e==="left"?a:n.length-a-1].toString()==="0";a++)r++;return n=e==="left"?n.slice(r):n.slice(0,n.length-r),typeof t=="string"?(n.length===1&&e==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Zi(t,{size:e}){if(An(t)>e)throw new RTe({givenSize:An(t),maxSize:e})}function c0(t,e={}){const{signed:n}=e;e.size&&Zi(t,{size:e.size});const r=BigInt(t);if(!n)return r;const a=(t.length-2)/2,i=(1n<<BigInt(a)*8n-1n)-1n;return r<=i?r:r-BigInt(`0x${"f".padStart(a*2,"f")}`)-1n}function DTe(t,e={}){let n=t;if(e.size&&(Zi(n,{size:e.size}),n=d1(n)),d1(n)==="0x00")return!1;if(d1(n)==="0x01")return!0;throw new NTe(n)}function qi(t,e={}){return Number(c0(t,e))}const $Te=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Sn(t,e={}){return typeof t=="number"||typeof t=="bigint"?Le(t,e):typeof t=="string"?Jo(t,e):typeof t=="boolean"?dx(t,e):d0(t,e)}function dx(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Zi(n,{size:e.size}),Rn(n,{size:e.size})):n}function d0(t,e={}){let n="";for(let a=0;a<t.length;a++)n+=$Te[t[a]];const r=`0x${n}`;return typeof e.size=="number"?(Zi(r,{size:e.size}),Rn(r,{dir:"right",size:e.size})):r}function Le(t,e={}){const{signed:n,size:r}=e,a=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<s){const c=typeof t=="bigint"?"n":"";throw new Rq({max:i?`${i}${c}`:void 0,min:`${s}${c}`,signed:n,size:r,value:`${t}${c}`})}const o=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Rn(o,{size:r}):o}const LTe=new TextEncoder;function Jo(t,e={}){const n=LTe.encode(t);return d0(n,e)}const BTe=new TextEncoder;function C0(t,e={}){return typeof t=="number"||typeof t=="bigint"?UTe(t,e):typeof t=="boolean"?FTe(t,e):zs(t)?Ki(t,e):vd(t,e)}function FTe(t,e={}){const n=new Uint8Array(1);return n[0]=Number(t),typeof e.size=="number"?(Zi(n,{size:e.size}),Rn(n,{size:e.size})):n}const ho={zero:48,nine:57,A:65,F:70,a:97,f:102};function Uk(t){if(t>=ho.zero&&t<=ho.nine)return t-ho.zero;if(t>=ho.A&&t<=ho.F)return t-(ho.A-10);if(t>=ho.a&&t<=ho.f)return t-(ho.a-10)}function Ki(t,e={}){let n=t;e.size&&(Zi(n,{size:e.size}),n=Rn(n,{dir:"right",size:e.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const a=r.length/2,i=new Uint8Array(a);for(let s=0,o=0;s<a;s++){const c=Uk(r.charCodeAt(o++)),d=Uk(r.charCodeAt(o++));if(c===void 0||d===void 0)throw new ce(`Invalid byte sequence ("${r[o-2]}${r[o-1]}" in "${r}").`);i[s]=c*16+d}return i}function UTe(t,e){const n=Le(t,e);return Ki(n)}function vd(t,e={}){const n=BTe.encode(t);return typeof e.size=="number"?(Zi(n,{size:e.size}),Rn(n,{dir:"right",size:e.size})):n}function ut(t,e){const n=e||"hex",r=R6(zs(t,{strict:!1})?C0(t):t);return n==="bytes"?r:Sn(r)}const jTe=t=>ut(C0(t));function HTe(t){return jTe(t)}function zTe(t){let e=!0,n="",r=0,a="",i=!1;for(let s=0;s<t.length;s++){const o=t[s];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function",""].includes(a))a="";else if(a+=o,o===")"){i=!0;break}continue}if(o===" "){t[s-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}a+=o,n+=o}}if(!i)throw new ce("Unable to normalize signature.");return a}const qTe=t=>{const e=typeof t=="string"?t:S8(t);return zTe(e)};function Dq(t){return HTe(qTe(t))}const B3=Dq;let Vi=class extends ce{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},oh=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const H9=new oh(8192);function ch(t,e){if(H9.has(`${t}.${e}`))return H9.get(`${t}.${e}`);const n=t.substring(2).toLowerCase(),r=ut(vd(n),"bytes"),a=n.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&a[s]&&(a[s]=a[s].toUpperCase()),(r[s>>1]&15)>=8&&a[s+1]&&(a[s+1]=a[s+1].toUpperCase());const i=`0x${a.join("")}`;return H9.set(`${t}.${e}`,i),i}function Fi(t,e){if(!Nr(t,{strict:!1}))throw new Vi({address:t});return ch(t,e)}const KTe=/^0x[a-fA-F0-9]{40}$/,z9=new oh(8192);function Nr(t,e){const{strict:n=!0}=e??{},r=`${t}.${n}`;if(z9.has(r))return z9.get(r);const a=KTe.test(t)?t.toLowerCase()===t?!0:n?ch(t)===t:!0:!1;return z9.set(r,a),a}function rn(t){return typeof t[0]=="string"?k0(t):VTe(t)}function VTe(t){let e=0;for(const a of t)e+=a.length;const n=new Uint8Array(e);let r=0;for(const a of t)n.set(a,r),r+=a.length;return n}function k0(t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function x0(t,e,n,{strict:r}={}){return zs(t,{strict:!1})?k8(t,e,n,{strict:r}):Bq(t,e,n,{strict:r})}function $q(t,e){if(typeof e=="number"&&e>0&&e>An(t)-1)throw new kq({offset:e,position:"start",size:An(t)})}function Lq(t,e,n){if(typeof e=="number"&&typeof n=="number"&&An(t)!==n-e)throw new kq({offset:n,position:"end",size:An(t)})}function Bq(t,e,n,{strict:r}={}){$q(t,e);const a=t.slice(e,n);return r&&Lq(a,e,n),a}function k8(t,e,n,{strict:r}={}){$q(t,e);const a=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return r&&Lq(a,e,n),a}const WTe=/^(.*)\[([0-9]*)\]$/,Fq=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,lx=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function wn(t,e){if(t.length!==e.length)throw new Aq({expectedLength:t.length,givenLength:e.length});const n=GTe({params:t,values:e}),r=fx(n);return r.length===0?"0x":r}function GTe({params:t,values:e}){const n=[];for(let r=0;r<t.length;r++)n.push(ux({param:t[r],value:e[r]}));return n}function ux({param:t,value:e}){const n=px(t.type);if(n){const[r,a]=n;return JTe(e,{length:r,param:{...t,type:a}})}if(t.type==="tuple")return txe(e,{param:t});if(t.type==="address")return YTe(e);if(t.type==="bool")return XTe(e);if(t.type.startsWith("uint")||t.type.startsWith("int")){const r=t.type.startsWith("int"),[,,a="256"]=lx.exec(t.type)??[];return QTe(e,{signed:r,size:Number(a)})}if(t.type.startsWith("bytes"))return ZTe(e,{param:t});if(t.type==="string")return exe(e);throw new ATe(t.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function fx(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:s,encoded:o}=t[i];s?e+=32:e+=An(o)}const n=[],r=[];let a=0;for(let i=0;i<t.length;i++){const{dynamic:s,encoded:o}=t[i];s?(n.push(Le(e+a,{size:32})),r.push(o),a+=An(o)):n.push(o)}return rn([...n,...r])}function YTe(t){if(!Nr(t))throw new Vi({address:t});return{dynamic:!1,encoded:c1(t.toLowerCase())}}function JTe(t,{length:e,param:n}){const r=e===null;if(!Array.isArray(t))throw new Pq(t);if(!r&&t.length!==e)throw new vTe({expectedLength:e,givenLength:t.length,type:`${n.type}[${e}]`});let a=!1;const i=[];for(let s=0;s<t.length;s++){const o=ux({param:n,value:t[s]});o.dynamic&&(a=!0),i.push(o)}if(r||a){const s=fx(i);if(r){const o=Le(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?rn([o,s]):o}}if(a)return{dynamic:!0,encoded:s}}return{dynamic:!1,encoded:rn(i.map(({encoded:s})=>s))}}function ZTe(t,{param:e}){const[,n]=e.type.split("bytes"),r=An(t);if(!n){let a=t;return r%32!==0&&(a=c1(a,{dir:"right",size:Math.ceil((t.length-2)/2/32)*32})),{dynamic:!0,encoded:rn([c1(Le(r,{size:32})),a])}}if(r!==Number.parseInt(n))throw new ETe({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:c1(t,{dir:"right"})}}function XTe(t){if(typeof t!="boolean")throw new ce(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:c1(dx(t))}}function QTe(t,{signed:e,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,a=e?-r-1n:0n;if(t>r||t<a)throw new Rq({max:r.toString(),min:a.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Le(t,{size:32,signed:e})}}function exe(t){const e=Jo(t),n=Math.ceil(An(e)/32),r=[];for(let a=0;a<n;a++)r.push(c1(x0(e,a*32,(a+1)*32),{dir:"right"}));return{dynamic:!0,encoded:rn([c1(Le(An(e),{size:32})),...r])}}function txe(t,{param:e}){let n=!1;const r=[];for(let a=0;a<e.components.length;a++){const i=e.components[a],s=Array.isArray(t)?a:i.name,o=ux({param:i,value:t[s]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?fx(r):rn(r.map(({encoded:a})=>a))}}function px(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}const dh=t=>x0(Dq(t),0,4);function dl(t){const{abi:e,args:n=[],name:r}=t,a=zs(r,{strict:!1}),i=e.filter(o=>a?o.type==="function"?dh(o)===r:o.type==="event"?B3(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let s;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((d,l)=>{const u="inputs"in o&&o.inputs[l];return u?Fv(d,u):!1})){if(s&&"inputs"in s&&s.inputs){const d=Uq(o.inputs,s.inputs,n);if(d)throw new STe({abiItem:o,type:d[0]},{abiItem:s,type:d[1]})}s=o}}return s||i[0]}function Fv(t,e){const n=typeof t,r=e.type;switch(r){case"address":return Nr(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((a,i)=>Fv(Object.values(t)[i],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(a=>Fv(a,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Uq(t,e,n){for(const r in t){const a=t[r],i=e[r];if(a.type==="tuple"&&i.type==="tuple"&&"components"in a&&"components"in i)return Uq(a.components,i.components,n[r]);const s=[a.type,i.type];if(s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?Nr(n[r],{strict:!1}):s.includes("address")&&s.includes("bytes")?Nr(n[r],{strict:!1}):!1)return s}}const jk="/docs/contract/encodeEventTopics";function lh(t){var c;const{abi:e,eventName:n,args:r}=t;let a=e[0];if(n){const d=dl({abi:e,name:n});if(!d)throw new Bk(n,{docsPath:jk});a=d}if(a.type!=="event")throw new Bk(void 0,{docsPath:jk});const i=zi(a),s=B3(i);let o=[];if(r&&"inputs"in a){const d=(c=a.inputs)==null?void 0:c.filter(u=>"indexed"in u&&u.indexed),l=Array.isArray(r)?r:Object.values(r).length>0?(d==null?void 0:d.map(u=>r[u.name]))??[]:[];l.length>0&&(o=(d==null?void 0:d.map((u,f)=>Array.isArray(l[f])?l[f].map((p,h)=>Hk({param:u,value:l[f][h]})):typeof l[f]<"u"&&l[f]!==null?Hk({param:u,value:l[f]}):null))??[])}return[s,...o]}function Hk({param:t,value:e}){if(t.type==="string"||t.type==="bytes")return ut(C0(e));if(t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/))throw new MTe(t.type);return wn([t],[e])}function F3(t,{method:e}){var r,a;const n={};return t.transport.type==="fallback"&&((a=(r=t.transport).onResponse)==null||a.call(r,({method:i,response:s,status:o,transport:c})=>{o==="success"&&e===i&&(n[s]=c.request)})),i=>n[i]||t.request}async function jq(t,e){const{address:n,abi:r,args:a,eventName:i,fromBlock:s,strict:o,toBlock:c}=e,d=F3(t,{method:"eth_newFilter"}),l=i?lh({abi:r,args:a,eventName:i}):void 0,u=await t.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof s=="bigint"?Le(s):s,toBlock:typeof c=="bigint"?Le(c):c,topics:l}]});return{abi:r,args:a,eventName:i,id:u,request:d(u),strict:!!o,type:"event"}}function On(t){return typeof t=="string"?{address:t,type:"json-rpc"}:t}const zk="/docs/contract/encodeFunctionData";function nxe(t){const{abi:e,args:n,functionName:r}=t;let a=e[0];if(r){const i=dl({abi:e,args:n,name:r});if(!i)throw new nu(r,{docsPath:zk});a=i}if(a.type!=="function")throw new nu(void 0,{docsPath:zk});return{abi:[a],functionName:dh(zi(a))}}function qe(t){const{args:e}=t,{abi:n,functionName:r}=(()=>{var o;return t.abi.length===1&&((o=t.functionName)!=null&&o.startsWith("0x"))?t:nxe(t)})(),a=n[0],i=r,s="inputs"in a&&a.inputs?wn(a.inputs,e??[]):void 0;return k0([i,s??"0x"])}const Hq={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},zq={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},rxe={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class qk extends ce{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class qq extends ce{constructor({length:e,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class axe extends ce{constructor({count:e,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const ixe={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new axe({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(t){if(t<0||t>this.bytes.length-1)throw new qq({length:this.bytes.length,position:t})},decrementPosition(t){if(t<0)throw new qk({offset:t});const e=this.position-t;this.assertPosition(e),this.position=e},getReadCount(t){return this.positionReadCount.get(t||this.position)||0},incrementPosition(t){if(t<0)throw new qk({offset:t});const e=this.position+t;this.assertPosition(e),this.position=e},inspectByte(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(t,e){const n=e??this.position;return this.assertPosition(n+t-1),this.bytes.subarray(n,n+t)},inspectUint8(t){const e=t??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(t){const e=t??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(t){const e=t??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(t){const e=t??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushBytes(t){this.assertPosition(this.position+t.length-1),this.bytes.set(t,this.position),this.position+=t.length},pushUint8(t){this.assertPosition(this.position),this.bytes[this.position]=t,this.position++},pushUint16(t){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,t),this.position+=2},pushUint24(t){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,t>>8),this.dataView.setUint8(this.position+2,t&255),this.position+=3},pushUint32(t){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,t),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const t=this.inspectByte();return this.position++,t},readBytes(t,e){this.assertReadLimit(),this._touch();const n=this.inspectBytes(t);return this.position+=e??t,n},readUint8(){this.assertReadLimit(),this._touch();const t=this.inspectUint8();return this.position+=1,t},readUint16(){this.assertReadLimit(),this._touch();const t=this.inspectUint16();return this.position+=2,t},readUint24(){this.assertReadLimit(),this._touch();const t=this.inspectUint24();return this.position+=3,t},readUint32(){this.assertReadLimit(),this._touch();const t=this.inspectUint32();return this.position+=4,t},get remaining(){return this.bytes.length-this.position},setPosition(t){const e=this.position;return this.assertPosition(t),this.position=t,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const t=this.getReadCount();this.positionReadCount.set(this.position,t+1),t>0&&this.recursiveReadCount++}};function hx(t,{recursiveReadLimit:e=8192}={}){const n=Object.create(ixe);return n.bytes=t,n.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=e,n}function sxe(t,e={}){typeof e.size<"u"&&Zi(t,{size:e.size});const n=d0(t,e);return c0(n,e)}function oxe(t,e={}){let n=t;if(typeof e.size<"u"&&(Zi(n,{size:e.size}),n=d1(n)),n.length>1||n[0]>1)throw new kTe(n);return!!n[0]}function Uo(t,e={}){typeof e.size<"u"&&Zi(t,{size:e.size});const n=d0(t,e);return qi(n,e)}function cxe(t,e={}){let n=t;return typeof e.size<"u"&&(Zi(n,{size:e.size}),n=d1(n,{dir:"right"})),new TextDecoder().decode(n)}function v1(t,e){const n=typeof e=="string"?Ki(e):e,r=hx(n);if(An(n)===0&&t.length>0)throw new sh;if(An(e)&&An(e)<32)throw new Sq({data:typeof e=="string"?e:d0(e),params:t,size:An(e)});let a=0;const i=[];for(let s=0;s<t.length;++s){const o=t[s];r.setPosition(a);const[c,d]=v6(r,o,{staticPosition:0});a+=d,i.push(c)}return i}function v6(t,e,{staticPosition:n}){const r=px(e.type);if(r){const[a,i]=r;return lxe(t,{...e,type:i},{length:a,staticPosition:n})}if(e.type==="tuple")return hxe(t,e,{staticPosition:n});if(e.type==="address")return dxe(t);if(e.type==="bool")return uxe(t);if(e.type.startsWith("bytes"))return fxe(t,e,{staticPosition:n});if(e.type.startsWith("uint")||e.type.startsWith("int"))return pxe(t,e);if(e.type==="string")return bxe(t,{staticPosition:n});throw new CTe(e.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Kk=32,Uv=32;function dxe(t){const e=t.readBytes(32);return[ch(d0(Bq(e,-20))),32]}function lxe(t,e,{length:n,staticPosition:r}){if(!n){const s=Uo(t.readBytes(Uv)),o=r+s,c=o+Kk;t.setPosition(o);const d=Uo(t.readBytes(Kk)),l=Q5(e);let u=0;const f=[];for(let p=0;p<d;++p){t.setPosition(c+(l?p*32:u));const[h,b]=v6(t,e,{staticPosition:c});u+=b,f.push(h)}return t.setPosition(r+32),[f,32]}if(Q5(e)){const s=Uo(t.readBytes(Uv)),o=r+s,c=[];for(let d=0;d<n;++d){t.setPosition(o+d*32);const[l]=v6(t,e,{staticPosition:o});c.push(l)}return t.setPosition(r+32),[c,32]}let a=0;const i=[];for(let s=0;s<n;++s){const[o,c]=v6(t,e,{staticPosition:r+a});a+=c,i.push(o)}return[i,a]}function uxe(t){return[oxe(t.readBytes(32),{size:32}),32]}function fxe(t,e,{staticPosition:n}){const[r,a]=e.type.split("bytes");if(!a){const s=Uo(t.readBytes(32));t.setPosition(n+s);const o=Uo(t.readBytes(32));if(o===0)return t.setPosition(n+32),["0x",32];const c=t.readBytes(o);return t.setPosition(n+32),[d0(c),32]}return[d0(t.readBytes(Number.parseInt(a),32)),32]}function pxe(t,e){const n=e.type.startsWith("int"),r=Number.parseInt(e.type.split("int")[1]||"256"),a=t.readBytes(32);return[r>48?sxe(a,{signed:n}):Uo(a,{signed:n}),32]}function hxe(t,e,{staticPosition:n}){const r=e.components.length===0||e.components.some(({name:s})=>!s),a=r?[]:{};let i=0;if(Q5(e)){const s=Uo(t.readBytes(Uv)),o=n+s;for(let c=0;c<e.components.length;++c){const d=e.components[c];t.setPosition(o+i);const[l,u]=v6(t,d,{staticPosition:o});i+=u,a[r?c:d==null?void 0:d.name]=l}return t.setPosition(n+32),[a,32]}for(let s=0;s<e.components.length;++s){const o=e.components[s],[c,d]=v6(t,o,{staticPosition:n});a[r?s:o==null?void 0:o.name]=c,i+=d}return[a,i]}function bxe(t,{staticPosition:e}){const n=Uo(t.readBytes(32)),r=e+n;t.setPosition(r);const a=Uo(t.readBytes(32));if(a===0)return t.setPosition(e+32),["",32];const i=t.readBytes(a,32),s=cxe(d1(i));return t.setPosition(e+32),[s,32]}function Q5(t){var r;const{type:e}=t;if(e==="string"||e==="bytes"||e.endsWith("[]"))return!0;if(e==="tuple")return(r=t.components)==null?void 0:r.some(Q5);const n=px(t.type);return!!(n&&Q5({...t,type:n[1]}))}function Kq(t){const{abi:e,data:n}=t,r=x0(n,0,4);if(r==="0x")throw new sh;const i=[...e||[],zq,rxe].find(s=>s.type==="error"&&r===dh(zi(s)));if(!i)throw new Cq(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?v1(i.inputs,x0(n,4)):void 0,errorName:i.name}}const e0=(t,e,n)=>JSON.stringify(t,(r,a)=>typeof a=="bigint"?a.toString():a,n);function Vq({abiItem:t,args:e,includeFunctionName:n=!0,includeName:r=!1}){if("name"in t&&"inputs"in t&&t.inputs)return`${n?t.name:""}(${t.inputs.map((a,i)=>`${r&&a.name?`${a.name}: `:""}${typeof e[i]=="object"?e0(e[i]):e[i]}`).join(", ")})`}const yxe={gwei:9,wei:18},mxe={ether:-9,wei:9};function Wq(t,e){let n=t.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(e,"0");let[a,i]=[n.slice(0,n.length-e),n.slice(n.length-e)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${a||"0"}${i?`.${i}`:""}`}function bx(t,e="wei"){return Wq(t,yxe[e])}function pr(t,e="wei"){return Wq(t,mxe[e])}class gxe extends ce{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class wxe extends ce{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function Vk(t){return t.reduce((e,{slot:n,value:r})=>`${e}        ${n}: ${r}
`,"")}function vxe(t){return t.reduce((e,{address:n,...r})=>{let a=`${e}    ${n}:
`;return r.nonce&&(a+=`      nonce: ${r.nonce}
`),r.balance&&(a+=`      balance: ${r.balance}
`),r.code&&(a+=`      code: ${r.code}
`),r.state&&(a+=`      state:
`,a+=Vk(r.state)),r.stateDiff&&(a+=`      stateDiff:
`,a+=Vk(r.stateDiff)),a},`  State Override:
`).slice(0,-1)}function $u(t){const e=Object.entries(t).map(([r,a])=>a===void 0||a===!1?null:[r,a]).filter(Boolean),n=e.reduce((r,[a])=>Math.max(r,a.length),0);return e.map(([r,a])=>`  ${`${r}:`.padEnd(n+1)}  ${a}`).join(`
`)}class Exe extends ce{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class _xe extends ce{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",$u(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Txe extends ce{constructor(e,{account:n,docsPath:r,chain:a,data:i,gas:s,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:u,value:f}){var h;const p=$u({chain:a&&`${a==null?void 0:a.name} (id: ${a==null?void 0:a.id})`,from:n==null?void 0:n.address,to:u,value:typeof f<"u"&&`${bx(f)} ${((h=a==null?void 0:a.nativeCurrency)==null?void 0:h.symbol)||"ETH"}`,data:i,gas:s,gasPrice:typeof o<"u"&&`${pr(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${pr(c)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${pr(d)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Gq extends ce{constructor({blockHash:e,blockNumber:n,blockTag:r,hash:a,index:i}){let s="Transaction";r&&i!==void 0&&(s=`Transaction at block time "${r}" at index "${i}"`),e&&i!==void 0&&(s=`Transaction at block hash "${e}" at index "${i}"`),n&&i!==void 0&&(s=`Transaction at block number "${n}" at index "${i}"`),a&&(s=`Transaction with hash "${a}"`),super(`${s} could not be found.`,{name:"TransactionNotFoundError"})}}class Yq extends ce{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class xxe extends ce{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const Sxe=t=>t,yx=t=>t;class Jq extends ce{constructor(e,{account:n,docsPath:r,chain:a,data:i,gas:s,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:u,value:f,stateOverride:p}){var v;const h=n?On(n):void 0;let b=$u({from:h==null?void 0:h.address,to:u,value:typeof f<"u"&&`${bx(f)} ${((v=a==null?void 0:a.nativeCurrency)==null?void 0:v.symbol)||"ETH"}`,data:i,gas:s,gasPrice:typeof o<"u"&&`${pr(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${pr(c)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${pr(d)} gwei`,nonce:l});p&&(b+=`
${vxe(p)}`),super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class Zq extends ce{constructor(e,{abi:n,args:r,contractAddress:a,docsPath:i,functionName:s,sender:o}){const c=dl({abi:n,args:r,name:s}),d=c?Vq({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,l=c?zi(c,{includeName:!0}):void 0,u=$u({address:a&&Sxe(a),function:l,args:d&&d!=="()"&&`${[...Array((s==null?void 0:s.length)??0).keys()].map(()=>" ").join("")}${d}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${s}".`,{cause:e,docsPath:i,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],u&&"Contract Call:",u].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=e,this.contractAddress=a,this.functionName=s,this.sender=o}}class N8 extends ce{constructor({abi:e,data:n,functionName:r,message:a}){let i,s,o,c;if(n&&n!=="0x")try{s=Kq({abi:e,data:n});const{abiItem:l,errorName:u,args:f}=s;if(u==="Error")c=f[0];else if(u==="Panic"){const[p]=f;c=Hq[p]}else{const p=l?zi(l,{includeName:!0}):void 0,h=l&&f?Vq({abiItem:l,args:f,includeFunctionName:!1,includeName:!1}):void 0;o=[p?`Error: ${p}`:"",h&&h!=="()"?`       ${[...Array((u==null?void 0:u.length)??0).keys()].map(()=>" ").join("")}${h}`:""]}}catch(l){i=l}else a&&(c=a);let d;i instanceof Cq&&(d=i.signature,o=[`Unable to decode signature "${d}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${d}.`]),super(c&&c!=="execution reverted"||d?[`The contract function "${r}" reverted with the following ${d?"signature":"reason"}:`,c||d].join(`
`):`The contract function "${r}" reverted.`,{cause:i,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=s,this.raw=n,this.reason=c,this.signature=d}}class Xq extends ce{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Axe extends ce{constructor({factory:e}){super(`Deployment for counterfactual contract call failed${e?` for factory "${e}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class U3 extends ce{constructor({data:e,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}class f5 extends ce{constructor({body:e,cause:n,details:r,headers:a,status:i,url:s}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${yx(s)}`,e&&`Request body: ${e0(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=a,this.status=i,this.url=s}}class mx extends ce{constructor({body:e,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${yx(r)}`,`Request body: ${e0(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class Wk extends ce{constructor({body:e,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${yx(n)}`,`Request body: ${e0(e)}`],name:"TimeoutError"})}}const Cxe=-1;class la extends ce{constructor(e,{code:n,docsPath:r,metaMessages:a,name:i,shortMessage:s}){super(s,{cause:e,docsPath:r,metaMessages:a||(e==null?void 0:e.metaMessages),name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof mx?e.code:n??Cxe}}class $a extends la{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class ep extends la{constructor(e){super(e,{code:ep.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(ep,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class tp extends la{constructor(e){super(e,{code:tp.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(tp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class np extends la{constructor(e,{method:n}={}){super(e,{code:np.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(np,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class rp extends la{constructor(e){super(e,{code:rp.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(rp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ld extends la{constructor(e){super(e,{code:Ld.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ld,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Bd extends la{constructor(e){super(e,{code:Bd.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Bd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class ap extends la{constructor(e){super(e,{code:ap.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(ap,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class ip extends la{constructor(e){super(e,{code:ip.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(ip,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class sp extends la{constructor(e){super(e,{code:sp.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(sp,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class sd extends la{constructor(e,{method:n}={}){super(e,{code:sd.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(sd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ru extends la{constructor(e){super(e,{code:ru.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ru,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class op extends la{constructor(e){super(e,{code:op.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(op,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class E6 extends $a{constructor(e){super(e,{code:E6.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(E6,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class cp extends $a{constructor(e){super(e,{code:cp.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(cp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class dp extends $a{constructor(e,{method:n}={}){super(e,{code:dp.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(dp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class lp extends $a{constructor(e){super(e,{code:lp.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(lp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class up extends $a{constructor(e){super(e,{code:up.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(up,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class fp extends $a{constructor(e){super(e,{code:fp.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(fp,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class au extends $a{constructor(e){super(e,{code:au.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(au,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class pp extends $a{constructor(e){super(e,{code:pp.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(pp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class hp extends $a{constructor(e){super(e,{code:hp.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(hp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class bp extends $a{constructor(e){super(e,{code:bp.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(bp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class yp extends $a{constructor(e){super(e,{code:yp.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(yp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class mp extends $a{constructor(e){super(e,{code:mp.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(mp,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class iu extends $a{constructor(e){super(e,{code:iu.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(iu,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Ixe extends la{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const Oxe=3;function Fd(t,{abi:e,address:n,args:r,docsPath:a,functionName:i,sender:s}){const o=t instanceof U3?t:t instanceof ce?t.walk(h=>"data"in h)||t.walk():{},{code:c,data:d,details:l,message:u,shortMessage:f}=o,p=t instanceof sh?new Xq({functionName:i}):[Oxe,Ld.code].includes(c)&&(d||l||u||f)?new N8({abi:e,data:typeof d=="object"?d.data:d,functionName:i,message:o instanceof mx?l:f??u}):t;return new Zq(p,{abi:e,args:r,contractAddress:n,docsPath:a,functionName:i,sender:s})}function Mxe(t){const e=ut(`0x${t.substring(4)}`).substring(26);return ch(`0x${e}`)}async function Pxe({hash:t,signature:e}){const n=zs(t)?t:Sn(t),{secp256k1:r}=await xt(async()=>{const{secp256k1:s}=await Promise.resolve().then(()=>eIe);return{secp256k1:s}},void 0);return`0x${(()=>{if(typeof e=="object"&&"r"in e&&"s"in e){const{r:d,s:l,v:u,yParity:f}=e,p=Number(f??u),h=Gk(p);return new r.Signature(c0(d),c0(l)).addRecoveryBit(h)}const s=zs(e)?e:Sn(e);if(An(s)!==65)throw new Error("invalid signature length");const o=qi(`0x${s.slice(130)}`),c=Gk(o);return r.Signature.fromCompact(s.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function Gk(t){if(t===0||t===1)return t;if(t===27)return 0;if(t===28)return 1;throw new Error("Invalid yParityOrV value")}async function Qq({hash:t,signature:e}){return Mxe(await Pxe({hash:t,signature:e}))}function eK(t,e="hex"){const n=tK(t),r=hx(new Uint8Array(n.length));return n.encode(r),e==="hex"?d0(r.bytes):r.bytes}function tK(t){return Array.isArray(t)?kxe(t.map(e=>tK(e))):Nxe(t)}function kxe(t){const e=t.reduce((a,i)=>a+i.length,0),n=nK(e);return{length:e<=55?1+e:1+n+e,encode(a){e<=55?a.pushByte(192+e):(a.pushByte(247+n),n===1?a.pushUint8(e):n===2?a.pushUint16(e):n===3?a.pushUint24(e):a.pushUint32(e));for(const{encode:i}of t)i(a)}}}function Nxe(t){const e=typeof t=="string"?Ki(t):t,n=nK(e.length);return{length:e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+n+e.length,encode(a){e.length===1&&e[0]<128?a.pushBytes(e):e.length<=55?(a.pushByte(128+e.length),a.pushBytes(e)):(a.pushByte(183+n),n===1?a.pushUint8(e.length):n===2?a.pushUint16(e.length):n===3?a.pushUint24(e.length):a.pushUint32(e.length),a.pushBytes(e))}}}function nK(t){if(t<2**8)return 1;if(t<2**16)return 2;if(t<2**24)return 3;if(t<2**32)return 4;throw new ce("Length is too large.")}function Rxe(t){const{chainId:e,nonce:n,to:r}=t,a=t.contractAddress??t.address,i=ut(k0(["0x05",eK([e?Le(e):"0x",a,n?Le(n):"0x"])]));return r==="bytes"?Ki(i):i}async function rK(t){const{authorization:e,signature:n}=t;return Qq({hash:Rxe(e),signature:n??e})}class Dxe extends ce{constructor(e,{account:n,docsPath:r,chain:a,data:i,gas:s,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,to:u,value:f}){var h;const p=$u({from:n==null?void 0:n.address,to:u,value:typeof f<"u"&&`${bx(f)} ${((h=a==null?void 0:a.nativeCurrency)==null?void 0:h.symbol)||"ETH"}`,data:i,gas:s,gasPrice:typeof o<"u"&&`${pr(o)} gwei`,maxFeePerGas:typeof c<"u"&&`${pr(c)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${pr(d)} gwei`,nonce:l});super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}let r6=class extends ce{constructor({cause:e,message:n}={}){var a;const r=(a=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:a.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}};Object.defineProperty(r6,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(r6,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class R8 extends ce{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${pr(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(R8,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class jv extends ce{constructor({cause:e,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${pr(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(jv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Hv extends ce{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(Hv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class zv extends ce{constructor({cause:e,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(zv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class qv extends ce{constructor({cause:e,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(qv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class Kv extends ce{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(Kv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Vv extends ce{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Vv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Wv extends ce{constructor({cause:e,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Wv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Gv extends ce{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Gv,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class D8 extends ce{constructor({cause:e,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${pr(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${pr(r)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(D8,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class uh extends ce{constructor({cause:e}){super(`An error occurred while executing: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function j3(t,e){const n=(t.details||"").toLowerCase(),r=t instanceof ce?t.walk(a=>(a==null?void 0:a.code)===r6.code):t;return r instanceof ce?new r6({cause:t,message:r.details}):r6.nodeMessage.test(n)?new r6({cause:t,message:t.details}):R8.nodeMessage.test(n)?new R8({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):jv.nodeMessage.test(n)?new jv({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas}):Hv.nodeMessage.test(n)?new Hv({cause:t,nonce:e==null?void 0:e.nonce}):zv.nodeMessage.test(n)?new zv({cause:t,nonce:e==null?void 0:e.nonce}):qv.nodeMessage.test(n)?new qv({cause:t,nonce:e==null?void 0:e.nonce}):Kv.nodeMessage.test(n)?new Kv({cause:t}):Vv.nodeMessage.test(n)?new Vv({cause:t,gas:e==null?void 0:e.gas}):Wv.nodeMessage.test(n)?new Wv({cause:t,gas:e==null?void 0:e.gas}):Gv.nodeMessage.test(n)?new Gv({cause:t}):D8.nodeMessage.test(n)?new D8({cause:t,maxFeePerGas:e==null?void 0:e.maxFeePerGas,maxPriorityFeePerGas:e==null?void 0:e.maxPriorityFeePerGas}):new uh({cause:t})}function $xe(t,{docsPath:e,...n}){const r=(()=>{const a=j3(t,n);return a instanceof uh?t:a})();return new Dxe(r,{docsPath:e,...n})}function H3(t,{format:e}){if(!e)return{};const n={};function r(i){const s=Object.keys(i);for(const o of s)o in t&&(n[o]=t[o]),i[o]&&typeof i[o]=="object"&&!Array.isArray(i[o])&&r(i[o])}const a=e(t||{});return r(a),n}const Lxe={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Lu(t){const e={};return typeof t.authorizationList<"u"&&(e.authorizationList=Bxe(t.authorizationList)),typeof t.accessList<"u"&&(e.accessList=t.accessList),typeof t.blobVersionedHashes<"u"&&(e.blobVersionedHashes=t.blobVersionedHashes),typeof t.blobs<"u"&&(typeof t.blobs[0]!="string"?e.blobs=t.blobs.map(n=>d0(n)):e.blobs=t.blobs),typeof t.data<"u"&&(e.data=t.data),typeof t.from<"u"&&(e.from=t.from),typeof t.gas<"u"&&(e.gas=Le(t.gas)),typeof t.gasPrice<"u"&&(e.gasPrice=Le(t.gasPrice)),typeof t.maxFeePerBlobGas<"u"&&(e.maxFeePerBlobGas=Le(t.maxFeePerBlobGas)),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Le(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Le(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Le(t.nonce)),typeof t.to<"u"&&(e.to=t.to),typeof t.type<"u"&&(e.type=Lxe[t.type]),typeof t.value<"u"&&(e.value=Le(t.value)),e}function Bxe(t){return t.map(e=>({address:e.address,r:e.r?Le(BigInt(e.r)):e.r,s:e.s?Le(BigInt(e.s)):e.s,chainId:Le(e.chainId),nonce:Le(e.nonce),...typeof e.yParity<"u"?{yParity:Le(e.yParity)}:{},...typeof e.v<"u"&&typeof e.yParity>"u"?{v:Le(e.v)}:{}}))}function Yk(t){if(!(!t||t.length===0))return t.reduce((e,{slot:n,value:r})=>{if(n.length!==66)throw new Fk({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Fk({size:r.length,targetSize:66,type:"hex"});return e[n]=r,e},{})}function Fxe(t){const{balance:e,nonce:n,state:r,stateDiff:a,code:i}=t,s={};if(i!==void 0&&(s.code=i),e!==void 0&&(s.balance=Le(e)),n!==void 0&&(s.nonce=Le(n)),r!==void 0&&(s.state=Yk(r)),a!==void 0){if(s.state)throw new wxe;s.stateDiff=Yk(a)}return s}function z3(t){if(!t)return;const e={};for(const{address:n,...r}of t){if(!Nr(n,{strict:!1}))throw new Vi({address:n});if(e[n])throw new gxe({address:n});e[n]=Fxe(r)}return e}const Uxe=2n**16n-1n,jxe=2n**256n-1n;function ll(t){const{account:e,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:a,to:i}=t,s=e?On(e):void 0;if(s&&!Nr(s.address))throw new Vi({address:s.address});if(i&&!Nr(i))throw new Vi({address:i});if(typeof n<"u"&&(typeof r<"u"||typeof a<"u"))throw new Exe;if(r&&r>jxe)throw new R8({maxFeePerGas:r});if(a&&r&&a>r)throw new D8({maxFeePerGas:r,maxPriorityFeePerGas:a})}class Hxe extends ce{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class gx extends ce{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class zxe extends ce{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${pr(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class aK extends ce{constructor({blockHash:e,blockNumber:n}){let r="Block";e&&(r=`Block at hash "${e}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const iK={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function sK(t){const e={...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,chainId:t.chainId?qi(t.chainId):void 0,gas:t.gas?BigInt(t.gas):void 0,gasPrice:t.gasPrice?BigInt(t.gasPrice):void 0,maxFeePerBlobGas:t.maxFeePerBlobGas?BigInt(t.maxFeePerBlobGas):void 0,maxFeePerGas:t.maxFeePerGas?BigInt(t.maxFeePerGas):void 0,maxPriorityFeePerGas:t.maxPriorityFeePerGas?BigInt(t.maxPriorityFeePerGas):void 0,nonce:t.nonce?qi(t.nonce):void 0,to:t.to?t.to:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,type:t.type?iK[t.type]:void 0,typeHex:t.type?t.type:void 0,value:t.value?BigInt(t.value):void 0,v:t.v?BigInt(t.v):void 0};return t.authorizationList&&(e.authorizationList=qxe(t.authorizationList)),e.yParity=(()=>{if(t.yParity)return Number(t.yParity);if(typeof e.v=="bigint"){if(e.v===0n||e.v===27n)return 0;if(e.v===1n||e.v===28n)return 1;if(e.v>=35n)return e.v%2n===0n?1:0}})(),e.type==="legacy"&&(delete e.accessList,delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas,delete e.yParity),e.type==="eip2930"&&(delete e.maxFeePerBlobGas,delete e.maxFeePerGas,delete e.maxPriorityFeePerGas),e.type==="eip1559"&&delete e.maxFeePerBlobGas,e}function qxe(t){return t.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function oK(t){const e=(t.transactions??[]).map(n=>typeof n=="string"?n:sK(n));return{...t,baseFeePerGas:t.baseFeePerGas?BigInt(t.baseFeePerGas):null,blobGasUsed:t.blobGasUsed?BigInt(t.blobGasUsed):void 0,difficulty:t.difficulty?BigInt(t.difficulty):void 0,excessBlobGas:t.excessBlobGas?BigInt(t.excessBlobGas):void 0,gasLimit:t.gasLimit?BigInt(t.gasLimit):void 0,gasUsed:t.gasUsed?BigInt(t.gasUsed):void 0,hash:t.hash?t.hash:null,logsBloom:t.logsBloom?t.logsBloom:null,nonce:t.nonce?t.nonce:null,number:t.number?BigInt(t.number):null,size:t.size?BigInt(t.size):void 0,timestamp:t.timestamp?BigInt(t.timestamp):void 0,transactions:e,totalDifficulty:t.totalDifficulty?BigInt(t.totalDifficulty):null}}async function Ss(t,{blockHash:e,blockNumber:n,blockTag:r,includeTransactions:a}={}){var l,u,f;const i=r??"latest",s=a??!1,o=n!==void 0?Le(n):void 0;let c=null;if(e?c=await t.request({method:"eth_getBlockByHash",params:[e,s]},{dedupe:!0}):c=await t.request({method:"eth_getBlockByNumber",params:[o||i,s]},{dedupe:!!o}),!c)throw new aK({blockHash:e,blockNumber:n});return(((f=(u=(l=t.chain)==null?void 0:l.formatters)==null?void 0:u.block)==null?void 0:f.format)||oK)(c)}async function wx(t){const e=await t.request({method:"eth_gasPrice"});return BigInt(e)}async function Kxe(t,e){return cK(t,e)}async function cK(t,e){var i,s;const{block:n,chain:r=t.chain,request:a}=e||{};try{const o=((i=r==null?void 0:r.fees)==null?void 0:i.maxPriorityFeePerGas)??((s=r==null?void 0:r.fees)==null?void 0:s.defaultPriorityFee);if(typeof o=="function"){const d=n||await ze(t,Ss,"getBlock")({}),l=await o({block:d,client:t,request:a});if(l===null)throw new Error;return l}if(typeof o<"u")return o;const c=await t.request({method:"eth_maxPriorityFeePerGas"});return c0(c)}catch{const[o,c]=await Promise.all([n?Promise.resolve(n):ze(t,Ss,"getBlock")({}),ze(t,wx,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new gx;const d=c-o.baseFeePerGas;return d<0n?0n:d}}async function dK(t,e){return Yv(t,e)}async function Yv(t,e){var f,p;const{block:n,chain:r=t.chain,request:a,type:i="eip1559"}=e||{},s=await(async()=>{var h,b;return typeof((h=r==null?void 0:r.fees)==null?void 0:h.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:t,request:a}):((b=r==null?void 0:r.fees)==null?void 0:b.baseFeeMultiplier)??1.2})();if(s<1)throw new Hxe;const c=10**(((f=s.toString().split(".")[1])==null?void 0:f.length)??0),d=h=>h*BigInt(Math.ceil(s*c))/BigInt(c),l=n||await ze(t,Ss,"getBlock")({});if(typeof((p=r==null?void 0:r.fees)==null?void 0:p.estimateFeesPerGas)=="function"){const h=await r.fees.estimateFeesPerGas({block:n,client:t,multiply:d,request:a,type:i});if(h!==null)return h}if(i==="eip1559"){if(typeof l.baseFeePerGas!="bigint")throw new gx;const h=typeof(a==null?void 0:a.maxPriorityFeePerGas)=="bigint"?a.maxPriorityFeePerGas:await cK(t,{block:l,chain:r,request:a}),b=d(l.baseFeePerGas);return{maxFeePerGas:(a==null?void 0:a.maxFeePerGas)??b+h,maxPriorityFeePerGas:h}}return{gasPrice:(a==null?void 0:a.gasPrice)??d(await ze(t,wx,"getGasPrice")({}))}}async function vx(t,{address:e,blockTag:n="latest",blockNumber:r}){const a=await t.request({method:"eth_getTransactionCount",params:[e,typeof r=="bigint"?Le(r):n]},{dedupe:!!r});return qi(a)}function lK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(i=>Ki(i)):t.blobs,a=[];for(const i of r)a.push(Uint8Array.from(e.blobToKzgCommitment(i)));return n==="bytes"?a:a.map(i=>d0(i))}function uK(t){const{kzg:e}=t,n=t.to??(typeof t.blobs[0]=="string"?"hex":"bytes"),r=typeof t.blobs[0]=="string"?t.blobs.map(s=>Ki(s)):t.blobs,a=typeof t.commitments[0]=="string"?t.commitments.map(s=>Ki(s)):t.commitments,i=[];for(let s=0;s<r.length;s++){const o=r[s],c=a[s];i.push(Uint8Array.from(e.computeBlobKzgProof(o,c)))}return n==="bytes"?i:i.map(s=>d0(s))}function Vxe(t,e){return OY(zs(t,{strict:!1})?C0(t):t)}function Wxe(t){const{commitment:e,version:n=1}=t,r=t.to??(typeof e=="string"?"hex":"bytes"),a=Vxe(e);return a.set([n],0),r==="bytes"?a:d0(a)}function Gxe(t){const{commitments:e,version:n}=t,r=t.to??(typeof e[0]=="string"?"hex":"bytes"),a=[];for(const i of e)a.push(Wxe({commitment:i,to:r,version:n}));return a}const Jk=6,fK=32,Ex=4096,pK=fK*Ex,Zk=pK*Jk-1-1*Ex*Jk;class Yxe extends ce{constructor({maxSize:e,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Jxe extends ce{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}function Zxe(t){const e=t.to??(typeof t.data=="string"?"hex":"bytes"),n=typeof t.data=="string"?Ki(t.data):t.data,r=An(n);if(!r)throw new Jxe;if(r>Zk)throw new Yxe({maxSize:Zk,size:r});const a=[];let i=!0,s=0;for(;i;){const o=hx(new Uint8Array(pK));let c=0;for(;c<Ex;){const d=n.slice(s,s+(fK-1));if(o.pushByte(0),o.pushBytes(d),d.length<31){o.pushByte(128),i=!1;break}c++,s+=31}a.push(o)}return e==="bytes"?a.map(o=>o.bytes):a.map(o=>d0(o.bytes))}function Xxe(t){const{data:e,kzg:n,to:r}=t,a=t.blobs??Zxe({data:e,to:r}),i=t.commitments??lK({blobs:a,kzg:n,to:r}),s=t.proofs??uK({blobs:a,commitments:i,kzg:n,to:r}),o=[];for(let c=0;c<a.length;c++)o.push({blob:a[c],commitment:i[c],proof:s[c]});return o}function Qxe(t){if(t.type)return t.type;if(typeof t.authorizationList<"u")return"eip7702";if(typeof t.blobs<"u"||typeof t.blobVersionedHashes<"u"||typeof t.maxFeePerBlobGas<"u"||typeof t.sidecars<"u")return"eip4844";if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")return"eip1559";if(typeof t.gasPrice<"u")return typeof t.accessList<"u"?"eip2930":"legacy";throw new _xe({transaction:t})}async function mi(t){const e=await t.request({method:"eth_chainId"},{dedupe:!0});return qi(e)}const hK=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Xk=new Map;async function q3(t,e){const{account:n=t.account,blobs:r,chain:a,gas:i,kzg:s,nonce:o,nonceManager:c,parameters:d=hK,type:l}=e,u=n&&On(n),f={...e,...u?{from:u==null?void 0:u.address}:{}};let p;async function h(){return p||(p=await ze(t,Ss,"getBlock")({blockTag:"latest"}),p)}let b;async function v(){return b||(a?a.id:typeof e.chainId<"u"?e.chainId:(b=await ze(t,mi,"getChainId")({}),b))}if(d.includes("nonce")&&typeof o>"u"&&u)if(c){const m=await v();f.nonce=await c.consume({address:u.address,chainId:m,client:t})}else f.nonce=await ze(t,vx,"getTransactionCount")({address:u.address,blockTag:"pending"});if((d.includes("blobVersionedHashes")||d.includes("sidecars"))&&r&&s){const m=lK({blobs:r,kzg:s});if(d.includes("blobVersionedHashes")){const T=Gxe({commitments:m,to:"hex"});f.blobVersionedHashes=T}if(d.includes("sidecars")){const T=uK({blobs:r,commitments:m,kzg:s}),A=Xxe({blobs:r,commitments:m,proofs:T,to:"hex"});f.sidecars=A}}if(d.includes("chainId")&&(f.chainId=await v()),(d.includes("fees")||d.includes("type"))&&typeof l>"u")try{f.type=Qxe(f)}catch{let m=Xk.get(t.uid);if(typeof m>"u"){const T=await h();m=typeof(T==null?void 0:T.baseFeePerGas)=="bigint",Xk.set(t.uid,m)}f.type=m?"eip1559":"legacy"}if(d.includes("fees"))if(f.type!=="legacy"&&f.type!=="eip2930"){if(typeof f.maxFeePerGas>"u"||typeof f.maxPriorityFeePerGas>"u"){const m=await h(),{maxFeePerGas:T,maxPriorityFeePerGas:A}=await Yv(t,{block:m,chain:a,request:f});if(typeof e.maxPriorityFeePerGas>"u"&&e.maxFeePerGas&&e.maxFeePerGas<A)throw new zxe({maxPriorityFeePerGas:A});f.maxPriorityFeePerGas=A,f.maxFeePerGas=T}}else{if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")throw new gx;if(typeof e.gasPrice>"u"){const m=await h(),{gasPrice:T}=await Yv(t,{block:m,chain:a,request:f,type:"legacy"});f.gasPrice=T}}return d.includes("gas")&&typeof i>"u"&&(f.gas=await ze(t,_x,"estimateGas")({...f,account:u&&{address:u.address,type:"json-rpc"}})),ll(f),delete f.parameters,f}async function bK(t,{address:e,blockNumber:n,blockTag:r="latest"}){const a=typeof n=="bigint"?Le(n):void 0,i=await t.request({method:"eth_getBalance",params:[e,a||r]});return BigInt(i)}async function _x(t,e){var a,i,s;const{account:n=t.account}=e,r=n?On(n):void 0;try{let C=function(x){const{block:O,request:S,rpcStateOverride:w}=x;return t.request({method:"eth_estimateGas",params:w?[S,O??"latest",w]:O?[S,O]:[S]})};const{accessList:o,authorizationList:c,blobs:d,blobVersionedHashes:l,blockNumber:u,blockTag:f,data:p,gas:h,gasPrice:b,maxFeePerBlobGas:v,maxFeePerGas:m,maxPriorityFeePerGas:T,nonce:A,value:N,stateOverride:R,...B}=await q3(t,{...e,parameters:(r==null?void 0:r.type)==="local"?void 0:["blobVersionedHashes"]}),I=(typeof u=="bigint"?Le(u):void 0)||f,P=z3(R),$=await(async()=>{if(B.to)return B.to;if(c&&c.length>0)return await rK({authorization:c[0]}).catch(()=>{throw new ce("`to` is required. Could not infer from `authorizationList`")})})();ll(e);const M=(s=(i=(a=t.chain)==null?void 0:a.formatters)==null?void 0:i.transactionRequest)==null?void 0:s.format,E=(M||Lu)({...H3(B,{format:M}),from:r==null?void 0:r.address,accessList:o,authorizationList:c,blobs:d,blobVersionedHashes:l,data:p,gas:h,gasPrice:b,maxFeePerBlobGas:v,maxFeePerGas:m,maxPriorityFeePerGas:T,nonce:A,to:$,value:N});let g=BigInt(await C({block:I,request:E,rpcStateOverride:P}));if(c){const x=await bK(t,{address:E.from}),O=await Promise.all(c.map(async S=>{const{address:w}=S,_=await C({block:I,request:{authorizationList:void 0,data:p,from:r==null?void 0:r.address,to:w,value:Le(x)},rpcStateOverride:P}).catch(()=>100000n);return 2n*BigInt(_)}));g+=O.reduce((S,w)=>S+w,0n)}return g}catch(o){throw $xe(o,{...e,account:r,chain:t.chain})}}async function eSe(t,e){const{abi:n,address:r,args:a,functionName:i,dataSuffix:s,...o}=e,c=qe({abi:n,args:a,functionName:i});try{return await ze(t,_x,"estimateGas")({data:`${c}${s?s.replace("0x",""):""}`,to:r,...o})}catch(d){const l=o.account?On(o.account):void 0;throw Fd(d,{abi:n,address:r,args:a,docsPath:"/docs/contract/estimateContractGas",functionName:i,sender:l==null?void 0:l.address})}}function K3(t,e){if(!Nr(t,{strict:!1}))throw new Vi({address:t});if(!Nr(e,{strict:!1}))throw new Vi({address:e});return t.toLowerCase()===e.toLowerCase()}const Qk="/docs/contract/decodeEventLog";function Tx(t){const{abi:e,data:n,strict:r,topics:a}=t,i=r??!0,[s,...o]=a;if(!s)throw new TTe({docsPath:Qk});const c=e.find(b=>b.type==="event"&&s===B3(zi(b)));if(!(c&&"name"in c)||c.type!=="event")throw new Iq(s,{docsPath:Qk});const{name:d,inputs:l}=c,u=l==null?void 0:l.some(b=>!("name"in b&&b.name)),f=u?[]:{},p=l.map((b,v)=>[b,v]).filter(([b])=>"indexed"in b&&b.indexed);for(let b=0;b<p.length;b++){const[v,m]=p[b],T=o[b];if(!T)throw new L3({abiItem:c,param:v});f[u?m:v.name||m]=tSe({param:v,value:T})}const h=l.filter(b=>!("indexed"in b&&b.indexed));if(h.length>0){if(n&&n!=="0x")try{const b=v1(h,n);if(b)if(u)for(let v=0;v<l.length;v++)f[v]=f[v]??b.shift();else for(let v=0;v<h.length;v++)f[h[v].name]=b[v]}catch(b){if(i)throw b instanceof Sq||b instanceof qq?new X5({abiItem:c,data:n,params:h,size:An(n)}):b}else if(i)throw new X5({abiItem:c,data:"0x",params:h,size:0})}return{eventName:d,args:Object.values(f).length>0?f:void 0}}function tSe({param:t,value:e}){return t.type==="string"||t.type==="bytes"||t.type==="tuple"||t.type.match(/^(.*)\[(\d+)?\]$/)?e:(v1([t],e)||[])[0]}function xx(t){const{abi:e,args:n,logs:r,strict:a=!0}=t,i=(()=>{if(t.eventName)return Array.isArray(t.eventName)?t.eventName:[t.eventName]})();return r.map(s=>{var o;try{const c=e.find(l=>l.type==="event"&&s.topics[0]===B3(l));if(!c)return null;const d=Tx({...s,abi:[c],strict:a});return i&&!i.includes(d.eventName)||!nSe({args:d.args,inputs:c.inputs,matchArgs:n})?null:{...d,...s}}catch(c){let d,l;if(c instanceof Iq)return null;if(c instanceof X5||c instanceof L3){if(a)return null;d=c.abiItem.name,l=(o=c.abiItem.inputs)==null?void 0:o.some(u=>!("name"in u&&u.name))}return{...s,args:l?[]:{},eventName:d}}}).filter(Boolean)}function nSe(t){const{args:e,inputs:n,matchArgs:r}=t;if(!r)return!0;if(!e)return!1;function a(i,s,o){try{return i.type==="address"?K3(s,o):i.type==="string"||i.type==="bytes"?ut(C0(s))===o:s===o}catch{return!1}}return Array.isArray(e)&&Array.isArray(r)?r.every((i,s)=>{if(i==null)return!0;const o=n[s];return o?(Array.isArray(i)?i:[i]).some(d=>a(o,d,e[s])):!1}):typeof e=="object"&&!Array.isArray(e)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,s])=>{if(s==null)return!0;const o=n.find(d=>d.name===i);return o?(Array.isArray(s)?s:[s]).some(d=>a(o,d,e[i])):!1}):!1}function qs(t,{args:e,eventName:n}={}){return{...t,blockHash:t.blockHash?t.blockHash:null,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,logIndex:t.logIndex?Number(t.logIndex):null,transactionHash:t.transactionHash?t.transactionHash:null,transactionIndex:t.transactionIndex?Number(t.transactionIndex):null,...n?{args:e,eventName:n}:{}}}async function Sx(t,{address:e,blockHash:n,fromBlock:r,toBlock:a,event:i,events:s,args:o,strict:c}={}){const d=c??!1,l=s??(i?[i]:void 0);let u=[];l&&(u=[l.flatMap(b=>lh({abi:[b],eventName:b.name,args:s?void 0:o}))],i&&(u=u[0]));let f;n?f=await t.request({method:"eth_getLogs",params:[{address:e,topics:u,blockHash:n}]}):f=await t.request({method:"eth_getLogs",params:[{address:e,topics:u,fromBlock:typeof r=="bigint"?Le(r):r,toBlock:typeof a=="bigint"?Le(a):a}]});const p=f.map(h=>qs(h));return l?xx({abi:l,args:o,logs:p,strict:d}):p}async function yK(t,e){const{abi:n,address:r,args:a,blockHash:i,eventName:s,fromBlock:o,toBlock:c,strict:d}=e,l=s?dl({abi:n,name:s}):void 0,u=l?void 0:n.filter(f=>f.type==="event");return ze(t,Sx,"getLogs")({address:r,args:a,blockHash:i,event:l,events:u,fromBlock:o,toBlock:c,strict:d})}const q9="/docs/contract/decodeFunctionResult";function ul(t){const{abi:e,args:n,functionName:r,data:a}=t;let i=e[0];if(r){const o=dl({abi:e,args:n,name:r});if(!o)throw new nu(r,{docsPath:q9});i=o}if(i.type!=="function")throw new nu(void 0,{docsPath:q9});if(!i.outputs)throw new Oq(i.name,{docsPath:q9});const s=v1(i.outputs,a);if(s&&s.length>1)return s;if(s&&s.length===1)return s[0]}const rSe="0.1.1";function aSe(){return rSe}class on extends Error{constructor(e,n={}){const r=(()=>{var c;if(n.cause instanceof on){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),a=n.cause instanceof on&&n.cause.docsPath||n.docsPath,s=`https://oxlib.sh${a??""}`,o=[e||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||a?["",r?`Details: ${r}`:void 0,a?`See: ${s}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${aSe()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=a,this.shortMessage=e}walk(e){return mK(this,e)}}function mK(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?mK(t.cause,e):e?null:t}const iSe="#__bigint";function sSe(t,e,n){return JSON.stringify(t,(r,a)=>typeof a=="bigint"?a.toString()+iSe:a,n)}function oSe(t,e){if(tN(t)>e)throw new mSe({givenSize:tN(t),maxSize:e})}const bo={zero:48,nine:57,A:65,F:70,a:97,f:102};function eN(t){if(t>=bo.zero&&t<=bo.nine)return t-bo.zero;if(t>=bo.A&&t<=bo.F)return t-(bo.A-10);if(t>=bo.a&&t<=bo.f)return t-(bo.a-10)}function cSe(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;if(t.length>r)throw new gSe({size:t.length,targetSize:r,type:"Bytes"});const a=new Uint8Array(r);for(let i=0;i<r;i++){const s=n==="right";a[s?i:r-i-1]=t[s?i:t.length-i-1]}return a}function Ax(t,e){if(ia(t)>e)throw new TSe({givenSize:ia(t),maxSize:e})}function dSe(t,e){if(typeof e=="number"&&e>0&&e>ia(t)-1)throw new _K({offset:e,position:"start",size:ia(t)})}function lSe(t,e,n){if(typeof e=="number"&&typeof n=="number"&&ia(t)!==n-e)throw new _K({offset:n,position:"end",size:ia(t)})}function gK(t,e={}){const{dir:n,size:r=32}=e;if(r===0)return t;const a=t.replace("0x","");if(a.length>r*2)throw new xSe({size:Math.ceil(a.length/2),targetSize:r,type:"Hex"});return`0x${a[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const uSe=new TextEncoder;function fSe(t){return t instanceof Uint8Array?t:typeof t=="string"?hSe(t):pSe(t)}function pSe(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function hSe(t,e={}){const{size:n}=e;let r=t;n&&(Ax(t,n),r=jd(t,n));let a=r.slice(2);a.length%2&&(a=`0${a}`);const i=a.length/2,s=new Uint8Array(i);for(let o=0,c=0;o<i;o++){const d=eN(a.charCodeAt(c++)),l=eN(a.charCodeAt(c++));if(d===void 0||l===void 0)throw new on(`Invalid byte sequence ("${a[c-2]}${a[c-1]}" in "${a}").`);s[o]=d*16+l}return s}function bSe(t,e={}){const{size:n}=e,r=uSe.encode(t);return typeof n=="number"?(oSe(r,n),ySe(r,n)):r}function ySe(t,e){return cSe(t,{dir:"right",size:e})}function tN(t){return t.length}let mSe=class extends on{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},gSe=class extends on{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const wSe=new TextEncoder,vSe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function ESe(t,e={}){const{strict:n=!1}=e;if(!t)throw new nN(t);if(typeof t!="string")throw new nN(t);if(n&&!/^0x[0-9a-fA-F]*$/.test(t))throw new rN(t);if(!t.startsWith("0x"))throw new rN(t)}function Ks(...t){return`0x${t.reduce((e,n)=>e+n.replace("0x",""),"")}`}function wK(t){return t instanceof Uint8Array?gp(t):Array.isArray(t)?gp(new Uint8Array(t)):t}function vK(t,e={}){const n=`0x${Number(t)}`;return typeof e.size=="number"?(Ax(n,e.size),Ud(n,e.size)):n}function gp(t,e={}){let n="";for(let a=0;a<t.length;a++)n+=vSe[t[a]];const r=`0x${n}`;return typeof e.size=="number"?(Ax(r,e.size),jd(r,e.size)):r}function Sr(t,e={}){const{signed:n,size:r}=e,a=BigInt(t);let i;r?n?i=(1n<<BigInt(r)*8n-1n)-1n:i=2n**(BigInt(r)*8n)-1n:typeof t=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof i=="bigint"&&n?-i-1n:0;if(i&&a>i||a<s){const d=typeof t=="bigint"?"n":"";throw new EK({max:i?`${i}${d}`:void 0,min:`${s}${d}`,signed:n,size:r,value:`${t}${d}`})}const c=`0x${(n&&a<0?(1n<<BigInt(r*8))+BigInt(a):a).toString(16)}`;return r?Ud(c,r):c}function Cx(t,e={}){return gp(wSe.encode(t),e)}function Ud(t,e){return gK(t,{dir:"left",size:e})}function jd(t,e){return gK(t,{dir:"right",size:e})}function si(t,e,n,r={}){const{strict:a}=r;dSe(t,e);const i=`0x${t.replace("0x","").slice((e??0)*2,(n??t.length)*2)}`;return a&&lSe(i,e,n),i}function ia(t){return Math.ceil((t.length-2)/2)}function _Se(t,e={}){const{strict:n=!1}=e;try{return ESe(t,{strict:n}),!0}catch{return!1}}class EK extends on{constructor({max:e,min:n,signed:r,size:a,value:i}){super(`Number \`${i}\` is not in safe${a?` ${a*8}-bit`:""}${r?" signed":" unsigned"} integer range ${e?`(\`${n}\` to \`${e}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class nN extends on{constructor(e){super(`Value \`${typeof e=="object"?sSe(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class rN extends on{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class TSe extends on{constructor({givenSize:e,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class _K extends on{constructor({offset:e,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class xSe extends on{constructor({size:e,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function SSe(t){return{address:t.address,amount:Sr(t.amount),index:Sr(t.index),validatorIndex:Sr(t.validatorIndex)}}function TK(t){return{...typeof t.baseFeePerGas=="bigint"&&{baseFeePerGas:Sr(t.baseFeePerGas)},...typeof t.blobBaseFee=="bigint"&&{blobBaseFee:Sr(t.blobBaseFee)},...typeof t.feeRecipient=="string"&&{feeRecipient:t.feeRecipient},...typeof t.gasLimit=="bigint"&&{gasLimit:Sr(t.gasLimit)},...typeof t.number=="bigint"&&{number:Sr(t.number)},...typeof t.prevRandao=="bigint"&&{prevRandao:Sr(t.prevRandao)},...typeof t.time=="bigint"&&{time:Sr(t.time)},...t.withdrawals&&{withdrawals:t.withdrawals.map(SSe)}}}const Jv=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"}],Zv=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],xK=[{inputs:[],name:"ResolverNotFound",type:"error"},{inputs:[],name:"ResolverWildcardNotSupported",type:"error"},{inputs:[],name:"ResolverNotContract",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{components:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"errors",type:"tuple[]"}],name:"HttpError",type:"error"}],SK=[...xK,{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]},{name:"resolve",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],ASe=[...xK,{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]},{name:"reverse",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolvedAddress"},{type:"address",name:"reverseResolver"},{type:"address",name:"resolver"}]}],aN=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],iN=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],sN=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],CSe="0x82ad56cb",AK="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",ISe="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",OSe="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572";class Xv extends ce{constructor({blockNumber:e,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...e&&r.blockCreated&&r.blockCreated>e?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class MSe extends ce{constructor({chain:e,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${e.id}  ${e.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${e.id}  ${e.name}`],name:"ChainMismatchError"})}}class PSe extends ce{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class CK extends ce{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const K9="/docs/contract/encodeDeployData";function Bu(t){const{abi:e,args:n,bytecode:r}=t;if(!n||n.length===0)return r;const a=e.find(s=>"type"in s&&s.type==="constructor");if(!a)throw new wTe({docsPath:K9});if(!("inputs"in a))throw new $k({docsPath:K9});if(!a.inputs||a.inputs.length===0)throw new $k({docsPath:K9});const i=wn(a.inputs,n);return k0([r,i])}function Fu({blockNumber:t,chain:e,contract:n}){var a;const r=(a=e==null?void 0:e.contracts)==null?void 0:a[n];if(!r)throw new Xv({chain:e,contract:{name:n}});if(t&&r.blockCreated&&r.blockCreated>t)throw new Xv({blockNumber:t,chain:e,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function IK(t,{docsPath:e,...n}){const r=(()=>{const a=j3(t,n);return a instanceof uh?t:a})();return new Jq(r,{docsPath:e,...n})}function Ix(){let t=()=>{},e=()=>{};return{promise:new Promise((r,a)=>{t=r,e=a}),resolve:t,reject:e}}const V9=new Map;function OK({fn:t,id:e,shouldSplitBatch:n,wait:r=0,sort:a}){const i=async()=>{const l=c();s();const u=l.map(({args:f})=>f);u.length!==0&&t(u).then(f=>{a&&Array.isArray(f)&&f.sort(a);for(let p=0;p<l.length;p++){const{resolve:h}=l[p];h==null||h([f[p],f])}}).catch(f=>{for(let p=0;p<l.length;p++){const{reject:h}=l[p];h==null||h(f)}})},s=()=>V9.delete(e),o=()=>c().map(({args:l})=>l),c=()=>V9.get(e)||[],d=l=>V9.set(e,[...c(),l]);return{flush:s,async schedule(l){const{promise:u,resolve:f,reject:p}=Ix();return(n==null?void 0:n([...o(),l]))&&i(),c().length>0?(d({args:l,resolve:f,reject:p}),u):(d({args:l,resolve:f,reject:p}),setTimeout(i,r),u)}}}async function fh(t,e){var E,C,g,x;const{account:n=t.account,authorizationList:r,batch:a=!!((E=t.batch)!=null&&E.multicall),blockNumber:i,blockTag:s="latest",accessList:o,blobs:c,blockOverrides:d,code:l,data:u,factory:f,factoryData:p,gas:h,gasPrice:b,maxFeePerBlobGas:v,maxFeePerGas:m,maxPriorityFeePerGas:T,nonce:A,to:N,value:R,stateOverride:B,...F}=e,I=n?On(n):void 0;if(l&&(f||p))throw new ce("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(l&&N)throw new ce("Cannot provide both `code` & `to` as parameters.");const P=l&&u,$=f&&p&&N&&u,M=P||$,y=P?RSe({code:l,data:u}):$?DSe({data:u,factory:f,factoryData:p,to:N}):u;try{ll(e);const S=(typeof i=="bigint"?Le(i):void 0)||s,w=d?TK(d):void 0,_=z3(B),k=(x=(g=(C=t.chain)==null?void 0:C.formatters)==null?void 0:g.transactionRequest)==null?void 0:x.format,D=(k||Lu)({...H3(F,{format:k}),from:I==null?void 0:I.address,accessList:o,authorizationList:r,blobs:c,data:y,gas:h,gasPrice:b,maxFeePerBlobGas:v,maxFeePerGas:m,maxPriorityFeePerGas:T,nonce:A,to:M?void 0:N,value:R});if(a&&kSe({request:D})&&!_&&!w)try{return await NSe(t,{...D,blockNumber:i,blockTag:s})}catch(H){if(!(H instanceof CK)&&!(H instanceof Xv))throw H}const U=(()=>{const H=[D,S];return _&&w?[...H,_,w]:_?[...H,_]:w?[...H,{},w]:H})(),j=await t.request({method:"eth_call",params:U});return j==="0x"?{data:void 0}:{data:j}}catch(O){const S=$Se(O),{offchainLookup:w,offchainLookupSignature:_}=await xt(async()=>{const{offchainLookup:k,offchainLookupSignature:L}=await import("./ccip-u_qtDSE4.js");return{offchainLookup:k,offchainLookupSignature:L}},__vite__mapDeps([14,1,2,3,4]));if(t.ccipRead!==!1&&(S==null?void 0:S.slice(0,10))===_&&N)return{data:await w(t,{data:S,to:N})};throw M&&(S==null?void 0:S.slice(0,10))==="0x101bb98d"?new Axe({factory:f}):IK(O,{...e,account:I,chain:t.chain})}}function kSe({request:t}){const{data:e,to:n,...r}=t;return!(!e||e.startsWith(CSe)||!n||Object.values(r).filter(a=>typeof a<"u").length>0)}async function NSe(t,e){var b;const{batchSize:n=1024,wait:r=0}=typeof((b=t.batch)==null?void 0:b.multicall)=="object"?t.batch.multicall:{},{blockNumber:a,blockTag:i="latest",data:s,multicallAddress:o,to:c}=e;let d=o;if(!d){if(!t.chain)throw new CK;d=Fu({blockNumber:a,chain:t.chain,contract:"multicall3"})}const u=(typeof a=="bigint"?Le(a):void 0)||i,{schedule:f}=OK({id:`${t.uid}.${u}`,wait:r,shouldSplitBatch(v){return v.reduce((T,{data:A})=>T+(A.length-2),0)>n*2},fn:async v=>{const m=v.map(N=>({allowFailure:!0,callData:N.data,target:N.to})),T=qe({abi:Jv,args:[m],functionName:"aggregate3"}),A=await t.request({method:"eth_call",params:[{data:T,to:d},u]});return ul({abi:Jv,args:[m],functionName:"aggregate3",data:A||"0x"})}}),[{returnData:p,success:h}]=await f({data:s,to:c});if(!h)throw new U3({data:p});return p==="0x"?{data:void 0}:{data:p}}function RSe(t){const{code:e,data:n}=t;return Bu({abi:VT(["constructor(bytes, bytes)"]),bytecode:AK,args:[e,n]})}function DSe(t){const{data:e,factory:n,factoryData:r,to:a}=t;return Bu({abi:VT(["constructor(address, bytes, address, bytes)"]),bytecode:ISe,args:[a,e,n,r]})}function $Se(t){var n;if(!(t instanceof ce))return;const e=t.walk();return typeof(e==null?void 0:e.data)=="object"?(n=e.data)==null?void 0:n.data:e.data}async function St(t,e){const{abi:n,address:r,args:a,functionName:i,...s}=e,o=qe({abi:n,args:a,functionName:i});try{const{data:c}=await ze(t,fh,"call")({...s,data:o,to:r});return ul({abi:n,args:a,functionName:i,data:c||"0x"})}catch(c){throw Fd(c,{abi:n,address:r,args:a,docsPath:"/docs/contract/readContract",functionName:i})}}async function un(t,e){const{abi:n,address:r,args:a,dataSuffix:i,functionName:s,...o}=e,c=o.account?On(o.account):t.account,d=qe({abi:n,args:a,functionName:s});try{const{data:l}=await ze(t,fh,"call")({batch:!1,data:`${d}${i?i.replace("0x",""):""}`,to:r,...o,account:c}),u=ul({abi:n,args:a,functionName:s,data:l||"0x"}),f=n.filter(p=>"name"in p&&p.name===e.functionName);return{result:u,request:{abi:f,address:r,args:a,dataSuffix:i,functionName:s,...o,account:c}}}catch(l){throw Fd(l,{abi:n,address:r,args:a,docsPath:"/docs/contract/simulateContract",functionName:s,sender:c==null?void 0:c.address})}}const W9=new Map,oN=new Map;let LSe=0;function Vs(t,e,n){const r=++LSe,a=()=>W9.get(t)||[],i=()=>{const l=a();W9.set(t,l.filter(u=>u.id!==r))},s=()=>{const l=a();if(!l.some(f=>f.id===r))return;const u=oN.get(t);l.length===1&&u&&u(),i()},o=a();if(W9.set(t,[...o,{id:r,fns:e}]),o&&o.length>0)return s;const c={};for(const l in e)c[l]=(...u)=>{var p,h;const f=a();if(f.length!==0)for(const b of f)(h=(p=b.fns)[l])==null||h.call(p,...u)};const d=n(c);return typeof d=="function"&&oN.set(t,d),s}async function Qv(t){return new Promise(e=>setTimeout(e,t))}function fl(t,{emitOnBegin:e,initialWaitTime:n,interval:r}){let a=!0;const i=()=>a=!1;return(async()=>{let o;e&&(o=await t({unpoll:i}));const c=await(n==null?void 0:n(o))??r;await Qv(c);const d=async()=>{a&&(await t({unpoll:i}),await Qv(r),d())};d()})(),i}const BSe=new Map,FSe=new Map;function USe(t){const e=(a,i)=>({clear:()=>i.delete(a),get:()=>i.get(a),set:s=>i.set(a,s)}),n=e(t,BSe),r=e(t,FSe);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function jSe(t,{cacheKey:e,cacheTime:n=Number.POSITIVE_INFINITY}){const r=USe(e),a=r.response.get();if(a&&n>0&&new Date().getTime()-a.created.getTime()<n)return a.data;let i=r.promise.get();i||(i=t(),r.promise.set(i));try{const s=await i;return r.response.set({created:new Date,data:s}),s}finally{r.promise.clear()}}const HSe=t=>`blockNumber.${t}`;async function ph(t,{cacheTime:e=t.cacheTime}={}){const n=await jSe(()=>t.request({method:"eth_blockNumber"}),{cacheKey:HSe(t.uid),cacheTime:e});return BigInt(n)}async function V3(t,{filter:e}){const n="strict"in e&&e.strict,r=await e.request({method:"eth_getFilterChanges",params:[e.id]});if(typeof r[0]=="string")return r;const a=r.map(i=>qs(i));return!("abi"in e)||!e.abi?a:xx({abi:e.abi,logs:a,strict:n})}async function W3(t,{filter:e}){return e.request({method:"eth_uninstallFilter",params:[e.id]})}function zSe(t,e){const{abi:n,address:r,args:a,batch:i=!0,eventName:s,fromBlock:o,onError:c,onLogs:d,poll:l,pollingInterval:u=t.pollingInterval,strict:f}=e;return(typeof l<"u"?l:typeof o=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"))?(()=>{const v=f??!1,m=e0(["watchContractEvent",r,a,i,t.uid,s,u,v,o]);return Vs(m,{onLogs:d,onError:c},T=>{let A;o!==void 0&&(A=o-1n);let N,R=!1;const B=fl(async()=>{var F;if(!R){try{N=await ze(t,jq,"createContractEventFilter")({abi:n,address:r,args:a,eventName:s,strict:v,fromBlock:o})}catch{}R=!0;return}try{let I;if(N)I=await ze(t,V3,"getFilterChanges")({filter:N});else{const P=await ze(t,ph,"getBlockNumber")({});A&&A<P?I=await ze(t,yK,"getContractEvents")({abi:n,address:r,args:a,eventName:s,fromBlock:A+1n,toBlock:P,strict:v}):I=[],A=P}if(I.length===0)return;if(i)T.onLogs(I);else for(const P of I)T.onLogs([P])}catch(I){N&&I instanceof Bd&&(R=!1),(F=T.onError)==null||F.call(T,I)}},{emitOnBegin:!0,interval:u});return async()=>{N&&await ze(t,W3,"uninstallFilter")({filter:N}),B()}})})():(()=>{const v=f??!1,m=e0(["watchContractEvent",r,a,i,t.uid,s,u,v]);let T=!0,A=()=>T=!1;return Vs(m,{onLogs:d,onError:c},N=>((async()=>{try{const R=(()=>{if(t.transport.type==="fallback"){const I=t.transport.transports.find(P=>P.config.type==="webSocket");return I?I.value:t.transport}return t.transport})(),B=s?lh({abi:n,eventName:s,args:a}):[],{unsubscribe:F}=await R.subscribe({params:["logs",{address:r,topics:B}],onData(I){var $;if(!T)return;const P=I.result;try{const{eventName:M,args:y}=Tx({abi:n,data:P.data,topics:P.topics,strict:f}),E=qs(P,{args:y,eventName:M});N.onLogs([E])}catch(M){let y,E;if(M instanceof X5||M instanceof L3){if(f)return;y=M.abiItem.name,E=($=M.abiItem.inputs)==null?void 0:$.some(g=>!("name"in g&&g.name))}const C=qs(P,{args:E?[]:{},eventName:y});N.onLogs([C])}},onError(I){var P;(P=N.onError)==null||P.call(N,I)}});A=F,T||A()}catch(R){c==null||c(R)}})(),()=>A()))})()}class Xs extends ce{constructor({docsPath:e}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class S2 extends ce{constructor({docsPath:e,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function MK({chain:t,currentChainId:e}){if(!t)throw new PSe;if(e!==t.id)throw new MSe({chain:t,currentChainId:e})}function PK(t,{docsPath:e,...n}){const r=(()=>{const a=j3(t,n);return a instanceof uh?t:a})();return new Txe(r,{docsPath:e,...n})}async function Ox(t,{serializedTransaction:e}){return t.request({method:"eth_sendRawTransaction",params:[e]},{retryCount:0})}const G9=new oh(128);async function G3(t,e){var T,A,N,R;const{account:n=t.account,chain:r=t.chain,accessList:a,authorizationList:i,blobs:s,data:o,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:p,type:h,value:b,...v}=e;if(typeof n>"u")throw new Xs({docsPath:"/docs/actions/wallet/sendTransaction"});const m=n?On(n):null;try{ll(e);const B=await(async()=>{if(e.to)return e.to;if(e.to!==null&&i&&i.length>0)return await rK({authorization:i[0]}).catch(()=>{throw new ce("`to` is required. Could not infer from `authorizationList`.")})})();if((m==null?void 0:m.type)==="json-rpc"||m===null){let F;r!==null&&(F=await ze(t,mi,"getChainId")({}),MK({currentChainId:F,chain:r}));const I=(N=(A=(T=t.chain)==null?void 0:T.formatters)==null?void 0:A.transactionRequest)==null?void 0:N.format,$=(I||Lu)({...H3(v,{format:I}),accessList:a,authorizationList:i,blobs:s,chainId:F,data:o,from:m==null?void 0:m.address,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:p,to:B,type:h,value:b}),M=G9.get(t.uid),y=M?"wallet_sendTransaction":"eth_sendTransaction";try{return await t.request({method:y,params:[$]},{retryCount:0})}catch(E){if(M===!1)throw E;const C=E;if(C.name==="InvalidInputRpcError"||C.name==="InvalidParamsRpcError"||C.name==="MethodNotFoundRpcError"||C.name==="MethodNotSupportedRpcError")return await t.request({method:"wallet_sendTransaction",params:[$]},{retryCount:0}).then(g=>(G9.set(t.uid,!0),g)).catch(g=>{const x=g;throw x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError"?(G9.set(t.uid,!1),C):x});throw C}}if((m==null?void 0:m.type)==="local"){const F=await ze(t,q3,"prepareTransactionRequest")({account:m,accessList:a,authorizationList:i,blobs:s,chain:r,data:o,gas:c,gasPrice:d,maxFeePerBlobGas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:p,nonceManager:m.nonceManager,parameters:[...hK,"sidecars"],type:h,value:b,...v,to:B}),I=(R=r==null?void 0:r.serializers)==null?void 0:R.transaction,P=await m.signTransaction(F,{serializer:I});return await ze(t,Ox,"sendRawTransaction")({serializedTransaction:P})}throw(m==null?void 0:m.type)==="smart"?new S2({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new S2({docsPath:"/docs/actions/wallet/sendTransaction",type:m==null?void 0:m.type})}catch(B){throw B instanceof S2?B:PK(B,{...e,account:m,chain:e.chain||void 0})}}async function $r(t,e){const{abi:n,account:r=t.account,address:a,args:i,dataSuffix:s,functionName:o,...c}=e;if(typeof r>"u")throw new Xs({docsPath:"/docs/contract/writeContract"});const d=r?On(r):null,l=qe({abi:n,args:i,functionName:o});try{return await ze(t,G3,"sendTransaction")({data:`${l}${s?s.replace("0x",""):""}`,to:a,account:d,...c})}catch(u){throw Fd(u,{abi:n,address:a,args:i,docsPath:"/docs/contract/writeContract",functionName:o,sender:d==null?void 0:d.address})}}const kK={"0x0":"reverted","0x1":"success"};function NK(t){const e={...t,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs?t.logs.map(n=>qs(n)):null,to:t.to?t.to:null,transactionIndex:t.transactionIndex?qi(t.transactionIndex):null,status:t.status?kK[t.status]:null,type:t.type?iK[t.type]||t.type:null};return t.blobGasPrice&&(e.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(e.blobGasUsed=BigInt(t.blobGasUsed)),e}const RK="0x5792579257925792579257925792579257925792579257925792579257925792",DK=Le(0,{size:32});async function qSe(t,e){const{account:n=t.account,capabilities:r,chain:a=t.chain,experimental_fallback:i,experimental_fallbackDelay:s=32,forceAtomic:o=!1,id:c,version:d="2.0.0"}=e,l=n?On(n):null,u=e.calls.map(f=>{const p=f;return{data:p.abi?qe({abi:p.abi,functionName:p.functionName,args:p.args}):p.data,to:p.to,value:p.value?Le(p.value):void 0}});try{const f=await t.request({method:"wallet_sendCalls",params:[{atomicRequired:o,calls:u,capabilities:r,chainId:Le(a.id),from:l==null?void 0:l.address,id:c,version:d}]},{retryCount:0});return typeof f=="string"?{id:f}:f}catch(f){const p=f;if(i&&(p.name==="MethodNotFoundRpcError"||p.name==="MethodNotSupportedRpcError"||p.details.toLowerCase().includes("does not exist / is not available")||p.details.toLowerCase().includes("missing or invalid. request()")||p.details.toLowerCase().includes("did not match any variant of untagged enum"))){if(r&&Object.values(r).some(T=>!T.optional)){const T="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new au(new ce(T,{details:T}))}if(o&&u.length>1){const m="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new iu(new ce(m,{details:m}))}const h=[];for(const m of u){const T=G3(t,{account:l,chain:a,data:m.data,to:m.to,value:m.value?c0(m.value):void 0});h.push(T),s>0&&await new Promise(A=>setTimeout(A,s))}const b=await Promise.allSettled(h);if(b.every(m=>m.status==="rejected"))throw b[0].reason;const v=b.map(m=>m.status==="fulfilled"?m.value:DK);return{id:rn([...v,Le(a.id,{size:32}),RK])}}throw PK(f,{...e,account:l,chain:e.chain})}}async function $K(t,e){async function n(l){if(l.endsWith(RK.slice(2))){const f=d1(k8(l,-64,-32)),p=k8(l,0,-64).slice(2).match(/.{1,64}/g),h=await Promise.all(p.map(v=>DK.slice(2)!==v?t.request({method:"eth_getTransactionReceipt",params:[`0x${v}`]},{dedupe:!0}):void 0)),b=h.some(v=>v===null)?100:h.every(v=>(v==null?void 0:v.status)==="0x1")?200:h.every(v=>(v==null?void 0:v.status)==="0x0")?500:600;return{atomic:!1,chainId:qi(f),receipts:h.filter(Boolean),status:b,version:"2.0.0"}}return t.request({method:"wallet_getCallsStatus",params:[l]})}const{atomic:r=!1,chainId:a,receipts:i,version:s="2.0.0",...o}=await n(e.id),[c,d]=(()=>{const l=o.status;return l>=100&&l<200?["pending",l]:l>=200&&l<300?["success",l]:l>=300&&l<700?["failure",l]:l==="CONFIRMED"?["success",200]:l==="PENDING"?["pending",100]:[void 0,l]})();return{...o,atomic:r,chainId:a?qi(a):void 0,receipts:(i==null?void 0:i.map(l=>({...l,blockNumber:c0(l.blockNumber),gasUsed:c0(l.gasUsed),status:kK[l.status]})))??[],statusCode:d,status:c,version:s}}async function KSe(t,e){const{id:n,pollingInterval:r=t.pollingInterval,status:a=({statusCode:f})=>f>=200,timeout:i=6e4}=e,s=e0(["waitForCallsStatus",t.uid,n]),{promise:o,resolve:c,reject:d}=Ix();let l;const u=Vs(s,{resolve:c,reject:d},f=>{const p=fl(async()=>{const h=b=>{clearTimeout(l),p(),b(),u()};try{const b=await $K(t,{id:n});if(!a(b))return;h(()=>f.resolve(b))}catch(b){h(()=>f.reject(b))}},{interval:r,emitOnBegin:!0});return p});return l=i?setTimeout(()=>{u(),clearTimeout(l),d(new VSe({id:n}))},i):void 0,await o}class VSe extends ce{constructor({id:e}){super(`Timed out while waiting for call bundle with id "${e}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const e7=256;let Tb=e7,xb;function LK(t=11){if(!xb||Tb+t>e7*2){xb="",Tb=0;for(let e=0;e<e7;e++)xb+=(256+Math.random()*256|0).toString(16).substring(1)}return xb.substring(Tb,Tb+++t)}function Y3(t){const{batch:e,chain:n,ccipRead:r,key:a="base",name:i="Base Client",type:s="base"}=t,o=(n==null?void 0:n.blockTime)??12e3,c=Math.min(Math.max(Math.floor(o/2),500),4e3),d=t.pollingInterval??c,l=t.cacheTime??d,u=t.account?On(t.account):void 0,{config:f,request:p,value:h}=t.transport({chain:n,pollingInterval:d}),b={...f,...h},v={account:u,batch:e,cacheTime:l,ccipRead:r,chain:n,key:a,name:i,pollingInterval:d,request:p,transport:b,type:s,uid:LK()};function m(T){return A=>{const N=A(T);for(const B in v)delete N[B];const R={...T,...N};return Object.assign(R,{extend:m(R)})}}return Object.assign(v,{extend:m(v)})}const Sb=new oh(8192);function WSe(t,{enabled:e=!0,id:n}){if(!e||!n)return t();if(Sb.get(n))return Sb.get(n);const r=t().finally(()=>Sb.delete(n));return Sb.set(n,r),r}function t7(t,{delay:e=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((a,i)=>{const s=async({count:o=0}={})=>{const c=async({error:d})=>{const l=typeof e=="function"?e({count:o,error:d}):e;l&&await Qv(l),s({count:o+1})};try{const d=await t();a(d)}catch(d){if(o<n&&await r({count:o,error:d}))return c({error:d});i(d)}};s()})}function GSe(t,e={}){return async(n,r={})=>{var u;const{dedupe:a=!1,methods:i,retryDelay:s=150,retryCount:o=3,uid:c}={...e,...r},{method:d}=n;if((u=i==null?void 0:i.exclude)!=null&&u.includes(d))throw new sd(new Error("method not supported"),{method:d});if(i!=null&&i.include&&!i.include.includes(d))throw new sd(new Error("method not supported"),{method:d});const l=a?Jo(`${c}.${e0(n)}`):void 0;return WSe(()=>t7(async()=>{try{return await t(n)}catch(f){const p=f;switch(p.code){case ep.code:throw new ep(p);case tp.code:throw new tp(p);case np.code:throw new np(p,{method:n.method});case rp.code:throw new rp(p);case Ld.code:throw new Ld(p);case Bd.code:throw new Bd(p);case ap.code:throw new ap(p);case ip.code:throw new ip(p);case sp.code:throw new sp(p);case sd.code:throw new sd(p,{method:n.method});case ru.code:throw new ru(p);case op.code:throw new op(p);case E6.code:throw new E6(p);case cp.code:throw new cp(p);case dp.code:throw new dp(p);case lp.code:throw new lp(p);case up.code:throw new up(p);case fp.code:throw new fp(p);case au.code:throw new au(p);case pp.code:throw new pp(p);case hp.code:throw new hp(p);case bp.code:throw new bp(p);case yp.code:throw new yp(p);case mp.code:throw new mp(p);case iu.code:throw new iu(p);case 5e3:throw new E6(p);default:throw f instanceof ce?f:new Ixe(p)}}},{delay:({count:f,error:p})=>{var h;if(p&&p instanceof f5){const b=(h=p==null?void 0:p.headers)==null?void 0:h.get("Retry-After");if(b!=null&&b.match(/\d/))return Number.parseInt(b)*1e3}return~~(1<<f)*s},retryCount:o,shouldRetry:({error:f})=>YSe(f)}),{enabled:a,id:l})}}function YSe(t){return"code"in t&&typeof t.code=="number"?t.code===-1||t.code===ru.code||t.code===Ld.code:t instanceof f5&&t.status?t.status===403||t.status===408||t.status===413||t.status===429||t.status===500||t.status===502||t.status===503||t.status===504:!0}function BK({key:t,methods:e,name:n,request:r,retryCount:a=3,retryDelay:i=150,timeout:s,type:o},c){const d=LK();return{config:{key:t,methods:e,name:n,request:r,retryCount:a,retryDelay:i,timeout:s,type:o},request:GSe(r,{methods:e,retryCount:a,retryDelay:i,uid:d}),value:c}}function A2(t,e={}){const{key:n="custom",methods:r,name:a="Custom Provider",retryDelay:i}=e;return({retryCount:s})=>BK({key:n,methods:r,name:a,request:t.request.bind(t),retryCount:e.retryCount??s,retryDelay:i,type:"custom"})}class JSe extends ce{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function ZSe(t,{errorInstance:e=new Error("timed out"),timeout:n,signal:r}){return new Promise((a,i)=>{(async()=>{let s;try{const o=new AbortController;n>0&&(s=setTimeout(()=>{r?o.abort():i(e)},n)),a(await t({signal:(o==null?void 0:o.signal)||null}))}catch(o){(o==null?void 0:o.name)==="AbortError"&&i(e),i(o)}finally{clearTimeout(s)}})()})}function XSe(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const cN=XSe();function QSe(t,e={}){return{async request(n){var u;const{body:r,onRequest:a=e.onRequest,onResponse:i=e.onResponse,timeout:s=e.timeout??1e4}=n,o={...e.fetchOptions??{},...n.fetchOptions??{}},{headers:c,method:d,signal:l}=o;try{const f=await ZSe(async({signal:h})=>{const b={...o,body:Array.isArray(r)?e0(r.map(A=>({jsonrpc:"2.0",id:A.id??cN.take(),...A}))):e0({jsonrpc:"2.0",id:r.id??cN.take(),...r}),headers:{"Content-Type":"application/json",...c},method:d||"POST",signal:l||(s>0?h:null)},v=new Request(t,b),m=await(a==null?void 0:a(v,b))??{...b,url:t};return await fetch(m.url??t,m)},{errorInstance:new Wk({body:r,url:t}),timeout:s,signal:!0});i&&await i(f);let p;if((u=f.headers.get("Content-Type"))!=null&&u.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(h){if(f.ok)throw h;p={error:p}}}if(!f.ok)throw new f5({body:r,details:e0(p.error)||f.statusText,headers:f.headers,status:f.status,url:t});return p}catch(f){throw f instanceof f5||f instanceof Wk?f:new f5({body:r,cause:f,url:t})}}}}function C2(t,e={}){const{batch:n,fetchOptions:r,key:a="http",methods:i,name:s="HTTP JSON-RPC",onFetchRequest:o,onFetchResponse:c,retryDelay:d,raw:l}=e;return({chain:u,retryCount:f,timeout:p})=>{const{batchSize:h=1e3,wait:b=0}=typeof n=="object"?n:{},v=e.retryCount??f,m=p??e.timeout??1e4,T=t||(u==null?void 0:u.rpcUrls.default.http[0]);if(!T)throw new JSe;const A=QSe(T,{fetchOptions:r,onRequest:o,onResponse:c,timeout:m});return BK({key:a,methods:i,name:s,async request({method:N,params:R}){const B={method:N,params:R},{schedule:F}=OK({id:T,wait:b,shouldSplitBatch(M){return M.length>h},fn:M=>A.request({body:M}),sort:(M,y)=>M.id-y.id}),I=async M=>n?F(M):[await A.request({body:M})],[{error:P,result:$}]=await I(B);if(l)return{error:P,result:$};if(P)throw new mx({body:B,error:P,url:T});return $},retryCount:v,retryDelay:d,timeout:m,type:"http"},{fetchOptions:r,url:T})}}function Mx(t,e){var r,a,i,s,o,c;if(!(t instanceof ce))return!1;const n=t.walk(d=>d instanceof N8);return n instanceof N8?!!(((r=n.data)==null?void 0:r.errorName)==="ResolverNotFound"||((a=n.data)==null?void 0:a.errorName)==="ResolverWildcardNotSupported"||((i=n.data)==null?void 0:i.errorName)==="ResolverNotContract"||((s=n.data)==null?void 0:s.errorName)==="ResolverError"||((o=n.data)==null?void 0:o.errorName)==="HttpError"||(c=n.reason)!=null&&c.includes("Wildcard on non-extended resolvers is not supported")||e==="reverse"&&n.reason===Hq[50]):!1}function jo(t){const{abi:e,data:n}=t,r=x0(n,0,4),a=e.find(i=>i.type==="function"&&r===dh(zi(i)));if(!a)throw new xTe(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:a.name,args:"inputs"in a&&a.inputs&&a.inputs.length>0?v1(a.inputs,x0(n,4)):void 0}}const Y9="/docs/contract/encodeErrorResult";function dN(t){const{abi:e,errorName:n,args:r}=t;let a=e[0];if(n){const c=dl({abi:e,args:r,name:n});if(!c)throw new Lk(n,{docsPath:Y9});a=c}if(a.type!=="error")throw new Lk(void 0,{docsPath:Y9});const i=zi(a),s=dh(i);let o="0x";if(r&&r.length>0){if(!a.inputs)throw new _Te(a.name,{docsPath:Y9});o=wn(a.inputs,r)}return k0([s,o])}const J9="/docs/contract/encodeFunctionResult";function eAe(t){const{abi:e,functionName:n,result:r}=t;let a=e[0];if(n){const s=dl({abi:e,name:n});if(!s)throw new nu(n,{docsPath:J9});a=s}if(a.type!=="function")throw new nu(void 0,{docsPath:J9});if(!a.outputs)throw new Oq(a.name,{docsPath:J9});const i=(()=>{if(a.outputs.length===0)return[];if(a.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Pq(r)})();return wn(a.outputs,i)}const FK="x-batch-gateway:true";async function Pze(t){const{data:e,ccipRequest:n}=t,{args:[r]}=jo({abi:Zv,data:e}),a=[],i=[];return await Promise.all(r.map(async(s,o)=>{try{i[o]=await n(s),a[o]=!1}catch(c){a[o]=!0,i[o]=tAe(c)}})),eAe({abi:Zv,functionName:"query",result:[a,i]})}function tAe(t){return t.name==="HttpRequestError"&&t.status?dN({abi:Zv,errorName:"HttpError",args:[t.status,t.shortMessage]}):dN({abi:[zq],errorName:"Error",args:["shortMessage"in t?t.shortMessage:t.message]})}function UK(t){if(t.length!==66||t.indexOf("[")!==0||t.indexOf("]")!==65)return null;const e=`0x${t.slice(1,65)}`;return zs(e)?e:null}function I2(t){let e=new Uint8Array(32).fill(0);if(!t)return d0(e);const n=t.split(".");for(let r=n.length-1;r>=0;r-=1){const a=UK(n[r]),i=a?C0(a):ut(vd(n[r]),"bytes");e=ut(rn([e,i]),"bytes")}return d0(e)}function nAe(t){return`[${t.slice(2)}]`}function rAe(t){const e=new Uint8Array(32).fill(0);return t?UK(t)||ut(vd(t)):d0(e)}function J3(t){const e=t.replace(/^\.|\.$/gm,"");if(e.length===0)return new Uint8Array(1);const n=new Uint8Array(vd(e).byteLength+2);let r=0;const a=e.split(".");for(let i=0;i<a.length;i++){let s=vd(a[i]);s.byteLength>255&&(s=vd(nAe(rAe(a[i])))),n[r]=s.length,n.set(s,r+1),r+=s.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function aAe(t,e){const{blockNumber:n,blockTag:r,coinType:a,name:i,gatewayUrls:s,strict:o}=e,{chain:c}=t,d=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Fu({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(u=>i.endsWith(u)))return null;try{const u=qe({abi:iN,functionName:"addr",...a!=null?{args:[I2(i),BigInt(a)]}:{args:[I2(i)]}}),f={address:d,abi:SK,functionName:"resolve",args:[Sn(J3(i)),u,s??[FK]],blockNumber:n,blockTag:r},h=await ze(t,St,"readContract")(f);if(h[0]==="0x")return null;const b=ul({abi:iN,args:a!=null?[I2(i),BigInt(a)]:void 0,functionName:"addr",data:h[0]});return b==="0x"||d1(b)==="0x00"?null:b}catch(u){if(o)throw u;if(Mx(u,"resolve"))return null;throw u}}class iAe extends ce{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class Pf extends ce{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class Px extends ce{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class sAe extends ce{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const oAe=/(?<protocol>https?:\/\/[^\/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,cAe=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,dAe=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,lAe=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function uAe(t){try{const e=await fetch(t,{method:"HEAD"});if(e.status===200){const n=e.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(e){return typeof e=="object"&&typeof e.response<"u"||!globalThis.hasOwnProperty("Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=t})}}function lN(t,e){return t?t.endsWith("/")?t.slice(0,-1):t:e}function jK({uri:t,gatewayUrls:e}){const n=dAe.test(t);if(n)return{uri:t,isOnChain:!0,isEncoded:n};const r=lN(e==null?void 0:e.ipfs,"https://ipfs.io"),a=lN(e==null?void 0:e.arweave,"https://arweave.net"),i=t.match(oAe),{protocol:s,subpath:o,target:c,subtarget:d=""}=(i==null?void 0:i.groups)||{},l=s==="ipns:/"||o==="ipns/",u=s==="ipfs:/"||o==="ipfs/"||cAe.test(t);if(t.startsWith("http")&&!l&&!u){let p=t;return e!=null&&e.arweave&&(p=t.replace(/https:\/\/arweave.net/g,e==null?void 0:e.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((l||u)&&c)return{uri:`${r}/${l?"ipns":"ipfs"}/${c}${d}`,isOnChain:!1,isEncoded:!1};if(s==="ar:/"&&c)return{uri:`${a}/${c}${d||""}`,isOnChain:!1,isEncoded:!1};let f=t.replace(lAe,"");if(f.startsWith("<svg")&&(f=`data:image/svg+xml;base64,${btoa(f)}`),f.startsWith("data:")||f.startsWith("{"))return{uri:f,isOnChain:!0,isEncoded:!1};throw new Px({uri:t})}function HK(t){if(typeof t!="object"||!("image"in t)&&!("image_url"in t)&&!("image_data"in t))throw new iAe({data:t});return t.image||t.image_url||t.image_data}async function fAe({gatewayUrls:t,uri:e}){try{const n=await fetch(e).then(a=>a.json());return await kx({gatewayUrls:t,uri:HK(n)})}catch{throw new Px({uri:e})}}async function kx({gatewayUrls:t,uri:e}){const{uri:n,isOnChain:r}=jK({uri:e,gatewayUrls:t});if(r||await uAe(n))return n;throw new Px({uri:e})}function pAe(t){let e=t;e.startsWith("did:nft:")&&(e=e.replace("did:nft:","").replace(/_/g,"/"));const[n,r,a]=e.split("/"),[i,s]=n.split(":"),[o,c]=r.split(":");if(!i||i.toLowerCase()!=="eip155")throw new Pf({reason:"Only EIP-155 supported"});if(!s)throw new Pf({reason:"Chain ID not found"});if(!c)throw new Pf({reason:"Contract address not found"});if(!a)throw new Pf({reason:"Token ID not found"});if(!o)throw new Pf({reason:"ERC namespace not found"});return{chainID:Number.parseInt(s),namespace:o.toLowerCase(),contractAddress:c,tokenID:a}}async function hAe(t,{nft:e}){if(e.namespace==="erc721")return St(t,{address:e.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(e.tokenID)]});if(e.namespace==="erc1155")return St(t,{address:e.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(e.tokenID)]});throw new sAe({namespace:e.namespace})}async function bAe(t,{gatewayUrls:e,record:n}){return/eip155:/i.test(n)?yAe(t,{gatewayUrls:e,record:n}):kx({uri:n,gatewayUrls:e})}async function yAe(t,{gatewayUrls:e,record:n}){const r=pAe(n),a=await hAe(t,{nft:r}),{uri:i,isOnChain:s,isEncoded:o}=jK({uri:a,gatewayUrls:e});if(s&&(i.includes("data:application/json;base64,")||i.startsWith("{"))){const d=o?atob(i.replace("data:application/json;base64,","")):i,l=JSON.parse(d);return kx({uri:HK(l),gatewayUrls:e})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),fAe({gatewayUrls:e,uri:i.replace(/(?:0x)?{id}/,c)})}async function zK(t,e){const{blockNumber:n,blockTag:r,key:a,name:i,gatewayUrls:s,strict:o}=e,{chain:c}=t,d=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return Fu({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),l=c==null?void 0:c.ensTlds;if(l&&!l.some(u=>i.endsWith(u)))return null;try{const u={address:d,abi:SK,functionName:"resolve",args:[Sn(J3(i)),qe({abi:aN,functionName:"text",args:[I2(i),a]}),s??[FK]],blockNumber:n,blockTag:r},p=await ze(t,St,"readContract")(u);if(p[0]==="0x")return null;const h=ul({abi:aN,functionName:"text",data:p[0]});return h===""?null:h}catch(u){if(o)throw u;if(Mx(u,"resolve"))return null;throw u}}async function mAe(t,{blockNumber:e,blockTag:n,assetGatewayUrls:r,name:a,gatewayUrls:i,strict:s,universalResolverAddress:o}){const c=await ze(t,zK,"getEnsText")({blockNumber:e,blockTag:n,key:"avatar",name:a,universalResolverAddress:o,gatewayUrls:i,strict:s});if(!c)return null;try{return await bAe(t,{record:c,gatewayUrls:r})}catch{return null}}async function gAe(t,{address:e,blockNumber:n,blockTag:r,gatewayUrls:a,strict:i,universalResolverAddress:s}){let o=s;if(!o){if(!t.chain)throw new Error("client chain not configured. universalResolverAddress is required.");o=Fu({blockNumber:n,chain:t.chain,contract:"ensUniversalResolver"})}const c=`${e.toLowerCase().substring(2)}.addr.reverse`;try{const d={address:o,abi:ASe,functionName:"reverse",args:[Sn(J3(c))],blockNumber:n,blockTag:r},l=ze(t,St,"readContract"),[u,f]=a?await l({...d,args:[...d.args,a]}):await l(d);return e.toLowerCase()!==f.toLowerCase()?null:u}catch(d){if(i)throw d;if(Mx(d,"reverse"))return null;throw d}}async function wAe(t,e){const{blockNumber:n,blockTag:r,name:a}=e,{chain:i}=t,s=(()=>{if(e.universalResolverAddress)return e.universalResolverAddress;if(!i)throw new Error("client chain not configured. universalResolverAddress is required.");return Fu({blockNumber:n,chain:i,contract:"ensUniversalResolver"})})(),o=i==null?void 0:i.ensTlds;if(o&&!o.some(d=>a.endsWith(d)))throw new Error(`${a} is not a valid ENS TLD (${o==null?void 0:o.join(", ")}) for chain "${i.name}" (id: ${i.id}).`);const[c]=await ze(t,St,"readContract")({address:s,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Sn(J3(a))],blockNumber:n,blockTag:r});return c}async function qK(t,e){var v,m,T;const{account:n=t.account,blockNumber:r,blockTag:a="latest",blobs:i,data:s,gas:o,gasPrice:c,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:u,to:f,value:p,...h}=e,b=n?On(n):void 0;try{ll(e);const N=(typeof r=="bigint"?Le(r):void 0)||a,R=(T=(m=(v=t.chain)==null?void 0:v.formatters)==null?void 0:m.transactionRequest)==null?void 0:T.format,F=(R||Lu)({...H3(h,{format:R}),from:b==null?void 0:b.address,blobs:i,data:s,gas:o,gasPrice:c,maxFeePerBlobGas:d,maxFeePerGas:l,maxPriorityFeePerGas:u,to:f,value:p}),I=await t.request({method:"eth_createAccessList",params:[F,N]});return{accessList:I.accessList,gasUsed:BigInt(I.gasUsed)}}catch(A){throw IK(A,{...e,account:b,chain:t.chain})}}async function vAe(t){const e=F3(t,{method:"eth_newBlockFilter"}),n=await t.request({method:"eth_newBlockFilter"});return{id:n,request:e(n),type:"block"}}async function KK(t,{address:e,args:n,event:r,events:a,fromBlock:i,strict:s,toBlock:o}={}){const c=a??(r?[r]:void 0),d=F3(t,{method:"eth_newFilter"});let l=[];c&&(l=[c.flatMap(p=>lh({abi:[p],eventName:p.name,args:n}))],r&&(l=l[0]));const u=await t.request({method:"eth_newFilter",params:[{address:e,fromBlock:typeof i=="bigint"?Le(i):i,toBlock:typeof o=="bigint"?Le(o):o,...l.length?{topics:l}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:i,id:u,request:d(u),strict:!!s,toBlock:o,type:"event"}}async function VK(t){const e=F3(t,{method:"eth_newPendingTransactionFilter"}),n=await t.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:e(n),type:"transaction"}}async function EAe(t){const e=await t.request({method:"eth_blobBaseFee"});return BigInt(e)}async function _Ae(t,{blockHash:e,blockNumber:n,blockTag:r="latest"}={}){const a=n!==void 0?Le(n):void 0;let i;return e?i=await t.request({method:"eth_getBlockTransactionCountByHash",params:[e]},{dedupe:!0}):i=await t.request({method:"eth_getBlockTransactionCountByNumber",params:[a||r]},{dedupe:!!a}),qi(i)}async function wp(t,{address:e,blockNumber:n,blockTag:r="latest"}){const a=n!==void 0?Le(n):void 0,i=await t.request({method:"eth_getCode",params:[e,a||r]},{dedupe:!!a});if(i!=="0x")return i}class TAe extends ce{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function xAe(t,e){const{address:n,factory:r,factoryData:a}=e;try{const[i,s,o,c,d,l,u]=await ze(t,St,"readContract")({abi:SAe,address:n,functionName:"eip712Domain",factory:r,factoryData:a});return{domain:{name:s,version:o,chainId:Number(c),verifyingContract:d,salt:l},extensions:u,fields:i}}catch(i){const s=i;throw s.name==="ContractFunctionExecutionError"&&s.cause.name==="ContractFunctionZeroDataError"?new TAe({address:n}):s}}const SAe=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function AAe(t){var e;return{baseFeePerGas:t.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:t.gasUsedRatio,oldestBlock:BigInt(t.oldestBlock),reward:(e=t.reward)==null?void 0:e.map(n=>n.map(r=>BigInt(r)))}}async function CAe(t,{blockCount:e,blockNumber:n,blockTag:r="latest",rewardPercentiles:a}){const i=typeof n=="bigint"?Le(n):void 0,s=await t.request({method:"eth_feeHistory",params:[Le(e),i||r,a]},{dedupe:!!i});return AAe(s)}async function IAe(t,{filter:e}){const n=e.strict??!1,a=(await e.request({method:"eth_getFilterLogs",params:[e.id]})).map(i=>qs(i));return e.abi?xx({abi:e.abi,logs:a,strict:n}):a}function OAe(t){return{formatters:void 0,fees:void 0,serializers:void 0,...t}}class MAe extends ce{constructor({domain:e}){super(`Invalid domain "${e0(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class PAe extends ce{constructor({primaryType:e,types:n}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class kAe extends ce{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function pl(t){const{domain:e={},message:n,primaryType:r}=t,a={EIP712Domain:hh({domain:e}),...t.types};Z3({domain:e,message:n,primaryType:r,types:a});const i=["0x1901"];return e&&i.push(WK({domain:e,types:a})),r!=="EIP712Domain"&&i.push(GK({data:n,primaryType:r,types:a})),ut(rn(i))}function WK({domain:t,types:e}){return GK({data:t,primaryType:"EIP712Domain",types:e})}function GK({data:t,primaryType:e,types:n}){const r=YK({data:t,primaryType:e,types:n});return ut(r)}function YK({data:t,primaryType:e,types:n}){const r=[{type:"bytes32"}],a=[NAe({primaryType:e,types:n})];for(const i of n[e]){const[s,o]=ZK({types:n,name:i.name,type:i.type,value:t[i.name]});r.push(s),a.push(o)}return wn(r,a)}function NAe({primaryType:t,types:e}){const n=Sn(RAe({primaryType:t,types:e}));return ut(n)}function RAe({primaryType:t,types:e}){let n="";const r=JK({primaryType:t,types:e});r.delete(t);const a=[t,...Array.from(r).sort()];for(const i of a)n+=`${i}(${e[i].map(({name:s,type:o})=>`${o} ${s}`).join(",")})`;return n}function JK({primaryType:t,types:e},n=new Set){const r=t.match(/^\w*/u),a=r==null?void 0:r[0];if(n.has(a)||e[a]===void 0)return n;n.add(a);for(const i of e[a])JK({primaryType:i.type,types:e},n);return n}function ZK({types:t,name:e,type:n,value:r}){if(t[n]!==void 0)return[{type:"bytes32"},ut(YK({data:r,primaryType:n,types:t}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},ut(r)];if(n==="string")return[{type:"bytes32"},ut(Sn(r))];if(n.lastIndexOf("]")===n.length-1){const a=n.slice(0,n.lastIndexOf("[")),i=r.map(s=>ZK({name:e,type:a,types:t,value:s}));return[{type:"bytes32"},ut(wn(i.map(([s])=>s),i.map(([,s])=>s)))]}return[{type:n},r]}function DAe(t){const{domain:e,message:n,primaryType:r,types:a}=t,i=(c,d)=>{const l={...d};for(const u of c){const{name:f,type:p}=u;p==="address"&&(l[f]=l[f].toLowerCase())}return l},s=a.EIP712Domain?e?i(a.EIP712Domain,e):{}:{},o=(()=>{if(r!=="EIP712Domain")return i(a[r],n)})();return e0({domain:s,message:o,primaryType:r,types:a})}function Z3(t){const{domain:e,message:n,primaryType:r,types:a}=t,i=(s,o)=>{for(const c of s){const{name:d,type:l}=c,u=o[d],f=l.match(lx);if(f&&(typeof u=="number"||typeof u=="bigint")){const[b,v,m]=f;Le(u,{signed:v==="int",size:Number.parseInt(m)/8})}if(l==="address"&&typeof u=="string"&&!Nr(u))throw new Vi({address:u});const p=l.match(Fq);if(p){const[b,v]=p;if(v&&An(u)!==Number.parseInt(v))throw new Mq({expectedSize:Number.parseInt(v),givenSize:An(u)})}const h=a[l];h&&($Ae(l),i(h,u))}};if(a.EIP712Domain&&e){if(typeof e!="object")throw new MAe({domain:e});i(a.EIP712Domain,e)}if(r!=="EIP712Domain")if(a[r])i(a[r],n);else throw new PAe({primaryType:r,types:a})}function hh({domain:t}){return[typeof(t==null?void 0:t.name)=="string"&&{name:"name",type:"string"},(t==null?void 0:t.version)&&{name:"version",type:"string"},(typeof(t==null?void 0:t.chainId)=="number"||typeof(t==null?void 0:t.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(t==null?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(t==null?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function XK({domain:t}){return WK({domain:t,types:{EIP712Domain:hh({domain:t})}})}function $Ae(t){if(t==="address"||t==="bool"||t==="string"||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new kAe({type:t})}function hr(t,e){if(t.length!==e.length)throw new Aq({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const a=t[r],i=e[r];n.push(QK(a,i))}return k0(n)}function QK(t,e,n=!1){if(t==="address"){const s=e;if(!Nr(s))throw new Vi({address:s});return Rn(s.toLowerCase(),{size:n?32:null})}if(t==="string")return Jo(e);if(t==="bytes")return e;if(t==="bool")return Rn(dx(e),{size:n?32:1});const r=t.match(lx);if(r){const[s,o,c="256"]=r,d=Number.parseInt(c)/8;return Le(e,{size:n?32:d,signed:o==="int"})}const a=t.match(Fq);if(a){const[s,o]=a;if(Number.parseInt(o)!==(e.length-2)/2)throw new Mq({expectedSize:Number.parseInt(o),givenSize:(e.length-2)/2});return Rn(e,{dir:"right",size:n?32:null})}const i=t.match(WTe);if(i&&Array.isArray(e)){const[s,o]=i,c=[];for(let d=0;d<e.length;d++)c.push(QK(o,e[d],!0));return c.length===0?"0x":k0(c)}throw new OTe(t)}function uN(t){return!t||typeof t!="object"||!("BYTES_PER_ELEMENT"in t)?!1:t.BYTES_PER_ELEMENT===1&&t.constructor.name==="Uint8Array"}function Nx(t){return t.opcode==="CREATE2"?BAe(t):LAe(t)}function LAe(t){const e=C0(Fi(t.from));let n=C0(t.nonce);return n[0]===0&&(n=new Uint8Array([])),Fi(`0x${ut(eK([e,n],"bytes")).slice(26)}`)}function BAe(t){const e=C0(Fi(t.from)),n=Rn(uN(t.salt)?t.salt:C0(t.salt),{size:32}),r="bytecodeHash"in t?uN(t.bytecodeHash)?t.bytecodeHash:C0(t.bytecodeHash):ut(t.bytecode,"bytes");return Fi(x0(ut(rn([C0("0xff"),e,n,r])),12))}const FAe=`Ethereum Signed Message:
`;function UAe(t){const e=typeof t=="string"?Jo(t):typeof t.raw=="string"?t.raw:d0(t.raw),n=Jo(`${FAe}${An(e)}`);return rn([n,e])}function Hd(t,e){return ut(UAe(t),e)}const eV="0x6492649264926492649264926492649264926492649264926492649264926492";function jAe(t){return k8(t,-32)===eV}function O2(t){const{address:e,data:n,signature:r,to:a="hex"}=t,i=k0([wn([{type:"address"},{type:"bytes"},{type:"bytes"}],[e,n,r]),eV]);return a==="hex"?i:Ki(i)}function HAe(t){const{source:e}=t,n=new Map,r=new oh(8192),a=new Map,i=({address:s,chainId:o})=>`${s}.${o}`;return{async consume({address:s,chainId:o,client:c}){const d=i({address:s,chainId:o}),l=this.get({address:s,chainId:o,client:c});this.increment({address:s,chainId:o});const u=await l;return await e.set({address:s,chainId:o},u),r.set(d,u),u},async increment({address:s,chainId:o}){const c=i({address:s,chainId:o}),d=n.get(c)??0;n.set(c,d+1)},async get({address:s,chainId:o,client:c}){const d=i({address:s,chainId:o});let l=a.get(d);return l||(l=(async()=>{try{const f=await e.get({address:s,chainId:o,client:c}),p=r.get(d)??0;return p>0&&f<=p?p+1:(r.delete(d),f)}finally{this.reset({address:s,chainId:o})}})(),a.set(d,l)),(n.get(d)??0)+await l},reset({address:s,chainId:o}){const c=i({address:s,chainId:o});n.delete(c),a.delete(c)}}}function zAe(t){return t.map(e=>({...e,value:BigInt(e.value)}))}function qAe(t){return{...t,balance:t.balance?BigInt(t.balance):void 0,nonce:t.nonce?qi(t.nonce):void 0,storageProof:t.storageProof?zAe(t.storageProof):void 0}}async function KAe(t,{address:e,blockNumber:n,blockTag:r,storageKeys:a}){const i=r??"latest",s=n!==void 0?Le(n):void 0,o=await t.request({method:"eth_getProof",params:[e,a,s||i]});return qAe(o)}async function VAe(t,{address:e,blockNumber:n,blockTag:r="latest",slot:a}){const i=n!==void 0?Le(n):void 0;return await t.request({method:"eth_getStorageAt",params:[e,a,i||r]})}async function Rx(t,{blockHash:e,blockNumber:n,blockTag:r,hash:a,index:i}){var l,u,f;const s=r||"latest",o=n!==void 0?Le(n):void 0;let c=null;if(a?c=await t.request({method:"eth_getTransactionByHash",params:[a]},{dedupe:!0}):e?c=await t.request({method:"eth_getTransactionByBlockHashAndIndex",params:[e,Le(i)]},{dedupe:!0}):(o||s)&&(c=await t.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[o||s,Le(i)]},{dedupe:!!o})),!c)throw new Gq({blockHash:e,blockNumber:n,blockTag:s,hash:a,index:i});return(((f=(u=(l=t.chain)==null?void 0:l.formatters)==null?void 0:u.transaction)==null?void 0:f.format)||sK)(c)}async function WAe(t,{hash:e,transactionReceipt:n}){const[r,a]=await Promise.all([ze(t,ph,"getBlockNumber")({}),e?ze(t,Rx,"getTransaction")({hash:e}):void 0]),i=(n==null?void 0:n.blockNumber)||(a==null?void 0:a.blockNumber);return i?r-i+1n:0n}async function n7(t,{hash:e}){var a,i,s;const n=await t.request({method:"eth_getTransactionReceipt",params:[e]},{dedupe:!0});if(!n)throw new Yq({hash:e});return(((s=(i=(a=t.chain)==null?void 0:a.formatters)==null?void 0:i.transactionReceipt)==null?void 0:s.format)||NK)(n)}async function GAe(t,e){var m;const{account:n,allowFailure:r=!0,batchSize:a,blockNumber:i,blockTag:s,multicallAddress:o,stateOverride:c}=e,d=e.contracts,l=a??(typeof((m=t.batch)==null?void 0:m.multicall)=="object"&&t.batch.multicall.batchSize||1024);let u=o;if(!u){if(!t.chain)throw new Error("client chain not configured. multicallAddress is required.");u=Fu({blockNumber:i,chain:t.chain,contract:"multicall3"})}const f=[[]];let p=0,h=0;for(let T=0;T<d.length;T++){const{abi:A,address:N,args:R,functionName:B}=d[T];try{const F=qe({abi:A,args:R,functionName:B});h+=(F.length-2)/2,l>0&&h>l&&f[p].length>0&&(p++,h=(F.length-2)/2,f[p]=[]),f[p]=[...f[p],{allowFailure:!0,callData:F,target:N}]}catch(F){const I=Fd(F,{abi:A,address:N,args:R,docsPath:"/docs/contract/multicall",functionName:B,sender:n});if(!r)throw I;f[p]=[...f[p],{allowFailure:!0,callData:"0x",target:N}]}}const b=await Promise.allSettled(f.map(T=>ze(t,St,"readContract")({abi:Jv,account:n,address:u,args:[T],blockNumber:i,blockTag:s,functionName:"aggregate3",stateOverride:c}))),v=[];for(let T=0;T<b.length;T++){const A=b[T];if(A.status==="rejected"){if(!r)throw A.reason;for(let R=0;R<f[T].length;R++)v.push({status:"failure",error:A.reason,result:void 0});continue}const N=A.value;for(let R=0;R<N.length;R++){const{returnData:B,success:F}=N[R],{callData:I}=f[T][R],{abi:P,address:$,functionName:M,args:y}=d[v.length];try{if(I==="0x")throw new sh;if(!F)throw new U3({data:B});const E=ul({abi:P,args:y,data:B,functionName:M});v.push(r?{result:E,status:"success"}:E)}catch(E){const C=Fd(E,{abi:P,address:$,args:y,docsPath:"/docs/contract/multicall",functionName:M});if(!r)throw C;v.push({error:C,result:void 0,status:"failure"})}}}if(v.length!==d.length)throw new ce("multicall results mismatch");return v}async function r7(t,e){const{blockNumber:n,blockTag:r="latest",blocks:a,returnFullTransactions:i,traceTransfers:s,validation:o}=e;try{const c=[];for(const f of a){const p=f.blockOverrides?TK(f.blockOverrides):void 0,h=f.calls.map(v=>{const m=v,T=m.account?On(m.account):void 0,A={...m,data:m.abi?qe(m):m.data,from:m.from??(T==null?void 0:T.address)};return ll(A),Lu(A)}),b=f.stateOverrides?z3(f.stateOverrides):void 0;c.push({blockOverrides:p,calls:h,stateOverrides:b})}const l=(typeof n=="bigint"?Le(n):void 0)||r;return(await t.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:i,traceTransfers:s,validation:o},l]})).map((f,p)=>({...oK(f),calls:f.calls.map((h,b)=>{var $,M;const{abi:v,args:m,functionName:T,to:A}=a[p].calls[b],N=(($=h.error)==null?void 0:$.data)??h.returnData,R=BigInt(h.gasUsed),B=(M=h.logs)==null?void 0:M.map(y=>qs(y)),F=h.status==="0x1"?"success":"failure",I=v&&F==="success"&&N!=="0x"?ul({abi:v,data:N,functionName:T}):null,P=(()=>{var E;if(F==="success")return;let y;if(((E=h.error)==null?void 0:E.data)==="0x"?y=new sh:h.error&&(y=new U3(h.error)),!!y)return Fd(y,{abi:v??[],address:A,args:m,functionName:T??"<unknown>"})})();return{data:N,gasUsed:R,logs:B,status:F,...F==="success"?{result:I}:{error:P}}})}))}catch(c){const d=c,l=j3(d,{});throw l instanceof uh?d:l}}function tV(t,e={}){const{as:n=typeof t=="string"?"Hex":"Bytes"}=e,r=R6(fSe(t));return n==="Bytes"?r:gp(r)}class YAe extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const n=super.get(e);return super.has(e)&&n!==void 0&&(this.delete(e),super.set(e,n)),n}set(e,n){if(super.set(e,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const JAe={checksum:new YAe(8192)},Z9=JAe.checksum;function ZAe(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new XAe({publicKey:t});if(t.length===130){const r=BigInt(si(t,0,32)),a=BigInt(si(t,32,64));return{prefix:4,x:r,y:a}}if(t.length===132){const r=Number(si(t,0,1)),a=BigInt(si(t,1,33)),i=BigInt(si(t,33,65));return{prefix:r,x:a,y:i}}const e=Number(si(t,0,1)),n=BigInt(si(t,1,33));return{prefix:e,x:n}}let XAe=class extends on{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${ia(wK(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const QAe=/^0x[a-fA-F0-9]{40}$/;function X3(t,e={}){const{strict:n=!0}=e;if(!QAe.test(t))throw new fN({address:t,cause:new tCe});if(n){if(t.toLowerCase()===t)return;if(eCe(t)!==t)throw new fN({address:t,cause:new nCe})}}function eCe(t){if(Z9.has(t))return Z9.get(t);X3(t,{strict:!1});const e=t.substring(2).toLowerCase(),n=tV(bSe(e),{as:"Bytes"}),r=e.split("");for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&r[i]&&(r[i]=r[i].toUpperCase()),(n[i>>1]&15)>=8&&r[i+1]&&(r[i+1]=r[i+1].toUpperCase());const a=`0x${r.join("")}`;return Z9.set(t,a),a}function a7(t,e={}){const{strict:n=!0}=e??{};try{return X3(t,{strict:n}),!0}catch{return!1}}class fN extends on{constructor({address:e,cause:n}){super(`Address "${e}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class tCe extends on{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class nCe extends on{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function i7(t){let e=!0,n="",r=0,a="",i=!1;for(let s=0;s<t.length;s++){const o=t[s];if(["(",")",","].includes(o)&&(e=!0),o==="("&&r++,o===")"&&r--,!!e){if(r===0){if(o===" "&&["event","function","error",""].includes(a))a="";else if(a+=o,o===")"){i=!0;break}continue}if(o===" "){t[s-1]!==","&&n!==","&&n!==",("&&(n="",e=!1);continue}a+=o,n+=o}}if(!i)throw new on("Unable to normalize signature.");return a}function s7(t,e){const n=typeof t,r=e.type;switch(r){case"address":return a7(t,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in e?Object.values(e.components).every((a,i)=>s7(Object.values(t)[i],a)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||t instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(t)&&t.every(a=>s7(a,{...e,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function nV(t,e,n){for(const r in t){const a=t[r],i=e[r];if(a.type==="tuple"&&i.type==="tuple"&&"components"in a&&"components"in i)return nV(a.components,i.components,n[r]);const s=[a.type,i.type];if(s.includes("address")&&s.includes("bytes20")?!0:s.includes("address")&&s.includes("string")?a7(n[r],{strict:!1}):s.includes("address")&&s.includes("bytes")?a7(n[r],{strict:!1}):!1)return s}}function rV(t,e={}){const{prepare:n=!0}=e,r=Array.isArray(t)||typeof t=="string"?XM(t):t;return{...r,...n?{hash:a6(r)}:{}}}function rCe(t,e,n){const{args:r=[],prepare:a=!0}=n??{},i=_Se(e,{strict:!1}),s=t.filter(d=>i?d.type==="function"||d.type==="error"?aV(d)===si(e,0,4):d.type==="event"?a6(d)===e:!1:"name"in d&&d.name===e);if(s.length===0)throw new o7({name:e});if(s.length===1)return{...s[0],...a?{hash:a6(s[0])}:{}};let o;for(const d of s){if(!("inputs"in d))continue;if(!r||r.length===0){if(!d.inputs||d.inputs.length===0)return{...d,...a?{hash:a6(d)}:{}};continue}if(!d.inputs||d.inputs.length===0||d.inputs.length!==r.length)continue;if(r.every((u,f)=>{const p="inputs"in d&&d.inputs[f];return p?s7(u,p):!1})){if(o&&"inputs"in o&&o.inputs){const u=nV(d.inputs,o.inputs,r);if(u)throw new iCe({abiItem:d,type:u[0]},{abiItem:o,type:u[1]})}o=d}}const c=(()=>{if(o)return o;const[d,...l]=s;return{...d,overloads:l}})();if(!c)throw new o7({name:e});return{...c,...a?{hash:a6(c)}:{}}}function aV(t){return si(a6(t),0,4)}function aCe(t){const e=typeof t=="string"?t:S8(t);return i7(e)}function a6(t){return typeof t!="string"&&"hash"in t&&t.hash?t.hash:tV(Cx(aCe(t)))}class iCe extends on{constructor(e,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${i7(S8(e.abiItem))}\`, and`,`\`${n.type}\` in \`${i7(S8(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class o7 extends on{constructor({name:e,data:n,type:r="item"}){const a=e?` with name "${e}"`:n?` with data "${n}"`:"";super(`ABI ${r}${a} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}const sCe=/^(.*)\[([0-9]*)\]$/,oCe=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,iV=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function cCe({checksumAddress:t,parameters:e,values:n}){const r=[];for(let a=0;a<e.length;a++)r.push(Dx({checksumAddress:t,parameter:e[a],value:n[a]}));return r}function Dx({checksumAddress:t=!1,parameter:e,value:n}){const r=e,a=yCe(r.type);if(a){const[i,s]=a;return lCe(n,{checksumAddress:t,length:i,parameter:{...r,type:s}})}if(r.type==="tuple")return bCe(n,{checksumAddress:t,parameter:r});if(r.type==="address")return dCe(n,{checksum:t});if(r.type==="bool")return fCe(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const i=r.type.startsWith("int"),[,,s="256"]=iV.exec(r.type)??[];return pCe(n,{signed:i,size:Number(s)})}if(r.type.startsWith("bytes"))return uCe(n,{type:r.type});if(r.type==="string")return hCe(n);throw new dV(r.type)}function $x(t){let e=0;for(let i=0;i<t.length;i++){const{dynamic:s,encoded:o}=t[i];s?e+=32:e+=ia(o)}const n=[],r=[];let a=0;for(let i=0;i<t.length;i++){const{dynamic:s,encoded:o}=t[i];s?(n.push(Sr(e+a,{size:32})),r.push(o),a+=ia(o)):n.push(o)}return Ks(...n,...r)}function dCe(t,e){const{checksum:n=!1}=e;return X3(t,{strict:n}),{dynamic:!1,encoded:Ud(t.toLowerCase())}}function lCe(t,e){const{checksumAddress:n,length:r,parameter:a}=e,i=r===null;if(!Array.isArray(t))throw new gCe(t);if(!i&&t.length!==r)throw new mCe({expectedLength:r,givenLength:t.length,type:`${a.type}[${r}]`});let s=!1;const o=[];for(let c=0;c<t.length;c++){const d=Dx({checksumAddress:n,parameter:a,value:t[c]});d.dynamic&&(s=!0),o.push(d)}if(i||s){const c=$x(o);if(i){const d=Sr(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Ks(d,c):d}}if(s)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:Ks(...o.map(({encoded:c})=>c))}}function uCe(t,{type:e}){const[,n]=e.split("bytes"),r=ia(t);if(!n){let a=t;return r%32!==0&&(a=jd(a,Math.ceil((t.length-2)/2/32)*32)),{dynamic:!0,encoded:Ks(Ud(Sr(r,{size:32})),a)}}if(r!==Number.parseInt(n))throw new oV({expectedSize:Number.parseInt(n),value:t});return{dynamic:!1,encoded:jd(t)}}function fCe(t){if(typeof t!="boolean")throw new on(`Invalid boolean value: "${t}" (type: ${typeof t}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Ud(vK(t))}}function pCe(t,{signed:e,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(e?1n:0n))-1n,a=e?-r-1n:0n;if(t>r||t<a)throw new EK({max:r.toString(),min:a.toString(),signed:e,size:n/8,value:t.toString()})}return{dynamic:!1,encoded:Sr(t,{size:32,signed:e})}}function hCe(t){const e=Cx(t),n=Math.ceil(ia(e)/32),r=[];for(let a=0;a<n;a++)r.push(jd(si(e,a*32,(a+1)*32)));return{dynamic:!0,encoded:Ks(jd(Sr(ia(e),{size:32})),...r)}}function bCe(t,e){const{checksumAddress:n,parameter:r}=e;let a=!1;const i=[];for(let s=0;s<r.components.length;s++){const o=r.components[s],c=Array.isArray(t)?s:o.name,d=Dx({checksumAddress:n,parameter:o,value:t[c]});i.push(d),d.dynamic&&(a=!0)}return{dynamic:a,encoded:a?$x(i):Ks(...i.map(({encoded:s})=>s))}}function yCe(t){const e=t.match(/^(.*)\[(\d+)?\]$/);return e?[e[2]?Number(e[2]):null,e[1]]:void 0}function sV(t,e,n){const{checksumAddress:r=!1}={};if(t.length!==e.length)throw new cV({expectedLength:t.length,givenLength:e.length});const a=cCe({checksumAddress:r,parameters:t,values:e}),i=$x(a);return i.length===0?"0x":i}function c7(t,e){if(t.length!==e.length)throw new cV({expectedLength:t.length,givenLength:e.length});const n=[];for(let r=0;r<t.length;r++){const a=t[r],i=e[r];n.push(c7.encode(a,i))}return Ks(...n)}(function(t){function e(n,r,a=!1){if(n==="address"){const c=r;return X3(c),Ud(c.toLowerCase(),a?32:0)}if(n==="string")return Cx(r);if(n==="bytes")return r;if(n==="bool")return Ud(vK(r),a?32:1);const i=n.match(iV);if(i){const[c,d,l="256"]=i,u=Number.parseInt(l)/8;return Sr(r,{size:a?32:u,signed:d==="int"})}const s=n.match(oCe);if(s){const[c,d]=s;if(Number.parseInt(d)!==(r.length-2)/2)throw new oV({expectedSize:Number.parseInt(d),value:r});return jd(r,a?32:0)}const o=n.match(sCe);if(o&&Array.isArray(r)){const[c,d]=o,l=[];for(let u=0;u<r.length;u++)l.push(e(d,r[u],!0));return l.length===0?"0x":Ks(...l)}throw new dV(n)}t.encode=e})(c7||(c7={}));class mCe extends on{constructor({expectedLength:e,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class oV extends on{constructor({expectedSize:e,value:n}){super(`Size of bytes "${n}" (bytes${ia(n)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class cV extends on{constructor({expectedLength:e,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class gCe extends on{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class dV extends on{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function wCe(t,e){var a;const{bytecode:n,args:r}=e;return Ks(n,(a=t.inputs)!=null&&a.length&&(r!=null&&r.length)?sV(t.inputs,r):"0x")}function vCe(t){return rV(t)}function ECe(t,...e){const{overloads:n}=t,r=n?_Ce([t,...n],t.name,{args:e[0]}):t,a=TCe(r),i=e.length>0?sV(r.inputs,e[0]):void 0;return i?Ks(a,i):a}function Dl(t,e={}){return rV(t,e)}function _Ce(t,e,n){const r=rCe(t,e,n);if(r.type!=="function")throw new o7({name:e,type:"function"});return r}function TCe(t){return aV(t)}const xCe="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Zn="0x0000000000000000000000000000000000000000",SCe="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function ACe(t,e){const{blockNumber:n,blockTag:r,calls:a,stateOverrides:i,traceAssetChanges:s,traceTransfers:o,validation:c}=e,d=e.account?On(e.account):void 0;if(s&&!d)throw new ce("`account` is required when `traceAssetChanges` is true");const l=d?wCe(vCe("constructor(bytes, bytes)"),{bytecode:AK,args:[SCe,ECe(Dl("function getBalance(address)"),[d.address])]}):void 0,u=s?await Promise.all(e.calls.map(async w=>{if(!w.data&&!w.abi)return;const{accessList:_}=await qK(t,{account:d.address,...w,data:w.abi?qe(w):w.data});return _.map(({address:k,storageKeys:L})=>L.length>0?k:null)})).then(w=>w.flat().filter(Boolean)):[],f=i==null?void 0:i.map(w=>w.address===(d==null?void 0:d.address)?{...w,nonce:0}:w),p=await r7(t,{blockNumber:n,blockTag:r,blocks:[...s?[{calls:[{data:l}],stateOverrides:i},{calls:u.map((w,_)=>({abi:[Dl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[d.address],to:w,from:Zn,nonce:_})),stateOverrides:[{address:Zn,nonce:0}]}]:[],{calls:[...a,{}].map((w,_)=>({...w,from:d==null?void 0:d.address,nonce:_})),stateOverrides:f},...s?[{calls:[{data:l}]},{calls:u.map((w,_)=>({abi:[Dl("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[d.address],to:w,from:Zn,nonce:_})),stateOverrides:[{address:Zn,nonce:0}]},{calls:u.map((w,_)=>({to:w,abi:[Dl("function decimals() returns (uint256)")],functionName:"decimals",from:Zn,nonce:_})),stateOverrides:[{address:Zn,nonce:0}]},{calls:u.map((w,_)=>({to:w,abi:[Dl("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Zn,nonce:_})),stateOverrides:[{address:Zn,nonce:0}]},{calls:u.map((w,_)=>({to:w,abi:[Dl("function symbol() returns (string)")],functionName:"symbol",from:Zn,nonce:_})),stateOverrides:[{address:Zn,nonce:0}]}]:[]],traceTransfers:o,validation:c}),h=s?p[2]:p[0],[b,v,,m,T,A,N,R]=s?p:[],{calls:B,...F}=h,I=B.slice(0,-1)??[],P=(b==null?void 0:b.calls)??[],$=(v==null?void 0:v.calls)??[],M=[...P,...$].map(w=>w.status==="success"?c0(w.data):null),y=(m==null?void 0:m.calls)??[],E=(T==null?void 0:T.calls)??[],C=[...y,...E].map(w=>w.status==="success"?c0(w.data):null),g=((A==null?void 0:A.calls)??[]).map(w=>w.status==="success"?w.result:null),x=((R==null?void 0:R.calls)??[]).map(w=>w.status==="success"?w.result:null),O=((N==null?void 0:N.calls)??[]).map(w=>w.status==="success"?w.result:null),S=[];for(const[w,_]of C.entries()){const k=M[w];if(typeof _!="bigint"||typeof k!="bigint")continue;const L=g[w-1],D=x[w-1],U=O[w-1],j=w===0?{address:xCe,decimals:18,symbol:"ETH"}:{address:u[w-1],decimals:U||L?Number(L??1):void 0,symbol:D??void 0};S.some(H=>H.token.address===j.address)||S.push({token:j,value:{pre:k,post:_,diff:_-k}})}return{assetChanges:S,block:F,results:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lx=BigInt(0),d7=BigInt(1);function bh(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Bx(t){if(!bh(t))throw new Error("Uint8Array expected")}function vp(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function Ab(t){const e=t.toString(16);return e.length&1?"0"+e:e}function lV(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Lx:BigInt("0x"+t)}const uV=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",CCe=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ep(t){if(Bx(t),uV)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=CCe[t[n]];return e}const yo={_0:48,_9:57,A:65,F:70,a:97,f:102};function pN(t){if(t>=yo._0&&t<=yo._9)return t-yo._0;if(t>=yo.A&&t<=yo.F)return t-(yo.A-10);if(t>=yo.a&&t<=yo.f)return t-(yo.a-10)}function $8(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(uV)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let a=0,i=0;a<n;a++,i+=2){const s=pN(t.charCodeAt(i)),o=pN(t.charCodeAt(i+1));if(s===void 0||o===void 0){const c=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}r[a]=s*16+o}return r}function Ed(t){return lV(Ep(t))}function fV(t){return Bx(t),lV(Ep(Uint8Array.from(t).reverse()))}function yh(t,e){return $8(t.toString(16).padStart(e*2,"0"))}function pV(t,e){return yh(t,e).reverse()}function ti(t,e,n){let r;if(typeof e=="string")try{r=$8(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(bh(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const a=r.length;if(typeof n=="number"&&a!==n)throw new Error(t+" of length "+n+" expected, got "+a);return r}function L8(...t){let e=0;for(let r=0;r<t.length;r++){const a=t[r];Bx(a),e+=a.length}const n=new Uint8Array(e);for(let r=0,a=0;r<t.length;r++){const i=t[r];n.set(i,a),a+=i.length}return n}const X9=t=>typeof t=="bigint"&&Lx<=t;function Fx(t,e,n){return X9(t)&&X9(e)&&X9(n)&&e<=t&&t<n}function _6(t,e,n,r){if(!Fx(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}function ICe(t){let e;for(e=0;t>Lx;t>>=d7,e+=1);return e}const Q3=t=>(d7<<BigInt(t))-d7,Q9=t=>new Uint8Array(t),hN=t=>Uint8Array.from(t);function OCe(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=Q9(t),a=Q9(t),i=0;const s=()=>{r.fill(1),a.fill(0),i=0},o=(...u)=>n(a,r,...u),c=(u=Q9(0))=>{a=o(hN([0]),u),r=o(),u.length!==0&&(a=o(hN([1]),u),r=o())},d=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let u=0;const f=[];for(;u<e;){r=o();const p=r.slice();f.push(p),u+=r.length}return L8(...f)};return(u,f)=>{s(),c(u);let p;for(;!(p=f(d()));)c();return s(),p}}const MCe={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||bh(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function em(t,e,n={}){const r=(a,i,s)=>{const o=MCe[i];if(typeof o!="function")throw new Error("invalid validator function");const c=t[a];if(!(s&&c===void 0)&&!o(c,t))throw new Error("param "+String(a)+" is invalid. Expected "+i+", got "+c)};for(const[a,i]of Object.entries(e))r(a,i,!1);for(const[a,i]of Object.entries(n))r(a,i,!0);return t}function bN(t){const e=new WeakMap;return(n,...r)=>{const a=e.get(n);if(a!==void 0)return a;const i=t(n,...r);return e.set(n,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qr=BigInt(0),Pr=BigInt(1),od=BigInt(2),PCe=BigInt(3),hV=BigInt(4),bV=BigInt(5),yV=BigInt(8);function Jr(t,e){const n=t%e;return n>=Qr?n:e+n}function Wa(t,e,n){let r=t;for(;e-- >Qr;)r*=r,r%=n;return r}function l7(t,e){if(t===Qr)throw new Error("invert: expected non-zero number");if(e<=Qr)throw new Error("invert: expected positive modulus, got "+e);let n=Jr(t,e),r=e,a=Qr,i=Pr;for(;n!==Qr;){const o=r/n,c=r%n,d=a-i*o;r=n,n=c,a=i,i=d}if(r!==Pr)throw new Error("invert: does not exist");return Jr(a,e)}function mV(t,e){const n=(t.ORDER+Pr)/hV,r=t.pow(e,n);if(!t.eql(t.sqr(r),e))throw new Error("Cannot find square root");return r}function kCe(t,e){const n=(t.ORDER-bV)/yV,r=t.mul(e,od),a=t.pow(r,n),i=t.mul(e,a),s=t.mul(t.mul(i,od),a),o=t.mul(i,t.sub(s,t.ONE));if(!t.eql(t.sqr(o),e))throw new Error("Cannot find square root");return o}function NCe(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Pr,n=0;for(;e%od===Qr;)e/=od,n++;let r=od;const a=Ux(t);for(;yN(a,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return mV;let i=a.pow(r,e);const s=(e+Pr)/od;return function(c,d){if(c.is0(d))return d;if(yN(c,d)!==1)throw new Error("Cannot find square root");let l=n,u=c.mul(c.ONE,i),f=c.pow(d,e),p=c.pow(d,s);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let h=1,b=c.sqr(f);for(;!c.eql(b,c.ONE);)if(h++,b=c.sqr(b),h===l)throw new Error("Cannot find square root");const v=Pr<<BigInt(l-h-1),m=c.pow(u,v);l=h,u=c.sqr(m),f=c.mul(f,u),p=c.mul(p,m)}return p}}function RCe(t){return t%hV===PCe?mV:t%yV===bV?kCe:NCe(t)}const DCe=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function $Ce(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=DCe.reduce((r,a)=>(r[a]="function",r),e);return em(t,n)}function LCe(t,e,n){if(n<Qr)throw new Error("invalid exponent, negatives unsupported");if(n===Qr)return t.ONE;if(n===Pr)return e;let r=t.ONE,a=e;for(;n>Qr;)n&Pr&&(r=t.mul(r,a)),a=t.sqr(a),n>>=Pr;return r}function gV(t,e,n=!1){const r=new Array(e.length).fill(n?t.ZERO:void 0),a=e.reduce((s,o,c)=>t.is0(o)?s:(r[c]=s,t.mul(s,o)),t.ONE),i=t.inv(a);return e.reduceRight((s,o,c)=>t.is0(o)?s:(r[c]=t.mul(s,r[c]),t.mul(s,o)),i),r}function yN(t,e){const n=(t.ORDER-Pr)/od,r=t.pow(e,n),a=t.eql(r,t.ONE),i=t.eql(r,t.ZERO),s=t.eql(r,t.neg(t.ONE));if(!a&&!i&&!s)throw new Error("invalid Legendre symbol result");return a?1:i?0:-1}function wV(t,e){e!==void 0&&C6.anumber(e);const n=e!==void 0?e:t.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ux(t,e,n=!1,r={}){if(t<=Qr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:a,nByteLength:i}=wV(t,e);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let s;const o=Object.freeze({ORDER:t,isLE:n,BITS:a,BYTES:i,MASK:Q3(a),ZERO:Qr,ONE:Pr,create:c=>Jr(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Qr<=c&&c<t},is0:c=>c===Qr,isOdd:c=>(c&Pr)===Pr,neg:c=>Jr(-c,t),eql:(c,d)=>c===d,sqr:c=>Jr(c*c,t),add:(c,d)=>Jr(c+d,t),sub:(c,d)=>Jr(c-d,t),mul:(c,d)=>Jr(c*d,t),pow:(c,d)=>LCe(o,c,d),div:(c,d)=>Jr(c*l7(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>l7(c,t),sqrt:r.sqrt||(c=>(s||(s=RCe(t)),s(o,c))),toBytes:c=>n?pV(c,i):yh(c,i),fromBytes:c=>{if(c.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+c.length);return n?fV(c):Ed(c)},invertBatch:c=>gV(o,c),cmov:(c,d,l)=>l?d:c});return Object.freeze(o)}function vV(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function EV(t){const e=vV(t);return e+Math.ceil(e/2)}function BCe(t,e,n=!1){const r=t.length,a=vV(e),i=EV(e);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const s=n?fV(t):Ed(t),o=Jr(s,e-Pr)+Pr;return n?pV(o,a):yh(o,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const mN=BigInt(0),u7=BigInt(1);function e4(t,e){const n=e.negate();return t?n:e}function _V(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function t4(t,e){_V(t,e);const n=Math.ceil(e/t)+1,r=2**(t-1),a=2**t,i=Q3(t),s=BigInt(t);return{windows:n,windowSize:r,mask:i,maxNumber:a,shiftBy:s}}function gN(t,e,n){const{windowSize:r,mask:a,maxNumber:i,shiftBy:s}=n;let o=Number(t&a),c=t>>s;o>r&&(o-=i,c+=u7);const d=e*r,l=d+Math.abs(o)-1,u=o===0,f=o<0,p=e%2!==0;return{nextN:c,offset:l,isZero:u,isNeg:f,isNegF:p,offsetF:d}}function FCe(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,r)=>{if(!(n instanceof e))throw new Error("invalid point at index "+r)})}function UCe(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,r)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+r)})}const n4=new WeakMap,TV=new WeakMap;function r4(t){return TV.get(t)||1}function jCe(t,e){return{constTimeNegate:e4,hasPrecomputes(n){return r4(n)!==1},unsafeLadder(n,r,a=t.ZERO){let i=n;for(;r>mN;)r&u7&&(a=a.add(i)),i=i.double(),r>>=u7;return a},precomputeWindow(n,r){const{windows:a,windowSize:i}=t4(r,e),s=[];let o=n,c=o;for(let d=0;d<a;d++){c=o,s.push(c);for(let l=1;l<i;l++)c=c.add(o),s.push(c);o=c.double()}return s},wNAF(n,r,a){let i=t.ZERO,s=t.BASE;const o=t4(n,e);for(let c=0;c<o.windows;c++){const{nextN:d,offset:l,isZero:u,isNeg:f,isNegF:p,offsetF:h}=gN(a,c,o);a=d,u?s=s.add(e4(p,r[h])):i=i.add(e4(f,r[l]))}return{p:i,f:s}},wNAFUnsafe(n,r,a,i=t.ZERO){const s=t4(n,e);for(let o=0;o<s.windows&&a!==mN;o++){const{nextN:c,offset:d,isZero:l,isNeg:u}=gN(a,o,s);if(a=c,!l){const f=r[d];i=i.add(u?f.negate():f)}}return i},getPrecomputes(n,r,a){let i=n4.get(r);return i||(i=this.precomputeWindow(r,n),n!==1&&n4.set(r,a(i))),i},wNAFCached(n,r,a){const i=r4(n);return this.wNAF(i,this.getPrecomputes(i,n,a),r)},wNAFCachedUnsafe(n,r,a,i){const s=r4(n);return s===1?this.unsafeLadder(n,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,n,a),r,i)},setWindowSize(n,r){_V(r,e),TV.set(n,r),n4.delete(n)}}}function HCe(t,e,n,r){FCe(n,t),UCe(r,e);const a=n.length,i=r.length;if(a!==i)throw new Error("arrays of points and scalars must have equal length");const s=t.ZERO,o=ICe(BigInt(a));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const d=Q3(c),l=new Array(Number(d)+1).fill(s),u=Math.floor((e.BITS-1)/c)*c;let f=s;for(let p=u;p>=0;p-=c){l.fill(s);for(let b=0;b<i;b++){const v=r[b],m=Number(v>>BigInt(p)&d);l[m]=l[m].add(n[b])}let h=s;for(let b=l.length-1,v=s;b>0;b--)v=v.add(l[b]),h=h.add(v);if(f=f.add(h),p!==0)for(let b=0;b<c;b++)f=f.double()}return f}function xV(t){return $Ce(t.Fp),em(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...wV(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wN(t){t.lowS!==void 0&&vp("lowS",t.lowS),t.prehash!==void 0&&vp("prehash",t.prehash)}function zCe(t){const e=xV(t);em(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a}=e;if(n){if(!r.eql(a,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class qCe extends Error{constructor(e=""){super(e)}}const xo={Err:qCe,_tlv:{encode:(t,e)=>{const{Err:n}=xo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const r=e.length/2,a=Ab(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ab(a.length/2|128):"";return Ab(t)+i+a+e},decode(t,e){const{Err:n}=xo;let r=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[r++]!==t)throw new n("tlv.decode: wrong tlv");const a=e[r++],i=!!(a&128);let s=0;if(!i)s=a;else{const c=a&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const d=e.subarray(r,r+c);if(d.length!==c)throw new n("tlv.decode: length bytes not complete");if(d[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const l of d)s=s<<8|l;if(r+=c,s<128)throw new n("tlv.decode(long): not minimal encoding")}const o=e.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:e.subarray(r+s)}}},_int:{encode(t){const{Err:e}=xo;if(t<Io)throw new e("integer: negative integers are not allowed");let n=Ab(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=xo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Ed(t)}},toSig(t){const{Err:e,_int:n,_tlv:r}=xo,a=ti("signature",t),{v:i,l:s}=r.decode(48,a);if(s.length)throw new e("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,i),{v:d,l}=r.decode(2,c);if(l.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(d)}},hexFromSig(t){const{_tlv:e,_int:n}=xo,r=e.encode(2,n.encode(t.r)),a=e.encode(2,n.encode(t.s)),i=r+a;return e.encode(48,i)}};function a4(t,e){return Ep(yh(t,e))}const Io=BigInt(0),E0=BigInt(1);BigInt(2);const i4=BigInt(3),KCe=BigInt(4);function VCe(t){const e=zCe(t),{Fp:n}=e,r=Ux(e.n,e.nBitLength),a=e.toBytes||((A,N,R)=>{const B=N.toAffine();return L8(Uint8Array.from([4]),n.toBytes(B.x),n.toBytes(B.y))}),i=e.fromBytes||(A=>{const N=A.subarray(1),R=n.fromBytes(N.subarray(0,n.BYTES)),B=n.fromBytes(N.subarray(n.BYTES,2*n.BYTES));return{x:R,y:B}});function s(A){const{a:N,b:R}=e,B=n.sqr(A),F=n.mul(B,A);return n.add(n.add(F,n.mul(A,N)),R)}function o(A,N){const R=n.sqr(N),B=s(A);return n.eql(R,B)}if(!o(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(e.a,i4),KCe),d=n.mul(n.sqr(e.b),BigInt(27));if(n.is0(n.add(c,d)))throw new Error("bad curve params: a or b");function l(A){return Fx(A,E0,e.n)}function u(A){const{allowedPrivateKeyLengths:N,nByteLength:R,wrapPrivateKey:B,n:F}=e;if(N&&typeof A!="bigint"){if(bh(A)&&(A=Ep(A)),typeof A!="string"||!N.includes(A.length))throw new Error("invalid private key");A=A.padStart(R*2,"0")}let I;try{I=typeof A=="bigint"?A:Ed(ti("private key",A,R))}catch{throw new Error("invalid private key, expected hex or "+R+" bytes, got "+typeof A)}return B&&(I=Jr(I,F)),_6("private key",I,E0,F),I}function f(A){if(!(A instanceof b))throw new Error("ProjectivePoint expected")}const p=bN((A,N)=>{const{px:R,py:B,pz:F}=A;if(n.eql(F,n.ONE))return{x:R,y:B};const I=A.is0();N==null&&(N=I?n.ONE:n.inv(F));const P=n.mul(R,N),$=n.mul(B,N),M=n.mul(F,N);if(I)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:P,y:$}}),h=bN(A=>{if(A.is0()){if(e.allowInfinityPoint&&!n.is0(A.py))return;throw new Error("bad point: ZERO")}const{x:N,y:R}=A.toAffine();if(!n.isValid(N)||!n.isValid(R))throw new Error("bad point: x or y not FE");if(!o(N,R))throw new Error("bad point: equation left != right");if(!A.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(N,R,B){if(N==null||!n.isValid(N))throw new Error("x required");if(R==null||!n.isValid(R)||n.is0(R))throw new Error("y required");if(B==null||!n.isValid(B))throw new Error("z required");this.px=N,this.py=R,this.pz=B,Object.freeze(this)}static fromAffine(N){const{x:R,y:B}=N||{};if(!N||!n.isValid(R)||!n.isValid(B))throw new Error("invalid affine point");if(N instanceof b)throw new Error("projective point not allowed");const F=I=>n.eql(I,n.ZERO);return F(R)&&F(B)?b.ZERO:new b(R,B,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(N){const R=gV(n,N.map(B=>B.pz));return N.map((B,F)=>B.toAffine(R[F])).map(b.fromAffine)}static fromHex(N){const R=b.fromAffine(i(ti("pointHex",N)));return R.assertValidity(),R}static fromPrivateKey(N){return b.BASE.multiply(u(N))}static msm(N,R){return HCe(b,r,N,R)}_setWindowSize(N){T.setWindowSize(this,N)}assertValidity(){h(this)}hasEvenY(){const{y:N}=this.toAffine();if(n.isOdd)return!n.isOdd(N);throw new Error("Field doesn't support isOdd")}equals(N){f(N);const{px:R,py:B,pz:F}=this,{px:I,py:P,pz:$}=N,M=n.eql(n.mul(R,$),n.mul(I,F)),y=n.eql(n.mul(B,$),n.mul(P,F));return M&&y}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:N,b:R}=e,B=n.mul(R,i4),{px:F,py:I,pz:P}=this;let $=n.ZERO,M=n.ZERO,y=n.ZERO,E=n.mul(F,F),C=n.mul(I,I),g=n.mul(P,P),x=n.mul(F,I);return x=n.add(x,x),y=n.mul(F,P),y=n.add(y,y),$=n.mul(N,y),M=n.mul(B,g),M=n.add($,M),$=n.sub(C,M),M=n.add(C,M),M=n.mul($,M),$=n.mul(x,$),y=n.mul(B,y),g=n.mul(N,g),x=n.sub(E,g),x=n.mul(N,x),x=n.add(x,y),y=n.add(E,E),E=n.add(y,E),E=n.add(E,g),E=n.mul(E,x),M=n.add(M,E),g=n.mul(I,P),g=n.add(g,g),E=n.mul(g,x),$=n.sub($,E),y=n.mul(g,C),y=n.add(y,y),y=n.add(y,y),new b($,M,y)}add(N){f(N);const{px:R,py:B,pz:F}=this,{px:I,py:P,pz:$}=N;let M=n.ZERO,y=n.ZERO,E=n.ZERO;const C=e.a,g=n.mul(e.b,i4);let x=n.mul(R,I),O=n.mul(B,P),S=n.mul(F,$),w=n.add(R,B),_=n.add(I,P);w=n.mul(w,_),_=n.add(x,O),w=n.sub(w,_),_=n.add(R,F);let k=n.add(I,$);return _=n.mul(_,k),k=n.add(x,S),_=n.sub(_,k),k=n.add(B,F),M=n.add(P,$),k=n.mul(k,M),M=n.add(O,S),k=n.sub(k,M),E=n.mul(C,_),M=n.mul(g,S),E=n.add(M,E),M=n.sub(O,E),E=n.add(O,E),y=n.mul(M,E),O=n.add(x,x),O=n.add(O,x),S=n.mul(C,S),_=n.mul(g,_),O=n.add(O,S),S=n.sub(x,S),S=n.mul(C,S),_=n.add(_,S),x=n.mul(O,_),y=n.add(y,x),x=n.mul(k,_),M=n.mul(w,M),M=n.sub(M,x),x=n.mul(w,O),E=n.mul(k,E),E=n.add(E,x),new b(M,y,E)}subtract(N){return this.add(N.negate())}is0(){return this.equals(b.ZERO)}wNAF(N){return T.wNAFCached(this,N,b.normalizeZ)}multiplyUnsafe(N){const{endo:R,n:B}=e;_6("scalar",N,Io,B);const F=b.ZERO;if(N===Io)return F;if(this.is0()||N===E0)return this;if(!R||T.hasPrecomputes(this))return T.wNAFCachedUnsafe(this,N,b.normalizeZ);let{k1neg:I,k1:P,k2neg:$,k2:M}=R.splitScalar(N),y=F,E=F,C=this;for(;P>Io||M>Io;)P&E0&&(y=y.add(C)),M&E0&&(E=E.add(C)),C=C.double(),P>>=E0,M>>=E0;return I&&(y=y.negate()),$&&(E=E.negate()),E=new b(n.mul(E.px,R.beta),E.py,E.pz),y.add(E)}multiply(N){const{endo:R,n:B}=e;_6("scalar",N,E0,B);let F,I;if(R){const{k1neg:P,k1:$,k2neg:M,k2:y}=R.splitScalar(N);let{p:E,f:C}=this.wNAF($),{p:g,f:x}=this.wNAF(y);E=T.constTimeNegate(P,E),g=T.constTimeNegate(M,g),g=new b(n.mul(g.px,R.beta),g.py,g.pz),F=E.add(g),I=C.add(x)}else{const{p:P,f:$}=this.wNAF(N);F=P,I=$}return b.normalizeZ([F,I])[0]}multiplyAndAddUnsafe(N,R,B){const F=b.BASE,I=($,M)=>M===Io||M===E0||!$.equals(F)?$.multiplyUnsafe(M):$.multiply(M),P=I(this,R).add(I(N,B));return P.is0()?void 0:P}toAffine(N){return p(this,N)}isTorsionFree(){const{h:N,isTorsionFree:R}=e;if(N===E0)return!0;if(R)return R(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:N,clearCofactor:R}=e;return N===E0?this:R?R(b,this):this.multiplyUnsafe(e.h)}toRawBytes(N=!0){return vp("isCompressed",N),this.assertValidity(),a(b,this,N)}toHex(N=!0){return vp("isCompressed",N),Ep(this.toRawBytes(N))}}b.BASE=new b(e.Gx,e.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const{endo:v,nBitLength:m}=e,T=jCe(b,v?Math.ceil(m/2):m);return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:l}}function WCe(t){const e=xV(t);return em(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function GCe(t){const e=WCe(t),{Fp:n,n:r,nByteLength:a,nBitLength:i}=e,s=n.BYTES+1,o=2*n.BYTES+1;function c(g){return Jr(g,r)}function d(g){return l7(g,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:u,weierstrassEquation:f,isWithinCurveOrder:p}=VCe({...e,toBytes(g,x,O){const S=x.toAffine(),w=n.toBytes(S.x),_=L8;return vp("isCompressed",O),O?_(Uint8Array.from([x.hasEvenY()?2:3]),w):_(Uint8Array.from([4]),w,n.toBytes(S.y))},fromBytes(g){const x=g.length,O=g[0],S=g.subarray(1);if(x===s&&(O===2||O===3)){const w=Ed(S);if(!Fx(w,E0,n.ORDER))throw new Error("Point is not on curve");const _=f(w);let k;try{k=n.sqrt(_)}catch(U){const j=U instanceof Error?": "+U.message:"";throw new Error("Point is not on curve"+j)}const L=(k&E0)===E0;return(O&1)===1!==L&&(k=n.neg(k)),{x:w,y:k}}else if(x===o&&O===4){const w=n.fromBytes(S.subarray(0,n.BYTES)),_=n.fromBytes(S.subarray(n.BYTES,2*n.BYTES));return{x:w,y:_}}else{const w=s,_=o;throw new Error("invalid Point, expected length of "+w+", or uncompressed "+_+", got "+x)}}});function h(g){const x=r>>E0;return g>x}function b(g){return h(g)?c(-g):g}const v=(g,x,O)=>Ed(g.slice(x,O));class m{constructor(x,O,S){_6("r",x,E0,r),_6("s",O,E0,r),this.r=x,this.s=O,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(x){const O=a;return x=ti("compactSignature",x,O*2),new m(v(x,0,O),v(x,O,2*O))}static fromDER(x){const{r:O,s:S}=xo.toSig(ti("DER",x));return new m(O,S)}assertValidity(){}addRecoveryBit(x){return new m(this.r,this.s,x)}recoverPublicKey(x){const{r:O,s:S,recovery:w}=this,_=F(ti("msgHash",x));if(w==null||![0,1,2,3].includes(w))throw new Error("recovery id invalid");const k=w===2||w===3?O+e.n:O;if(k>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const L=w&1?"03":"02",D=l.fromHex(L+a4(k,n.BYTES)),U=d(k),j=c(-_*U),H=c(S*U),W=l.BASE.multiplyAndAddUnsafe(D,j,H);if(!W)throw new Error("point at infinify");return W.assertValidity(),W}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new m(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return $8(this.toDERHex())}toDERHex(){return xo.hexFromSig(this)}toCompactRawBytes(){return $8(this.toCompactHex())}toCompactHex(){const x=a;return a4(this.r,x)+a4(this.s,x)}}const T={isValidPrivateKey(g){try{return u(g),!0}catch{return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const g=EV(e.n);return BCe(e.randomBytes(g),e.n)},precompute(g=8,x=l.BASE){return x._setWindowSize(g),x.multiply(BigInt(3)),x}};function A(g,x=!0){return l.fromPrivateKey(g).toRawBytes(x)}function N(g){if(typeof g=="bigint")return!1;if(g instanceof l)return!0;const O=ti("key",g).length,S=n.BYTES,w=S+1,_=2*S+1;if(!(e.allowedPrivateKeyLengths||a===w))return O===w||O===_}function R(g,x,O=!0){if(N(g)===!0)throw new Error("first arg must be private key");if(N(x)===!1)throw new Error("second arg must be public key");return l.fromHex(x).multiply(u(g)).toRawBytes(O)}const B=e.bits2int||function(g){if(g.length>8192)throw new Error("input is too large");const x=Ed(g),O=g.length*8-i;return O>0?x>>BigInt(O):x},F=e.bits2int_modN||function(g){return c(B(g))},I=Q3(i);function P(g){return _6("num < 2^"+i,g,Io,I),yh(g,a)}function $(g,x,O=M){if(["recovered","canonical"].some(q=>q in O))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:w}=e;let{lowS:_,prehash:k,extraEntropy:L}=O;_==null&&(_=!0),g=ti("msgHash",g),wN(O),k&&(g=ti("prehashed msgHash",S(g)));const D=F(g),U=u(x),j=[P(U),P(D)];if(L!=null&&L!==!1){const q=L===!0?w(n.BYTES):L;j.push(ti("extraEntropy",q))}const H=L8(...j),W=D;function K(q){const V=B(q);if(!p(V))return;const G=d(V),J=l.BASE.multiply(V).toAffine(),z=c(J.x);if(z===Io)return;const Y=c(G*c(W+z*U));if(Y===Io)return;let X=(J.x===z?0:2)|Number(J.y&E0),ae=Y;return _&&h(Y)&&(ae=b(Y),X^=1),new m(z,ae,X)}return{seed:H,k2sig:K}}const M={lowS:e.lowS,prehash:!1},y={lowS:e.lowS,prehash:!1};function E(g,x,O=M){const{seed:S,k2sig:w}=$(g,x,O),_=e;return OCe(_.hash.outputLen,_.nByteLength,_.hmac)(S,w)}l.BASE._setWindowSize(8);function C(g,x,O,S=y){var X;const w=g;x=ti("msgHash",x),O=ti("publicKey",O);const{lowS:_,prehash:k,format:L}=S;if(wN(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(L!==void 0&&L!=="compact"&&L!=="der")throw new Error("format must be compact or der");const D=typeof w=="string"||bh(w),U=!D&&!L&&typeof w=="object"&&w!==null&&typeof w.r=="bigint"&&typeof w.s=="bigint";if(!D&&!U)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,H;try{if(U&&(j=new m(w.r,w.s)),D){try{L!=="compact"&&(j=m.fromDER(w))}catch(ae){if(!(ae instanceof xo.Err))throw ae}!j&&L!=="der"&&(j=m.fromCompact(w))}H=l.fromHex(O)}catch{return!1}if(!j||_&&j.hasHighS())return!1;k&&(x=e.hash(x));const{r:W,s:K}=j,q=F(x),V=d(K),G=c(q*V),J=c(W*V),z=(X=l.BASE.multiplyAndAddUnsafe(H,G,J))==null?void 0:X.toAffine();return z?c(z.x)===W:!1}return{CURVE:e,getPublicKey:A,getSharedSecret:R,sign:E,verify:C,ProjectivePoint:l,Signature:m,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function YCe(t){return{hash:t,hmac:(e,...n)=>MY(t,e,C6.concatBytes(...n)),randomBytes:C6.randomBytes}}function JCe(t,e){const n=r=>GCe({...t,...YCe(r)});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const SV=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),vN=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),ZCe=BigInt(0),XCe=BigInt(1),f7=BigInt(2),EN=(t,e)=>(t+e/f7)/e;function QCe(t){const e=SV,n=BigInt(3),r=BigInt(6),a=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),c=BigInt(88),d=t*t*t%e,l=d*d*t%e,u=Wa(l,n,e)*l%e,f=Wa(u,n,e)*l%e,p=Wa(f,f7,e)*d%e,h=Wa(p,a,e)*p%e,b=Wa(h,i,e)*h%e,v=Wa(b,o,e)*b%e,m=Wa(v,c,e)*v%e,T=Wa(m,o,e)*b%e,A=Wa(T,n,e)*l%e,N=Wa(A,s,e)*h%e,R=Wa(N,r,e)*d%e,B=Wa(R,f7,e);if(!p7.eql(p7.sqr(B),t))throw new Error("Cannot find square root");return B}const p7=Ux(SV,void 0,void 0,{sqrt:QCe}),AV=JCe({a:ZCe,b:BigInt(7),Fp:p7,n:vN,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=vN,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-XCe*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),o=EN(i*t,e),c=EN(-r*t,e);let d=Jr(t-o*n-c*a,e),l=Jr(-o*r-c*i,e);const u=d>s,f=l>s;if(u&&(d=e-d),f&&(l=e-l),d>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:u,k1:d,k2neg:f,k2:l}}}},PY),eIe=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:AV},Symbol.toStringTag,{value:"Module"}));function tIe({r:t,s:e,to:n="hex",v:r,yParity:a}){const i=(()=>{if(a===0||a===1)return a;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),s=`0x${new AV.Signature(c0(t),c0(e)).toCompactHex()}${i===0?"1b":"1c"}`;return n==="hex"?s:Ki(s)}async function jx(t,e){var u,f,p;const{address:n,factory:r,factoryData:a,hash:i,signature:s,universalSignatureVerifierAddress:o=(p=(f=(u=t.chain)==null?void 0:u.contracts)==null?void 0:f.universalSignatureVerifier)==null?void 0:p.address,...c}=e,d=zs(s)?s:typeof s=="object"&&"r"in s&&"s"in s?tIe(s):d0(s),l=await(async()=>!r&&!a||jAe(d)?d:O2({address:r,data:a,signature:d}))();try{const h=o?{to:o,data:qe({abi:sN,functionName:"isValidSig",args:[n,i,l]}),...c}:{data:Bu({abi:sN,args:[n,i,l],bytecode:OSe}),...c},{data:b}=await ze(t,fh,"call")(h);return DTe(b??"0x0")}catch(h){try{if(K3(Fi(n),await Qq({hash:i,signature:s})))return!0}catch{}if(h instanceof Jq)return!1;throw h}}async function nIe(t,{address:e,message:n,factory:r,factoryData:a,signature:i,...s}){const o=Hd(n);return jx(t,{address:e,factory:r,factoryData:a,hash:o,signature:i,...s})}async function rIe(t,e){const{address:n,factory:r,factoryData:a,signature:i,message:s,primaryType:o,types:c,domain:d,...l}=e,u=pl({message:s,primaryType:o,types:c,domain:d});return jx(t,{address:n,factory:r,factoryData:a,hash:u,signature:i,...l})}function CV(t,{emitOnBegin:e=!1,emitMissed:n=!1,onBlockNumber:r,onError:a,poll:i,pollingInterval:s=t.pollingInterval}){const o=typeof i<"u"?i:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket");let c;return o?(()=>{const u=e0(["watchBlockNumber",t.uid,e,n,s]);return Vs(u,{onBlockNumber:r,onError:a},f=>fl(async()=>{var p;try{const h=await ze(t,ph,"getBlockNumber")({cacheTime:0});if(c){if(h===c)return;if(h-c>1&&n)for(let b=c+1n;b<h;b++)f.onBlockNumber(b,c),c=b}(!c||h>c)&&(f.onBlockNumber(h,c),c=h)}catch(h){(p=f.onError)==null||p.call(f,h)}},{emitOnBegin:e,interval:s}))})():(()=>{const u=e0(["watchBlockNumber",t.uid,e,n]);return Vs(u,{onBlockNumber:r,onError:a},f=>{let p=!0,h=()=>p=!1;return(async()=>{try{const b=(()=>{if(t.transport.type==="fallback"){const m=t.transport.transports.find(T=>T.config.type==="webSocket");return m?m.value:t.transport}return t.transport})(),{unsubscribe:v}=await b.subscribe({params:["newHeads"],onData(m){var A;if(!p)return;const T=c0((A=m.result)==null?void 0:A.number);f.onBlockNumber(T,c),c=T},onError(m){var T;(T=f.onError)==null||T.call(f,m)}});h=v,p||h()}catch(b){a==null||a(b)}})(),()=>h()})})()}async function aIe(t,{confirmations:e=1,hash:n,onReplaced:r,pollingInterval:a=t.pollingInterval,retryCount:i=6,retryDelay:s=({count:c})=>~~(1<<c)*200,timeout:o=18e4}){const c=e0(["waitForTransactionReceipt",t.uid,n]);let d,l,u,f=!1,p,h;const{promise:b,resolve:v,reject:m}=Ix(),T=o?setTimeout(()=>{h(),p(),m(new xxe({hash:n}))},o):void 0;return p=Vs(c,{onReplaced:r,resolve:v,reject:m},A=>{h=ze(t,CV,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:a,async onBlockNumber(N){const R=F=>{clearTimeout(T),h(),F(),p()};let B=N;if(!f)try{if(u){if(e>1&&(!u.blockNumber||B-u.blockNumber+1n<e))return;R(()=>A.resolve(u));return}if(d||(f=!0,await t7(async()=>{d=await ze(t,Rx,"getTransaction")({hash:n}),d.blockNumber&&(B=d.blockNumber)},{delay:s,retryCount:i}),f=!1),u=await ze(t,n7,"getTransactionReceipt")({hash:n}),e>1&&(!u.blockNumber||B-u.blockNumber+1n<e))return;R(()=>A.resolve(u))}catch(F){if(F instanceof Gq||F instanceof Yq){if(!d){f=!1;return}try{l=d,f=!0;const I=await t7(()=>ze(t,Ss,"getBlock")({blockNumber:B,includeTransactions:!0}),{delay:s,retryCount:i,shouldRetry:({error:M})=>M instanceof aK});f=!1;const P=I.transactions.find(({from:M,nonce:y})=>M===l.from&&y===l.nonce);if(!P||(u=await ze(t,n7,"getTransactionReceipt")({hash:P.hash}),e>1&&(!u.blockNumber||B-u.blockNumber+1n<e)))return;let $="replaced";P.to===l.to&&P.value===l.value&&P.input===l.input?$="repriced":P.from===P.to&&P.value===0n&&($="cancelled"),R(()=>{var M;(M=A.onReplaced)==null||M.call(A,{reason:$,replacedTransaction:l,transaction:P,transactionReceipt:u}),A.resolve(u)})}catch(I){R(()=>A.reject(I))}}else R(()=>A.reject(F))}}})}),b}function iIe(t,{blockTag:e="latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:a,onError:i,includeTransactions:s,poll:o,pollingInterval:c=t.pollingInterval}){const d=typeof o<"u"?o:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"),l=s??!1;let u;return d?(()=>{const h=e0(["watchBlocks",t.uid,e,n,r,l,c]);return Vs(h,{onBlock:a,onError:i},b=>fl(async()=>{var v;try{const m=await ze(t,Ss,"getBlock")({blockTag:e,includeTransactions:l});if(m.number!==null&&(u==null?void 0:u.number)!=null){if(m.number===u.number)return;if(m.number-u.number>1&&n)for(let T=(u==null?void 0:u.number)+1n;T<m.number;T++){const A=await ze(t,Ss,"getBlock")({blockNumber:T,includeTransactions:l});b.onBlock(A,u),u=A}}((u==null?void 0:u.number)==null||e==="pending"&&(m==null?void 0:m.number)==null||m.number!==null&&m.number>u.number)&&(b.onBlock(m,u),u=m)}catch(m){(v=b.onError)==null||v.call(b,m)}},{emitOnBegin:r,interval:c}))})():(()=>{let h=!0,b=!0,v=()=>h=!1;return(async()=>{try{r&&ze(t,Ss,"getBlock")({blockTag:e,includeTransactions:l}).then(A=>{h&&b&&(a(A,void 0),b=!1)}).catch(i);const m=(()=>{if(t.transport.type==="fallback"){const A=t.transport.transports.find(N=>N.config.type==="webSocket");return A?A.value:t.transport}return t.transport})(),{unsubscribe:T}=await m.subscribe({params:["newHeads"],async onData(A){if(!h)return;const N=await ze(t,Ss,"getBlock")({blockNumber:A.blockNumber,includeTransactions:l}).catch(()=>{});h&&(a(N,u),b=!1,u=N)},onError(A){i==null||i(A)}});v=T,h||v()}catch(m){i==null||i(m)}})(),()=>v()})()}function sIe(t,{address:e,args:n,batch:r=!0,event:a,events:i,fromBlock:s,onError:o,onLogs:c,poll:d,pollingInterval:l=t.pollingInterval,strict:u}){const f=typeof d<"u"?d:typeof s=="bigint"?!0:!(t.transport.type==="webSocket"||t.transport.type==="fallback"&&t.transport.transports[0].config.type==="webSocket"),p=u??!1;return f?(()=>{const v=e0(["watchEvent",e,n,r,t.uid,a,l,s]);return Vs(v,{onLogs:c,onError:o},m=>{let T;s!==void 0&&(T=s-1n);let A,N=!1;const R=fl(async()=>{var B;if(!N){try{A=await ze(t,KK,"createEventFilter")({address:e,args:n,event:a,events:i,strict:p,fromBlock:s})}catch{}N=!0;return}try{let F;if(A)F=await ze(t,V3,"getFilterChanges")({filter:A});else{const I=await ze(t,ph,"getBlockNumber")({});T&&T!==I?F=await ze(t,Sx,"getLogs")({address:e,args:n,event:a,events:i,fromBlock:T+1n,toBlock:I}):F=[],T=I}if(F.length===0)return;if(r)m.onLogs(F);else for(const I of F)m.onLogs([I])}catch(F){A&&F instanceof Bd&&(N=!1),(B=m.onError)==null||B.call(m,F)}},{emitOnBegin:!0,interval:l});return async()=>{A&&await ze(t,W3,"uninstallFilter")({filter:A}),R()}})})():(()=>{let v=!0,m=()=>v=!1;return(async()=>{try{const T=(()=>{if(t.transport.type==="fallback"){const B=t.transport.transports.find(F=>F.config.type==="webSocket");return B?B.value:t.transport}return t.transport})(),A=i??(a?[a]:void 0);let N=[];A&&(N=[A.flatMap(F=>lh({abi:[F],eventName:F.name,args:n}))],a&&(N=N[0]));const{unsubscribe:R}=await T.subscribe({params:["logs",{address:e,topics:N}],onData(B){var I;if(!v)return;const F=B.result;try{const{eventName:P,args:$}=Tx({abi:A??[],data:F.data,topics:F.topics,strict:p}),M=qs(F,{args:$,eventName:P});c([M])}catch(P){let $,M;if(P instanceof X5||P instanceof L3){if(u)return;$=P.abiItem.name,M=(I=P.abiItem.inputs)==null?void 0:I.some(E=>!("name"in E&&E.name))}const y=qs(F,{args:M?[]:{},eventName:$});c([y])}},onError(B){o==null||o(B)}});m=R,v||m()}catch(T){o==null||o(T)}})(),()=>m()})()}function oIe(t,{batch:e=!0,onError:n,onTransactions:r,poll:a,pollingInterval:i=t.pollingInterval}){return(typeof a<"u"?a:t.transport.type!=="webSocket")?(()=>{const d=e0(["watchPendingTransactions",t.uid,e,i]);return Vs(d,{onTransactions:r,onError:n},l=>{let u;const f=fl(async()=>{var p;try{if(!u)try{u=await ze(t,VK,"createPendingTransactionFilter")({});return}catch(b){throw f(),b}const h=await ze(t,V3,"getFilterChanges")({filter:u});if(h.length===0)return;if(e)l.onTransactions(h);else for(const b of h)l.onTransactions([b])}catch(h){(p=l.onError)==null||p.call(l,h)}},{emitOnBegin:!0,interval:i});return async()=>{u&&await ze(t,W3,"uninstallFilter")({filter:u}),f()}})})():(()=>{let d=!0,l=()=>d=!1;return(async()=>{try{const{unsubscribe:u}=await t.transport.subscribe({params:["newPendingTransactions"],onData(f){if(!d)return;const p=f.result;r([p])},onError(f){n==null||n(f)}});l=u,d||l()}catch(u){n==null||n(u)}})(),()=>l()})()}function cIe(t){var u,f,p;const{scheme:e,statement:n,...r}=((u=t.match(dIe))==null?void 0:u.groups)??{},{chainId:a,expirationTime:i,issuedAt:s,notBefore:o,requestId:c,...d}=((f=t.match(lIe))==null?void 0:f.groups)??{},l=(p=t.split("Resources:")[1])==null?void 0:p.split(`
- `).slice(1);return{...r,...d,...a?{chainId:Number(a)}:{},...i?{expirationTime:new Date(i)}:{},...s?{issuedAt:new Date(s)}:{},...o?{notBefore:new Date(o)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...e?{scheme:e}:{},...n?{statement:n}:{}}}const dIe=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,lIe=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function uIe(t){const{address:e,domain:n,message:r,nonce:a,scheme:i,time:s=new Date}=t;if(n&&r.domain!==n||a&&r.nonce!==a||i&&r.scheme!==i||r.expirationTime&&s>=r.expirationTime||r.notBefore&&s<r.notBefore)return!1;try{if(!r.address||!Nr(r.address,{strict:!1})||e&&!K3(r.address,e))return!1}catch{return!1}return!0}async function fIe(t,e){const{address:n,domain:r,message:a,nonce:i,scheme:s,signature:o,time:c=new Date,...d}=e,l=cIe(a);if(!l.address||!uIe({address:n,domain:r,message:l,nonce:i,scheme:s,time:c}))return!1;const f=Hd(a);return jx(t,{address:l.address,hash:f,signature:o,...d})}function pIe(t){return{call:e=>fh(t,e),createAccessList:e=>qK(t,e),createBlockFilter:()=>vAe(t),createContractEventFilter:e=>jq(t,e),createEventFilter:e=>KK(t,e),createPendingTransactionFilter:()=>VK(t),estimateContractGas:e=>eSe(t,e),estimateGas:e=>_x(t,e),getBalance:e=>bK(t,e),getBlobBaseFee:()=>EAe(t),getBlock:e=>Ss(t,e),getBlockNumber:e=>ph(t,e),getBlockTransactionCount:e=>_Ae(t,e),getBytecode:e=>wp(t,e),getChainId:()=>mi(t),getCode:e=>wp(t,e),getContractEvents:e=>yK(t,e),getEip712Domain:e=>xAe(t,e),getEnsAddress:e=>aAe(t,e),getEnsAvatar:e=>mAe(t,e),getEnsName:e=>gAe(t,e),getEnsResolver:e=>wAe(t,e),getEnsText:e=>zK(t,e),getFeeHistory:e=>CAe(t,e),estimateFeesPerGas:e=>dK(t,e),getFilterChanges:e=>V3(t,e),getFilterLogs:e=>IAe(t,e),getGasPrice:()=>wx(t),getLogs:e=>Sx(t,e),getProof:e=>KAe(t,e),estimateMaxPriorityFeePerGas:e=>Kxe(t,e),getStorageAt:e=>VAe(t,e),getTransaction:e=>Rx(t,e),getTransactionConfirmations:e=>WAe(t,e),getTransactionCount:e=>vx(t,e),getTransactionReceipt:e=>n7(t,e),multicall:e=>GAe(t,e),prepareTransactionRequest:e=>q3(t,e),readContract:e=>St(t,e),sendRawTransaction:e=>Ox(t,e),simulate:e=>r7(t,e),simulateBlocks:e=>r7(t,e),simulateCalls:e=>ACe(t,e),simulateContract:e=>un(t,e),verifyMessage:e=>nIe(t,e),verifySiweMessage:e=>fIe(t,e),verifyTypedData:e=>rIe(t,e),uninstallFilter:e=>W3(t,e),waitForTransactionReceipt:e=>aIe(t,e),watchBlocks:e=>iIe(t,e),watchBlockNumber:e=>CV(t,e),watchContractEvent:e=>zSe(t,e),watchEvent:e=>sIe(t,e),watchPendingTransactions:e=>oIe(t,e)}}function hIe(t){const{key:e="public",name:n="Public Client"}=t;return Y3({...t,key:e,name:n,type:"publicClient"}).extend(pIe)}async function bIe(t,{chain:e}){const{id:n,name:r,nativeCurrency:a,rpcUrls:i,blockExplorers:s}=e;await t.request({method:"wallet_addEthereumChain",params:[{chainId:Le(n),chainName:r,nativeCurrency:a,rpcUrls:i.default.http,blockExplorerUrls:s?Object.values(s).map(({url:o})=>o):void 0}]},{dedupe:!0,retryCount:0})}function yIe(t,e){const{abi:n,args:r,bytecode:a,...i}=e,s=Bu({abi:n,args:r,bytecode:a});return G3(t,{...i,...i.authorizationList?{to:null}:{},data:s})}async function mIe(t){var n;return((n=t.account)==null?void 0:n.type)==="local"?[t.account.address]:(await t.request({method:"eth_accounts"},{dedupe:!0})).map(r=>ch(r))}async function gIe(t,e={}){const{account:n=t.account,chainId:r}=e,a=n?On(n):void 0,i=r?[a==null?void 0:a.address,[Le(r)]]:[a==null?void 0:a.address],s=await t.request({method:"wallet_getCapabilities",params:i}),o={};for(const[c,d]of Object.entries(s)){o[Number(c)]={};for(let[l,u]of Object.entries(d))l==="addSubAccount"&&(l="unstable_addSubAccount"),o[Number(c)][l]=u}return typeof r=="number"?o[r]:o}async function wIe(t){return await t.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Hx(t,e){var c;const{account:n=t.account,chainId:r,nonce:a}=e;if(!n)throw new Xs({docsPath:"/docs/eip7702/prepareAuthorization"});const i=On(n),s=(()=>{if(e.executor)return e.executor==="self"?e.executor:On(e.executor)})(),o={address:e.contractAddress??e.address,chainId:r,nonce:a};return typeof o.chainId>"u"&&(o.chainId=((c=t.chain)==null?void 0:c.id)??await ze(t,mi,"getChainId")({})),typeof o.nonce>"u"&&(o.nonce=await ze(t,vx,"getTransactionCount")({address:i.address,blockTag:"pending"}),(s==="self"||s!=null&&s.address&&K3(s.address,i.address))&&(o.nonce+=1)),o}async function vIe(t){return(await t.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>Fi(n))}async function EIe(t,e){return t.request({method:"wallet_requestPermissions",params:[e]},{retryCount:0})}async function _Ie(t,e){const{id:n}=e;await t.request({method:"wallet_showCallsStatus",params:[n]})}async function TIe(t,e){const{account:n=t.account}=e;if(!n)throw new Xs({docsPath:"/docs/eip7702/signAuthorization"});const r=On(n);if(!r.signAuthorization)throw new S2({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const a=await Hx(t,e);return r.signAuthorization(a)}async function zx(t,{account:e=t.account,message:n}){if(!e)throw new Xs({docsPath:"/docs/actions/wallet/signMessage"});const r=On(e);if(r.signMessage)return r.signMessage({message:n});const a=typeof n=="string"?Jo(n):n.raw instanceof Uint8Array?Sn(n.raw):n.raw;return t.request({method:"personal_sign",params:[a,r.address]},{retryCount:0})}async function xIe(t,e){var d,l,u,f;const{account:n=t.account,chain:r=t.chain,...a}=e;if(!n)throw new Xs({docsPath:"/docs/actions/wallet/signTransaction"});const i=On(n);ll({account:i,...e});const s=await ze(t,mi,"getChainId")({});r!==null&&MK({currentChainId:s,chain:r});const o=(r==null?void 0:r.formatters)||((d=t.chain)==null?void 0:d.formatters),c=((l=o==null?void 0:o.transactionRequest)==null?void 0:l.format)||Lu;return i.signTransaction?i.signTransaction({...a,chainId:s},{serializer:(f=(u=t.chain)==null?void 0:u.serializers)==null?void 0:f.transaction}):await t.request({method:"eth_signTransaction",params:[{...c(a),chainId:Le(s),from:i.address}]},{retryCount:0})}async function IV(t,e){const{account:n=t.account,domain:r,message:a,primaryType:i}=e;if(!n)throw new Xs({docsPath:"/docs/actions/wallet/signTypedData"});const s=On(n),o={EIP712Domain:hh({domain:r}),...e.types};if(Z3({domain:r,message:a,primaryType:i,types:o}),s.signTypedData)return s.signTypedData({domain:r,message:a,primaryType:i,types:o});const c=DAe({domain:r,message:a,primaryType:i,types:o});return t.request({method:"eth_signTypedData_v4",params:[s.address,c]},{retryCount:0})}async function SIe(t,{id:e}){await t.request({method:"wallet_switchEthereumChain",params:[{chainId:Le(e)}]},{retryCount:0})}async function AIe(t,e){return await t.request({method:"wallet_watchAsset",params:e},{retryCount:0})}function CIe(t){return{addChain:e=>bIe(t,e),deployContract:e=>yIe(t,e),getAddresses:()=>mIe(t),getCallsStatus:e=>$K(t,e),getCapabilities:e=>gIe(t,e),getChainId:()=>mi(t),getPermissions:()=>wIe(t),prepareAuthorization:e=>Hx(t,e),prepareTransactionRequest:e=>q3(t,e),requestAddresses:()=>vIe(t),requestPermissions:e=>EIe(t,e),sendCalls:e=>qSe(t,e),sendRawTransaction:e=>Ox(t,e),sendTransaction:e=>G3(t,e),showCallsStatus:e=>_Ie(t,e),signAuthorization:e=>TIe(t,e),signMessage:e=>zx(t,e),signTransaction:e=>xIe(t,e),signTypedData:e=>IV(t,e),switchChain:e=>SIe(t,e),waitForCallsStatus:e=>KSe(t,e),watchAsset:e=>AIe(t,e),writeContract:e=>$r(t,e)}}function qx(t){const{key:e="wallet",name:n="Wallet Client",transport:r}=t;return Y3({...t,key:e,name:n,transport:r,type:"walletClient"}).extend(CIe)}const IIe=new TextEncoder;Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[e,t.charCodeAt(0)]);const Cb={...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((t,e)=>[t.charCodeAt(0),e])),61:0,45:62,95:63};function OIe(t){const e=t.replace(/=+$/,""),n=e.length,r=new Uint8Array(n+3);IIe.encodeInto(e+"===",r);for(let i=0,s=0;i<e.length;i+=4,s+=3){const o=(Cb[r[i]]<<18)+(Cb[r[i+1]]<<12)+(Cb[r[i+2]]<<6)+Cb[r[i+3]];r[s]=o>>16,r[s+1]=o>>8&255,r[s+2]=o&255}const a=(n>>2)*3+(n%4&&n%4-1);return new Uint8Array(r.buffer,0,a)}function MIe(t){if(t.length!==130&&t.length!==132)throw new kIe({signature:t});const e=BigInt(si(t,0,32)),n=BigInt(si(t,32,64)),r=(()=>{const a=+`0x${t.slice(130)}`;if(!Number.isNaN(a))try{return PIe(a)}catch{throw new NIe({value:a})}})();return typeof r>"u"?{r:e,s:n}:{r:e,s:n,yParity:r}}function PIe(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new RIe({value:t})}class kIe extends on{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${ia(wK(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class NIe extends on{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class RIe extends on{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const tm=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],nm=[{inputs:[{name:"success",type:"bool"},{name:"ret",type:"bytes"}],name:"DelegateAndRevert",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"},{name:"inner",type:"bytes"}],name:"FailedOpWithRevert",type:"error"},{inputs:[{name:"returnData",type:"bytes"}],name:"PostOpReverted",type:"error"},{inputs:[],name:"ReentrancyGuardReentrantCall",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"PostOpRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"}],name:"UserOperationPrefundTooLow",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"data",type:"bytes"}],name:"delegateAndRevert",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint256"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"paymasterVerificationGasLimit",type:"uint256"},{name:"paymasterPostOpGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function OV(t){const{authorization:e,factory:n,factoryData:r}=t;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!e)return"0x7702000000000000000000000000000000000000";const a=e.address;return rn([a,r??"0x"])}return n?rn([n,r??"0x"]):"0x"}function Kx(t){const{callGasLimit:e,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:a,paymaster:i,paymasterData:s,paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,sender:d,signature:l="0x",verificationGasLimit:u}=t,f=rn([Rn(Le(u||0n),{size:16}),Rn(Le(e||0n),{size:16})]),p=OV(t),h=rn([Rn(Le(r||0n),{size:16}),Rn(Le(a||0n),{size:16})]),b=t.nonce??0n,v=i?rn([i,Rn(Le(c||0n),{size:16}),Rn(Le(o||0n),{size:16}),s||"0x"]):"0x",m=t.preVerificationGas??0n;return{accountGasLimits:f,callData:n,initCode:p,gasFees:h,nonce:b,paymasterAndData:v,preVerificationGas:m,sender:d,signature:l}}const DIe={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function $Ie(t){const{chainId:e,entryPointAddress:n,userOperation:r}=t,a=Kx(r);return{types:DIe,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:e,verifyingContract:n},message:a}}function rm(t){const{chainId:e,entryPointAddress:n,entryPointVersion:r}=t,a=t.userOperation,{authorization:i,callData:s="0x",callGasLimit:o,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,paymasterAndData:u="0x",preVerificationGas:f,sender:p,verificationGasLimit:h}=a;if(r==="0.8")return pl($Ie({chainId:e,entryPointAddress:n,userOperation:a}));const b=(()=>{var v,m;if(r==="0.6"){const T=(v=a.initCode)==null?void 0:v.slice(0,42),A=(m=a.initCode)==null?void 0:m.slice(42),N=OV({authorization:i,factory:T,factoryData:A});return wn([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[p,l,ut(N),ut(s),o,h,f,c,d,ut(u)])}if(r==="0.7"){const T=Kx(a);return wn([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[T.sender,T.nonce,ut(T.initCode),ut(T.callData),T.accountGasLimits,T.preVerificationGas,T.gasFees,ut(T.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return ut(wn([{type:"bytes32"},{type:"address"},{type:"uint256"}],[ut(b),n,BigInt(e)]))}async function Uu(t){const{extend:e,nonceKeyManager:n=HAe({source:{get(){return Date.now()},set(){}}}),...r}=t;let a=!1;const i=await t.getAddress();return{...e,...r,address:i,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:t.getFactoryArgs()},async getNonce(s){const o=(s==null?void 0:s.key)??BigInt(await n.consume({address:i,chainId:t.client.chain.id,client:t.client}));return t.getNonce?await t.getNonce({...s,key:o}):await St(t.client,{abi:VT(["function getNonce(address, uint192) pure returns (uint256)"]),address:t.entryPoint.address,functionName:"getNonce",args:[i,o]})},async isDeployed(){return a?!0:(a=!!await ze(t.client,wp,"getCode")({address:i}),a)},...t.sign?{async sign(s){const[{factory:o,factoryData:c},d]=await Promise.all([this.getFactoryArgs(),t.sign(s)]);return o&&c?O2({address:o,data:c,signature:d}):d}}:{},async signMessage(s){const[{factory:o,factoryData:c},d]=await Promise.all([this.getFactoryArgs(),t.signMessage(s)]);return o&&c&&o!=="0x7702"?O2({address:o,data:c,signature:d}):d},async signTypedData(s){const[{factory:o,factoryData:c},d]=await Promise.all([this.getFactoryArgs(),t.signTypedData(s)]);return o&&c&&o!=="0x7702"?O2({address:o,data:c,signature:d}):d},type:"smart"}}function LIe(t){if(typeof t=="string"){if(!Nr(t,{strict:!1}))throw new Vi({address:t});return{address:t,type:"json-rpc"}}if(!Nr(t.address,{strict:!1}))throw new Vi({address:t.address});return{address:t.address,nonceManager:t.nonceManager,sign:t.sign,signAuthorization:t.signAuthorization,signMessage:t.signMessage,signTransaction:t.signTransaction,signTypedData:t.signTypedData,source:"custom",type:"local"}}class h7 extends ce{constructor({cause:e}){super("Smart Account is not deployed.",{cause:e,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(h7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class su extends ce{constructor({cause:e,data:n,message:r}={}){var i;const a=(i=r==null?void 0:r.replace("execution reverted: ",""))==null?void 0:i.replace("execution reverted","");super(`Execution reverted ${a?`with reason: ${a}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}}Object.defineProperty(su,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(su,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class b7 extends ce{constructor({cause:e}){super("Failed to send funds to beneficiary.",{cause:e,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(b7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class y7 extends ce{constructor({cause:e}){super("Gas value overflowed.",{cause:e,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(y7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class m7 extends ce{constructor({cause:e}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:e,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(m7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class g7 extends ce{constructor({cause:e,factory:n,factoryData:r,initCode:a}){super("Failed to simulate deployment for Smart Account.",{cause:e,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty(g7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class w7 extends ce{constructor({cause:e,factory:n,factoryData:r,initCode:a}){super("Smart Account initialization implementation did not create an account.",{cause:e,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(w7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class v7 extends ce{constructor({cause:e,factory:n,factoryData:r,initCode:a,sender:i}){super("Smart Account initialization implementation does not return the expected sender.",{cause:e,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,a&&`initCode: ${a}`,i&&`sender: ${i}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(v7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class E7 extends ce{constructor({cause:e}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:e,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(E7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class _7 extends ce{constructor({cause:e}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:e,name:"InternalCallOnlyError"})}}Object.defineProperty(_7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class T7 extends ce{constructor({cause:e}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:e,name:"InvalidAggregatorError"})}}Object.defineProperty(T7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class x7 extends ce{constructor({cause:e,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:e,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(x7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class S7 extends ce{constructor({cause:e}){super("Bundler has not set a beneficiary address.",{cause:e,name:"InvalidBeneficiaryError"})}}Object.defineProperty(S7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class B8 extends ce{constructor({cause:e}){super("Invalid fields set on User Operation.",{cause:e,name:"InvalidFieldsError"})}}Object.defineProperty(B8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class A7 extends ce{constructor({cause:e,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:e,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(A7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class cd extends ce{constructor({cause:e}){super("Paymaster deposit for the User Operation is too low.",{cause:e,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(cd,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(cd,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class C7 extends ce{constructor({cause:e}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:e,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(C7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class I7 extends ce{constructor({cause:e}){super("The Paymaster contract has not been deployed.",{cause:e,name:"PaymasterNotDeployedError"})}}Object.defineProperty(I7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class F8 extends ce{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterRateLimitError"})}}Object.defineProperty(F8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class U8 extends ce{constructor({cause:e}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:e,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(U8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class O7 extends ce{constructor({cause:e}){super("Paymaster `postOp` function reverted.",{cause:e,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(O7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class M7 extends ce{constructor({cause:e,factory:n,factoryData:r,initCode:a}){super("Smart Account has already been deployed.",{cause:e,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",a&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(M7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class j8 extends ce{constructor({cause:e}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:e,name:"SignatureCheckFailedError"})}}Object.defineProperty(j8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class P7 extends ce{constructor({cause:e}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:e,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(P7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class H8 extends ce{constructor({cause:e}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:e,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(H8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class k7 extends ce{constructor({cause:e}){super("User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(k7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class N7 extends ce{constructor({cause:e}){super("Paymaster for User Operation expired.",{cause:e,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(N7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class R7 extends ce{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(R7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class D7 extends ce{constructor({cause:e}){super("Signature provided for the User Operation is invalid.",{cause:e,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(D7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class z8 extends ce{constructor({cause:e}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:e,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(z8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class q8 extends ce{constructor({cause:e}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:e,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(q8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class K8 extends ce{constructor({cause:e}){super("User Operation rejected with op code validation error.",{cause:e,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(K8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class V8 extends ce{constructor({cause:e}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:e,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(V8,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class BIe extends ce{constructor({cause:e}){super(`An error occurred while executing user operation: ${e==null?void 0:e.shortMessage}`,{cause:e,name:"UnknownBundlerError"})}}class $7 extends ce{constructor({cause:e}){super("User Operation verification gas limit exceeded.",{cause:e,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty($7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class L7 extends ce{constructor({cause:e}){super("User Operation verification gas limit is too low.",{cause:e,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(L7,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class FIe extends ce{constructor(e,{callData:n,callGasLimit:r,docsPath:a,factory:i,factoryData:s,initCode:o,maxFeePerGas:c,maxPriorityFeePerGas:d,nonce:l,paymaster:u,paymasterAndData:f,paymasterData:p,paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:b,preVerificationGas:v,sender:m,signature:T,verificationGasLimit:A}){const N=$u({callData:n,callGasLimit:r,factory:i,factoryData:s,initCode:o,maxFeePerGas:typeof c<"u"&&`${pr(c)} gwei`,maxPriorityFeePerGas:typeof d<"u"&&`${pr(d)} gwei`,nonce:l,paymaster:u,paymasterAndData:f,paymasterData:p,paymasterPostOpGasLimit:h,paymasterVerificationGasLimit:b,preVerificationGas:v,sender:m,signature:T,verificationGasLimit:A});super(e.shortMessage,{cause:e,docsPath:a,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",N].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class UIe extends ce{constructor({hash:e}){super(`User Operation receipt with hash "${e}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class jIe extends ce{constructor({hash:e}){super(`User Operation with hash "${e}" could not be found.`,{name:"UserOperationNotFoundError"})}}class _N extends ce{constructor({hash:e}){super(`Timed out while waiting for User Operation with hash "${e}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const HIe=[su,B8,cd,F8,U8,j8,H8,V8,z8,q8,K8];function zIe(t,e){const n=(t.details||"").toLowerCase();if(h7.message.test(n))return new h7({cause:t});if(b7.message.test(n))return new b7({cause:t});if(y7.message.test(n))return new y7({cause:t});if(m7.message.test(n))return new m7({cause:t});if(g7.message.test(n))return new g7({cause:t,factory:e.factory,factoryData:e.factoryData,initCode:e.initCode});if(w7.message.test(n))return new w7({cause:t,factory:e.factory,factoryData:e.factoryData,initCode:e.initCode});if(v7.message.test(n))return new v7({cause:t,factory:e.factory,factoryData:e.factoryData,initCode:e.initCode,sender:e.sender});if(E7.message.test(n))return new E7({cause:t});if(_7.message.test(n))return new _7({cause:t});if(x7.message.test(n))return new x7({cause:t,nonce:e.nonce});if(T7.message.test(n))return new T7({cause:t});if(S7.message.test(n))return new S7({cause:t});if(A7.message.test(n))return new A7({cause:t});if(cd.message.test(n))return new cd({cause:t});if(C7.message.test(n))return new C7({cause:t});if(I7.message.test(n))return new I7({cause:t});if(O7.message.test(n))return new O7({cause:t});if(P7.message.test(n))return new P7({cause:t});if(M7.message.test(n))return new M7({cause:t,factory:e.factory,factoryData:e.factoryData,initCode:e.initCode});if(k7.message.test(n))return new k7({cause:t});if(N7.message.test(n))return new N7({cause:t});if(D7.message.test(n))return new D7({cause:t});if(R7.message.test(n))return new R7({cause:t});if($7.message.test(n))return new $7({cause:t});if(L7.message.test(n))return new L7({cause:t});const r=t.walk(a=>HIe.some(i=>i.code===a.code));if(r){if(r.code===su.code)return new su({cause:t,data:r.data,message:r.details});if(r.code===B8.code)return new B8({cause:t});if(r.code===cd.code)return new cd({cause:t});if(r.code===F8.code)return new F8({cause:t});if(r.code===U8.code)return new U8({cause:t});if(r.code===j8.code)return new j8({cause:t});if(r.code===H8.code)return new H8({cause:t});if(r.code===V8.code)return new V8({cause:t});if(r.code===z8.code)return new z8({cause:t});if(r.code===q8.code)return new q8({cause:t});if(r.code===K8.code)return new K8({cause:t})}return new BIe({cause:t})}function MV(t,{calls:e,docsPath:n,...r}){const a=(()=>{const i=zIe(t,r);if(e&&i instanceof su){const s=qIe(i),o=e==null?void 0:e.filter(c=>c.abi);if(s&&o.length>0)return KIe({calls:o,revertData:s})}return i})();return new FIe(a,{docsPath:n,...r})}function qIe(t){let e;return t.walk(n=>{var a,i,s,o;const r=n;if(typeof r.data=="string"||typeof((a=r.data)==null?void 0:a.revertData)=="string"||!(r instanceof ce)&&typeof r.message=="string"){const c=(o=(s=((i=r.data)==null?void 0:i.revertData)||r.data||r.message).match)==null?void 0:o.call(s,/(0x[A-Za-z0-9]*)/);if(c)return e=c[1],!0}return!1}),e}function KIe(t){const{calls:e,revertData:n}=t,{abi:r,functionName:a,args:i,to:s}=(()=>{const c=e==null?void 0:e.filter(l=>!!l.abi);if(c.length===1)return c[0];const d=c.filter(l=>{try{return!!Kq({abi:l.abi,data:n})}catch{return!1}});return d.length===1?d[0]:{abi:[],functionName:c.reduce((l,u)=>`${l?`${l} | `:""}${u.functionName}`,""),args:void 0,to:void 0}})(),o=n==="0x"?new Xq({functionName:a}):new N8({abi:r,data:n,functionName:a});return new Zq(o,{abi:r,args:i,contractAddress:s,functionName:a})}function VIe(t){const e={};return t.callGasLimit&&(e.callGasLimit=BigInt(t.callGasLimit)),t.preVerificationGas&&(e.preVerificationGas=BigInt(t.preVerificationGas)),t.verificationGasLimit&&(e.verificationGasLimit=BigInt(t.verificationGasLimit)),t.paymasterPostOpGasLimit&&(e.paymasterPostOpGasLimit=BigInt(t.paymasterPostOpGasLimit)),t.paymasterVerificationGasLimit&&(e.paymasterVerificationGasLimit=BigInt(t.paymasterVerificationGasLimit)),e}function am(t){const e={};return typeof t.callData<"u"&&(e.callData=t.callData),typeof t.callGasLimit<"u"&&(e.callGasLimit=Le(t.callGasLimit)),typeof t.factory<"u"&&(e.factory=t.factory),typeof t.factoryData<"u"&&(e.factoryData=t.factoryData),typeof t.initCode<"u"&&(e.initCode=t.initCode),typeof t.maxFeePerGas<"u"&&(e.maxFeePerGas=Le(t.maxFeePerGas)),typeof t.maxPriorityFeePerGas<"u"&&(e.maxPriorityFeePerGas=Le(t.maxPriorityFeePerGas)),typeof t.nonce<"u"&&(e.nonce=Le(t.nonce)),typeof t.paymaster<"u"&&(e.paymaster=t.paymaster),typeof t.paymasterAndData<"u"&&(e.paymasterAndData=t.paymasterAndData||"0x"),typeof t.paymasterData<"u"&&(e.paymasterData=t.paymasterData),typeof t.paymasterPostOpGasLimit<"u"&&(e.paymasterPostOpGasLimit=Le(t.paymasterPostOpGasLimit)),typeof t.paymasterVerificationGasLimit<"u"&&(e.paymasterVerificationGasLimit=Le(t.paymasterVerificationGasLimit)),typeof t.preVerificationGas<"u"&&(e.preVerificationGas=Le(t.preVerificationGas)),typeof t.sender<"u"&&(e.sender=t.sender),typeof t.signature<"u"&&(e.signature=t.signature),typeof t.verificationGasLimit<"u"&&(e.verificationGasLimit=Le(t.verificationGasLimit)),typeof t.authorization<"u"&&(e.eip7702Auth=WIe(t.authorization)),e}function WIe(t){return{address:t.address,chainId:Le(t.chainId),nonce:Le(t.nonce),r:t.r?Le(BigInt(t.r),{size:32}):Rn("0x",{size:32}),s:t.s?Le(BigInt(t.s),{size:32}):Rn("0x",{size:32}),yParity:t.yParity?Le(t.yParity,{size:1}):Rn("0x",{size:32})}}async function PV(t,e){const{chainId:n,entryPointAddress:r,context:a,...i}=e,s=am(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...d}=await t.request({method:"pm_getPaymasterData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,Le(n),a]});return{...d,...o&&{paymasterPostOpGasLimit:c0(o)},...c&&{paymasterVerificationGasLimit:c0(c)}}}async function kV(t,e){const{chainId:n,entryPointAddress:r,context:a,...i}=e,s=am(i),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...d}=await t.request({method:"pm_getPaymasterStubData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,Le(n),a]});return{...d,...o&&{paymasterPostOpGasLimit:c0(o)},...c&&{paymasterVerificationGasLimit:c0(c)}}}const GIe=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function Vx(t,e){var B;const n=e,{account:r=t.account,parameters:a=GIe,stateOverride:i}=n;if(!r)throw new Xs;const s=On(r),o=t,c=n.paymaster??(o==null?void 0:o.paymaster),d=typeof c=="string"?c:void 0,{getPaymasterStubData:l,getPaymasterData:u}=(()=>{if(c===!0)return{getPaymasterStubData:F=>ze(o,kV,"getPaymasterStubData")(F),getPaymasterData:F=>ze(o,PV,"getPaymasterData")(F)};if(typeof c=="object"){const{getPaymasterStubData:F,getPaymasterData:I}=c;return{getPaymasterStubData:I&&F?F:I,getPaymasterData:I&&F?I:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),f=n.paymasterContext?n.paymasterContext:o==null?void 0:o.paymasterContext;let p={...n,paymaster:d,sender:s.address};const[h,b,v,m,T]=await Promise.all([(async()=>n.calls?s.encodeCalls(n.calls.map(F=>{const I=F;return I.abi?{data:qe(I),to:I.to,value:I.value}:I})):n.callData)(),(async()=>{if(!a.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:F,factoryData:I}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:F&&I?rn([F,I]):void 0}:{factory:F,factoryData:I}})(),(async()=>{var F;if(a.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return p;if((F=o==null?void 0:o.userOperation)!=null&&F.estimateFeesPerGas){const I=await o.userOperation.estimateFeesPerGas({account:s,bundlerClient:o,userOperation:p});return{...p,...I}}try{const I=o.client??t,P=await ze(I,dK,"estimateFeesPerGas")({chain:I.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*P.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*P.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(a.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()})(),(async()=>{if(a.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!await s.isDeployed())return{...await Hx(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof h<"u"&&(p.callData=h),typeof b<"u"&&(p={...p,...b}),typeof v<"u"&&(p={...p,...v}),typeof m<"u"&&(p.nonce=m),typeof T<"u"&&(p.authorization=T),a.includes("signature")&&(typeof n.signature<"u"?p.signature=n.signature:p.signature=await s.getStubSignature(p)),s.entryPoint.version==="0.6"&&!p.initCode&&(p.initCode="0x");let A;async function N(){return A||(t.chain?t.chain.id:(A=await ze(t,mi,"getChainId")({}),A))}let R=!1;if(a.includes("paymaster")&&l&&!d&&!n.paymasterAndData){const{isFinal:F=!1,sponsor:I,...P}=await l({chainId:await N(),entryPointAddress:s.entryPoint.address,context:f,...p});R=F,p={...p,...P}}if(s.entryPoint.version==="0.6"&&!p.paymasterAndData&&(p.paymasterAndData="0x"),a.includes("gas")){if((B=s.userOperation)!=null&&B.estimateGas){const F=await s.userOperation.estimateGas(p);p={...p,...F}}if(typeof p.callGasLimit>"u"||typeof p.preVerificationGas>"u"||typeof p.verificationGasLimit>"u"||p.paymaster&&typeof p.paymasterPostOpGasLimit>"u"||p.paymaster&&typeof p.paymasterVerificationGasLimit>"u"){const F=await ze(o,NV,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:i,...p.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...p});p={...p,callGasLimit:p.callGasLimit??F.callGasLimit,preVerificationGas:p.preVerificationGas??F.preVerificationGas,verificationGasLimit:p.verificationGasLimit??F.verificationGasLimit,paymasterPostOpGasLimit:p.paymasterPostOpGasLimit??F.paymasterPostOpGasLimit,paymasterVerificationGasLimit:p.paymasterVerificationGasLimit??F.paymasterVerificationGasLimit}}}if(a.includes("paymaster")&&u&&!d&&!n.paymasterAndData&&!R){const F=await u({chainId:await N(),entryPointAddress:s.entryPoint.address,context:f,...p});p={...p,...F}}return delete p.calls,delete p.parameters,delete p.paymasterContext,typeof p.paymaster!="string"&&delete p.paymaster,p}async function NV(t,e){var c;const{account:n=t.account,entryPointAddress:r,stateOverride:a}=e;if(!n&&!e.sender)throw new Xs;const i=n?On(n):void 0,s=z3(a),o=i?await ze(t,Vx,"prepareUserOperation")({...e,parameters:["authorization","factory","nonce","paymaster","signature"]}):e;try{const d=[am(o),r??((c=i==null?void 0:i.entryPoint)==null?void 0:c.address)],l=await t.request({method:"eth_estimateUserOperationGas",params:s?[...d,s]:[...d]});return VIe(l)}catch(d){const l=e.calls;throw MV(d,{...o,...l?{calls:l}:{}})}}function YIe(t){return t.request({method:"eth_supportedEntryPoints"})}function JIe(t){const e={...t};return t.callGasLimit&&(e.callGasLimit=BigInt(t.callGasLimit)),t.maxFeePerGas&&(e.maxFeePerGas=BigInt(t.maxFeePerGas)),t.maxPriorityFeePerGas&&(e.maxPriorityFeePerGas=BigInt(t.maxPriorityFeePerGas)),t.nonce&&(e.nonce=BigInt(t.nonce)),t.paymasterPostOpGasLimit&&(e.paymasterPostOpGasLimit=BigInt(t.paymasterPostOpGasLimit)),t.paymasterVerificationGasLimit&&(e.paymasterVerificationGasLimit=BigInt(t.paymasterVerificationGasLimit)),t.preVerificationGas&&(e.preVerificationGas=BigInt(t.preVerificationGas)),t.verificationGasLimit&&(e.verificationGasLimit=BigInt(t.verificationGasLimit)),e}async function ZIe(t,{hash:e}){const n=await t.request({method:"eth_getUserOperationByHash",params:[e]},{dedupe:!0});if(!n)throw new jIe({hash:e});const{blockHash:r,blockNumber:a,entryPoint:i,transactionHash:s,userOperation:o}=n;return{blockHash:r,blockNumber:BigInt(a),entryPoint:i,transactionHash:s,userOperation:JIe(o)}}function XIe(t){const e={...t};return t.actualGasCost&&(e.actualGasCost=BigInt(t.actualGasCost)),t.actualGasUsed&&(e.actualGasUsed=BigInt(t.actualGasUsed)),t.logs&&(e.logs=t.logs.map(n=>qs(n))),t.receipt&&(e.receipt=NK(e.receipt)),e}async function RV(t,{hash:e}){const n=await t.request({method:"eth_getUserOperationReceipt",params:[e]},{dedupe:!0});if(!n)throw new UIe({hash:e});return XIe(n)}async function QIe(t,e){var c,d;const{account:n=t.account,entryPointAddress:r}=e;if(!n&&!e.sender)throw new Xs;const a=n?On(n):void 0,i=a?await ze(t,Vx,"prepareUserOperation")(e):e,s=e.signature||await((c=a==null?void 0:a.signUserOperation)==null?void 0:c.call(a,i)),o=am({...i,signature:s});try{return await t.request({method:"eth_sendUserOperation",params:[o,r??((d=a==null?void 0:a.entryPoint)==null?void 0:d.address)]},{retryCount:0})}catch(l){const u=e.calls;throw MV(l,{...i,...u?{calls:u}:{},signature:s})}}function eOe(t,e){const{hash:n,pollingInterval:r=t.pollingInterval,retryCount:a,timeout:i=12e4}=e;let s=0;const o=e0(["waitForUserOperationReceipt",t.uid,n]);return new Promise((c,d)=>{const l=Vs(o,{resolve:c,reject:d},u=>{const f=h=>{p(),h(),l()},p=fl(async()=>{a&&s>=a&&f(()=>u.reject(new _N({hash:n})));try{const h=await ze(t,RV,"getUserOperationReceipt")({hash:n});f(()=>u.resolve(h))}catch(h){const b=h;b.name!=="UserOperationReceiptNotFoundError"&&f(()=>u.reject(b))}s++},{emitOnBegin:!0,interval:r});return i&&setTimeout(()=>f(()=>u.reject(new _N({hash:n}))),i),p})})}function tOe(t){return{estimateUserOperationGas:e=>NV(t,e),getChainId:()=>mi(t),getSupportedEntryPoints:()=>YIe(t),getUserOperation:e=>ZIe(t,e),getUserOperationReceipt:e=>RV(t,e),prepareUserOperation:e=>Vx(t,e),sendUserOperation:e=>QIe(t,e),waitForUserOperationReceipt:e=>eOe(t,e)}}function nOe(t){return{getPaymasterData:e=>PV(t,e),getPaymasterStubData:e=>kV(t,e)}}function rOe(t){const{client:e,key:n="bundler",name:r="Bundler Client",paymaster:a,paymasterContext:i,transport:s,userOperation:o}=t;return Object.assign(Y3({...t,chain:t.chain??(e==null?void 0:e.chain),key:n,name:r,transport:s,type:"bundlerClient"}),{client:e,paymaster:a,paymasterContext:i,userOperation:o}).extend(tOe)}function aOe(t){const{key:e="bundler",name:n="Bundler Client",transport:r}=t;return Y3({...t,key:e,name:n,transport:r,type:"PaymasterClient"}).extend(nOe)}const im="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",mh="0x0000000071727De22E5E9d8BAf0edAc6f37da032",gh=async(t,e)=>{const{address:n,entryPointAddress:r,key:a=BigInt(0)}=e;return await ze(t,St,"readContract")({address:r,abi:[{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"getNonce",args:[n,a]})},iOe="0x60806040526102a28038038091610015826100ae565b6080396040816080019112610093576080516001600160a01b03811681036100935760a0516001600160401b0381116100935782609f82011215610093578060800151610061816100fc565b9361006f60405195866100d9565b81855260a082840101116100935761008e9160a0602086019101610117565b610196565b600080fd5b634e487b7160e01b600052604160045260246000fd5b6080601f91909101601f19168101906001600160401b038211908210176100d457604052565b610098565b601f909101601f19168101906001600160401b038211908210176100d457604052565b6001600160401b0381116100d457601f01601f191660200190565b60005b83811061012a5750506000910152565b818101518382015260200161011a565b6040916020825261015a8151809281602086015260208686019101610117565b601f01601f1916010190565b3d15610191573d90610177826100fc565b9161018560405193846100d9565b82523d6000602084013e565b606090565b600091908291826040516101cd816101bf6020820195639b249f6960e01b87526024830161013a565b03601f1981018352826100d9565b51925af16101d9610166565b906102485760048151116000146101f7576024015160005260206000f35b60405162461bcd60e51b8152602060048201526024808201527f67657453656e64657241646472657373206661696c656420776974686f7574206044820152636461746160e01b6064820152608490fd5b60405162461bcd60e51b815260206004820152602b60248201527f67657453656e6465724164647265737320646964206e6f74207265766572742060448201526a185cc8195e1c1958dd195960aa1b6064820152608490fdfe",sOe=[{inputs:[{internalType:"address",name:"_entryPoint",type:"address"},{internalType:"bytes",name:"initCode",type:"bytes"}],stateMutability:"payable",type:"constructor"}],B7=async(t,e)=>{const{initCode:n,entryPointAddress:r,factory:a,factoryData:i}=e;if(!n&&!a&&!i)throw new Error("Either `initCode` or `factory` and `factoryData` must be provided");const s=n||rn([a,i]),{data:o}=await ze(t,fh,"call")({data:Bu({abi:sOe,bytecode:iOe,args:[r,s]})});if(!o)throw new Error("Failed to get sender address");return v1([{type:"address"}],o)[0]};async function zd({owner:t,address:e}){if("type"in t&&t.type==="local")return t;let n;if("request"in t){if(!e)try{[e]=await t.request({method:"eth_requestAccounts"})}catch{[e]=await t.request({method:"eth_accounts"})}if(!e)throw new Error("address is required");n=qx({account:e,transport:A2(t)})}return n||(n=t),LIe({address:n.account.address,async signMessage({message:r}){return n.signMessage({message:r})},async signTypedData(r){return ze(n,IV,"signTypedData")(r)},async signTransaction(r){throw new Error("Smart account signer doesn't need to sign transactions")}})}const oOe=async t=>{try{const n=jo({abi:[{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch",outputs:[],stateMutability:"nonpayable",type:"function"}],data:t}),r=[];for(let a=0;a<n.args[0].length;a++)r.push({to:n.args[0][a],value:n.args[1][a],data:n.args[2][a]});return r}catch{}const e=jo({abi:[{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute",outputs:[],stateMutability:"nonpayable",type:"function"}],data:t});return[{to:e.args[0],value:e.args[1],data:e.args[2]}]},cOe=async t=>{if(t.length>1)return qe({abi:[{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"executeBatch",args:[t.map(n=>n.to),t.map(n=>n.value??0n),t.map(n=>n.data??"0x")]});const e=t.length===0?void 0:t[0];if(!e)throw new Error("No calls to encode");return qe({abi:[{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute",outputs:[],stateMutability:"nonpayable",type:"function"}],functionName:"execute",args:[e.to,e.value??0n,e.data??"0x"]})},dOe=async({bytes:t,index:e,secp256k1VerificationFacetAddress:n})=>qe({abi:[{inputs:[{internalType:"address",name:"_verificationFacet",type:"address"},{internalType:"bytes",name:"_owner",type:"bytes"},{internalType:"uint256",name:"_salt",type:"uint256"}],name:"createAccount",outputs:[{internalType:"contract Barz",name:"barz",type:"address"}],stateMutability:"nonpayable",type:"function"}],functionName:"createAccount",args:[n,t,e]});async function TN(t,e,n,r){return t.signTypedData({domain:{chainId:Number(e),name:"Barz",verifyingContract:n,version:"v0.2.0"},types:{BarzMessage:[{name:"message",type:"bytes"}]},message:{message:r},primaryType:"BarzMessage"})}const xN={secp256k1VerificationFacetAddress:"0x81b9E3689390C7e74cF526594A105Dea21a8cdD5",factoryAddress:"0x729c310186a57833f622630a16d13f710b83272a"};async function lOe(t){var p,h;const{owner:e,client:n,index:r=0n,address:a,factoryAddress:i=xN.factoryAddress,secp256k1VerificationFacetAddress:s=xN.secp256k1VerificationFacetAddress}=t,o=await zd({owner:e});let c=a;const d={address:((p=t.entryPoint)==null?void 0:p.address)??im,abi:tm,version:((h=t.entryPoint)==null?void 0:h.version)??"0.6"};let l;const u=async()=>l||(l=n.chain?n.chain.id:await ze(n,mi,"getChainId")({}),l),f=async()=>({factory:i,factoryData:await dOe({bytes:o.address,secp256k1VerificationFacetAddress:s,index:r})});return Uu({client:n,entryPoint:d,getFactoryArgs:f,async getAddress(){if(c)return c;const{factory:b,factoryData:v}=await f();return c=await B7(n,{factory:b,factoryData:v,entryPointAddress:d.address}),c},async encodeCalls(b){return cOe(b)},async decodeCalls(b){return oOe(b)},async getNonce(b){return gh(n,{address:await this.getAddress(),entryPointAddress:d.address,key:(t==null?void 0:t.nonceKey)??(b==null?void 0:b.key)})},async getStubSignature(){return"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"},async sign({hash:b}){return this.signMessage({message:b})},async signMessage({message:b}){return TN(o,await u(),await this.getAddress(),Hd(b))},async signTypedData(b){return TN(o,await u(),await this.getAddress(),pl(b))},async signUserOperation(b){const{chainId:v=await u(),...m}=b;return zx(n,{account:o,message:{raw:rm({userOperation:{...m,sender:m.sender??await this.getAddress(),signature:"0x"},entryPointAddress:d.address,entryPointVersion:d.version,chainId:v})}})}})}function W8(t){const n=jo({abi:[{type:"function",name:"execute",inputs:[{name:"execMode",type:"bytes32",internalType:"ExecMode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"}],data:t}),r=n.args[0],a=n.args[1],i=x0(r,0,1),s=x0(r,1,2),o=x0(r,3,7),c=x0(r,7);let d;switch(BigInt(i)){case BigInt(0):d="call";break;case BigInt(1):d="batchcall";break;case BigInt(255):d="delegatecall";break;default:throw new Error("Invalid call type")}const l={type:d,revertOnError:BigInt(s)===BigInt(1),selector:o,context:c};if(l.type==="batchcall"){const[h]=v1([{name:"executionBatch",type:"tuple[]",components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"callData",type:"bytes"}]}],a);return{mode:l,callData:h.map(b=>({to:b.target,value:b.value,data:b.callData}))}}const u=Fi(x0(a,0,20)),f=BigInt(x0(a,20,52)),p=An(a)>52?x0(a,52):"0x";return{mode:l,callData:[{to:u,value:f,data:p}]}}function uOe(t){switch(t){case"call":return"0x00";case"batchcall":return"0x01";case"delegatecall":return"0xff"}}function SN({type:t,revertOnError:e,selector:n,context:r}){return hr(["bytes1","bytes1","bytes4","bytes4","bytes22"],[Sn(C0(uOe(t),{size:1})),Sn(C0(e?"0x01":"0x00",{size:1})),Sn(C0("0x0",{size:4})),Sn(C0(n??"0x",{size:4})),Sn(C0(r??"0x",{size:22}))])}function G8({mode:t,callData:e}){if(e.length>1&&(t==null?void 0:t.type)!=="batchcall")throw new Error(`mode ${JSON.stringify(t)} does not supported for batchcall calldata`);const n=[{type:"function",name:"execute",inputs:[{name:"execMode",type:"bytes32",internalType:"ExecMode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"}];if(e.length>1)return qe({abi:n,functionName:"execute",args:[SN(t),wn([{name:"executionBatch",type:"tuple[]",components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"callData",type:"bytes"}]}],[e.map(a=>({target:a.to,value:a.value??0n,callData:a.data??"0x"}))])]});const r=e.length===0?void 0:e[0];if(!r)throw new Error("No calls to encode");return qe({abi:n,functionName:"execute",args:[SN(t),k0([r.to,Sn(r.value??0n,{size:32}),r.data??"0x"])]})}const fOe=async(t,e)=>!!await wp(t,{address:e});async function pOe(t){const{chainId:e,entryPoint:n,validAfter:r=0,validUntil:a=0,safe4337ModuleAddress:i,version:s,owners:o,signatures:c,account:d,...l}=t,{safe4337ModuleAddress:u}=FV(s,n.version,{safe4337ModuleAddress:i}),f={safe:l.sender,callData:l.callData,nonce:l.nonce,initCode:l.initCode??"0x",maxFeePerGas:l.maxFeePerGas,maxPriorityFeePerGas:l.maxPriorityFeePerGas,preVerificationGas:l.preVerificationGas,verificationGasLimit:l.verificationGasLimit,callGasLimit:l.callGasLimit,paymasterAndData:l.paymasterAndData??"0x",validAfter:r,validUntil:a,entryPoint:n.address};if("initCode"in l&&(f.paymasterAndData=l.paymasterAndData??"0x"),"factory"in l){if(l.factory&&l.factoryData&&(f.initCode=k0([l.factory,l.factoryData])),!l.sender)throw new Error("Sender is required");f.paymasterAndData=_Oe({...l,sender:l.sender})}const p=[await zd({owner:d})];let h=[];c&&(h=v1([{components:[{type:"address",name:"signer"},{type:"bytes",name:"data"}],name:"signatures",type:"tuple[]"}],c)[0]);const b=[...h,...await Promise.all(p.map(async m=>({signer:m.address,data:await m.signTypedData({domain:{chainId:e,verifyingContract:u},types:n.version==="0.6"?wOe:vOe,primaryType:"SafeOp",message:f})})))];if(b.length!==o.length)return wn([{components:[{type:"address",name:"signer"},{type:"bytes",name:"data"}],name:"signatures",type:"tuple[]"}],[b]);b.sort((m,T)=>m.signer.toLowerCase().localeCompare(T.signer.toLowerCase()));const v=rn(b.map(m=>m.data));return hr(["uint48","uint48","bytes"],[r,a,v])}const DV=[{inputs:[{internalType:"bytes",name:"transactions",type:"bytes"}],name:"multiSend",outputs:[],stateMutability:"payable",type:"function"}],hOe=[{type:"function",name:"initSafe7579",inputs:[{name:"safe7579",type:"address",internalType:"address"},{name:"executors",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"fallbacks",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"hooks",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"attesters",type:"address[]",internalType:"address[]"},{name:"threshold",type:"uint8",internalType:"uint8"}],outputs:[],stateMutability:"nonpayable"}],bOe=[{type:"function",name:"preValidationSetup",inputs:[{name:"initHash",type:"bytes32",internalType:"bytes32"},{name:"to",type:"address",internalType:"address"},{name:"preInit",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"}],yOe=[{inputs:[{internalType:"address[]",name:"modules",type:"address[]"}],name:"enableModules",outputs:[],stateMutability:"nonpayable",type:"function"}],mOe=[{inputs:[{internalType:"address[]",name:"_owners",type:"address[]"},{internalType:"uint256",name:"_threshold",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"address",name:"fallbackHandler",type:"address"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"uint256",name:"payment",type:"uint256"},{internalType:"address payable",name:"paymentReceiver",type:"address"}],name:"setup",outputs:[],stateMutability:"nonpayable",type:"function"}],gOe=[{inputs:[{internalType:"address",name:"_singleton",type:"address"},{internalType:"bytes",name:"initializer",type:"bytes"},{internalType:"uint256",name:"saltNonce",type:"uint256"}],name:"createProxyWithNonce",outputs:[{internalType:"contract SafeProxy",name:"proxy",type:"address"}],stateMutability:"nonpayable",type:"function"}],AN=[{type:"function",name:"setupSafe",inputs:[{name:"initData",type:"tuple",internalType:"struct Safe7579Launchpad.InitData",components:[{name:"singleton",type:"address",internalType:"address"},{name:"owners",type:"address[]",internalType:"address[]"},{name:"threshold",type:"uint256",internalType:"uint256"},{name:"setupTo",type:"address",internalType:"address"},{name:"setupData",type:"bytes",internalType:"bytes"},{name:"safe7579",type:"address",internalType:"contract ISafe7579"},{name:"validators",type:"tuple[]",internalType:"struct ModuleInit[]",components:[{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}]},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"}],CN=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"uint8",name:"operation",type:"uint8"}],name:"executeUserOpWithErrorString",outputs:[],stateMutability:"nonpayable",type:"function"}],wOe={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},vOe={SafeOp:[{type:"address",name:"safe"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint128",name:"verificationGasLimit"},{type:"uint128",name:"callGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint128",name:"maxPriorityFeePerGas"},{type:"uint128",name:"maxFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"uint48",name:"validAfter"},{type:"uint48",name:"validUntil"},{type:"address",name:"entryPoint"}]},$l={"1.4.1":{"0.6":{SAFE_MODULE_SETUP_ADDRESS:"0x8EcD4ec46D4D2a6B64fE960B3D64e8B94B2234eb",SAFE_4337_MODULE_ADDRESS:"0xa581c4A4DB7175302464fF3C06380BC3270b4037",SAFE_PROXY_FACTORY_ADDRESS:"0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67",SAFE_SINGLETON_ADDRESS:"0x41675C099F32341bf84BFc5382aF534df5C7461a",MULTI_SEND_ADDRESS:"0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",MULTI_SEND_CALL_ONLY_ADDRESS:"0x9641d764fc13c8B624c04430C7356C1C7C8102e2"},"0.7":{SAFE_MODULE_SETUP_ADDRESS:"0x2dd68b007B46fBe91B9A7c3EDa5A7a1063cB5b47",SAFE_4337_MODULE_ADDRESS:"0x75cf11467937ce3F2f357CE24ffc3DBF8fD5c226",SAFE_PROXY_FACTORY_ADDRESS:"0x4e1DCf7AD4e460CfD30791CCC4F9c8a4f820ec67",SAFE_SINGLETON_ADDRESS:"0x41675C099F32341bf84BFc5382aF534df5C7461a",MULTI_SEND_ADDRESS:"0x38869bf66a61cF6bDB996A6aE40D5853Fd43B526",MULTI_SEND_CALL_ONLY_ADDRESS:"0x9641d764fc13c8B624c04430C7356C1C7C8102e2"}}},IN=(t,e)=>{const n=[0,1,27,28],r=27;let a=Number.parseInt(e.slice(-2),16);if(!n.includes(a))throw new Error("Invalid signature");return t==="eth_sign"&&(a<r&&(a+=r),a+=4),t==="eth_signTypedData"&&a<r&&(a+=r),e.slice(0,-2)+a.toString(16)},ON=t=>{const e=t;return typeof e=="string"||e.raw?Hd(e):pl(t)},EOe=t=>hr(["uint8","address","uint256","uint256","bytes"],[t.operation,t.to,t.value,BigInt(t.data.slice(2).length/2),t.data]).slice(2),$V=t=>{const e=`0x${t.map(n=>EOe(n)).join("")}`;return qe({abi:DV,functionName:"multiSend",args:[e]})},LV=({safe4337ModuleAddress:t,safeSingletonAddress:e,erc7579LaunchpadAddress:n,owners:r,validators:a,executors:i,fallbacks:s,hooks:o,attesters:c,threshold:d,attestersThreshold:l})=>({singleton:e,owners:r,threshold:d,setupTo:n,setupData:qe({abi:hOe,functionName:"initSafe7579",args:[t,i.map(f=>({module:f.address,initData:f.context})),s.map(f=>({module:f.address,initData:f.context})),o.map(f=>({module:f.address,initData:f.context})),c.sort((f,p)=>f.toLowerCase().localeCompare(p.toLowerCase())),l]}),safe7579:t,validators:a}),BV=async({owners:t,threshold:e,safeModuleSetupAddress:n,safe4337ModuleAddress:r,multiSendAddress:a,safeSingletonAddress:i,erc7579LaunchpadAddress:s,setupTransactions:o=[],safeModules:c=[],validators:d=[],executors:l=[],fallbacks:u=[],hooks:f=[],attesters:p=[],attestersThreshold:h=0,paymentToken:b=Zn,payment:v=BigInt(0),paymentReceiver:m=Zn})=>{if(s){const A=LV({safe4337ModuleAddress:r,safeSingletonAddress:i,erc7579LaunchpadAddress:s,owners:t,validators:d,executors:l,fallbacks:u,threshold:e,hooks:f,attesters:p,attestersThreshold:h}),N=ut(wn([{internalType:"address",name:"singleton",type:"address"},{internalType:"address[]",name:"owners",type:"address[]"},{internalType:"uint256",name:"threshold",type:"uint256"},{internalType:"address",name:"setupTo",type:"address"},{internalType:"bytes",name:"setupData",type:"bytes"},{internalType:"contract ISafe7579",name:"safe7579",type:"address"},{internalType:"struct ModuleInit[]",name:"validators",type:"tuple[]",components:[{internalType:"address",name:"module",type:"address"},{internalType:"bytes",name:"initData",type:"bytes"}]}],[A.singleton,A.owners,A.threshold,A.setupTo,A.setupData,A.safe7579,A.validators.map(R=>({module:R.address,initData:R.context}))]));return qe({abi:bOe,functionName:"preValidationSetup",args:[N,Zn,"0x"]})}const T=$V([{to:n,data:qe({abi:yOe,functionName:"enableModules",args:[[r,...c]]}),value:BigInt(0),operation:1},...o.map(A=>({...A,operation:0}))]);return qe({abi:mOe,functionName:"setup",args:[t,e,a,T,r,b,v,m]})};function _Oe(t){return t.paymaster?rn([t.paymaster,Rn(Sn(t.paymasterVerificationGasLimit||BigInt(0)),{size:16}),Rn(Sn(t.paymasterPostOpGasLimit||BigInt(0)),{size:16}),t.paymasterData||"0x"]):"0x"}const TOe=async({owners:t,threshold:e,safeModuleSetupAddress:n,safe4337ModuleAddress:r,safeSingletonAddress:a,erc7579LaunchpadAddress:i,multiSendAddress:s,paymentToken:o,payment:c,paymentReceiver:d,saltNonce:l=BigInt(0),setupTransactions:u=[],safeModules:f=[],validators:p=[],executors:h=[],fallbacks:b=[],hooks:v=[],attesters:m=[],attestersThreshold:T=0})=>{const A=await BV({owners:t,threshold:e,safeModuleSetupAddress:n,safe4337ModuleAddress:r,multiSendAddress:s,setupTransactions:u,safeSingletonAddress:a,safeModules:f,erc7579LaunchpadAddress:i,validators:p,executors:h,fallbacks:b,hooks:v,attesters:m,attestersThreshold:T,paymentToken:o,payment:c,paymentReceiver:d});return qe({abi:gOe,functionName:"createProxyWithNonce",args:[i??a,A,l]})},FV=(t,e,{addModuleLibAddress:n,safeModuleSetupAddress:r,safe4337ModuleAddress:a,safeProxyFactoryAddress:i,safeSingletonAddress:s,multiSendAddress:o,multiSendCallOnlyAddress:c})=>{const d=r??n??$l[t][e].SAFE_MODULE_SETUP_ADDRESS,l=a??$l[t][e].SAFE_4337_MODULE_ADDRESS,u=i??$l[t][e].SAFE_PROXY_FACTORY_ADDRESS,f=s??$l[t][e].SAFE_SINGLETON_ADDRESS,p=o??$l[t][e].MULTI_SEND_ADDRESS,h=c??$l[t][e].MULTI_SEND_CALL_ONLY_ADDRESS;return{safeModuleSetupAddress:d,safe4337ModuleAddress:l,safeProxyFactoryAddress:u,safeSingletonAddress:f,multiSendAddress:p,multiSendCallOnlyAddress:h}};function MN(t){return t.erc7579LaunchpadAddress!==void 0}const xOe=[{inputs:[],name:"proxyCreationCode",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"pure",type:"function"}],SOe=async({client:t,owners:e,threshold:n,safeModuleSetupAddress:r,safe4337ModuleAddress:a,safeProxyFactoryAddress:i,safeSingletonAddress:s,multiSendAddress:o,erc7579LaunchpadAddress:c,paymentToken:d,payment:l,paymentReceiver:u,setupTransactions:f=[],safeModules:p=[],saltNonce:h=BigInt(0),validators:b=[],executors:v=[],fallbacks:m=[],hooks:T=[],attesters:A=[],attestersThreshold:N=0})=>{const R=await St(t,{abi:xOe,address:i,functionName:"proxyCreationCode"}),B=await BV({owners:e,threshold:n,safeModuleSetupAddress:r,safe4337ModuleAddress:a,multiSendAddress:o,setupTransactions:f,safeSingletonAddress:s,safeModules:p,erc7579LaunchpadAddress:c,validators:b,executors:v,fallbacks:m,hooks:T,attesters:A,attestersThreshold:N,paymentToken:d,payment:l,paymentReceiver:u}),F=hr(["bytes","uint256"],[R,c0(c??s)]),I=ut(hr(["bytes32","uint256"],[ut(hr(["bytes"],[B])),h]));return Nx({from:i,salt:I,bytecode:F,opcode:"CREATE2"})};async function AOe(t){var H,W,K;const{client:e,owners:n,address:r,threshold:a=BigInt(n.length),version:i,safe4337ModuleAddress:s,safeProxyFactoryAddress:o,safeSingletonAddress:c,erc7579LaunchpadAddress:d,saltNonce:l=BigInt(0),validUntil:u=0,validAfter:f=0,nonceKey:p,paymentToken:h,payment:b,paymentReceiver:v,onchainIdentifier:m}=t,T=await Promise.all(n.map(async q=>"account"in q?q.account:"request"in q?zd({owner:q}):q)),A=await Promise.all(n.filter(q=>"type"in q&&q.type==="local"||"request"in q||"account"in q).map(q=>zd({owner:q}))),N={address:((H=t.entryPoint)==null?void 0:H.address)??mh,abi:(((W=t.entryPoint)==null?void 0:W.version)??"0.7")==="0.6"?tm:nm,version:((K=t.entryPoint)==null?void 0:K.version)??"0.7"};let R,B,F,I,P=[],$=[],M=[],y=[],E=[],C=[],g=0;MN(t)||(R=t.safeModuleSetupAddress,B=t.multiSendAddress,F=t.multiSendCallOnlyAddress,I=t.safeModules,P=t.setupTransactions??[]),MN(t)&&($=t.validators??[],M=t.executors??[],y=t.fallbacks??[],E=t.hooks??[],C=t.attesters??[],g=t.attestersThreshold??0);const{safeModuleSetupAddress:x,safe4337ModuleAddress:O,safeProxyFactoryAddress:S,safeSingletonAddress:w,multiSendAddress:_,multiSendCallOnlyAddress:k}=FV(i,N.version,{safeModuleSetupAddress:R,safe4337ModuleAddress:s,safeProxyFactoryAddress:o,safeSingletonAddress:c,multiSendAddress:B,multiSendCallOnlyAddress:F});let L=r,D;const U=async()=>D||(D=e.chain?e.chain.id:await ze(e,mi,"getChainId")({}),D);return Uu({client:e,entryPoint:N,getFactoryArgs:async()=>({factory:S,factoryData:await TOe({owners:T.map(q=>q.address),threshold:a,safeModuleSetupAddress:x,safe4337ModuleAddress:O,safeSingletonAddress:w,multiSendAddress:_,erc7579LaunchpadAddress:d,saltNonce:l,setupTransactions:P,safeModules:I,validators:$,executors:M,fallbacks:y,hooks:E,attesters:C,attestersThreshold:g,paymentToken:h,payment:b,paymentReceiver:v})}),async getAddress(){return L||(L=await SOe({client:e,owners:T.map(q=>q.address),threshold:a,safeModuleSetupAddress:x,safe4337ModuleAddress:O,safeProxyFactoryAddress:S,safeSingletonAddress:w,multiSendAddress:_,erc7579LaunchpadAddress:d,saltNonce:l,setupTransactions:P,safeModules:I,validators:$,executors:M,fallbacks:y,hooks:E,attesters:C,attestersThreshold:g,paymentToken:h,payment:b,paymentReceiver:v}),L)},async encodeCalls(q){const V=q.length>1;if(d){if(!await fOe(e,await this.getAddress())){const ie=LV({safe4337ModuleAddress:O,safeSingletonAddress:w,erc7579LaunchpadAddress:d,owners:T.map(oe=>oe.address),threshold:a,validators:$,executors:M,fallbacks:y,hooks:E,attesters:C,attestersThreshold:g});return qe({abi:AN,functionName:"setupSafe",args:[{...ie,validators:ie.validators.map(oe=>({module:oe.address,initData:oe.context})),callData:G8({mode:{type:V?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:q})}]})}return G8({mode:{type:V?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:q})}let G,J,z,Y=0;if(V)G=k,J=BigInt(0),z=$V(q.map(ae=>({to:ae.to,value:ae.value??0n,data:ae.data??"0x",operation:0}))),Y=1;else{const ae=q.length===0?void 0:q[0];if(!ae)throw new Error("No calls to encode");G=ae.to,z=ae.data??"0x",J=ae.value??0n}const X=qe({abi:CN,functionName:"executeUserOpWithErrorString",args:[G,J,z,Y]});return m?rn([X,m]):X},async decodeCalls(q){try{const Y=jo({abi:AN,data:q});return W8(Y.args[0].callData).callData}catch{}try{return W8(q).callData}catch{}const V=jo({abi:CN,data:q}),G=V.args[0],J=V.args[1],z=V.args[2];if(G===k){const X=jo({abi:DV,data:z}).args[0],ae=[];let ie=0;const oe=An(X);for(;ie<oe;){ie+=1;const ue=Fi(x0(X,ie,ie+20));ie+=20;const Oe=BigInt(x0(X,ie,ie+32));ie+=32;const Re=Number(BigInt(x0(X,ie,ie+32))*BigInt(2));ie+=32;const pe=x0(X,ie,ie+Re);ie+=Re,ae.push({to:ue,value:Oe,data:pe})}return ae}return[{to:G,value:J,data:z}]},async getNonce(q){return gh(e,{address:await this.getAddress(),entryPointAddress:N.address,key:p??(q==null?void 0:q.key)})},async getStubSignature(){return hr(["uint48","uint48","bytes"],[0,0,`0x${T.map(q=>"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").join("")}`])},async sign({hash:q}){return this.signMessage({message:q})},async signMessage({message:q}){if(A.length!==T.length)throw new Error("Owners length mismatch, currently not supported");const V=pl({domain:{chainId:await U(),verifyingContract:await this.getAddress()},types:{SafeMessage:[{name:"message",type:"bytes"}]},primaryType:"SafeMessage",message:{message:ON(q)}}),G=await Promise.all(A.map(async z=>({signer:z.address,data:IN("eth_sign",await z.signMessage({message:{raw:C0(V)}}))})));G.sort((z,Y)=>z.signer.toLowerCase().localeCompare(Y.signer.toLowerCase()));const J=rn(G.map(z=>z.data));return d?rn([Zn,J]):J},async signTypedData(q){if(A.length!==T.length)throw new Error("Owners length mismatch, currently not supported");const V=await Promise.all(A.map(async J=>({signer:J.address,data:IN("eth_signTypedData",await J.signTypedData({domain:{chainId:await U(),verifyingContract:await this.getAddress()},types:{SafeMessage:[{name:"message",type:"bytes"}]},primaryType:"SafeMessage",message:{message:ON(q)}}))})));V.sort((J,z)=>J.signer.toLowerCase().localeCompare(z.signer.toLowerCase()));const G=rn(V.map(J=>J.data));return d?rn([Zn,G]):G},async signUserOperation(q){const{chainId:V=await U(),...G}=q;if(A.length!==T.length)throw new Error("Owners length mismatch use SafeSmartAccount.signUserOperation from `permissionless/accounts/safe`");let J;for(const z of A)J=await pOe({...G,version:i,entryPoint:N,owners:A,account:z,chainId:await U(),signatures:J,validAfter:f,validUntil:u,safe4337ModuleAddress:O});if(!J)throw new Error("No signatures found");return J}})}const F7=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"},{internalType:"enum Operation",name:"",type:"uint8"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct Call[]",name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"}],COe=[{inputs:[{internalType:"contract IKernelValidator",name:"_defaultValidator",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"}],IOe=[{type:"function",name:"initialize",inputs:[{name:"_rootValidator",type:"bytes21",internalType:"ValidationId"},{name:"hook",type:"address",internalType:"contract IHook"},{name:"validatorData",type:"bytes",internalType:"bytes"},{name:"hookData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"}],OOe=[{type:"function",name:"initialize",inputs:[{name:"_rootValidator",type:"bytes21",internalType:"ValidationId"},{name:"hook",type:"address",internalType:"contract IHook"},{name:"validatorData",type:"bytes",internalType:"bytes"},{name:"hookData",type:"bytes",internalType:"bytes"},{name:"initConfig",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"}],MOe=[{type:"function",name:"createAccount",inputs:[{name:"data",type:"bytes",internalType:"bytes"},{name:"salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"payable"}],POe=[{type:"function",name:"deployWithFactory",inputs:[{name:"factory",type:"address",internalType:"contract KernelFactory"},{name:"createData",type:"bytes",internalType:"bytes"},{name:"salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"payable"}],PN="0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c",kOe="0x00000000",UV={ROOT:"0x00",VALIDATOR:"0x01",PERMISSION:"0x02"};var U7;(function(t){t.DEFAULT="0x00",t.ENABLE="0x01"})(U7||(U7={}));const r1=t=>/0\.2\.\d+/.test(t),NOe=({kernelVersion:t,callData:e})=>{if(r1(t)){const n=jo({abi:F7,data:e});if(n.functionName==="executeBatch")return n.args[0].map(r=>({to:r.to,value:r.value,data:r.data}));if(n.functionName==="execute"){const[r,a,i]=n.args;return[{to:r,value:a,data:i}]}throw new Error("Invalid function name")}return W8(e).callData},ROe=({kernelVersion:t,calls:e})=>{if(r1(t)){if(e.length>1)return qe({abi:F7,functionName:"executeBatch",args:[e.map(r=>({to:r.to,value:r.value??0n,data:r.data??"0x"}))]});const n=e.length===0?void 0:e[0];if(!n)throw new Error("No calls to encode");return qe({abi:F7,functionName:"execute",args:[n.to,n.value??0n,n.data??"0x",0]})}return G8({mode:{type:e.length>1?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:e})},DOe=(t,e,n=0n)=>{if(r1(t))return n;if(n>Uxe)throw new Error(`nonce key must be equal or less than 2 bytes(maxUint16) for Kernel version ${t}`);const r=U7.DEFAULT,a=UV.ROOT,i=Rn(k0([r,a,e,Sn(n,{size:2})]),{size:24});return BigInt(i)},ou=t=>t.type==="webAuthn",j7=(t,{accountAddress:e,kernelVersion:n,chainId:r})=>{const a=XK({domain:{name:"Kernel",version:n,chainId:r,verifyingContract:e}}),i=r1(n)?t:ut(wn([{type:"bytes32"},{type:"bytes32"}],[ut(Jo("Kernel(bytes32 hash)")),t]));return ut(k0(["0x1901",a,i]))};async function H7({message:t,owner:e,accountAddress:n,kernelVersion:r,chainId:a}){if(ou(e)){let s;if(typeof t=="string")s=j7(Hd(t),{kernelVersion:r,accountAddress:n,chainId:a});else if("raw"in t&&typeof t.raw=="string")s=t.raw;else if("raw"in t&&t.raw instanceof Uint8Array)s=t.raw.toString();else throw new Error("Unsupported message format");const{signature:o,webauthn:c}=await e.sign({hash:s}),d=MIe(o);return wn([{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"string"},{name:"responseTypeLocation",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"},{name:"usePrecompiled",type:"bool"}],[c.authenticatorData,c.clientDataJSON,BigInt(c.typeIndex),BigInt(d.r),BigInt(d.s),!1])}if(r==="0.2.1"||r==="0.2.2")return e.signMessage({message:t});const i=j7(Hd(t),{kernelVersion:r,accountAddress:n,chainId:a});return e.signMessage({message:{raw:i}})}async function $Oe(t){const{owner:e,accountAddress:n,kernelVersion:r,chainId:a,...i}=t;if((r==="0.2.1"||r==="0.2.2")&&!ou(e))return e.signTypedData({...i});const{message:s,primaryType:o,types:c,domain:d}=i,l={EIP712Domain:hh({domain:d}),...c};Z3({domain:d,message:s,primaryType:o,types:l});const u=pl({message:s,primaryType:o,types:l,domain:d}),f=j7(u,{kernelVersion:r,accountAddress:n,chainId:a});return ou(e)?H7({message:{raw:f},owner:e,accountAddress:n,kernelVersion:r,chainId:a}):e.signMessage({message:{raw:f}})}const LOe=[{inputs:[{internalType:"address",name:"_implementation",type:"address"},{internalType:"bytes",name:"_data",type:"bytes"},{internalType:"uint256",name:"_index",type:"uint256"}],name:"createAccount",outputs:[{internalType:"address",name:"proxy",type:"address"}],stateMutability:"payable",type:"function"}],BOe={"0.2.1":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xf048AD83CB2dfd6037A43902a2A5Be04e53cd2Eb",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.2":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0x0DA6a956B9488eD4dd761E59f52FDc6c8068E6B5",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.3":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xD3F582F6B4814E989Ee8E96bc3175320B5A540ab",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.2.4":{ECDSA_VALIDATOR:"0xd9AB5096a832b9ce79914329DAEE236f8Eea0390",ACCOUNT_LOGIC:"0xd3082872F8B06073A021b4602e022d5A070d7cfC",FACTORY_ADDRESS:"0x5de4839a76cf55d0c90e2061ef4386d962E15ae3"},"0.3.0-beta":{ECDSA_VALIDATOR:"0x8104e3Ad430EA6d354d013A6789fDFc71E671c43",ACCOUNT_LOGIC:"0x94F097E1ebEB4ecA3AAE54cabb08905B239A7D27",FACTORY_ADDRESS:"0x6723b44Abeec4E71eBE3232BD5B455805baDD22f",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5",WEB_AUTHN_VALIDATOR:"0xbA45a2BFb8De3D24cA9D7F1B551E14dFF5d690Fd"},"0.3.1":{ECDSA_VALIDATOR:"0x845ADb2C711129d4f3966735eD98a9F09fC4cE57",ACCOUNT_LOGIC:"0xBAC849bB641841b44E965fB01A4Bf5F074f84b4D",FACTORY_ADDRESS:"0xaac5D4240AF87249B3f71BC8E4A2cae074A3E419",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5",WEB_AUTHN_VALIDATOR:"0xbA45a2BFb8De3D24cA9D7F1B551E14dFF5d690Fd"},"0.3.2":{ECDSA_VALIDATOR:"0x845ADb2C711129d4f3966735eD98a9F09fC4cE57",ACCOUNT_LOGIC:"0xD830D15D3dc0C269F3dBAa0F3e8626d33CFdaBe1",FACTORY_ADDRESS:"0x7a1dBAB750f12a90EB1B60D2Ae3aD17D4D81EfFe",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5"},"0.3.3":{ECDSA_VALIDATOR:"0x845ADb2C711129d4f3966735eD98a9F09fC4cE57",ACCOUNT_LOGIC:"0xE264dCCc54e4b6906c0D1Fee11D4326c06D33c80",FACTORY_ADDRESS:"0xE30c76Dc9eCF1c19F6Fec070674E1b4eFfE069FA",META_FACTORY_ADDRESS:"0xd703aaE79538628d27099B8c4f621bE4CCd142d5"}},FOe=(t,e)=>e||(t==="0.6"?"0.2.2":"0.3.0-beta"),UOe=({validatorAddress:t,accountLogicAddress:e,factoryAddress:n,metaFactoryAddress:r,kernelVersion:a,isWebAuthn:i})=>{const s=BOe[a],o=t??(i?s.WEB_AUTHN_VALIDATOR:s.ECDSA_VALIDATOR),c=e??s.ACCOUNT_LOGIC,d=n??s.FACTORY_ADDRESS,l=r??(s==null?void 0:s.META_FACTORY_ADDRESS)??Zn;return{validatorAddress:o,accountLogicAddress:c,factoryAddress:d,metaFactoryAddress:l}},Y8=t=>k0([UV.VALIDATOR,t]),jOe=({entryPoint:{version:t},kernelVersion:e,validatorData:n,validatorAddress:r})=>qe(t==="0.6"?{abi:COe,functionName:"initialize",args:[r,n]}:e==="0.3.0-beta"?{abi:IOe,functionName:"initialize",args:[Y8(r),Zn,n,"0x"]}:{abi:OOe,functionName:"initialize",args:[Y8(r),Zn,n,"0x",[]]}),HOe=async t=>{if(t.type==="local")return t.address;if(ou(t)){const e=ZAe(t.publicKey),n=ut(gp(OIe(t.id)));return wn([{components:[{name:"x",type:"uint256"},{name:"y",type:"uint256"}],name:"webAuthnData",type:"tuple"},{name:"authenticatorIdHash",type:"bytes32"}],[{x:e.x,y:e.y},n])}throw new Error("Invalid owner type")},zOe=async({entryPointVersion:t,kernelVersion:e,validatorData:n,index:r,factoryAddress:a,accountLogicAddress:i,validatorAddress:s,useMetaFactory:o})=>{const c=jOe({entryPoint:{version:t},kernelVersion:e,validatorAddress:s,validatorData:n});return qe(t==="0.6"?{abi:LOe,functionName:"createAccount",args:[i,c,r]}:o?{abi:POe,functionName:"deployWithFactory",args:[a,c,Sn(r,{size:32})]}:{abi:MOe,functionName:"createAccount",args:[c,Sn(r,{size:32})]})};async function qOe(t){var P,$,M;const{client:e,address:n,index:r=0n,owners:a,version:i,validatorAddress:s,factoryAddress:o,metaFactoryAddress:c,accountLogicAddress:d,useMetaFactory:l=!0}=t,u=a[0].type==="webAuthn",f=u?a[0]:await zd({owner:a[0]}),p={address:((P=t.entryPoint)==null?void 0:P.address)??mh,abi:((($=t.entryPoint)==null?void 0:$.version)??"0.7")==="0.6"?tm:nm,version:((M=t.entryPoint)==null?void 0:M.version)??"0.7"},h=FOe(p.version,i),{accountLogicAddress:b,validatorAddress:v,factoryAddress:m,metaFactoryAddress:T}=UOe({validatorAddress:s,accountLogicAddress:d,factoryAddress:o,metaFactoryAddress:c,kernelVersion:h,isWebAuthn:u});if(!v)throw new Error("Validator address is required");const A=async y=>zOe({entryPointVersion:p.version,kernelVersion:h,validatorData:await HOe(f),index:r,factoryAddress:m,accountLogicAddress:b,validatorAddress:v,useMetaFactory:y});let N;const R=async()=>N||(N=e.chain?e.chain.id:await ze(e,mi,"getChainId")({}),N),B=y=>async()=>({factory:p.version==="0.6"||y===!1?m:T,factoryData:await A(y)}),{accountAddress:F,getFactoryArgs:I}=await(async()=>{let y=B(l==="optional"?!0:l);if(n&&l!=="optional")return{accountAddress:n,getFactoryArgs:y};const{factory:E,factoryData:C}=await y();let g=await B7(e,{factory:E,factoryData:C,entryPointAddress:p.address});if(n===g)return{accountAddress:g,getFactoryArgs:y};if(l==="optional"&&g===Zn){y=B(!1);const{factory:x,factoryData:O}=await y();g=await B7(e,{factory:x,factoryData:O,entryPointAddress:p.address})}return{accountAddress:g,getFactoryArgs:y}})();return Uu({client:e,entryPoint:p,getFactoryArgs:I,async getAddress(){return F},async encodeCalls(y){return ROe({calls:y,kernelVersion:h})},async decodeCalls(y){return NOe({callData:y,kernelVersion:h})},async getNonce(y){return gh(e,{address:await this.getAddress(),entryPointAddress:p.address,key:DOe(h,v,t.nonceKey??0n)})},async getStubSignature(){return r1(h)?k0([kOe,PN]):ou(f)?wn([{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"string"},{name:"responseTypeLocation",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"},{name:"usePrecompiled",type:"bool"}],["0x49960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97631d00000000",'{"type":"webauthn.get","challenge":"tbxXNFS9X_4Byr1cMwqKrIGB-_30a0QhZ6y7ucM0BOE","origin":"http://localhost:3000","crossOrigin":false, "other_keys_can_be_added_here":"do not compare clientDataJSON against a template. See https://goo.gl/yabPex"}',1n,44941127272049826721201904734628716258498742255959991581049806490182030242267n,9910254599581058084911561569808925251374718953855182016200087235935345969636n,!1]):PN},async sign({hash:y}){return this.signMessage({message:y})},async signMessage({message:y}){const E=await H7({owner:f,message:y,accountAddress:await this.getAddress(),kernelVersion:h==="0.3.3"?"0.3.2":h,chainId:await R()});return r1(h)?E:k0([Y8(v),E])},async signTypedData(y){const E=await $Oe({owner:f,chainId:await R(),...y,accountAddress:await this.getAddress(),kernelVersion:h==="0.3.3"?"0.3.2":h});return r1(h)?E:k0([Y8(v),E])},async signUserOperation(y){const{chainId:E=await R(),...C}=y,g=rm({userOperation:{...C,sender:C.sender??await this.getAddress(),signature:"0x"},entryPointAddress:p.address,entryPointVersion:p.version,chainId:E}),x=ou(f)?await H7({owner:f,message:{raw:g},chainId:E,accountAddress:await this.getAddress(),kernelVersion:h}):await f.signMessage({message:{raw:g}});return r1(h)?k0(["0x00000000",x]):x}})}async function KOe(t){return qOe({...t,validatorAddress:t.validatorAddress??t.ecdsaValidatorAddress})}const VOe=[{inputs:[{internalType:"address",name:"moduleSetupContract",type:"address"},{internalType:"bytes",name:"moduleSetupData",type:"bytes"},{internalType:"uint256",name:"index",type:"uint256"}],name:"deployCounterFactualAccount",outputs:[{internalType:"address",name:"proxy",type:"address"}],stateMutability:"nonpayable",type:"function"}],T6=[{inputs:[{internalType:"address",name:"handler",type:"address"},{internalType:"address",name:"moduleSetupContract",type:"address"},{internalType:"bytes",name:"moduleSetupData",type:"bytes"}],name:"init",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"eoaOwner",type:"address"}],name:"initForSmartAccount",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"dest",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"func",type:"bytes"}],name:"execute_ncC",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"dest",type:"address[]"},{internalType:"uint256[]",name:"value",type:"uint256[]"},{internalType:"bytes[]",name:"func",type:"bytes[]"}],name:"executeBatch_y6U",outputs:[],stateMutability:"nonpayable",type:"function"}],WOe="0x6080346100aa57601f61012038819003918201601f19168301916001600160401b038311848410176100af578084926020946040528339810103126100aa57516001600160a01b0381168082036100aa5715610065573055604051605a90816100c68239f35b60405162461bcd60e51b815260206004820152601e60248201527f496e76616c696420696d706c656d656e746174696f6e206164647265737300006044820152606490fd5b600080fd5b634e487b7160e01b600052604160045260246000fdfe608060405230546000808092368280378136915af43d82803e156020573d90f35b3d90fdfea2646970667358221220a03b18dce0be0b4c9afe58a9eb85c35205e2cf087da098bbf1d23945bf89496064736f6c63430008110033",Ib={ECDSA_OWNERSHIP_REGISTRY_MODULE:"0x0000001c5b32F37F5beA87BDD5374eB2aC54eA8e",FACTORY_ADDRESS:"0x000000a56Aaca3e9a4C479ea6b6CD0DbcB6634F5",ACCOUNT_V2_0_LOGIC:"0x0000002512019Dafb59528B82CB92D3c5D2423aC",DEFAULT_FALLBACK_HANDLER_ADDRESS:"0x0bBa6d96BD616BedC6BFaa341742FD43c60b83C1"},GOe=async({owner:t,index:e,ecdsaModuleAddress:n})=>{if(!t)throw new Error("Owner account not found");const r=qe({abi:T6,functionName:"initForSmartAccount",args:[t]});return qe({abi:VOe,functionName:"deployCounterFactualAccount",args:[n,r,e]})},YOe=async({factoryAddress:t,accountLogicAddress:e,fallbackHandlerAddress:n,ecdsaModuleAddress:r,owner:a,index:i=BigInt(0)})=>{const s=qe({abi:T6,functionName:"initForSmartAccount",args:[a]}),o=qe({abi:T6,functionName:"init",args:[n,r,s]}),c=hr(["bytes","uint256"],[WOe,c0(e)]),d=ut(hr(["bytes32","uint256"],[ut(hr(["bytes"],[o])),i]));return Nx({from:t,salt:d,bytecode:c,opcode:"CREATE2"})};async function JOe(t){var p,h;const{owners:e,client:n,index:r=0n,address:a,accountLogicAddress:i=Ib.ACCOUNT_V2_0_LOGIC,fallbackHandlerAddress:s=Ib.DEFAULT_FALLBACK_HANDLER_ADDRESS,ecdsaModuleAddress:o=Ib.ECDSA_OWNERSHIP_REGISTRY_MODULE,factoryAddress:c=Ib.FACTORY_ADDRESS}=t,d=await zd({owner:e[0]}),l={address:((p=t.entryPoint)==null?void 0:p.address)??im,abi:tm,version:((h=t.entryPoint)==null?void 0:h.version)??"0.6"};let u=a;return Uu({client:n,entryPoint:l,getFactoryArgs:async()=>({factory:c,factoryData:await GOe({owner:d.address,index:r,ecdsaModuleAddress:o})}),async getAddress(){return u||(u=await YOe({owner:d.address,ecdsaModuleAddress:o,factoryAddress:c,accountLogicAddress:i,fallbackHandlerAddress:s,index:r}),u)},async getNonce(b){const v=await this.getAddress();return gh(n,{address:v,entryPointAddress:l.address,key:(t==null?void 0:t.nonceKey)??(b==null?void 0:b.key)})},encodeCalls:async b=>{if(b.length>1)return qe({abi:T6,functionName:"executeBatch_y6U",args:[b.map(m=>m.to),b.map(m=>m.value??0n),b.map(m=>m.data??"0x")]});const v=b.length===0?void 0:b[0];if(!v)throw new Error("No calls to encode");return qe({abi:T6,functionName:"execute_ncC",args:[v.to,v.value??0n,v.data??"0x"]})},decodeCalls:async b=>{const v=jo({abi:T6,data:b});if(v.functionName==="execute_ncC")return[{to:v.args[0],value:v.args[1],data:v.args[2]}];if(v.functionName==="executeBatch_y6U"){const m=[];for(let T=0;T<v.args[0].length;T++)m.push({to:v.args[0][T],value:v.args[1][T],data:v.args[2][T]});return m}throw new Error("Invalid function name")},async getStubSignature(){return`0x0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000${o.substring(2).padEnd(40,"0")}000000000000000000000000000000000000000000000000000000000000004181d4b4981670cb18f99f0b4a66446df1bf5b204d24cfcb659bf38ba27a4359b5711649ec2423c5e1247245eba2964679b6a1dbb85c992ae40b9b00c6935b02ff1b00000000000000000000000000000000000000000000000000000000000000`},async sign({hash:b}){return this.signMessage({message:b})},async signMessage({message:b}){let v=await d.signMessage({message:b});const m=Number.parseInt(v.slice(-2),16);if(![27,28].includes(m)){const T=m+27;v=v.slice(0,-2)+T.toString(16)}return wn([{type:"bytes"},{type:"address"}],[v,o])},async signTypedData(b){let v=await d.signTypedData(b);const m=Number.parseInt(v.slice(-2),16);if(![27,28].includes(m)){const T=m+27;v=v.slice(0,-2)+T.toString(16)}return wn([{type:"bytes"},{type:"address"}],[v,o])},async signUserOperation(b){var R;const{chainId:v=(R=n.chain)==null?void 0:R.id,...m}=b;if(!v)throw new Error("Chain id not found");const T=rm({userOperation:{...m,sender:m.sender??await this.getAddress(),signature:"0x"},entryPointAddress:l.address,entryPointVersion:l.version,chainId:v}),A=await zx(n,{account:d,message:{raw:T}});return wn(LH("bytes, address"),[A,o])}})}const kN=(t,{accountAddress:e,version:n,chainId:r})=>{const a=XK({domain:{name:"Nexus",version:n,chainId:r,verifyingContract:e}}),i=ut(wn([{type:"bytes32"},{type:"bytes32"}],[ut(Jo("PersonalSign(bytes prefixed)")),t]));return ut(k0(["0x1901",a,i]))},NN={K1_VALIDATOR_FACTORY_ADDRESS:"0x00000bb19a3579F4D779215dEf97AFbd0e30DB55",K1_VALIDATOR_ADDRESS:"0x00000004171351c442B202678c48D8AB5B321E8f"};async function ZOe(t){var v,m;const{owners:e,client:n,index:r=0n,address:a,version:i,factoryAddress:s=NN.K1_VALIDATOR_FACTORY_ADDRESS,validatorAddress:o=NN.K1_VALIDATOR_ADDRESS,attesters:c=[],threshold:d=0}=t,l=await zd({owner:e[0]}),u={address:((v=t.entryPoint)==null?void 0:v.address)??mh,abi:nm,version:((m=t.entryPoint)==null?void 0:m.version)??"0.7"};let f=a;const p=async()=>({factory:s,factoryData:qe({abi:[{name:"createAccount",type:"function",stateMutability:"nonpayable",inputs:[{type:"address",name:"eoaOwner"},{type:"uint256",name:"index"},{type:"address[]",name:"attesters"},{type:"uint8",name:"threshold"}],outputs:[{type:"address"}]}],functionName:"createAccount",args:[l.address,r,c.sort((T,A)=>T.toLowerCase().localeCompare(A.toLowerCase())),d]})});let h;const b=async()=>h||(h=n.chain?n.chain.id:await ze(n,mi,"getChainId")({}),h);return Uu({client:n,entryPoint:u,getFactoryArgs:p,async getAddress(){return f||(f=await St(n,{address:s,abi:[{name:"computeAccountAddress",type:"function",stateMutability:"view",inputs:[{type:"address",name:"eoaOwner"},{type:"uint256",name:"index"},{type:"address[]",name:"attesters"},{type:"uint8",name:"threshold"}],outputs:[{type:"address"}]}],functionName:"computeAccountAddress",args:[l.address,r,c.sort((T,A)=>T.toLowerCase().localeCompare(A.toLowerCase())),d]}),f)},async getNonce(T){const N=((T==null?void 0:T.key)??0n)%16777215n,B=rn([Sn(N,{size:3}),"0x00",o]),F=await this.getAddress();return gh(n,{address:F,entryPointAddress:u.address,key:BigInt(B)})},encodeCalls:async T=>G8({mode:{type:T.length>1?"batchcall":"call",revertOnError:!1,selector:"0x",context:"0x"},callData:T}),async decodeCalls(T){return W8(T).callData},async getStubSignature(){return`0x0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000${o.substring(2).padEnd(40,"0")}000000000000000000000000000000000000000000000000000000000000004181d4b4981670cb18f99f0b4a66446df1bf5b204d24cfcb659bf38ba27a4359b5711649ec2423c5e1247245eba2964679b6a1dbb85c992ae40b9b00c6935b02ff1b00000000000000000000000000000000000000000000000000000000000000`},async sign({hash:T}){return this.signMessage({message:T})},async signMessage({message:T}){const A=kN(Hd(T),{version:i,accountAddress:await this.getAddress(),chainId:await b()}),N=await l.signMessage({message:{raw:A}});return hr(["address","bytes"],[o,N])},async signTypedData(T){const{message:A,primaryType:N,types:R,domain:B}=T,F={EIP712Domain:hh({domain:B}),...R};Z3({domain:B,message:A,primaryType:N,types:F});const I=pl({message:A,primaryType:N,types:F,domain:B}),P=kN(I,{version:i,accountAddress:await this.getAddress(),chainId:await b()}),$=await l.signMessage({message:{raw:P}});return hr(["address","bytes"],[o,$])},async signUserOperation(T){const{chainId:A=await b(),...N}=T;if(!A)throw new Error("Chain id not found");const R=rm({userOperation:{...N,sender:N.sender??await this.getAddress(),signature:"0x"},entryPointAddress:u.address,entryPointVersion:u.version,chainId:A});return await l.signMessage({message:{raw:R}})}})}class Wx{constructor(e){re(this,"name",xr.BICONOMY),re(this,"options",void 0),this.options=e}async getSmartAccount(e){var n,r;return JOe(Q(Q(Q({},this.options||{}),{},{entryPoint:{address:((n=this.options)===null||n===void 0||(n=n.entryPoint)===null||n===void 0?void 0:n.address)||im,version:((r=this.options)===null||r===void 0||(r=r.entryPoint)===null||r===void 0?void 0:r.version)||"0.6"}},e),{},{owners:[e.walletClient],client:e.client}))}}class Gx{constructor(e){re(this,"name",xr.KERNEL),re(this,"options",void 0),this.options=e}async getSmartAccount(e){return KOe(Q(Q(Q({},this.options||{}),e),{},{owners:[e.walletClient],client:e.client}))}}var XOe=Object.defineProperty,qt=(t,e)=>{for(var n in e)XOe(t,n,{get:e[n],enumerable:!0})},ma={DelegationManager:"0xdb9B1e94B5b69Df7e401DDbedE43491141047dB3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x69Aa2f9fe1572F1B640E1bbc512f5c3a734fc77c",MultiSigDeleGatorImpl:"0x56a9EdB16a0105eb5a4C54f4C062e2868844f3A7",HybridDeleGatorImpl:"0x48dBe696A4D990079e039489bA2053B36E8FFEC4",EIP7702StatelessDeleGatorImpl:"0x63c0c19a282a1B52b07dD5a65b58948A07DAE32B",AllowedCalldataEnforcer:"0xc2b0d624c1c4319760C96503BA27C347F3260f55",AllowedMethodsEnforcer:"0x2c21fD0Cb9DC8445CB3fb0DC5E7Bb0Aca01842B5",AllowedTargetsEnforcer:"0x7F20f61b1f09b08D970938F6fa563634d65c4EeB",BlockNumberEnforcer:"0x5d9818dF0AE3f66e9c3D0c5029DAF99d1823ca6c",DeployedEnforcer:"0x24ff2AA430D53a8CD6788018E902E098083dcCd2",ERC20BalanceChangeEnforcer:"0xcdF6aB796408598Cea671d79506d7D48E97a5437",ERC20TransferAmountEnforcer:"0xf100b0819427117EcF76Ed94B358B1A5b5C6D2Fc",ERC20PeriodTransferEnforcer:"0x474e3Ae7E169e940607cC624Da8A15Eb120139aB",ERC20StreamingEnforcer:"0x56c97aE02f233B29fa03502Ecc0457266d9be00e",ERC721BalanceChangeEnforcer:"0x8aFdf96eDBbe7e1eD3f5Cd89C7E084841e12A09e",ERC721TransferEnforcer:"0x3790e6B7233f779b09DA74C72b6e94813925b9aF",ERC1155BalanceChangeEnforcer:"0x63c322732695cAFbbD488Fc6937A0A7B66fC001A",ExactCalldataBatchEnforcer:"0x982FD5C86BBF425d7d1451f974192d4525113DfD",ExactCalldataEnforcer:"0x99F2e9bF15ce5eC84685604836F71aB835DBBdED",ExactExecutionBatchEnforcer:"0x1e141e455d08721Dd5BCDA1BaA6Ea5633Afd5017",ExactExecutionEnforcer:"0x146713078D39eCC1F5338309c28405ccf85Abfbb",IdEnforcer:"0xC8B5D93463c893401094cc70e66A206fb5987997",LimitedCallsEnforcer:"0x04658B29F6b82ed55274221a06Fc97D318E25416",NativeBalanceChangeEnforcer:"0xbD7B277507723490Cd50b12EaaFe87C616be6880",ArgsEqualityCheckEnforcer:"0x44B8C6ae3C304213c3e298495e12497Ed3E56E41",NativeTokenPaymentEnforcer:"0x4803a326ddED6dDBc60e659e5ed12d85c7582811",NativeTokenTransferAmountEnforcer:"0xF71af580b9c3078fbc2BBF16FbB8EEd82b330320",NativeTokenStreamingEnforcer:"0xD10b97905a320b13a0608f7E9cC506b56747df19",NativeTokenPeriodTransferEnforcer:"0x9BC0FAf4Aca5AE429F4c06aEEaC517520CB16BD9",NonceEnforcer:"0xDE4f2FAC4B3D87A1d9953Ca5FC09FCa7F366254f",OwnershipTransferEnforcer:"0x7EEf9734E7092032B5C56310Eb9BbD1f4A524681",RedeemerEnforcer:"0xE144b0b2618071B4E56f746313528a669c7E65c5",SpecificActionERC20TransferBatchEnforcer:"0x00e0251aaA263dfE3B3541B758A82D1CBA1c3B6D",TimestampEnforcer:"0x1046bb45C8d673d4ea75321280DB34899413c069",ValueLteEnforcer:"0x92Bf12322527cAA612fd31a0e810472BBB106A8F",MultiTokenPeriodEnforcer:"0xFB2f1a9BD76d3701B730E5d69C3219D42D80eBb7"},Tc={DelegationManager:"0x56D56e07e3d6Ee5a24e30203A37a0a460f42D7A3",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0xd1f421EDbA5e3FA9efe3874827114b20C5BEC40C",HybridDeleGatorImpl:"0x941f3a016F8726d5643Ce62452d0D78492D42b42",AllowedCalldataEnforcer:"0xff71d60f3208469cBCE0859717B5198042DCB3F3",AllowedMethodsEnforcer:"0xe32C2561792e8446Abe73B9f557B881C13906186",AllowedTargetsEnforcer:"0x06aaE4c67EEA95277c46Bf79b1583d4a01772D22",BlockNumberEnforcer:"0x8E470D2Ae278457b42d2405E0B8Cd4BE21Ed9045",DeployedEnforcer:"0xf9088f013dBD9ebb7Cebd66fEB48253c6Ac5a820",ERC20BalanceGteEnforcer:"0xB7B6f32ec6343261D814e55Ed8C5925d91Cab861",ERC20TransferAmountEnforcer:"0x9A069b18032B31429A363AeCFb1B6A0564b44471",IdEnforcer:"0x91015c3b9D9523966eD2399885e5Df7A567f916c",LimitedCallsEnforcer:"0xe694bFfffEA3E85923b1210b37e6a0175e910863",NonceEnforcer:"0xE83BCFD8bBE672A96747e831050a91cf44F4F87A",TimestampEnforcer:"0x550FdD13eEBC1f22ea2a2480024BacBF0Ad7e5CE",ValueLteEnforcer:"0xBE32a6DB7471F63BB168C088c57Db01AfAe87967",NativeTokenTransferAmountEnforcer:"0x5eD3833d7B957A8DB8A461c3AF2d668Ec25382E0",NativeBalanceGteEnforcer:"0x376a98860E210DdEda3689fb39565592c563cB0A",ArgsEqualityCheckEnforcer:"0x7378dE585998d3E18Ce147867C335C25B3dB8Ee5",NativeTokenPaymentEnforcer:"0x87Fe18EbF99e42fcE8A03a25F1d20E119407f8e7",RedeemerEnforcer:"0x926672b130D1EF60A9d6b11D2048d121b30f40C1"},R1={DelegationManager:"0xbe4138886cb096bdc1b930f2f0ca7892aa234d78",EntryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",SimpleFactory:"0x6ff518884f21168c30c58CB21184D6AdBC18Ad90",MultiSigDeleGatorImpl:"0x11f555af5844d85bfcf5d61d2a22866527eb585a",HybridDeleGatorImpl:"0xd6edd1256deccb2b06bdecef92dc16bcf26e531b",AllowedCalldataEnforcer:"0x48db3835a873d64a4af2c09f014052407c003bd7",AllowedMethodsEnforcer:"0xfd731951bf1c52afccee3e6f14ab656475b76dd4",AllowedTargetsEnforcer:"0xbc8673c0afa52d86d991c06881e55b2966920564",BlockNumberEnforcer:"0xc15faffa0d879b9263c15a46ce31eacfa2e0e8ae",DeployedEnforcer:"0x5accb9559b56a6c1e3f90e342c85c42d93720d43",ERC20BalanceGteEnforcer:"0xb5d6b1ec6d868a3bae5b7f48178eaa2686a7a087",ERC20TransferAmountEnforcer:"0x92ac423b9c111962179a6242e1adb58d02c103be",IdEnforcer:"0x34152d9f3f8f74338d50703e780389e829b4abac",LimitedCallsEnforcer:"0x4b3adad4a328bee8ba17b86074d92fe7372180cd",NonceEnforcer:"0x2f32ff3fc3086d7f63f16fe8d0065390d460b40d",TimestampEnforcer:"0x78e05f779490c24bf3bfa135b4112e7003b321cd",ValueLteEnforcer:"0xfc20ede0a1132e839fbda9d7ed3904ff3c89540f"},an={mainnet:1,polygon:137,bsc:56,optimism:10,arbitrum:42161,linea:59144,base:8453,gnosis:100,sepolia:11155111,lineaSepolia:59141,baseSepolia:84532,megaEthTestnet:6342,chiado:10200,lineaGoerli:59140},QOe={"1.0.0":{[an.optimism]:R1,[an.polygon]:R1,[an.base]:R1,[an.arbitrum]:R1,[an.linea]:R1,[an.sepolia]:{...R1,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"},[an.lineaSepolia]:{...R1,HybridDeleGatorImpl:"0x5989F5D13DF8fc818EdA65e417AED90459fD67F7"}},"1.1.0":{[an.arbitrum]:Tc,[an.base]:Tc,[an.linea]:Tc,[an.optimism]:Tc,[an.polygon]:Tc,[an.sepolia]:Tc,[an.lineaSepolia]:Tc,[an.baseSepolia]:{...Tc,SimpleFactory:"0xE8eA1DE8D6AfE400B7C8C1A81B7C29B7876b4d02"}},"1.3.0":{[an.mainnet]:ma,[an.polygon]:ma,[an.bsc]:ma,[an.optimism]:ma,[an.arbitrum]:ma,[an.linea]:ma,[an.base]:ma,[an.gnosis]:ma,[an.sepolia]:ma,[an.lineaSepolia]:ma,[an.baseSepolia]:ma,[an.megaEthTestnet]:ma,[an.chiado]:ma}},eMe=Object.defineProperty,we=(t,e)=>{for(var n in e)eMe(t,n,{get:e[n],enumerable:!0})},tMe={};we(tMe,{abi:()=>nMe,bytecode:()=>rMe});var nMe=[{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AddressInsufficientBalance",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"FailedInnerCall",inputs:[]}],rMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212204a050c4fa34153d3fae9d282b8c08f593842bb7e1d0caa440348574559167b6a64736f6c63430008170033",aMe={};we(aMe,{abi:()=>iMe,bytecode:()=>sMe});var iMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedMethods_",type:"bytes4[]",internalType:"bytes4[]"}],stateMutability:"pure"}],sMe="0x608060405234801561001057600080fd5b506107fc806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610512565b50505050505050505050565b005b610076610086366004610512565b6100b4565b61009e6100993660046105df565b610197565b6040516100ab9190610621565b60405180910390f35b856100c08160006102e5565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101228160006102e5565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b506101898c8c89896102fc565b505050505050505050505050565b60606000826101a7600482610685565b1580156101b357508015155b6102135760405162461bcd60e51b815260206004820152602b60248201527f416c6c6f7765644d6574686f6473456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b6064820152608401610108565b61021e6004826106af565b67ffffffffffffffff811115610236576102366106c3565b60405190808252806020026020018201604052801561025f578160200160208202803683370190505b50925060005b818110156102dc5785818661027b8260046106d9565b92610288939291906106ec565b61029191610716565b8484815181106102a3576102a3610746565b6001600160e01b031990921660209283029190910190910152826102c68161075c565b93506102d590506004826106d9565b9050610265565b50505092915050565b6001600160f81b0319828116908216145b92915050565b366000610309848461045c565b90945092505050600481101561037e5760405162461bcd60e51b815260206004820152603460248201527f416c6c6f7765644d6574686f6473456e666f726365723a696e76616c69642d656044820152730f0cac6eae8d2dedc5ac8c2e8c25ad8cadccee8d60631b6064820152608401610108565b600061038d60048284866106ec565b61039691610716565b905060006103a48888610197565b805190915060005b818110156103fb578281815181106103c6576103c6610746565b60200260200101516001600160e01b031916846001600160e01b031916036103f357505050505050610456565b6001016103ac565b5060405162461bcd60e51b815260206004820152602960248201527f416c6c6f7765644d6574686f6473456e666f726365723a6d6574686f642d6e6f6044820152681d0b585b1b1bddd95960ba1b6064820152608401610108565b50505050565b600080368161046e60148287896106ec565b61047791610775565b60601c935061048a6034601487896106ec565b610493916107a8565b92506104a285603481896106ec565b949793965094505050565b60008083601f8401126104bf57600080fd5b50813567ffffffffffffffff8111156104d757600080fd5b6020830191508360208285010111156104ef57600080fd5b9250929050565b80356001600160a01b038116811461050d57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561053157600080fd5b8a3567ffffffffffffffff8082111561054957600080fd5b6105558e838f016104ad565b909c509a5060208d013591508082111561056e57600080fd5b61057a8e838f016104ad565b909a50985060408d0135975060608d013591508082111561059a57600080fd5b506105a78d828e016104ad565b90965094505060808b013592506105c060a08c016104f6565b91506105ce60c08c016104f6565b90509295989b9194979a5092959850565b600080602083850312156105f257600080fd5b823567ffffffffffffffff81111561060957600080fd5b610615858286016104ad565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b818110156106635783516001600160e01b0319168352928401929184019160010161063d565b50909695505050505050565b634e487b7160e01b600052601260045260246000fd5b6000826106945761069461066f565b500690565b634e487b7160e01b600052601160045260246000fd5b6000826106be576106be61066f565b500490565b634e487b7160e01b600052604160045260246000fd5b808201808211156102f6576102f6610699565b600080858511156106fc57600080fd5b8386111561070957600080fd5b5050820193919092039150565b6001600160e01b0319813581811691600485101561073e5780818660040360031b1b83161692505b505092915050565b634e487b7160e01b600052603260045260246000fd5b60006001820161076e5761076e610699565b5060010190565b6bffffffffffffffffffffffff19813581811691601485101561073e5760149490940360031b84901b1690921692915050565b803560208310156102f657600019602084900360031b1b169291505056fea26469706673582212200b708c0be5e7b588370a3a50ea4c9e1f7cb79f4e1abc8d9c979a4f6d6867e5ae64736f6c63430008170033",oMe={};we(oMe,{abi:()=>cMe,bytecode:()=>dMe});var cMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedTargets_",type:"address[]",internalType:"address[]"}],stateMutability:"pure"}],dMe="0x608060405234801561001057600080fd5b50610736806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a36600461047b565b50505050505050505050565b005b61007661008636600461047b565b6100b4565b61009e610099366004610548565b61025e565b6040516100ab919061058a565b60405180910390f35b856100c08160006103ae565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101228160006103ae565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b50600061018988886103c5565b5050509050600061019a8e8e61025e565b805190915060005b818110156101ed578281815181106101bc576101bc6105d7565b60200260200101516001600160a01b0316846001600160a01b0316036101e55750505050610250565b6001016101a2565b5060405162461bcd60e51b815260206004820152603160248201527f416c6c6f77656454617267657473456e666f726365723a7461726765742d6164604482015270191c995cdccb5b9bdd0b585b1b1bddd959607a1b6064820152608401610108565b505050505050505050505050565b606060008261026e601482610603565b15801561027a57508015155b6102da5760405162461bcd60e51b815260206004820152602b60248201527f416c6c6f77656454617267657473456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b6064820152608401610108565b6102e560148261062d565b67ffffffffffffffff8111156102fd576102fd610641565b604051908082528060200260200182016040528015610326578160200160208202803683370190505b50925060005b818110156103a557858186610342826014610657565b9261034f9392919061066a565b61035891610694565b60601c84848151811061036d5761036d6105d7565b6001600160a01b03909216602092830291909101909101528261038f816106c9565b935061039e9050601482610657565b905061032c565b50505092915050565b6001600160f81b0319828116908216145b92915050565b60008036816103d7601482878961066a565b6103e091610694565b60601c93506103f360346014878961066a565b6103fc916106e2565b925061040b856034818961066a565b949793965094505050565b60008083601f84011261042857600080fd5b50813567ffffffffffffffff81111561044057600080fd5b60208301915083602082850101111561045857600080fd5b9250929050565b80356001600160a01b038116811461047657600080fd5b919050565b60008060008060008060008060008060e08b8d03121561049a57600080fd5b8a3567ffffffffffffffff808211156104b257600080fd5b6104be8e838f01610416565b909c509a5060208d01359150808211156104d757600080fd5b6104e38e838f01610416565b909a50985060408d0135975060608d013591508082111561050357600080fd5b506105108d828e01610416565b90965094505060808b0135925061052960a08c0161045f565b915061053760c08c0161045f565b90509295989b9194979a5092959850565b6000806020838503121561055b57600080fd5b823567ffffffffffffffff81111561057257600080fd5b61057e85828601610416565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b818110156105cb5783516001600160a01b0316835292840192918401916001016105a6565b50909695505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601260045260246000fd5b600082610612576106126105ed565b500690565b634e487b7160e01b600052601160045260246000fd5b60008261063c5761063c6105ed565b500490565b634e487b7160e01b600052604160045260246000fd5b808201808211156103bf576103bf610617565b6000808585111561067a57600080fd5b8386111561068757600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156106c15780818660140360031b1b83161692505b505092915050565b6000600182016106db576106db610617565b5060010190565b803560208310156103bf57600019602084900360031b1b169291505056fea2646970667358221220192854344f7cbe5e3a46630068ff1c57d1382d110f4c7dae36ce8f18206bd1c864736f6c63430008170033",lMe={};we(lMe,{abi:()=>uMe,bytecode:()=>fMe});var uMe=[],fMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122088f05df9a321ebbfd15b9ae491704455fd55c5a0ef490ba4f3111c5cd7aa944764736f6c63430008170033",pMe={};we(pMe,{abi:()=>hMe,bytecode:()=>bMe});var hMe=[],bMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220ba35151db75ea04dd32865d4b2bd18ac453d87dfd60b81ec325260f801c1709564736f6c63430008170033",yMe={};we(yMe,{abi:()=>mMe,bytecode:()=>gMe});var mMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"DifferentArgsAndTerms",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"terms",type:"bytes",indexed:!1,internalType:"bytes"},{name:"args",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1}],gMe="0x608060405234801561001057600080fd5b506103b7806100206000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c8063414c3e3314610051578063a145832a1461006d578063d3eddcc514610051578063ed46336714610051575b600080fd5b61006b61005f366004610249565b50505050505050505050565b005b61006b61007b366004610249565b85600881901b6001600160f81b03198116156100ec5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5088886040516100fd929190610316565b60405180910390208b8b604051610115929190610316565b6040518091039020146101d75783826001600160a01b0316336001600160a01b03167f07fc5f2898fc1f1cf9d6012177b7abb8d010b9e64055979af3a5bcd274e2a11a8e8e8e8e60405161016c949392919061034f565b60405180910390a460405162461bcd60e51b815260206004820152603260248201527f41726773457175616c697479436865636b456e666f726365723a646966666572604482015271656e742d617267732d616e642d7465726d7360701b60648201526084016100e3565b5050505050505050505050565b60008083601f8401126101f657600080fd5b50813567ffffffffffffffff81111561020e57600080fd5b60208301915083602082850101111561022657600080fd5b9250929050565b80356001600160a01b038116811461024457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561026857600080fd5b8a3567ffffffffffffffff8082111561028057600080fd5b61028c8e838f016101e4565b909c509a5060208d01359150808211156102a557600080fd5b6102b18e838f016101e4565b909a50985060408d0135975060608d01359150808211156102d157600080fd5b506102de8d828e016101e4565b90965094505060808b013592506102f760a08c0161022d565b915061030560c08c0161022d565b90509295989b9194979a5092959850565b8183823760009101908152919050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b604081526000610363604083018688610326565b8281036020840152610376818587610326565b97965050505050505056fea264697066735822122078e67ed2011e86335117ad2962f5a7ffbe2179a19bda7b4e0f3c3beff2ca893c64736f6c63430008170033",wMe={};we(wMe,{abi:()=>vMe,bytecode:()=>EMe});var vMe=[],EMe="0x",_Me={};we(_Me,{abi:()=>TMe,bytecode:()=>xMe});var TMe=[{type:"error",name:"Create2EmptyBytecode",inputs:[]},{type:"error",name:"Create2FailedDeployment",inputs:[]},{type:"error",name:"Create2InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]}],xMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122010c6b66ba2fc3a92f070bf47f6d02e68772a73d44eed07c73bca1c9f7fab44e964736f6c63430008170033",SMe={};we(SMe,{abi:()=>AMe,bytecode:()=>CMe});var AMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"}],CMe="0x",u0={};we(u0,{abi:()=>IMe,bytecode:()=>OMe});var IMe=[{type:"receive",stateMutability:"payable"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getInitializedVersion",inputs:[],outputs:[{name:"",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"upgradeToAndCallAndRetainStorage",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"ClearedStorage",inputs:[],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],OMe="0x",MMe={};we(MMe,{abi:()=>PMe,bytecode:()=>kMe});var PMe=[{type:"constructor",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_swapApiSigner",type:"address",internalType:"address"},{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_metaSwap",type:"address",internalType:"contract IMetaSwap"},{name:"_argsEqualityCheckEnforcer",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"WHITELIST_ENFORCED",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"WHITELIST_NOT_ENFORCED",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"argsEqualityCheckEnforcer",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"isAggregatorAllowed",inputs:[{name:"aggregatorIdHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"allowed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isTokenAllowed",inputs:[{name:"token",type:"address",internalType:"contract IERC20"}],outputs:[{name:"allowed",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"metaSwap",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IMetaSwap"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pendingOwner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setSwapApiSigner",inputs:[{name:"_newSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"swapApiSigner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"swapByDelegation",inputs:[{name:"_signatureData",type:"tuple",internalType:"struct DelegationMetaSwapAdapter.SignatureData",components:[{name:"apiData",type:"bytes",internalType:"bytes"},{name:"expiration",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"_delegations",type:"tuple[]",internalType:"struct Delegation[]",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"_useTokenWhitelist",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"swapTokens",inputs:[{name:"_aggregatorId",type:"string",internalType:"string"},{name:"_tokenFrom",type:"address",internalType:"contract IERC20"},{name:"_tokenTo",type:"address",internalType:"contract IERC20"},{name:"_recipient",type:"address",internalType:"address"},{name:"_amountFrom",type:"uint256",internalType:"uint256"},{name:"_balanceFromBefore",type:"uint256",internalType:"uint256"},{name:"_swapData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateAllowedAggregatorIds",inputs:[{name:"_aggregatorIds",type:"string[]",internalType:"string[]"},{name:"_statuses",type:"bool[]",internalType:"bool[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateAllowedTokens",inputs:[{name:"_tokens",type:"address[]",internalType:"contract IERC20[]"},{name:"_statuses",type:"bool[]",internalType:"bool[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdraw",inputs:[{name:"_token",type:"address",internalType:"contract IERC20"},{name:"_amount",type:"uint256",internalType:"uint256"},{name:"_recipient",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"ChangedAggregatorIdStatus",inputs:[{name:"aggregatorIdHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"aggregatorId",type:"string",indexed:!1,internalType:"string"},{name:"status",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"ChangedTokenStatus",inputs:[{name:"token",type:"address",indexed:!1,internalType:"contract IERC20"},{name:"status",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"OwnershipTransferStarted",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SentTokens",inputs:[{name:"token",type:"address",indexed:!0,internalType:"contract IERC20"},{name:"recipient",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SetArgsEqualityCheckEnforcer",inputs:[{name:"newArgsEqualityCheckEnforcer",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetMetaSwap",inputs:[{name:"newMetaSwap",type:"address",indexed:!0,internalType:"contract IMetaSwap"}],anonymous:!1},{type:"event",name:"SwapApiSignerUpdated",inputs:[{name:"newSigner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AddressInsufficientBalance",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"AggregatorIdIsNotAllowed",inputs:[{name:"aggregatorId",type:"string",internalType:"string"}]},{type:"error",name:"AmountFromMismatch",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"FailedNativeTokenTransfer",inputs:[{name:"recipient",type:"address",internalType:"address"}]},{type:"error",name:"InputLengthsMismatch",inputs:[]},{type:"error",name:"InsufficientTokens",inputs:[]},{type:"error",name:"InvalidApiSignature",inputs:[]},{type:"error",name:"InvalidEmptyDelegations",inputs:[]},{type:"error",name:"InvalidIdenticalTokens",inputs:[]},{type:"error",name:"InvalidSwapFunctionSelector",inputs:[]},{type:"error",name:"InvalidZeroAddress",inputs:[]},{type:"error",name:"MissingArgsEqualityCheckEnforcer",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotLeafDelegator",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"SafeERC20FailedOperation",inputs:[{name:"token",type:"address",internalType:"address"}]},{type:"error",name:"SignatureExpired",inputs:[]},{type:"error",name:"TokenFromIsNotAllowed",inputs:[{name:"token",type:"address",internalType:"contract IERC20"}]},{type:"error",name:"TokenFromMismatch",inputs:[]},{type:"error",name:"TokenToIsNotAllowed",inputs:[{name:"token",type:"address",internalType:"contract IERC20"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],kMe="0x60e06040523480156200001157600080fd5b506040516200306738038062003067833981016040819052620000349162000258565b846001600160a01b0381166200006457604051631e4fbdf760e01b81526000600482015260240160405180910390fd5b6200006f81620001d4565b506001600160a01b03841615806200008e57506001600160a01b038316155b80620000a157506001600160a01b038216155b80620000b457506001600160a01b038116155b15620000d35760405163f6b2911f60e01b815260040160405180910390fd5b600280546001600160a01b0319166001600160a01b0386811691821790925584821660805283821660a05290821660c0526040517fdeeca532e75e413fdd750935f0d28d3686b7e2074831c42f70db2ca0dc7b32d090600090a26040516001600160a01b038416907fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038316907f5a3c783d657606d324917524307587fd272edc5e8b257da020bb6072226b6b2c90600090a26040516001600160a01b038216907fb21681281e4a8a2f3a982e391c6e8b4638d9ccd60e9fa9715dc26c7e3cd15bbe90600090a25050505050620002d8565b600180546001600160a01b0319169055620001ef81620001f2565b50565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6001600160a01b0381168114620001ef57600080fd5b600080600080600060a086880312156200027157600080fd5b85516200027e8162000242565b6020870151909550620002918162000242565b6040870151909450620002a48162000242565b6060870151909350620002b78162000242565b6080870151909250620002ca8162000242565b809150509295509295909350565b60805160a05160c051612d356200033260003960008181610288015261136801526000818161033201528181610f4601528181610fd601526110010152600081816103a4015281816109120152610cf30152612d356000f3fe6080604052600436106101235760003560e01c8063ab7180f7116100a0578063ea4d3c9b11610064578063ea4d3c9b14610392578063ea9c6555146103c6578063f2fde38b1461040a578063f9eaee0d1461042a578063fcdea7a91461045a57600080fd5b8063ab7180f7146102aa578063b555ddad14610300578063cb2ef5fe14610320578063d691c96414610354578063e30c39781461037457600080fd5b8063715018a6116100e7578063715018a61461020e57806379ba5097146102235780638da5cb5b1461023857806390ef4d1b14610256578063a42ff9311461027657600080fd5b8063059ba4ee1461012f578063178984911461016c5780636451b418146101ac57806367ebd8a2146101ce57806369328dec146101ee57600080fd5b3661012a57005b600080fd5b34801561013b57600080fd5b5060025461014f906001600160a01b031681565b6040516001600160a01b0390911681526020015b60405180910390f35b34801561017857600080fd5b5061019c610187366004611e85565b60046020526000908152604090205460ff1681565b6040519015158152602001610163565b3480156101b857600080fd5b506101cc6101c7366004612108565b61047a565b005b3480156101da57600080fd5b506101cc6101e9366004612281565b61098c565b3480156101fa57600080fd5b506101cc61020936600461229e565b610a05565b34801561021a57600080fd5b506101cc610a1d565b34801561022f57600080fd5b506101cc610a31565b34801561024457600080fd5b506000546001600160a01b031661014f565b34801561026257600080fd5b506101cc61027136600461232b565b610a75565b34801561028257600080fd5b5061014f7f000000000000000000000000000000000000000000000000000000000000000081565b3480156102b657600080fd5b506102f36040518060400160405280601c81526020017f546f6b656e2d57686974656c6973742d4e6f742d456e666f726365640000000081525081565b60405161016391906123e6565b34801561030c57600080fd5b506101cc61031b36600461232b565b610bcb565b34801561032c57600080fd5b5061014f7f000000000000000000000000000000000000000000000000000000000000000081565b61036761036236600461243a565b610ce6565b60405161016391906124df565b34801561038057600080fd5b506001546001600160a01b031661014f565b34801561039e57600080fd5b5061014f7f000000000000000000000000000000000000000000000000000000000000000081565b3480156103d257600080fd5b506102f360405180604001604052806018815260200177151bdad95b8b55da1a5d195b1a5cdd0b515b999bdc98d95960421b81525081565b34801561041657600080fd5b506101cc610425366004612281565b610e1f565b34801561043657600080fd5b5061019c610445366004612281565b60036020526000908152604090205460ff1681565b34801561046657600080fd5b506101cc6104753660046124f2565b610e90565b61048b610486846125b4565b6110ba565b6000808080806104a361049e898061262a565b611194565b94509450945094509450600087519050806000036104d45760405163478bfa6560e01b815260040160405180910390fd5b836001600160a01b0316856001600160a01b03160361050657604051634e570e4560e01b815260040160405180910390fd5b61051285858a8a61132c565b600460008760405160200161052791906123e6565b60408051601f198184030181529181528151602092830120835290820192909252016000205460ff16610578578560405163b55e93d160e01b815260040161056f91906123e6565b60405180910390fd5b336001600160a01b03168860008151811061059557610595612670565b6020026020010151602001516001600160a01b0316146105c85760405163a711bbaf60e01b815260040160405180910390fd5b60003063fcdea7a98888888d6105df60018961269c565b815181106105ef576105ef612670565b602002602001015160200151896106058d6115b4565b8a60405160240161061c97969594939291906126af565b60408051601f19818403018152918152602080830180516001600160e01b031660e09590951b94909417909352805160028082526060820190925291945060009350909182015b60608152602001906001900390816106635790505090508960405160200161068b919061270f565b604051602081830303815290604052816000815181106106ad576106ad612670565b6020908102919091010152600060405190808252806020026020018201604052801561073957816020015b6107266040518060c0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016060815260200160008152602001606081525090565b8152602001906001900390816106d85790505b5060405160200161074a919061270f565b6040516020818303038152906040528160018151811061076c5761076c612670565b6020908102919091010152604080516002808252606082019092526000918160200160208202803683370190505090506107a4611639565b816000815181106107b7576107b7612670565b6020026020010181815250506107cb611639565b816001815181106107de576107de612670565b602090810291909101015260408051600280825260608201909252600091816020015b60608152602001906001900390816108015790505090506001600160a01b0389166108635761084030886040518060200160405280600081525061164c565b8160008151811061085357610853612670565b60200260200101819052506108d1565b6040513060248201526044810188905260009060640160408051601f198184030181529190526020810180516001600160e01b031663a9059cbb60e01b17905290506108b18a60008361164c565b826000815181106108c4576108c4612670565b6020026020010181905250505b6108dd3060008661164c565b816001815181106108f0576108f0612670565b602090810291909101015260405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d2099061094b90869086908690600401612841565b600060405180830381600087803b15801561096557600080fd5b505af1158015610979573d6000803e3d6000fd5b5050505050505050505050505050505050565b61099461167b565b6001600160a01b0381166109bb5760405163f6b2911f60e01b815260040160405180910390fd5b600280546001600160a01b0319166001600160a01b0383169081179091556040517fdeeca532e75e413fdd750935f0d28d3686b7e2074831c42f70db2ca0dc7b32d090600090a250565b610a0d61167b565b610a188383836116a8565b505050565b610a2561167b565b610a2f60006117a1565b565b60015433906001600160a01b03168114610a695760405163118cdaa760e01b81526001600160a01b038216600482015260240161056f565b610a72816117a1565b50565b610a7d61167b565b82818114610a9e57604051637e26301b60e11b815260040160405180910390fd5b60005b81811015610bc3576000868683818110610abd57610abd612670565b9050602002810190610acf919061262a565b604051602001610ae09291906128d4565b6040516020818303038152906040528051906020012090506000858584818110610b0c57610b0c612670565b9050602002016020810190610b2191906128f0565b60008381526004602052604090205490915060ff16151581151514610bb9576000828152600460205260409020805460ff1916821515179055817ffe89a7e0da76ce9087f67dbe71c999de74699125edabbdd3ef09b42dafdf9e55898986818110610b8e57610b8e612670565b9050602002810190610ba0919061262a565b84604051610bb09392919061290d565b60405180910390a25b5050600101610aa1565b505050505050565b610bd361167b565b82818114610bf457604051637e26301b60e11b815260040160405180910390fd5b60005b81811015610bc3576000868683818110610c1357610c13612670565b9050602002016020810190610c289190612281565b90506000858584818110610c3e57610c3e612670565b9050602002016020810190610c5391906128f0565b6001600160a01b03831660009081526003602052604090205490915060ff16151581151514610cdc576001600160a01b038216600081815260036020908152604091829020805460ff19168515159081179091558251938452908301527fd0847c60d8132f1d2a3af347506243fa046f163a2c9c6698c43b31e1d7d95bc4910160405180910390a15b5050600101610bf7565b6060336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610d3157604051630692ce8160e21b815260040160405180910390fd5b83600881901b6001600160f81b0319821615610d6c57604051632e5bf3f960e21b81526001600160f81b03198316600482015260240161056f565b6001600160f81b0319811615610da1576040516308c3ee0360e11b81526001600160f81b03198216600482015260240161056f565b600080366000610db189896117ba565b6040805160018082528183019092529498509296509094509250816020015b6060815260200190600190039081610dd0579050509650610df38484848461180b565b87600081518110610e0657610e06612670565b60200260200101819052505050505050505b9392505050565b610e2761167b565b600180546001600160a01b0383166001600160a01b03199091168117909155610e586000546001600160a01b031690565b6001600160a01b03167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e2270060405160405180910390a350565b333014610eb0576040516314e1dbf760e11b815260040160405180910390fd5b600083610ebc896115b4565b610ec6919061269c565b905084811015610ee9576040516378dbf0af60e11b815260040160405180910390fd5b84811115610f0557610f0588610eff878461269c565b886116a8565b6000610f10886115b4565b905060006001600160a01b038a16610f29575085610fff565b604051636eb1769f60e11b81523060048201526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000081166024830152600091908c169063dd62ed3e90604401602060405180830381865afa158015610f99573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fbd9190612933565b905087811015610ffd57610ffd6001600160a01b038c167f0000000000000000000000000000000000000000000000000000000000000000600019611841565b505b7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316635f575529828e8e8e8c8b8b6040518863ffffffff1660e01b81526004016110569695949392919061294c565b6000604051808303818588803b15801561106f57600080fd5b505af1158015611083573d6000803e3d6000fd5b50505050506000826110948b6115b4565b61109e919061269c565b90506110ab8a828b6116a8565b50505050505050505050505050565b806020015142106110de57604051630819bdcd60e01b815260040160405180910390fd5b6000816000015182602001516040516020016110fb929190612996565b604051602081830303815290604052805190602001209050600061114c827f19457468657265756d205369676e6564204d6573736167653a0a3332000000006000908152601c91909152603c902090565b9050600061115e8285604001516118cb565b6002549091506001600160a01b0380831691161461118e57604051626d46e960e31b815260040160405180910390fd5b50505050565b60606000808083816111a9600482898b6129b8565b6111b2916129e2565b90506001600160e01b03198116635f57552960e01b146111e557604051632033702760e11b815260040160405180910390fd5b60006111f4886004818c6129b8565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505082519293506112419284016020908101925084019050612a62565b60408051600060208201819052959c50939a50919750955082918291829182910160408051601f1981840301815290829052611281918a90602001612af9565b6040516020818303038152906040528060200190518101906112a39190612b28565b98505097505050955095509550508a6001600160a01b0316856001600160a01b0316146112e3576040516356cf902d60e01b815260040160405180910390fd5b801580156112fa5750886112f78484612be6565b14155b1561131857604051632f0e599760e11b815260040160405180910390fd5b839950505050505050509295509295909350565b60006001835161133c919061269c565b905082818151811061135057611350612670565b60200260200101516060015151600014806113d857507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03168382815181106113a2576113a2612670565b6020026020010151606001516000815181106113c0576113c0612670565b6020026020010151600001516001600160a01b031614155b156113f65760405163113f78d160e31b815260040160405180910390fd5b8115611518576001600160a01b03851660009081526003602052604090205460ff166114405760405163550a4b9360e01b81526001600160a01b038616600482015260240161056f565b6001600160a01b03841660009081526003602052604090205460ff166114845760405163022330e760e61b81526001600160a01b038516600482015260240161056f565b60405180604001604052806018815260200177151bdad95b8b55da1a5d195b1a5cdd0b515b999bdc98d95960421b8152506040516020016114c591906123e6565b6040516020818303038152906040528382815181106114e6576114e6612670565b60200260200101516060015160008151811061150457611504612670565b6020026020010151604001819052506115ad565b6040518060400160405280601c81526020017f546f6b656e2d57686974656c6973742d4e6f742d456e666f726365640000000081525060405160200161155e91906123e6565b60405160208183030381529060405283828151811061157f5761157f612670565b60200260200101516060015160008151811061159d5761159d612670565b6020026020010151604001819052505b5050505050565b60006001600160a01b0382166115cb575047919050565b6040516370a0823160e01b81523060048201526001600160a01b038316906370a0823190602401602060405180830381865afa15801561160f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906116339190612933565b92915050565b6000611647818080806118f5565b905090565b606083838360405160200161166393929190612bf9565b60405160208183030381529060405290509392505050565b6000546001600160a01b03163314610a2f5760405163118cdaa760e01b815233600482015260240161056f565b6001600160a01b03831661173b576000816001600160a01b03168360405160006040518083038185875af1925050503d8060008114611703576040519150601f19603f3d011682016040523d82523d6000602084013e611708565b606091505b5050905080611735576040516312988bef60e21b81526001600160a01b038316600482015260240161056f565b5061174f565b61174f6001600160a01b0384168284611960565b806001600160a01b0316836001600160a01b03167f2c42af0ac449800f98313b961b8c9e7d69c3065be5b86449ed4c358e01d3a7808460405161179491815260200190565b60405180910390a3505050565b600180546001600160a01b0319169055610a72816119bf565b60008036816117cc60148287896129b8565b6117d591612c38565b60601c93506117e86034601487896129b8565b6117f191612c6b565b925061180085603481896129b8565b949793965094505050565b60405181838237600038838387895af1611828573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b604051636eb1769f60e11b81523060048201526001600160a01b0383811660248301526000919085169063dd62ed3e90604401602060405180830381865afa158015611891573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906118b59190612933565b905061118e84846118c68585612be6565b611a0f565b6000806000806118db8686611a9f565b9250925092506118eb8282611aec565b5090949350505050565b604080516001600160f81b03198087166020830152851660218201526000602282018190526001600160e01b03198516602683015269ffffffffffffffffffff198416602a830152910160405160208183030381529060405261195790612c89565b95945050505050565b6040516001600160a01b03838116602483015260448201839052610a1891859182169063a9059cbb906064015b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050611ba9565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b604080516001600160a01b038416602482015260448082018490528251808303909101815260649091019091526020810180516001600160e01b031663095ea7b360e01b179052611a608482611c0c565b61118e576040516001600160a01b03848116602483015260006044830152611a9591869182169063095ea7b39060640161198d565b61118e8482611ba9565b60008060008351604103611ad95760208401516040850151606086015160001a611acb88828585611caf565b955095509550505050611ae5565b50508151600091506002905b9250925092565b6000826003811115611b0057611b00612cb0565b03611b09575050565b6001826003811115611b1d57611b1d612cb0565b03611b3b5760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611b4f57611b4f612cb0565b03611b705760405163fce698f760e01b81526004810182905260240161056f565b6003826003811115611b8457611b84612cb0565b03611ba5576040516335e2f38360e21b81526004810182905260240161056f565b5050565b6000611bbe6001600160a01b03841683611d7e565b90508051600014158015611be3575080806020019051810190611be19190612cc6565b155b15610a1857604051635274afe760e01b81526001600160a01b038416600482015260240161056f565b6000806000846001600160a01b031684604051611c299190612ce3565b6000604051808303816000865af19150503d8060008114611c66576040519150601f19603f3d011682016040523d82523d6000602084013e611c6b565b606091505b5091509150818015611c95575080511580611c95575080806020019051810190611c959190612cc6565b80156119575750505050506001600160a01b03163b151590565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0841115611cea5750600091506003905082611d74565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa158015611d3e573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116611d6a57506000925060019150829050611d74565b9250600091508190505b9450945094915050565b6060610e188383600084600080856001600160a01b03168486604051611da49190612ce3565b60006040518083038185875af1925050503d8060008114611de1576040519150601f19603f3d011682016040523d82523d6000602084013e611de6565b606091505b5091509150611df6868383611e00565b9695505050505050565b606082611e1557611e1082611e5c565b610e18565b8151158015611e2c57506001600160a01b0384163b155b15611e5557604051639996b31560e01b81526001600160a01b038516600482015260240161056f565b5080610e18565b805115611e6c5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b600060208284031215611e9757600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b0381118282101715611ed657611ed6611e9e565b60405290565b60405160c081016001600160401b0381118282101715611ed657611ed6611e9e565b604051601f8201601f191681016001600160401b0381118282101715611f2657611f26611e9e565b604052919050565b60006001600160401b03821115611f4757611f47611e9e565b5060051b60200190565b6001600160a01b0381168114610a7257600080fd5b8035611f7181611f51565b919050565b60006001600160401b03821115611f8f57611f8f611e9e565b50601f01601f191660200190565b600082601f830112611fae57600080fd5b8135611fc1611fbc82611f76565b611efe565b818152846020838601011115611fd657600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261200457600080fd5b81356020612014611fbc83611f2e565b82815260059290921b8401810191818101908684111561203357600080fd5b8286015b848110156120e45780356001600160401b03808211156120575760008081fd5b908801906060828b03601f19018113156120715760008081fd5b612079611eb4565b8784013561208681611f51565b81526040848101358481111561209c5760008081fd5b6120aa8e8b83890101611f9d565b838b0152509184013591838311156120c25760008081fd5b6120d08d8a85880101611f9d565b908201528652505050918301918301612037565b509695505050505050565b8015158114610a7257600080fd5b8035611f71816120ef565b60008060006060848603121561211d57600080fd5b83356001600160401b038082111561213457600080fd5b908501906060828803121561214857600080fd5b909350602090858201358181111561215f57600080fd5b8601601f8101881361217057600080fd5b803561217e611fbc82611f2e565b81815260059190911b8201840190848101908a83111561219d57600080fd5b8584015b83811015612262578035868111156121b857600080fd5b850160c0818e03601f190112156121ce57600080fd5b6121d6611edc565b6121e1898301611f66565b81526121ef60408301611f66565b898201526060820135604082015260808201358881111561220f57600080fd5b61221d8f8b83860101611ff3565b60608301525060a0820135608082015260c0820135888111156122405760008081fd5b61224e8f8b83860101611f9d565b60a0830152508452509186019186016121a1565b50809750505050505050612278604085016120fd565b90509250925092565b60006020828403121561229357600080fd5b8135610e1881611f51565b6000806000606084860312156122b357600080fd5b83356122be81611f51565b92506020840135915060408401356122d581611f51565b809150509250925092565b60008083601f8401126122f257600080fd5b5081356001600160401b0381111561230957600080fd5b6020830191508360208260051b850101111561232457600080fd5b9250929050565b6000806000806040858703121561234157600080fd5b84356001600160401b038082111561235857600080fd5b612364888389016122e0565b9096509450602087013591508082111561237d57600080fd5b5061238a878288016122e0565b95989497509550505050565b60005b838110156123b1578181015183820152602001612399565b50506000910152565b600081518084526123d2816020860160208601612396565b601f01601f19169290920160200192915050565b602081526000610e1860208301846123ba565b60008083601f84011261240b57600080fd5b5081356001600160401b0381111561242257600080fd5b60208301915083602082850101111561232457600080fd5b60008060006040848603121561244f57600080fd5b8335925060208401356001600160401b0381111561246c57600080fd5b612478868287016123f9565b9497909650939450505050565b60008282518085526020808601955060208260051b8401016020860160005b848110156124d257601f198684030189526124c08383516123ba565b988401989250908301906001016124a4565b5090979650505050505050565b602081526000610e186020830184612485565b600080600080600080600080600060e08a8c03121561251057600080fd5b89356001600160401b038082111561252757600080fd5b6125338d838e016123f9565b909b50995060208c0135915061254882611f51565b90975060408b01359061255a82611f51565b90965060608b01359061256c82611f51565b90955060808b0135945060a08b0135935060c08b0135908082111561259057600080fd5b5061259d8c828d016123f9565b915080935050809150509295985092959850929598565b6000606082360312156125c657600080fd5b6125ce611eb4565b82356001600160401b03808211156125e557600080fd5b6125f136838701611f9d565b835260208501356020840152604085013591508082111561261157600080fd5b5061261e36828601611f9d565b60408301525092915050565b6000808335601e1984360301811261264157600080fd5b8301803591506001600160401b0382111561265b57600080fd5b60200191503681900382131561232457600080fd5b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b8181038181111561163357611633612686565b60e0815260006126c260e083018a6123ba565b6001600160a01b0389811660208501528881166040850152871660608401526080830186905260a0830185905282810360c084015261270181856123ba565b9a9950505050505050505050565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b8281101561283457603f19888603018452815160c0860160018060a01b038083511688528089840151168989015260408301516040890152606083015160c060608a015282815180855260e08b01915060e08160051b8c010194508b8301925060005b818110156127f85760df198c870301835283518581511687528d81015160608f8901526127c960608901826123ba565b90506040820151915087810360408901526127e481836123ba565b97505050928c0192918c0191600101612799565b50505050506080820151608088015260a0820151915086810360a088015261282081836123ba565b965050509285019290850190600101612736565b5092979650505050505050565b6060815260006128546060830186612485565b82810360208481019190915285518083528682019282019060005b8181101561288b5784518352938301939183019160010161286f565b5050848103604086015261289f8187612485565b98975050505050505050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b6020815260006128e86020830184866128ab565b949350505050565b60006020828403121561290257600080fd5b8135610e18816120ef565b6040815260006129216040830185876128ab565b90508215156020830152949350505050565b60006020828403121561294557600080fd5b5051919050565b60808152600061296060808301888a6128ab565b6001600160a01b03871660208401526040830186905282810360608401526129898185876128ab565b9998505050505050505050565b6040815260006129a960408301856123ba565b90508260208301529392505050565b600080858511156129c857600080fd5b838611156129d557600080fd5b5050820193919092039150565b6001600160e01b03198135818116916004851015612a0a5780818660040360031b1b83161692505b505092915050565b6000612a20611fbc84611f76565b9050828152838383011115612a3457600080fd5b610e18836020830184612396565b600082601f830112612a5357600080fd5b610e1883835160208501612a12565b60008060008060808587031215612a7857600080fd5b84516001600160401b0380821115612a8f57600080fd5b818701915087601f830112612aa357600080fd5b612ab288835160208501612a12565b955060208701519150612ac482611f51565b60408701516060880151929550935080821115612ae057600080fd5b50612aed87828801612a42565b91505092959194509250565b60008351612b0b818460208801612396565b835190830190612b1f818360208801612396565b01949350505050565b60008060008060008060008060006101208a8c031215612b4757600080fd5b8951612b5281611f51565b60208b0151909950612b6381611f51565b60408b0151909850612b7481611f51565b8097505060608a0151955060808a0151945060a08a01516001600160401b03811115612b9f57600080fd5b612bab8c828d01612a42565b94505060c08a0151925060e08a0151612bc381611f51565b6101008b0151909250612bd5816120ef565b809150509295985092959850929598565b8082018082111561163357611633612686565b6bffffffffffffffffffffffff198460601b16815282601482015260008251612c29816034850160208701612396565b91909101603401949350505050565b6bffffffffffffffffffffffff198135818116916014851015612a0a5760149490940360031b84901b1690921692915050565b8035602083101561163357600019602084900360031b1b1692915050565b80516020808301519190811015612caa576000198160200360031b1b821691505b50919050565b634e487b7160e01b600052602160045260246000fd5b600060208284031215612cd857600080fd5b8151610e18816120ef565b60008251612cf5818460208701612396565b919091019291505056fea2646970667358221220e6349ea62bd7b0c0d8eed7da3947908c16ca3383370cc10da3a8b2b40c83b05264736f6c63430008170033",NMe={};we(NMe,{abi:()=>RMe,bytecode:()=>DMe});var RMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"blockAfterThreshold_",type:"uint128",internalType:"uint128"},{name:"blockBeforeThreshold_",type:"uint128",internalType:"uint128"}],stateMutability:"pure"}],DMe="0x608060405234801561001057600080fd5b506104ed806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610345565b50505050505050505050565b005b610076610086366004610345565b6100c2565b61009e610099366004610412565b61023e565b604080516001600160801b0393841681529290911660208301520160405180910390f35b85600881901b6001600160f81b03198116156101335760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806101418d8d61023e565b90925090506001600160801b038216156101b957816001600160801b031643116101b95760405162461bcd60e51b8152602060048201526024808201527f426c6f636b4e756d626572456e666f726365723a6561726c792d64656c6567616044820152633a34b7b760e11b606482015260840161012a565b6001600160801b0381161561022f57806001600160801b0316431061022f5760405162461bcd60e51b815260206004820152602660248201527f426c6f636b4e756d626572456e666f726365723a657870697265642d64656c6560448201526533b0ba34b7b760d11b606482015260840161012a565b50505050505050505050505050565b600080602083146102a25760405162461bcd60e51b815260206004820152602860248201527f426c6f636b4e756d626572456e666f726365723a696e76616c69642d7465726d6044820152670e65ad8cadccee8d60c31b606482015260840161012a565b6102b0601060008587610454565b6102b99161047e565b60801c91506102cb8360108187610454565b6102d49161047e565b60801c90509250929050565b60008083601f8401126102f257600080fd5b50813567ffffffffffffffff81111561030a57600080fd5b60208301915083602082850101111561032257600080fd5b9250929050565b80356001600160a01b038116811461034057600080fd5b919050565b60008060008060008060008060008060e08b8d03121561036457600080fd5b8a3567ffffffffffffffff8082111561037c57600080fd5b6103888e838f016102e0565b909c509a5060208d01359150808211156103a157600080fd5b6103ad8e838f016102e0565b909a50985060408d0135975060608d01359150808211156103cd57600080fd5b506103da8d828e016102e0565b90965094505060808b013592506103f360a08c01610329565b915061040160c08c01610329565b90509295989b9194979a5092959850565b6000806020838503121561042557600080fd5b823567ffffffffffffffff81111561043c57600080fd5b610448858286016102e0565b90969095509350505050565b6000808585111561046457600080fd5b8386111561047157600080fd5b5050820193919092039150565b6fffffffffffffffffffffffffffffffff1981358181169160108510156104af5780818660100360031b1b83161692505b50509291505056fea2646970667358221220e786ddc75b5e54c089f23ff0a2c6c7b67417725b5021ebc3aa3b2726c852e6cb64736f6c63430008170033",$Me={};we($Me,{abi:()=>LMe,bytecode:()=>BMe});var LMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"computeAddress",inputs:[{name:"_bytecodeHash",type:"bytes32",internalType:"bytes32"},{name:"_salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"addr_",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"expectedAddress_",type:"address",internalType:"address"},{name:"salt_",type:"bytes32",internalType:"bytes32"},{name:"bytecode_",type:"bytes",internalType:"bytes"}],stateMutability:"pure"},{type:"event",name:"DeployedContract",inputs:[{name:"contractAddress",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"SkippedDeployment",inputs:[{name:"contractAddress",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"error",name:"Create2EmptyBytecode",inputs:[]},{type:"error",name:"Create2FailedDeployment",inputs:[]},{type:"error",name:"Create2InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"DeployedEmptyContract",inputs:[{name:"contractAddress",type:"address",internalType:"address"}]}],BMe="0x608060405234801561001057600080fd5b50610748806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e3314610067578063481286e614610083578063a145832a146100b3578063b99deb0e146100c6578063d3eddcc514610067578063ed46336714610067575b600080fd5b6100816100753660046104fe565b50505050505050505050565b005b6100966100913660046105cb565b6100e8565b6040516001600160a01b0390911681526020015b60405180910390f35b6100816100c13660046104fe565b6100fd565b6100d96100d43660046105ed565b61026d565b6040516100aa9392919061062f565b60006100f48284610353565b90505b92915050565b85600881901b6001600160f81b031981161561016e5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b50600080600061017e8e8e61026d565b919450925090506001600160a01b0383163b156101d9576040516001600160a01b03841681527f641dafeb23238fae3ef71c64fced975da90c34dede63890507f3dda6b1e0dfef9060200160405180910390a1505050610260565b60006101e58284610360565b9050836001600160a01b0316816001600160a01b03161461025b5760405162461bcd60e51b815260206004820152602a60248201527f4465706c6f796564456e666f726365723a6465706c6f7965642d6164647265736044820152690e65adad2e6dac2e8c6d60b31b6064820152608401610165565b505050505b5050505050505050505050565b6000806060603484116102d05760405162461bcd60e51b815260206004820152602560248201527f4465706c6f796564456e666f726365723a696e76616c69642d7465726d732d6c6044820152640cadccee8d60db1b6064820152608401610165565b6102de601460008688610695565b6102e7916106bf565b60601c92506102fa603460148688610695565b610303916106f4565b91506103128460348188610695565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509598949750919550929350505050565b60006100f48383306103e8565b600061036e60008385610412565b9050806001600160a01b03163b6000036103a6576040516352c7cd4960e11b81526001600160a01b0382166004820152602401610165565b6040516001600160a01b03821681527faf3c4b03f515b5a38f3c238fdc24abf10854a2f27f2a85743a71de17e9bc7e7f9060200160405180910390a192915050565b6000604051836040820152846020820152828152600b8101905060ff815360559020949350505050565b60008347101561043e5760405163392efb2b60e21b815247600482015260248101859052604401610165565b815160000361046057604051631328927760e21b815260040160405180910390fd5b8282516020840186f590506001600160a01b03811661049257604051633a0ba96160e11b815260040160405180910390fd5b9392505050565b60008083601f8401126104ab57600080fd5b50813567ffffffffffffffff8111156104c357600080fd5b6020830191508360208285010111156104db57600080fd5b9250929050565b80356001600160a01b03811681146104f957600080fd5b919050565b60008060008060008060008060008060e08b8d03121561051d57600080fd5b8a3567ffffffffffffffff8082111561053557600080fd5b6105418e838f01610499565b909c509a5060208d013591508082111561055a57600080fd5b6105668e838f01610499565b909a50985060408d0135975060608d013591508082111561058657600080fd5b506105938d828e01610499565b90965094505060808b013592506105ac60a08c016104e2565b91506105ba60c08c016104e2565b90509295989b9194979a5092959850565b600080604083850312156105de57600080fd5b50508035926020909101359150565b6000806020838503121561060057600080fd5b823567ffffffffffffffff81111561061757600080fd5b61062385828601610499565b90969095509350505050565b60018060a01b03841681526000602084602084015260606040840152835180606085015260005b8181101561067257858101830151858201608001528201610656565b506000608082860101526080601f19601f83011685010192505050949350505050565b600080858511156106a557600080fd5b838611156106b257600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156106ec5780818660140360031b1b83161692505b505092915050565b803560208310156100f757600019602084900360031b1b169291505056fea264697066735822122012632a27b82f8f9b4b083a1f26c705dcd1ceb840e52519ff7902232eb956870464736f6c63430008170033",FMe={};we(FMe,{abi:()=>UMe,bytecode:()=>jMe});var UMe=[],jMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212201124664c489cae3f1f240552ace1b72f497b65d8c9bdbce66e0c2b36268dcd2c64736f6c63430008170033",HMe={};we(HMe,{abi:()=>zMe,bytecode:()=>qMe});var zMe=[{type:"receive",stateMutability:"payable"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"InvalidEIP712NameLength",inputs:[]},{type:"error",name:"InvalidEIP712VersionLength",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UnauthorizedCallContext",inputs:[]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],qMe="0x",KMe={};we(KMe,{abi:()=>VMe,bytecode:()=>WMe});var VMe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_recipient",type:"address",internalType:"address"},{name:"_tokenId",type:"uint256",internalType:"uint256"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"token_",type:"address",internalType:"address"},{name:"recipient_",type:"address",internalType:"address"},{name:"tokenId_",type:"uint256",internalType:"uint256"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],WMe="0x608060405234801561001057600080fd5b506109cb806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b99deb0e1161005b578063b99deb0e14610122578063d0a3529f1461016b578063d3eddcc51461017e578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c5578063a145832a146100e1578063b5e54492146100f4575b600080fd5b6100b061009b3660046106cb565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d3366004610749565b50505050505050505050565b005b6100df6100ef366004610749565b610191565b6101146101023660046106cb565b60006020819052908152604090205481565b6040519081526020016100bc565b610135610130366004610816565b610350565b6040805195151586526001600160a01b03948516602087015292909316918401919091526060830152608082015260a0016100bc565b610114610179366004610858565b61045d565b6100df61018c366004610749565b610476565b85600881901b6101a2816000610661565b6102015760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060008060006102118e8e610350565b50935093509350506000610228338585858c610678565b60008181526001602052604090205490915060ff16156102a25760405162461bcd60e51b815260206004820152602f60248201527f4552433131353542616c616e63654368616e6765456e666f726365723a656e6660448201526e1bdc98d95c8b5a5ccb5b1bd8dad959608a1b60648201526084016101f8565b6000818152600160208190526040808320805460ff191690921790915551627eeac760e11b81526001600160a01b0385811660048301526024820185905286169062fdd58e90604401602060405180830381865afa158015610308573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061032c91906108ad565b60009283526020839052604090922091909155505050505050505050505050505050565b600080808080606986146103c05760405162461bcd60e51b815260206004820152603160248201527f4552433131353542616c616e63654368616e6765456e666f726365723a696e766044820152700c2d8d2c85ae8cae4dae65ad8cadccee8d607b1b60648201526084016101f8565b868660008181106103d3576103d36108c6565b909101356001600160f81b031916151595506103f5905060156001888a6108dc565b6103fe91610906565b60601c935061041160296015888a6108dc565b61041a91610906565b60601c925061042d60496029888a6108dc565b6104369161093b565b9150610445866049818a6108dc565b61044e9161093b565b60001c90509295509295909350565b600061046c8686868686610678565b9695505050505050565b60008060008060006104888f8f610350565b9450945094509450945060006104a1338686868d610678565b600081815260016020526040808220805460ff1916905551627eeac760e11b81526001600160a01b03878116600483015260248201879052929350909187169062fdd58e90604401602060405180830381865afa158015610506573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061052a91906108ad565b905086156105bf5760008281526020819052604090205461054c90849061096f565b8110156105ba5760405162461bcd60e51b815260206004820152603660248201527f4552433131353542616c616e63654368616e6765456e666f726365723a65786360448201527565656465642d62616c616e63652d646563726561736560501b60648201526084016101f8565b61064e565b6000828152602081905260409020546105d9908490610982565b81101561064e5760405162461bcd60e51b815260206004820152603a60248201527f4552433131353542616c616e63654368616e6765456e666f726365723a696e7360448201527f756666696369656e742d62616c616e63652d696e63726561736500000000000060648201526084016101f8565b5050505050505050505050505050505050565b6001600160f81b0319828116908216145b92915050565b604080516001600160a01b0396871660208083019190915295871681830152939095166060840152608083019190915260a0808301919091528351808303909101815260c0909101909252815191012090565b6000602082840312156106dd57600080fd5b5035919050565b60008083601f8401126106f657600080fd5b50813567ffffffffffffffff81111561070e57600080fd5b60208301915083602082850101111561072657600080fd5b9250929050565b80356001600160a01b038116811461074457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561076857600080fd5b8a3567ffffffffffffffff8082111561078057600080fd5b61078c8e838f016106e4565b909c509a5060208d01359150808211156107a557600080fd5b6107b18e838f016106e4565b909a50985060408d0135975060608d01359150808211156107d157600080fd5b506107de8d828e016106e4565b90965094505060808b013592506107f760a08c0161072d565b915061080560c08c0161072d565b90509295989b9194979a5092959850565b6000806020838503121561082957600080fd5b823567ffffffffffffffff81111561084057600080fd5b61084c858286016106e4565b90969095509350505050565b600080600080600060a0868803121561087057600080fd5b6108798661072d565b94506108876020870161072d565b93506108956040870161072d565b94979396509394606081013594506080013592915050565b6000602082840312156108bf57600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b600080858511156108ec57600080fd5b838611156108f957600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156109335780818660140360031b1b83161692505b505092915050565b8035602083101561067257600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561067257610672610959565b808201808211156106725761067261095956fea264697066735822122095ab63871cc701b6845065f3118822a1bb1778b7d93ba045a40145ebc06f19af64736f6c63430008170033",Qs={};we(Qs,{abi:()=>GMe,bytecode:()=>YMe});var GMe=[{type:"constructor",inputs:[{name:"_owner",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"ANY_DELEGATE",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"ROOT_AUTHORITY",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"disabledDelegations",inputs:[{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"isDisabled",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getDelegationHash",inputs:[{name:"_input",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"pendingOwner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"DisabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"EnabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"OwnershipTransferStarted",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"RedeemedDelegation",inputs:[{name:"rootDelegator",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"SetDomain",inputs:[{name:"domainHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"name",type:"string",indexed:!1,internalType:"string"},{name:"domainVersion",type:"string",indexed:!1,internalType:"string"},{name:"chainId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"contractAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"error",name:"AlreadyDisabled",inputs:[]},{type:"error",name:"AlreadyEnabled",inputs:[]},{type:"error",name:"BatchDataLengthMismatch",inputs:[]},{type:"error",name:"CannotUseADisabledDelegation",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"EmptySignature",inputs:[]},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]},{type:"error",name:"InvalidAuthority",inputs:[]},{type:"error",name:"InvalidDelegate",inputs:[]},{type:"error",name:"InvalidDelegator",inputs:[]},{type:"error",name:"InvalidEOASignature",inputs:[]},{type:"error",name:"InvalidERC1271Signature",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]}],YMe="0x6101606040523480156200001257600080fd5b506040516200334f3803806200334f833981016040819052620000359162000384565b60408051808201825260118152702232b632b3b0ba34b7b726b0b730b3b2b960791b602080830191909152825180840190935260018352603160f81b9083015290826001600160a01b038116620000a757604051631e4fbdf760e01b8152600060048201526024015b60405180910390fd5b620000b28162000204565b506001805460ff60a01b19169055620000cd82600262000222565b61012052620000de81600362000222565b61014052815160208084019190912060e052815190820120610100524660a0526200015b60e05161010051604080516000805160206200332f83398151915260208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60805250503060c0526000620001706200025b565b9050306001600160a01b0316817f04a46d9007577c7ff1e513b900545162ec25d25991ae3dc60cf26ec01a84806d604051806040016040528060118152602001702232b632b3b0ba34b7b726b0b730b3b2b960791b815250604051806040016040528060018152602001603160f81b81525046604051620001f493929190620003fe565b60405180910390a35050620005e5565b600180546001600160a01b03191690556200021f81620002f1565b50565b600060208351101562000242576200023a8362000341565b905062000255565b816200024f8482620004df565b5060ff90505b92915050565b600060c0516001600160a01b0316306001600160a01b031614801562000282575060a05146145b156200028f575060805190565b620002ec60e05161010051604080516000805160206200332f83398151915260208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b905090565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b600080829050601f815111156200036f578260405163305a27a960e01b81526004016200009e9190620005ab565b80516200037c82620005c0565b179392505050565b6000602082840312156200039757600080fd5b81516001600160a01b0381168114620003af57600080fd5b9392505050565b6000815180845260005b81811015620003de57602081850181015186830182015201620003c0565b506000602082860101526020601f19601f83011685010191505092915050565b606081526000620004136060830186620003b6565b8281036020840152620004278186620003b6565b915050826040830152949350505050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200046357607f821691505b6020821081036200048457634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620004da576000816000526020600020601f850160051c81016020861015620004b55750805b601f850160051c820191505b81811015620004d657828155600101620004c1565b5050505b505050565b81516001600160401b03811115620004fb57620004fb62000438565b62000513816200050c84546200044e565b846200048a565b602080601f8311600181146200054b5760008415620005325750858301515b600019600386901b1c1916600185901b178555620004d6565b600085815260208120601f198616915b828110156200057c578886015182559484019460019091019084016200055b565b50858210156200059b5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b602081526000620003af6020830184620003b6565b80516020808301519190811015620004845760001960209190910360031b1b16919050565b60805160a05160c05160e051610100516101205161014051612cef620006406000396000611bda01526000611bad01526000611b1201526000611aea01526000611a4501526000611a6f01526000611a990152612cef6000f3fe608060405234801561001057600080fd5b506004361061012c5760003560e01c806383ebb771116100ad578063acb8cc4911610071578063acb8cc491461027f578063cef6d2091461029f578063e30c3978146102b2578063f2fde38b146102c3578063ffa1ad74146102d657600080fd5b806383ebb771146102065780638456cb591461020e57806384b0196e146102165780638da5cb5b14610231578063a3f4df7e1461024257600080fd5b806358909ebc116100f457806358909ebc146101b05780635c975abb146101d157806366134607146101e3578063715018a6146101f657806379ba5097146101fe57600080fd5b80631b13cac2146101315780632d40d0521461014d5780633ed01015146101805780633f4ba83a14610195578063499340471461019d575b600080fd5b61013a60001981565b6040519081526020015b60405180910390f35b61017061015b3660046120e6565b60046020526000908152604090205460ff1681565b6040519015158152602001610144565b61019361018e3660046120ff565b6102fa565b005b6101936103f4565b6101936101ab3660046120ff565b610406565b6101b9610a1181565b6040516001600160a01b039091168152602001610144565b600154600160a01b900460ff16610170565b61013a6101f13660046120ff565b6104f6565b61019361050f565b610193610521565b61013a61056a565b610193610579565b61021e610589565b6040516101449796959493929190612190565b6000546001600160a01b03166101b9565b610272604051806040016040528060118152602001702232b632b3b0ba34b7b726b0b730b3b2b960791b81525081565b6040516101449190612229565b610272604051806040016040528060018152602001603160f81b81525081565b6101936102ad366004612287565b6105cf565b6001546001600160a01b03166101b9565b6101936102d136600461233c565b611891565b610272604051806040016040528060058152602001640312e332e360dc1b81525081565b61030a604082016020830161233c565b6001600160a01b03811633146103335760405163b9f0f17160e01b815260040160405180910390fd5b600061033e836104f6565b60008181526004602052604090205490915060ff1661037057604051637952fbad60e11b815260040160405180910390fd5b6000818152600460209081526040909120805460ff191690556103959084018461233c565b6001600160a01b03166103ae604085016020860161233c565b6001600160a01b0316827f3feadce88fc1b49db633a56fd5307ed6ee18734df83bcc4011daa720c9cd95f1866040516103e79190612484565b60405180910390a4505050565b6103fc611902565b61040461192f565b565b610416604082016020830161233c565b6001600160a01b038116331461043f5760405163b9f0f17160e01b815260040160405180910390fd5b600061044a836104f6565b60008181526004602052604090205490915060ff161561047c57604051625ecddb60e01b815260040160405180910390fd5b6000818152600460209081526040909120805460ff191660011790556104a49084018461233c565b6001600160a01b03166104bd604085016020860161233c565b6001600160a01b0316827fea589ba9473ee1fe77d352c7ed919747715a5d22931b972de9b02a907c66d5dd866040516103e79190612484565b600061050961050483612823565b611984565b92915050565b610517611902565b6104046000611a1f565b60015433906001600160a01b0316811461055e5760405163118cdaa760e01b81526001600160a01b03821660048201526024015b60405180910390fd5b61056781611a1f565b50565b6000610574611a38565b905090565b610581611902565b610404611b63565b60006060806000806000606061059d611ba6565b6105a5611bd3565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b6105d7611c00565b8481811415806105e75750808414155b1561060557604051631bcaf69f60e01b815260040160405180910390fd5b6000816001600160401b0381111561061f5761061f612555565b60405190808252806020026020018201604052801561065257816020015b606081526020019060019003908161063d5790505b5090506000826001600160401b0381111561066f5761066f612555565b6040519080825280602002602001820160405280156106a257816020015b606081526020019060019003908161068d5790505b50905060005b83811015610c815760008a8a838181106106c4576106c461282f565b90506020028101906106d69190612845565b8101906106e3919061288b565b905080516000036107d1576040805160008082526020820190925290610765565b6107526040518060c0016040528060006001600160a01b0316815260200160006001600160a01b03168152602001600080191681526020016060815260200160008152602001606081525090565b8152602001906001900390816107045790505b508483815181106107785761077861282f565b602090810291909101015260006040519080825280602002602001820160405280156107ae578160200160208202803683370190505b508383815181106107c1576107c161282f565b6020026020010181905250610c78565b808483815181106107e4576107e461282f565b6020026020010181905250600081516001600160401b0381111561080a5761080a612555565b604051908082528060200260200182016040528015610833578160200160208202803683370190505b509050808484815181106108495761084961282f565b6020026020010181905250336001600160a01b0316826000815181106108715761087161282f565b6020026020010151600001516001600160a01b0316141580156108c65750610a116001600160a01b0316826000815181106108ae576108ae61282f565b6020026020010151600001516001600160a01b031614155b156108e457604051632d618d8160e21b815260040160405180910390fd5b60005b8251811015610ab55760008382815181106109045761090461282f565b6020026020010151905061091781611984565b8383815181106109295761092961282f565b60200260200101818152505080602001516001600160a01b03163b6000036109dc57600061099e61099461095b61056a565b86868151811061096d5761096d61282f565b602002602001015160405161190160f01b8152600281019290925260228201526042902090565b8360a00151611c2b565b905081602001516001600160a01b0316816001600160a01b0316146109d657604051630f6d9e4760e21b815260040160405180910390fd5b50610aac565b60006109fb6109e961056a565b85858151811061096d5761096d61282f565b9050600082602001516001600160a01b0316631626ba7e838560a001516040518363ffffffff1660e01b8152600401610a3592919061293b565b602060405180830381865afa158015610a52573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a76919061295c565b6001600160e01b0319169050630b135d3f60e11b8114610aa95760405163155ff42760e01b815260040160405180910390fd5b50505b506001016108e7565b5060005b8251811015610c755760046000838381518110610ad857610ad861282f565b60209081029190910181015182528101919091526040016000205460ff1615610b14576040516302dd502960e11b815260040160405180910390fd5b60018351610b22919061299c565b8114610c2b5781610b348260016129af565b81518110610b4457610b4461282f565b6020026020010151838281518110610b5e57610b5e61282f565b60200260200101516040015114610b8857604051636f6a1b8760e11b815260040160405180910390fd5b600083610b968360016129af565b81518110610ba657610ba661282f565b6020026020010151600001519050610a116001600160a01b0316816001600160a01b031614158015610c075750806001600160a01b0316848381518110610bef57610bef61282f565b6020026020010151602001516001600160a01b031614155b15610c2557604051632d618d8160e21b815260040160405180910390fd5b50610c6d565b60001960001b838281518110610c4357610c4361282f565b60200260200101516040015114610c6d57604051636f6a1b8760e11b815260040160405180910390fd5b600101610ab9565b50505b506001016106a8565b5060005b83811015610ea6576000838281518110610ca157610ca161282f565b6020026020010151511115610e9e5760005b838281518110610cc557610cc561282f565b602002602001015151811015610e9c576000848381518110610ce957610ce961282f565b60200260200101518281518110610d0257610d0261282f565b602002602001015160600151905060005b8151811015610e92576000828281518110610d3057610d3061282f565b6020026020010151600001519050806001600160a01b031663414c3e33848481518110610d5f57610d5f61282f565b602002602001015160200151858581518110610d7d57610d7d61282f565b6020026020010151604001518f8f8a818110610d9b57610d9b61282f565b905060200201358e8e8b818110610db457610db461282f565b9050602002810190610dc69190612845565b8c8c81518110610dd857610dd861282f565b60200260200101518b81518110610df157610df161282f565b60200260200101518e8d81518110610e0b57610e0b61282f565b60200260200101518c81518110610e2457610e2461282f565b602002602001015160200151336040518963ffffffff1660e01b8152600401610e549897969594939291906129c2565b600060405180830381600087803b158015610e6e57600080fd5b505af1158015610e82573d6000803e3d6000fd5b5050505050806001019050610d13565b5050600101610cb3565b505b600101610c85565b5060005b838110156114ca57828181518110610ec457610ec461282f565b602002602001015151600003610f82573363d691c964898984818110610eec57610eec61282f565b90506020020135888885818110610f0557610f0561282f565b9050602002810190610f179190612845565b6040518463ffffffff1660e01b8152600401610f3593929190612a2d565b6000604051808303816000875af1158015610f54573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610f7c9190810190612a50565b506114c2565b60005b838281518110610f9757610f9761282f565b60200260200101515181101561116e576000848381518110610fbb57610fbb61282f565b60200260200101518281518110610fd457610fd461282f565b602002602001015160600151905060005b81518110156111645760008282815181106110025761100261282f565b6020026020010151600001519050806001600160a01b031663a145832a8484815181106110315761103161282f565b60200260200101516020015185858151811061104f5761104f61282f565b6020026020010151604001518f8f8a81811061106d5761106d61282f565b905060200201358e8e8b8181106110865761108661282f565b90506020028101906110989190612845565b8c8c815181106110aa576110aa61282f565b60200260200101518b815181106110c3576110c361282f565b60200260200101518e8d815181106110dd576110dd61282f565b60200260200101518c815181106110f6576110f661282f565b602002602001015160200151336040518963ffffffff1660e01b81526004016111269897969594939291906129c2565b600060405180830381600087803b15801561114057600080fd5b505af1158015611154573d6000803e3d6000fd5b5050505050806001019050610fe5565b5050600101610f85565b508281815181106111815761118161282f565b6020026020010151600184838151811061119d5761119d61282f565b6020026020010151516111b0919061299c565b815181106111c0576111c061282f565b6020026020010151602001516001600160a01b031663d691c9648989848181106111ec576111ec61282f565b905060200201358888858181106112055761120561282f565b90506020028101906112179190612845565b6040518463ffffffff1660e01b815260040161123593929190612a2d565b6000604051808303816000875af1158015611254573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405261127c9190810190612a50565b5060008382815181106112915761129161282f565b60200260200101515190505b80156114c05760008483815181106112b7576112b761282f565b60200260200101516001836112cc919061299c565b815181106112dc576112dc61282f565b60200260200101516060015190506000815190505b80156114ad5760008261130560018461299c565b815181106113155761131561282f565b6020026020010151600001519050806001600160a01b031663d3eddcc584600185611340919061299c565b815181106113505761135061282f565b6020026020010151602001518560018661136a919061299c565b8151811061137a5761137a61282f565b6020026020010151604001518f8f8a8181106113985761139861282f565b905060200201358e8e8b8181106113b1576113b161282f565b90506020028101906113c39190612845565b8c8c815181106113d5576113d561282f565b602002602001015160018c6113ea919061299c565b815181106113fa576113fa61282f565b60200260200101518e8d815181106114145761141461282f565b602002602001015160018d611429919061299c565b815181106114395761143961282f565b602002602001015160200151336040518963ffffffff1660e01b81526004016114699897969594939291906129c2565b600060405180830381600087803b15801561148357600080fd5b505af1158015611497573d6000803e3d6000fd5b5050505050806114a690612b2f565b90506112f1565b5050806114b990612b2f565b905061129d565b505b600101610eaa565b5060005b838110156117465760008382815181106114ea576114ea61282f565b602002602001015151111561173e57600083828151811061150d5761150d61282f565b60200260200101515190505b801561173c5760008483815181106115335761153361282f565b6020026020010151600183611548919061299c565b815181106115585761155861282f565b60200260200101516060015190506000815190505b80156117295760008261158160018461299c565b815181106115915761159161282f565b6020026020010151600001519050806001600160a01b031663ed463367846001856115bc919061299c565b815181106115cc576115cc61282f565b602002602001015160200151856001866115e6919061299c565b815181106115f6576115f661282f565b6020026020010151604001518f8f8a8181106116145761161461282f565b905060200201358e8e8b81811061162d5761162d61282f565b905060200281019061163f9190612845565b8c8c815181106116515761165161282f565b602002602001015160018c611666919061299c565b815181106116765761167661282f565b60200260200101518e8d815181106116905761169061282f565b602002602001015160018d6116a5919061299c565b815181106116b5576116b561282f565b602002602001015160200151336040518963ffffffff1660e01b81526004016116e59897969594939291906129c2565b600060405180830381600087803b1580156116ff57600080fd5b505af1158015611713573d6000803e3d6000fd5b50505050508061172290612b2f565b905061156d565b50508061173590612b2f565b9050611519565b505b6001016114ce565b5060005b838110156118855760008382815181106117665761176661282f565b602002602001015151111561187d5760005b83828151811061178a5761178a61282f565b60200260200101515181101561187b57336001600160a01b03168483815181106117b6576117b661282f565b602002602001015160018685815181106117d2576117d261282f565b6020026020010151516117e5919061299c565b815181106117f5576117f561282f565b6020026020010151602001516001600160a01b03167f40dadaa36c6c2e3d7317e24757451ffb2d603d875f0ad5e92c5dd156573b187386858151811061183d5761183d61282f565b602002602001015184815181106118565761185661282f565b602002602001015160405161186b9190612b46565b60405180910390a3600101611778565b505b60010161174a565b50505050505050505050565b611899611902565b600180546001600160a01b0383166001600160a01b031990911681179091556118ca6000546001600160a01b031690565b6001600160a01b03167f38d16b8cac22d99fc7c124b9cd0de2d3fa1faef420bfe791d8c362d765e2270060405160405180910390a350565b6000546001600160a01b031633146104045760405163118cdaa760e01b8152336004820152602401610555565b611937611c55565b6001805460ff60a01b191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b6000807f88c1d2ecf185adf710588203a5f263f0ff61be0d33da39792cde19ba9aa4331e8360000151846020015185604001516119c48760600151611c7f565b6080808901516040805160208101989098526001600160a01b03968716908801529490931660608601529184015260a083015260c082015260e0015b60408051601f1981840301815291905280516020909101209392505050565b600180546001600160a01b031916905561056781611d4a565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015611a9157507f000000000000000000000000000000000000000000000000000000000000000046145b15611abb57507f000000000000000000000000000000000000000000000000000000000000000090565b610574604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b611b6b611c00565b6001805460ff60a01b1916600160a01b1790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586119673390565b60606105747f00000000000000000000000000000000000000000000000000000000000000006002611d9a565b60606105747f00000000000000000000000000000000000000000000000000000000000000006003611d9a565b600154600160a01b900460ff16156104045760405163d93c066560e01b815260040160405180910390fd5b600080600080611c3b8686611e45565b925092509250611c4b8282611e92565b5090949350505050565b600154600160a01b900460ff1661040457604051638dfc202b60e01b815260040160405180910390fd5b60008082516001600160401b03811115611c9b57611c9b612555565b604051908082528060200260200182016040528015611cc4578160200160208202803683370190505b50905060005b8351811015611d1a57611cf5848281518110611ce857611ce861282f565b6020026020010151611f4f565b828281518110611d0757611d0761282f565b6020908102919091010152600101611cca565b5080604051602001611d2c9190612c33565b60405160208183030381529060405280519060200120915050919050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b606060ff8314611db457611dad83611fb0565b9050610509565b818054611dc090612c69565b80601f0160208091040260200160405190810160405280929190818152602001828054611dec90612c69565b8015611e395780601f10611e0e57610100808354040283529160200191611e39565b820191906000526020600020905b815481529060010190602001808311611e1c57829003601f168201915b50505050509050610509565b60008060008351604103611e7f5760208401516040850151606086015160001a611e7188828585611fef565b955095509550505050611e8b565b50508151600091506002905b9250925092565b6000826003811115611ea657611ea6612ca3565b03611eaf575050565b6001826003811115611ec357611ec3612ca3565b03611ee15760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611ef557611ef5612ca3565b03611f165760405163fce698f760e01b815260048101829052602401610555565b6003826003811115611f2a57611f2a612ca3565b03611f4b576040516335e2f38360e21b815260048101829052602401610555565b5050565b6000807f80ad7e1b04ee6d994a125f4714ca0720908bd80ed16063ec8aee4b88e9253e2d8360000151846020015180519060200120604051602001611a00939291909283526001600160a01b03919091166020830152604082015260600190565b60606000611fbd836120be565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a084111561202a57506000915060039050826120b4565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa15801561207e573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b0381166120aa575060009250600191508290506120b4565b9250600091508190505b9450945094915050565b600060ff8216601f81111561050957604051632cd44ac360e21b815260040160405180910390fd5b6000602082840312156120f857600080fd5b5035919050565b60006020828403121561211157600080fd5b81356001600160401b0381111561212757600080fd5b820160c0818503121561213957600080fd5b9392505050565b60005b8381101561215b578181015183820152602001612143565b50506000910152565b6000815180845261217c816020860160208601612140565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e060208401526121b160e084018a612164565b83810360408501526121c3818a612164565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b81811015612217578351835292840192918401916001016121fb565b50909c9b505050505050505050505050565b6020815260006121396020830184612164565b60008083601f84011261224e57600080fd5b5081356001600160401b0381111561226557600080fd5b6020830191508360208260051b850101111561228057600080fd5b9250929050565b600080600080600080606087890312156122a057600080fd5b86356001600160401b03808211156122b757600080fd5b6122c38a838b0161223c565b909850965060208901359150808211156122dc57600080fd5b6122e88a838b0161223c565b9096509450604089013591508082111561230157600080fd5b5061230e89828a0161223c565b979a9699509497509295939492505050565b80356001600160a01b038116811461233757600080fd5b919050565b60006020828403121561234e57600080fd5b61213982612320565b6000808335601e1984360301811261236e57600080fd5b83016020810192503590506001600160401b0381111561238d57600080fd5b80360382131561228057600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561247657858403601f19018a52823536899003605e19018112612404578283fd5b880160606001600160a01b0361241983612320565b16865261242887830183612357565b828989015261243a838901828461239c565b92505050604061244c81840184612357565b93508783038289015261246083858361239c565b9d89019d975050509386019350506001016123df565b509198975050505050505050565b6020815260006001600160a01b038061249c85612320565b166020840152806124af60208601612320565b16604084015250604083013560608301526060830135601e198436030181126124d757600080fd5b83016020810190356001600160401b038111156124f357600080fd5b8060051b360382131561250557600080fd5b60c0608085015261251a60e0850182846123c5565b915050608084013560a084015261253460a0850185612357565b848303601f190160c086015261254b83828461239c565b9695505050505050565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b038111828210171561258d5761258d612555565b60405290565b60405160c081016001600160401b038111828210171561258d5761258d612555565b604051601f8201601f191681016001600160401b03811182821017156125dd576125dd612555565b604052919050565b60006001600160401b038211156125fe576125fe612555565b5060051b60200190565b60006001600160401b0382111561262157612621612555565b50601f01601f191660200190565b600082601f83011261264057600080fd5b813561265361264e82612608565b6125b5565b81815284602083860101111561266857600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f83011261269657600080fd5b813560206126a661264e836125e5565b82815260059290921b840181019181810190868411156126c557600080fd5b8286015b848110156127745780356001600160401b03808211156126e95760008081fd5b908801906060828b03601f19018113156127035760008081fd5b61270b61256b565b612716888501612320565b81526040808501358481111561272c5760008081fd5b61273a8e8b8389010161262f565b838b0152509184013591838311156127525760008081fd5b6127608d8a8588010161262f565b9082015286525050509183019183016126c9565b509695505050505050565b600060c0828403121561279157600080fd5b612799612593565b90506127a482612320565b81526127b260208301612320565b60208201526040820135604082015260608201356001600160401b03808211156127db57600080fd5b6127e785838601612685565b60608401526080840135608084015260a084013591508082111561280a57600080fd5b506128178482850161262f565b60a08301525092915050565b6000610509368361277f565b634e487b7160e01b600052603260045260246000fd5b6000808335601e1984360301811261285c57600080fd5b8301803591506001600160401b0382111561287657600080fd5b60200191503681900382131561228057600080fd5b6000602080838503121561289e57600080fd5b82356001600160401b03808211156128b557600080fd5b818501915085601f8301126128c957600080fd5b81356128d761264e826125e5565b81815260059190911b830184019084810190888311156128f657600080fd5b8585015b8381101561292e578035858111156129125760008081fd5b6129208b89838a010161277f565b8452509186019186016128fa565b5098975050505050505050565b8281526040602082015260006129546040830184612164565b949350505050565b60006020828403121561296e57600080fd5b81516001600160e01b03198116811461213957600080fd5b634e487b7160e01b600052601160045260246000fd5b8181038181111561050957610509612986565b8082018082111561050957610509612986565b60e0815260006129d560e083018b612164565b82810360208401526129e7818b612164565b90508860408401528281036060840152612a0281888a61239c565b608084019690965250506001600160a01b0392831660a0820152911660c09091015295945050505050565b838152604060208201526000612a4760408301848661239c565b95945050505050565b60006020808385031215612a6357600080fd5b82516001600160401b0380821115612a7a57600080fd5b818501915085601f830112612a8e57600080fd5b8151612a9c61264e826125e5565b81815260059190911b83018401908481019088831115612abb57600080fd5b8585015b8381101561292e57805185811115612ad75760008081fd5b8601603f81018b13612ae95760008081fd5b878101516040612afb61264e83612608565b8281528d82848601011115612b105760008081fd5b612b1f838c8301848701612140565b8652505050918601918601612abf565b600081612b3e57612b3e612986565b506000190190565b602080825282516001600160a01b0390811683830152838201518116604080850191909152808501516060808601919091528086015160c06080870152805160e0870181905260009594610100600583901b8901810195919493870193919290890190885b81811015612c055760ff198b8903018352855187815116895289810151858b8b0152612bd9868b0182612164565b918701518a83038b890152919050612bf18183612164565b995050509488019491880191600101612bab565b50505050505050608085015160a085015260a08501519150601f198482030160c0850152612a478183612164565b815160009082906020808601845b83811015612c5d57815185529382019390820190600101612c41565b50929695505050505050565b600181811c90821680612c7d57607f821691505b602082108103612c9d57634e487b7160e01b600052602260045260246000fd5b50919050565b634e487b7160e01b600052602160045260246000fdfea2646970667358221220ca409e8c9582544b3b8d8c05ed7b77fb8b148a77f098b1aea58f1517227de31d64736f6c634300081700338b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f",JMe={};we(JMe,{abi:()=>ZMe,bytecode:()=>XMe});var ZMe=[{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]}],XMe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212204f453c45fd8890597438ba3740ed042994be373737c9bd8ac833ff249df3eaab64736f6c63430008170033",QMe={};we(QMe,{abi:()=>ePe,bytecode:()=>tPe});var ePe=[{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]}],tPe="0x",z7={};we(z7,{abi:()=>nPe,bytecode:()=>rPe});var nPe=[{type:"constructor",inputs:[{name:"implementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],stateMutability:"payable"},{type:"fallback",stateMutability:"payable"},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]}],rPe="0x60806040526040516103f03803806103f08339810160408190526100229161025e565b61002c8282610033565b5050610341565b61003c82610091565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b905f90a280511561008557610080828261010c565b505050565b61008d61017f565b5050565b806001600160a01b03163b5f036100cb57604051634c9c8ce360e01b81526001600160a01b03821660048201526024015b60405180910390fd5b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc80546001600160a01b0319166001600160a01b0392909216919091179055565b60605f80846001600160a01b0316846040516101289190610326565b5f60405180830381855af49150503d805f8114610160576040519150601f19603f3d011682016040523d82523d5f602084013e610165565b606091505b5090925090506101768583836101a0565b95945050505050565b341561019e5760405163b398979f60e01b815260040160405180910390fd5b565b6060826101b5576101b0826101ff565b6101f8565b81511580156101cc57506001600160a01b0384163b155b156101f557604051639996b31560e01b81526001600160a01b03851660048201526024016100c2565b50805b9392505050565b80511561020f5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b634e487b7160e01b5f52604160045260245ffd5b5f5b8381101561025657818101518382015260200161023e565b50505f910152565b5f806040838503121561026f575f80fd5b82516001600160a01b0381168114610285575f80fd5b60208401519092506001600160401b03808211156102a1575f80fd5b818501915085601f8301126102b4575f80fd5b8151818111156102c6576102c6610228565b604051601f8201601f19908116603f011681019083821181831017156102ee576102ee610228565b81604052828152886020848701011115610306575f80fd5b61031783602083016020880161023c565b80955050505050509250929050565b5f825161033781846020870161023c565b9190910192915050565b60a38061034d5f395ff3fe6080604052600a600c565b005b60186014601a565b6050565b565b5f604b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc546001600160a01b031690565b905090565b365f80375f80365f845af43d5f803e8080156069573d5ff35b3d5ffdfea2646970667358221220fd2cc92935c943d341edacaf5318a0b9ab0185ce62ef72e95ab393ef358730c464736f6c63430008170033",aPe={};we(aPe,{abi:()=>iPe,bytecode:()=>sPe});var iPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"dataStart_",type:"uint256",internalType:"uint256"},{name:"value_",type:"bytes",internalType:"bytes"}],stateMutability:"pure"}],sPe="0x608060405234801561001057600080fd5b506106dc806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046104a2565b50505050505050505050565b005b6100766100863660046104a2565b6100b5565b61009e61009936600461056f565b610198565b6040516100ac9291906105b1565b60405180910390f35b856100c1816000610265565b6101125760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b610123816000610265565b61017d5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610109565b5061018a8c8c898961027c565b505050505050505050505050565b6000606060218310156102005760405162461bcd60e51b815260206004820152602a60248201527f416c6c6f77656443616c6c64617461456e666f726365723a696e76616c69642d6044820152697465726d732d73697a6560b01b6064820152608401610109565b61020e602060008587610608565b61021791610632565b91506102268360208187610608565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250949792965091945050505050565b6001600160f81b0319828116908216145b92915050565b6000606036600061028d86866103d6565b93509350505061029d8888610198565b80519195509350816102af8287610650565b11156103155760405162461bcd60e51b815260206004820152602f60248201527f416c6c6f77656443616c6c64617461456e666f726365723a696e76616c69642d60448201526e0c6c2d8d8c8c2e8c25ad8cadccee8d608b1b6064820152608401610109565b61036e8386846103258583610650565b9261033293929190610608565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250889250610427915050565b6103cb5760405162461bcd60e51b815260206004820152602860248201527f416c6c6f77656443616c6c64617461456e666f726365723a696e76616c69642d60448201526763616c6c6461746160c01b6064820152608401610109565b505050505050505050565b60008036816103e86014828789610608565b6103f191610671565b60601c9350610404603460148789610608565b61040d91610632565b925061041c8560348189610608565b949793965094505050565b8051602091820120825192909101919091201490565b60008083601f84011261044f57600080fd5b50813567ffffffffffffffff81111561046757600080fd5b60208301915083602082850101111561047f57600080fd5b9250929050565b80356001600160a01b038116811461049d57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156104c157600080fd5b8a3567ffffffffffffffff808211156104d957600080fd5b6104e58e838f0161043d565b909c509a5060208d01359150808211156104fe57600080fd5b61050a8e838f0161043d565b909a50985060408d0135975060608d013591508082111561052a57600080fd5b506105378d828e0161043d565b90965094505060808b0135925061055060a08c01610486565b915061055e60c08c01610486565b90509295989b9194979a5092959850565b6000806020838503121561058257600080fd5b823567ffffffffffffffff81111561059957600080fd5b6105a58582860161043d565b90969095509350505050565b8281526000602060406020840152835180604085015260005b818110156105e6578581018301518582016060015282016105ca565b506000606082860101526060601f19601f830116850101925050509392505050565b6000808585111561061857600080fd5b8386111561062557600080fd5b5050820193919092039150565b8035602083101561027657600019602084900360031b1b1692915050565b8082018082111561027657634e487b7160e01b600052601160045260246000fd5b6bffffffffffffffffffffffff19813581811691601485101561069e5780818660140360031b1b83161692505b50509291505056fea2646970667358221220040ece6946150f16c5413920be7d1b9c5d49d2aae2b6945d7da6faa6f92f5ef664736f6c63430008170033",oPe={};we(oPe,{abi:()=>cPe,bytecode:()=>dPe});var cPe=[],dPe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220e387e66c46ba5a334fec27a4edf89a8be9952b587b8297dbf10cb57e8c1726d964736f6c63430008170033",lPe={};we(lPe,{abi:()=>uPe,bytecode:()=>fPe});var uPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedContract_",type:"address",internalType:"address"},{name:"maxTokens_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"spentMap",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"limit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],fPe="0x608060405234801561001057600080fd5b5061081e806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e33146100675780639dd5d9ab14610083578063a145832a146100be578063b99deb0e146100d1578063d3eddcc514610067578063ed46336714610067575b600080fd5b6100816100753660046105c3565b50505050505050505050565b005b6100ab610091366004610690565b600060208181529281526040808220909352908152205481565b6040519081526020015b60405180910390f35b6100816100cc3660046105c3565b610103565b6100e46100df3660046106ba565b610247565b604080516001600160a01b0390931683526020830191909152016100b5565b8561010f8160006102df565b6101605760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101718160006102df565b6101cb5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610157565b506000806101dc8e8e8b8b8b6102f6565b9150915086856001600160a01b0316336001600160a01b03167fc026e493323d526061a052b5dd562495120e2f648797a48be61966d3a6beec8d858560405161022f929190918252602082015260400190565b60405180910390a45050505050505050505050505050565b600080603483146102a15760405162461bcd60e51b815260206004820152603060248201526000805160206107c983398151915260448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b6064820152608401610157565b6102af6014600085876106fc565b6102b891610726565b60601c91506102ca83601481876106fc565b6102d39161075b565b60001c90509250929050565b6001600160f81b0319828116908216145b92915050565b6000806000366000610308888861050d565b9295509350909150506044811461036c5760405162461bcd60e51b815260206004820152603460248201526000805160206107c98339815191526044820152730d8d2c85acaf0cac6eae8d2dedc5ad8cadccee8d60631b6064820152608401610157565b60006103788b8b610247565b965090506001600160a01b03808216908516146103da5760405162461bcd60e51b815260206004820152602c60248201526000805160206107c983398151915260448201526b1b1a590b58dbdb9d1c9858dd60a21b6064820152608401610157565b63a9059cbb60e01b6103f06004600085876106fc565b6103f991610779565b6001600160e01b031916146104515760405162461bcd60e51b815260206004820152602a60248201526000805160206107c98339815191526044820152691b1a590b5b595d1a1bd960b21b6064820152608401610157565b61045f6044602484866106fc565b6104689161075b565b336000908152602081815260408083208b8452909152812080549091906104909084906107a7565b9250508190559450858511156104ff5760405162461bcd60e51b815260206004820152602e60248201527f45524332305472616e73666572416d6f756e74456e666f726365723a616c6c6f60448201526d1dd85b98d94b595e18d95959195960921b6064820152608401610157565b505050509550959350505050565b600080368161051f60148287896106fc565b61052891610726565b60601c935061053b6034601487896106fc565b6105449161075b565b925061055385603481896106fc565b949793965094505050565b60008083601f84011261057057600080fd5b50813567ffffffffffffffff81111561058857600080fd5b6020830191508360208285010111156105a057600080fd5b9250929050565b80356001600160a01b03811681146105be57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156105e257600080fd5b8a3567ffffffffffffffff808211156105fa57600080fd5b6106068e838f0161055e565b909c509a5060208d013591508082111561061f57600080fd5b61062b8e838f0161055e565b909a50985060408d0135975060608d013591508082111561064b57600080fd5b506106588d828e0161055e565b90965094505060808b0135925061067160a08c016105a7565b915061067f60c08c016105a7565b90509295989b9194979a5092959850565b600080604083850312156106a357600080fd5b6106ac836105a7565b946020939093013593505050565b600080602083850312156106cd57600080fd5b823567ffffffffffffffff8111156106e457600080fd5b6106f08582860161055e565b90969095509350505050565b6000808585111561070c57600080fd5b8386111561071957600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156107535780818660140360031b1b83161692505b505092915050565b803560208310156102f057600019602084900360031b1b1692915050565b6001600160e01b031981358181169160048510156107535760049490940360031b84901b1690921692915050565b808201808211156102f057634e487b7160e01b600052601160045260246000fdfe45524332305472616e73666572416d6f756e74456e666f726365723a696e7661a2646970667358221220936350618a5001f34797bf97c50cd107709e028340c60e13df9fe9a2d10d7fb364736f6c63430008170033",pPe={};we(pPe,{abi:()=>hPe,bytecode:()=>bPe});var hPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegationManager",type:"address",internalType:"address"},{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"},{name:"isNewPeriod_",type:"bool",internalType:"bool"},{name:"currentPeriod_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"token_",type:"address",internalType:"address"},{name:"periodAmount_",type:"uint256",internalType:"uint256"},{name:"periodDuration_",type:"uint256",internalType:"uint256"},{name:"startDate_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"periodicAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"periodAmount",type:"uint256",internalType:"uint256"},{name:"periodDuration",type:"uint256",internalType:"uint256"},{name:"startDate",type:"uint256",internalType:"uint256"},{name:"lastTransferPeriod",type:"uint256",internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"TransferredInPeriod",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"token",type:"address",indexed:!1,internalType:"address"},{name:"periodAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"periodDuration",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startDate",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],bPe="0x608060405234801561001057600080fd5b50610d12806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063a145832a1161005b578063a145832a1461013e578063b99deb0e14610151578063d3eddcc514610082578063ed4633671461008257600080fd5b8063414c3e33146100825780636a9843f61461009e5780637b91dc78146100d1575b600080fd5b61009c610090366004610a20565b50505050505050505050565b005b6100b16100ac366004610aed565b61018e565b604080519384529115156020840152908201526060015b60405180910390f35b6101166100df366004610b47565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100c8565b61009c61014c366004610a20565b610265565b61016461015f366004610b71565b61034a565b604080516001600160a01b03909516855260208501939093529183015260608201526080016100c8565b6001600160a01b0383166000908152602081815260408083208784528252808320815160a081018352815481526001820154938101939093526002810154918301829052600381015460608401526004015460808301528291829115610203576101f781610416565b9350935093505061025b565b6000806000610212898961034a565b9350935093505060006040518060a00160405280858152602001848152602001838152602001600081526020016000815250905061024f81610416565b97509750975050505050505b9450945094915050565b856102718160006104aa565b6102c25760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6102d38160006104aa565b61032d5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016102b9565b5061033c8c8c898989886104c1565b505050505050505050505050565b6000808080607485146103a65760405162461bcd60e51b81526020600482015260306024820152600080516020610cbd83398151915260448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b60648201526084016102b9565b6103b4601460008789610bb3565b6103bd91610bdd565b60601c93506103d0603460148789610bb3565b6103d991610c12565b92506103e9605460348789610bb3565b6103f291610c12565b9150610402607460548789610bb3565b61040b91610c12565b939692955090935050565b60008060008360400151421015610435575060009150819050806104a3565b602084015160408501516104499042610c46565b6104539190610c59565b61045e906001610c7b565b90508084606001511415915060008261047b57846080015161047e565b60005b90508085600001511161049257600061049f565b845161049f908290610c46565b9350505b9193909250565b6001600160f81b0319828116908216145b92915050565b60003660006104d0878761096a565b929550935090915050604481146105345760405162461bcd60e51b81526020600482015260346024820152600080516020610cbd8339815191526044820152730d8d2c85acaf0cac6eae8d2dedc5ad8cadccee8d60631b60648201526084016102b9565b6000806000806105448d8d61034a565b9350935093509350866001600160a01b0316846001600160a01b0316146105b05760405162461bcd60e51b815260206004820152602c6024820152600080516020610cbd83398151915260448201526b1b1a590b58dbdb9d1c9858dd60a21b60648201526084016102b9565b63a9059cbb60e01b6105c660046000888a610bb3565b6105cf91610c8e565b6001600160e01b031916146106275760405162461bcd60e51b815260206004820152602a6024820152600080516020610cbd8339815191526044820152691b1a590b5b595d1a1bd960b21b60648201526084016102b9565b336000908152602081815260408083208c8452909152812060028101549091036107e157600082116106a55760405162461bcd60e51b81526020600482015260336024820152600080516020610cbd8339815191526044820152726c69642d7a65726f2d73746172742d6461746560681b60648201526084016102b9565b600084116107025760405162461bcd60e51b81526020600482015260366024820152600080516020610cbd8339815191526044820152751b1a590b5e995c9bcb5c195c9a5bd90b585b5bdd5b9d60521b60648201526084016102b9565b600083116107665760405162461bcd60e51b81526020600482015260386024820152600080516020610cbd83398151915260448201527f6c69642d7a65726f2d706572696f642d6475726174696f6e000000000000000060648201526084016102b9565b814210156107cf5760405162461bcd60e51b815260206004820152603060248201527f4552433230506572696f645472616e73666572456e666f726365723a7472616e60448201526f1cd9995c8b5b9bdd0b5cdd185c9d195960821b60648201526084016102b9565b83815560018101839055600281018290555b600080600061082c846040518060a001604052908160008201548152602001600182015481526020016002820154815260200160038201548152602001600482015481525050610416565b919450925090506000610843604460248c8e610bb3565b61084c91610c12565b9050838111156108bb5760405162461bcd60e51b815260206004820152603460248201527f4552433230506572696f645472616e73666572456e666f726365723a7472616e6044820152731cd9995c8b585b5bdd5b9d0b595e18d95959195960621b60648201526084016102b9565b82156108d05760038501829055600060048601555b808560040160008282546108e49190610c7b565b90915550506004850154604080516001600160a01b038c81168252602082018c90529181018a90526060810189905260808101929092524260a08301528f91908f169033907fb2a345c7f80b4be490c405f4a994faf85384dd05da7d70be0801dc31a8c253af9060c00160405180910390a4505050505050505050505050505050505050565b600080368161097c6014828789610bb3565b61098591610bdd565b60601c9350610998603460148789610bb3565b6109a191610c12565b92506109b08560348189610bb3565b949793965094505050565b60008083601f8401126109cd57600080fd5b50813567ffffffffffffffff8111156109e557600080fd5b6020830191508360208285010111156109fd57600080fd5b9250929050565b80356001600160a01b0381168114610a1b57600080fd5b919050565b60008060008060008060008060008060e08b8d031215610a3f57600080fd5b8a3567ffffffffffffffff80821115610a5757600080fd5b610a638e838f016109bb565b909c509a5060208d0135915080821115610a7c57600080fd5b610a888e838f016109bb565b909a50985060408d0135975060608d0135915080821115610aa857600080fd5b50610ab58d828e016109bb565b90965094505060808b01359250610ace60a08c01610a04565b9150610adc60c08c01610a04565b90509295989b9194979a5092959850565b60008060008060608587031215610b0357600080fd5b84359350610b1360208601610a04565b9250604085013567ffffffffffffffff811115610b2f57600080fd5b610b3b878288016109bb565b95989497509550505050565b60008060408385031215610b5a57600080fd5b610b6383610a04565b946020939093013593505050565b60008060208385031215610b8457600080fd5b823567ffffffffffffffff811115610b9b57600080fd5b610ba7858286016109bb565b90969095509350505050565b60008085851115610bc357600080fd5b83861115610bd057600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015610c0a5780818660140360031b1b83161692505b505092915050565b803560208310156104bb57600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b818103818111156104bb576104bb610c30565b600082610c7657634e487b7160e01b600052601260045260246000fd5b500490565b808201808211156104bb576104bb610c30565b6001600160e01b03198135818116916004851015610c0a5760049490940360031b84901b169092169291505056fe4552433230506572696f645472616e73666572456e666f726365723a696e7661a264697066735822122078259b929dc2fea71614ebe238bd74e88ff3ea3542e0d11a18122c300122d3f664736f6c63430008170033",yPe={};we(yPe,{abi:()=>mPe,bytecode:()=>gPe});var mPe=[{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],gPe="0x",wPe={};we(wPe,{abi:()=>vPe,bytecode:()=>EPe});var vPe=[],EPe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220ac220b672ee89e055a56513b249d66df06ecb6da367b913fa0b7b7f3f838634764736f6c63430008170033",_Pe={};we(_Pe,{abi:()=>TPe,bytecode:()=>xPe});var TPe=[{type:"event",name:"AdminChanged",inputs:[{name:"previousAdmin",type:"address",indexed:!1,internalType:"address"},{name:"newAdmin",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"BeaconUpgraded",inputs:[{name:"beacon",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"ERC1967InvalidAdmin",inputs:[{name:"admin",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidBeacon",inputs:[{name:"beacon",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]}],xPe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220bf999523a2735d33a4f148563c82738a41cc465257ff9df9a8912b831ab5af9564736f6c63430008170033",SPe={};we(SPe,{abi:()=>APe,bytecode:()=>CPe});var APe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_entryPoint",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"InvalidEIP712NameLength",inputs:[]},{type:"error",name:"InvalidEIP712VersionLength",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UnauthorizedCallContext",inputs:[]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],CPe="0x6101c060405230610160523480156200001757600080fd5b50604051620031b0380380620031b08339810160408190526200003a91620002b3565b81816040518060400160405280601981526020017f4549503737303253746174656c65737344656c654761746f7200000000000000815250604051806040016040528060018152602001603160f81b8152508181620000a46000836200021560201b90919060201c565b61012052620000b581600162000215565b61014052815160208084019190912060e052815190820120610100524660a0526200014360e05161010051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60805250503060c0528151601f10156200017057604051631ad9af3960e21b815260040160405180910390fd5b601f8151111562000194576040516309203c9d60e41b815260040160405180910390fd5b6001600160a01b038085166101808190529084166101a0526040517fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038416907fee8699dc0e27105da2653bdba54be0edcaadc3e33890a3ad705517ffe9bf0a9990600090a2505050505050620004db565b600060208351101562000235576200022d836200024e565b905062000248565b8162000242848262000399565b5060ff90505b92915050565b600080829050601f8151111562000285578260405163305a27a960e01b81526004016200027c919062000465565b60405180910390fd5b80516200029282620004b6565b179392505050565b6001600160a01b0381168114620002b057600080fd5b50565b60008060408385031215620002c757600080fd5b8251620002d4816200029a565b6020840151909250620002e7816200029a565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200031d57607f821691505b6020821081036200033e57634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111562000394576000816000526020600020601f850160051c810160208610156200036f5750805b601f850160051c820191505b8181101562000390578281556001016200037b565b5050505b505050565b81516001600160401b03811115620003b557620003b5620002f2565b620003cd81620003c6845462000308565b8462000344565b602080601f831160018114620004055760008415620003ec5750858301515b600019600386901b1c1916600185901b17855562000390565b600085815260208120601f198616915b82811015620004365788860151825594840194600190910190840162000415565b5085821015620004555787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020808352835180602085015260005b81811015620004955785810183015185820160400152820162000477565b506000604082860101526040601f19601f8301168501019250505092915050565b805160208083015191908110156200033e5760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a051612bb1620005ff60003960008181610471015281816107f7015281816108c20152818161094001528181610aa401528181610b9a01528181610bf201528181610c7401528181610ce601528181610e1001528181610e8f01528181611015015281816112cd01526115ce01526000818161057a015281816109a301528181610a2601528181610b0701528181610ef201526110590152600081816106190152818161073a015281816107960152818161083f01528181610b4601528181610da7015261162101526000611960015260006119330152600061174c015260006117240152600061167f015260006116a9015260006116d30152612bb16000f3fe6080604052600436106101c65760003560e01c806384b0196e116100f7578063d03c791411610095578063ea4d3c9b11610064578063ea4d3c9b14610568578063ed8101b51461059c578063f23a6e61146105bc578063ffa1ad74146105dc57600080fd5b8063d03c791414610500578063d087d28814610520578063d691c96414610535578063e9ae5c531461055557600080fd5b8063b0d691fe116100d1578063b0d691fe1461045f578063bc197c81146104ab578063c399ec88146104cb578063cef6d209146104e057600080fd5b806384b0196e146103b4578063a3f4df7e146103dc578063acb8cc491461043257600080fd5b80633ed01015116101645780634a58db191161013e5780634a58db19146103645780635c1c6dcd1461036c5780637f07bfdc1461037f57806383ebb7711461039f57600080fd5b80633ed0101514610302578063445140b814610324578063499340471461034457600080fd5b80631626ba7e116101a05780631626ba7e1461026e57806319822f7c1461028e5780632b3afd99146102ae5780633e1b0812146102e257600080fd5b806301ffc9a7146101d257806306394d6714610207578063150b7a021461023557600080fd5b366101cd57005b600080fd5b3480156101de57600080fd5b506101f26101ed366004611fb2565b61060d565b60405190151581526020015b60405180910390f35b34801561021357600080fd5b50610227610222366004611ff5565b6106f9565b6040519081526020016101fe565b34801561024157600080fd5b506102556102503660046120fb565b61072e565b6040516001600160e01b031990911681526020016101fe565b34801561027a57600080fd5b506102556102893660046121ae565b61078a565b34801561029a57600080fd5b506102276102a93660046121f9565b6107ea565b3480156102ba57600080fd5b506102277fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1881565b3480156102ee57600080fd5b506102276102fd366004612246565b61089b565b34801561030e57600080fd5b5061032261031d36600461226f565b610935565b005b34801561033057600080fd5b506101f261033f3660046122a9565b610a0d565b34801561035057600080fd5b5061032261035f36600461226f565b610a99565b610322610b3c565b61032261037a3660046122c2565b610be7565b34801561038b57600080fd5b5061032261039a3660046122fc565b610c69565b3480156103ab57600080fd5b50610227610d46565b3480156103c057600080fd5b506103c9610d55565b6040516101fe979695949392919061236e565b3480156103e857600080fd5b506104256040518060400160405280601981526020017f4549503737303253746174656c65737344656c654761746f720000000000000081525081565b6040516101fe9190612407565b34801561043e57600080fd5b50610425604051806040016040528060018152602001603160f81b81525081565b34801561046b57600080fd5b506104937f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020016101fe565b3480156104b757600080fd5b506102556104c6366004612499565b610d9b565b3480156104d757600080fd5b50610227610df8565b3480156104ec57600080fd5b506103226104fb36600461258a565b610e84565b34801561050c57600080fd5b506101f261051b3660046122a9565b610f6b565b34801561052c57600080fd5b50610227610ff6565b6105486105433660046121ae565b61104c565b6040516101fe9190612623565b6103226105633660046121ae565b6112c2565b34801561057457600080fd5b506104937f000000000000000000000000000000000000000000000000000000000000000081565b3480156105a857600080fd5b506102276105b7366004611ff5565b6114d3565b3480156105c857600080fd5b506102556105d7366004612687565b611615565b3480156105e857600080fd5b50610425604051806040016040528060058152602001640312e332e360dc1b81525081565b60006001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361065857604051634f81d01360e11b815260040160405180910390fd5b6001600160e01b031982166335a4725960e21b148061068757506001600160e01b03198216630a85bd0160e11b145b806106a257506001600160e01b03198216630271189760e51b145b806106bd57506001600160e01b031982166301ffc9a760e01b145b806106d857506001600160e01b03198216630b135d3f60e11b145b806106f357506001600160e01b03198216633992254760e01b145b92915050565b60006106f3610706611672565b61070f846114d3565b60405161190160f01b8152600281019290925260228201526042902090565b60006001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361077957604051634f81d01360e11b815260040160405180910390fd5b50630a85bd0160e11b949350505050565b60006001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001630036107d557604051634f81d01360e11b815260040160405180910390fd5b6107e084848461179d565b90505b9392505050565b6000336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461083557604051636b31ba1560e11b815260040160405180910390fd5b6001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361087e57604051634f81d01360e11b815260040160405180910390fd5b6108908461088b866106f9565b611816565b90506107e38261185e565b604051631aab3f0d60e11b81523060048201526001600160c01b03821660248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401602060405180830381865afa158015610911573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106f391906126ef565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061096e5750333014155b1561098c57604051630796d94560e01b815260040160405180910390fd5b604051633ed0101560e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690633ed01015906109d8908490600401612837565b600060405180830381600087803b1580156109f257600080fd5b505af1158015610a06573d6000803e3d6000fd5b5050505050565b6040516316a0682960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690632d40d05290602401602060405180830381865afa158015610a75573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106f39190612908565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ad25750333014155b15610af057604051630796d94560e01b815260040160405180910390fd5b604051634993404760e01b81526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016906349934047906109d8908490600401612837565b6001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163003610b8557604051634f81d01360e11b815260040160405180910390fd5b60405163b760faf960e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063b760faf99034906024016000604051808303818588803b1580156109f257600080fd5b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610c205750333014155b15610c3e57604051630796d94560e01b815260040160405180910390fd5b610c65610c4e602083018361292a565b6020830135610c606040850185612947565b6118f6565b5050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ca25750333014155b15610cc057604051630796d94560e01b815260040160405180910390fd5b60405163040b850f60e31b81526001600160a01b038381166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063205c287890604401600060405180830381600087803b158015610d2a57600080fd5b505af1158015610d3e573d6000803e3d6000fd5b505050505050565b6000610d50611672565b905090565b600060608060008060006060610d6961192c565b610d71611959565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b60006001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000163003610de657604051634f81d01360e11b815260040160405180910390fd5b5063bc197c8160e01b95945050505050565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a08231906024015b602060405180830381865afa158015610e60573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5091906126ef565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ebd5750333014155b15610edb57604051630796d94560e01b815260040160405180910390fd5b60405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d20990610f31908990899089908990899089906004016129ee565b600060405180830381600087803b158015610f4b57600080fd5b505af1158015610f5f573d6000803e3d6000fd5b50505050505050505050565b600081600881901b603082901b605083901b610f878486611986565b80610f9b5750610f9b84600160f81b611986565b8015610fc15750610fad836000611986565b80610fc15750610fc183600160f81b611986565b8015610fd557506001600160e01b03198216155b8015610fec575069ffffffffffffffffffff198116155b9695505050505050565b604051631aab3f0d60e11b8152306004820152600060248201819052907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401610e43565b6060336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461109757604051630692ce8160e21b815260040160405180910390fd5b83600881901b6110ab82600160f81b611986565b15611131573660006110bd8787611998565b90925090506110cd836000611986565b156110e3576110dc8282611a31565b945061112a565b6110f183600160f81b611986565b15611100576110dc8282611af2565b6040516308c3ee0360e11b81526001600160f81b0319841660048201526024015b60405180910390fd5b50506112b9565b61113c826000611986565b15611294576000803660006111518989611c1f565b6040805160018082528183019092529498509296509094509250816020015b606081526020019060019003908161117057905050965060006111938682611986565b156111c7576111a4858585856118f6565b886000815181106111b7576111b7612a57565b602002602001018190525061128a565b6111d586600160f81b611986565b15611265576111e685858585611c70565b896000815181106111f9576111f9612a57565b6020908102919091010152905080611260577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb760008960008151811061124157611241612a57565b6020026020010151604051611257929190612a6d565b60405180910390a15b61128a565b6040516308c3ee0360e11b81526001600160f81b031987166004820152602401611121565b50505050506112b9565b604051632e5bf3f960e21b81526001600160f81b031983166004820152602401611121565b50509392505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906112fb5750333014155b1561131957604051630796d94560e01b815260040160405180910390fd5b82600881901b61132d82600160f81b611986565b156113885736600061133f8686611998565b909250905061134f836000611986565b156113645761135e8282611a31565b50611381565b61137283600160f81b611986565b156111005761135e8282611af2565b5050610a06565b611393826000611986565b15611294576000803660006113a88888611c1f565b93509350935093506113be85600060f81b611986565b156113d5576113cf848484846118f6565b506114ca565b6113e385600160f81b611986565b156114a557604080516001808252818301909252600091816020015b60608152602001906001900390816113ff579050509050600061142486868686611c70565b8360008151811061143757611437612a57565b602090810291909101015290508061149e577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb760008360008151811061147f5761147f612a57565b6020026020010151604051611495929190612a6d565b60405180910390a15b50506114ca565b6040516308c3ee0360e11b81526001600160f81b031986166004820152602401611121565b50505050610a06565b60007fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc18611503602084018461292a565b60208401356115156040860186612947565b604051611523929190612a86565b6040519081900390206115396060870187612947565b604051611547929190612a86565b604051908190039020608087013560a088013560c089013561156c60e08b018b612947565b60405161157a929190612a86565b60408051918290038220602083019a909a526001600160a01b03988916908201526060810196909652608086019490945260a085019290925260c084015260e08301526101008201526101208101929092527f00000000000000000000000000000000000000000000000000000000000000001661014082015261016001604051602081830303815290604052805190602001209050919050565b60006001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016300361166057604051634f81d01360e11b815260040160405180910390fd5b5063f23a6e6160e01b95945050505050565b6000306001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480156116cb57507f000000000000000000000000000000000000000000000000000000000000000046145b156116f557507f000000000000000000000000000000000000000000000000000000000000000090565b610d50604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b6000306001600160a01b03166117e98585858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250611ca192505050565b6001600160a01b0316036118055750630b135d3f60e11b6107e3565b506001600160e01b03199392505050565b6000806118308361182b610100870187612947565b61179d565b90506374eca2c160e11b6001600160e01b03198216016118545760009150506106f3565b5060019392505050565b80156118f357604051600090339060001990849084818181858888f193505050503d80600081146118ab576040519150601f19603f3d011682016040523d82523d6000602084013e6118b0565b606091505b505060408051848152821515602082015291925033917fa427c7d47f24d01b170779a7600b1d4c0d7cdbabaa0f19c4f0e6182053ffc931910160405180910390a2505b50565b60405181838237600038838387895af1611913573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b6060610d507f00000000000000000000000000000000000000000000000000000000000000006000611ccb565b6060610d507f00000000000000000000000000000000000000000000000000000000000000006001611ccb565b6001600160f81b031990811691161490565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156119d05763ba597e7e6000526004601cfd5b8315611a27578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c1715611a1e5763ba597e7e6000526004601cfd5b505050826119da575b5050509250929050565b606081806001600160401b03811115611a4c57611a4c612046565b604051908082528060200260200182016040528015611a7f57816020015b6060815260200190600190039081611a6a5790505b50915060005b81811015611aea5736858583818110611aa057611aa0612a57565b9050602002810190611ab29190612a96565b9050611ac4610c4e602083018361292a565b848381518110611ad657611ad6612a57565b602090810291909101015250600101611a85565b505092915050565b606081806001600160401b03811115611b0d57611b0d612046565b604051908082528060200260200182016040528015611b4057816020015b6060815260200190600190039081611b2b5790505b50915060005b81811015611aea5736858583818110611b6157611b61612a57565b9050602002810190611b739190612a96565b90506000611b9e611b87602084018461292a565b6020840135611b996040860186612947565b611c70565b868581518110611bb057611bb0612a57565b6020908102919091010152905080611c15577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb783868581518110611bf657611bf6612a57565b6020026020010151604051611c0c929190612a6d565b60405180910390a15b5050600101611b46565b6000803681611c316014828789612ab6565b611c3a91612ae0565b60601c9350611c4d603460148789612ab6565b611c5691612b13565b9250611c658560348189612ab6565b949793965094505050565b604051600090828482376000388483888a5af191503d8152602081013d6000823e3d81016040525094509492505050565b600080600080611cb18686611d76565b925092509250611cc18282611dc3565b5090949350505050565b606060ff8314611ce557611cde83611e7c565b90506106f3565b818054611cf190612b31565b80601f0160208091040260200160405190810160405280929190818152602001828054611d1d90612b31565b8015611d6a5780601f10611d3f57610100808354040283529160200191611d6a565b820191906000526020600020905b815481529060010190602001808311611d4d57829003601f168201915b505050505090506106f3565b60008060008351604103611db05760208401516040850151606086015160001a611da288828585611ebb565b955095509550505050611dbc565b50508151600091506002905b9250925092565b6000826003811115611dd757611dd7612b65565b03611de0575050565b6001826003811115611df457611df4612b65565b03611e125760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115611e2657611e26612b65565b03611e475760405163fce698f760e01b815260048101829052602401611121565b6003826003811115611e5b57611e5b612b65565b03610c65576040516335e2f38360e21b815260048101829052602401611121565b60606000611e8983611f8a565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0841115611ef65750600091506003905082611f80565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa158015611f4a573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116611f7657506000925060019150829050611f80565b9250600091508190505b9450945094915050565b600060ff8216601f8111156106f357604051632cd44ac360e21b815260040160405180910390fd5b600060208284031215611fc457600080fd5b81356001600160e01b0319811681146107e357600080fd5b60006101208284031215611fef57600080fd5b50919050565b60006020828403121561200757600080fd5b81356001600160401b0381111561201d57600080fd5b61202984828501611fdc565b949350505050565b6001600160a01b03811681146118f357600080fd5b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b038111828210171561208457612084612046565b604052919050565b600082601f83011261209d57600080fd5b81356001600160401b038111156120b6576120b6612046565b6120c9601f8201601f191660200161205c565b8181528460208386010111156120de57600080fd5b816020850160208301376000918101602001919091529392505050565b6000806000806080858703121561211157600080fd5b843561211c81612031565b9350602085013561212c81612031565b92506040850135915060608501356001600160401b0381111561214e57600080fd5b61215a8782880161208c565b91505092959194509250565b60008083601f84011261217857600080fd5b5081356001600160401b0381111561218f57600080fd5b6020830191508360208285010111156121a757600080fd5b9250929050565b6000806000604084860312156121c357600080fd5b8335925060208401356001600160401b038111156121e057600080fd5b6121ec86828701612166565b9497909650939450505050565b60008060006060848603121561220e57600080fd5b83356001600160401b0381111561222457600080fd5b61223086828701611fdc565b9660208601359650604090950135949350505050565b60006020828403121561225857600080fd5b81356001600160c01b03811681146107e357600080fd5b60006020828403121561228157600080fd5b81356001600160401b0381111561229757600080fd5b820160c081850312156107e357600080fd5b6000602082840312156122bb57600080fd5b5035919050565b6000602082840312156122d457600080fd5b81356001600160401b038111156122ea57600080fd5b8201606081850312156107e357600080fd5b6000806040838503121561230f57600080fd5b823561231a81612031565b946020939093013593505050565b6000815180845260005b8181101561234e57602081850181015186830182015201612332565b506000602082860101526020601f19601f83011685010191505092915050565b60ff60f81b881681526000602060e0602084015261238f60e084018a612328565b83810360408501526123a1818a612328565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156123f5578351835292840192918401916001016123d9565b50909c9b505050505050505050505050565b6020815260006107e36020830184612328565b600082601f83011261242b57600080fd5b813560206001600160401b0382111561244657612446612046565b8160051b61245582820161205c565b928352848101820192828101908785111561246f57600080fd5b83870192505b8483101561248e57823582529183019190830190612475565b979650505050505050565b600080600080600060a086880312156124b157600080fd5b85356124bc81612031565b945060208601356124cc81612031565b935060408601356001600160401b03808211156124e857600080fd5b6124f489838a0161241a565b9450606088013591508082111561250a57600080fd5b61251689838a0161241a565b9350608088013591508082111561252c57600080fd5b506125398882890161208c565b9150509295509295909350565b60008083601f84011261255857600080fd5b5081356001600160401b0381111561256f57600080fd5b6020830191508360208260051b85010111156121a757600080fd5b600080600080600080606087890312156125a357600080fd5b86356001600160401b03808211156125ba57600080fd5b6125c68a838b01612546565b909850965060208901359150808211156125df57600080fd5b6125eb8a838b01612546565b9096509450604089013591508082111561260457600080fd5b5061261189828a01612546565b979a9699509497509295939492505050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b8281101561267a57603f19888603018452612668858351612328565b9450928501929085019060010161264c565b5092979650505050505050565b600080600080600060a0868803121561269f57600080fd5b85356126aa81612031565b945060208601356126ba81612031565b9350604086013592506060860135915060808601356001600160401b038111156126e357600080fd5b6125398882890161208c565b60006020828403121561270157600080fd5b5051919050565b6000808335601e1984360301811261271f57600080fd5b83016020810192503590506001600160401b0381111561273e57600080fd5b8036038213156121a757600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561282957858403601f19018a52823536899003605e190181126127b5578283fd5b8801606081356127c481612031565b6001600160a01b031686526127db82880183612708565b82898901526127ed838901828461274d565b9250505060406127ff81840184612708565b93508783038289015261281383858361274d565b9d89019d97505050938601935050600101612790565b509198975050505050505050565b602081526000823561284881612031565b6001600160a01b039081166020848101919091528401359061286982612031565b80821660408501525050604083013560608301526060830135601e1984360301811261289457600080fd5b83016020810190356001600160401b038111156128b057600080fd5b8060051b36038213156128c257600080fd5b60c060808501526128d760e085018284612776565b915050608084013560a08401526128f160a0850185612708565b848303601f190160c0860152610fec83828461274d565b60006020828403121561291a57600080fd5b815180151581146107e357600080fd5b60006020828403121561293c57600080fd5b81356107e381612031565b6000808335601e1984360301811261295e57600080fd5b8301803591506001600160401b0382111561297857600080fd5b6020019150368190038213156121a757600080fd5b6000838385526020808601955060208560051b8301018460005b878110156129e157848303601f190189526129c28288612708565b6129cd85828461274d565b9a86019a94505050908301906001016129a7565b5090979650505050505050565b606081526000612a0260608301888a61298d565b8281036020848101919091528682528791810160005b88811015612a3457833582529282019290820190600101612a18565b508481036040860152612a4881878961298d565b9b9a5050505050505050505050565b634e487b7160e01b600052603260045260246000fd5b8281526040602082015260006107e06040830184612328565b8183823760009101908152919050565b60008235605e19833603018112612aac57600080fd5b9190910192915050565b60008085851115612ac657600080fd5b83861115612ad357600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015611aea5760149490940360031b84901b1690921692915050565b803560208310156106f357600019602084900360031b1b1692915050565b600181811c90821680612b4557607f821691505b602082108103611fef57634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fdfea26469706673582212202a8fc88ef923739742bc7ec1685cd9198a7251cfb58c7e873c821a7e716b2ca664736f6c63430008170033",IPe={};we(IPe,{abi:()=>OPe,bytecode:()=>MPe});var OPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"token_",type:"address",internalType:"address"},{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],MPe="0x608060405234801561001057600080fd5b5061095e806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b5e544921161005b578063b5e5449214610115578063b99deb0e14610135578063d3eddcc51461017a578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c55780638678d6ef146100e1578063a145832a14610102575b600080fd5b6100b061009b366004610677565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d33660046106f5565b50505050505050505050565b005b6100f46100ef3660046107c2565b61018d565b6040519081526020016100bc565b6100df6101103660046106f5565b6101a2565b6100f4610123366004610677565b60006020819052908152604090205481565b6101486101433660046107fe565b610353565b6040516100bc949392919093151584526001600160a01b03928316602085015291166040830152606082015260800190565b6100df6101883660046106f5565b610440565b600061019a84848461061d565b949350505050565b85600881901b6101b3816000610660565b6102125760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806102208d8d610353565b509250925050600061023333848961061d565b60008181526001602052604090205490915060ff16156102ab5760405162461bcd60e51b815260206004820152602d60248201527f455243323042616c616e63654368616e6765456e666f726365723a656e666f7260448201526c18d95c8b5a5ccb5b1bd8dad959609a1b6064820152608401610209565b6000818152600160208190526040808320805460ff1916909217909155516370a0823160e01b81526001600160a01b0384811660048301528516906370a0823190602401602060405180830381865afa15801561030c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103309190610840565b600092835260208390526040909220919091555050505050505050505050505050565b6000808080604985146103c05760405162461bcd60e51b815260206004820152602f60248201527f455243323042616c616e63654368616e6765456e666f726365723a696e76616c60448201526e0d2c85ae8cae4dae65ad8cadccee8d608b1b6064820152608401610209565b858560008181106103d3576103d3610859565b909101356001600160f81b031916151594506103f5905060156001878961086f565b6103fe91610899565b60601c925061041160296015878961086f565b61041a91610899565b60601c915061042c856029818961086f565b610435916108ce565b939692955090935050565b6000806000806104508e8e610353565b9350935093509350600061046533858a61061d565b600081815260016020526040808220805460ff19169055516370a0823160e01b81526001600160a01b03868116600483015292935090918616906370a0823190602401602060405180830381865afa1580156104c5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104e99190610840565b9050851561057c5760008281526020819052604090205461050b908490610902565b8110156105775760405162461bcd60e51b815260206004820152603460248201527f455243323042616c616e63654368616e6765456e666f726365723a65786365656044820152736465642d62616c616e63652d646563726561736560601b6064820152608401610209565b61060b565b600082815260208190526040902054610596908490610915565b81101561060b5760405162461bcd60e51b815260206004820152603860248201527f455243323042616c616e63654368616e6765456e666f726365723a696e73756660448201527f66696369656e742d62616c616e63652d696e63726561736500000000000000006064820152608401610209565b50505050505050505050505050505050565b604080516001600160a01b039485166020808301919091529390941684820152606080850192909252805180850390920182526080909301909252815191012090565b6001600160f81b0319828116908216145b92915050565b60006020828403121561068957600080fd5b5035919050565b60008083601f8401126106a257600080fd5b50813567ffffffffffffffff8111156106ba57600080fd5b6020830191508360208285010111156106d257600080fd5b9250929050565b80356001600160a01b03811681146106f057600080fd5b919050565b60008060008060008060008060008060e08b8d03121561071457600080fd5b8a3567ffffffffffffffff8082111561072c57600080fd5b6107388e838f01610690565b909c509a5060208d013591508082111561075157600080fd5b61075d8e838f01610690565b909a50985060408d0135975060608d013591508082111561077d57600080fd5b5061078a8d828e01610690565b90965094505060808b013592506107a360a08c016106d9565b91506107b160c08c016106d9565b90509295989b9194979a5092959850565b6000806000606084860312156107d757600080fd5b6107e0846106d9565b92506107ee602085016106d9565b9150604084013590509250925092565b6000806020838503121561081157600080fd5b823567ffffffffffffffff81111561082857600080fd5b61083485828601610690565b90969095509350505050565b60006020828403121561085257600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b6000808585111561087f57600080fd5b8386111561088c57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156108c65780818660140360031b1b83161692505b505092915050565b8035602083101561067157600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b81810381811115610671576106716108ec565b80820180821115610671576106716108ec56fea26469706673582212202ee065285e6d78b8f4f72189bef225cff106ed6fed2f250af767e847d4faa24364736f6c63430008170033",PPe={};we(PPe,{abi:()=>kPe,bytecode:()=>NPe});var kPe=[],NPe="0x60556032600b8282823980515f1a607314602657634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe730000000000000000000000000000000000000000301460806040525f80fdfea26469706673582212201dfea0fb90d440a56b093020135bfa0529382b21cf5681ce6bf65b9ef384b15664736f6c63430008170033",RPe={};we(RPe,{abi:()=>DPe,bytecode:()=>$Pe});var DPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_recipient",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"token_",type:"address",internalType:"address"},{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],$Pe="0x608060405234801561001057600080fd5b5061097c806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b5e544921161005b578063b5e5449214610115578063b99deb0e14610135578063d3eddcc51461017a578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c55780635f6f02e0146100e1578063a145832a14610102575b600080fd5b6100b061009b366004610686565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d3366004610704565b50505050505050505050565b005b6100f46100ef3660046107d1565b61018d565b6040519081526020016100bc565b6100df610110366004610704565b6101a4565b6100f4610123366004610686565b60006020819052908152604090205481565b61014861014336600461081c565b610357565b6040516100bc949392919093151584526001600160a01b03928316602085015291166040830152606082015260800190565b6100df610188366004610704565b610445565b600061019b85858585610624565b95945050505050565b85600881901b6101b581600061066f565b6102145760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806102228d8d610357565b50925092505060006102363384848a610624565b60008181526001602052604090205490915060ff16156102af5760405162461bcd60e51b815260206004820152602e60248201527f45524337323142616c616e63654368616e6765456e666f726365723a656e666f60448201526d1c98d95c8b5a5ccb5b1bd8dad95960921b606482015260840161020b565b6000818152600160208190526040808320805460ff1916909217909155516370a0823160e01b81526001600160a01b0384811660048301528516906370a0823190602401602060405180830381865afa158015610310573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610334919061085e565b600092835260208390526040909220919091555050505050505050505050505050565b6000808080604985146103c55760405162461bcd60e51b815260206004820152603060248201527f45524337323142616c616e63654368616e6765456e666f726365723a696e766160448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b606482015260840161020b565b858560008181106103d8576103d8610877565b909101356001600160f81b031916151594506103fa905060156001878961088d565b610403916108b7565b60601c925061041660296015878961088d565b61041f916108b7565b60601c9150610431856029818961088d565b61043a916108ec565b939692955090935050565b6000806000806104558e8e610357565b9350935093509350600061046b3385858b610624565b600081815260016020526040808220805460ff19169055516370a0823160e01b81526001600160a01b03868116600483015292935090918616906370a0823190602401602060405180830381865afa1580156104cb573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104ef919061085e565b9050851561058357600082815260208190526040902054610511908490610920565b81101561057e5760405162461bcd60e51b815260206004820152603560248201527f45524337323142616c616e63654368616e6765456e666f726365723a65786365604482015274656465642d62616c616e63652d646563726561736560581b606482015260840161020b565b610612565b60008281526020819052604090205461059d908490610933565b8110156106125760405162461bcd60e51b815260206004820152603960248201527f45524337323142616c616e63654368616e6765456e666f726365723a696e737560448201527f6666696369656e742d62616c616e63652d696e63726561736500000000000000606482015260840161020b565b50505050505050505050505050505050565b604080516001600160a01b03958616602080830191909152948616818301529290941660608301526080808301919091528351808303909101815260a0909101909252815191012090565b6001600160f81b0319828116908216145b92915050565b60006020828403121561069857600080fd5b5035919050565b60008083601f8401126106b157600080fd5b50813567ffffffffffffffff8111156106c957600080fd5b6020830191508360208285010111156106e157600080fd5b9250929050565b80356001600160a01b03811681146106ff57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561072357600080fd5b8a3567ffffffffffffffff8082111561073b57600080fd5b6107478e838f0161069f565b909c509a5060208d013591508082111561076057600080fd5b61076c8e838f0161069f565b909a50985060408d0135975060608d013591508082111561078c57600080fd5b506107998d828e0161069f565b90965094505060808b013592506107b260a08c016106e8565b91506107c060c08c016106e8565b90509295989b9194979a5092959850565b600080600080608085870312156107e757600080fd5b6107f0856106e8565b93506107fe602086016106e8565b925061080c604086016106e8565b9396929550929360600135925050565b6000806020838503121561082f57600080fd5b823567ffffffffffffffff81111561084657600080fd5b6108528582860161069f565b90969095509350505050565b60006020828403121561087057600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b6000808585111561089d57600080fd5b838611156108aa57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156108e45780818660140360031b1b83161692505b505092915050565b8035602083101561068057600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b818103818111156106805761068061090a565b808201808211156106805761068061090a56fea26469706673582212201a908643c89c30b103124ac1346de2de7964be6fc4c537dea357364db407b9ad64736f6c63430008170033",LPe={};we(LPe,{abi:()=>BPe,bytecode:()=>FPe});var BPe=[{type:"error",name:"ERC7579DecodingError",inputs:[]}],FPe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220e31e42482ef7832f3e446f04f27415313e49db77c6e6717169033c8535b19d3764736f6c63430008170033",UPe={};we(UPe,{abi:()=>jPe,bytecode:()=>HPe});var jPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"permittedContract_",type:"address",internalType:"address"},{name:"permittedTokenId_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"}],HPe="0x608060405234801561001057600080fd5b50610821806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046105ea565b50505050505050505050565b005b6100766100863660046105ea565b6100c1565b61009e6100993660046106bd565b61047c565b604080516001600160a01b03909316835260208301919091520160405180910390f35b856100cd816000610521565b61011e5760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61012f816000610521565b6101895760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610115565b506000806101978e8e61047c565b9150915060003660006101aa8c8c610538565b929550935090915050606481101561021b5760405162461bcd60e51b815260206004820152602e60248201527f4552433732315472616e73666572456e666f726365723a696e76616c69642d6360448201526d0c2d8d8c8c2e8c25ad8cadccee8d60931b6064820152608401610115565b6000808061022c84600481886106ff565b8101906102399190610729565b919450925090506001600160a01b038316158061025d57506001600160a01b038216155b156102b95760405162461bcd60e51b815260206004820152602660248201527f4552433732315472616e73666572456e666f726365723a696e76616c69642d6160448201526564647265737360d01b6064820152608401610115565b60006102c860048287896106ff565b6102d19161076a565b9050886001600160a01b0316876001600160a01b0316146103505760405162461bcd60e51b815260206004820152603360248201527f4552433732315472616e73666572456e666f726365723a756e617574686f72696044820152721e99590b58dbdb9d1c9858dd0b5d185c99d95d606a1b6064820152608401610115565b6001600160e01b031981166323b872dd60e01b1480159061038257506001600160e01b03198116632142170760e11b14155b801561039f57506001600160e01b03198116635c46a7ef60e11b14155b156104015760405162461bcd60e51b815260206004820152602c60248201527f4552433732315472616e73666572456e666f726365723a756e617574686f726960448201526b3d32b216b9b2b632b1ba37b960a11b6064820152608401610115565b8782146104655760405162461bcd60e51b815260206004820152602c60248201527f4552433732315472616e73666572456e666f726365723a756e617574686f726960448201526b1e99590b5d1bdad95b8b5a5960a21b6064820152608401610115565b505050505050505050505050505050505050505050565b600080603483146104e35760405162461bcd60e51b815260206004820152602b60248201527f4552433732315472616e73666572456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b6064820152608401610115565b6104f16014600085876106ff565b6104fa9161079a565b60601c915061050c83601481876106ff565b610515916107cd565b60001c90509250929050565b6001600160f81b0319828116908216145b92915050565b600080368161054a60148287896106ff565b6105539161079a565b60601c93506105666034601487896106ff565b61056f916107cd565b925061057e85603481896106ff565b949793965094505050565b60008083601f84011261059b57600080fd5b50813567ffffffffffffffff8111156105b357600080fd5b6020830191508360208285010111156105cb57600080fd5b9250929050565b6001600160a01b03811681146105e757600080fd5b50565b60008060008060008060008060008060e08b8d03121561060957600080fd5b8a3567ffffffffffffffff8082111561062157600080fd5b61062d8e838f01610589565b909c509a5060208d013591508082111561064657600080fd5b6106528e838f01610589565b909a50985060408d0135975060608d013591508082111561067257600080fd5b5061067f8d828e01610589565b90965094505060808b0135925060a08b013561069a816105d2565b915060c08b01356106aa816105d2565b809150509295989b9194979a5092959850565b600080602083850312156106d057600080fd5b823567ffffffffffffffff8111156106e757600080fd5b6106f385828601610589565b90969095509350505050565b6000808585111561070f57600080fd5b8386111561071c57600080fd5b5050820193919092039150565b60008060006060848603121561073e57600080fd5b8335610749816105d2565b92506020840135610759816105d2565b929592945050506040919091013590565b6001600160e01b031981358181169160048510156107925780818660040360031b1b83161692505b505092915050565b6bffffffffffffffffffffffff1981358181169160148510156107925760149490940360031b84901b1690921692915050565b8035602083101561053257600019602084900360031b1b169291505056fea264697066735822122059baae7c286b09a388772bb8a0feea8851f9a4fec98691fdc00e38b6eb1a59b964736f6c63430008170033",zPe={};we(zPe,{abi:()=>qPe,bytecode:()=>KPe});var qPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationManager",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"token_",type:"address",internalType:"address"},{name:"initialAmount_",type:"uint256",internalType:"uint256"},{name:"maxAmount_",type:"uint256",internalType:"uint256"},{name:"amountPerSecond_",type:"uint256",internalType:"uint256"},{name:"startTime_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"streamingAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"initialAmount",type:"uint256",internalType:"uint256"},{name:"maxAmount",type:"uint256",internalType:"uint256"},{name:"amountPerSecond",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint256",internalType:"uint256"},{name:"spent",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"token",type:"address",indexed:!1,internalType:"address"},{name:"initialAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"maxAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"amountPerSecond",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startTime",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"},{name:"lastUpdateTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],KPe="0x608060405234801561001057600080fd5b50610b7d806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063d3eddcc51161005b578063d3eddcc514610082578063ed46336714610082578063ee73d772146100fb578063fb7d2c5b1461011c57600080fd5b8063414c3e3314610082578063a145832a1461009e578063b99deb0e146100b1575b600080fd5b61009c610090366004610910565b50505050505050505050565b005b61009c6100ac366004610910565b610189565b6100c46100bf3660046109dd565b61026e565b604080516001600160a01b0390961686526020860194909452928401919091526060830152608082015260a0015b60405180910390f35b61010e610109366004610a1f565b610365565b6040519081526020016100f2565b61016161012a366004610a1f565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100f2565b856101958160006103d0565b6101e65760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101f78160006103d0565b6102515760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016101dd565b506102608c8c898989886103e7565b505050505050505050505050565b600080808080609486146102d85760405162461bcd60e51b815260206004820152602b60248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d7460448201526a0cae4dae65ad8cadccee8d60ab1b60648201526084016101dd565b6102e660146000888a610a49565b6102ef91610a73565b60601c945061030260346014888a610a49565b61030b91610aa8565b935061031b60546034888a610a49565b61032491610aa8565b925061033460746054888a610a49565b61033d91610aa8565b915061034d60946074888a610a49565b61035691610aa8565b60001c90509295509295909350565b6001600160a01b0382166000908152602081815260408083208484528252808320815160a081018352815481526001820154938101939093526002810154918301919091526003810154606083015260048101546080830152906103c8906107d9565b949350505050565b6001600160f81b0319828116908216145b92915050565b60003660006103f6878761085a565b929550935090915050604481146104675760405162461bcd60e51b815260206004820152602f60248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d6560448201526e0f0cac6eae8d2dedc5ad8cadccee8d608b1b60648201526084016101dd565b60008060008060006104798e8e61026e565b94509450945094509450838310156104e55760405162461bcd60e51b815260206004820152602960248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d6d604482015268185e0b585b5bdd5b9d60ba1b60648201526084016101dd565b6000811161054c5760405162461bcd60e51b815260206004820152602e60248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d7a60448201526d65726f2d73746172742d74696d6560901b60648201526084016101dd565b876001600160a01b0316856001600160a01b0316146105bd5760405162461bcd60e51b815260206004820152602760248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d636044820152661bdb9d1c9858dd60ca1b60648201526084016101dd565b63a9059cbb60e01b6105d360046000898b610a49565b6105dc91610ac6565b6001600160e01b031916146106415760405162461bcd60e51b815260206004820152602560248201527f455243323053747265616d696e67456e666f726365723a696e76616c69642d6d604482015264195d1a1bd960da1b60648201526084016101dd565b336000908152602081815260408083208d84529091528120600481015490910361067e578481556001810184905560028101839055600381018290555b600061068e604460248a8c610a49565b61069791610aa8565b6040805160a081018252845481526001850154602082015260028501549181019190915260038401546060820152600484015460808201529091506106db906107d9565b81111561073c5760405162461bcd60e51b815260206004820152602960248201527f455243323053747265616d696e67456e666f726365723a616c6c6f77616e63656044820152680b595e18d95959195960ba1b60648201526084016101dd565b808260040160008282546107509190610b0a565b90915550506004820154604080516001600160a01b038a81168252602082018a9052818301899052606082018890526080820187905260a08201939093524260c082015290518e928e169133917f30ceca901166c86cac9d1024230d7f5740b26cce6bdd9bad7b1d6e616904ea639181900360e00190a450505050505050505050505050505050565b600081606001514210156107ef57506000919050565b60008260600151426108019190610b1d565b905060008184604001516108159190610b30565b84516108219190610b0a565b90508360200151811115610836575060208301515b8084608001511061084b575060009392505050565b60808401516103c89082610b1d565b600080368161086c6014828789610a49565b61087591610a73565b60601c9350610888603460148789610a49565b61089191610aa8565b92506108a08560348189610a49565b949793965094505050565b60008083601f8401126108bd57600080fd5b50813567ffffffffffffffff8111156108d557600080fd5b6020830191508360208285010111156108ed57600080fd5b9250929050565b80356001600160a01b038116811461090b57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561092f57600080fd5b8a3567ffffffffffffffff8082111561094757600080fd5b6109538e838f016108ab565b909c509a5060208d013591508082111561096c57600080fd5b6109788e838f016108ab565b909a50985060408d0135975060608d013591508082111561099857600080fd5b506109a58d828e016108ab565b90965094505060808b013592506109be60a08c016108f4565b91506109cc60c08c016108f4565b90509295989b9194979a5092959850565b600080602083850312156109f057600080fd5b823567ffffffffffffffff811115610a0757600080fd5b610a13858286016108ab565b90969095509350505050565b60008060408385031215610a3257600080fd5b610a3b836108f4565b946020939093013593505050565b60008085851115610a5957600080fd5b83861115610a6657600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015610aa05780818660140360031b1b83161692505b505092915050565b803560208310156103e157600019602084900360031b1b1692915050565b6001600160e01b03198135818116916004851015610aa05760049490940360031b84901b1690921692915050565b634e487b7160e01b600052601160045260246000fd5b808201808211156103e1576103e1610af4565b818103818111156103e1576103e1610af4565b80820281158282048414176103e1576103e1610af456fea2646970667358221220d9282c553e448eac7b4631259f5a457c28077fd4d88ef08db72ec3df532e99ed64736f6c63430008170033",VPe={};we(VPe,{abi:()=>WPe,bytecode:()=>GPe});var WPe=[{type:"function",name:"validateUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"}],GPe="0x",YPe={};we(YPe,{abi:()=>JPe,bytecode:()=>ZPe});var JPe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"callData_",type:"bytes",internalType:"bytes"}],stateMutability:"pure"}],ZPe="0x608060405234801561001057600080fd5b50610559806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610338565b50505050505050505050565b005b610076610086366004610338565b6100b4565b61009e610099366004610405565b61022b565b6040516100ab9190610447565b60405180910390f35b856100c081600061026b565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61012281600061026b565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b5036600061018a8989610282565b935093505050600061019c8f8f61022b565b905082826040516101ae929190610496565b604051809103902081805190602001201461021a5760405162461bcd60e51b815260206004820152602660248201527f457861637443616c6c64617461456e666f726365723a696e76616c69642d63616044820152656c6c6461746160d01b6064820152608401610108565b505050505050505050505050505050565b606082828080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250929695505050505050565b6001600160f81b0319828116908216145b92915050565b600080368161029460148287896104a6565b61029d916104d0565b60601c93506102b06034601487896104a6565b6102b991610505565b92506102c885603481896104a6565b949793965094505050565b60008083601f8401126102e557600080fd5b50813567ffffffffffffffff8111156102fd57600080fd5b60208301915083602082850101111561031557600080fd5b9250929050565b80356001600160a01b038116811461033357600080fd5b919050565b60008060008060008060008060008060e08b8d03121561035757600080fd5b8a3567ffffffffffffffff8082111561036f57600080fd5b61037b8e838f016102d3565b909c509a5060208d013591508082111561039457600080fd5b6103a08e838f016102d3565b909a50985060408d0135975060608d01359150808211156103c057600080fd5b506103cd8d828e016102d3565b90965094505060808b013592506103e660a08c0161031c565b91506103f460c08c0161031c565b90509295989b9194979a5092959850565b6000806020838503121561041857600080fd5b823567ffffffffffffffff81111561042f57600080fd5b61043b858286016102d3565b90969095509350505050565b60006020808352835180602085015260005b8181101561047557858101830151858201604001528201610459565b506000604082860101526040601f19601f8301168501019250505092915050565b8183823760009101908152919050565b600080858511156104b657600080fd5b838611156104c357600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156104fd5780818660140360031b1b83161692505b505092915050565b8035602083101561027c57600019602084900360031b1b169291505056fea26469706673582212207ea2be587c5142bd07609ab1e9e3d82af76502619dbab0e88f14c164094d01e564736f6c63430008170033",XPe={};we(XPe,{abi:()=>QPe,bytecode:()=>eke});var QPe=[{type:"function",name:"aggregateSignatures",inputs:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"aggregatedSignature",type:"bytes",internalType:"bytes"}],stateMutability:"view"},{type:"function",name:"validateSignatures",inputs:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"view"},{type:"function",name:"validateUserOpSignature",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"sigForUserOp",type:"bytes",internalType:"bytes"}],stateMutability:"view"}],eke="0x",tke={};we(tke,{abi:()=>nke,bytecode:()=>rke});var nke=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"execution_",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"}],rke="0x608060405234801561001057600080fd5b5061062f806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046103e9565b50505050505050505050565b005b6100766100863660046103e9565b6100b4565b61009e6100993660046104b6565b610197565b6040516100ab91906104f8565b60405180910390f35b856100c0816000610210565b6101115760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b610122816000610210565b61017c5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610108565b506101898c8c8989610227565b505050505050505050505050565b604080516060808201835260008083526020830152918101919091526101bd8383610333565b81818080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152505050506040860152505060208301526001600160a01b0316815292915050565b6001600160f81b0319828116908216145b92915050565b6000803660006102378686610333565b929650909450925090506001600160a01b038416610259601460008a8c61056c565b61026291610596565b60601c14801561028757508261027c603460148a8c61056c565b610285916105cb565b145b80156102cc5750818160405161029e9291906105e9565b6040519081900390206102b4886034818c61056c565b6040516102c29291906105e9565b6040518091039020145b6103295760405162461bcd60e51b815260206004820152602860248201527f4578616374457865637574696f6e456e666f726365723a696e76616c69642d656044820152673c32b1baba34b7b760c11b6064820152608401610108565b5050505050505050565b6000803681610345601482878961056c565b61034e91610596565b60601c935061036160346014878961056c565b61036a916105cb565b9250610379856034818961056c565b949793965094505050565b60008083601f84011261039657600080fd5b50813567ffffffffffffffff8111156103ae57600080fd5b6020830191508360208285010111156103c657600080fd5b9250929050565b80356001600160a01b03811681146103e457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561040857600080fd5b8a3567ffffffffffffffff8082111561042057600080fd5b61042c8e838f01610384565b909c509a5060208d013591508082111561044557600080fd5b6104518e838f01610384565b909a50985060408d0135975060608d013591508082111561047157600080fd5b5061047e8d828e01610384565b90965094505060808b0135925061049760a08c016103cd565b91506104a560c08c016103cd565b90509295989b9194979a5092959850565b600080602083850312156104c957600080fd5b823567ffffffffffffffff8111156104e057600080fd5b6104ec85828601610384565b90969095509350505050565b6000602080835260018060a01b038451166020840152602084015160408401526040840151606080850152805180608086015260005b8181101561054a5782810184015186820160a00152830161052e565b50600060a0828701015260a0601f19601f830116860101935050505092915050565b6000808585111561057c57600080fd5b8386111561058957600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156105c35780818660140360031b1b83161692505b505092915050565b8035602083101561022157600019602084900360031b1b1692915050565b818382376000910190815291905056fea2646970667358221220e961f8992a129634c5841f6f8ff7eac208b6822d2646363c613c0f46bcd65a0b64736f6c63430008170033",ake={};we(ake,{abi:()=>ike,bytecode:()=>ske});var ike=[{type:"function",name:"implementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"}],ske="0x",oke={};we(oke,{abi:()=>cke,bytecode:()=>dke});var cke=[{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"disabledDelegations",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getDelegationHash",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"DisabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"EnabledDelegation",inputs:[{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"delegate",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"RedeemedDelegation",inputs:[{name:"rootDelegator",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegation",type:"tuple",indexed:!1,internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],anonymous:!1},{type:"event",name:"SetDomain",inputs:[{name:"domainHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"name",type:"string",indexed:!1,internalType:"string"},{name:"domainVersion",type:"string",indexed:!1,internalType:"string"},{name:"chainId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"contractAddress",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AlreadyDisabled",inputs:[]},{type:"error",name:"AlreadyEnabled",inputs:[]},{type:"error",name:"BatchDataLengthMismatch",inputs:[]},{type:"error",name:"CannotUseADisabledDelegation",inputs:[]},{type:"error",name:"EmptySignature",inputs:[]},{type:"error",name:"InvalidAuthority",inputs:[]},{type:"error",name:"InvalidDelegate",inputs:[]},{type:"error",name:"InvalidDelegator",inputs:[]},{type:"error",name:"InvalidEOASignature",inputs:[]},{type:"error",name:"InvalidERC1271Signature",inputs:[]}],dke="0x",jV={};we(jV,{abi:()=>lke,bytecode:()=>uke});var lke=[{type:"receive",stateMutability:"payable"},{type:"function",name:"addStake",inputs:[{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"delegateAndRevert",inputs:[{name:"target",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"deposits",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}],stateMutability:"view"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getSenderAddress",inputs:[{name:"initCode",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getUserOpHash",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"handleAggregatedOps",inputs:[{name:"opsPerAggregator",type:"tuple[]",internalType:"struct IEntryPoint.UserOpsPerAggregator[]",components:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"aggregator",type:"address",internalType:"contract IAggregator"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"handleOps",inputs:[{name:"ops",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"innerHandleOp",inputs:[{name:"callData",type:"bytes",internalType:"bytes"},{name:"opInfo",type:"tuple",internalType:"struct EntryPoint.UserOpInfo",components:[{name:"mUserOp",type:"tuple",internalType:"struct EntryPoint.MemoryUserOp",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"verificationGasLimit",type:"uint256",internalType:"uint256"},{name:"callGasLimit",type:"uint256",internalType:"uint256"},{name:"paymasterVerificationGasLimit",type:"uint256",internalType:"uint256"},{name:"paymasterPostOpGasLimit",type:"uint256",internalType:"uint256"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"paymaster",type:"address",internalType:"address"},{name:"maxFeePerGas",type:"uint256",internalType:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256",internalType:"uint256"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"prefund",type:"uint256",internalType:"uint256"},{name:"contextOffset",type:"uint256",internalType:"uint256"},{name:"preOpGas",type:"uint256",internalType:"uint256"}]},{name:"context",type:"bytes",internalType:"bytes"}],outputs:[{name:"actualGasCost",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"nonceSequenceNumber",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AccountDeployed",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"factory",type:"address",indexed:!1,internalType:"address"},{name:"paymaster",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"BeforeExecution",inputs:[],anonymous:!1},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PostOpRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"SignatureAggregatorChanged",inputs:[{name:"aggregator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationEvent",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"paymaster",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"},{name:"actualGasCost",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actualGasUsed",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationPrefundTooLow",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"DelegateAndRevert",inputs:[{name:"success",type:"bool",internalType:"bool"},{name:"ret",type:"bytes",internalType:"bytes"}]},{type:"error",name:"FailedOp",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"}]},{type:"error",name:"FailedOpWithRevert",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"},{name:"inner",type:"bytes",internalType:"bytes"}]},{type:"error",name:"PostOpReverted",inputs:[{name:"returnData",type:"bytes",internalType:"bytes"}]},{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]},{type:"error",name:"SenderAddressResult",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"SignatureValidationFailed",inputs:[{name:"aggregator",type:"address",internalType:"address"}]}],uke="0x60a0604052604051620000129062000051565b604051809103905ff0801580156200002c573d5f803e3d5ffd5b506001600160a01b031660805234801562000045575f80fd5b5060016002556200005f565b6101ff806200374883390190565b6080516136c96200007f5f395f8181610de0015261271501526136c95ff3fe608060405260043610610107575f3560e01c806370a0823111610092578063b760faf911610062578063b760faf914610425578063bb9fe6bf14610438578063c23a5cea1461044c578063dbed18e01461046b578063fc7e286d1461048a575f80fd5b806370a0823114610394578063765e827f146103c8578063850aaf62146103e75780639b249f6914610406575f80fd5b80631b2e01b8116100d85780631b2e01b8146101ae578063205c2878146101e457806322cdde4c1461020357806335567e1a146102225780635287ce1214610280575f80fd5b806242dc531461011b57806301ffc9a71461014d5780630396cb601461017c5780630bd28e3b1461018f575f80fd5b366101175761011533610530565b005b5f80fd5b348015610126575f80fd5b5061013a610135366004612c4f565b610584565b6040519081526020015b60405180910390f35b348015610158575f80fd5b5061016c610167366004612d06565b610702565b6040519015158152602001610144565b61011561018a366004612d2d565b610789565b34801561019a575f80fd5b506101156101a9366004612d66565b610a14565b3480156101b9575f80fd5b5061013a6101c8366004612d7f565b600160209081525f928352604080842090915290825290205481565b3480156101ef575f80fd5b506101156101fe366004612db2565b610a4a565b34801561020e575f80fd5b5061013a61021d366004612ddc565b610b96565b34801561022d575f80fd5b5061013a61023c366004612d7f565b6001600160a01b0382165f9081526001602090815260408083206001600160c01b038516845290915290819020549082901b67ffffffffffffffff19161792915050565b34801561028b575f80fd5b5061033a61029a366004612e13565b6040805160a0810182525f80825260208201819052918101829052606081018290526080810191909152506001600160a01b03165f9081526020818152604091829020825160a0810184528154815260019091015460ff811615159282019290925261010082046001600160701b031692810192909252600160781b810463ffffffff166060830152600160981b900465ffffffffffff16608082015290565b60405161014491905f60a082019050825182526020830151151560208301526001600160701b03604084015116604083015263ffffffff606084015116606083015265ffffffffffff608084015116608083015292915050565b34801561039f575f80fd5b5061013a6103ae366004612e13565b6001600160a01b03165f9081526020819052604090205490565b3480156103d3575f80fd5b506101156103e2366004612e6e565b610bd7565b3480156103f2575f80fd5b50610115610401366004612ec0565b610d4c565b348015610411575f80fd5b50610115610420366004612f10565b610dc7565b610115610433366004612e13565b610530565b348015610443575f80fd5b50610115610e7e565b348015610457575f80fd5b50610115610466366004612e13565b610fa8565b348015610476575f80fd5b50610115610485366004612e6e565b6111c7565b348015610495575f80fd5b506104ed6104a4366004612e13565b5f602081905290815260409020805460019091015460ff81169061010081046001600160701b031690600160781b810463ffffffff1690600160981b900465ffffffffffff1685565b6040805195865293151560208601526001600160701b039092169284019290925263ffffffff909116606083015265ffffffffffff16608082015260a001610144565b5f61053b82346115ce565b9050816001600160a01b03167f2da466a7b24304f47e87fa2e1e5a81b9831ce54fec19055ce277ca2f39ba42c48260405161057891815260200190565b60405180910390a25050565b5f805a90503330146105dd5760405162461bcd60e51b815260206004820152601760248201527f4141393220696e7465726e616c2063616c6c206f6e6c7900000000000000000060448201526064015b60405180910390fd5b8451606081015160a082015181016127100160405a603f028161060257610602612f4e565b0410156106185763deaddead60e01b5f5260205ffd5b87515f90156106a6575f610631845f01515f8c86611600565b9050806106a4575f610644610800611616565b80519091501561069e57845f01516001600160a01b03168a602001517f1c4fada7374c0a9ee8841fc38afe82932dc0f8e69012e927f061a8bae611a201876020015184604051610695929190612faf565b60405180910390a35b60019250505b505b5f88608001515a86030190506106f4828a8a8a8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92019190915250879250611641915050565b9a9950505050505050505050565b5f6001600160e01b0319821663307e35b760e11b148061073257506001600160e01b0319821663122a0e9b60e31b145b8061074d57506001600160e01b0319821663cf28ef9760e01b145b8061076857506001600160e01b03198216633e84f02160e01b145b8061078357506301ffc9a760e01b6001600160e01b03198316145b92915050565b335f90815260208190526040902063ffffffff82166107ea5760405162461bcd60e51b815260206004820152601a60248201527f6d757374207370656369667920756e7374616b652064656c617900000000000060448201526064016105d4565b600181015463ffffffff600160781b9091048116908316101561084f5760405162461bcd60e51b815260206004820152601c60248201527f63616e6e6f7420646563726561736520756e7374616b652074696d650000000060448201526064016105d4565b60018101545f9061086f90349061010090046001600160701b0316612fdb565b90505f81116108b55760405162461bcd60e51b81526020600482015260126024820152711b9bc81cdd185ad9481cdc1958da599a595960721b60448201526064016105d4565b6001600160701b038111156108fd5760405162461bcd60e51b815260206004820152600e60248201526d7374616b65206f766572666c6f7760901b60448201526064016105d4565b6040805160a08101825283548152600160208083018281526001600160701b0386811685870190815263ffffffff8a8116606088018181525f60808a0181815233808352828a52918c90209a518b55965199909801805494519151965165ffffffffffff16600160981b0265ffffffffffff60981b1997909416600160781b029690961669ffffffffffffffffffff60781b1991909516610100026effffffffffffffffffffffffffff0019991515999099166effffffffffffffffffffffffffffff1990941693909317979097179190911691909117179055835185815290810192909252917fa5ae833d0bb1dcd632d98a8b70973e8516812898e19bf27b70071ebc8dc52c01910160405180910390a2505050565b335f9081526001602090815260408083206001600160c01b03851684529091528120805491610a4283612fee565b919050555050565b335f9081526020819052604090208054821115610aa95760405162461bcd60e51b815260206004820152601960248201527f576974686472617720616d6f756e7420746f6f206c617267650000000000000060448201526064016105d4565b8054610ab6908390613006565b8155604080516001600160a01b03851681526020810184905233917fd1c19fbcd4551a5edfb66d43d2e337c04837afda3482b42bdf569a8fccdae5fb910160405180910390a25f836001600160a01b0316836040515f6040518083038185875af1925050503d805f8114610b45576040519150601f19603f3d011682016040523d82523d5f602084013e610b4a565b606091505b5050905080610b905760405162461bcd60e51b81526020600482015260126024820152716661696c656420746f20776974686472617760701b60448201526064016105d4565b50505050565b5f610ba0826117f9565b6040805160208101929092523090820152466060820152608001604051602081830303815290604052805190602001209050919050565b610bdf611811565b815f816001600160401b03811115610bf957610bf9612a5a565b604051908082528060200260200182016040528015610c3257816020015b610c1f6129d0565b815260200190600190039081610c175790505b5090505f5b82811015610ca7575f828281518110610c5257610c52613019565b602002602001015190505f80610c8c848a8a87818110610c7457610c74613019565b9050602002810190610c86919061302d565b85611839565b91509150610c9c8483835f611a3b565b505050600101610c37565b506040515f907fbb47ee3e183a558b1a2ff0874b079f3fc5478b7454eacf2bfc5af2ff5878f972908290a15f5b83811015610d2f57610d2381888884818110610cf257610cf2613019565b9050602002810190610d04919061302d565b858481518110610d1657610d16613019565b6020026020010151611bd5565b90910190600101610cd4565b50610d3a8482611e83565b505050610d476001600255565b505050565b5f80846001600160a01b03168484604051610d6892919061304c565b5f60405180830381855af49150503d805f8114610da0576040519150601f19603f3d011682016040523d82523d5f602084013e610da5565b606091505b50915091508181604051632650415560e21b81526004016105d492919061305b565b604051632b870d1b60e11b81525f906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063570e1a3690610e17908690869060040161309d565b6020604051808303815f875af1158015610e33573d5f803e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610e5791906130b0565b604051633653dc0360e11b81526001600160a01b03821660048201529091506024016105d4565b335f90815260208190526040812060018101549091600160781b90910463ffffffff169003610edc5760405162461bcd60e51b815260206004820152600a6024820152691b9bdd081cdd185ad95960b21b60448201526064016105d4565b600181015460ff16610f245760405162461bcd60e51b8152602060048201526011602482015270616c726561647920756e7374616b696e6760781b60448201526064016105d4565b60018101545f90610f4290600160781b900463ffffffff16426130cb565b60018301805460ff65ffffffffffff60981b011916600160981b65ffffffffffff841690810260ff19169190911790915560405190815290915033907ffa9b3c14cc825c412c9ed81b3ba365a5b459439403f18829e572ed53a4180f0a90602001610578565b335f908152602081905260409020600181015461010090046001600160701b03168061100d5760405162461bcd60e51b81526020600482015260146024820152734e6f207374616b6520746f20776974686472617760601b60448201526064016105d4565b6001820154600160981b900465ffffffffffff1661106d5760405162461bcd60e51b815260206004820152601d60248201527f6d7573742063616c6c20756e6c6f636b5374616b65282920666972737400000060448201526064016105d4565b600182015442600160981b90910465ffffffffffff1611156110d15760405162461bcd60e51b815260206004820152601b60248201527f5374616b65207769746864726177616c206973206e6f7420647565000000000060448201526064016105d4565b600182018054610100600160c81b0319169055604080516001600160a01b03851681526020810183905233917fb7c918e0e249f999e965cafeb6c664271b3f4317d296461500e71da39f0cbda3910160405180910390a25f836001600160a01b0316826040515f6040518083038185875af1925050503d805f8114611171576040519150601f19603f3d011682016040523d82523d5f602084013e611176565b606091505b5050905080610b905760405162461bcd60e51b815260206004820152601860248201527f6661696c656420746f207769746864726177207374616b65000000000000000060448201526064016105d4565b6111cf611811565b815f805b8281101561133657368686838181106111ee576111ee613019565b905060200281019061120091906130f1565b9050365f61120e8380613105565b90925090505f6112246040850160208601612e13565b90505f196001600160a01b0382160161127f5760405162461bcd60e51b815260206004820152601760248201527f4141393620696e76616c69642061676772656761746f7200000000000000000060448201526064016105d4565b6001600160a01b0381161561131a576001600160a01b038116632dd8113384846112ac604089018961314a565b6040518563ffffffff1660e01b81526004016112cb94939291906132ab565b5f6040518083038186803b1580156112e1575f80fd5b505afa9250505080156112f2575060015b61131a5760405163086a9f7560e41b81526001600160a01b03821660048201526024016105d4565b6113248287612fdb565b955050600190930192506111d3915050565b505f816001600160401b0381111561135057611350612a5a565b60405190808252806020026020018201604052801561138957816020015b6113766129d0565b81526020019060019003908161136e5790505b5090505f805b8481101561146057368888838181106113aa576113aa613019565b90506020028101906113bc91906130f1565b9050365f6113ca8380613105565b90925090505f6113e06040850160208601612e13565b9050815f5b8181101561144e575f89898151811061140057611400613019565b602002602001015190505f806114228b898987818110610c7457610c74613019565b9150915061143284838389611a3b565b8a61143c81612fee565b9b5050600190930192506113e5915050565b50506001909401935061138f92505050565b506040517fbb47ee3e183a558b1a2ff0874b079f3fc5478b7454eacf2bfc5af2ff5878f972905f90a1505f80805b8581101561158a57368989838181106114a9576114a9613019565b90506020028101906114bb91906130f1565b90506114cd6040820160208301612e13565b6001600160a01b03167f575ff3acadd5ab348fe1855e217e0f3678f8d767d7494c9f9fefbee2e17cca4d60405160405180910390a2365f61150e8380613105565b9092509050805f5b81811015611579576115588885858481811061153457611534613019565b9050602002810190611546919061302d565b8b8b81518110610d1657610d16613019565b6115629088612fdb565b96508761156e81612fee565b985050600101611516565b50506001909301925061148e915050565b506040515f907f575ff3acadd5ab348fe1855e217e0f3678f8d767d7494c9f9fefbee2e17cca4d908290a26115bf8682611e83565b5050505050610d476001600255565b6001600160a01b0382165f908152602081905260408120805482906115f4908590612fdb565b91829055509392505050565b5f805f845160208601878987f195945050505050565b60603d828111156116245750815b604051602082018101604052818152815f602083013e9392505050565b5f805a85519091505f908161165582611f78565b60e08301519091506001600160a01b038116611674578251935061172b565b8093505f8851111561172b57868202955060028a600281111561169957611699613325565b1461172b5760a0830151604051637c627b2160e01b81526001600160a01b03831691637c627b21916116d5908e908d908c908990600401613339565b5f604051808303815f88803b1580156116ec575f80fd5b5087f1935050505080156116fe575060015b61172b575f61170e610800611616565b905080604051632b5e552f60e21b81526004016105d49190613380565b5a60a0840151606085015160808c01519288039990990198019088038082111561175e576064600a828403020498909801975b505060408901518783029650868110156117b75760028b600281111561178657611786613325565b036117a8578096506117978a611fa9565b6117a38a5f898b611ff8565b6117eb565b63deadaa5160e01b5f5260205ffd5b8681036117c486826115ce565b505f808d60028111156117d9576117d9613325565b1490506117e88c828b8d611ff8565b50505b505050505050949350505050565b5f61180382612073565b805190602001209050919050565b600280540361183357604051633ee5aeb560e01b815260040160405180910390fd5b60028055565b5f805f5a845190915061184c8682612128565b61185586610b96565b6020860152604081015161012082015161010083015160a08401516080850151606086015160c0870151861717171717176effffffffffffffffffffffffffffff8111156118e55760405162461bcd60e51b815260206004820152601860248201527f41413934206761732076616c756573206f766572666c6f77000000000000000060448201526064016105d4565b5f6119138460c081015160a08201516080830151606084015160408501516101009095015194010101010290565b90506119228a8a8a8487612234565b9650611935845f015185602001516123c5565b61198b5789604051631101335b60e11b81526004016105d4918152604060208201819052601a908201527f4141323520696e76616c6964206163636f756e74206e6f6e6365000000000000606082015260800190565b825a860311156119e75789604051631101335b60e11b81526004016105d4918152604060208201819052601e908201527f41413236206f76657220766572696669636174696f6e4761734c696d69740000606082015260800190565b60e08401516060906001600160a01b031615611a0e57611a098b8b8b85612411565b975090505b604089018290528060608a015260a08a01355a870301896080018181525050505050505050935093915050565b5f80611a46856125c8565b91509150816001600160a01b0316836001600160a01b031614611aac5785604051631101335b60e11b81526004016105d49181526040602082018190526014908201527320a0991a1039b4b3b730ba3ab9329032b93937b960611b606082015260800190565b8015611b045785604051631101335b60e11b81526004016105d49181526040602082018190526017908201527f414132322065787069726564206f72206e6f7420647565000000000000000000606082015260800190565b5f611b0e856125c8565b925090506001600160a01b03811615611b6a5786604051631101335b60e11b81526004016105d49181526040602082018190526014908201527320a0999a1039b4b3b730ba3ab9329032b93937b960611b606082015260800190565b8115611bcc5786604051631101335b60e11b81526004016105d49181526040602082018190526021908201527f41413332207061796d61737465722065787069726564206f72206e6f742064756060820152606560f81b608082015260a00190565b50505050505050565b5f805a90505f611be6846060015190565b6040519091505f903682611bfd60608a018a61314a565b9150915060605f826003811115611c1357843591505b506372288ed160e01b6001600160e01b0319821601611cc0575f8b8b60200151604051602401611c44929190613392565b60408051601f198184030181529181526020820180516001600160e01b0316638dd7712f60e01b1790525190915030906242dc5390611c8b9084908f908d9060240161345d565b604051602081830303815290604052915060e01b6020820180516001600160e01b038381831617835250505050925050611d15565b306001600160a01b03166242dc5385858d8b604051602401611ce5949392919061349c565b604051602081830303815290604052915060e01b6020820180516001600160e01b03838183161783525050505091505b60205f8351602085015f305af195505f51985084604052505050505080611e79575f3d80602003611d4a5760205f803e5f5191505b5063deaddead60e01b8103611d9d5787604051631101335b60e11b81526004016105d4918152604060208201819052600f908201526e41413935206f7574206f662067617360881b606082015260800190565b63deadaa5160e01b8103611dec575f86608001515a611dbc9087613006565b611dc69190612fdb565b6040880151909150611dd788611fa9565b611de3885f8385611ff8565b9550611e779050565b855180516020808901519201516001600160a01b0390911691907ff62676f440ff169a3a9afdbf812e89e7f95975ee8e5c31214ffdef631c5f479290611e33610800611616565b604051611e41929190612faf565b60405180910390a35f86608001515a611e5a9087613006565b611e649190612fdb565b9050611e736002888684611641565b9550505b505b5050509392505050565b6001600160a01b038216611ed95760405162461bcd60e51b815260206004820152601860248201527f4141393020696e76616c69642062656e6566696369617279000000000000000060448201526064016105d4565b5f826001600160a01b0316826040515f6040518083038185875af1925050503d805f8114611f22576040519150601f19603f3d011682016040523d82523d5f602084013e611f27565b606091505b5050905080610d475760405162461bcd60e51b815260206004820152601f60248201527f41413931206661696c65642073656e6420746f2062656e65666963696172790060448201526064016105d4565b6101008101516101208201515f9190808203611f95575092915050565b611fa182488301612617565b949350505050565b80518051602080840151928101516040519081526001600160a01b0390921692917f67b4fa9642f42120bf031f3051d1824b0fe25627945b27b8a6a65d5761d5482e910160405180910390a350565b835160e081015181516020808801519301516040516001600160a01b039384169492909316927f49628fd1471006c1482da88028e9ce4dbb080b815c9b0344d39e5a8e6ec1419f916120659189908990899093845291151560208401526040830152606082015260800190565b60405180910390a450505050565b6060813560208301355f61209261208d604087018761314a565b61262e565b90505f6120a561208d606088018861314a565b9050608086013560a087013560c08801355f6120c761208d60e08c018c61314a565b604080516001600160a01b039a909a1660208b015289810198909852606089019690965250608087019390935260a086019190915260c085015260e08401526101008084019190915281518084039091018152610120909201905292915050565b6121356020830183612e13565b6001600160a01b03168152602082810135908201526001600160801b036080808401358281166060850152811c604084015260a084013560c0808501919091528401359182166101008401521c610120820152365f61219760e085018561314a565b9092509050801561221a5760348110156121f35760405162461bcd60e51b815260206004820152601d60248201527f4141393320696e76616c6964207061796d6173746572416e644461746100000060448201526064016105d4565b6121fd8282612640565b60a086015260808501526001600160a01b031660e0840152610b90565b5f60e084018190526080840181905260a084015250505050565b825180515f9190612252888761224d60408b018b61314a565b6126a7565b60e08201515f6001600160a01b038216612293576001600160a01b0383165f9081526020819052604090205487811161228d5780880361228f565b5f5b9150505b60208801516040516306608bdf60e21b81526001600160a01b038516916319822f7c9189916122c9918e919087906004016134d2565b6020604051808303815f8887f193505050508015612304575060408051601f3d908101601f19168201909252612301918101906134f6565b60015b61232f5789612314610800611616565b6040516365c8fd4d60e01b81526004016105d492919061350d565b94506001600160a01b0382166123b8576001600160a01b0383165f9081526020819052604090208054808911156123b2578b604051631101335b60e11b81526004016105d49181526040602082018190526017908201527f41413231206469646e2774207061792070726566756e64000000000000000000606082015260800190565b88900390555b5050505095945050505050565b6001600160a01b0382165f90815260016020908152604080832084821c80855292528220805484916001600160401b03831691908561240383612fee565b909155501495945050505050565b60605f805a855160e08101516001600160a01b0381165f9081526020819052604090208054939450919290919087811015612498578a604051631101335b60e11b81526004016105d4918152604060208201819052601e908201527f41413331207061796d6173746572206465706f73697420746f6f206c6f770000606082015260800190565b878103825f01819055505f84608001519050836001600160a01b03166352b7512c828d8d602001518d6040518563ffffffff1660e01b81526004016124df939291906134d2565b5f604051808303815f8887f19350505050801561251d57506040513d5f823e601f3d908101601f1916820160405261251a9190810190613549565b60015b612548578b61252d610800611616565b6040516365c8fd4d60e01b81526004016105d49291906135c4565b9098509650805a870311156125b9578b604051631101335b60e11b81526004016105d49181526040602082018190526027908201527f41413336206f766572207061796d6173746572566572696669636174696f6e47606082015266185cd31a5b5a5d60ca1b608082015260a00190565b50505050505094509492505050565b5f80825f036125db57505f928392509050565b5f6125e584612961565b9050806040015165ffffffffffff1642118061260c5750806020015165ffffffffffff1642105b905194909350915050565b5f8183106126255781612627565b825b9392505050565b5f604051828085833790209392505050565b5f80806126506014828688613600565b61265991613627565b60601c61266a602460148789613600565b6126739161365c565b60801c61268460346024888a613600565b61268d9161365c565b9194506001600160801b0316925060801c90509250925092565b8015610b90578251516001600160a01b0381163b156127125784604051631101335b60e11b81526004016105d4918152604060208201819052601f908201527f414131302073656e64657220616c726561647920636f6e737472756374656400606082015260800190565b5f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663570e1a36865f01516040015186866040518463ffffffff1660e01b815260040161276992919061309d565b6020604051808303815f8887f1158015612785573d5f803e3d5ffd5b50505050506040513d601f19601f820116820180604052508101906127aa91906130b0565b90506001600160a01b03811661280c5785604051631101335b60e11b81526004016105d4918152604060208201819052601b908201527f4141313320696e6974436f6465206661696c6564206f72204f4f470000000000606082015260800190565b816001600160a01b0316816001600160a01b0316146128765785604051631101335b60e11b81526004016105d491815260406020808301829052908201527f4141313420696e6974436f6465206d7573742072657475726e2073656e646572606082015260800190565b806001600160a01b03163b5f036128d85785604051631101335b60e11b81526004016105d491815260406020808301829052908201527f4141313520696e6974436f6465206d757374206372656174652073656e646572606082015260800190565b5f6128e66014828688613600565b6128ef91613627565b60601c9050826001600160a01b031686602001517fd51a9c61267aa6196961883ecf5ff2da6619c37dac0fa92122513fb32c032d2d83895f015160e001516040516129509291906001600160a01b0392831681529116602082015260400190565b60405180910390a350505050505050565b604080516060810182525f80825260208201819052918101919091528160a081901c65ffffffffffff81165f0361299b575065ffffffffffff5b604080516060810182526001600160a01b03909316835260d09490941c602083015265ffffffffffff16928101929092525090565b6040518060a00160405280612a396040518061014001604052805f6001600160a01b031681526020015f81526020015f81526020015f81526020015f81526020015f81526020015f81526020015f6001600160a01b031681526020015f81526020015f81525090565b81526020015f80191681526020015f81526020015f81526020015f81525090565b634e487b7160e01b5f52604160045260245ffd5b60405160a081016001600160401b0381118282101715612a9057612a90612a5a565b60405290565b60405161014081016001600160401b0381118282101715612a9057612a90612a5a565b604051601f8201601f191681016001600160401b0381118282101715612ae157612ae1612a5a565b604052919050565b5f6001600160401b03821115612b0157612b01612a5a565b50601f01601f191660200190565b6001600160a01b0381168114612b23575f80fd5b50565b8035612b3181612b0f565b919050565b5f8183036101c0811215612b48575f80fd5b612b50612a6e565b915061014080821215612b61575f80fd5b612b69612a96565b9150612b7484612b26565b82526020840135602083015260408401356040830152606084013560608301526080840135608083015260a084013560a083015260c084013560c0830152612bbe60e08501612b26565b60e0830152610100848101359083015261012080850135908301529082528201356020820152610160820135604082015261018082013560608201526101a0909101356080820152919050565b5f8083601f840112612c1b575f80fd5b5081356001600160401b03811115612c31575f80fd5b602083019150836020828501011115612c48575f80fd5b9250929050565b5f805f806102008587031215612c63575f80fd5b84356001600160401b0380821115612c79575f80fd5b818701915087601f830112612c8c575f80fd5b8135612c9f612c9a82612ae9565b612ab9565b818152896020838601011115612cb3575f80fd5b816020850160208301375f602083830101528097505050612cd78860208901612b36565b94506101e0870135915080821115612ced575f80fd5b50612cfa87828801612c0b565b95989497509550505050565b5f60208284031215612d16575f80fd5b81356001600160e01b031981168114612627575f80fd5b5f60208284031215612d3d575f80fd5b813563ffffffff81168114612627575f80fd5b80356001600160c01b0381168114612b31575f80fd5b5f60208284031215612d76575f80fd5b61262782612d50565b5f8060408385031215612d90575f80fd5b8235612d9b81612b0f565b9150612da960208401612d50565b90509250929050565b5f8060408385031215612dc3575f80fd5b8235612dce81612b0f565b946020939093013593505050565b5f60208284031215612dec575f80fd5b81356001600160401b03811115612e01575f80fd5b82016101208185031215612627575f80fd5b5f60208284031215612e23575f80fd5b813561262781612b0f565b5f8083601f840112612e3e575f80fd5b5081356001600160401b03811115612e54575f80fd5b6020830191508360208260051b8501011115612c48575f80fd5b5f805f60408486031215612e80575f80fd5b83356001600160401b03811115612e95575f80fd5b612ea186828701612e2e565b9094509250506020840135612eb581612b0f565b809150509250925092565b5f805f60408486031215612ed2575f80fd5b8335612edd81612b0f565b925060208401356001600160401b03811115612ef7575f80fd5b612f0386828701612c0b565b9497909650939450505050565b5f8060208385031215612f21575f80fd5b82356001600160401b03811115612f36575f80fd5b612f4285828601612c0b565b90969095509350505050565b634e487b7160e01b5f52601260045260245ffd5b5f5b83811015612f7c578181015183820152602001612f64565b50505f910152565b5f8151808452612f9b816020860160208601612f62565b601f01601f19169290920160200192915050565b828152604060208201525f611fa16040830184612f84565b634e487b7160e01b5f52601160045260245ffd5b8082018082111561078357610783612fc7565b5f60018201612fff57612fff612fc7565b5060010190565b8181038181111561078357610783612fc7565b634e487b7160e01b5f52603260045260245ffd5b5f823561011e19833603018112613042575f80fd5b9190910192915050565b818382375f9101908152919050565b8215158152604060208201525f611fa16040830184612f84565b81835281816020850137505f828201602090810191909152601f909101601f19169091010190565b602081525f611fa1602083018486613075565b5f602082840312156130c0575f80fd5b815161262781612b0f565b65ffffffffffff8181168382160190808211156130ea576130ea612fc7565b5092915050565b5f8235605e19833603018112613042575f80fd5b5f808335601e1984360301811261311a575f80fd5b8301803591506001600160401b03821115613133575f80fd5b6020019150600581901b3603821315612c48575f80fd5b5f808335601e1984360301811261315f575f80fd5b8301803591506001600160401b03821115613178575f80fd5b602001915036819003821315612c48575f80fd5b5f808335601e198436030181126131a1575f80fd5b83016020810192503590506001600160401b038111156131bf575f80fd5b803603821315612c48575f80fd5b5f6101206131eb846131de85612b26565b6001600160a01b03169052565b60208301356020850152613202604084018461318c565b8260408701526132158387018284613075565b92505050613226606084018461318c565b8583036060870152613239838284613075565b925050506080830135608085015260a083013560a085015260c083013560c085015261326860e084018461318c565b85830360e087015261327b838284613075565b9250505061010061328e8185018561318c565b868403838801526132a0848284613075565b979650505050505050565b604080825281018490525f6060600586901b8301810190830187835b8881101561330f57858403605f190183528135368b900361011e190181126132ed575f80fd5b6132f9858c83016131cd565b94505060209283019291909101906001016132c7565b50505082810360208401526132a0818587613075565b634e487b7160e01b5f52602160045260245ffd5b5f6003861061335657634e487b7160e01b5f52602160045260245ffd5b8582526080602083015261336d6080830186612f84565b6040830194909452506060015292915050565b602081525f6126276020830184612f84565b604081525f6133a460408301856131cd565b90508260208301529392505050565b805180516001600160a01b031683526020810151602084015260408101516040840152606081015160608401526080810151608084015260a081015160a084015260c081015160c084015260e081015161341860e08501826001600160a01b03169052565b5061010081810151908401526101209081015190830152602081015161014083015260408101516101608301526060810151610180830152608001516101a090910152565b5f61020080835261347081840187612f84565b905061347f60208401866133b3565b8281036101e08401526134928185612f84565b9695505050505050565b5f6102008083526134b08184018789613075565b90506134bf60208401866133b3565b8281036101e08401526132a08185612f84565b606081525f6134e460608301866131cd565b60208301949094525060400152919050565b5f60208284031215613506575f80fd5b5051919050565b82815260606020820152600d60608201526c10504c8cc81c995d995c9d1959609a1b608082015260a060408201525f611fa160a0830184612f84565b5f806040838503121561355a575f80fd5b82516001600160401b0381111561356f575f80fd5b8301601f8101851361357f575f80fd5b805161358d612c9a82612ae9565b8181528660208385010111156135a1575f80fd5b6135b2826020830160208601612f62565b60209590950151949694955050505050565b82815260606020820152600d60608201526c10504cccc81c995d995c9d1959609a1b608082015260a060408201525f611fa160a0830184612f84565b5f808585111561360e575f80fd5b8386111561361a575f80fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156136545780818660140360031b1b83161692505b505092915050565b6fffffffffffffffffffffffffffffffff1981358181169160108510156136545760109490940360031b84901b169092169291505056fea2646970667358221220397996f36f516bad9951ba1f23ade372bdd0ef7639623362f57652a7762031c164736f6c63430008170033608060405234801561000f575f80fd5b506101e28061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063570e1a361461002d575b5f80fd5b61004061003b3660046100e4565b61005c565b6040516001600160a01b03909116815260200160405180910390f35b5f8061006b6014828587610150565b61007491610177565b60601c90505f6100878460148188610150565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92018290525084519495509360209350849250905082850182875af190505f519350806100db575f93505b50505092915050565b5f80602083850312156100f5575f80fd5b823567ffffffffffffffff8082111561010c575f80fd5b818501915085601f83011261011f575f80fd5b81358181111561012d575f80fd5b86602082850101111561013e575f80fd5b60209290920196919550909350505050565b5f808585111561015e575f80fd5b8386111561016a575f80fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156101a45780818660140360031b1b83161692505b50509291505056fea264697066735822122078c1aaa9f040f8c523cf2b642dd06415593eec30d2e75021458af7e0c704e6fb64736f6c63430008170033",fke={};we(fke,{abi:()=>pke,bytecode:()=>hke});var pke=[{type:"function",name:"executeUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"}],hke="0x",bke={};we(bke,{abi:()=>yke,bytecode:()=>mke});var yke=[{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"from",type:"address",internalType:"address"},{name:"ids",type:"uint256[]",internalType:"uint256[]"},{name:"values",type:"uint256[]",internalType:"uint256[]"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"onERC1155Received",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"from",type:"address",internalType:"address"},{name:"id",type:"uint256",internalType:"uint256"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],mke="0x",gke={};we(gke,{abi:()=>wke,bytecode:()=>vke});var wke=[{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"},{name:"id",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"balanceOfBatch",inputs:[{name:"accounts",type:"address[]",internalType:"address[]"},{name:"ids",type:"uint256[]",internalType:"uint256[]"}],outputs:[{name:"",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{name:"account",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"safeBatchTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"ids",type:"uint256[]",internalType:"uint256[]"},{name:"values",type:"uint256[]",internalType:"uint256[]"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"id",type:"uint256",internalType:"uint256"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"approved",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"ApprovalForAll",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"TransferBatch",inputs:[{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"ids",type:"uint256[]",indexed:!1,internalType:"uint256[]"},{name:"values",type:"uint256[]",indexed:!1,internalType:"uint256[]"}],anonymous:!1},{type:"event",name:"TransferSingle",inputs:[{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"id",type:"uint256",indexed:!1,internalType:"uint256"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"URI",inputs:[{name:"value",type:"string",indexed:!1,internalType:"string"},{name:"id",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1}],vke="0x",Eke={};we(Eke,{abi:()=>_ke,bytecode:()=>Tke});var _ke=[{type:"function",name:"afterAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"}],Tke="0x",xke={};we(xke,{abi:()=>Ske,bytecode:()=>Ake});var Ske=[{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"approveAndCall",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"approveAndCall",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferAndCall",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferAndCall",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFromAndCall",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFromAndCall",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],Ake="0x",Cke={};we(Cke,{abi:()=>Ike,bytecode:()=>Oke});var Ike=[{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"_newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1}],Oke="0x",Mke={};we(Mke,{abi:()=>Pke,bytecode:()=>kke});var Pke=[{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],kke="0x",Nke={};we(Nke,{abi:()=>Rke,bytecode:()=>Dke});var Rke=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"executions_",type:"tuple[]",internalType:"struct Execution[]",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"}],Dke="0x608060405234801561001057600080fd5b5061083a806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610417565b50505050505050505050565b005b610076610086366004610417565b6100b4565b61009e6100993660046104e4565b6102fd565b6040516100ab9190610526565b60405180910390f35b85600160f81b6001600160f81b03198216146101175760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6001600160f81b03198116156101835760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161010e565b503660006101918989610319565b9150915060006101a18f8f6102fd565b8051909150821461020a5760405162461bcd60e51b815260206004820152602d60248201527f457861637443616c6c646174614261746368456e666f726365723a696e76616c60448201526c69642d62617463682d73697a6560981b606482015260840161010e565b60005b828110156102eb57838382818110610227576102276105e8565b905060200281019061023991906105fe565b61024790604081019061061e565b604051610255929190610665565b604051809103902082828151811061026f5761026f6105e8565b60200260200101516040015180519060200120146102e35760405162461bcd60e51b815260206004820152602b60248201527f457861637443616c6c646174614261746368456e666f726365723a696e76616c60448201526a69642d63616c6c6461746160a81b606482015260840161010e565b60010161020d565b50505050505050505050505050505050565b60606103098383610319565b610312916106e5565b9392505050565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156103515763ba597e7e6000526004601cfd5b83156103a8578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c171561039f5763ba597e7e6000526004601cfd5b5050508261035b575b5050509250929050565b60008083601f8401126103c457600080fd5b50813567ffffffffffffffff8111156103dc57600080fd5b6020830191508360208285010111156103f457600080fd5b9250929050565b80356001600160a01b038116811461041257600080fd5b919050565b60008060008060008060008060008060e08b8d03121561043657600080fd5b8a3567ffffffffffffffff8082111561044e57600080fd5b61045a8e838f016103b2565b909c509a5060208d013591508082111561047357600080fd5b61047f8e838f016103b2565b909a50985060408d0135975060608d013591508082111561049f57600080fd5b506104ac8d828e016103b2565b90965094505060808b013592506104c560a08c016103fb565b91506104d360c08c016103fb565b90509295989b9194979a5092959850565b600080602083850312156104f757600080fd5b823567ffffffffffffffff81111561050e57600080fd5b61051a858286016103b2565b90969095509350505050565b600060208083018184528085518083526040925060408601915060408160051b8701018488016000805b848110156105d957898403603f19018652825180516001600160a01b0316855288810151898601528701516060888601819052815190860181905283905b808210156105ac578282018b015187830160800152908a019061058e565b8681016080908101869052988b0198601f909101601f191690960190950194505091870191600101610550565b50919998505050505050505050565b634e487b7160e01b600052603260045260246000fd5b60008235605e1983360301811261061457600080fd5b9190910192915050565b6000808335601e1984360301811261063557600080fd5b83018035915067ffffffffffffffff82111561065057600080fd5b6020019150368190038213156103f457600080fd5b8183823760009101908152919050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff811182821017156106ae576106ae610675565b60405290565b604051601f8201601f1916810167ffffffffffffffff811182821017156106dd576106dd610675565b604052919050565b600067ffffffffffffffff8084111561070057610700610675565b8360051b60206107118183016106b4565b86815291850191818101903684111561072957600080fd5b865b848110156107f8578035868111156107435760008081fd5b880160603682900312156107575760008081fd5b61075f61068b565b610768826103fb565b81528582013586820152604080830135898111156107865760008081fd5b9290920191601f368185011261079c5760008081fd5b83358a8111156107ae576107ae610675565b6107bf818301601f19168a016106b4565b915080825236898287010111156107d65760008081fd5b808986018a84013760009082018901529082015284525091830191830161072b565b5097965050505050505056fea26469706673582212208d28ccd8e989ae016d34ead1b420bc19b8be9eaa747049c2602c587d0a44891264736f6c63430008170033",$ke={};we($ke,{abi:()=>Lke,bytecode:()=>Bke});var Lke=[{type:"function",name:"isValidSignature",inputs:[{name:"hash",type:"bytes32",internalType:"bytes32"},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"}],Bke="0x",Fke={};we(Fke,{abi:()=>Uke,bytecode:()=>jke});var Uke=[{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"isValidSignature",inputs:[{name:"hash",type:"bytes32",internalType:"bytes32"},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"}],jke="0x",Hke={};we(Hke,{abi:()=>zke,bytecode:()=>qke});var zke=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"executions_",type:"tuple[]",internalType:"struct Execution[]",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"}],qke="0x608060405234801561001057600080fd5b50610870806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046103e9565b50505050505050505050565b005b6100766100863660046103e9565b6100b4565b61009e6100993660046104b6565b6102cf565b6040516100ab91906104f8565b60405180910390f35b85600160f81b6001600160f81b03198216146101175760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6001600160f81b03198116156101835760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161010e565b5036600061019189896102eb565b9150915060006101a18f8f6102cf565b8051909150821461020b5760405162461bcd60e51b815260206004820152602e60248201527f4578616374457865637574696f6e4261746368456e666f726365723a696e766160448201526d6c69642d62617463682d73697a6560901b606482015260840161010e565b8060405160200161021c91906104f8565b6040516020818303038152906040528051906020012083836040516020016102459291906105ba565b60405160208183030381529060405280519060200120146102be5760405162461bcd60e51b815260206004820152602d60248201527f4578616374457865637574696f6e4261746368456e666f726365723a696e766160448201526c3634b216b2bc32b1baba34b7b760991b606482015260840161010e565b505050505050505050505050505050565b60606102db83836102eb565b6102e49161071b565b9392505050565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156103235763ba597e7e6000526004601cfd5b831561037a578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c17156103715763ba597e7e6000526004601cfd5b5050508261032d575b5050509250929050565b60008083601f84011261039657600080fd5b50813567ffffffffffffffff8111156103ae57600080fd5b6020830191508360208285010111156103c657600080fd5b9250929050565b80356001600160a01b03811681146103e457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561040857600080fd5b8a3567ffffffffffffffff8082111561042057600080fd5b61042c8e838f01610384565b909c509a5060208d013591508082111561044557600080fd5b6104518e838f01610384565b909a50985060408d0135975060608d013591508082111561047157600080fd5b5061047e8d828e01610384565b90965094505060808b0135925061049760a08c016103cd565b91506104a560c08c016103cd565b90509295989b9194979a5092959850565b600080602083850312156104c957600080fd5b823567ffffffffffffffff8111156104e057600080fd5b6104ec85828601610384565b90969095509350505050565b600060208083018184528085518083526040925060408601915060408160051b8701018488016000805b848110156105ab57898403603f19018652825180516001600160a01b0316855288810151898601528701516060888601819052815190860181905283905b8082101561057e578282018b015187830160800152908a0190610560565b8681016080908101869052988b0198601f909101601f191690960190950194505091870191600101610522565b50919998505050505050505050565b60208082528181018390526000906040808401600586901b8501820187855b8881101561069d57878303603f190184528135368b9003605e190181126105ff57600080fd5b8a0160606001600160a01b03610614836103cd565b168552878201358886015286820135601e1983360301811261063557600080fd5b90910187810191903567ffffffffffffffff81111561065357600080fd5b80360383131561066257600080fd5b8188870152808287015260809150808383880137600086820183015295880195601f01601f19169094019093019250908501906001016105d9565b509098975050505050505050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff811182821017156106e4576106e46106ab565b60405290565b604051601f8201601f1916810167ffffffffffffffff81118282101715610713576107136106ab565b604052919050565b600067ffffffffffffffff80841115610736576107366106ab565b8360051b60206107478183016106ea565b86815291850191818101903684111561075f57600080fd5b865b8481101561082e578035868111156107795760008081fd5b8801606036829003121561078d5760008081fd5b6107956106c1565b61079e826103cd565b81528582013586820152604080830135898111156107bc5760008081fd5b9290920191601f36818501126107d25760008081fd5b83358a8111156107e4576107e46106ab565b6107f5818301601f19168a016106ea565b9150808252368982870101111561080c5760008081fd5b808986018a840137600090820189015290820152845250918301918301610761565b5097965050505050505056fea26469706673582212205e0b91ba43666d3d9ebd5eb11438023697fc7df67dea03687ac126f13d8d464564736f6c63430008170033",Kke={};we(Kke,{abi:()=>Vke,bytecode:()=>Wke});var Vke=[{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"error",name:"ExecutionFailed",inputs:[]}],Wke="0x6080604052348015600f57600080fd5b50603f80601d6000396000f3fe6080604052600080fdfea264697066735822122070e8319b78da08f58cb6bf69f50e33c8c919ae6c2113f3ef3b34f1da6bf44c5f64736f6c63430008170033",Gke={};we(Gke,{abi:()=>Yke,bytecode:()=>Jke});var Yke=[{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1}],Jke="0x",Zke={};we(Zke,{abi:()=>Xke,bytecode:()=>Qke});var Xke=[{type:"function",name:"allowance",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"spender",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"approve",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"totalSupply",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"transfer",inputs:[{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"spender",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"value",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],Qke="0x",eNe={};we(eNe,{abi:()=>tNe,bytecode:()=>nNe});var tNe=[{type:"function",name:"approve",inputs:[{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getApproved",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"operator",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"ownerOf",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"owner",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"approved",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ApprovalForAll",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1}],nNe="0x",rNe={};we(rNe,{abi:()=>aNe,bytecode:()=>iNe});var aNe=[{type:"function",name:"accountId",inputs:[],outputs:[{name:"accountImplementationId",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"installModule",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"},{name:"module",type:"address",internalType:"address"},{name:"initData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"isModuleInstalled",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"},{name:"module",type:"address",internalType:"address"},{name:"additionalContext",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"hash",type:"bytes32",internalType:"bytes32"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"encodedMode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"supportsModule",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"uninstallModule",inputs:[{name:"moduleTypeId",type:"uint256",internalType:"uint256"},{name:"module",type:"address",internalType:"address"},{name:"deInitData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"event",name:"ModuleInstalled",inputs:[{name:"moduleTypeId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"module",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"ModuleUninstalled",inputs:[{name:"moduleTypeId",type:"uint256",indexed:!1,internalType:"uint256"},{name:"module",type:"address",indexed:!1,internalType:"address"}],anonymous:!1}],iNe="0x",sNe={};we(sNe,{abi:()=>oNe,bytecode:()=>cNe});var oNe=[{type:"function",name:"postOp",inputs:[{name:"mode",type:"uint8",internalType:"enum IPaymaster.PostOpMode"},{name:"context",type:"bytes",internalType:"bytes"},{name:"actualGasCost",type:"uint256",internalType:"uint256"},{name:"actualUserOpFeePerGas",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"validatePaymasterUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"maxCost",type:"uint256",internalType:"uint256"}],outputs:[{name:"context",type:"bytes",internalType:"bytes"},{name:"validationData",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"}],cNe="0x",dNe={};we(dNe,{abi:()=>lNe,bytecode:()=>uNe});var lNe=[{type:"function",name:"addStake",inputs:[{name:"_unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],uNe="0x",fNe={};we(fNe,{abi:()=>pNe,bytecode:()=>hNe});var pNe=[{type:"function",name:"addStake",inputs:[{name:"_unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"delegateAndRevert",inputs:[{name:"target",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getSenderAddress",inputs:[{name:"initCode",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getUserOpHash",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"handleAggregatedOps",inputs:[{name:"opsPerAggregator",type:"tuple[]",internalType:"struct IEntryPoint.UserOpsPerAggregator[]",components:[{name:"userOps",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"aggregator",type:"address",internalType:"contract IAggregator"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"handleOps",inputs:[{name:"ops",type:"tuple[]",internalType:"struct PackedUserOperation[]",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"beneficiary",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AccountDeployed",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"factory",type:"address",indexed:!1,internalType:"address"},{name:"paymaster",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"BeforeExecution",inputs:[],anonymous:!1},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"PostOpRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"SignatureAggregatorChanged",inputs:[{name:"aggregator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationEvent",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"paymaster",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"},{name:"actualGasCost",type:"uint256",indexed:!1,internalType:"uint256"},{name:"actualGasUsed",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationPrefundTooLow",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"UserOperationRevertReason",inputs:[{name:"userOpHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"},{name:"revertReason",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"error",name:"DelegateAndRevert",inputs:[{name:"success",type:"bool",internalType:"bool"},{name:"ret",type:"bytes",internalType:"bytes"}]},{type:"error",name:"FailedOp",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"}]},{type:"error",name:"FailedOpWithRevert",inputs:[{name:"opIndex",type:"uint256",internalType:"uint256"},{name:"reason",type:"string",internalType:"string"},{name:"inner",type:"bytes",internalType:"bytes"}]},{type:"error",name:"PostOpReverted",inputs:[{name:"returnData",type:"bytes",internalType:"bytes"}]},{type:"error",name:"SenderAddressResult",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"SignatureValidationFailed",inputs:[{name:"aggregator",type:"address",internalType:"address"}]}],hNe="0x",bNe={};we(bNe,{abi:()=>yNe,bytecode:()=>mNe});var yNe=[{type:"function",name:"adapters",inputs:[{name:"id",type:"string",internalType:"string"}],outputs:[{name:"",type:"tuple",internalType:"struct IMetaSwap.Adapter",components:[{name:"addr",type:"address",internalType:"address"},{name:"selector",type:"bytes4",internalType:"bytes4"},{name:"data",type:"bytes",internalType:"bytes"}]}],stateMutability:"view"},{type:"function",name:"removeAdapter",inputs:[{name:"aggregatorId",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setAdapter",inputs:[{name:"aggregatorId",type:"string",internalType:"string"},{name:"addr",type:"address",internalType:"address"},{name:"selector",type:"bytes4",internalType:"bytes4"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"swap",inputs:[{name:"aggregatorId",type:"string",internalType:"string"},{name:"tokenFrom",type:"address",internalType:"contract IERC20"},{name:"amount",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"}],mNe="0x",Lr={};we(Lr,{abi:()=>gNe,bytecode:()=>wNe});var gNe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_entryPoint",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"addKey",inputs:[{name:"_keyId",type:"string",internalType:"string"},{name:"_x",type:"uint256",internalType:"uint256"},{name:"_y",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getInitializedVersion",inputs:[],outputs:[{name:"",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"getKey",inputs:[{name:"_keyId",type:"string",internalType:"string"}],outputs:[{name:"x_",type:"uint256",internalType:"uint256"},{name:"y_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getKeyIdHashes",inputs:[],outputs:[{name:"",type:"bytes32[]",internalType:"bytes32[]"}],stateMutability:"view"},{type:"function",name:"getKeyIdHashesCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_keyIds",type:"string[]",internalType:"string[]"},{name:"_xValues",type:"uint256[]",internalType:"uint256[]"},{name:"_yValues",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"reinitialize",inputs:[{name:"_version",type:"uint8",internalType:"uint8"},{name:"_owner",type:"address",internalType:"address"},{name:"_keyIds",type:"string[]",internalType:"string[]"},{name:"_xValues",type:"uint256[]",internalType:"uint256[]"},{name:"_yValues",type:"uint256[]",internalType:"uint256[]"},{name:"_deleteP256Keys",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"removeKey",inputs:[{name:"_keyId",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"transferOwnership",inputs:[{name:"_newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateSigners",inputs:[{name:"_owner",type:"address",internalType:"address"},{name:"_keyIds",type:"string[]",internalType:"string[]"},{name:"_xValues",type:"uint256[]",internalType:"uint256[]"},{name:"_yValues",type:"uint256[]",internalType:"uint256[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"upgradeToAndCallAndRetainStorage",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddedP256Key",inputs:[{name:"keyIdHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"keyId",type:"string",indexed:!1,internalType:"string"},{name:"x",type:"uint256",indexed:!1,internalType:"uint256"},{name:"y",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ClearedStorage",inputs:[],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"RemovedP256Key",inputs:[{name:"keyIdHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"x",type:"uint256",indexed:!1,internalType:"uint256"},{name:"y",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"CannotRemoveLastSigner",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InputLengthsMismatch",inputs:[{name:"keyIdsLength",type:"uint256",internalType:"uint256"},{name:"xValuesLength",type:"uint256",internalType:"uint256"},{name:"yValuesLength",type:"uint256",internalType:"uint256"}]},{type:"error",name:"InvalidEmptyKey",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"KeyAlreadyExists",inputs:[{name:"keyIdHash",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"KeyDoesNotExist",inputs:[{name:"keyIdHash",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"KeyNotOnCurve",inputs:[{name:"x",type:"uint256",internalType:"uint256"},{name:"y",type:"uint256",internalType:"uint256"}]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"SignersCannotBeEmpty",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],wNe="0x6101c0604052306080523480156200001657600080fd5b506040516200556538038062005565833981016040819052620000399162000319565b81816040518060400160405280600f81526020016e243cb13934b22232b632a3b0ba37b960891b815250604051806040016040528060018152602001603160f81b815250818162000095600083620001ca60201b90919060201c565b61014052620000a6816001620001ca565b61016052815160208084019190912061010052815190820120610120524660c052620001366101005161012051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60a05250503060e0526200014962000203565b6001600160a01b038085166101808190529084166101a0526040517fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038416907fee8699dc0e27105da2653bdba54be0edcaadc3e33890a3ad705517ffe9bf0a9990600090a250505050505062000541565b6000602083511015620001ea57620001e283620002b7565b9050620001fd565b81620001f78482620003ff565b5060ff90505b92915050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff1615620002545760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b0390811614620002b45780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b600080829050601f81511115620002ee578260405163305a27a960e01b8152600401620002e59190620004cb565b60405180910390fd5b8051620002fb826200051c565b179392505050565b6001600160a01b0381168114620002b457600080fd5b600080604083850312156200032d57600080fd5b82516200033a8162000303565b60208401519092506200034d8162000303565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600181811c908216806200038357607f821691505b602082108103620003a457634e487b7160e01b600052602260045260246000fd5b50919050565b601f821115620003fa576000816000526020600020601f850160051c81016020861015620003d55750805b601f850160051c820191505b81811015620003f657828155600101620003e1565b5050505b505050565b81516001600160401b038111156200041b576200041b62000358565b62000433816200042c84546200036e565b84620003aa565b602080601f8311600181146200046b5760008415620004525750858301515b600019600386901b1c1916600185901b178555620003f6565b600085815260208120601f198616915b828110156200049c578886015182559484019460019091019084016200047b565b5085821015620004bb5787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020808352835180602085015260005b81811015620004fb57858101830151858201604001528201620004dd565b506000604082860101526040601f19601f8301168501019250505092915050565b80516020808301519190811015620003a45760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a051614eeb6200067a6000396000818161068c0152818161091e015281816109cb01528181610abe01528181610b3c01528181610ca001528181610d5501528181610de001528181610e5001528181610f3c01528181610ff701528181611069015281816112c301528181611342015281816113ab015281816114a60152818161156501528181611a1b01528181611d0e01528181611d7c0152612d4e0152600081816107ff01528181610b9f01528181610c2201528181610d030152818161140e01526117ac0152600061275a0152600061272d01526000611f3e01526000611f1601526000611e7101526000611e9b01526000611ec5015260008181612190015281816121b901526126100152614eeb6000f3fe6080604052600436106102765760003560e01c80638da5cb5b1161014f578063c8561e73116100c1578063e9ae5c531161007a578063e9ae5c53146107da578063ea4d3c9b146107ed578063ed8101b514610821578063f23a6e6114610841578063f2fde38b14610861578063ffa1ad741461088157600080fd5b8063c8561e7314610710578063cef6d20914610730578063d087d28814610750578063d37aec9214610765578063d5d33b551461079a578063d691c964146107ba57600080fd5b8063acb8cc4911610113578063acb8cc491461061c578063ad3cb1cc14610649578063b0d691fe1461067a578063b3c65015146106ae578063bc197c81146106db578063c399ec88146106fb57600080fd5b80638da5cb5b1461054d5780638ebf95331461058c578063a24c8f32146105ac578063a3f4df7e146105bf578063aaf10f421461060757600080fd5b8063445140b8116101e85780635c1c6dcd116101ac5780635c1c6dcd146104a8578063715018a6146104bb57806378a68ecf146104d05780637f07bfdc146104f057806383ebb7711461051057806384b0196e1461052557600080fd5b8063445140b81461043857806349934047146104585780634a58db19146104785780634f1ef2861461048057806352d1902d1461049357600080fd5b806319822f7c1161023a57806319822f7c146103605780631c03010a146103805780632b3afd99146103a25780632ffeaad6146103d65780633e1b0812146103f85780633ed010151461041857600080fd5b806301ffc9a71461028257806306394d67146102b7578063074feff3146102e5578063150b7a02146103075780631626ba7e1461034057600080fd5b3661027d57005b600080fd5b34801561028e57600080fd5b506102a261029d366004613d03565b6108b2565b60405190151581526020015b60405180910390f35b3480156102c357600080fd5b506102d76102d2366004613d46565b6108de565b6040519081526020016102ae565b3480156102f157600080fd5b50610305610300366004613ded565b610913565b005b34801561031357600080fd5b50610327610322366004613f5c565b610984565b6040516001600160e01b031990911681526020016102ae565b34801561034c57600080fd5b5061032761035b366004614008565b61099f565b34801561036c57600080fd5b506102d761037b366004614053565b6109be565b34801561038c57600080fd5b50600080516020614e36833981519152546102d7565b3480156103ae57600080fd5b506102d77fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1881565b3480156103e257600080fd5b506103eb610a2e565b6040516102ae91906140a0565b34801561040457600080fd5b506102d76104133660046140d8565b610a97565b34801561042457600080fd5b50610305610433366004614101565b610b31565b34801561044457600080fd5b506102a261045336600461413b565b610c09565b34801561046457600080fd5b50610305610473366004614101565b610c95565b610305610d38565b61030561048e366004614154565b610da2565b34801561049f57600080fd5b506102d7610db8565b6103056104b63660046141a3565b610dd5565b3480156104c757600080fd5b50610305610e45565b3480156104dc57600080fd5b506103056104eb3660046141f6565b610ea8565b3480156104fc57600080fd5b5061030561050b3660046142c8565b610fec565b34801561051c57600080fd5b506102d76110c9565b34801561053157600080fd5b5061053a6110d8565b6040516102ae9796959493929190614344565b34801561055957600080fd5b50600080516020614e16833981519152546001600160a01b03165b6040516001600160a01b0390911681526020016102ae565b34801561059857600080fd5b506103056105a7366004613ded565b61111e565b6103056105ba366004614154565b610daa565b3480156105cb57600080fd5b506105fa6040518060400160405280600f81526020016e243cb13934b22232b632a3b0ba37b960891b81525081565b6040516102ae91906143dd565b34801561061357600080fd5b5061057461123a565b34801561062857600080fd5b506105fa604051806040016040528060018152602001603160f81b81525081565b34801561065557600080fd5b506105fa604051806040016040528060058152602001640352e302e360dc1b81525081565b34801561068657600080fd5b506105747f000000000000000000000000000000000000000000000000000000000000000081565b3480156106ba57600080fd5b506106c361125b565b6040516001600160401b0390911681526020016102ae565b3480156106e757600080fd5b506103276106f636600461446f565b61128e565b34801561070757600080fd5b506102d76112ab565b34801561071c57600080fd5b5061030561072b36600461451c565b611337565b34801561073c57600080fd5b5061030561074b36600461456c565b6113a0565b34801561075c57600080fd5b506102d7611487565b34801561077157600080fd5b50610785610780366004614605565b6114dd565b604080519283526020830191909152016102ae565b3480156107a657600080fd5b506103056107b5366004614605565b61155a565b6107cd6107c8366004614008565b61179f565b6040516102ae9190614646565b6103056107e8366004614008565b611a10565b3480156107f957600080fd5b506105747f000000000000000000000000000000000000000000000000000000000000000081565b34801561082d57600080fd5b506102d761083c366004613d46565b611c13565b34801561084d57600080fd5b5061032761085c3660046146aa565b611d55565b34801561086d57600080fd5b5061030561087c366004614712565b611d71565b34801561088d57600080fd5b506105fa604051806040016040528060058152602001640312e332e360dc1b81525081565b60006108bd82611dd4565b806108d857506001600160e01b031982166307f5828d60e41b145b92915050565b60006108d86108eb611e64565b6108f484611c13565b60405161190160f01b8152600281019290925260228201526042902090565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061094c5750333014155b1561096a57604051630796d94560e01b815260040160405180910390fd5b61097b878787878787876001611f8f565b50505050505050565b600061098e612185565b50630a85bd0160e11b949350505050565b60006109a9612185565b6109b484848461222a565b90505b9392505050565b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610a0957604051636b31ba1560e11b815260040160405180910390fd5b610a11612185565b610a2384610a1e866108de565b61244e565b90506109b782612496565b60606000600080516020614e1683398151915260028101805460408051602080840282018101909252828152939450830182828015610a8c57602002820191906000526020600020905b815481526020019060010190808311610a78575b505050505091505090565b604051631aab3f0d60e11b81523060048201526001600160c01b03821660248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401602060405180830381865afa158015610b0d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d8919061472f565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610b6a5750333014155b15610b8857604051630796d94560e01b815260040160405180910390fd5b604051633ed0101560e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690633ed0101590610bd4908490600401614877565b600060405180830381600087803b158015610bee57600080fd5b505af1158015610c02573d6000803e3d6000fd5b5050505050565b6040516316a0682960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690632d40d05290602401602060405180830381865afa158015610c71573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108d89190614953565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610cce5750333014155b15610cec57604051630796d94560e01b815260040160405180910390fd5b604051634993404760e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690634993404790610bd4908490600401614877565b610d40612185565b60405163b760faf960e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063b760faf99034906024016000604051808303818588803b158015610bee57600080fd5b610daa61252d565b610db482826125ea565b5050565b6000610dc2612605565b50600080516020614e5683398151915290565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610e1e57604051636b31ba1560e11b815260040160405180910390fd5b610db4610e2e6020830183614712565b6020830135610e406040850185614970565b61264e565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610e7e5750333014155b15610e9c57604051630796d94560e01b815260040160405180910390fd5b610ea66000612684565b565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805460ff8b81169291600160401b90041680610ef2575080546001600160401b03808416911610155b15610f105760405163f92ee8a960e01b815260040160405180910390fd5b805468ffffffffffffffffff19166001600160401b03831617600160401b178155336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610f6a5750333014155b15610f8857604051630796d94560e01b815260040160405180910390fd5b610f988a8a8a8a8a8a8a8a611f8f565b805460ff60401b191681556040516001600160401b03831681527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15050505050505050505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906110255750333014155b1561104357604051630796d94560e01b815260040160405180910390fd5b60405163040b850f60e31b81526001600160a01b038381166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063205c287890604401600060405180830381600087803b1580156110ad57600080fd5b505af11580156110c1573d6000803e3d6000fd5b505050505050565b60006110d3611e64565b905090565b6000606080600080600060606110ec612726565b6110f4612753565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff1615906001600160401b03166000811580156111635750825b90506000826001600160401b0316600114801561117f5750303b155b90508115801561118d575080155b156111ab5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff1916600117855583156111d557845460ff60401b1916600160401b1785555b6111e68c8c8c8c8c8c8c6000611f8f565b831561122c57845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050505050565b60006110d3600080516020614e56833981519152546001600160a01b031690565b60006110d37ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00546001600160401b031690565b6000611298612185565b5063bc197c8160e01b5b95945050505050565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a08231906024015b602060405180830381865afa158015611313573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110d3919061472f565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906113705750333014155b1561138e57604051630796d94560e01b815260040160405180910390fd5b61139a84848484612780565b50505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906113d95750333014155b156113f757604051630796d94560e01b815260040160405180910390fd5b60405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d2099061144d90899089908990899089908990600401614a17565b600060405180830381600087803b15801561146757600080fd5b505af115801561147b573d6000803e3d6000fd5b50505050505050505050565b604051631aab3f0d60e11b8152306004820152600060248201819052907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a906044016112f6565b60008080600080516020614e1683398151915290506000816001016000878760405160200161150d929190614a80565b60408051601f198184030181529181528151602092830120835282820193909352908201600020825180840190935280548084526001909101549290910182905297909650945050505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906115935750333014155b156115b157604051630796d94560e01b815260040160405180910390fd5b604051600080516020614e16833981519152906000906115d79085908590602001614a80565b60408051601f198184030181528282528051602091820120600081815260018088018452908490208585019094528354808652930154918401829052935081158015611621575080155b1561164757604051631a36430d60e31b8152600481018590526024015b60405180910390fd5b6002850154600181148015611664575085546001600160a01b0316155b156116825760405163c4c8547360e01b815260040160405180910390fd5b60005b611690600183614aa6565b81101561171557858760020182815481106116ad576116ad614ab9565b90600052602060002001540361170d57600287016116cc600184614aa6565b815481106116dc576116dc614ab9565b90600052602060002001548760020182815481106116fc576116fc614ab9565b600091825260209091200155611715565b600101611685565b508560020180548061172957611729614acf565b60008281526020808220830160001990810183905590920190925586825260018881018252604080842084815590910192909255815185815290810184905286917facf0e8088062f44f734bbcb5223794fd8bb6f6db1c199cb6a72df119d002a71b910160405180910390a25050505050505050565b6060336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146117ea57604051630692ce8160e21b815260040160405180910390fd5b83600881901b6117fe82600160f81b6128fd565b1561187f57366000611810878761290f565b90925090506118208360006128fd565b156118365761182f82826129a8565b9450611878565b61184483600160f81b6128fd565b156118535761182f8282612a69565b6040516308c3ee0360e11b81526001600160f81b03198416600482015260240161163e565b5050611a07565b61188a8260006128fd565b156119e25760008036600061189f8989612b96565b6040805160018082528183019092529498509296509094509250816020015b60608152602001906001900390816118be57905050965060006118e186826128fd565b15611915576118f28585858561264e565b8860008151811061190557611905614ab9565b60200260200101819052506119d8565b61192386600160f81b6128fd565b156119b35761193485858585612be7565b8960008151811061194757611947614ab9565b60209081029190910101529050806119ae577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb760008960008151811061198f5761198f614ab9565b60200260200101516040516119a5929190614ae5565b60405180910390a15b6119d8565b6040516308c3ee0360e11b81526001600160f81b03198716600482015260240161163e565b5050505050611a07565b604051632e5bf3f960e21b81526001600160f81b03198316600482015260240161163e565b50509392505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614611a5957604051636b31ba1560e11b815260040160405180910390fd5b82600881901b611a6d82600160f81b6128fd565b15611ac857366000611a7f868661290f565b9092509050611a8f8360006128fd565b15611aa457611a9e82826129a8565b50611ac1565b611ab283600160f81b6128fd565b1561185357611a9e8282612a69565b5050610c02565b611ad38260006128fd565b156119e257600080366000611ae88888612b96565b9350935093509350611afe85600060f81b6128fd565b15611b1557611b0f8484848461264e565b50611c0a565b611b2385600160f81b6128fd565b15611be557604080516001808252818301909252600091816020015b6060815260200190600190039081611b3f5790505090506000611b6486868686612be7565b83600081518110611b7757611b77614ab9565b6020908102919091010152905080611bde577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb7600083600081518110611bbf57611bbf614ab9565b6020026020010151604051611bd5929190614ae5565b60405180910390a15b5050611c0a565b6040516308c3ee0360e11b81526001600160f81b03198616600482015260240161163e565b50505050610c02565b60007fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc18611c436020840184614712565b6020840135611c556040860186614970565b604051611c63929190614a80565b604051908190039020611c796060870187614970565b604051611c87929190614a80565b604051908190039020608087013560a088013560c0890135611cac60e08b018b614970565b604051611cba929190614a80565b60408051918290038220602083019a909a526001600160a01b03988916908201526060810196909652608086019490945260a085019290925260c084015260e08301526101008201526101208101929092527f00000000000000000000000000000000000000000000000000000000000000001661014082015261016001604051602081830303815290604052805190602001209050919050565b6000611d5f612185565b5063f23a6e6160e01b95945050505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590611daa5750333014155b15611dc857604051630796d94560e01b815260040160405180910390fd5b611dd181612684565b50565b6000611dde612185565b6001600160e01b031982166335a4725960e21b1480611e0d57506001600160e01b03198216630a85bd0160e11b145b80611e2857506001600160e01b03198216630271189760e51b145b80611e4357506001600160e01b031982166301ffc9a760e01b145b806108d8575050630b135d3f60e11b6001600160e01b03198216145b919050565b6000306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015611ebd57507f000000000000000000000000000000000000000000000000000000000000000046145b15611ee757507f000000000000000000000000000000000000000000000000000000000000000090565b6110d3604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b856001600160a01b038916158015611fa5575080155b8015611fae5750815b15611fcc576040516312da594d60e11b815260040160405180910390fd5b8085141580611fdb5750808314155b1561200a5760405163a297991b60e01b815260048101829052602481018690526044810184905260640161163e565b81156120ff57600080516020614e3683398151915254600080516020614e168339815191529080156120fc5760005b818110156120ed57600083600201828154811061205857612058614ab9565b6000918252602080832090910154808352600180880180845260408086208151808301835281548152938101805485880190815286895293909652869055949093558051925193519194509284927facf0e8088062f44f734bbcb5223794fd8bb6f6db1c199cb6a72df119d002a71b926120db9290918252602082015260400190565b60405180910390a25050600101612039565b506120fc600283016000613cd1565b50505b60005b818110156121705761216889898381811061211f5761211f614ab9565b90506020028101906121319190614970565b89898581811061214357612143614ab9565b9050602002013588888681811061215c5761215c614ab9565b90506020020135612780565b600101612102565b5061217a89612684565b505050505050505050565b306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148061220c57507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316612200600080516020614e56833981519152546001600160a01b031690565b6001600160a01b031614155b15610ea65760405163703e46dd60e11b815260040160405180910390fd5b60008160418190036122c757600080516020614e16833981519152546001600160a01b03166001600160a01b03166122988686868080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250612c1892505050565b6001600160a01b0316036122b65750630b135d3f60e11b90506109b7565b506001600160e01b031990506109b7565b60608110156122e157506001600160e01b031990506109b7565b600080516020614e1683398151915260006122ff6020828789614afe565b61230891614b28565b60008181526001808501602090815260409283902083518085019094528054808552920154908301529192509015801561234457506020810151155b1561235e57506001600160e01b031993506109b792505050565b8360601480156123b257506123b28888888080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050855160208701519092509050612c42565b156123cb5750630b135d3f60e11b93506109b792505050565b8360601415801561242057506124208888888080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050855160208701519092509050612ce0565b156124395750630b135d3f60e11b93506109b792505050565b506001600160e01b031993506109b792505050565b60008061246883612463610100870187614970565b61222a565b90506374eca2c160e11b6001600160e01b031982160161248c5760009150506108d8565b5060019392505050565b8015611dd157604051600090339060001990849084818181858888f193505050503d80600081146124e3576040519150601f19603f3d011682016040523d82523d6000602084013e6124e8565b606091505b505060408051848152821515602082015291925033917fa427c7d47f24d01b170779a7600b1d4c0d7cdbabaa0f19c4f0e6182053ffc931910160405180910390a25050565b600080516020614e3683398151915254600080516020614e168339815191529060005b818110156125a05782600101600084600201838154811061257357612573614ab9565b60009182526020808320909101548352820192909252604001812081815560019081019190915501612550565b506125af600283016000613cd1565b81546001600160a01b03191682556040517feb09d532980c3cc73dcad99b80e264204a667a54cbb7b63ec8d68dcb1c7096be90600090a15050565b6125f2612185565b6125fb82612d43565b610db48282612d9a565b306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610ea65760405163703e46dd60e11b815260040160405180910390fd5b60405181838237600038838387895af161266b573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b600080516020614e3683398151915254600080516020614e16833981519152901580156126b857506001600160a01b038216155b156126d65760405163c4c8547360e01b815260040160405180910390fd5b80546001600160a01b031981166001600160a01b03848116918217845560405192169182907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3505050565b60606110d37f00000000000000000000000000000000000000000000000000000000000000006000612e5c565b60606110d37f00000000000000000000000000000000000000000000000000000000000000006001612e5c565b61278a8282612f07565b6127b1576040516313c3d61f60e01b8152600481018390526024810182905260440161163e565b600084846040516020016127c6929190614a80565b6040516020818303038152906040528051906020012090508484905060000361280257604051637e25658160e11b815260040160405180910390fd5b60008181527fa2b1bcb5e16cee2a8898b49cb0c3605e70c16f429f6002ed8b1bc5612a694901602052604090208054600080516020614e1683398151915291901515806128525750600181015415155b15612873576040516361db108160e01b81526004810184905260240161163e565b604080518082018252868152602080820187815260008781526001808801845285822094518555915193820193909355600286018054918201815583529120018490555183907fd00539cb08a7c24166308150d64d603150c01baf89d3d3e4c6063d6db7c6983d906128ec908a908a908a908a90614b46565b60405180910390a250505050505050565b6001600160f81b031990811691161490565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156129475763ba597e7e6000526004601cfd5b831561299e578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c17156129955763ba597e7e6000526004601cfd5b50505082612951575b5050509250929050565b606081806001600160401b038111156129c3576129c3613e99565b6040519080825280602002602001820160405280156129f657816020015b60608152602001906001900390816129e15790505b50915060005b81811015612a615736858583818110612a1757612a17614ab9565b9050602002810190612a299190614b6d565b9050612a3b610e2e6020830183614712565b848381518110612a4d57612a4d614ab9565b6020908102919091010152506001016129fc565b505092915050565b606081806001600160401b03811115612a8457612a84613e99565b604051908082528060200260200182016040528015612ab757816020015b6060815260200190600190039081612aa25790505b50915060005b81811015612a615736858583818110612ad857612ad8614ab9565b9050602002810190612aea9190614b6d565b90506000612b15612afe6020840184614712565b6020840135612b106040860186614970565b612be7565b868581518110612b2757612b27614ab9565b6020908102919091010152905080612b8c577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb783868581518110612b6d57612b6d614ab9565b6020026020010151604051612b83929190614ae5565b60405180910390a15b5050600101612abd565b6000803681612ba86014828789614afe565b612bb191614b8d565b60601c9350612bc4603460148789614afe565b612bcd91614b28565b9250612bdc8560348189614afe565b949793965094505050565b604051600090828482376000388483888a5af191503d8152602081013d6000823e3d81016040525094509492505050565b600080600080612c288686612f6a565b925092509250612c388282612fb7565b5090949350505050565b6000806000612c5086613070565b915091506000600288604051602001612c6b91815260200190565b60408051601f1981840301815290829052612c8591614bc0565b602060405180830381855afa158015612ca2573d6000803e3d6000fd5b5050506040513d601f19601f82011682018060405250810190612cc5919061472f565b9050612cd48184848989613092565b98975050505050505050565b600080612cec85613241565b9050612d3986604051602001612d0491815260200190565b60408051601f198184030181529181528301516060840151608085015160a086015160c0870151875160208901518c8c6132bf565b9695505050505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590612d7c5750333014155b15611dd157604051630796d94560e01b815260040160405180910390fd5b816001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612df4575060408051601f3d908101601f19168201909252612df19181019061472f565b60015b612e1c57604051634c9c8ce360e01b81526001600160a01b038316600482015260240161163e565b600080516020614e568339815191528114612e4d57604051632a87526960e21b81526004810182905260240161163e565b612e57838361345d565b505050565b606060ff8314612e7657612e6f836134b3565b90506108d8565b818054612e8290614bd2565b80601f0160208091040260200160405190810160405280929190818152602001828054612eae90614bd2565b8015612efb5780601f10612ed057610100808354040283529160200191612efb565b820191906000526020600020905b815481529060010190602001808311612ede57829003601f168201915b505050505090506108d8565b60006109b76ffffffffeffffffffffffffffffffffff60601b197fffffffff00000001000000000000000000000000fffffffffffffffffffffffc7f5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b86866134f2565b60008060008351604103612fa45760208401516040850151606086015160001a612f968882858561359d565b955095509550505050612fb0565b50508151600091506002905b9250925092565b6000826003811115612fcb57612fcb614c06565b03612fd4575050565b6001826003811115612fe857612fe8614c06565b036130065760405163f645eedf60e01b815260040160405180910390fd5b600282600381111561301a5761301a614c06565b0361303b5760405163fce698f760e01b81526004810182905260240161163e565b600382600381111561304f5761304f614c06565b03610db4576040516335e2f38360e21b81526004810182905260240161163e565b600080828060200190518101906130879190614c1c565b909590945092505050565b60006130bf60027fffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551614c60565b8411156130ce575060006112a2565b6040805160208101889052908101869052606081018590526080810184905260a0810183905260009060c00160405160208183030381529060405290506000806101006001600160a01b0316836040516131289190614bc0565b600060405180830381855afa9150503d8060008114613163576040519150601f19603f3d011682016040523d82523d6000602084013e613168565b606091505b5080519193509150151582801561317c5750805b156131a35781806020019051810190613195919061472f565b6001149450505050506112a2565b60405163a1f3128160e01b8152600481018b9052602481018a905260448101899052606481018890526084810187905273__$b8f96b288d4d0429e38b8ed50fd423070f$__9063a1f312819060a401602060405180830381865af415801561320f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906132339190614953565b9a9950505050505050505050565b6132836040518060e001604052806000815260200160008152602001606081526020016000151581526020016060815260200160608152602001600081525090565b818060200190518101906132979190614cc7565b60c089015260a088015260808701521515606086015260408501526020840152825250919050565b600060258a5110806132f957506132f78a6020815181106132e2576132e2614ab9565b01602001516001600160f81b0319168a61366c565b155b1561330657506000613233565b6000886133128d6136d2565b8960405160200161332593929190614d86565b60408051601f198184030181528282019091526015825274113a3cb832911d113bb2b130baba34371733b2ba1160591b6020830152915061336781838a6138df565b61337657600092505050613233565b60006002836040516133889190614bc0565b602060405180830381855afa1580156133a5573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052508101906133c8919061472f565b9050600060028e836040516020016133e1929190614dc9565b60408051601f19818403018152908290526133fb91614bc0565b602060405180830381855afa158015613418573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525081019061343b919061472f565b905061344a818a8a8a8a613092565b9f9e505050505050505050505050505050565b6134668261398e565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a28051156134ab57612e5782826139f3565b610db4613a60565b606060006134c083613a7f565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600082158015613500575081155b8061350b5750858310155b806135165750858210155b15613523575060006112a2565b6000868061353357613533614c4a565b83840990506000878061354857613548614c4a565b888061355657613556614c4a565b888709898061356757613567614c4a565b878b8061357657613576614c4a565b898a0909089050878061358b5761358b614c4a565b86820891909114979650505050505050565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08411156135d85750600091506003905082613662565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa15801561362c573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811661365857506000925060019150829050613662565b9250600091508190505b9450945094915050565b6000600160f81b83811614613683575060006108d8565b8180156136965750600160fa1b83811614155b156136a3575060006108d8565b600160fb1b838116146136c957600f60fc1b600160fc1b8416016136c9575060006108d8565b50600192915050565b606060006136df83613aa7565b9050600081905060006002825111801561372a575081600283516137039190614aa6565b8151811061371357613713614ab9565b6020910101516001600160f81b031916603d60f81b145b1561373757506002613782565b60018251118015613779575081600183516137529190614aa6565b8151811061376257613762614ab9565b6020910101516001600160f81b031916603d60f81b145b15613782575060015b60008183516137919190614aa6565b90506000816001600160401b038111156137ad576137ad613e99565b6040519080825280601f01601f1916602001820160405280156137d7576020820181803683370190505b50905060005b828110156138d4578481815181106137f7576137f7614ab9565b01602001516001600160f81b031916602b60f81b0361384357602d60f81b82828151811061382757613827614ab9565b60200101906001600160f81b031916908160001a9053506138cc565b84818151811061385557613855614ab9565b01602001516001600160f81b031916602f60f81b0361388557605f60f81b82828151811061382757613827614ab9565b84818151811061389757613897614ab9565b602001015160f81c60f81b8282815181106138b4576138b4614ab9565b60200101906001600160f81b031916908160001a9053505b6001016137dd565b509695505050505050565b825182516000918591859190845b8281101561397f57816139008289614deb565b10613913576000955050505050506109b7565b8361391e8289614deb565b8151811061392e5761392e614ab9565b602001015160f81c60f81b6001600160f81b03191685828151811061395557613955614ab9565b01602001516001600160f81b03191614613977576000955050505050506109b7565b6001016138ed565b50600198975050505050505050565b806001600160a01b03163b6000036139c457604051634c9c8ce360e01b81526001600160a01b038216600482015260240161163e565b600080516020614e5683398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080846001600160a01b031684604051613a109190614bc0565b600060405180830381855af49150503d8060008114613a4b576040519150601f19603f3d011682016040523d82523d6000602084013e613a50565b606091505b50915091506112a2858383613acd565b3415610ea65760405163b398979f60e01b815260040160405180910390fd5b600060ff8216601f8111156108d857604051632cd44ac360e21b815260040160405180910390fd5b60606108d882604051806060016040528060408152602001614e76604091396001613b29565b606082613ae257613add82613ca8565b6109b7565b8151158015613af957506001600160a01b0384163b155b15613b2257604051639996b31560e01b81526001600160a01b038516600482015260240161163e565b50806109b7565b60608351600003613b4957506040805160208101909152600081526109b7565b600082613b7a57600385516004613b609190614dfe565b613b6b906002614deb565b613b759190614c60565b613b9f565b600385516002613b8a9190614deb565b613b949190614c60565b613b9f906004614dfe565b90506000816001600160401b03811115613bbb57613bbb613e99565b6040519080825280601f01601f191660200182016040528015613be5576020820181803683370190505b50905060018501602082018788518901602081018051600082525b82841015613c5b576003840193508351603f8160121c168701518653600186019550603f81600c1c168701518653600186019550603f8160061c168701518653600186019550603f8116870151865350600185019450613c00565b905250508515613c9c57600388510660018114613c7f5760028114613c9257613c9a565b603d6001830353603d6002830353613c9a565b603d60018303535b505b50909695505050505050565b805115613cb85780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b5080546000825590600052602060002090810190611dd191905b80821115613cff5760008155600101613ceb565b5090565b600060208284031215613d1557600080fd5b81356001600160e01b0319811681146109b757600080fd5b60006101208284031215613d4057600080fd5b50919050565b600060208284031215613d5857600080fd5b81356001600160401b03811115613d6e57600080fd5b613d7a84828501613d2d565b949350505050565b6001600160a01b0381168114611dd157600080fd5b8035611e5f81613d82565b60008083601f840112613db457600080fd5b5081356001600160401b03811115613dcb57600080fd5b6020830191508360208260051b8501011115613de657600080fd5b9250929050565b60008060008060008060006080888a031215613e0857600080fd5b8735613e1381613d82565b965060208801356001600160401b0380821115613e2f57600080fd5b613e3b8b838c01613da2565b909850965060408a0135915080821115613e5457600080fd5b613e608b838c01613da2565b909650945060608a0135915080821115613e7957600080fd5b50613e868a828b01613da2565b989b979a50959850939692959293505050565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b0381118282101715613ed757613ed7613e99565b604052919050565b60006001600160401b03821115613ef857613ef8613e99565b50601f01601f191660200190565b600082601f830112613f1757600080fd5b8135613f2a613f2582613edf565b613eaf565b818152846020838601011115613f3f57600080fd5b816020850160208301376000918101602001919091529392505050565b60008060008060808587031215613f7257600080fd5b8435613f7d81613d82565b93506020850135613f8d81613d82565b92506040850135915060608501356001600160401b03811115613faf57600080fd5b613fbb87828801613f06565b91505092959194509250565b60008083601f840112613fd957600080fd5b5081356001600160401b03811115613ff057600080fd5b602083019150836020828501011115613de657600080fd5b60008060006040848603121561401d57600080fd5b8335925060208401356001600160401b0381111561403a57600080fd5b61404686828701613fc7565b9497909650939450505050565b60008060006060848603121561406857600080fd5b83356001600160401b0381111561407e57600080fd5b61408a86828701613d2d565b9660208601359650604090950135949350505050565b6020808252825182820181905260009190848201906040850190845b81811015613c9c578351835292840192918401916001016140bc565b6000602082840312156140ea57600080fd5b81356001600160c01b03811681146109b757600080fd5b60006020828403121561411357600080fd5b81356001600160401b0381111561412957600080fd5b820160c081850312156109b757600080fd5b60006020828403121561414d57600080fd5b5035919050565b6000806040838503121561416757600080fd5b823561417281613d82565b915060208301356001600160401b0381111561418d57600080fd5b61419985828601613f06565b9150509250929050565b6000602082840312156141b557600080fd5b81356001600160401b038111156141cb57600080fd5b8201606081850312156109b757600080fd5b8015158114611dd157600080fd5b8035611e5f816141dd565b600080600080600080600080600060c08a8c03121561421457600080fd5b893560ff8116811461422557600080fd5b985061423360208b01613d97565b975060408a01356001600160401b038082111561424f57600080fd5b61425b8d838e01613da2565b909950975060608c013591508082111561427457600080fd5b6142808d838e01613da2565b909750955060808c013591508082111561429957600080fd5b506142a68c828d01613da2565b90945092506142b9905060a08b016141eb565b90509295985092959850929598565b600080604083850312156142db57600080fd5b82356142e681613d82565b946020939093013593505050565b60005b8381101561430f5781810151838201526020016142f7565b50506000910152565b600081518084526143308160208601602086016142f4565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e0602084015261436560e084018a614318565b8381036040850152614377818a614318565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156143cb578351835292840192918401916001016143af565b50909c9b505050505050505050505050565b6020815260006109b76020830184614318565b600082601f83011261440157600080fd5b813560206001600160401b0382111561441c5761441c613e99565b8160051b61442b828201613eaf565b928352848101820192828101908785111561444557600080fd5b83870192505b848310156144645782358252918301919083019061444b565b979650505050505050565b600080600080600060a0868803121561448757600080fd5b853561449281613d82565b945060208601356144a281613d82565b935060408601356001600160401b03808211156144be57600080fd5b6144ca89838a016143f0565b945060608801359150808211156144e057600080fd5b6144ec89838a016143f0565b9350608088013591508082111561450257600080fd5b5061450f88828901613f06565b9150509295509295909350565b6000806000806060858703121561453257600080fd5b84356001600160401b0381111561454857600080fd5b61455487828801613fc7565b90989097506020870135966040013595509350505050565b6000806000806000806060878903121561458557600080fd5b86356001600160401b038082111561459c57600080fd5b6145a88a838b01613da2565b909850965060208901359150808211156145c157600080fd5b6145cd8a838b01613da2565b909650945060408901359150808211156145e657600080fd5b506145f389828a01613da2565b979a9699509497509295939492505050565b6000806020838503121561461857600080fd5b82356001600160401b0381111561462e57600080fd5b61463a85828601613fc7565b90969095509350505050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b8281101561469d57603f1988860301845261468b858351614318565b9450928501929085019060010161466f565b5092979650505050505050565b600080600080600060a086880312156146c257600080fd5b85356146cd81613d82565b945060208601356146dd81613d82565b9350604086013592506060860135915060808601356001600160401b0381111561470657600080fd5b61450f88828901613f06565b60006020828403121561472457600080fd5b81356109b781613d82565b60006020828403121561474157600080fd5b5051919050565b6000808335601e1984360301811261475f57600080fd5b83016020810192503590506001600160401b0381111561477e57600080fd5b803603821315613de657600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b8881101561486957858403601f19018a52823536899003605e190181126147f5578283fd5b88016060813561480481613d82565b6001600160a01b0316865261481b82880183614748565b828989015261482d838901828461478d565b92505050604061483f81840184614748565b93508783038289015261485383858361478d565b9d89019d975050509386019350506001016147d0565b509198975050505050505050565b602081526000823561488881613d82565b6001600160a01b03908116602084810191909152840135906148a982613d82565b80821660408501525050604083013560608301526060830135601e198436030181126148d457600080fd5b83016020810190356001600160401b038111156148f057600080fd5b8060051b360382131561490257600080fd5b60c0608085015261491760e0850182846147b6565b915050608084013560a084015261493160a0850185614748565b848303601f190160c0860152612d3983828461478d565b8051611e5f816141dd565b60006020828403121561496557600080fd5b81516109b7816141dd565b6000808335601e1984360301811261498757600080fd5b8301803591506001600160401b038211156149a157600080fd5b602001915036819003821315613de657600080fd5b6000838385526020808601955060208560051b8301018460005b87811015614a0a57848303601f190189526149eb8288614748565b6149f685828461478d565b9a86019a94505050908301906001016149d0565b5090979650505050505050565b606081526000614a2b60608301888a6149b6565b8281036020848101919091528682528791810160005b88811015614a5d57833582529282019290820190600101614a41565b508481036040860152614a718187896149b6565b9b9a5050505050505050505050565b8183823760009101908152919050565b634e487b7160e01b600052601160045260246000fd5b818103818111156108d8576108d8614a90565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052603160045260246000fd5b8281526040602082015260006109b46040830184614318565b60008085851115614b0e57600080fd5b83861115614b1b57600080fd5b5050820193919092039150565b803560208310156108d857600019602084900360031b1b1692915050565b606081526000614b5a60608301868861478d565b6020830194909452506040015292915050565b60008235605e19833603018112614b8357600080fd5b9190910192915050565b6bffffffffffffffffffffffff198135818116916014851015612a615760149490940360031b84901b1690921692915050565b60008251614b838184602087016142f4565b600181811c90821680614be657607f821691505b602082108103613d4057634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b600080600060608486031215614c3157600080fd5b8351925060208401519150604084015190509250925092565b634e487b7160e01b600052601260045260246000fd5b600082614c7d57634e487b7160e01b600052601260045260246000fd5b500490565b600082601f830112614c9357600080fd5b8151614ca1613f2582613edf565b818152846020838601011115614cb657600080fd5b613d7a8260208301602087016142f4565b600080600080600080600080610100898b031215614ce457600080fd5b88519750602089015196506040890151955060608901516001600160401b0380821115614d1057600080fd5b614d1c8c838d01614c82565b9650614d2a60808c01614948565b955060a08b0151915080821115614d4057600080fd5b614d4c8c838d01614c82565b945060c08b0151915080821115614d6257600080fd5b50614d6f8b828c01614c82565b92505060e089015190509295985092959890939650565b60008451614d988184602089016142f4565b845190830190614dac8183602089016142f4565b8451910190614dbf8183602088016142f4565b0195945050505050565b60008351614ddb8184602088016142f4565b9190910191825250602001919050565b808201808211156108d8576108d8614a90565b80820281158282048414176108d8576108d8614a9056fea2b1bcb5e16cee2a8898b49cb0c3605e70c16f429f6002ed8b1bc5612a694900a2b1bcb5e16cee2a8898b49cb0c3605e70c16f429f6002ed8b1bc5612a694902360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc4142434445464748494a4b4c4d4e4f505152535455565758595a6162636465666768696a6b6c6d6e6f707172737475767778797a303132333435363738392b2fa2646970667358221220d641f685fbc825f5c1c752f10b46c0f81d9143a8b41e10871b92196f03c53fe864736f6c63430008170033",vNe={};we(vNe,{abi:()=>ENe,bytecode:()=>_Ne});var ENe=[],_Ne="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212203d81846f7dee1e1b6ac5ec7facf37349f677e4fb70664eb5852e6414aa31b93064736f6c63430008170033",TNe={};we(TNe,{abi:()=>xNe,bytecode:()=>SNe});var xNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getIsUsed",inputs:[{name:"_delegationManager",type:"address",internalType:"address"},{name:"_delegator",type:"address",internalType:"address"},{name:"_id",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"id_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"event",name:"UsedId",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"id",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],SNe="0x608060405234801561001057600080fd5b50610518806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e3314610067578063595dce4814610083578063a145832a146100ab578063b99deb0e146100be578063d3eddcc514610067578063ed46336714610067575b600080fd5b610081610075366004610379565b50505050505050505050565b005b610096610091366004610446565b6100df565b60405190151581526020015b60405180910390f35b6100816100b9366004610379565b610116565b6100d16100cc366004610482565b61028c565b6040519081526020016100a2565b6001600160a01b03808416600090815260208181526040808320938616835292905290812061010e90836102ef565b949350505050565b85600881901b6001600160f81b03198116156101875760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101948c8c61028c565b90506101a13385836100df565b156101ee5760405162461bcd60e51b815260206004820152601a60248201527f4964456e666f726365723a69642d616c72656164792d75736564000000000000604482015260640161017e565b336000908152602081815260408083206001600160a01b03881684528252808320600885901c845290915290208054600160ff84161b179055826001600160a01b0316846001600160a01b0316336001600160a01b03167f6286af1aaf28b34723a53056e5608eabb40c823d1ce093ff371cf08c502431d68460405161027691815260200190565b60405180910390a4505050505050505050505050565b6000602082146102de5760405162461bcd60e51b815260206004820152601f60248201527f4964456e666f726365723a696e76616c69642d7465726d732d6c656e67746800604482015260640161017e565b6102e882846104c4565b9392505050565b600881901c600090815260208390526040902054600160ff83161b1615155b92915050565b60008083601f84011261032657600080fd5b50813567ffffffffffffffff81111561033e57600080fd5b60208301915083602082850101111561035657600080fd5b9250929050565b80356001600160a01b038116811461037457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561039857600080fd5b8a3567ffffffffffffffff808211156103b057600080fd5b6103bc8e838f01610314565b909c509a5060208d01359150808211156103d557600080fd5b6103e18e838f01610314565b909a50985060408d0135975060608d013591508082111561040157600080fd5b5061040e8d828e01610314565b90965094505060808b0135925061042760a08c0161035d565b915061043560c08c0161035d565b90509295989b9194979a5092959850565b60008060006060848603121561045b57600080fd5b6104648461035d565b92506104726020850161035d565b9150604084013590509250925092565b6000806020838503121561049557600080fd5b823567ffffffffffffffff8111156104ac57600080fd5b6104b885828601610314565b90969095509350505050565b8035602083101561030e57600019602084900360031b1b169291505056fea26469706673582212204a96dd3b9054d6055c3a36da342d1ecb848915fb596c41cf0571e73299243bf864736f6c63430008170033",ANe={};we(ANe,{abi:()=>CNe,bytecode:()=>INe});var CNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"callCounts",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"count",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"limit_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"event",name:"IncreasedCount",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"limit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"callCount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],INe="0x608060405234801561001057600080fd5b506104e9806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c806319054d8914610067578063414c3e33146100a1578063a145832a146100bd578063b99deb0e146100d0578063d3eddcc5146100a1578063ed463367146100a1575b600080fd5b61008f6100753660046102ec565b600060208181529281526040808220909352908152205481565b60405190815260200160405180910390f35b6100bb6100af36600461035f565b50505050505050505050565b005b6100bb6100cb36600461035f565b6100e3565b61008f6100de36600461042c565b610244565b85600881901b6100f48160006102b9565b6101535760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101608c8c610244565b33600090815260208181526040808320898452909152812080549293509091829061018a9061046e565b91829055509050818111156101ed5760405162461bcd60e51b815260206004820152602360248201527f4c696d6974656443616c6c73456e666f726365723a6c696d69742d657863656560448201526219195960ea1b606482015260840161014a565b604080518381526020810183905287916001600160a01b0387169133917f449da07f2c06c9d1a6b19d2454ffe749e8cf991d22f686e076a1a4844c5ff370910160405180910390a450505050505050505050505050565b6000602082146102a85760405162461bcd60e51b815260206004820152602960248201527f4c696d6974656443616c6c73456e666f726365723a696e76616c69642d7465726044820152680dae65ad8cadccee8d60bb1b606482015260840161014a565b6102b28284610495565b9392505050565b6001600160f81b0319828116908216145b92915050565b80356001600160a01b03811681146102e757600080fd5b919050565b600080604083850312156102ff57600080fd5b610308836102d0565b946020939093013593505050565b60008083601f84011261032857600080fd5b50813567ffffffffffffffff81111561034057600080fd5b60208301915083602082850101111561035857600080fd5b9250929050565b60008060008060008060008060008060e08b8d03121561037e57600080fd5b8a3567ffffffffffffffff8082111561039657600080fd5b6103a28e838f01610316565b909c509a5060208d01359150808211156103bb57600080fd5b6103c78e838f01610316565b909a50985060408d0135975060608d01359150808211156103e757600080fd5b506103f48d828e01610316565b90965094505060808b0135925061040d60a08c016102d0565b915061041b60c08c016102d0565b90509295989b9194979a5092959850565b6000806020838503121561043f57600080fd5b823567ffffffffffffffff81111561045657600080fd5b61046285828601610316565b90969095509350505050565b60006001820161048e57634e487b7160e01b600052601160045260246000fd5b5060010190565b803560208310156102ca57600019602084900360031b1b169291505056fea264697066735822122058fb87f0b8e8aa4745b9ef395d8bd725c313f876828d7be4c479f4049d6644ac64736f6c63430008170033",ONe={};we(ONe,{abi:()=>MNe,bytecode:()=>PNe});var MNe=[{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"}],PNe="0x",kNe={};we(kNe,{abi:()=>NNe,bytecode:()=>RNe});var NNe=[],RNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220f3b6a0af2d4dff4702805c39f40ed768201654e38f4d05a5ef7ae0498666b77964736f6c63430008170033",DNe={};we(DNe,{abi:()=>$Ne,bytecode:()=>LNe});var $Ne=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationManager",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"initialAmount_",type:"uint256",internalType:"uint256"},{name:"maxAmount_",type:"uint256",internalType:"uint256"},{name:"amountPerSecond_",type:"uint256",internalType:"uint256"},{name:"startTime_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"streamingAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"initialAmount",type:"uint256",internalType:"uint256"},{name:"maxAmount",type:"uint256",internalType:"uint256"},{name:"amountPerSecond",type:"uint256",internalType:"uint256"},{name:"startTime",type:"uint256",internalType:"uint256"},{name:"spent",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"initialAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"maxAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"amountPerSecond",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startTime",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"},{name:"lastUpdateTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],LNe="0x608060405234801561001057600080fd5b506109a4806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063d3eddcc51161005b578063d3eddcc514610082578063ed46336714610082578063ee73d772146100e9578063fb7d2c5b1461010a57600080fd5b8063414c3e3314610082578063a145832a1461009e578063b99deb0e146100b1575b600080fd5b61009c610090366004610765565b50505050505050505050565b005b61009c6100ac366004610765565b610177565b6100c46100bf366004610832565b61025c565b6040805194855260208501939093529183015260608201526080015b60405180910390f35b6100fc6100f7366004610874565b610338565b6040519081526020016100e0565b61014f610118366004610874565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100e0565b856101838160006103a3565b6101d45760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101e58160006103a3565b61023f5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016101cb565b5061024e8c8c898989886103ba565b505050505050505050505050565b6000808080608085146102cb5760405162461bcd60e51b815260206004820152603160248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a696e766044820152700c2d8d2c85ae8cae4dae65ad8cadccee8d607b1b60648201526084016101cb565b6102d960206000878961089e565b6102e2916108c8565b93506102f260406020878961089e565b6102fb916108c8565b925061030b60606040878961089e565b610314916108c8565b915061032460806060878961089e565b61032d916108c8565b939692955090935050565b6001600160a01b0382166000908152602081815260408083208484528252808320815160a0810183528154815260018201549381019390935260028101549183019190915260038101546060830152600481015460808301529061039b9061062e565b949350505050565b6001600160f81b0319828116908216145b92915050565b60006103c685856106af565b50509150506000806000806103db8b8b61025c565b93509350935093508383101561044b5760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a696e7660448201526e185b1a590b5b585e0b585b5bdd5b9d608a1b60648201526084016101cb565b600081116104b85760405162461bcd60e51b815260206004820152603460248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a696e76604482015273616c69642d7a65726f2d73746172742d74696d6560601b60648201526084016101cb565b336000908152602081815260408083208a8452909152812060048101549091036104f5578481556001810184905560028101839055600381018290555b6040805160a081018252825481526001830154602082015260028301549181019190915260038201546060820152600482015460808201526105369061062e565b86111561059d5760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e53747265616d696e67456e666f726365723a616c6c60448201526e1bddd85b98d94b595e18d959591959608a1b60648201526084016101cb565b858160040160008282546105b191906108fc565b9091555050600481015460408051878152602081018790529081018590526060810184905260808101919091524260a082015288906001600160a01b0389169033907fa4d5df1d290378aabb8f054b2f3100faf35e2266bb7fbe661f947dfc686704ae9060c00160405180910390a4505050505050505050505050565b6000816060015142101561064457506000919050565b6000826060015142610656919061090f565b9050600081846040015161066a9190610922565b845161067691906108fc565b9050836020015181111561068b575060208301515b808460800151106106a0575060009392505050565b608084015161039b908261090f565b60008036816106c1601482878961089e565b6106ca91610939565b60601c93506106dd60346014878961089e565b6106e6916108c8565b92506106f5856034818961089e565b949793965094505050565b60008083601f84011261071257600080fd5b50813567ffffffffffffffff81111561072a57600080fd5b60208301915083602082850101111561074257600080fd5b9250929050565b80356001600160a01b038116811461076057600080fd5b919050565b60008060008060008060008060008060e08b8d03121561078457600080fd5b8a3567ffffffffffffffff8082111561079c57600080fd5b6107a88e838f01610700565b909c509a5060208d01359150808211156107c157600080fd5b6107cd8e838f01610700565b909a50985060408d0135975060608d01359150808211156107ed57600080fd5b506107fa8d828e01610700565b90965094505060808b0135925061081360a08c01610749565b915061082160c08c01610749565b90509295989b9194979a5092959850565b6000806020838503121561084557600080fd5b823567ffffffffffffffff81111561085c57600080fd5b61086885828601610700565b90969095509350505050565b6000806040838503121561088757600080fd5b61089083610749565b946020939093013593505050565b600080858511156108ae57600080fd5b838611156108bb57600080fd5b5050820193919092039150565b803560208310156103b457600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b808201808211156103b4576103b46108e6565b818103818111156103b4576103b46108e6565b80820281158282048414176103b4576103b46108e6565b6bffffffffffffffffffffffff1981358181169160148510156109665780818660140360031b1b83161692505b50509291505056fea264697066735822122052704058a3717c34d4c81be20ba9801f9b76f6f0c65ef9abba014d246806f21f64736f6c63430008170033",BNe={};we(BNe,{abi:()=>FNe,bytecode:()=>UNe});var FNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHookCallCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],UNe="0x608060405234801561001057600080fd5b50610263806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063d3eddcc51461008b578063e38ad59014610099578063ed4633671461005c575b600080fd5b61007661006a366004610139565b50505050505050505050565b005b610076610086366004610139565b6100b4565b610076610057366004610139565b6100a260005481565b60405190815260200160405180910390f35b6000805490806100c383610206565b919050555050505050505050505050565b60008083601f8401126100e657600080fd5b50813567ffffffffffffffff8111156100fe57600080fd5b60208301915083602082850101111561011657600080fd5b9250929050565b80356001600160a01b038116811461013457600080fd5b919050565b60008060008060008060008060008060e08b8d03121561015857600080fd5b8a3567ffffffffffffffff8082111561017057600080fd5b61017c8e838f016100d4565b909c509a5060208d013591508082111561019557600080fd5b6101a18e838f016100d4565b909a50985060408d0135975060608d01359150808211156101c157600080fd5b506101ce8d828e016100d4565b90965094505060808b013592506101e760a08c0161011d565b91506101f560c08c0161011d565b90509295989b9194979a5092959850565b60006001820161022657634e487b7160e01b600052601160045260246000fd5b506001019056fea2646970667358221220bcf0049f14343021d3eb32b64d949a39aec074b673cc386de61163856ad518a964736f6c63430008170033",jNe={};we(jNe,{abi:()=>HNe,bytecode:()=>zNe});var HNe=[],zNe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122074ec8ae00f245173ca026cab4a450417e87849694c5e94ec4fdf9b92eee9682e64736f6c63430008170033",qNe={};we(qNe,{abi:()=>KNe,bytecode:()=>VNe});var KNe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"nonpayable"},{type:"function",name:"afterAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AddressInsufficientBalance",inputs:[{name:"account",type:"address",internalType:"address"}]},{type:"error",name:"FailedInnerCall",inputs:[]}],VNe="0x60a060405234801561001057600080fd5b50604051610fa1380380610fa183398101604081905261002f91610040565b6001600160a01b0316608052610070565b60006020828403121561005257600080fd5b81516001600160a01b038116811461006957600080fd5b9392505050565b608051610efc6100a560003960008181609c0152818160f8015281816102010152818161030201526103f60152610efc6000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610071578063d3eddcc514610084578063ea4d3c9b14610097578063ed463367146100da575b600080fd5b61006f61006a36600461084c565b6100ed565b005b61006f61007f36600461084c565b6101c7565b61006f61009236600461084c565b6102c8565b6100be7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b03909116815260200160405180910390f35b61006f6100e836600461084c565b6103bc565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461013e5760405162461bcd60e51b815260040161013590610918565b60405180910390fd5b6101bb8a8a8a8a6040518060a001604052808c81526020018b8b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018a90526001600160a01b03808a166040830152881660609091015263414c3e3360e01b6104ac565b50505050505050505050565b85600881901b6001600160f81b03198116156101f55760405162461bcd60e51b815260040161013590610968565b50336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461023e5760405162461bcd60e51b815260040161013590610918565b6102bb8b8b8b8b6040518060a001604052808d81526020018c8c8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018b90526001600160a01b03808b16604083015289166060909101526350a2c19560e11b6104ac565b5050505050505050505050565b85600881901b6001600160f81b03198116156102f65760405162461bcd60e51b815260040161013590610968565b50336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461033f5760405162461bcd60e51b815260040161013590610918565b6102bb8b8b8b8b6040518060a001604052808d81526020018c8c8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018b90526001600160a01b03808b166040830152891660609091015263d3eddcc560e01b6104ac565b85600881901b6001600160f81b03198116156103ea5760405162461bcd60e51b815260040161013590610968565b50336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146104335760405162461bcd60e51b815260040161013590610918565b6102bb8b8b8b8b6040518060a001604052808d81526020018c8c8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505090825250602081018b90526001600160a01b03808b166040830152891660609091015263ed46336760e01b5b60006104ba86880188610af1565b905060006104ca85870187610cf3565b905081518160000151106105355760405162461bcd60e51b815260206004820152602c60248201527f4c6f676963616c4f7257726170706572456e666f726365723a696e76616c696460448201526b05acee4deeae05ad2dcc8caf60a31b6064820152608401610135565b60008282600001518151811061054d5761054d610ddb565b602002602001015190506000816000015151905080836020015151146105d15760405162461bcd60e51b815260206004820152603360248201527f4c6f676963616c4f7257726170706572456e666f726365723a696e76616c696460448201527205ac6c2eccac2e85ac2e4cee65ad8cadccee8d606b1b6064820152608401610135565b60005b818110156102bb576106a8836000015182815181106105f5576105f5610ddb565b602002602001015160000151878560000151848151811061061857610618610ddb565b6020026020010151602001518760200151858151811061063a5761063a610ddb565b60200260200101518b600001518c602001518d604001518e606001518f608001516040516024016106719796959493929190610e41565b60408051601f198184030181529190526020810180516001600160e01b03166001600160e01b0319909316929092179091526106b1565b506001016105d4565b60606106bf838360006106c6565b9392505050565b6060814710156106eb5760405163cd78605960e01b8152306004820152602401610135565b600080856001600160a01b031684866040516107079190610eaa565b60006040518083038185875af1925050503d8060008114610744576040519150601f19603f3d011682016040523d82523d6000602084013e610749565b606091505b5091509150610759868383610763565b9695505050505050565b60608261077857610773826107bf565b6106bf565b815115801561078f57506001600160a01b0384163b155b156107b857604051639996b31560e01b81526001600160a01b0385166004820152602401610135565b50806106bf565b8051156107cf5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b60008083601f8401126107fa57600080fd5b5081356001600160401b0381111561081157600080fd5b60208301915083602082850101111561082957600080fd5b9250929050565b80356001600160a01b038116811461084757600080fd5b919050565b60008060008060008060008060008060e08b8d03121561086b57600080fd5b8a356001600160401b038082111561088257600080fd5b61088e8e838f016107e8565b909c509a5060208d01359150808211156108a757600080fd5b6108b38e838f016107e8565b909a50985060408d0135975060608d01359150808211156108d357600080fd5b506108e08d828e016107e8565b90965094505060808b013592506108f960a08c01610830565b915061090760c08c01610830565b90509295989b9194979a5092959850565b60208082526030908201527f4c6f676963616c4f7257726170706572456e666f726365723a6f6e6c792d646560408201526f3632b3b0ba34b7b716b6b0b730b3b2b960811b606082015260800190565b60208082526025908201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6040820152642d7479706560d81b606082015260800190565b634e487b7160e01b600052604160045260246000fd5b604051602081016001600160401b03811182821017156109e5576109e56109ad565b60405290565b604051606081016001600160401b03811182821017156109e5576109e56109ad565b604080519081016001600160401b03811182821017156109e5576109e56109ad565b604051601f8201601f191681016001600160401b0381118282101715610a5757610a576109ad565b604052919050565b60006001600160401b03821115610a7857610a786109ad565b5060051b60200190565b600082601f830112610a9357600080fd5b81356001600160401b03811115610aac57610aac6109ad565b610abf601f8201601f1916602001610a2f565b818152846020838601011115610ad457600080fd5b816020850160208301376000918101602001919091529392505050565b600060208284031215610b0357600080fd5b6001600160401b0382351115610b1857600080fd5b8135820183601f820112610b2b57600080fd5b610b3d610b388235610a5f565b610a2f565b81358082526020808301929160051b840101861015610b5b57600080fd5b602083015b6020843560051b850101811015610ce9576001600160401b0381351115610b8657600080fd5b6020813585018803601f19011215610b9d57600080fd5b610ba56109c3565b6001600160401b0360208335870101351115610bc057600080fd5b81358501602081013501603f81018913610bd957600080fd5b610be9610b386020830135610a5f565b602082810135808352908201919060051b83016040018b1015610c0b57600080fd5b604083015b6040602085013560051b850101811015610cd6576001600160401b0381351115610c3957600080fd5b803584016060818e03603f19011215610c5157600080fd5b610c596109eb565b610c6560408301610830565b81526001600160401b0360608301351115610c7f57600080fd5b610c928e60406060850135850101610a82565b60208201526001600160401b0360808301351115610caf57600080fd5b610cc28e60406080850135850101610a82565b604082015284525060209283019201610c10565b5083525050835260209283019201610b60565b5095945050505050565b60006020808385031215610d0657600080fd5b82356001600160401b0380821115610d1d57600080fd5b9084019060408287031215610d3157600080fd5b610d39610a0d565b823581528383013582811115610d4e57600080fd5b80840193505086601f840112610d6357600080fd5b8235610d71610b3882610a5f565b81815260059190911b84018501908581019089831115610d9057600080fd5b8686015b83811015610dc857803586811115610dac5760008081fd5b610dba8c8a838b0101610a82565b845250918701918701610d94565b5095830195909552509695505050505050565b634e487b7160e01b600052603260045260246000fd5b60005b83811015610e0c578181015183820152602001610df4565b50506000910152565b60008151808452610e2d816020860160208601610df1565b601f01601f19169290920160200192915050565b60e081526000610e5460e083018a610e15565b8281036020840152610e66818a610e15565b90508760408401528281036060840152610e808188610e15565b608084019690965250506001600160a01b0392831660a0820152911660c090910152949350505050565b60008251610ebc818460208701610df1565b919091019291505056fea2646970667358221220849f3e028a14dd0caba34e88e124f67834a95e85298a8ec49d35e542d61e676b64736f6c63430008170033",WNe={};we(WNe,{abi:()=>GNe,bytecode:()=>YNe});var GNe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHookCallCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHookCallCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],YNe="0x608060405234801561001057600080fd5b5061028c806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e33146100675780637c46d3c814610083578063a145832a1461009e578063d3eddcc5146100b1578063e38ad590146100c4578063ed46336714610067575b600080fd5b610081610075366004610162565b50505050505050505050565b005b61008c60015481565b60405190815260200160405180910390f35b6100816100ac366004610162565b6100cd565b6100816100bf366004610162565b6100ed565b61008c60005481565b6000805490806100dc8361022f565b919050555050505050505050505050565b600180549060006100dc8361022f565b60008083601f84011261010f57600080fd5b50813567ffffffffffffffff81111561012757600080fd5b60208301915083602082850101111561013f57600080fd5b9250929050565b80356001600160a01b038116811461015d57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561018157600080fd5b8a3567ffffffffffffffff8082111561019957600080fd5b6101a58e838f016100fd565b909c509a5060208d01359150808211156101be57600080fd5b6101ca8e838f016100fd565b909a50985060408d0135975060608d01359150808211156101ea57600080fd5b506101f78d828e016100fd565b90965094505060808b0135925061021060a08c01610146565b915061021e60c08c01610146565b90509295989b9194979a5092959850565b60006001820161024f57634e487b7160e01b600052601160045260246000fd5b506001019056fea2646970667358221220fbb59fec9ec7bf6cdda251d9d498ff456d0623f22ca1f4ef5f02ab03744fc44c64736f6c63430008170033",JNe={};we(JNe,{abi:()=>ZNe,bytecode:()=>XNe});var ZNe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_argsEqualityCheckEnforcer",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"afterAllHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"argsEqualityCheckEnforcer",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"event",name:"ValidatedPayment",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"recipient",type:"address",indexed:!0,internalType:"address"},{name:"delegator",type:"address",indexed:!1,internalType:"address"},{name:"redeemer",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],XNe="0x60c060405234801561001057600080fd5b506040516111b73803806111b783398101604081905261002f9161005e565b6001600160a01b039182166080521660a052610098565b6001600160a01b038116811461005b57600080fd5b50565b6000806040838503121561007157600080fd5b825161007c81610046565b602084015190925061008d81610046565b809150509250929050565b60805160a0516110e66100d16000396000818160a301526103c001526000818161011901528181610273015261065a01526110e66000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063b99deb0e1161005b578063b99deb0e146100e2578063d3eddcc514610082578063ea4d3c9b14610114578063ed4633671461013b57600080fd5b8063414c3e3314610082578063a145832a14610082578063a42ff9311461009e575b600080fd5b61009c6100903660046108d5565b50505050505050505050565b005b6100c57f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020015b60405180910390f35b6100f56100f03660046109a2565b61014e565b604080516001600160a01b0390931683526020830191909152016100d9565b6100c57f000000000000000000000000000000000000000000000000000000000000000081565b61009c6101493660046108d5565b6101fc565b600080603483146101be5760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a696e76616c60448201526e0d2c85ae8cae4dae65ad8cadccee8d608b1b60648201526084015b60405180910390fd5b6101cc6014600085876109e4565b6101d591610a0e565b60601c91506101e783601481876109e4565b6101f091610a43565b60001c90509250929050565b85600881901b61020d8160006107ac565b6102675760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016101b5565b50336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146102fb5760405162461bcd60e51b815260206004820152603260248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a6f6e6c792d6044820152713232b632b3b0ba34b7b716b6b0b730b3b2b960711b60648201526084016101b5565b6000806103088d8d61014e565b9092509050600061031b8b8d018d610c88565b905060008151116103945760405162461bcd60e51b815260206004820152603f60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a696e76616c60448201527f69642d616c6c6f77616e63652d64656c65676174696f6e732d6c656e6774680060648201526084016101b5565b6000816000815181106103a9576103a9610dcd565b6020026020010151606001515111801561043057507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316816000815181106103fb576103fb610dcd565b60200260200101516060015160008151811061041957610419610dcd565b6020026020010151600001516001600160a01b0316145b6104a25760405162461bcd60e51b815260206004820152603c60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a6d6973736960448201527f6e672d61726773457175616c697479436865636b456e666f726365720000000060648201526084016101b5565b86856040516020016104d092919091825260601b6bffffffffffffffffffffffff1916602082015260340190565b604051602081830303815290604052816000815181106104f2576104f2610dcd565b60200260200101516060015160008151811061051057610510610dcd565b602090810291909101015160409081019190915280516001808252818301909252600091816020015b6060815260200190600190039081610539579050509050816040516020016105619190610e33565b6040516020818303038152906040528160008151811061058357610583610dcd565b6020908102919091010152604080516001808252818301909252600091816020015b60608152602001906001900390816105a55790505090506105d68585604051806020016040528060008152506107c3565b816000815181106105e9576105e9610dcd565b60209081029190910101526040805160018082528183019092526000918160200160208202803683370190505090506106206107f2565b8160008151811061063357610633610dcd565b602090810291909101015260405163cef6d20960e01b81526001600160a01b0380881631917f00000000000000000000000000000000000000000000000000000000000000009091169063cef6d2099061069590879086908890600401610fbf565b600060405180830381600087803b1580156106af57600080fd5b505af11580156106c3573d6000803e3d6000fd5b505050506001600160a01b038716316106dc8783611029565b8110156107435760405162461bcd60e51b815260206004820152602f60248201527f4e6174697665546f6b656e5061796d656e74456e666f726365723a7061796d6560448201526e1b9d0b5b9bdd0b5c9958d95a5d9959608a1b60648201526084016101b5565b604080516001600160a01b038d811682528c81166020830152918101899052908916908d9033907fac266e0d9b66169d0dc4479d531985bcec62dfd9d7992d0f6865afdbb7baa5e29060600160405180910390a450505050505050505050505050505050505050565b6001600160f81b0319828116908216145b92915050565b60608383836040516020016107da9392919061104a565b60405160208183030381529060405290509392505050565b600061080081808080610805565b905090565b604080516001600160f81b03198087166020830152851660218201526000602282018190526001600160e01b03198516602683015269ffffffffffffffffffff198416602a830152910160405160208183030381529060405261086790611089565b95945050505050565b60008083601f84011261088257600080fd5b50813567ffffffffffffffff81111561089a57600080fd5b6020830191508360208285010111156108b257600080fd5b9250929050565b80356001600160a01b03811681146108d057600080fd5b919050565b60008060008060008060008060008060e08b8d0312156108f457600080fd5b8a3567ffffffffffffffff8082111561090c57600080fd5b6109188e838f01610870565b909c509a5060208d013591508082111561093157600080fd5b61093d8e838f01610870565b909a50985060408d0135975060608d013591508082111561095d57600080fd5b5061096a8d828e01610870565b90965094505060808b0135925061098360a08c016108b9565b915061099160c08c016108b9565b90509295989b9194979a5092959850565b600080602083850312156109b557600080fd5b823567ffffffffffffffff8111156109cc57600080fd5b6109d885828601610870565b90969095509350505050565b600080858511156109f457600080fd5b83861115610a0157600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff198135818116916014851015610a3b5780818660140360031b1b83161692505b505092915050565b803560208310156107bd57600019602084900360031b1b1692915050565b634e487b7160e01b600052604160045260246000fd5b6040516060810167ffffffffffffffff81118282101715610a9a57610a9a610a61565b60405290565b60405160c0810167ffffffffffffffff81118282101715610a9a57610a9a610a61565b604051601f8201601f1916810167ffffffffffffffff81118282101715610aec57610aec610a61565b604052919050565b600067ffffffffffffffff821115610b0e57610b0e610a61565b5060051b60200190565b600082601f830112610b2957600080fd5b813567ffffffffffffffff811115610b4357610b43610a61565b610b56601f8201601f1916602001610ac3565b818152846020838601011115610b6b57600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f830112610b9957600080fd5b81356020610bae610ba983610af4565b610ac3565b82815260059290921b84018101918181019086841115610bcd57600080fd5b8286015b84811015610c7d57803567ffffffffffffffff80821115610bf25760008081fd5b908801906060828b03601f1901811315610c0c5760008081fd5b610c14610a77565b610c1f8885016108b9565b815260408085013584811115610c355760008081fd5b610c438e8b83890101610b18565b838b015250918401359183831115610c5b5760008081fd5b610c698d8a85880101610b18565b908201528652505050918301918301610bd1565b509695505050505050565b60006020808385031215610c9b57600080fd5b823567ffffffffffffffff80821115610cb357600080fd5b818501915085601f830112610cc757600080fd5b8135610cd5610ba982610af4565b81815260059190911b83018401908481019088831115610cf457600080fd5b8585015b83811015610dc057803585811115610d0f57600080fd5b860160c0818c03601f19011215610d265760008081fd5b610d2e610aa0565b610d398983016108b9565b81526040610d488184016108b9565b8a83015260608084013582840152608091508184013589811115610d6c5760008081fd5b610d7a8f8d83880101610b88565b82850152505060a0808401358284015260c0840135915088821115610d9f5760008081fd5b610dad8e8c84870101610b18565b9083015250845250918601918601610cf8565b5098975050505050505050565b634e487b7160e01b600052603260045260246000fd5b60005b83811015610dfe578181015183820152602001610de6565b50506000910152565b60008151808452610e1f816020860160208601610de3565b601f01601f19169290920160200192915050565b6000602080830181845280855180835260408601915060408160051b870101925083870160005b82811015610f5857603f19888603018452815160c0860160018060a01b038083511688528089840151168989015260408301516040890152606083015160c060608a015282815180855260e08b01915060e08160051b8c010194508b8301925060005b81811015610f1c5760df198c870301835283518581511687528d81015160608f890152610eed6060890182610e07565b9050604082015191508781036040890152610f088183610e07565b97505050928c0192918c0191600101610ebd565b50505050506080820151608088015260a0820151915086810360a0880152610f448183610e07565b965050509285019290850190600101610e5a565b5092979650505050505050565b60008282518085526020808601955060208260051b8401016020860160005b84811015610fb257601f19868403018952610fa0838351610e07565b98840198925090830190600101610f84565b5090979650505050505050565b606081526000610fd26060830186610f65565b82810360208481019190915285518083528682019282019060005b8181101561100957845183529383019391830191600101610fed565b5050848103604086015261101d8187610f65565b98975050505050505050565b808201808211156107bd57634e487b7160e01b600052601160045260246000fd5b6bffffffffffffffffffffffff198460601b1681528260148201526000825161107a816034850160208701610de3565b91909101603401949350505050565b805160208083015191908110156110aa576000198160200360031b1b821691505b5091905056fea264697066735822122085080b51672c95cef1f0b772853b91117f909ad9d873a40d2cad7c2b29f5117c64736f6c63430008170033",QNe={};we(QNe,{abi:()=>eRe,bytecode:()=>tRe});var eRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegationManager",type:"address",internalType:"address"},{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"},{name:"isNewPeriod_",type:"bool",internalType:"bool"},{name:"currentPeriod_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"periodAmount_",type:"uint256",internalType:"uint256"},{name:"periodDuration_",type:"uint256",internalType:"uint256"},{name:"startDate_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"periodicAllowances",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"periodAmount",type:"uint256",internalType:"uint256"},{name:"periodDuration",type:"uint256",internalType:"uint256"},{name:"startDate",type:"uint256",internalType:"uint256"},{name:"lastTransferPeriod",type:"uint256",internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"TransferredInPeriod",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"periodAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"periodDuration",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startDate",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],tRe="0x608060405234801561001057600080fd5b50610b57806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063a145832a1161005b578063a145832a1461013e578063b99deb0e14610151578063d3eddcc514610082578063ed4633671461008257600080fd5b8063414c3e33146100825780636a9843f61461009e5780637b91dc78146100d1575b600080fd5b61009c610090366004610893565b50505050505050505050565b005b6100b16100ac366004610960565b61017f565b604080519384529115156020840152908201526060015b60405180910390f35b6101166100df3660046109ba565b6000602081815292815260408082209093529081522080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100c8565b61009c61014c366004610893565b610255565b61016461015f3660046109e4565b61033a565b604080519384526020840192909252908201526060016100c8565b6001600160a01b0383166000908152602081815260408083208784528252808320815160a0810183528154815260018201549381019390935260028101549183018290526003810154606084015260040154608083015282918291156101f4576101e8816103f0565b9350935093505061024b565b6000806000610203898961033a565b92509250925060006040518060a00160405280858152602001848152602001838152602001600081526020016000815250905061023f816103f0565b97509750975050505050505b9450945094915050565b85610261816000610484565b6102b25760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6102c3816000610484565b61031d5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084016102a9565b5061032c8c8c8989898861049b565b505050505050505050505050565b600080806060841461039b5760405162461bcd60e51b81526020600482015260366024820152600080516020610b028339815191526044820152750e474d2dcecc2d8d2c85ae8cae4dae65ad8cadccee8d60531b60648201526084016102a9565b6103a9602060008688610a26565b6103b291610a50565b92506103c2604060208688610a26565b6103cb91610a50565b91506103db606060408688610a26565b6103e491610a50565b60001c90509250925092565b6000806000836040015142101561040f5750600091508190508061047d565b602084015160408501516104239042610a84565b61042d9190610a97565b610438906001610ab9565b905080846060015114159150600082610455578460800151610458565b60005b90508085600001511161046c576000610479565b8451610479908290610a84565b9350505b9193909250565b6001600160f81b0319828116908216145b92915050565b60006104a785856107dd565b505091505060008060006104bb8a8a61033a565b336000908152602081815260408083208c84529091528120600281015494975092955090935090919003610684576000821161054d5760405162461bcd60e51b81526020600482015260396024820152600080516020610b0283398151915260448201527f723a696e76616c69642d7a65726f2d73746172742d646174650000000000000060648201526084016102a9565b600084116105b15760405162461bcd60e51b815260206004820152603c6024820152600080516020610b0283398151915260448201527f723a696e76616c69642d7a65726f2d706572696f642d616d6f756e740000000060648201526084016102a9565b600083116106155760405162461bcd60e51b815260206004820152603e6024820152600080516020610b0283398151915260448201527f723a696e76616c69642d7a65726f2d706572696f642d6475726174696f6e000060648201526084016102a9565b814210156106725760405162461bcd60e51b81526020600482015260366024820152600080516020610b028339815191526044820152751c8e9d1c985b9cd9995c8b5b9bdd0b5cdd185c9d195960521b60648201526084016102a9565b83815560018101839055600281018290555b60008060006106cf846040518060a0016040529081600082015481526020016001820154815260200160028201548152602001600382015481526020016004820154815250506103f0565b925092509250828811156107395760405162461bcd60e51b815260206004820152603a6024820152600080516020610b0283398151915260448201527f723a7472616e736665722d616d6f756e742d657863656564656400000000000060648201526084016102a9565b811561074e5760038401819055600060048501555b878460040160008282546107629190610ab9565b909155505060028401546004850154604080518a8152602081018a90529081019290925260608201524260808201528a906001600160a01b038b169033907f22e1bbd8bc0380d336958afc37cd8cb128d6c43891ed276162c30e8df467734d9060a00160405180910390a45050505050505050505050505050565b60008036816107ef6014828789610a26565b6107f891610acc565b60601c935061080b603460148789610a26565b61081491610a50565b92506108238560348189610a26565b949793965094505050565b60008083601f84011261084057600080fd5b50813567ffffffffffffffff81111561085857600080fd5b60208301915083602082850101111561087057600080fd5b9250929050565b80356001600160a01b038116811461088e57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156108b257600080fd5b8a3567ffffffffffffffff808211156108ca57600080fd5b6108d68e838f0161082e565b909c509a5060208d01359150808211156108ef57600080fd5b6108fb8e838f0161082e565b909a50985060408d0135975060608d013591508082111561091b57600080fd5b506109288d828e0161082e565b90965094505060808b0135925061094160a08c01610877565b915061094f60c08c01610877565b90509295989b9194979a5092959850565b6000806000806060858703121561097657600080fd5b8435935061098660208601610877565b9250604085013567ffffffffffffffff8111156109a257600080fd5b6109ae8782880161082e565b95989497509550505050565b600080604083850312156109cd57600080fd5b6109d683610877565b946020939093013593505050565b600080602083850312156109f757600080fd5b823567ffffffffffffffff811115610a0e57600080fd5b610a1a8582860161082e565b90969095509350505050565b60008085851115610a3657600080fd5b83861115610a4357600080fd5b5050820193919092039150565b8035602083101561049557600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b8181038181111561049557610495610a6e565b600082610ab457634e487b7160e01b600052601260045260246000fd5b500490565b8082018082111561049557610495610a6e565b6bffffffffffffffffffffffff198135818116916014851015610af95780818660140360031b1b83161692505b50509291505056fe4e6174697665546f6b656e506572696f645472616e73666572456e666f726365a2646970667358221220ddbfb33bfc3119eae666e9c14c2e492d38eed690114f0ed176d6eb49d0bc21a364736f6c63430008170033",nRe={};we(nRe,{abi:()=>rRe,bytecode:()=>aRe});var rRe=[{type:"function",name:"getNonce",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"key",type:"uint192",internalType:"uint192"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"incrementNonce",inputs:[{name:"key",type:"uint192",internalType:"uint192"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"nonceSequenceNumber",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],aRe="0x",iRe={};we(iRe,{abi:()=>sRe,bytecode:()=>oRe});var sRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"view"},{type:"function",name:"currentNonce",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"}],outputs:[{name:"nonce",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"nonce_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"incrementNonce",inputs:[{name:"_delegationManager",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"UsedNonce",inputs:[{name:"delegationManager",type:"address",indexed:!0,internalType:"address"},{name:"delegator",type:"address",indexed:!0,internalType:"address"},{name:"nonce",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],oRe="0x608060405234801561001057600080fd5b5061050e806100206000396000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063b99deb0e1161005b578063b99deb0e146100eb578063d3eddcc5146100bc578063ed463367146100bc578063f5743c4c146100fe57600080fd5b80632bd4ed2114610082578063414c3e33146100bc578063a145832a146100d8575b600080fd5b6100aa610090366004610314565b600060208181529281526040808220909352908152205481565b60405190815260200160405180910390f35b6100d66100ca366004610390565b50505050505050505050565b005b6100d66100e6366004610390565b610111565b6100aa6100f936600461045d565b61020f565b6100d661010c36600461049f565b61027d565b85600881901b6101228160006102e1565b6101815760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b50600061018e8c8c61020f565b336000908152602081815260408083206001600160a01b038916845290915290205490915081146102015760405162461bcd60e51b815260206004820152601b60248201527f4e6f6e6365456e666f726365723a696e76616c69642d6e6f6e636500000000006044820152606401610178565b505050505050505050505050565b60006020821461026c5760405162461bcd60e51b815260206004820152602260248201527f4e6f6e6365456e666f726365723a696e76616c69642d7465726d732d6c656e676044820152610e8d60f31b6064820152608401610178565b61027682846104ba565b9392505050565b6001600160a01b038116600081815260208181526040808320338085529083529281902080546001810190915590518181529093917fe02d340254c92bc3ad96f0fceb790db939e11c669c1f4c8a549d248f17130b33910160405180910390a35050565b6001600160f81b0319828116908216145b92915050565b80356001600160a01b038116811461030f57600080fd5b919050565b6000806040838503121561032757600080fd5b610330836102f8565b915061033e602084016102f8565b90509250929050565b60008083601f84011261035957600080fd5b50813567ffffffffffffffff81111561037157600080fd5b60208301915083602082850101111561038957600080fd5b9250929050565b60008060008060008060008060008060e08b8d0312156103af57600080fd5b8a3567ffffffffffffffff808211156103c757600080fd5b6103d38e838f01610347565b909c509a5060208d01359150808211156103ec57600080fd5b6103f88e838f01610347565b909a50985060408d0135975060608d013591508082111561041857600080fd5b506104258d828e01610347565b90965094505060808b0135925061043e60a08c016102f8565b915061044c60c08c016102f8565b90509295989b9194979a5092959850565b6000806020838503121561047057600080fd5b823567ffffffffffffffff81111561048757600080fd5b61049385828601610347565b90969095509350505050565b6000602082840312156104b157600080fd5b610276826102f8565b803560208310156102f257600019602084900360031b1b169291505056fea26469706673582212205626dd2329dbdfa25ba379781a5be6c8fc6ae0eb3a22e9122f5d8207bb7de74564736f6c63430008170033",cRe={};we(cRe,{abi:()=>dRe,bytecode:()=>lRe});var dRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getAllTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"tokens_",type:"address[]",internalType:"address[]"},{name:"periodAmounts_",type:"uint256[]",internalType:"uint256[]"},{name:"periodDurations_",type:"uint256[]",internalType:"uint256[]"},{name:"startDates_",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"pure"},{type:"function",name:"getAvailableAmount",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegationManager",type:"address",internalType:"address"},{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_args",type:"bytes",internalType:"bytes"}],outputs:[{name:"availableAmount_",type:"uint256",internalType:"uint256"},{name:"isNewPeriod_",type:"bool",internalType:"bool"},{name:"currentPeriod_",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_token",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_index",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"_tokenIndex",type:"uint256",internalType:"uint256"}],outputs:[{name:"token_",type:"address",internalType:"address"},{name:"periodAmount_",type:"uint256",internalType:"uint256"},{name:"periodDuration_",type:"uint256",internalType:"uint256"},{name:"startDate_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"periodicAllowances",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"periodAmount",type:"uint256",internalType:"uint256"},{name:"periodDuration",type:"uint256",internalType:"uint256"},{name:"startDate",type:"uint256",internalType:"uint256"},{name:"lastTransferPeriod",type:"uint256",internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"TransferredInPeriod",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"token",type:"address",indexed:!1,internalType:"address"},{name:"periodAmount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"periodDuration",type:"uint256",indexed:!1,internalType:"uint256"},{name:"startDate",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferredInCurrentPeriod",type:"uint256",indexed:!1,internalType:"uint256"},{name:"transferTimestamp",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],lRe="0x608060405234801561001057600080fd5b5061148b806100206000396000f3fe608060405234801561001057600080fd5b50600436106100935760003560e01c8063a145832a11610066578063a145832a1461014b578063d3eddcc5146100c4578063da8081c21461015e578063ed463367146100c4578063f5c7d74e146101c357600080fd5b806319de6ebc14610098578063414c3e33146100c4578063733c0d80146100e05780638572e3191461011d575b600080fd5b6100ab6100a6366004610f6f565b6101e4565b6040516100bb9493929190610fed565b60405180910390f35b6100de6100d2366004611094565b50505050505050505050565b005b6100f36100ee366004611161565b6104b6565b604080516001600160a01b03909516855260208501939093529183015260608201526080016100bb565b61013061012b3660046111ad565b61062a565b604080519384529115156020840152908201526060016100bb565b6100de610159366004611094565b6106fc565b61019b61016c366004611237565b600060208190529081526040902080546001820154600283015460038401546004909401549293919290919085565b604080519586526020860194909452928401919091526060830152608082015260a0016100bb565b6101d66101d1366004611250565b6107de565b6040519081526020016100bb565b6060808080846101f56074826112a8565b15801561020157508015155b6102265760405162461bcd60e51b815260040161021d906112bc565b60405180910390fd5b600061023360748361130d565b90508067ffffffffffffffff81111561024e5761024e611321565b604051908082528060200260200182016040528015610277578160200160208202803683370190505b5095508067ffffffffffffffff81111561029357610293611321565b6040519080825280602002602001820160405280156102bc578160200160208202803683370190505b5094508067ffffffffffffffff8111156102d8576102d8611321565b604051908082528060200260200182016040528015610301578160200160208202803683370190505b5093508067ffffffffffffffff81111561031d5761031d611321565b604051908082528060200260200182016040528015610346578160200160208202803683370190505b50925060005b818110156104aa576000610361826074611337565b905089818a61037182601461134e565b9261037e93929190611361565b6103879161138b565b60601c88838151811061039c5761039c6113c0565b6001600160a01b039092166020928302919091019091015289896103c183601461134e565b906103cd84603461134e565b926103da93929190611361565b6103e3916113d6565b60001c8783815181106103f8576103f86113c0565b6020908102919091010152898961041083603461134e565b9061041c84605461134e565b9261042993929190611361565b610432916113d6565b60001c868381518110610447576104476113c0565b6020908102919091010152898961045f83605461134e565b9061046b84607461134e565b9261047893929190611361565b610481916113d6565b60001c858381518110610496576104966113c0565b60209081029190910101525060010161034c565b50505092959194509250565b60008080808580158015906104d357506104d16074826112a8565b155b6104ef5760405162461bcd60e51b815260040161021d906112bc565b60006104fc60748361130d565b90508087106105505760405162461bcd60e51b815260206004820152602c602482015260008051602061143683398151915260448201526b05ae8ded6cadc5ad2dcc8caf60a31b606482015260840161021d565b600061055d886074611337565b905089818a61056d82601461134e565b9261057a93929190611361565b6105839161138b565b60601c9650898961059583601461134e565b906105a184603461134e565b926105ae93929190611361565b6105b7916113d6565b955089896105c683603461134e565b906105d284605461134e565b926105df93929190611361565b6105e8916113d6565b945089896105f783605461134e565b9061060384607461134e565b9261061093929190611361565b610619916113d6565b60001c935050505093509350935093565b60008060008060008060006106438d8d8d8d8d8d6107f5565b60008481526020818152604091829020825160a081018452815481526001820154928101929092526002810154928201839052600381015460608301526004015460808201529498509296509094509250156106b2576106a28161083c565b97509750975050505050506106f0565b6040805160a0810182528581526020810185905290810183905260006060820181905260808201526106e38161083c565b9850985098505050505050505b96509650969350505050565b856107088160006108d0565b6107545760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d74797065604482015260640161021d565b86600881901b6107658160006108d0565b6107bf5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161021d565b506107d08c8c8c8c8b8b8b8a6108e7565b505050505050505050505050565b60006107ec85858585610e8b565b95945050505050565b60008080808061080786880188611237565b905060006108168a8a846104b6565b91975095509350905061082b8b828e85610e8b565b955050509650965096509692505050565b6000806000836040015142101561085b575060009150819050806108c9565b6020840151604085015161086f90426113f4565b610879919061130d565b61088490600161134e565b9050808460600151141591506000826108a15784608001516108a4565b60005b9050808560000151116108b85760006108c5565b84516108c59082906113f4565b9350505b9193909250565b6001600160f81b0319828116908216145b92915050565b6000806000803660006108fa8a8a610ed5565b935093509350935081819050604403610a0657821561096f5760405162461bcd60e51b8152602060048201526038602482015260008051602061143683398151915260448201527f2d76616c75652d696e2d65726332302d7472616e736665720000000000000000606482015260840161021d565b63a9059cbb60e01b610985600460008486611361565b61098e91611407565b6001600160e01b031916146109e35760405162461bcd60e51b815260206004820152602760248201526000805160206114368339815191526044820152660b5b595d1a1bd960ca1b606482015260840161021d565b92935083926109f6604460248385611361565b6109ff916113d6565b9550610acf565b6000819003610a7f5760008311610a735760405162461bcd60e51b815260206004820152603e602482015260008051602061143683398151915260448201527f2d7a65726f2d76616c75652d696e2d6e61746976652d7472616e736665720000606482015260840161021d565b60009450829550610acf565b60405162461bcd60e51b8152602060048201526031602482015260008051602061143683398151915260448201527005ac6c2d8d85ac8c2e8c25ad8cadccee8d607b1b606482015260840161021d565b5060009250610ae3915050888a018a611237565b9050600080600080610af68f8f876104b6565b9350935093509350836001600160a01b0316866001600160a01b031614610b6f5760405162461bcd60e51b815260206004820152602760248201527f4d756c7469546f6b656e506572696f64456e666f726365723a746f6b656e2d6d6044820152660d2e6dac2e8c6d60cb1b606482015260840161021d565b6000610b7d33888c89610e8b565b60008181526020819052604081206002810154929350919003610d1f5760008311610bf15760405162461bcd60e51b8152602060048201526030602482015260008051602061143683398151915260448201526f2d7a65726f2d73746172742d6461746560801b606482015260840161021d565b60008511610c4b5760405162461bcd60e51b815260206004820152603360248201526000805160206114368339815191526044820152720b5e995c9bcb5c195c9a5bd90b585b5bdd5b9d606a1b606482015260840161021d565b60008411610ca75760405162461bcd60e51b8152602060048201526035602482015260008051602061143683398151915260448201527416bd32b93796b832b934b7b216b23ab930ba34b7b760591b606482015260840161021d565b82421015610d0d5760405162461bcd60e51b815260206004820152602d60248201527f4d756c7469546f6b656e506572696f64456e666f726365723a7472616e73666560448201526c1c8b5b9bdd0b5cdd185c9d1959609a1b606482015260840161021d565b84815560018101849055600281018390555b6000806000610d6a846040518060a00160405290816000820154815260200160018201548152602001600282015481526020016003820154815260200160048201548152505061083c565b925092509250828c1115610dda5760405162461bcd60e51b815260206004820152603160248201527f4d756c7469546f6b656e506572696f64456e666f726365723a7472616e7366656044820152701c8b585b5bdd5b9d0b595e18d959591959607a1b606482015260840161021d565b8115610def5760038401819055600060048501555b8b846004016000828254610e03919061134e565b90915550506004840154604080516001600160a01b038e81168252602082018c90529181018a90526060810189905260808101929092524260a08301528f91908f169033907fb2a345c7f80b4be490c405f4a994faf85384dd05da7d70be0801dc31a8c253af9060c00160405180910390a45050505050505050505050505050505050505050565b604080516001600160a01b03958616602080830191909152949095168582015260608501929092526080808501919091528151808503909101815260a09093019052815191012090565b6000803681610ee76014828789611361565b610ef09161138b565b60601c9350610f03603460148789611361565b610f0c916113d6565b9250610f1b8560348189611361565b949793965094505050565b60008083601f840112610f3857600080fd5b50813567ffffffffffffffff811115610f5057600080fd5b602083019150836020828501011115610f6857600080fd5b9250929050565b60008060208385031215610f8257600080fd5b823567ffffffffffffffff811115610f9957600080fd5b610fa585828601610f26565b90969095509350505050565b60008151808452602080850194506020840160005b83811015610fe257815187529582019590820190600101610fc6565b509495945050505050565b6080808252855190820181905260009060209060a0840190828901845b8281101561102f5781516001600160a01b03168452928401929084019060010161100a565b50505083810360208501526110448188610fb1565b91505082810360408401526110598186610fb1565b9050828103606084015261106d8185610fb1565b979650505050505050565b80356001600160a01b038116811461108f57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156110b357600080fd5b8a3567ffffffffffffffff808211156110cb57600080fd5b6110d78e838f01610f26565b909c509a5060208d01359150808211156110f057600080fd5b6110fc8e838f01610f26565b909a50985060408d0135975060608d013591508082111561111c57600080fd5b506111298d828e01610f26565b90965094505060808b0135925061114260a08c01611078565b915061115060c08c01611078565b90509295989b9194979a5092959850565b60008060006040848603121561117657600080fd5b833567ffffffffffffffff81111561118d57600080fd5b61119986828701610f26565b909790965060209590950135949350505050565b600080600080600080608087890312156111c657600080fd5b863595506111d660208801611078565b9450604087013567ffffffffffffffff808211156111f357600080fd5b6111ff8a838b01610f26565b9096509450606089013591508082111561121857600080fd5b5061122589828a01610f26565b979a9699509497509295939492505050565b60006020828403121561124957600080fd5b5035919050565b6000806000806080858703121561126657600080fd5b61126f85611078565b935061127d60208601611078565b93969395505050506040820135916060013590565b634e487b7160e01b600052601260045260246000fd5b6000826112b7576112b7611292565b500690565b6020808252602d9082015260008051602061143683398151915260408201526c05ae8cae4dae65ad8cadccee8d609b1b606082015260800190565b634e487b7160e01b600052601160045260246000fd5b60008261131c5761131c611292565b500490565b634e487b7160e01b600052604160045260246000fd5b80820281158282048414176108e1576108e16112f7565b808201808211156108e1576108e16112f7565b6000808585111561137157600080fd5b8386111561137e57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156113b85780818660140360031b1b83161692505b505092915050565b634e487b7160e01b600052603260045260246000fd5b803560208310156108e157600019602084900360031b1b1692915050565b818103818111156108e1576108e16112f7565b6001600160e01b031981358181169160048510156113b85760049490940360031b84901b169092169291505056fe4d756c7469546f6b656e506572696f64456e666f726365723a696e76616c6964a264697066735822122024c53d9970ff849bf9025e90cc5d34bfc99b0f5ee6a61ef6c48512264a9b0a3164736f6c63430008170033",uRe={};we(uRe,{abi:()=>fRe,bytecode:()=>pRe});var fRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceCache",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"balance",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getHashKey",inputs:[{name:"_caller",type:"address",internalType:"address"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"enforceDecrease_",type:"bool",internalType:"bool"},{name:"recipient_",type:"address",internalType:"address"},{name:"amount_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"isLocked",inputs:[{name:"hashKey",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"lock",type:"bool",internalType:"bool"}],stateMutability:"view"}],pRe="0x608060405234801561001057600080fd5b50610824806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063b5e544921161005b578063b5e5449214610115578063b99deb0e14610135578063d3eddcc51461016d578063ed463367146100c557600080fd5b806332a16f4e1461008d578063414c3e33146100c5578063a145832a146100e1578063a79a0db5146100f4575b600080fd5b6100b061009b366004610568565b60016020526000908152604090205460ff1681565b60405190151581526020015b60405180910390f35b6100df6100d33660046105e6565b50505050505050505050565b005b6100df6100ef3660046105e6565b610180565b6101076101023660046106b3565b6102c6565b6040519081526020016100bc565b610107610123366004610568565b60006020819052908152604090205481565b6101486101433660046106dd565b6102db565b6040805193151584526001600160a01b039092166020840152908201526060016100bc565b6100df61017b3660046105e6565b6103ad565b85600881901b6001600160f81b03198116156101f15760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101fe338661052b565b9050600061020c8d8d6102db565b5060008481526001602052604090205490925060ff161590506102885760405162461bcd60e51b815260206004820152602e60248201527f4e617469766542616c616e63654368616e6765456e666f726365723a656e666f60448201526d1c98d95c8b5a5ccb5b1bd8dad95960921b60648201526084016101e8565b6000918252600160208181526040808520805460ff19169093179092558390529091206001600160a01b039091163190555050505050505050505050565b60006102d2838361052b565b90505b92915050565b60008080603584146103485760405162461bcd60e51b815260206004820152603060248201527f4e617469766542616c616e63654368616e6765456e666f726365723a696e766160448201526f0d8d2c85ae8cae4dae65ad8cadccee8d60831b60648201526084016101e8565b8484600081811061035b5761035b61071f565b909101356001600160f81b0319161515935061037d9050601560018688610735565b6103869161075f565b60601c91506103988460158188610735565b6103a191610794565b60001c90509250925092565b60008060006103bc8d8d6102db565b92509250925060006103ce338861052b565b6000818152600160205260409020805460ff1916905590508315610482576000818152602081905260409020546104069083906107c8565b836001600160a01b031631101561047d5760405162461bcd60e51b815260206004820152603560248201527f4e617469766542616c616e63654368616e6765456e666f726365723a65786365604482015274656465642d62616c616e63652d646563726561736560581b60648201526084016101e8565b61051b565b60008181526020819052604090205461049c9083906107db565b836001600160a01b031631101561051b5760405162461bcd60e51b815260206004820152603960248201527f4e617469766542616c616e63654368616e6765456e666f726365723a696e737560448201527f6666696369656e742d62616c616e63652d696e6372656173650000000000000060648201526084016101e8565b5050505050505050505050505050565b604080516001600160a01b038416602082015290810182905260009060600160405160208183030381529060405280519060200120905092915050565b60006020828403121561057a57600080fd5b5035919050565b60008083601f84011261059357600080fd5b50813567ffffffffffffffff8111156105ab57600080fd5b6020830191508360208285010111156105c357600080fd5b9250929050565b80356001600160a01b03811681146105e157600080fd5b919050565b60008060008060008060008060008060e08b8d03121561060557600080fd5b8a3567ffffffffffffffff8082111561061d57600080fd5b6106298e838f01610581565b909c509a5060208d013591508082111561064257600080fd5b61064e8e838f01610581565b909a50985060408d0135975060608d013591508082111561066e57600080fd5b5061067b8d828e01610581565b90965094505060808b0135925061069460a08c016105ca565b91506106a260c08c016105ca565b90509295989b9194979a5092959850565b600080604083850312156106c657600080fd5b6106cf836105ca565b946020939093013593505050565b600080602083850312156106f057600080fd5b823567ffffffffffffffff81111561070757600080fd5b61071385828601610581565b90969095509350505050565b634e487b7160e01b600052603260045260246000fd5b6000808585111561074557600080fd5b8386111561075257600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff19813581811691601485101561078c5780818660140360031b1b83161692505b505092915050565b803560208310156102d557600019602084900360031b1b1692915050565b634e487b7160e01b600052601160045260246000fd5b818103818111156102d5576102d56107b2565b808201808211156102d5576102d56107b256fea2646970667358221220b33a5c188759ed62e28774f4ab95ff422856e7b7a36f7de87da5f14ed435ece964736f6c63430008170033",hRe={};we(hRe,{abi:()=>bRe,bytecode:()=>yRe});var bRe=[{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]}],yRe="0x",mRe={};we(mRe,{abi:()=>gRe,bytecode:()=>wRe});var gRe=[],wRe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220709bae2a6201f60c7dd916d94e8aed6e76d68870a93207bbf209cbf2ce9581c664736f6c63430008170033",vRe={};we(vRe,{abi:()=>ERe,bytecode:()=>_Re});var ERe=[{type:"function",name:"onERC721Received",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"from",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"}],_Re="0x",TRe={};we(TRe,{abi:()=>xRe,bytecode:()=>SRe});var xRe=[{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]}],SRe="0x",ac={};we(ac,{abi:()=>ARe,bytecode:()=>CRe});var ARe=[{type:"function",name:"acceptOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"pendingOwner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"OwnershipTransferStarted",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]}],CRe="0x",IRe={};we(IRe,{abi:()=>ORe,bytecode:()=>MRe});var ORe=[{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],MRe="0x",HV={};we(HV,{abi:()=>PRe,bytecode:()=>kRe});var PRe=[{type:"function",name:"paused",inputs:[],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"Paused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"event",name:"Unpaused",inputs:[{name:"account",type:"address",indexed:!1,internalType:"address"}],anonymous:!1},{type:"error",name:"EnforcedPause",inputs:[]},{type:"error",name:"ExpectedPause",inputs:[]}],kRe="0x",NRe={};we(NRe,{abi:()=>RRe,bytecode:()=>DRe});var RRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowance_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"},{type:"function",name:"spentMap",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"amount",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"event",name:"IncreasedSpentMap",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"limit",type:"uint256",indexed:!1,internalType:"uint256"},{name:"spent",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],DRe="0x608060405234801561001057600080fd5b506105cd806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e33146100675780639dd5d9ab14610083578063a145832a146100bd578063b99deb0e146100d0578063d3eddcc514610067578063ed46336714610067575b600080fd5b6100816100753660046103a7565b50505050505050505050565b005b6100ab610091366004610474565b600060208181529281526040808220909352908152205481565b60405190815260200160405180910390f35b6100816100cb3660046103a7565b6100e3565b6100ab6100de36600461049e565b6102c5565b856100ef8160006102da565b6101405760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b6101518160006102da565b6101ab5760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610137565b5060006101b88d8d6102c5565b905060006101c689896102f1565b5050336000908152602081815260408083208c845290915281208054929450909250839183906101f79084906104e0565b92505081905590508281111561026c5760405162461bcd60e51b815260206004820152603460248201527f4e6174697665546f6b656e5472616e73666572416d6f756e74456e666f7263656044820152731c8e985b1b1bddd85b98d94b595e18d95959195960621b6064820152608401610137565b604080518481526020810183905289916001600160a01b0389169133917fc026e493323d526061a052b5dd562495120e2f648797a48be61966d3a6beec8d910160405180910390a4505050505050505050505050505050565b60006102d382840184610501565b9392505050565b6001600160f81b0319828116908216145b92915050565b6000803681610303601482878961051a565b61030c91610544565b60601c935061031f60346014878961051a565b61032891610579565b9250610337856034818961051a565b949793965094505050565b60008083601f84011261035457600080fd5b50813567ffffffffffffffff81111561036c57600080fd5b60208301915083602082850101111561038457600080fd5b9250929050565b80356001600160a01b03811681146103a257600080fd5b919050565b60008060008060008060008060008060e08b8d0312156103c657600080fd5b8a3567ffffffffffffffff808211156103de57600080fd5b6103ea8e838f01610342565b909c509a5060208d013591508082111561040357600080fd5b61040f8e838f01610342565b909a50985060408d0135975060608d013591508082111561042f57600080fd5b5061043c8d828e01610342565b90965094505060808b0135925061045560a08c0161038b565b915061046360c08c0161038b565b90509295989b9194979a5092959850565b6000806040838503121561048757600080fd5b6104908361038b565b946020939093013593505050565b600080602083850312156104b157600080fd5b823567ffffffffffffffff8111156104c857600080fd5b6104d485828601610342565b90969095509350505050565b808201808211156102eb57634e487b7160e01b600052601160045260246000fd5b60006020828403121561051357600080fd5b5035919050565b6000808585111561052a57600080fd5b8386111561053757600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156105715780818660140360031b1b83161692505b505092915050565b803560208310156102eb57600019602084900360031b1b169291505056fea2646970667358221220242bcbb545bdb30c0cc3054c27d7e861e0e03c97037d12e0a3a635b723f4c96064736f6c63430008170033",$Re={};we($Re,{abi:()=>LRe,bytecode:()=>BRe});var LRe=[],BRe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220d7aca7990ce9da4d7914667722de1ec02253803fb163d86029328ca9bb504b0164736f6c63430008170033",FRe={};we(FRe,{abi:()=>URe,bytecode:()=>jRe});var URe=[{type:"fallback",stateMutability:"nonpayable"}],jRe="0x608060405234801561001057600080fd5b5061022e806100206000396000f3fe608060405234801561001057600080fd5b50600036606060a0821461004057604080516000602082015201604051602081830303815290604052905061017b565b600061004f6020828587610186565b610058916101b0565b9050600061006a604060208688610186565b610073916101b0565b90506000610085606060408789610186565b61008e916101b0565b905060006100a060806060888a610186565b6100a9916101b0565b905060006100bb60a06080898b610186565b6100c4916101b0565b60405163a1f3128160e01b8152600481018790526024810186905260448101859052606481018490526084810182905290915073__$b8f96b288d4d0429e38b8ed50fd423070f$__9063a1f312819060a401602060405180830381865af4158015610133573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061015791906101cf565b60408051911515602083015201604051602081830303815290604052955050505050505b915050805190602001f35b6000808585111561019657600080fd5b838611156101a357600080fd5b5050820193919092039150565b803560208310156101c957600019602084900360031b1b165b92915050565b6000602082840312156101e157600080fd5b815180151581146101f157600080fd5b939250505056fea26469706673582212203dafaa4c8f34ad767d36775120cdf65742956a98b33a9913f2e11f858baf2d9e64736f6c63430008170033",HRe={};we(HRe,{abi:()=>zRe,bytecode:()=>qRe});var zRe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"targetContract_",type:"address",internalType:"address"}],stateMutability:"pure"},{type:"event",name:"OwnershipTransferEnforced",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"redeemer",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"newOwner",type:"address",indexed:!1,internalType:"address"}],anonymous:!1}],qRe="0x608060405234801561001057600080fd5b506106af806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a36600461049f565b50505050505050505050565b005b61007661008636600461049f565b6100ba565b61009e61009936600461056c565b6101e7565b6040516001600160a01b03909116815260200160405180910390f35b856100c6816000610252565b6101175760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b610128816000610252565b6101825760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b606482015260840161010e565b5060006101918d8d8a8a610269565b6040516001600160a01b038083168252919250879186169033907f0f026cada0b544ae1cc47ac006f1f4c3d7e94832af22aa0065351de49f9284d79060200160405180910390a450505050505050505050505050565b60006014821461023e5760405162461bcd60e51b815260206004820152602e602482015260008051602061065a83398151915260448201526d0c85ae8cae4dae65ad8cadccee8d60931b606482015260840161010e565b61024882846105ae565b60601c9392505050565b6001600160f81b0319828116908216145b92915050565b60008036600061027986866103e9565b929550935090915050602481146102db5760405162461bcd60e51b8152602060048201526032602482015260008051602061065a8339815191526044820152710c85acaf0cac6eae8d2dedc5ad8cadccee8d60731b606482015260840161010e565b60006102ea60048284866105e3565b6102f39161060d565b90506001600160e01b0319811663f2fde38b60e01b146103545760405162461bcd60e51b8152602060048201526028602482015260008051602061065a833981519152604482015267190b5b595d1a1bd960c21b606482015260840161010e565b60006103608a8a6101e7565b9050846001600160a01b0316816001600160a01b0316146103c45760405162461bcd60e51b815260206004820152602a602482015260008051602061065a833981519152604482015269190b58dbdb9d1c9858dd60b21b606482015260840161010e565b6103d26024600485876105e3565b6103db9161063b565b9a9950505050505050505050565b60008036816103fb60148287896105e3565b610404916105ae565b60601c93506104176034601487896105e3565b6104209161063b565b925061042f85603481896105e3565b949793965094505050565b60008083601f84011261044c57600080fd5b50813567ffffffffffffffff81111561046457600080fd5b60208301915083602082850101111561047c57600080fd5b9250929050565b80356001600160a01b038116811461049a57600080fd5b919050565b60008060008060008060008060008060e08b8d0312156104be57600080fd5b8a3567ffffffffffffffff808211156104d657600080fd5b6104e28e838f0161043a565b909c509a5060208d01359150808211156104fb57600080fd5b6105078e838f0161043a565b909a50985060408d0135975060608d013591508082111561052757600080fd5b506105348d828e0161043a565b90965094505060808b0135925061054d60a08c01610483565b915061055b60c08c01610483565b90509295989b9194979a5092959850565b6000806020838503121561057f57600080fd5b823567ffffffffffffffff81111561059657600080fd5b6105a28582860161043a565b90969095509350505050565b6bffffffffffffffffffffffff1981358181169160148510156105db5780818660140360031b1b83161692505b505092915050565b600080858511156105f357600080fd5b8386111561060057600080fd5b5050820193919092039150565b6001600160e01b031981358181169160048510156105db5760049490940360031b84901b1690921692915050565b8035602083101561026357600019602084900360031b1b169291505056fe4f776e6572736869705472616e73666572456e666f726365723a696e76616c69a2646970667358221220ca5ae6d7f1b90ba5d22d1aa6d07431cba5451fcdcfda2c53ba5014e9bf6c30cc64736f6c63430008170033",KRe={};we(KRe,{abi:()=>VRe,bytecode:()=>WRe});var VRe=[{type:"error",name:"SafeERC20FailedDecreaseAllowance",inputs:[{name:"spender",type:"address",internalType:"address"},{name:"currentAllowance",type:"uint256",internalType:"uint256"},{name:"requestedDecrease",type:"uint256",internalType:"uint256"}]},{type:"error",name:"SafeERC20FailedOperation",inputs:[{name:"token",type:"address",internalType:"address"}]}],WRe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122088a0aa059cfc49869da70b79266115a887b85b6bf4a5e84a430f64ac0e13ee7c64736f6c63430008170033",GRe={};we(GRe,{abi:()=>YRe,bytecode:()=>JRe});var YRe=[{type:"function",name:"createSender",inputs:[{name:"initCode",type:"bytes",internalType:"bytes"}],outputs:[{name:"sender",type:"address",internalType:"address"}],stateMutability:"nonpayable"}],JRe="0x608060405234801561000f575f80fd5b506101e28061001d5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063570e1a361461002d575b5f80fd5b61004061003b3660046100e4565b61005c565b6040516001600160a01b03909116815260200160405180910390f35b5f8061006b6014828587610150565b61007491610177565b60601c90505f6100878460148188610150565b8080601f0160208091040260200160405190810160405280939291908181526020018383808284375f92018290525084519495509360209350849250905082850182875af190505f519350806100db575f93505b50505092915050565b5f80602083850312156100f5575f80fd5b823567ffffffffffffffff8082111561010c575f80fd5b818501915085601f83011261011f575f80fd5b81358181111561012d575f80fd5b86602082850101111561013e575f80fd5b60209290920196919550909350505050565b5f808585111561015e575f80fd5b8386111561016a575f80fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156101a45780818660140360031b1b83161692505b50509291505056fea264697066735822122078c1aaa9f040f8c523cf2b642dd06415593eec30d2e75021458af7e0c704e6fb64736f6c63430008170033",ZRe={};we(ZRe,{abi:()=>XRe,bytecode:()=>QRe});var XRe=[{type:"error",name:"ReentrancyGuardReentrantCall",inputs:[]}],QRe="0x",eDe={};we(eDe,{abi:()=>tDe,bytecode:()=>nDe});var tDe=[{type:"error",name:"SafeCastOverflowedIntDowncast",inputs:[{name:"bits",type:"uint8",internalType:"uint8"},{name:"value",type:"int256",internalType:"int256"}]},{type:"error",name:"SafeCastOverflowedIntToUint",inputs:[{name:"value",type:"int256",internalType:"int256"}]},{type:"error",name:"SafeCastOverflowedUintDowncast",inputs:[{name:"bits",type:"uint8",internalType:"uint8"},{name:"value",type:"uint256",internalType:"uint256"}]},{type:"error",name:"SafeCastOverflowedUintToInt",inputs:[{name:"value",type:"uint256",internalType:"uint256"}]}],nDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122061ebdeb3510df44a7d9170525bd3fc61f93c656e67274c3f3b4aa33ec92dc13864736f6c63430008170033",rDe={};we(rDe,{abi:()=>aDe,bytecode:()=>iDe});var aDe=[],iDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212203d65f4321e18e96a0e0a3e6a8d19e56735de368638fd48b184c923bf46a5170f64736f6c63430008170033",sDe={};we(sDe,{abi:()=>oDe,bytecode:()=>cDe});var oDe=[{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]}],cDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122088910c5f67a05f7b05fc7425f62972b57385080dd0be1e4dea1ea74435bca86f64736f6c63430008170033",sm={};we(sm,{abi:()=>dDe,bytecode:()=>lDe});var dDe=[{type:"function",name:"computeAddress",inputs:[{name:"_bytecodeHash",type:"bytes32",internalType:"bytes32"},{name:"_salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"addr_",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"deploy",inputs:[{name:"_bytecode",type:"bytes",internalType:"bytes"},{name:"_salt",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"addr_",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"event",name:"Deployed",inputs:[{name:"addr",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"Create2EmptyBytecode",inputs:[]},{type:"error",name:"Create2FailedDeployment",inputs:[]},{type:"error",name:"Create2InsufficientBalance",inputs:[{name:"balance",type:"uint256",internalType:"uint256"},{name:"needed",type:"uint256",internalType:"uint256"}]},{type:"error",name:"SimpleFactoryEmptyContract",inputs:[{name:"deployed",type:"address",internalType:"address"}]}],lDe="0x608060405234801561001057600080fd5b506102ef806100206000396000f3fe608060405234801561001057600080fd5b50600436106100365760003560e01c8063481286e61461003b5780634af63f021461006a575b600080fd5b61004e6100493660046101cc565b61007d565b6040516001600160a01b03909116815260200160405180910390f35b61004e610078366004610204565b610090565b60006100898284610115565b9392505050565b600061009e60008385610122565b9050806001600160a01b03163b6000036100db576040516301e3495560e61b81526001600160a01b03821660048201526024015b60405180910390fd5b6040516001600160a01b038216907ff40fcec21964ffb566044d083b4073f29f7f7929110ea19e1b3ebe375d89055e90600090a292915050565b60006100898383306101a2565b60008347101561014e5760405163392efb2b60e21b8152476004820152602481018590526044016100d2565b815160000361017057604051631328927760e21b815260040160405180910390fd5b8282516020840186f590506001600160a01b03811661008957604051633a0ba96160e11b815260040160405180910390fd5b6000604051836040820152846020820152828152600b8101905060ff815360559020949350505050565b600080604083850312156101df57600080fd5b50508035926020909101359150565b634e487b7160e01b600052604160045260246000fd5b6000806040838503121561021757600080fd5b823567ffffffffffffffff8082111561022f57600080fd5b818501915085601f83011261024357600080fd5b813581811115610255576102556101ee565b604051601f8201601f19908116603f0116810190838211818310171561027d5761027d6101ee565b8160405282815288602084870101111561029657600080fd5b82602086016020830137600060209382018401529896909101359650505050505056fea264697066735822122060b446de0182f6cf23546703f0e9eb0c1da6c4f00138f5d151474f865157cd3164736f6c63430008170033",uDe={};we(uDe,{abi:()=>fDe,bytecode:()=>pDe});var fDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"_redeemer",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"allowedRedeemers_",type:"address[]",internalType:"address[]"}],stateMutability:"pure"}],pDe="0x608060405234801561001057600080fd5b5061064b806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a3660046103ae565b50505050505050505050565b005b6100766100863660046103ae565b6100b4565b61009e61009936600461047b565b6101e8565b6040516100ab91906104bd565b60405180910390f35b85600881901b6100c5816000610332565b6101245760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b5060006101318c8c6101e8565b805190915060005b81811015610183578281815181106101535761015361050a565b60200260200101516001600160a01b0316856001600160a01b03160361017b575050506101db565b600101610139565b5060405162461bcd60e51b815260206004820152602660248201527f52656465656d6572456e666f726365723a756e617574686f72697a65642d72656044820152653232b2b6b2b960d11b606482015260840161011b565b5050505050505050505050565b606060008280158015906102045750610202601482610536565b155b61025e5760405162461bcd60e51b815260206004820152602560248201527f52656465656d6572456e666f726365723a696e76616c69642d7465726d732d6c6044820152640cadccee8d60db1b606482015260840161011b565b610269601482610560565b67ffffffffffffffff81111561028157610281610574565b6040519080825280602002602001820160405280156102aa578160200160208202803683370190505b50925060005b81811015610329578581866102c682601461058a565b926102d39392919061059d565b6102dc916105c7565b60601c8484815181106102f1576102f161050a565b6001600160a01b039092166020928302919091019091015282610313816105fc565b9350610322905060148261058a565b90506102b0565b50505092915050565b6001600160f81b0319828116908216145b92915050565b60008083601f84011261035b57600080fd5b50813567ffffffffffffffff81111561037357600080fd5b60208301915083602082850101111561038b57600080fd5b9250929050565b80356001600160a01b03811681146103a957600080fd5b919050565b60008060008060008060008060008060e08b8d0312156103cd57600080fd5b8a3567ffffffffffffffff808211156103e557600080fd5b6103f18e838f01610349565b909c509a5060208d013591508082111561040a57600080fd5b6104168e838f01610349565b909a50985060408d0135975060608d013591508082111561043657600080fd5b506104438d828e01610349565b90965094505060808b0135925061045c60a08c01610392565b915061046a60c08c01610392565b90509295989b9194979a5092959850565b6000806020838503121561048e57600080fd5b823567ffffffffffffffff8111156104a557600080fd5b6104b185828601610349565b90969095509350505050565b6020808252825182820181905260009190848201906040850190845b818110156104fe5783516001600160a01b0316835292840192918401916001016104d9565b50909695505050505050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601260045260246000fd5b60008261054557610545610520565b500690565b634e487b7160e01b600052601160045260246000fd5b60008261056f5761056f610520565b500490565b634e487b7160e01b600052604160045260246000fd5b808201808211156103435761034361054a565b600080858511156105ad57600080fd5b838611156105ba57600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156105f45780818660140360031b1b83161692505b505092915050565b60006001820161060e5761060e61054a565b506001019056fea264697066735822122021c89a0ebcdb2523c453552212243b747d81b7c16f2f3e22d20bb9692240f3a364736f6c63430008170033",hDe={};we(hDe,{abi:()=>bDe,bytecode:()=>yDe});var bDe=[],yDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea26469706673582212209bac814741dd376ccf59547680acabccb0310545d980db81a1b4c6c7f17cdbc164736f6c63430008170033",mDe={};we(mDe,{abi:()=>gDe,bytecode:()=>wDe});var gDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"_delegationHash",type:"bytes32",internalType:"bytes32"},{name:"_delegator",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"termsData_",type:"tuple",internalType:"struct SpecificActionERC20TransferBatchEnforcer.TermsData",components:[{name:"tokenAddress",type:"address",internalType:"address"},{name:"recipient",type:"address",internalType:"address"},{name:"amount",type:"uint256",internalType:"uint256"},{name:"firstTarget",type:"address",internalType:"address"},{name:"firstCalldata",type:"bytes",internalType:"bytes"}]}],stateMutability:"pure"},{type:"function",name:"usedDelegations",inputs:[{name:"delegationManager",type:"address",internalType:"address"},{name:"delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"used",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"event",name:"DelegationExecuted",inputs:[{name:"delegationManager",type:"address",indexed:!0,internalType:"address"},{name:"delegationHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"delegator",type:"address",indexed:!0,internalType:"address"}],anonymous:!1}],wDe="0x608060405234801561001057600080fd5b50610ccf806100206000396000f3fe608060405234801561001057600080fd5b50600436106100625760003560e01c8063414c3e3314610067578063a145832a14610083578063b99deb0e14610096578063b9cf5249146100bf578063d3eddcc514610067578063ed46336714610067575b600080fd5b610081610075366004610958565b50505050505050505050565b005b610081610091366004610958565b6100fa565b6100a96100a4366004610a25565b6106ce565b6040516100b69190610a67565b60405180910390f35b6100ea6100cd366004610af5565b600060208181529281526040808220909352908152205460ff1681565b60405190151581526020016100b6565b8561010981600160f81b610843565b61015a5760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61016b816000610843565b6101c55760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610151565b503360009081526020818152604080832088845290915290205460ff1615610245576040805162461bcd60e51b8152602060048201526024810191909152600080516020610c7a83398151915260448201527f456e666f726365723a64656c65676174696f6e2d616c72656164792d757365646064820152608401610151565b336000908152602081815260408083208884529091528120805460ff191660011790553690610274898961085a565b9092509050600281146102dd5760405162461bcd60e51b815260206004820152603b6024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d62617463682d73697a6500000000006064820152608401610151565b60006102e98f8f6106ce565b905080606001516001600160a01b03168383600081811061030c5761030c610b1f565b905060200281019061031e9190610b35565b61032c906020810190610b55565b6001600160a01b031614158061036957508282600081811061035057610350610b1f565b90506020028101906103629190610b35565b6020013515155b806103c757508060800151805190602001208383600081811061038e5761038e610b1f565b90506020028101906103a09190610b35565b6103ae906040810190610b77565b6040516103bc929190610bbe565b604051809103902014155b156104335760405162461bcd60e51b81526020600482015260426024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d66697273742d7472616e736163746960648201526137b760f11b608482015260a401610151565b80516001600160a01b03168383600181811061045157610451610b1f565b90506020028101906104639190610b35565b610471906020810190610b55565b6001600160a01b03161415806104ae57508282600181811061049557610495610b1f565b90506020028101906104a79190610b35565b6020013515155b806104ee5750828260018181106104c7576104c7610b1f565b90506020028101906104d99190610b35565b6104e7906040810190610b77565b9050604414155b80610554575063a9059cbb60e01b8383600181811061050f5761050f610b1f565b90506020028101906105219190610b35565b61052f906040810190610b77565b61053e91600491600091610bce565b61054791610bf8565b6001600160e01b03191614155b806105bf575080602001516001600160a01b03168383600181811061057b5761057b610b1f565b905060200281019061058d9190610b35565b61059b906040810190610b77565b6105aa91602491600491610bce565b6105b391610c28565b6001600160a01b031614155b8061061857508060400151838360018181106105dd576105dd610b1f565b90506020028101906105ef9190610b35565b6105fd906040810190610b77565b61060c91604491602491610bce565b61061591610c28565b14155b156106855760405162461bcd60e51b81526020600482015260436024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d7365636f6e642d7472616e7361637460648201526234b7b760e91b608482015260a401610151565b6040516001600160a01b03881690899033907f76f83a16f9924b51c0c3ad67a44af3e517fbdec68ffa3729776df2ac0f03144090600090a4505050505050505050505050505050565b61071b6040518060a0016040528060006001600160a01b0316815260200160006001600160a01b031681526020016000815260200160006001600160a01b03168152602001606081525090565b605c8210156107805760405162461bcd60e51b815260206004820152603d6024820152600080516020610c7a83398151915260448201527f456e666f726365723a696e76616c69642d7465726d732d6c656e6774680000006064820152608401610151565b61078e601460008486610bce565b61079791610c46565b60601c81526107aa602860148486610bce565b6107b391610c46565b60601c60208201526107c9604860288486610bce565b6107d291610c28565b60408201526107e5605c60488486610bce565b6107ee91610c46565b606090811c9082015261080482605c8186610bce565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250505050608082015292915050565b6001600160f81b0319828116908216145b92915050565b366000833580850160208587010360208201945081359350808460051b8301118360401c17156108925763ba597e7e6000526004601cfd5b83156108e9578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c17156108e05763ba597e7e6000526004601cfd5b5050508261089c575b5050509250929050565b60008083601f84011261090557600080fd5b50813567ffffffffffffffff81111561091d57600080fd5b60208301915083602082850101111561093557600080fd5b9250929050565b80356001600160a01b038116811461095357600080fd5b919050565b60008060008060008060008060008060e08b8d03121561097757600080fd5b8a3567ffffffffffffffff8082111561098f57600080fd5b61099b8e838f016108f3565b909c509a5060208d01359150808211156109b457600080fd5b6109c08e838f016108f3565b909a50985060408d0135975060608d01359150808211156109e057600080fd5b506109ed8d828e016108f3565b90965094505060808b01359250610a0660a08c0161093c565b9150610a1460c08c0161093c565b90509295989b9194979a5092959850565b60008060208385031215610a3857600080fd5b823567ffffffffffffffff811115610a4f57600080fd5b610a5b858286016108f3565b90969095509350505050565b6000602080835260018060a01b038085511660208501528060208601511660408501526040850151606085015280606086015116608085015250608084015160a08085015280518060c086015260005b81811015610ad35782810184015186820160e001528301610ab7565b50600060e0828701015260e0601f19601f830116860101935050505092915050565b60008060408385031215610b0857600080fd5b610b118361093c565b946020939093013593505050565b634e487b7160e01b600052603260045260246000fd5b60008235605e19833603018112610b4b57600080fd5b9190910192915050565b600060208284031215610b6757600080fd5b610b708261093c565b9392505050565b6000808335601e19843603018112610b8e57600080fd5b83018035915067ffffffffffffffff821115610ba957600080fd5b60200191503681900382131561093557600080fd5b8183823760009101908152919050565b60008085851115610bde57600080fd5b83861115610beb57600080fd5b5050820193919092039150565b6001600160e01b03198135818116916004851015610c205780818660040360031b1b83161692505b505092915050565b8035602083101561085457600019602084900360031b1b1692915050565b6bffffffffffffffffffffffff198135818116916014851015610c205760149490940360031b84901b169092169291505056fe5370656369666963416374696f6e45524332305472616e736665724261746368a2646970667358221220e8d1de6d5cca88243b7e7a1d3b3a1ae6b1a75dad78f305486212fafaf9e3ca5264736f6c63430008170033",vDe={};we(vDe,{abi:()=>EDe,bytecode:()=>_De});var EDe=[{type:"receive",stateMutability:"payable"},{type:"function",name:"addStake",inputs:[{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"depositTo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[],stateMutability:"payable"},{type:"function",name:"deposits",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}],stateMutability:"view"},{type:"function",name:"getDepositInfo",inputs:[{name:"account",type:"address",internalType:"address"}],outputs:[{name:"info",type:"tuple",internalType:"struct IStakeManager.DepositInfo",components:[{name:"deposit",type:"uint256",internalType:"uint256"},{name:"staked",type:"bool",internalType:"bool"},{name:"stake",type:"uint112",internalType:"uint112"},{name:"unstakeDelaySec",type:"uint32",internalType:"uint32"},{name:"withdrawTime",type:"uint48",internalType:"uint48"}]}],stateMutability:"view"},{type:"function",name:"unlockStake",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawStake",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"withdrawTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Deposited",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalDeposit",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeLocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"totalStaked",type:"uint256",indexed:!1,internalType:"uint256"},{name:"unstakeDelaySec",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeUnlocked",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawTime",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"StakeWithdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Withdrawn",inputs:[{name:"account",type:"address",indexed:!0,internalType:"address"},{name:"withdrawAddress",type:"address",indexed:!1,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],_De="0x",TDe={};we(TDe,{abi:()=>xDe,bytecode:()=>SDe});var xDe=[{type:"error",name:"StringsInsufficientHexLength",inputs:[{name:"value",type:"uint256",internalType:"uint256"},{name:"length",type:"uint256",internalType:"uint256"}]}],SDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220ce1bfc0cd5aac1e748b751339a93cc065f5fd20fd73be10a7844adf26543eb8164736f6c63430008170033",ADe={};we(ADe,{abi:()=>CDe,bytecode:()=>IDe});var CDe=[],IDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122089188054053227534294662d666312081d2f72553264bdfc0ce4a353c15e0f6364736f6c63430008170033",ODe={};we(ODe,{abi:()=>MDe,bytecode:()=>PDe});var MDe=[{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"}],PDe="0x",kDe={};we(kDe,{abi:()=>NDe,bytecode:()=>RDe});var NDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCallData",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"pure"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"value_",type:"uint256",internalType:"uint256"}],stateMutability:"pure"}],RDe="0x608060405234801561001057600080fd5b506104f8806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a366004610336565b50505050505050505050565b005b610076610086366004610336565b6100b0565b61009e610099366004610403565b6101f8565b60405190815260200160405180910390f35b856100bc816000610269565b61010d5760405162461bcd60e51b815260206004820181905260248201527f436176656174456e666f726365723a696e76616c69642d63616c6c2d7479706560448201526064015b60405180910390fd5b86600881901b61011e816000610269565b6101785760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b6064820152608401610104565b5060006101858888610280565b505091505060006101968e8e6101f8565b9050808211156101e85760405162461bcd60e51b815260206004820152601f60248201527f56616c75654c7465456e666f726365723a76616c75652d746f6f2d68696768006044820152606401610104565b5050505050505050505050505050565b6000602082146102585760405162461bcd60e51b815260206004820152602560248201527f56616c75654c7465456e666f726365723a696e76616c69642d7465726d732d6c6044820152640cadccee8d60db1b6064820152608401610104565b6102628284610445565b9392505050565b6001600160f81b0319828116908216145b92915050565b60008036816102926014828789610463565b61029b9161048d565b60601c93506102ae603460148789610463565b6102b791610445565b92506102c68560348189610463565b949793965094505050565b60008083601f8401126102e357600080fd5b50813567ffffffffffffffff8111156102fb57600080fd5b60208301915083602082850101111561031357600080fd5b9250929050565b80356001600160a01b038116811461033157600080fd5b919050565b60008060008060008060008060008060e08b8d03121561035557600080fd5b8a3567ffffffffffffffff8082111561036d57600080fd5b6103798e838f016102d1565b909c509a5060208d013591508082111561039257600080fd5b61039e8e838f016102d1565b909a50985060408d0135975060608d01359150808211156103be57600080fd5b506103cb8d828e016102d1565b90965094505060808b013592506103e460a08c0161031a565b91506103f260c08c0161031a565b90509295989b9194979a5092959850565b6000806020838503121561041657600080fd5b823567ffffffffffffffff81111561042d57600080fd5b610439858286016102d1565b90969095509350505050565b8035602083101561027a57600019602084900360031b1b1692915050565b6000808585111561047357600080fd5b8386111561048057600080fd5b5050820193919092039150565b6bffffffffffffffffffffffff1981358181169160148510156104ba5780818660140360031b1b83161692505b50509291505056fea26469706673582212201b32f956e1bfeecade9436bbfc83066c0610b5679c49ae7d06d58eaeb4e24ff564736f6c63430008170033",DDe={};we(DDe,{abi:()=>$De,bytecode:()=>LDe});var $De=[{type:"function",name:"PAYMASTER_DATA_OFFSET",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PAYMASTER_POSTOP_GAS_OFFSET",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"PAYMASTER_VALIDATION_GAS_OFFSET",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"}],LDe="0x60a7610034600b8282823980515f1a60731461002857634e487b7160e01b5f525f60045260245ffd5b305f52607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106046575f3560e01c806325093e1b14604a578063b29a8ff4146063578063ede3150214606a575b5f80fd5b6051602481565b60405190815260200160405180910390f35b6051601481565b605160348156fea2646970667358221220e3e47e9c438ff94c86dca42d7dcd69637923bbba71e55fc90068fd2fbb4991dc64736f6c63430008170033",BDe={};we(BDe,{abi:()=>FDe,bytecode:()=>UDe});var FDe=[{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]}],UDe="0x",jDe={};we(jDe,{abi:()=>HDe,bytecode:()=>zDe});var HDe=[{type:"function",name:"afterAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"afterHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeAllHook",inputs:[{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"beforeHook",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"},{name:"",type:"bytes",internalType:"bytes"},{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"",type:"bytes",internalType:"bytes"},{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"}],outputs:[],stateMutability:"view"},{type:"function",name:"getTermsInfo",inputs:[{name:"_terms",type:"bytes",internalType:"bytes"}],outputs:[{name:"timestampAfterThreshold_",type:"uint128",internalType:"uint128"},{name:"timestampBeforeThreshold_",type:"uint128",internalType:"uint128"}],stateMutability:"pure"}],zDe="0x608060405234801561001057600080fd5b506104e7806100206000396000f3fe608060405234801561001057600080fd5b50600436106100575760003560e01c8063414c3e331461005c578063a145832a14610078578063b99deb0e1461008b578063d3eddcc51461005c578063ed4633671461005c575b600080fd5b61007661006a36600461033f565b50505050505050505050565b005b61007661008636600461033f565b6100c2565b61009e61009936600461040c565b61023a565b604080516001600160801b0393841681529290911660208301520160405180910390f35b85600881901b6001600160f81b03198116156101335760405162461bcd60e51b815260206004820152602560248201527f436176656174456e666f726365723a696e76616c69642d657865637574696f6e6044820152642d7479706560d81b60648201526084015b60405180910390fd5b506000806101418d8d61023a565b90925090506001600160801b038216156101b857816001600160801b031642116101b85760405162461bcd60e51b815260206004820152602260248201527f54696d657374616d70456e666f726365723a6561726c792d64656c656761746960448201526137b760f11b606482015260840161012a565b6001600160801b0381161561022b57806001600160801b0316421061022b5760405162461bcd60e51b8152602060048201526024808201527f54696d657374616d70456e666f726365723a657870697265642d64656c6567616044820152633a34b7b760e11b606482015260840161012a565b50505050505050505050505050565b6000806020831461029c5760405162461bcd60e51b815260206004820152602660248201527f54696d657374616d70456e666f726365723a696e76616c69642d7465726d732d6044820152650d8cadccee8d60d31b606482015260840161012a565b6102a9836010818761044e565b6102b291610478565b60801c90506102c560106000858761044e565b6102ce91610478565b60801c91509250929050565b60008083601f8401126102ec57600080fd5b50813567ffffffffffffffff81111561030457600080fd5b60208301915083602082850101111561031c57600080fd5b9250929050565b80356001600160a01b038116811461033a57600080fd5b919050565b60008060008060008060008060008060e08b8d03121561035e57600080fd5b8a3567ffffffffffffffff8082111561037657600080fd5b6103828e838f016102da565b909c509a5060208d013591508082111561039b57600080fd5b6103a78e838f016102da565b909a50985060408d0135975060608d01359150808211156103c757600080fd5b506103d48d828e016102da565b90965094505060808b013592506103ed60a08c01610323565b91506103fb60c08c01610323565b90509295989b9194979a5092959850565b6000806020838503121561041f57600080fd5b823567ffffffffffffffff81111561043657600080fd5b610442858286016102da565b90969095509350505050565b6000808585111561045e57600080fd5b8386111561046b57600080fd5b5050820193919092039150565b6fffffffffffffffffffffffffffffffff1981358181169160108510156104a95780818660100360031b1b83161692505b50509291505056fea2646970667358221220493f1dd46bf21857fc13b6e41e6f29c1c53fbb939ca84fcd1536c7cf1000d18064736f6c63430008170033",qDe={};we(qDe,{abi:()=>KDe,bytecode:()=>VDe});var KDe=[{type:"fallback",stateMutability:"payable"}],VDe="0x",WDe={};we(WDe,{abi:()=>GDe,bytecode:()=>YDe});var GDe=[],YDe="0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea264697066735822122034801a6b4534dfc9cfe9c8b31e018c344c3329b6bf478762f2158ce5781d2b7a64736f6c63430008170033",Yn={};we(Yn,{abi:()=>JDe,bytecode:()=>ZDe});var JDe=[{type:"constructor",inputs:[{name:"_delegationManager",type:"address",internalType:"contract IDelegationManager"},{name:"_entryPoint",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"MAX_NUMBER_OF_SIGNERS",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"PACKED_USER_OP_TYPEHASH",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"addSigner",inputs:[{name:"_newSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"delegationManager",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IDelegationManager"}],stateMutability:"view"},{type:"function",name:"disableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"eip712Domain",inputs:[],outputs:[{name:"fields",type:"bytes1",internalType:"bytes1"},{name:"name",type:"string",internalType:"string"},{name:"version",type:"string",internalType:"string"},{name:"chainId",type:"uint256",internalType:"uint256"},{name:"verifyingContract",type:"address",internalType:"address"},{name:"salt",type:"bytes32",internalType:"bytes32"},{name:"extensions",type:"uint256[]",internalType:"uint256[]"}],stateMutability:"view"},{type:"function",name:"enableDelegation",inputs:[{name:"_delegation",type:"tuple",internalType:"struct Delegation",components:[{name:"delegate",type:"address",internalType:"address"},{name:"delegator",type:"address",internalType:"address"},{name:"authority",type:"bytes32",internalType:"bytes32"},{name:"caveats",type:"tuple[]",internalType:"struct Caveat[]",components:[{name:"enforcer",type:"address",internalType:"address"},{name:"terms",type:"bytes",internalType:"bytes"},{name:"args",type:"bytes",internalType:"bytes"}]},{name:"salt",type:"uint256",internalType:"uint256"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_execution",type:"tuple",internalType:"struct Execution",components:[{name:"target",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"callData",type:"bytes",internalType:"bytes"}]}],outputs:[],stateMutability:"payable"},{type:"function",name:"execute",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"executeFromExecutor",inputs:[{name:"_mode",type:"bytes32",internalType:"ModeCode"},{name:"_executionCalldata",type:"bytes",internalType:"bytes"}],outputs:[{name:"returnData_",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"payable"},{type:"function",name:"getDeposit",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getDomainHash",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getImplementation",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getInitializedVersion",inputs:[],outputs:[{name:"",type:"uint64",internalType:"uint64"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[{name:"_key",type:"uint192",internalType:"uint192"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getPackedUserOperationTypedDataHash",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getSigners",inputs:[],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"getSignersCount",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getThreshold",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_signers",type:"address[]",internalType:"address[]"},{name:"_threshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isDelegationDisabled",inputs:[{name:"_delegationHash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isSigner",inputs:[{name:"_addr",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue_",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"redeemDelegations",inputs:[{name:"_permissionContexts",type:"bytes[]",internalType:"bytes[]"},{name:"_modes",type:"bytes32[]",internalType:"ModeCode[]"},{name:"_executionCallDatas",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"reinitialize",inputs:[{name:"_version",type:"uint64",internalType:"uint64"},{name:"_signers",type:"address[]",internalType:"address[]"},{name:"_threshold",type:"uint256",internalType:"uint256"},{name:"_clearSigners",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"removeSigner",inputs:[{name:"_oldSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"replaceSigner",inputs:[{name:"_oldSigner",type:"address",internalType:"address"},{name:"_newSigner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"_interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"updateMultiSigParameters",inputs:[{name:"_signers",type:"address[]",internalType:"address[]"},{name:"_threshold",type:"uint256",internalType:"uint256"},{name:"_clearSigners",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"updateThreshold",inputs:[{name:"_threshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"upgradeToAndCallAndRetainStorage",inputs:[{name:"_newImplementation",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"_userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"",type:"bytes32",internalType:"bytes32"},{name:"_missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"withdrawDeposit",inputs:[{name:"_withdrawAddress",type:"address",internalType:"address payable"},{name:"_withdrawAmount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AddedSigner",inputs:[{name:"signer",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ClearedStorage",inputs:[],anonymous:!1},{type:"event",name:"EIP712DomainChanged",inputs:[],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"RemovedSigner",inputs:[{name:"signer",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ReplacedSigner",inputs:[{name:"oldSigner",type:"address",indexed:!0,internalType:"address"},{name:"newSigner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SentPrefund",inputs:[{name:"sender",type:"address",indexed:!0,internalType:"address"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"},{name:"success",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SetDelegationManager",inputs:[{name:"newDelegationManager",type:"address",indexed:!0,internalType:"contract IDelegationManager"}],anonymous:!1},{type:"event",name:"SetEntryPoint",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"}],anonymous:!1},{type:"event",name:"TryExecuteUnsuccessful",inputs:[{name:"batchExecutionindex",type:"uint256",indexed:!1,internalType:"uint256"},{name:"result",type:"bytes",indexed:!1,internalType:"bytes"}],anonymous:!1},{type:"event",name:"UpdatedThreshold",inputs:[{name:"threshold",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"AlreadyASigner",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"ExecutionFailed",inputs:[]},{type:"error",name:"FailedInnerCall",inputs:[]},{type:"error",name:"InsufficientSigners",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"InvalidShortString",inputs:[]},{type:"error",name:"InvalidSignerAddress",inputs:[]},{type:"error",name:"InvalidThreshold",inputs:[]},{type:"error",name:"NotASigner",inputs:[]},{type:"error",name:"NotDelegationManager",inputs:[]},{type:"error",name:"NotEntryPoint",inputs:[]},{type:"error",name:"NotEntryPointOrSelf",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotSelf",inputs:[]},{type:"error",name:"StringTooLong",inputs:[{name:"str",type:"string",internalType:"string"}]},{type:"error",name:"TooManySigners",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"UnsupportedCallType",inputs:[{name:"callType",type:"bytes1",internalType:"CallType"}]},{type:"error",name:"UnsupportedExecType",inputs:[{name:"execType",type:"bytes1",internalType:"ExecType"}]}],ZDe="0x6101c0604052306080523480156200001657600080fd5b506040516200492838038062004928833981016040819052620000399162000392565b81816040518060400160405280601181526020017026bab63a34a9b4b3a232b632a3b0ba37b960791b815250604051806040016040528060018152602001603160f81b8152508181620000976000836200021f60201b90919060201c565b61014052620000a88160016200021f565b61016052815160208084019190912061010052815190820120610120524660c052620001386101005161012051604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201529081019290925260608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b60a05250503060e0526200014b62000258565b6001600160a01b038085166101808190529084166101a0526040517fb2e8eb88b584ae71ef4e854c10847f4d39bd93e52599f147bfb4dcc8de52014d90600090a26040516001600160a01b038416907fee8699dc0e27105da2653bdba54be0edcaadc3e33890a3ad705517ffe9bf0a9990600090a2505050506000620001d66200030c60201b60201c565b600019600282018190556040519081529091507f78c34957a47c9ef62a6f6f2f8720f71e2394a6438100e7e20d139c3cbe774d039060200160405180910390a1505050620005ba565b60006020835110156200023f57620002378362000330565b905062000252565b816200024c848262000478565b5060ff90505b92915050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff1615620002a95760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b0390811614620003095780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b7fb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c0090565b600080829050601f8151111562000367578260405163305a27a960e01b81526004016200035e919062000544565b60405180910390fd5b8051620003748262000595565b179392505050565b6001600160a01b03811681146200030957600080fd5b60008060408385031215620003a657600080fd5b8251620003b3816200037c565b6020840151909250620003c6816200037c565b809150509250929050565b634e487b7160e01b600052604160045260246000fd5b600181811c90821680620003fc57607f821691505b6020821081036200041d57634e487b7160e01b600052602260045260246000fd5b50919050565b601f82111562000473576000816000526020600020601f850160051c810160208610156200044e5750805b601f850160051c820191505b818110156200046f578281556001016200045a565b5050505b505050565b81516001600160401b03811115620004945762000494620003d1565b620004ac81620004a58454620003e7565b8462000423565b602080601f831160018114620004e45760008415620004cb5750858301515b600019600386901b1c1916600185901b1785556200046f565b600085815260208120601f198616915b828110156200051557888601518255948401946001909101908401620004f4565b5085821015620005345787850151600019600388901b60f8161c191681555b5050505050600190811b01905550565b60006020808352835180602085015260005b81811015620005745785810183015185820160400152820162000556565b506000604082860101526040601f19601f8301168501019250505092915050565b805160208083015191908110156200041d5760001960209190910360031b1b16919050565b60805160a05160c05160e05161010051610120516101405161016051610180516101a051614235620006f3600039600081816106d8015281816109cd01528181610c2d01528181610cb701528181610d3501528181610e9901528181610f4e01528181610fd90152818161115e0152818161124e015281816113010152818161137301528181611523015281816115a20152818161169d0152818161195501528181611a4b01528181611c6101528181611e64015281816120da0152612d0d01526000818161084a01528181610d9801528181610e1b01528181610efc0152818161160501526116e1015260006129970152600061296a015260006122be01526000612296015260006121f10152600061221b0152600061224501526000818161214801528181612171015261267101526142356000f3fe6080604052600436106102815760003560e01c806394cf795e1161014f578063cef6d209116100c1578063e9ae5c531161007a578063e9ae5c5314610825578063ea4d3c9b14610838578063eb12d61e1461086c578063ed8101b51461088c578063f23a6e61146108ac578063ffa1ad74146108cc57600080fd5b8063cef6d2091461075c578063d087d2881461077c578063d691c96414610791578063d7d7442f146107b1578063e3d9109f146107d1578063e75235b8146107f157600080fd5b8063acb8cc4911610113578063acb8cc4914610668578063ad3cb1cc14610695578063b0d691fe146106c6578063b3c65015146106fa578063bc197c8114610727578063c399ec881461074757600080fd5b806394cf795e1461059a578063a0c1deb4146105bc578063a24c8f32146105de578063a3f4df7e146105f1578063aaf10f421461063b57600080fd5b806349934047116101f357806365ee81d8116101ac57806365ee81d8146104b757806378979a80146104d75780637df73e27146104f75780637f07bfdc1461053d57806383ebb7711461055d57806384b0196e1461057257600080fd5b806349934047146104345780634a58db19146104545780634f1ef2861461045c57806352d1902d1461046f5780635c1c6dcd1461048457806360b5bb3f1461049757600080fd5b806319822f7c1161024557806319822f7c1461036b5780632b3afd991461038b5780633e1b0812146103bf5780633ed01015146103df578063445140b8146103ff5780634891161f1461041f57600080fd5b806301ffc9a71461028d57806306394d67146102c25780630e316ab7146102f0578063150b7a02146103125780631626ba7e1461034b57600080fd5b3661028857005b600080fd5b34801561029957600080fd5b506102ad6102a8366004613309565b6108fd565b60405190151581526020015b60405180910390f35b3480156102ce57600080fd5b506102e26102dd36600461334c565b61098d565b6040519081526020016102b9565b3480156102fc57600080fd5b5061031061030b36600461339d565b6109c2565b005b34801561031e57600080fd5b5061033261032d36600461346f565b610be6565b6040516001600160e01b031990911681526020016102b9565b34801561035757600080fd5b50610332610366366004613522565b610c01565b34801561037757600080fd5b506102e261038636600461356d565b610c20565b34801561039757600080fd5b506102e27fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1881565b3480156103cb57600080fd5b506102e26103da3660046135ba565b610c90565b3480156103eb57600080fd5b506103106103fa3660046135e3565b610d2a565b34801561040b57600080fd5b506102ad61041a36600461361d565b610e02565b34801561042b57600080fd5b506102e2601e81565b34801561044057600080fd5b5061031061044f3660046135e3565b610e8e565b610310610f31565b61031061046a366004613636565b610f9b565b34801561047b57600080fd5b506102e2610fb1565b610310610492366004613685565b610fce565b3480156104a357600080fd5b506103106104b2366004613703565b61103e565b3480156104c357600080fd5b506103106104d236600461375c565b611153565b3480156104e357600080fd5b506103106104f23660046137ba565b6111bc565b34801561050357600080fd5b506102ad61051236600461339d565b6001600160a01b031660009081526000805160206141c0833981519152602052604090205460ff1690565b34801561054957600080fd5b50610310610558366004613836565b6112f6565b34801561056957600080fd5b506102e26113d3565b34801561057e57600080fd5b506105876113e2565b6040516102b997969594939291906138b2565b3480156105a657600080fd5b506105af611428565b6040516102b9919061394b565b3480156105c857600080fd5b506000805160206141a0833981519152546102e2565b6103106105ec366004613636565b610fa3565b3480156105fd57600080fd5b5061062e6040518060400160405280601181526020017026bab63a34a9b4b3a232b632a3b0ba37b960791b81525081565b6040516102b99190613998565b34801561064757600080fd5b5061065061149b565b6040516001600160a01b0390911681526020016102b9565b34801561067457600080fd5b5061062e604051806040016040528060018152602001603160f81b81525081565b3480156106a157600080fd5b5061062e604051806040016040528060058152602001640352e302e360dc1b81525081565b3480156106d257600080fd5b506106507f000000000000000000000000000000000000000000000000000000000000000081565b34801561070657600080fd5b5061070f6114bc565b6040516001600160401b0390911681526020016102b9565b34801561073357600080fd5b50610332610742366004613a2a565b6114ef565b34801561075357600080fd5b506102e261150b565b34801561076857600080fd5b50610310610777366004613ad7565b611597565b34801561078857600080fd5b506102e261167e565b6107a461079f366004613522565b6116d4565b6040516102b99190613b70565b3480156107bd57600080fd5b506103106107cc36600461361d565b61194a565b3480156107dd57600080fd5b506103106107ec366004613bd4565b611a40565b3480156107fd57600080fd5b507fb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c02546102e2565b610310610833366004613522565b611c56565b34801561084457600080fd5b506106507f000000000000000000000000000000000000000000000000000000000000000081565b34801561087857600080fd5b5061031061088736600461339d565b611e59565b34801561089857600080fd5b506102e26108a736600461334c565b611fdf565b3480156108b857600080fd5b506103326108c7366004613c0d565b612121565b3480156108d857600080fd5b5061062e604051806040016040528060058152602001640312e332e360dc1b81525081565b600061090761213d565b6001600160e01b031982166335a4725960e21b148061093657506001600160e01b03198216630a85bd0160e11b145b8061095157506001600160e01b03198216630271189760e51b145b8061096c57506001600160e01b031982166301ffc9a760e01b145b8061098757506001600160e01b03198216630b135d3f60e11b145b92915050565b600061098761099a6121e4565b6109a384611fdf565b60405161190160f01b8152600281019290925260228201526042902090565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906109fb5750333014155b15610a1957604051630796d94560e01b815260040160405180910390fd5b6001600160a01b03811660009081526000805160206141c0833981519152602081905260409091205460ff16610a625760405163da0357f760e01b815260040160405180910390fd5b600181015460028201548103610a8b576040516361774dcf60e11b815260040160405180910390fd5b60005b610a99600183613c8b565b811015610b6357836001600160a01b0316836001018281548110610abf57610abf613c9e565b6000918252602090912001546001600160a01b031603610b5b5782600101600183610aea9190613c8b565b81548110610afa57610afa613c9e565b6000918252602090912001546001840180546001600160a01b039092169183908110610b2857610b28613c9e565b9060005260206000200160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550610b63565b600101610a8e565b5081600101805480610b7757610b77613cb4565b60008281526020808220830160001990810180546001600160a01b03191690559092019092556001600160a01b038516808352908490526040808320805460ff191690555190917fb0073c14ccc2332b5b461c0d2fb94366f38d3954a82745e74827aa0811c9f98191a2505050565b6000610bf061213d565b50630a85bd0160e11b949350505050565b6000610c0b61213d565b610c1684848461230f565b90505b9392505050565b6000336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614610c6b57604051636b31ba1560e11b815260040160405180910390fd5b610c7361213d565b610c8584610c808661098d565b6124ae565b9050610c19826124f6565b604051631aab3f0d60e11b81523060048201526001600160c01b03821660248201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401602060405180830381865afa158015610d06573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109879190613cca565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610d635750333014155b15610d8157604051630796d94560e01b815260040160405180910390fd5b604051633ed0101560e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690633ed0101590610dcd908490600401613e12565b600060405180830381600087803b158015610de757600080fd5b505af1158015610dfb573d6000803e3d6000fd5b5050505050565b6040516316a0682960e11b8152600481018290526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031690632d40d05290602401602060405180830381865afa158015610e6a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109879190613eed565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590610ec75750333014155b15610ee557604051630796d94560e01b815260040160405180910390fd5b604051634993404760e01b81526001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001690634993404790610dcd908490600401613e12565b610f3961213d565b60405163b760faf960e01b81523060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063b760faf99034906024016000604051808303818588803b158015610de757600080fd5b610fa361258e565b610fad828261264b565b5050565b6000610fbb612666565b506000805160206141e083398151915290565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461101757604051636b31ba1560e11b815260040160405180910390fd5b610fad611027602083018361339d565b60208301356110396040850185613f0a565b6126af565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff1615906001600160401b03166000811580156110835750825b90506000826001600160401b0316600114801561109f5750303b155b9050811580156110ad575080155b156110cb5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff1916600117855583156110f557845460ff60401b1916600160401b1785555b61110288888860006126e5565b831561114957845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d2906020015b60405180910390a15b5050505050505050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061118c5750333014155b156111aa57604051630796d94560e01b815260040160405180910390fd5b6111b6848484846126e5565b50505050565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054869190600160401b900460ff1680611204575080546001600160401b03808416911610155b156112225760405163f92ee8a960e01b815260040160405180910390fd5b805468ffffffffffffffffff19166001600160401b03831617600160401b178155336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061127c5750333014155b1561129a57604051630796d94560e01b815260040160405180910390fd5b6112a6868686866126e5565b805460ff60401b191681556040516001600160401b03831681527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a150505050505050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161480159061132f5750333014155b1561134d57604051630796d94560e01b815260040160405180910390fd5b60405163040b850f60e31b81526001600160a01b038381166004830152602482018390527f0000000000000000000000000000000000000000000000000000000000000000169063205c287890604401600060405180830381600087803b1580156113b757600080fd5b505af11580156113cb573d6000803e3d6000fd5b505050505050565b60006113dd6121e4565b905090565b6000606080600080600060606113f6612963565b6113fe612990565b60408051600080825260208201909252600f60f81b9b939a50919850469750309650945092509050565b606060006000805160206141c08339815191526001810180546040805160208084028201810190925282815293945083018282801561149057602002820191906000526020600020905b81546001600160a01b03168152600190910190602001808311611472575b505050505091505090565b60006113dd6000805160206141e0833981519152546001600160a01b031690565b60006113dd7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00546001600160401b031690565b60006114f961213d565b5063bc197c8160e01b95945050505050565b6040516370a0823160e01b81523060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906370a08231906024015b602060405180830381865afa158015611573573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113dd9190613cca565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906115d05750333014155b156115ee57604051630796d94560e01b815260040160405180910390fd5b60405163cef6d20960e01b81526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063cef6d2099061164490899089908990899089908990600401613fb1565b600060405180830381600087803b15801561165e57600080fd5b505af1158015611672573d6000803e3d6000fd5b50505050505050505050565b604051631aab3f0d60e11b8152306004820152600060248201819052907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316906335567e1a90604401611556565b6060336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461171f57604051630692ce8160e21b815260040160405180910390fd5b83600881901b61173382600160f81b6129bd565b156117b95736600061174587876129cf565b90925090506117558360006129bd565b1561176b576117648282612a68565b94506117b2565b61177983600160f81b6129bd565b15611788576117648282612b29565b6040516308c3ee0360e11b81526001600160f81b0319841660048201526024015b60405180910390fd5b5050611941565b6117c48260006129bd565b1561191c576000803660006117d98989612c56565b6040805160018082528183019092529498509296509094509250816020015b60608152602001906001900390816117f8579050509650600061181b86826129bd565b1561184f5761182c858585856126af565b8860008151811061183f5761183f613c9e565b6020026020010181905250611912565b61185d86600160f81b6129bd565b156118ed5761186e85858585612ca7565b8960008151811061188157611881613c9e565b60209081029190910101529050806118e8577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb76000896000815181106118c9576118c9613c9e565b60200260200101516040516118df92919061401a565b60405180910390a15b611912565b6040516308c3ee0360e11b81526001600160f81b0319871660048201526024016117a9565b5050505050611941565b604051632e5bf3f960e21b81526001600160f81b0319831660048201526024016117a9565b50509392505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016148015906119835750333014155b156119a157604051630796d94560e01b815260040160405180910390fd5b806000036119c25760405163aabd5a0960e01b815260040160405180910390fd5b6000805160206141a0833981519152546000805160206141c083398151915290821115611a025760405163aabd5a0960e01b815260040160405180910390fd5b600281018290556040518281527f78c34957a47c9ef62a6f6f2f8720f71e2394a6438100e7e20d139c3cbe774d039060200160405180910390a15050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590611a795750333014155b15611a9757604051630796d94560e01b815260040160405180910390fd5b6001600160a01b0381161580611ab657506001600160a01b0381163b15155b15611ad457604051634501a91960e01b815260040160405180910390fd5b6001600160a01b03821660009081526000805160206141c0833981519152602081905260409091205460ff16611b1d5760405163da0357f760e01b815260040160405180910390fd5b6001600160a01b03821660009081526020829052604090205460ff1615611b5757604051631985f4ab60e31b815260040160405180910390fd5b600181015460005b81811015611bf157846001600160a01b0316836001018281548110611b8657611b86613c9e565b6000918252602090912001546001600160a01b031603611be95783836001018281548110611bb657611bb6613c9e565b9060005260206000200160006101000a8154816001600160a01b0302191690836001600160a01b03160217905550611bf1565b600101611b5f565b506001600160a01b03808516600081815260208590526040808220805460ff199081169091559387168083528183208054909516600117909455517f53a7b6f060162826746b07f3ff5cc66b83afad3bc9a57c9f34d7802901c6e8299190a350505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614611c9f57604051636b31ba1560e11b815260040160405180910390fd5b82600881901b611cb382600160f81b6129bd565b15611d0e57366000611cc586866129cf565b9092509050611cd58360006129bd565b15611cea57611ce48282612a68565b50611d07565b611cf883600160f81b6129bd565b1561178857611ce48282612b29565b5050610dfb565b611d198260006129bd565b1561191c57600080366000611d2e8888612c56565b9350935093509350611d4485600060f81b6129bd565b15611d5b57611d55848484846126af565b50611e50565b611d6985600160f81b6129bd565b15611e2b57604080516001808252818301909252600091816020015b6060815260200190600190039081611d855790505090506000611daa86868686612ca7565b83600081518110611dbd57611dbd613c9e565b6020908102919091010152905080611e24577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb7600083600081518110611e0557611e05613c9e565b6020026020010151604051611e1b92919061401a565b60405180910390a15b5050611e50565b6040516308c3ee0360e11b81526001600160f81b0319861660048201526024016117a9565b50505050610dfb565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590611e925750333014155b15611eb057604051630796d94560e01b815260040160405180910390fd5b6001600160a01b0381161580611ecf57506001600160a01b0381163b15155b15611eed57604051634501a91960e01b815260040160405180910390fd5b6000805160206141a0833981519152546000805160206141c083398151915290601d1901611f2e57604051630dc92ed360e11b815260040160405180910390fd5b6001600160a01b03821660009081526020829052604090205460ff1615611f6857604051631985f4ab60e31b815260040160405180910390fd5b6001818101805480830182556000918252602080832090910180546001600160a01b0319166001600160a01b038716908117909155808352908490526040808320805460ff191690941790935591517f82b74755d483f0688b80354268454667c377a5684e64a4dbb6820fc11a6276d49190a25050565b60007fbc37962d8bd1d319c95199bdfda6d3f92baa8903a61b32d5f4ec1f4b36a3bc1861200f602084018461339d565b60208401356120216040860186613f0a565b60405161202f929190614033565b6040519081900390206120456060870187613f0a565b604051612053929190614033565b604051908190039020608087013560a088013560c089013561207860e08b018b613f0a565b604051612086929190614033565b60408051918290038220602083019a909a526001600160a01b03988916908201526060810196909652608086019490945260a085019290925260c084015260e08301526101008201526101208101929092527f00000000000000000000000000000000000000000000000000000000000000001661014082015261016001604051602081830303815290604052805190602001209050919050565b600061212b61213d565b5063f23a6e6160e01b95945050505050565b306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614806121c457507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166121b86000805160206141e0833981519152546001600160a01b031690565b6001600160a01b031614155b156121e25760405163703e46dd60e11b815260040160405180910390fd5b565b6000306001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801561223d57507f000000000000000000000000000000000000000000000000000000000000000046145b1561226757507f000000000000000000000000000000000000000000000000000000000000000090565b6113dd604080517f8b73c3c69bb8fe3d512ecc4cf759cc79239f7b179b0ffacaa9a75d522b39400f60208201527f0000000000000000000000000000000000000000000000000000000000000000918101919091527f000000000000000000000000000000000000000000000000000000000000000060608201524660808201523060a082015260009060c00160405160208183030381529060405280519060200120905090565b7fb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c02546000906000805160206141c08339815191529061235090604190614043565b831461236757506001600160e01b03199050610c19565b600061237460418561405a565b600283015490915060008080805b858110156124965760008a8a612399604185614043565b9060416123a786600161407c565b6123b19190614043565b926123be9392919061408f565b8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525092935061240292508e9150839050612cd8565b9350846001600160a01b0316846001600160a01b031611158061243e57506001600160a01b03841660009081526020899052604090205460ff16155b1561245c57506001600160e01b03199750610c199650505050505050565b82612466816140b9565b9350508583106124885750630b135d3f60e11b9750610c199650505050505050565b509192508291600101612382565b506001600160e01b03199a9950505050505050505050565b6000806124c8836124c3610100870187613f0a565b61230f565b90506374eca2c160e11b6001600160e01b03198216016124ec576000915050610987565b5060019392505050565b801561258b57604051600090339060001990849084818181858888f193505050503d8060008114612543576040519150601f19603f3d011682016040523d82523d6000602084013e612548565b606091505b505060408051848152821515602082015291925033917fa427c7d47f24d01b170779a7600b1d4c0d7cdbabaa0f19c4f0e6182053ffc931910160405180910390a2505b50565b6000805160206141a0833981519152546000805160206141c08339815191529060005b81811015612608578260000160008460010183815481106125d4576125d4613c9e565b60009182526020808320909101546001600160a01b031683528201929092526040019020805460ff191690556001016125b1565b506126176001830160006132d7565b6000600283018190556040517feb09d532980c3cc73dcad99b80e264204a667a54cbb7b63ec8d68dcb1c7096be9190a15050565b61265361213d565b61265c82612d02565b610fad8282612d59565b306001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146121e25760405163703e46dd60e11b815260040160405180910390fd5b60405181838237600038838387895af16126cc573d6000823e3d81fd5b3d8152602081013d6000823e3d01604052949350505050565b6000805160206141a08339815191525483906000805160206141c08339815191529060008461271d57612718828561407c565b61271f565b835b905085158061272d57508086115b1561274b5760405163aabd5a0960e01b815260040160405180910390fd5b601e81111561276d57604051630dc92ed360e11b815260040160405180910390fd5b84156128015760005b828110156127f257600084600101828154811061279557612795613c9e565b60009182526020808320909101546001600160a01b0316808352908790526040808320805460ff191690555190925082917fb0073c14ccc2332b5b461c0d2fb94366f38d3954a82745e74827aa0811c9f98191a250600101612776565b506128016001840160006132d7565b60005b8481101561292b57600089898381811061282057612820613c9e565b9050602002016020810190612835919061339d565b6001600160a01b03811660009081526020879052604090205490915060ff161561287257604051631985f4ab60e31b815260040160405180910390fd5b6001600160a01b038116158061289157506001600160a01b0381163b15155b156128af57604051634501a91960e01b815260040160405180910390fd5b6001858101805480830182556000918252602080832090910180546001600160a01b0319166001600160a01b038616908117909155808352908890526040808320805460ff191690941790935591517f82b74755d483f0688b80354268454667c377a5684e64a4dbb6820fc11a6276d49190a250600101612804565b50600283018690556040518681527f78c34957a47c9ef62a6f6f2f8720f71e2394a6438100e7e20d139c3cbe774d0390602001611140565b60606113dd7f00000000000000000000000000000000000000000000000000000000000000006000612e1b565b60606113dd7f00000000000000000000000000000000000000000000000000000000000000006001612e1b565b6001600160f81b031990811691161490565b366000833580850160208587010360208201945081359350808460051b8301118360401c1715612a075763ba597e7e6000526004601cfd5b8315612a5e578392505b6001830392508260051b850135915081850160408101358082018381358201118460408501111782861782351760401c1715612a555763ba597e7e6000526004601cfd5b50505082612a11575b5050509250929050565b606081806001600160401b03811115612a8357612a836133ba565b604051908082528060200260200182016040528015612ab657816020015b6060815260200190600190039081612aa15790505b50915060005b81811015612b215736858583818110612ad757612ad7613c9e565b9050602002810190612ae991906140d2565b9050612afb611027602083018361339d565b848381518110612b0d57612b0d613c9e565b602090810291909101015250600101612abc565b505092915050565b606081806001600160401b03811115612b4457612b446133ba565b604051908082528060200260200182016040528015612b7757816020015b6060815260200190600190039081612b625790505b50915060005b81811015612b215736858583818110612b9857612b98613c9e565b9050602002810190612baa91906140d2565b90506000612bd5612bbe602084018461339d565b6020840135612bd06040860186613f0a565b612ca7565b868581518110612be757612be7613c9e565b6020908102919091010152905080612c4c577fe723f28f104e46b47fd3531f3608374ac226bcf3ddda334a23a266453e0efdb783868581518110612c2d57612c2d613c9e565b6020026020010151604051612c4392919061401a565b60405180910390a15b5050600101612b7d565b6000803681612c68601482878961408f565b612c71916140f2565b60601c9350612c8460346014878961408f565b612c8d91614125565b9250612c9c856034818961408f565b949793965094505050565b604051600090828482376000388483888a5af191503d8152602081013d6000823e3d81016040525094509492505050565b600080600080612ce88686612ec6565b925092509250612cf88282612f13565b5090949350505050565b336001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001614801590612d3b5750333014155b1561258b57604051630796d94560e01b815260040160405180910390fd5b816001600160a01b03166352d1902d6040518163ffffffff1660e01b8152600401602060405180830381865afa925050508015612db3575060408051601f3d908101601f19168201909252612db091810190613cca565b60015b612ddb57604051634c9c8ce360e01b81526001600160a01b03831660048201526024016117a9565b6000805160206141e08339815191528114612e0c57604051632a87526960e21b8152600481018290526024016117a9565b612e168383612fcc565b505050565b606060ff8314612e3557612e2e83613022565b9050610987565b818054612e4190614143565b80601f0160208091040260200160405190810160405280929190818152602001828054612e6d90614143565b8015612eba5780601f10612e8f57610100808354040283529160200191612eba565b820191906000526020600020905b815481529060010190602001808311612e9d57829003601f168201915b50505050509050610987565b60008060008351604103612f005760208401516040850151606086015160001a612ef288828585613061565b955095509550505050612f0c565b50508151600091506002905b9250925092565b6000826003811115612f2757612f27614177565b03612f30575050565b6001826003811115612f4457612f44614177565b03612f625760405163f645eedf60e01b815260040160405180910390fd5b6002826003811115612f7657612f76614177565b03612f975760405163fce698f760e01b8152600481018290526024016117a9565b6003826003811115612fab57612fab614177565b03610fad576040516335e2f38360e21b8152600481018290526024016117a9565b612fd582613130565b6040516001600160a01b038316907fbc7cd75a20ee27fd9adebab32041f755214dbc6bffa90cc0225b39da2e5c2d3b90600090a280511561301a57612e168282613195565b610fad61320b565b6060600061302f8361322a565b604080516020808252818301909252919250600091906020820181803683375050509182525060208101929092525090565b600080807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a084111561309c5750600091506003905082613126565b604080516000808252602082018084528a905260ff891692820192909252606081018790526080810186905260019060a0016020604051602081039080840390855afa1580156130f0573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b03811661311c57506000925060019150829050613126565b9250600091508190505b9450945094915050565b806001600160a01b03163b60000361316657604051634c9c8ce360e01b81526001600160a01b03821660048201526024016117a9565b6000805160206141e083398151915280546001600160a01b0319166001600160a01b0392909216919091179055565b6060600080846001600160a01b0316846040516131b2919061418d565b600060405180830381855af49150503d80600081146131ed576040519150601f19603f3d011682016040523d82523d6000602084013e6131f2565b606091505b5091509150613202858383613252565b95945050505050565b34156121e25760405163b398979f60e01b815260040160405180910390fd5b600060ff8216601f81111561098757604051632cd44ac360e21b815260040160405180910390fd5b60608261326757613262826132ae565b610c19565b815115801561327e57506001600160a01b0384163b155b156132a757604051639996b31560e01b81526001600160a01b03851660048201526024016117a9565b5080610c19565b8051156132be5780518082602001fd5b604051630a12f52160e11b815260040160405180910390fd5b508054600082559060005260206000209081019061258b91905b8082111561330557600081556001016132f1565b5090565b60006020828403121561331b57600080fd5b81356001600160e01b031981168114610c1957600080fd5b6000610120828403121561334657600080fd5b50919050565b60006020828403121561335e57600080fd5b81356001600160401b0381111561337457600080fd5b61338084828501613333565b949350505050565b6001600160a01b038116811461258b57600080fd5b6000602082840312156133af57600080fd5b8135610c1981613388565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b03811182821017156133f8576133f86133ba565b604052919050565b600082601f83011261341157600080fd5b81356001600160401b0381111561342a5761342a6133ba565b61343d601f8201601f19166020016133d0565b81815284602083860101111561345257600080fd5b816020850160208301376000918101602001919091529392505050565b6000806000806080858703121561348557600080fd5b843561349081613388565b935060208501356134a081613388565b92506040850135915060608501356001600160401b038111156134c257600080fd5b6134ce87828801613400565b91505092959194509250565b60008083601f8401126134ec57600080fd5b5081356001600160401b0381111561350357600080fd5b60208301915083602082850101111561351b57600080fd5b9250929050565b60008060006040848603121561353757600080fd5b8335925060208401356001600160401b0381111561355457600080fd5b613560868287016134da565b9497909650939450505050565b60008060006060848603121561358257600080fd5b83356001600160401b0381111561359857600080fd5b6135a486828701613333565b9660208601359650604090950135949350505050565b6000602082840312156135cc57600080fd5b81356001600160c01b0381168114610c1957600080fd5b6000602082840312156135f557600080fd5b81356001600160401b0381111561360b57600080fd5b820160c08185031215610c1957600080fd5b60006020828403121561362f57600080fd5b5035919050565b6000806040838503121561364957600080fd5b823561365481613388565b915060208301356001600160401b0381111561366f57600080fd5b61367b85828601613400565b9150509250929050565b60006020828403121561369757600080fd5b81356001600160401b038111156136ad57600080fd5b820160608185031215610c1957600080fd5b60008083601f8401126136d157600080fd5b5081356001600160401b038111156136e857600080fd5b6020830191508360208260051b850101111561351b57600080fd5b60008060006040848603121561371857600080fd5b83356001600160401b0381111561372e57600080fd5b61373a868287016136bf565b909790965060209590950135949350505050565b801515811461258b57600080fd5b6000806000806060858703121561377257600080fd5b84356001600160401b0381111561378857600080fd5b613794878288016136bf565b9095509350506020850135915060408501356137af8161374e565b939692955090935050565b6000806000806000608086880312156137d257600080fd5b85356001600160401b0380821682146137ea57600080fd5b9095506020870135908082111561380057600080fd5b5061380d888289016136bf565b9095509350506040860135915060608601356138288161374e565b809150509295509295909350565b6000806040838503121561384957600080fd5b823561385481613388565b946020939093013593505050565b60005b8381101561387d578181015183820152602001613865565b50506000910152565b6000815180845261389e816020860160208601613862565b601f01601f19169290920160200192915050565b60ff60f81b881681526000602060e060208401526138d360e084018a613886565b83810360408501526138e5818a613886565b606085018990526001600160a01b038816608086015260a0850187905284810360c08601528551808252602080880193509091019060005b818110156139395783518352928401929184019160010161391d565b50909c9b505050505050505050505050565b6020808252825182820181905260009190848201906040850190845b8181101561398c5783516001600160a01b031683529284019291840191600101613967565b50909695505050505050565b602081526000610c196020830184613886565b600082601f8301126139bc57600080fd5b813560206001600160401b038211156139d7576139d76133ba565b8160051b6139e68282016133d0565b9283528481018201928281019087851115613a0057600080fd5b83870192505b84831015613a1f57823582529183019190830190613a06565b979650505050505050565b600080600080600060a08688031215613a4257600080fd5b8535613a4d81613388565b94506020860135613a5d81613388565b935060408601356001600160401b0380821115613a7957600080fd5b613a8589838a016139ab565b94506060880135915080821115613a9b57600080fd5b613aa789838a016139ab565b93506080880135915080821115613abd57600080fd5b50613aca88828901613400565b9150509295509295909350565b60008060008060008060608789031215613af057600080fd5b86356001600160401b0380821115613b0757600080fd5b613b138a838b016136bf565b90985096506020890135915080821115613b2c57600080fd5b613b388a838b016136bf565b90965094506040890135915080821115613b5157600080fd5b50613b5e89828a016136bf565b979a9699509497509295939492505050565b600060208083016020845280855180835260408601915060408160051b87010192506020870160005b82811015613bc757603f19888603018452613bb5858351613886565b94509285019290850190600101613b99565b5092979650505050505050565b60008060408385031215613be757600080fd5b8235613bf281613388565b91506020830135613c0281613388565b809150509250929050565b600080600080600060a08688031215613c2557600080fd5b8535613c3081613388565b94506020860135613c4081613388565b9350604086013592506060860135915060808601356001600160401b03811115613c6957600080fd5b613aca88828901613400565b634e487b7160e01b600052601160045260246000fd5b8181038181111561098757610987613c75565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052603160045260246000fd5b600060208284031215613cdc57600080fd5b5051919050565b6000808335601e19843603018112613cfa57600080fd5b83016020810192503590506001600160401b03811115613d1957600080fd5b80360382131561351b57600080fd5b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b60008383855260208086019550808560051b830101846000805b88811015613e0457858403601f19018a52823536899003605e19018112613d90578283fd5b880160608135613d9f81613388565b6001600160a01b03168652613db682880183613ce3565b8289890152613dc88389018284613d28565b925050506040613dda81840184613ce3565b935087830382890152613dee838583613d28565b9d89019d97505050938601935050600101613d6b565b509198975050505050505050565b6020815260008235613e2381613388565b6001600160a01b0390811660208481019190915284013590613e4482613388565b80821660408501525050604083013560608301526060830135601e19843603018112613e6f57600080fd5b83016020810190356001600160401b03811115613e8b57600080fd5b8060051b3603821315613e9d57600080fd5b60c06080850152613eb260e085018284613d51565b915050608084013560a0840152613ecc60a0850185613ce3565b848303601f190160c0860152613ee3838284613d28565b9695505050505050565b600060208284031215613eff57600080fd5b8151610c198161374e565b6000808335601e19843603018112613f2157600080fd5b8301803591506001600160401b03821115613f3b57600080fd5b60200191503681900382131561351b57600080fd5b6000838385526020808601955060208560051b8301018460005b87811015613fa457848303601f19018952613f858288613ce3565b613f90858284613d28565b9a86019a9450505090830190600101613f6a565b5090979650505050505050565b606081526000613fc560608301888a613f50565b8281036020848101919091528682528791810160005b88811015613ff757833582529282019290820190600101613fdb565b50848103604086015261400b818789613f50565b9b9a5050505050505050505050565b828152604060208201526000610c166040830184613886565b8183823760009101908152919050565b808202811582820484141761098757610987613c75565b60008261407757634e487b7160e01b600052601260045260246000fd5b500490565b8082018082111561098757610987613c75565b6000808585111561409f57600080fd5b838611156140ac57600080fd5b5050820193919092039150565b6000600182016140cb576140cb613c75565b5060010190565b60008235605e198336030181126140e857600080fd5b9190910192915050565b6bffffffffffffffffffffffff198135818116916014851015612b215760149490940360031b84901b1690921692915050565b8035602083101561098757600019602084900360031b1b1692915050565b600181811c9082168061415757607f821691505b60208210810361334657634e487b7160e01b600052602260045260246000fd5b634e487b7160e01b600052602160045260246000fd5b600082516140e881846020870161386256feb005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c01b005e320c74f68de39b3d9025549122b8b117c48474f537aac49c12147b61c00360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbca26469706673582212205fc6fdc85503c31560366339056f5ba5c2624d0697f326aa98f14cda48fe6f7164736f6c63430008170033",XDe={};we(XDe,{abi:()=>QDe,bytecode:()=>e$e});var QDe=[{type:"function",name:"verify",inputs:[{name:"message",type:"bytes32",internalType:"bytes32"},{name:"r",type:"uint256",internalType:"uint256"},{name:"s",type:"uint256",internalType:"uint256"},{name:"qx",type:"uint256",internalType:"uint256"},{name:"qy",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}],e$e="0x610c9761003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100355760003560e01c8063a1f312811461003a575b600080fd5b61004d610048366004610bf0565b610061565b604051901515815260200160405180910390f35b600084158061007e5750600080516020610c428339815191528510155b80610087575083155b806100a05750600080516020610c428339815191528410155b156100ad5750600061020a565b6100fe600160601b63ffffffff60c01b03196bfffffffffffffffffffffffd63ffffffff60c01b03197f5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b8686610213565b151560000361010f5750600061020a565b600061011a856102be565b90506000600080516020610c4283398151915282890990506000600080516020610c42833981519152838909905060006040518060c00160405280888152602001878152602001600160601b63ffffffff60c01b031981526020016bfffffffffffffffffffffffd63ffffffff60c01b031981526020017f6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c29681526020017f4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5815250905060006101ea828585610337565b509050600080516020610c428339815191528a8103820815955050505050505b95945050505050565b600082158015610221575081155b8061022c5750858310155b806102375750858210155b156102445750600061020a565b6000868061025457610254610c2b565b83840990506000878061026957610269610c2b565b888061027757610277610c2b565b888709898061028857610288610c2b565b878b8061029757610297610c2b565b898a090908905087806102ac576102ac610c2b565b86820891909114979650505050505050565b600060405160208152602080820152602060408201528260608201527fffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc63254f6080820152600080516020610c4283398151915260a082015260208160c0836005600019fa610330576107fe60405260206040fd5b5192915050565b600080600160ff1b8415801561034b575083155b1561035d576000809250925050610be8565b60008061080060405101604052604088015161082060405101526108206040510151610466565b6000806000808886600209898182098a8188098b82840992508b8c8d8c8d098f098d8e8b8c096003090895508b8b840993508b8a830994508b8c8260028f03098d8889090896508b8c828e03890887099150508a818c8a8509089450505082890392509650965096509692505050565b9086039086828186890908955086818803888588090894506000806000808a898a0993508a89850992508a84880991508a83890990508a84860996508a8b8860028e03098c858e038e8e8f09080893508a8a8c868e038a080994508a8b84880986089250975097509750979350505050565b60a0898101516080808c01516040519182015291820152600160c0820181905260e0909101526104a760608a01518260018060a08e015160808f0151610384565b95509350955095506104d683838789610100604051019081526020810191909152604081019190915260600152565b6104ed8160a08b015160808c015186868a8c6103f4565b955093509550955061051c83838789610180604051019081526020810191909152604081019190915260600152565b61054c60018060208c015160008d0151610200604051019081526020810191909152604081019190915260600152565b6080890151955060a089015194506105728160208b015160008c01516001808a8c6103f4565b95509350955095506105a183838789610280604051019081526020810191909152604081019190915260600152565b6105b88160a08b015160808c015186868a8c6103f4565b95509350955095506105e783838789610300604051019081526020810191909152604081019190915260600152565b6105fe8160a08b015160808c015186868a8c6103f4565b955093509550955061062d83838789610380604051019081526020810191909152604081019190915260600152565b600089015195506020890151945061064e60608a015182600180898b610384565b955093509550955061067d83838789610400604051019081526020810191909152604081019190915260600152565b6106948160a08b015160808c015186868a8c6103f4565b95509350955095506106c383838789610480604051019081526020810191909152604081019190915260600152565b6106da8160a08b015160808c015186868a8c6103f4565b955093509550955061070983838789610500604051019081526020810191909152604081019190915260600152565b6107208160a08b015160808c015186868a8c6103f4565b955093509550955061074f83838789610580604051019081526020810191909152604081019190915260600152565b6104006040510151955061042060405101519450610440604051015191506104606040510151925061078e8160208b015160008c015186868a8c6103f4565b95509350955095506107bd83838789610600604051019081526020810191909152604081019190915260600152565b6107d48160a08b015160808c015186868a8c6103f4565b955093509550955061080383838789610680604051019081526020810191909152604081019190915260600152565b61081a8160a08b015160808c015186868a8c6103f4565b955093509550955061084983838789610700604051019081526020810191909152604081019190915260600152565b6108608160a08b015160808c015186868a8c6103f4565b95509350955095505061089082828688610780604051019081526020810191909152604081019190915260600152565b600091505b816108d5578286161560010360031b8360011c87161560010360021b018388161560010360011b8460011c891615600103010191508260021c9250610895565b506040805160079290921b82018051602082015192820151606090920151610820850151919750929550919290915b8415610b7d5780866002098181820982818a09838284099250838487880960608f015109848186878e8f09600309089050848885099750848784099650600285039a508485838d0986838409089a5084858387038d088209925050508281848a850908830397508291508790506002098181820982818a09838284099250838487880960608f015109848186878e8f09600309089050848885099750848784099650600285039a508485838d0986838409089a5084858387038d088209925050508281848a850908975050508488161560010360031b8560011c89161560010360021b01858a161560010360011b8660011c8b1615600103010180610a0d575094850394610b72565b60071b828101805160609091015161086085015284610a48579083016020810151604082015160609092015192995097509094509250610b72565b82836108608601518a09848885602001880151090861084085015290830160400151908280838b0984038487840908610840850151610b005780610b005783896002860309925083838409905083818b09610840860152838184099250838487880960608f0151099150838285868d8e09600309089150838784099650838682099550838461084087015160028703098584850908995083848b8603610840880151088309905083848a850982089850505050610b72565b83818209915083818309905083838584890909955083838b0992508361086086015185838a09099650838485846002880309850985838703876108408a01516108408b01510908089950838284099150838482866108608901518d090985610840880151878e89038708090898505050505b8460021c9450610904565b61088060408190526108e085905260208082526108a08190526108c08190526001198301610900526109208390529092508260c0816005600019fa610bc8576107ff60405260206040fd5b808251870995508082518409925080838409925080838809965050505050505b935093915050565b600080600080600060a08688031215610c0857600080fd5b505083359560208501359550604085013594606081013594506080013592509050565b634e487b7160e01b600052601260045260246000fdfeffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551a26469706673582212202032a0a92437c4c7498b5f3dbbeea2851a22a8974a563aed836730aa07e1cdda64736f6c63430008170033";function RN(t){return`0x${C6.bytesToHex(t)}`}function t$e(t){return C6.hexToBytes(t.slice(2))}function n$e(t){const e=typeof t=="string"?t$e(t):t,n=e.slice(0,32),r=e.slice(32,64);return{r:BigInt(RN(n)),s:BigInt(RN(r))}}var Ob=(t=Zn,e=0n,n="0x")=>({target:t,value:e,callData:n}),DN="0x0000000000000000000000000000000000000000000000000000000000000000",r$e="0x0100000000000000000000000000000000000000000000000000000000000000",a$e=[{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"callData"}],i$e=t=>hr(["address","uint256","bytes"],[t.target,t.value,t.callData]),s$e=t=>wn([{components:a$e,name:"executions",type:"tuple[]"}],[t]),Yx=t=>{if(t.length==0)throw new Error("Error while getting the execution calldatas, executions is empty");if(t.length==1){const e=t[0];return i$e(e)}return s$e(t)},Jx=t=>{if(t.length==0)throw new Error("Error while getting the execution calldatas, executionsBatch is empty");return t.map(Yx)},o$e=[{type:"address",name:"enforcer"},{type:"bytes",name:"terms"},{type:"bytes",name:"args"}];ut(Sn("Caveat(address enforcer,bytes terms)"));var Zo=(t=>(t[t.MultiSig=0]="MultiSig",t[t.Hybrid=1]="Hybrid",t))(Zo||{}),eo=t=>{const e=t.caveats.map(r=>({enforcer:Fi(r.enforcer),terms:r.terms,args:r.args})),n=t.salt==="0x"?0n:BigInt(t.salt);return{delegate:Fi(t.delegate),delegator:Fi(t.delegator),authority:t.authority===void 0?d$e:t.authority,caveats:e,salt:n,signature:t.signature}},c$e=t=>{const e=t.map(eo);return wn([{components:l$e,name:"delegations",type:"tuple[]"}],[e])},zV=t=>t.map(n=>c$e(n)),d$e="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff";ut(Sn("Delegation(address delegate,address delegator,bytes32 authority,Caveat[] caveats,uint256 salt)Caveat(address enforcer,bytes terms)"));var l$e=[{type:"address",name:"delegate"},{type:"address",name:"delegator"},{type:"bytes32",name:"authority"},{type:"tuple[]",name:"caveats",components:o$e},{type:"uint256",name:"salt"},{type:"bytes",name:"signature"}],u$e={Caveat:[{name:"enforcer",type:"address"},{name:"terms",type:"bytes"}],Delegation:[{name:"delegate",type:"address"},{name:"delegator",type:"address"},{name:"authority",type:"bytes32"},{name:"caveats",type:"Caveat[]"},{name:"salt",type:"uint256"}]},f$e="1.3.0",p$e={"1.0.0":{},"1.1.0":{},"1.2.0":{},"1.3.0":{}};function h$e(t,e=f$e){var a;const n=p$e[e][t];if(n)return n;const r=(a=QOe[e])==null?void 0:a[t];if(!r)throw new Error(`No contracts found for version ${e} chain ${t}`);return b$e(r)}function b$e(t){return{DelegationManager:t.DelegationManager,EntryPoint:t.EntryPoint,SimpleFactory:t.SimpleFactory,implementations:{MultiSigDeleGatorImpl:t.MultiSigDeleGatorImpl,HybridDeleGatorImpl:t.HybridDeleGatorImpl},caveatEnforcers:{AllowedCalldataEnforcer:t.AllowedCalldataEnforcer,AllowedMethodsEnforcer:t.AllowedMethodsEnforcer,AllowedTargetsEnforcer:t.AllowedTargetsEnforcer,ArgsEqualityCheckEnforcer:t.ArgsEqualityCheckEnforcer,BlockNumberEnforcer:t.BlockNumberEnforcer,DeployedEnforcer:t.DeployedEnforcer,ERC20BalanceChangeEnforcer:t.ERC20BalanceChangeEnforcer,ERC20TransferAmountEnforcer:t.ERC20TransferAmountEnforcer,ERC20StreamingEnforcer:t.ERC20StreamingEnforcer,ERC721BalanceChangeEnforcer:t.ERC721BalanceChangeEnforcer,ERC721TransferEnforcer:t.ERC721TransferEnforcer,ERC1155BalanceChangeEnforcer:t.ERC1155BalanceChangeEnforcer,IdEnforcer:t.IdEnforcer,LimitedCallsEnforcer:t.LimitedCallsEnforcer,NonceEnforcer:t.NonceEnforcer,TimestampEnforcer:t.TimestampEnforcer,ValueLteEnforcer:t.ValueLteEnforcer,NativeTokenTransferAmountEnforcer:t.NativeTokenTransferAmountEnforcer,NativeBalanceChangeEnforcer:t.NativeBalanceChangeEnforcer,NativeTokenStreamingEnforcer:t.NativeTokenStreamingEnforcer,NativeTokenPaymentEnforcer:t.NativeTokenPaymentEnforcer,OwnershipTransferEnforcer:t.OwnershipTransferEnforcer,RedeemerEnforcer:t.RedeemerEnforcer,SpecificActionERC20TransferBatchEnforcer:t.SpecificActionERC20TransferBatchEnforcer,ERC20PeriodTransferEnforcer:t.ERC20PeriodTransferEnforcer,NativeTokenPeriodTransferEnforcer:t.NativeTokenPeriodTransferEnforcer,ExactCalldataBatchEnforcer:t.ExactCalldataBatchEnforcer,ExactCalldataEnforcer:t.ExactCalldataEnforcer,ExactExecutionEnforcer:t.ExactExecutionEnforcer,ExactExecutionBatchEnforcer:t.ExactExecutionBatchEnforcer,MultiTokenPeriodEnforcer:t.MultiTokenPeriodEnforcer}}}var y$e={PackedUserOperation:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"entryPoint",type:"address"}]},qV=115792089210356248762697446949407573529996955224135760342422259061068512044369n,m$e=qV/2n,KV=LH("bytes32, uint256, uint256, bytes, bool, string, string, uint256"),g$e=t=>{try{const{challenge:e}=JSON.parse(t);if(e===void 0)throw new Error('No "challenge" found in the input string');return t.split(e)}catch(e){throw new Error('No "challenge" found in the input string',{cause:e})}},w$e=t=>{try{const e=t.indexOf('"type":');if(e===-1)throw new Error('No "type" found in the input string');return BigInt(e)}catch(e){throw new Error('No "type" found in the input string',{cause:e})}};function v$e(t,e,n,r){const a=ut(hr(["string"],[t]));let{r:i,s}=n$e(e);for(;s>m$e;)s=qV-s;const[o,c]=g$e(n),{userVerified:d}=_$e(r),l=w$e(n);return wn(KV,[a,i,s,r,d,o,c,l])}var E$e=32;function _$e(t){return{userVerified:(Buffer.from(t.slice(2),"hex").readUInt8(E$e)&4)!==0}}var T$e=t=>{const e=ut(hr(["string"],["AuthenticatorData"])),a=rn([e,"0x05","0x00000000"]),i=ut(hr(["string"],[t])),s=57896044605178124381348723474703786764998477612067880171211129530534256022184n;return wn(KV,[i,s,s,a,!0,'{"type":"webauthn.get","challenge":"','","origin":"passkey-domain","crossOrigin":false}',1n])},x$e=["ECDSA"],$N=({signatures:t})=>{if(t.length===0)return"0x";for(const{type:n}of t)if(!x$e.includes(n))throw new Error(`Invalid signature type: ${n}`);const e=[...t].sort((n,r)=>n.signer.localeCompare(r.signer));return rn(e.map(({signature:n})=>n))},Zx="0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",S$e=t=>{const{implementation:e}=t;if(e===Zo.Hybrid)return A$e(t.signatory);if(e===Zo.MultiSig)return C$e(t.signatory);throw new Error(`Implementation type '${e}' not supported`)},VV=t=>({signMessage:t.walletClient.signMessage,signTypedData:e=>t.walletClient.signTypedData(e),getStubSignature:async()=>Zx}),WV=t=>({signMessage:t.account.signMessage,signTypedData:t.account.signTypedData,getStubSignature:async()=>Zx}),A$e=t=>{if("walletClient"in t)return VV(t);if("account"in t){const{signMessage:e,signTypedData:n,getStubSignature:r}=WV(t);if(!e)throw new Error("Account does not support signMessage");if(!n)throw new Error("Account does not support signTypedData");return{signMessage:e,signTypedData:n,getStubSignature:r}}else{const{keyId:e,webAuthnAccount:n}=t;if(n.type!=="webAuthn")throw new Error("Account is not a webAuthn account");const r=({signature:o,webauthn:c})=>v$e(e,o,c.clientDataJSON,c.authenticatorData);return{signMessage:async o=>n.signMessage(o).then(r),signTypedData:async o=>n.signTypedData(o).then(r),getStubSignature:async()=>T$e(e)}}},C$e=t=>{const e=t.map(i=>{let s,o,c;if("walletClient"in i){const{signMessage:d,signTypedData:l}=VV(i);s=d,o=l,c=i.walletClient.account.address}else{const{signMessage:d,signTypedData:l}=WV(i);if(!d)throw new Error("Account does not support signMessage");if(!l)throw new Error("Account does not support signTypedData");s=d,o=l,c=i.account.address}return{address:c,individualSignMessage:s,individualSignTypedData:o}});return{signMessage:async i=>{const s=e.map(async({individualSignMessage:c,address:d})=>({signature:await c(i),signer:d,type:"ECDSA"})),o=await Promise.all(s);return $N({signatures:o})},signTypedData:async i=>{const s=e.map(async({individualSignTypedData:c,address:d})=>({signature:await c(i),signer:d,type:"ECDSA"})),o=await Promise.all(s);return $N({signatures:o})},getStubSignature:async()=>rn(e.map(()=>Zx))}},GV={};qt(GV,{addKey:()=>O$e,initializeHybridDeleGator:()=>YV,reinitializeHybridDeleGator:()=>k$e,removeKey:()=>R$e,updateSigners:()=>$$e});var I$e=({client:t,hybridDeleGatorAddress:e,p256Owner:n})=>un(t,{address:e,abi:Lr.abi,functionName:"addKey",args:[n.keyId,n.x,n.y]}),O$e=({p256Owner:t})=>qe({abi:Lr.abi,functionName:"addKey",args:[t.keyId,t.x,t.y]}),M$e=({client:t,hybridDeleGatorAddress:e,eoaOwner:n,p256Owners:r})=>un(t,{address:e,abi:Lr.abi,functionName:"initialize",args:[n,r.map(a=>a.keyId),r.map(a=>a.x),r.map(a=>a.y)]}),YV=({eoaOwner:t,p256Owners:e})=>qe({abi:Lr.abi,functionName:"initialize",args:[t,e.map(n=>n.keyId),e.map(n=>n.x),e.map(n=>n.y)]}),P$e=({client:t,hybridDeleGatorAddress:e,version:n,eoaOwner:r,p256Owners:a,removeExistingP256Owners:i})=>un(t,{address:e,abi:Lr.abi,functionName:"reinitialize",args:[n,r,a.map(s=>s.keyId),a.map(s=>s.x),a.map(s=>s.y),i]}),k$e=({version:t,eoaOwner:e,p256Owners:n,removeExistingP256Owners:r})=>qe({abi:Lr.abi,functionName:"reinitialize",args:[t,e,n.map(a=>a.keyId),n.map(a=>a.x),n.map(a=>a.y),r]}),N$e=({client:t,hybridDeleGatorAddress:e,keyId:n})=>un(t,{address:e,abi:Lr.abi,functionName:"removeKey",args:[n]}),R$e=({keyId:t})=>qe({abi:Lr.abi,functionName:"removeKey",args:[t]}),D$e=({client:t,hybridDeleGatorAddress:e,eoaOwner:n,p256Owners:r})=>un(t,{address:e,abi:Lr.abi,functionName:"updateSigners",args:[n,r.map(a=>a.keyId),r.map(a=>a.x),r.map(a=>a.y)]}),$$e=({eoaOwner:t,p256Owners:e})=>qe({abi:Lr.abi,functionName:"updateSigners",args:[t,e.map(n=>n.keyId),e.map(n=>n.x),e.map(n=>n.y)]}),JV={};qt(JV,{addSigner:()=>B$e,initializeMultiSigDeleGator:()=>ZV,reinitializeMultiSigDeleGator:()=>j$e,removeSigner:()=>z$e,replaceSigner:()=>K$e,updateMultiSigParameters:()=>Y$e,updateThreshold:()=>W$e});var L$e=({client:t,multiSigDeleGatorAddress:e,signer:n})=>un(t,{address:e,abi:Yn.abi,functionName:"addSigner",args:[n]}),B$e=({signer:t})=>qe({abi:Yn.abi,functionName:"addSigner",args:[t]}),F$e=({client:t,multiSigDeleGatorAddress:e,owners:n,threshold:r})=>un(t,{address:e,abi:Yn.abi,functionName:"initialize",args:[n,r]}),ZV=({owners:t,threshold:e})=>qe({abi:Yn.abi,functionName:"initialize",args:[t,e]}),U$e=({client:t,multiSigDeleGatorAddress:e,version:n,owners:r,threshold:a,removeExistingOwners:i})=>un(t,{address:e,abi:Yn.abi,functionName:"reinitialize",args:[n,r,a,i]}),j$e=({version:t,owners:e,threshold:n,removeExistingOwners:r})=>qe({abi:Yn.abi,functionName:"reinitialize",args:[t,e,n,r]}),H$e=({client:t,multiSigDeleGatorAddress:e,signer:n})=>un(t,{address:e,abi:Yn.abi,functionName:"removeSigner",args:[n]}),z$e=({signer:t})=>qe({abi:Yn.abi,functionName:"removeSigner",args:[t]}),q$e=({client:t,multiSigDeleGatorAddress:e,oldSigner:n,newSigner:r})=>un(t,{address:e,abi:Yn.abi,functionName:"replaceSigner",args:[n,r]}),K$e=({oldSigner:t,newSigner:e})=>qe({abi:Yn.abi,functionName:"replaceSigner",args:[t,e]}),V$e=({client:t,multiSigDeleGatorAddress:e,threshold:n})=>un(t,{address:e,abi:Yn.abi,functionName:"updateThreshold",args:[n]}),W$e=({threshold:t})=>qe({abi:Yn.abi,functionName:"updateThreshold",args:[t]}),G$e=({client:t,multiSigDeleGatorAddress:e,owners:n,threshold:r,removeExistingOwners:a})=>un(t,{address:e,abi:Yn.abi,functionName:"updateMultiSigParameters",args:[n,r,a]}),Y$e=({owners:t,threshold:e,removeExistingOwners:n})=>qe({abi:Yn.abi,functionName:"updateMultiSigParameters",args:[t,e,n]}),XV={};qt(XV,{create2Deploy:()=>eW});var QV=({client:t,factoryAddress:e,creationCode:n,salt:r})=>un(t,{address:e,abi:sm.abi,functionName:"deploy",args:[n,r]}),eW=(t,e)=>qe({abi:sm.abi,functionName:"deploy",args:[t,e]}),J$e=async({client:t,factoryAddress:e,creationCode:n,salt:r})=>{const{request:a}=await QV({client:t,factoryAddress:e,creationCode:n,salt:r});return $r(t,a)},Z$e={};qt(Z$e,{encodeProxyCreationCode:()=>aW,isContractDeployed:()=>rW,isImplementationExpected:()=>iLe});var tW={};qt(tW,{getDelegationManager:()=>X$e,getDeposit:()=>Q$e,getEntryPoint:()=>eLe,getNonce:()=>tLe,getProxyImplementation:()=>nW,getProxyVersion:()=>nLe,isValidSignature:()=>rLe});var X$e=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:u0.abi,functionName:"delegationManager"}),Q$e=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:u0.abi,functionName:"getDeposit"}),eLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:u0.abi,functionName:"entryPoint"}),tLe=async({client:t,contractAddress:e,key:n})=>await St(t,{address:e,abi:u0.abi,functionName:"getNonce",args:n?[n]:void 0}),nW=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:u0.abi,functionName:"getImplementation"}),nLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:u0.abi,functionName:"getInitializedVersion"}),rLe=async({client:t,contractAddress:e,hash:n,signature:r})=>await St(t,{address:e,abi:u0.abi,functionName:"isValidSignature",args:[n,r]}),aLe=({hash:t,signature:e})=>qe({abi:u0.abi,functionName:"isValidSignature",args:[t,e]});async function rW({client:t,contractAddress:e}){const n=await wp(t,{address:e});return!!n&&n!=="0x"}async function iLe({client:t,contractAddress:e,expectedImplementationAddress:n}){return await rW({client:t,contractAddress:e})?await nW({client:t,contractAddress:e})===n:!1}var aW=({implementationAddress:t,initcode:e})=>Bu({abi:z7.abi,args:[t,e],bytecode:z7.bytecode}),sLe=async({factory:t,implementations:e,implementation:n,deployParams:r,deploySalt:a})=>{let i,s;switch(n){case Zo.Hybrid:const[u,f,p,h]=r;i=e.HybridDeleGatorImpl;const b=f.map((T,A)=>({keyId:T,x:p[A],y:h[A]}));s=YV({eoaOwner:u,p256Owners:b});break;case Zo.MultiSig:const[v,m]=r;i=e.MultiSigDeleGatorImpl,s=ZV({owners:v,threshold:m});break;default:throw new Error(`Implementation type '${n}' not supported`)}const o=Rn(a,{dir:"left",size:32}),c=aW({implementationAddress:i,initcode:s}),d=Nx({bytecode:c,from:t,opcode:"CREATE2",salt:o});return{factoryData:eW(c,o),address:d}},iW={};qt(iW,{disableDelegation:()=>cLe,enableDelegation:()=>lLe,execute:()=>dW,executeWithMode:()=>uW,isValidSignature:()=>aLe,upgradeToAndCall:()=>hLe});var sW=({client:t,delegationManagerAddress:e,delegation:n})=>{const r=u0.abi,a=eo(n);return un(t,{address:e,abi:r,functionName:"disableDelegation",args:[a]})},oLe=async({client:t,delegationManagerAddress:e,delegation:n})=>{const{request:r}=await sW({client:t,delegationManagerAddress:e,delegation:n});return $r(t,r)},cLe=({delegation:t})=>{const e=eo(t);return qe({abi:u0.abi,functionName:"disableDelegation",args:[e]})},oW=({client:t,delegationManagerAddress:e,delegation:n})=>{const r=u0.abi,a=eo(n);return un(t,{address:e,abi:r,functionName:"enableDelegation",args:[a]})},dLe=async({client:t,delegationManagerAddress:e,delegation:n})=>{const{request:r}=await oW({client:t,delegationManagerAddress:e,delegation:n});return $r(t,r)},lLe=({delegation:t})=>{const e=eo(t);return qe({abi:u0.abi,functionName:"enableDelegation",args:[e]})},cW=({client:t,contractAddress:e,execution:n})=>un(t,{address:e,abi:u0.abi,functionName:"execute",args:[n]}),uLe=async({client:t,contractAddress:e,execution:n})=>{const{request:r}=await cW({client:t,contractAddress:e,execution:n});return $r(t,r)},dW=({execution:t})=>qe({abi:u0.abi,functionName:"execute",args:[t]}),lW=({client:t,contractAddress:e,mode:n,executions:r})=>un(t,{address:e,abi:u0.abi,functionName:"execute",args:[n,Yx(r)]}),fLe=async({client:t,contractAddress:e,mode:n,executions:r})=>{const{request:a}=await lW({client:t,contractAddress:e,mode:n,executions:r});return $r(t,a)},uW=({mode:t,executions:e})=>qe({abi:u0.abi,functionName:"execute",args:[t,Yx(e)]}),fW=({client:t,contractAddress:e,implementation:n,data:r})=>un(t,{address:e,abi:u0.abi,functionName:"upgradeToAndCall",args:[n,r]}),pLe=async({client:t,contractAddress:e,implementation:n,data:r})=>{const{request:a}=await fW({client:t,contractAddress:e,implementation:n,data:r});return $r(t,a)},hLe=({implementation:t,data:e})=>qe({abi:u0.abi,functionName:"upgradeToAndCall",args:[t,e]}),bLe=async(t,e)=>{if(e.length===1){const n=e[0];if(n.to===t&&!q7(n))return n.data||"0x"}return yLe(e)},yLe=t=>{if(t.length===1&&!q7(t[0])){const{to:r,value:a,data:i}=t[0],s=Ob(r,a,i);return dW({execution:s})}const e=t.map(r=>{if(q7(r)){const{permissionsContext:a,delegationManager:i}=r,s=qe({abi:Qs.abi,functionName:"redeemDelegations",args:[[a],[DN],Jx([[Ob(r.to,r.value,r.data)]])]});return Ob(i,0n,s)}else{const{to:a,value:i,data:s}=r;return Ob(a,i,s)}}),n=t.length===1?DN:r$e;return uW({mode:n,executions:e})},q7=t=>"permissionsContext"in t&&"delegationManager"in t,pW={};qt(pW,{entryPointGetNonce:()=>hW});var hW=async({client:t,entryPoint:e,contractAddress:n,key:r})=>await St(t,{address:e,abi:jV.abi,functionName:"getNonce",args:[n,r]}),mLe="0.7";async function LN(t){const{client:e,client:{chain:n},implementation:r}=t;if(!n)throw new Error("Chain not specified");const a=S$e({implementation:r,signatory:t.signatory}),i=t.environment??h$e(n.id),s=r===Zo.Hybrid?"HybridDeleGator":"MultiSigDeleGator";let o,c;if(t.address)c=void 0,o=t.address;else{const T=await sLe({factory:i.SimpleFactory,implementations:i.implementations,implementation:r,deployParams:t.deployParams,deploySalt:t.deploySalt});o=T.address,c=T.factoryData}const d={abi:nm,address:i.EntryPoint,version:mLe},l=async()=>{if(c===void 0)throw new Error("Deploy params were not provided, so factory args cannot be inferred");return{factoryData:c,factory:i.SimpleFactory}},u=T=>{const{delegation:A,chainId:N}=T,R=eo({...A,signature:"0x"});return a.signTypedData({domain:{chainId:N||n.id,name:"DelegationManager",version:"1",verifyingContract:i.DelegationManager},types:u$e,primaryType:"Delegation",message:R})},f=async T=>{const{chainId:A}=T,N=Kx({sender:o,...T,signature:"0x"});return await a.signTypedData({domain:{chainId:A||n.id,name:s,version:"1",verifyingContract:o},types:y$e,primaryType:"PackedUserOperation",message:{...N,entryPoint:d.address}})},p=r===Zo.Hybrid?Lr.abi:Yn.abi;return await Uu({abi:p,client:e,entryPoint:d,environment:i,getAddress:async()=>o,getFactoryArgs:l,encodeCalls:async T=>bLe(o,T),getNonce:()=>hW({client:e,entryPoint:i.EntryPoint,contractAddress:o,key:0n}),signUserOperation:f,signDelegation:u,...a})}var bW={};qt(bW,{disableDelegation:()=>wLe,enableDelegation:()=>ELe,redeemDelegations:()=>TLe});var yW=({client:t,delegationManagerAddress:e,delegation:n})=>{const r=Qs.abi,a=eo(n);return un(t,{address:e,abi:r,functionName:"disableDelegation",args:[a]})},gLe=async({client:t,delegationManagerAddress:e,delegation:n})=>{const{request:r}=await yW({client:t,delegationManagerAddress:e,delegation:n});return $r(t,r)},wLe=({delegation:t})=>{const e=eo(t);return qe({abi:Qs.abi,functionName:"disableDelegation",args:[e]})},mW=({client:t,delegationManagerAddress:e,delegation:n})=>{const r=Qs.abi,a=eo(n);return un(t,{address:e,abi:r,functionName:"enableDelegation",args:[a]})},vLe=async({client:t,delegationManagerAddress:e,delegation:n})=>{const{request:r}=await mW({client:t,delegationManagerAddress:e,delegation:n});return $r(t,r)},ELe=({delegation:t})=>{const e=eo(t);return qe({abi:Qs.abi,functionName:"enableDelegation",args:[e]})},gW=({client:t,delegationManagerAddress:e,delegations:n,modes:r,executions:a})=>{const i=Qs.abi;return un(t,{address:e,abi:i,functionName:"redeemDelegations",args:[zV(n),r,Jx(a)]})},_Le=async({client:t,delegationManagerAddress:e,delegations:n,modes:r,executions:a})=>{const{request:i}=await gW({client:t,delegationManagerAddress:e,delegations:n,modes:r,executions:a});return $r(t,i)},TLe=({delegations:t,modes:e,executions:n})=>qe({abi:Qs.abi,functionName:"redeemDelegations",args:[zV(t),e,Jx(n)]}),wW={};qt(wW,{disableDelegation:()=>gLe,enableDelegation:()=>vLe,redeemDelegations:()=>_Le});var vW={};qt(vW,{getAnyDelegate:()=>xLe,getRootAuthority:()=>SLe});var xLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:Qs.abi,functionName:"ANY_DELEGATE"}),SLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:Qs.abi,functionName:"ROOT_AUTHORITY"}),EW={};qt(EW,{disableDelegation:()=>yW,enableDelegation:()=>mW,redeemDelegations:()=>gW});var ALe={};qt(ALe,{ANY_DELEGATE:()=>PLe,DOMAIN_VERSION:()=>OLe,NAME:()=>CLe,ROOT_AUTHORITY:()=>MLe,VERSION:()=>ILe});var CLe="DelegationManager",ILe="1.3.0",OLe="1",MLe="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",PLe="0x0000000000000000000000000000000000000a11",_W={};qt(_W,{disableDelegation:()=>oLe,enableDelegation:()=>dLe,execute:()=>uLe,executeWithMode:()=>fLe,upgradeToAndCall:()=>pLe});var TW={};qt(TW,{disableDelegation:()=>sW,enableDelegation:()=>oW,execute:()=>cW,executeWithMode:()=>lW,upgradeToAndCall:()=>fW});var xW={};qt(xW,{getContractName:()=>kLe,getContractVersion:()=>NLe,getDomainVersion:()=>RLe});var kLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:[{type:"function",name:"NAME",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"}],functionName:"NAME"}),NLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:[{type:"function",name:"VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"}],functionName:"VERSION"}),RLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:[{type:"function",name:"DOMAIN_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"}],functionName:"DOMAIN_VERSION"}),SW={};qt(SW,{getKey:()=>DLe,getKeyIdHashes:()=>$Le,getKeyIdHashesCount:()=>LLe});var DLe=async({client:t,hybridDeleGatorAddress:e,keyId:n})=>await St(t,{address:e,abi:Lr.abi,functionName:"getKey",args:[n]}),$Le=async({client:t,hybridDeleGatorAddress:e})=>await St(t,{address:e,abi:Lr.abi,functionName:"getKeyIdHashes"}),LLe=async({client:t,hybridDeleGatorAddress:e})=>await St(t,{address:e,abi:Lr.abi,functionName:"getKeyIdHashesCount"}),AW={};qt(AW,{addKey:()=>I$e,initializeHybridDeleGator:()=>M$e,reinitializeHybridDeleGator:()=>P$e,removeKey:()=>N$e,updateSigners:()=>D$e});var BLe={};qt(BLe,{ANY_DELEGATE:()=>zLe,DOMAIN_VERSION:()=>jLe,NAME:()=>FLe,ROOT_AUTHORITY:()=>HLe,VERSION:()=>ULe});var FLe="HybridDeleGator",ULe="1.3.0",jLe="1",HLe="0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",zLe="0x0000000000000000000000000000000000000a11",CW={};qt(CW,{getMaxNumberOfSigners:()=>GLe,getSigners:()=>qLe,getSignersCount:()=>KLe,getThreshold:()=>VLe,isSigner:()=>WLe});var qLe=async({client:t,multiSigDeleGatorAddress:e})=>await St(t,{address:e,abi:Yn.abi,functionName:"getSigners"}),KLe=async({client:t,multiSigDeleGatorAddress:e})=>await St(t,{address:e,abi:Yn.abi,functionName:"getSignersCount"}),VLe=async({client:t,multiSigDeleGatorAddress:e})=>await St(t,{address:e,abi:Yn.abi,functionName:"getThreshold"}),WLe=async({client:t,multiSigDeleGatorAddress:e,signer:n})=>await St(t,{address:e,abi:Yn.abi,functionName:"isSigner",args:[n]}),GLe=async({client:t,multiSigDeleGatorAddress:e})=>await St(t,{address:e,abi:Yn.abi,functionName:"MAX_NUMBER_OF_SIGNERS"}),IW={};qt(IW,{addSigner:()=>L$e,initializeMultiSigDeleGator:()=>F$e,reinitializeMultiSigDeleGator:()=>U$e,removeSigner:()=>H$e,replaceSigner:()=>q$e,updateMultiSigParameters:()=>G$e,updateThreshold:()=>V$e});var YLe={};qt(YLe,{MAX_NUMBER_OF_SIGNERS:()=>JLe});var JLe=30,OW={};qt(OW,{getOwner:()=>XLe,getPendingOwner:()=>ZLe});var ZLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:ac.abi,functionName:"pendingOwner"}),XLe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:ac.abi,functionName:"owner"}),MW={};qt(MW,{acceptOwnership:()=>rBe,renounceOwnership:()=>tBe,transferOwnership:()=>QLe});var PW=({client:t,contractAddress:e,account:n})=>un(t,{address:e,abi:ac.abi,functionName:"transferOwnership",args:[n]}),QLe=async({client:t,contractAddress:e,account:n})=>{const{request:r}=await PW({client:t,contractAddress:e,account:n});return $r(t,r)},eBe=t=>qe({abi:ac.abi,functionName:"transferOwnership",args:[t]}),kW=({client:t,contractAddress:e})=>un(t,{address:e,abi:ac.abi,functionName:"renounceOwnership"}),tBe=async({client:t,contractAddress:e})=>{const{request:n}=await kW({client:t,contractAddress:e});return $r(t,n)},nBe=()=>qe({abi:ac.abi,functionName:"renounceOwnership"}),NW=({client:t,contractAddress:e})=>un(t,{address:e,abi:ac.abi,functionName:"acceptOwnership"}),rBe=async({client:t,contractAddress:e})=>{const{request:n}=await NW({client:t,contractAddress:e});return $r(t,n)},aBe=()=>qe({abi:ac.abi,functionName:"acceptOwnership"}),RW={};qt(RW,{acceptOwnership:()=>aBe,renounceOwnership:()=>nBe,transferOwnership:()=>eBe});var DW={};qt(DW,{acceptOwnership:()=>NW,renounceOwnership:()=>kW,transferOwnership:()=>PW});var $W={};qt($W,{isPaused:()=>iBe});var iBe=async({client:t,contractAddress:e})=>await St(t,{address:e,abi:HV.abi,functionName:"paused"}),LW={};qt(LW,{pause:()=>sBe,unpause:()=>cBe});var BW=[{type:"function",name:"pause",inputs:[],outputs:[],stateMutability:"nonpayable"}],FW=({client:t,contractAddress:e})=>un(t,{address:e,abi:BW,functionName:"pause"}),sBe=async({client:t,contractAddress:e})=>{const{request:n}=await FW({client:t,contractAddress:e});return $r(t,n)},oBe=()=>qe({abi:BW,functionName:"pause"}),UW=[{type:"function",name:"unpause",inputs:[],outputs:[],stateMutability:"nonpayable"}],jW=({client:t,contractAddress:e})=>un(t,{address:e,abi:UW,functionName:"unpause"}),cBe=async({client:t,contractAddress:e})=>{const{request:n}=await jW({client:t,contractAddress:e});return $r(t,n)},dBe=()=>qe({abi:UW,functionName:"unpause"}),HW={};qt(HW,{pause:()=>oBe,unpause:()=>dBe});var zW={};qt(zW,{pause:()=>FW,unpause:()=>jW});var qW={};qt(qW,{getCreate2Address:()=>lBe});var lBe=(t,e,n,r)=>St(t,{address:e,abi:sm.abi,functionName:"computeAddress",args:[n,r]}),KW={};qt(KW,{create2Deploy:()=>QV});var VW={};qt(VW,{create2Deploy:()=>J$e});({...GV,...JV,...bW,...iW,...RW,...HW,...XV});({...wW,...MW,...LW,...VW,..._W});({...SW,...CW,...tW,...vW,...pW,...xW,...OW,...$W,...qW});({...AW,...IW,...EW,...TW,...DW,...zW,...KW});function uBe(t){return t===Zo.Hybrid}class Xx{constructor(e){re(this,"name",xr.METAMASK),re(this,"options",void 0),this.options=e}async getSmartAccount(e){var n,r,a,i,s,o,c,d,l,u,f,p,h,b;const v={walletClient:e.walletClient,webAuthnAccount:(n=this.options)===null||n===void 0||(n=n.hybridParams)===null||n===void 0?void 0:n.webAuthnAccount,keyId:(r=this.options)===null||r===void 0||(r=r.hybridParams)===null||r===void 0?void 0:r.keyId},m=[{walletClient:e.walletClient},...(((a=this.options)===null||a===void 0||(a=a.multiSigParams)===null||a===void 0?void 0:a.additionalSignerWalletClients)||[]).map(F=>({walletClient:F}))],[T]=await e.walletClient.getAddresses(),A=[T,[...((i=this.options)===null||i===void 0||(i=i.hybridParams)===null||i===void 0?void 0:i.p256KeyIds)||[]],[...((s=this.options)===null||s===void 0||(s=s.hybridParams)===null||s===void 0?void 0:s.p256XValues)||[]],[...((o=this.options)===null||o===void 0||(o=o.hybridParams)===null||o===void 0?void 0:o.p256YValues)||[]]],N=[[T,...((c=this.options)===null||c===void 0||(c=c.multiSigParams)===null||c===void 0?void 0:c.additionalSignerAddresses)||[]],(d=(l=this.options)===null||l===void 0||(l=l.multiSigParams)===null||l===void 0?void 0:l.threshold)!==null&&d!==void 0?d:BigInt(1+(((u=this.options)===null||u===void 0||(u=u.multiSigParams)===null||u===void 0||(u=u.additionalSignerWalletClients)===null||u===void 0?void 0:u.length)||0))],R={client:e.client,deploySalt:(f=(p=this.options)===null||p===void 0?void 0:p.deploySalt)!==null&&f!==void 0?f:"0x0"},B=(h=(b=this.options)===null||b===void 0?void 0:b.implementation)!==null&&h!==void 0?h:Zo.Hybrid;if(uBe(B)){const F=Q(Q({},R),{},{implementation:B,deployParams:A,signatory:v});return LN(F)}else{const F=Q(Q({},R),{},{implementation:B,deployParams:N,signatory:m});return LN(F)}}}class Qx{constructor(e){re(this,"name",xr.NEXUS),re(this,"options",void 0),this.options=e}async getSmartAccount(e){var n,r,a;return ZOe(Q(Q(Q({},this.options||{}),{},{entryPoint:{address:((n=this.options)===null||n===void 0||(n=n.entryPoint)===null||n===void 0?void 0:n.address)||mh,version:((r=this.options)===null||r===void 0||(r=r.entryPoint)===null||r===void 0?void 0:r.version)||"0.7"},version:((a=this.options)===null||a===void 0?void 0:a.version)||"1.0.0"},e),{},{owners:[e.walletClient],client:e.client}))}}class eS{constructor(e){re(this,"name",xr.SAFE),re(this,"options",void 0),this.options=e}async getSmartAccount(e){var n,r,a;return AOe(Q(Q(Q({},this.options||{}),{},{entryPoint:{address:((n=this.options)===null||n===void 0||(n=n.entryPoint)===null||n===void 0?void 0:n.address)||mh,version:((r=this.options)===null||r===void 0||(r=r.entryPoint)===null||r===void 0?void 0:r.version)||"0.7"},version:((a=this.options)===null||a===void 0?void 0:a.version)||"1.4.1"},e),{},{owners:[e.walletClient],client:e.client}))}}class tS{constructor(e){re(this,"name",xr.TRUST),re(this,"options",void 0),this.options=e}async getSmartAccount(e){var n,r;return lOe(Q(Q(Q({},this.options||{}),{},{entryPoint:{address:((n=this.options)===null||n===void 0||(n=n.entryPoint)===null||n===void 0?void 0:n.address)||im,version:((r=this.options)===null||r===void 0||(r=r.entryPoint)===null||r===void 0?void 0:r.version)||"0.6"}},e),{},{owner:e.walletClient,client:e.client}))}}const Ll=Object.freeze(Object.defineProperty({__proto__:null,BiconomySmartAccount:Wx,KernelSmartAccount:Gx,METHOD_TYPES:Z5,MetamaskSmartAccount:Xx,NexusSmartAccount:Qx,SMART_ACCOUNT:xr,SafeSmartAccount:eS,TrustSmartAccount:tS},Symbol.toStringTag,{value:"Module"}));async function fBe({eoaProvider:t,handlers:e}){const[n]=await t.request({method:Z5.GET_ACCOUNTS});async function r(p,h){if(typeof p=="string"&&p.length>0){const v=(await e.getAccounts(h)).map(T=>T.toLowerCase()),m=p.toLowerCase();if(v.includes(m))return m}throw Ut.invalidParams({message:"Invalid parameters: must provide an Ethereum address."})}async function a(p,h){if(p.toLowerCase()===n.toLowerCase())return n;const[b]=await e.getAccounts(h);if(p.toLowerCase()===b.toLowerCase())return n;throw Ut.invalidParams({message:"Invalid parameters: must provide valid sender address."})}async function i(p,h){h.result=await e.getAccounts(p)}async function s(p,h){if(!e.getPrivateKey)throw Ut.methodNotSupported();h.result=await e.getPrivateKey(p)}async function o(p,h){if(!e.processTransaction)throw Ut.methodNotSupported();const b=p.params[0]||{from:""};b.from=await r(b.from,p),h.result=e.processTransaction(b,p)}async function c(p,h){const b=p.params[0]||{from:""};b.from&&(b.from=await a(b.from,p)),h.result=await e.processSignTransaction(b,p)}async function d(p,h){let b=p.params;const v=p.params[2]||{};if(Array.isArray(p.params)){if(p.params.length!==2)throw new Error(`WalletMiddleware - incorrect params for ${p.method} method. expected [address, message]`);const m=p.params,T=m[0],A=m[1];b={from:T,data:A}}b=Q(Q({},v),b),h.result=await e.processEthSignMessage(b,p)}async function l(p,h){if(!(p!=null&&p.params))throw new Error("WalletMiddleware - missing params");let b=p.params;if(Array.isArray(p.params)){if(p.params.length!==2)throw new Error(`WalletMiddleware - incorrect params for ${p.method} method. expected [address, typedData]`);const v=p.params,m=v[0],T=v[1];b={from:m,data:T}}h.result=await e.processTypedMessageV4(b,p)}async function u(p,h){let b=p.params;const v=p.params[2]||{};if(Array.isArray(p.params)){if(!(p.params.length>=2))throw new Error(`WalletMiddleware - incorrect params for ${p.method} method. expected [message, address]`);const m=p.params;if(typeof m[0]=="object"){const{challenge:T,address:A}=m[0];b={from:A,data:T}}else{const T=m[0];b={from:m[1],data:T}}}b=Q(Q({},v),b),h.result=await e.processPersonalMessage(b,p)}async function f(p,h){if(!e.getPublicKey)throw Ut.methodNotSupported();h.result=await e.getPublicKey(p)}return vu({eth_accounts:Qt(i),eth_requestAccounts:Qt(i),eth_private_key:Qt(s),private_key:Qt(s),eth_public_key:Qt(f),public_key:Qt(f),eth_sendTransaction:Qt(o),eth_signTransaction:Qt(c),eth_sign:Qt(d),eth_signTypedData_v4:Qt(l),personal_sign:Qt(u)})}async function pBe({aaProvider:t}){async function e(r,a){const[,i]=await t.request({method:Z5.GET_ACCOUNTS});a.result=[i]}async function n(r,a){const[,i]=await t.request({method:Z5.ETH_REQUEST_ACCOUNTS});a.result=[i]}return vu({eth_accounts:Qt(e),eth_requestAccounts:Qt(n)})}function WW(t){return async(e,n,r,a)=>{try{const i=await t.request(e);return n.result=i,a()}catch(i){return a(i)}}}function hBe({bundlerClient:t,smartAccount:e,chain:n,eoaProvider:r}){const a=qx({account:e,chain:n,transport:C2()});return{getAccounts:async i=>{const[s,o]=await Promise.all([e.getAddress(),r.request({method:"eth_accounts"})]);return Te.info("smartAccounts",s),Te.info("eoaAccounts",o),[s,...o]},getPrivateKey:async i=>{throw Ar.custom({message:"Smart accounts do not have private key",code:4903})},getPublicKey:async i=>{throw Ar.custom({message:"Smart accounts do not have a public key. Use address instead.",code:4903})},processTransaction:async i=>{i.input&&!i.data&&(i.data=Pse(i.input));const{to:s,value:o,data:c}=i,d={account:e,calls:[{to:s,value:BigInt(o),data:c}]},l=await t.sendUserOperation(d),u=await t.waitForUserOperationReceipt({hash:l});if(!u.success)throw Ar.custom({message:u.reason,code:4905});return u.receipt.transactionHash},processSignTransaction:async i=>{const{to:s,value:o,data:c}=i,d=await t.prepareUserOperation({account:e,calls:[{to:s,value:BigInt(o),data:c}]});return await e.signUserOperation({callData:d.callData,callGasLimit:d.callGasLimit,maxFeePerGas:d.maxFeePerGas,maxPriorityFeePerGas:d.maxPriorityFeePerGas,nonce:d.nonce,preVerificationGas:d.preVerificationGas,verificationGasLimit:d.verificationGasLimit,signature:d.signature})},processEthSignMessage:async(i,s)=>r.request(s),processPersonalMessage:async(i,s)=>{const o=i.data;return a.signMessage({account:e,message:EL(o)?{raw:o}:o})},processTypedMessageV4:async(i,s)=>{try{const o=typeof i.data=="string"?JSON.parse(i.data):i.data;return await a.signTypedData({account:e,domain:Q(Q({},o.domain),{},{verifyingContract:o.domain.verifyingContract,salt:o.domain.salt,chainId:Number(o.domain.chainId)}),primaryType:o.primaryType,types:o.types,message:o.message})}catch(o){throw Ar.custom({message:o instanceof Error?o.message:"Failed to sign typed data",code:4905})}}}}var GW;class nS extends Qd{constructor({config:e,state:n}){super({config:e,state:n}),re(this,"PROVIDER_CHAIN_NAMESPACE",Qe.EIP155),re(this,"_smartAccount",void 0),re(this,"_publicClient",void 0),re(this,"_bundlerClient",void 0),re(this,"_paymasterClient",void 0),re(this,"_useProviderAsTransport",void 0),this.update({chainId:e.chain.chainId})}get smartAccount(){return this._smartAccount}get bundlerClient(){return this._bundlerClient}get paymasterClient(){return this._paymasterClient}get publicClient(){return this._publicClient}async enable(){if(!this.state.eoaProvider)throw Ar.custom({message:"eoaProvider is not found in state, please pass it",code:4902});return await this.setupProvider(this.state.eoaProvider),this._providerEngineProxy.request({method:"eth_accounts"})}async setupProvider(e){var n;const{currentChain:r}=this,{chainNamespace:a}=r;if(a!==this.PROVIDER_CHAIN_NAMESPACE)throw Me.incompatibleChainNameSpace("Invalid chain namespace");const i=this.config.smartAccountChainsConfig.find(m=>m.chainId===r.chainId);if(!i)throw Me.invalidProviderConfigError(`Bundler and paymaster config not found for chain ${r.chainId}`);const{bundlerConfig:s,paymasterConfig:o}=i,c=OAe({id:Number.parseInt(r.chainId,16),name:r.displayName,rpcUrls:{default:{http:[r.rpcTarget],webSocket:[r.wsTarget]}},blockExplorers:r.blockExplorerUrl?{default:{name:"explorer",url:r.blockExplorerUrl}}:void 0,nativeCurrency:{name:r.tickerName,symbol:r.ticker,decimals:r.decimals||18}});this._publicClient=hIe({chain:c,transport:C2(r.rpcTarget)});const[d]=await e.request({method:Z5.ETH_REQUEST_ACCOUNTS}),l=qx({account:d,chain:c,transport:A2(e)});if(this._smartAccount=await this.config.smartAccountInit.getSmartAccount({walletClient:l,client:this._publicClient}),o){var u;this._paymasterClient=aOe(Q(Q({},o),{},{transport:this._useProviderAsTransport?A2(e):(u=o.transport)!==null&&u!==void 0?u:C2(o.url)}))}this._bundlerClient=rOe(Q(Q({},s),{},{account:this.smartAccount,client:this._publicClient,transport:this._useProviderAsTransport?A2(e):(n=s.transport)!==null&&n!==void 0?n:C2(s.url),paymaster:this._paymasterClient}));const f=hBe({bundlerClient:this._bundlerClient,smartAccount:this._smartAccount,chain:c,eoaProvider:e}),p=new cr,h=await fBe({eoaProvider:e,handlers:f});p.push(h);const b=WW(e);p.push(b);const v=Sd(p);this.updateProviderEngineProxy(v),e.once("chainChanged",m=>{this.update({chainId:m}),this.setupChainSwitchMiddleware(),this.emit("chainChanged",m)})}async updateAccount(e){throw Ar.unsupportedMethod("updateAccount. Please call it on eoaProvider")}async switchChain(e){throw Ar.unsupportedMethod("switchChain. Please call it on eoaProvider")}async lookupNetwork(){throw Ar.unsupportedMethod("lookupNetwork. Please call it on eoaProvider")}async setupChainSwitchMiddleware(){return this.setupProvider(this.state.eoaProvider)}}GW=nS;re(nS,"getProviderInstance",async t=>{const e=new GW({config:t});return e._useProviderAsTransport=t.useProviderAsTransport,await e.setupProvider(t.eoaProvider),e.update({eoaProvider:t.eoaProvider}),e});const YW=async({accountAbstractionConfig:t,chain:e,chains:n,provider:r,useProviderAsTransport:a})=>{let i;const{smartAccountType:s,chains:o}=t,{smartAccountConfig:c}=o.find(d=>d.chainId===e.chainId)||{};switch(s){case xr.BICONOMY:{const{BiconomySmartAccount:d}=await xt(async()=>{const{BiconomySmartAccount:l}=await Promise.resolve().then(()=>Ll);return{BiconomySmartAccount:l}},void 0);i=new d(c);break}case xr.KERNEL:{const{KernelSmartAccount:d}=await xt(async()=>{const{KernelSmartAccount:l}=await Promise.resolve().then(()=>Ll);return{KernelSmartAccount:l}},void 0);i=new d(c);break}case xr.NEXUS:{const{NexusSmartAccount:d}=await xt(async()=>{const{NexusSmartAccount:l}=await Promise.resolve().then(()=>Ll);return{NexusSmartAccount:l}},void 0);i=new d(c);break}case xr.SAFE:{const{SafeSmartAccount:d}=await xt(async()=>{const{SafeSmartAccount:l}=await Promise.resolve().then(()=>Ll);return{SafeSmartAccount:l}},void 0);i=new d(c);break}case xr.TRUST:{const{TrustSmartAccount:d}=await xt(async()=>{const{TrustSmartAccount:l}=await Promise.resolve().then(()=>Ll);return{TrustSmartAccount:l}},void 0);i=new d(c);break}case xr.METAMASK:{const{MetamaskSmartAccount:d}=await xt(async()=>{const{MetamaskSmartAccount:l}=await Promise.resolve().then(()=>Ll);return{MetamaskSmartAccount:l}},void 0);i=new d(c);break}default:throw new Error("Smart account type not supported")}return nS.getProviderInstance({eoaProvider:r,smartAccountInit:i,chain:e,chains:n,smartAccountChainsConfig:o,useProviderAsTransport:a})},JW=async t=>{const e=new cr,n=await pBe({aaProvider:t});return e.push(n),e.push(WW(t)),Sd(e)};var ZW;class om extends Qd{constructor({config:e,state:n}){super({config:e,state:n}),re(this,"_providerEngineProxy",null)}get provider(){return this._providerEngineProxy}set provider(e){throw new Error("Method not implemented.")}async setupProvider(e){const n=this.getPrivKeyMiddleware(e),r=new cr;r.push(n);const a=Sd(r);this.updateProviderEngineProxy(a)}async switchChain(e){return Promise.resolve()}getProviderEngineProxy(){return this._providerEngineProxy}async lookupNetwork(){return Promise.resolve("")}getPrivKeyMiddleware(e){const n={getPrivatekey:async()=>{if(!this.config.keyExportEnabled)throw new Error("Exporting private key is disabled. Please enable it in the provider config");return e}};return this.createPrivKeyMiddleware(n)}createPrivKeyMiddleware({getPrivatekey:e}){async function n(r,a){try{a.result=await e()}catch(i){a.error=i instanceof Error?i.message:i}}return vu({private_key:Qt(n)})}}ZW=om;re(om,"getProviderInstance",async t=>{const e=new ZW({config:{chain:t.chain,chains:t.chains}});return await e.setupProvider(t.privKey),e});const XW="10.0.2",QW={hideWalletDiscovery:!1,connectors:{[x5.AUTH]:{label:"Auth",showOnModal:!0}}},eG="https://assets.web3auth.io/v1/wallet-registry.json",gn={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},Gc={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};gn.MAINNET+"",gn.TESTNET+"",gn.CYAN+"",gn.AQUA+"",gn.CELESTE+"";gn.AQUA+"",Gc.SAPPHIRE_MAINNET,gn.CELESTE+"",Gc.SAPPHIRE_MAINNET,gn.CYAN+"",Gc.SAPPHIRE_MAINNET,gn.MAINNET+"",Gc.SAPPHIRE_MAINNET,gn.TESTNET+"",Gc.SAPPHIRE_DEVNET;gn.MAINNET+"",gn.TESTNET+"",gn.CYAN+"",gn.AQUA+"",gn.CELESTE+"";Gc.SAPPHIRE_MAINNET+"",Gc.SAPPHIRE_DEVNET+"",gn.MAINNET+"",gn.TESTNET+"",gn.CYAN+"",gn.AQUA+"",gn.CELESTE+"";gn.MAINNET+"",gn.TESTNET+"",gn.CYAN+"",gn.AQUA+"",gn.CELESTE+"";const J8=Yi.getLogger("http-helpers");J8.setLevel(my.levels.INFO);let bBe="torus-default";const yBe="x-api-key";async function tG(t,e){let n=null;try{n=new URL(t)}catch{}return fetch(t,e)}function nG(){const t={};return t[yBe]=bBe,t}function rG(t){J8.info(`Response: ${t.status} ${t.statusText}`),J8.info(`Url: ${t.url}`)}function mBe(t){const e=t.headers.get("x-web3-correlation-id");e&&J8.info(`Request tracing with traceID = ${e}`)}const gBe=async(t,e)=>{let n=null;try{const r=new Promise((i,s)=>{n=setTimeout(()=>{s(new Error(`Timed out in ${t}ms`))},t)}),a=await Promise.race([e,r]);return n!=null&&clearTimeout(n),a}catch(r){throw n!=null&&clearTimeout(n),r}},wBe=async(t,e={},n={})=>{const r={mode:"cors",headers:{}};n.useAPIKey&&(r.headers=Q(Q({},r.headers),nG())),e.method="GET";const a=Kt(r,e),i=await tG(t,a);if(i.ok){const s=i.headers.get("content-type");return s!=null&&s.includes("application/json")?i.json():i.text()}throw rG(i),i},K7=(t,e={},n={},r={})=>{const a={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};r.useAPIKey&&(a.headers=Q(Q({},a.headers),nG())),n.method="POST";const i=Kt(a,n);return r.isUrlEncodedData?(i.body=e,i.headers["Content-Type"]==="application/json; charset=utf-8"&&delete i.headers["Content-Type"]):i.body=JSON.stringify(e),gBe(r.timeout||6e4,tG(t,i).then(s=>{if(r.logTracingHeader&&mBe(s),s.ok){const o=s.headers.get("content-type");return o!=null&&o.includes("application/json")?s.json():s.text()}throw rG(s),s}))},vBe=gn,EBe=Gc,_Be=Q(Q({},EBe),vBe),i6={PRODUCTION:"production",DEVELOPMENT:"development",STAGING:"staging",TESTING:"testing"},Ja={en:"en",ja:"ja",ko:"ko",de:"de",zh:"zh",es:"es",fr:"fr",pt:"pt",nl:"nl",tr:"tr"},TBe={en:"english",ja:"japanese",ko:"korean",de:"german",zh:"mandarin",es:"spanish",fr:"french",pt:"portuguese",nl:"dutch",tr:"turkish"};function BN(t,e,n){try{Reflect.apply(t,e,n)}catch(r){setTimeout(()=>{throw r})}}function xBe(t){const e=t.length,n=new Array(e);for(let r=0;r<e;r+=1)n[r]=t[r];return n}class SBe extends l0.EventEmitter{emit(e,...n){let r=e==="error";const a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){let s;if(n.length>0&&([s]=n),s instanceof Error)throw s;const o=new Error(`Unhandled error.${s?` (${s.message})`:""}`);throw o.context=s,o}const i=a[e];if(i===void 0)return!1;if(typeof i=="function")BN(i,this,n);else{const s=i.length,o=xBe(i);for(let c=0;c<s;c+=1)BN(o[c],this,n)}return!0}}const Ds={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},aG=Object.create(null);for(const t in Ds)Object.hasOwn(Ds,t)&&(aG[Ds[t]]=t);const s0={to:{},get:{}};s0.get=function(t){const e=t.slice(0,3).toLowerCase();let n,r;switch(e){case"hsl":{n=s0.get.hsl(t),r="hsl";break}case"hwb":{n=s0.get.hwb(t),r="hwb";break}default:{n=s0.get.rgb(t),r="rgb";break}}return n?{model:r,value:n}:null};s0.get.rgb=function(t){if(!t)return null;const e=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,i=/^(\w+)$/;let s=[0,0,0,1],o,c,d;if(o=t.match(n)){for(d=o[2],o=o[1],c=0;c<3;c++){const l=c*2;s[c]=Number.parseInt(o.slice(l,l+2),16)}d&&(s[3]=Number.parseInt(d,16)/255)}else if(o=t.match(e)){for(o=o[1],d=o[3],c=0;c<3;c++)s[c]=Number.parseInt(o[c]+o[c],16);d&&(s[3]=Number.parseInt(d+d,16)/255)}else if(o=t.match(r)){for(c=0;c<3;c++)s[c]=Number.parseInt(o[c+1],10);o[4]&&(s[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else if(o=t.match(a)){for(c=0;c<3;c++)s[c]=Math.round(Number.parseFloat(o[c+1])*2.55);o[4]&&(s[3]=o[5]?Number.parseFloat(o[4])*.01:Number.parseFloat(o[4]))}else return(o=t.match(i))?o[1]==="transparent"?[0,0,0,0]:Object.hasOwn(Ds,o[1])?(s=Ds[o[1]],s[3]=1,s):null:null;for(c=0;c<3;c++)s[c]=l1(s[c],0,255);return s[3]=l1(s[3],0,1),s};s0.get.hsl=function(t){if(!t)return null;const e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),a=(Number.parseFloat(n[1])%360+360)%360,i=l1(Number.parseFloat(n[2]),0,100),s=l1(Number.parseFloat(n[3]),0,100),o=l1(Number.isNaN(r)?1:r,0,1);return[a,i,s,o]}return null};s0.get.hwb=function(t){if(!t)return null;const e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=t.match(e);if(n){const r=Number.parseFloat(n[4]),a=(Number.parseFloat(n[1])%360+360)%360,i=l1(Number.parseFloat(n[2]),0,100),s=l1(Number.parseFloat(n[3]),0,100),o=l1(Number.isNaN(r)?1:r,0,1);return[a,i,s,o]}return null};s0.to.hex=function(...t){return"#"+Mb(t[0])+Mb(t[1])+Mb(t[2])+(t[3]<1?Mb(Math.round(t[3]*255)):"")};s0.to.rgb=function(...t){return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};s0.to.rgb.percent=function(...t){const e=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),r=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+n+"%, "+r+"%)":"rgba("+e+"%, "+n+"%, "+r+"%, "+t[3]+")"};s0.to.hsl=function(...t){return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};s0.to.hwb=function(...t){let e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};s0.to.keyword=function(...t){return aG[t.slice(0,3)]};function l1(t,e,n){return Math.min(Math.max(e,t),n)}function Mb(t){const e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}const iG={};for(const t of Object.keys(Ds))iG[Ds[t]]=t;const Fe={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},Ho=(6/29)**3;function x6(t){const e=t>.0031308?1.055*t**.4166666666666667-.055:t*12.92;return Math.min(Math.max(0,e),1)}function S6(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(Fe)){if(!("channels"in Fe[t]))throw new Error("missing channels property: "+t);if(!("labels"in Fe[t]))throw new Error("missing channel labels property: "+t);if(Fe[t].labels.length!==Fe[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:n}=Fe[t];delete Fe[t].channels,delete Fe[t].labels,Object.defineProperty(Fe[t],"channels",{value:e}),Object.defineProperty(Fe[t],"labels",{value:n})}Fe.rgb.hsl=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,a=Math.min(e,n,r),i=Math.max(e,n,r),s=i-a;let o,c;switch(i){case a:{o=0;break}case e:{o=(n-r)/s;break}case n:{o=2+(r-e)/s;break}case r:{o=4+(e-n)/s;break}}o=Math.min(o*60,360),o<0&&(o+=360);const d=(a+i)/2;return i===a?c=0:d<=.5?c=s/(i+a):c=s/(2-i-a),[o,c*100,d*100]};Fe.rgb.hsv=function(t){let e,n,r,a,i;const s=t[0]/255,o=t[1]/255,c=t[2]/255,d=Math.max(s,o,c),l=d-Math.min(s,o,c),u=function(f){return(d-f)/6/l+1/2};if(l===0)a=0,i=0;else{switch(i=l/d,e=u(s),n=u(o),r=u(c),d){case s:{a=r-n;break}case o:{a=1/3+e-r;break}case c:{a=2/3+n-e;break}}a<0?a+=1:a>1&&(a-=1)}return[a*360,i*100,d*100]};Fe.rgb.hwb=function(t){const e=t[0],n=t[1];let r=t[2];const a=Fe.rgb.hsl(t)[0],i=1/255*Math.min(e,Math.min(n,r));return r=1-1/255*Math.max(e,Math.max(n,r)),[a,i*100,r*100]};Fe.rgb.oklab=function(t){const e=S6(t[0]/255),n=S6(t[1]/255),r=S6(t[2]/255),a=Math.cbrt(.4122214708*e+.5363325363*n+.0514459929*r),i=Math.cbrt(.2119034982*e+.6806995451*n+.1073969566*r),s=Math.cbrt(.0883024619*e+.2817188376*n+.6299787005*r),o=.2104542553*a+.793617785*i-.0040720468*s,c=1.9779984951*a-2.428592205*i+.4505937099*s,d=.0259040371*a+.7827717662*i-.808675766*s;return[o*100,c*100,d*100]};Fe.rgb.cmyk=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,a=Math.min(1-e,1-n,1-r),i=(1-e-a)/(1-a)||0,s=(1-n-a)/(1-a)||0,o=(1-r-a)/(1-a)||0;return[i*100,s*100,o*100,a*100]};function ABe(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Fe.rgb.keyword=function(t){const e=iG[t];if(e)return e;let n=Number.POSITIVE_INFINITY,r;for(const a of Object.keys(Ds)){const i=Ds[a],s=ABe(t,i);s<n&&(n=s,r=a)}return r};Fe.keyword.rgb=function(t){return Ds[t]};Fe.rgb.xyz=function(t){const e=S6(t[0]/255),n=S6(t[1]/255),r=S6(t[2]/255),a=e*.4124564+n*.3575761+r*.1804375,i=e*.2126729+n*.7151522+r*.072175,s=e*.0193339+n*.119192+r*.9503041;return[a*100,i*100,s*100]};Fe.rgb.lab=function(t){const e=Fe.rgb.xyz(t);let n=e[0],r=e[1],a=e[2];n/=95.047,r/=100,a/=108.883,n=n>Ho?n**(1/3):7.787*n+16/116,r=r>Ho?r**(1/3):7.787*r+16/116,a=a>Ho?a**(1/3):7.787*a+16/116;const i=116*r-16,s=500*(n-r),o=200*(r-a);return[i,s,o]};Fe.hsl.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;let a,i;if(n===0)return i=r*255,[i,i,i];const s=r<.5?r*(1+n):r+n-r*n,o=2*r-s,c=[0,0,0];for(let d=0;d<3;d++)a=e+1/3*-(d-1),a<0&&a++,a>1&&a--,6*a<1?i=o+(s-o)*6*a:2*a<1?i=s:3*a<2?i=o+(s-o)*(2/3-a)*6:i=o,c[d]=i*255;return c};Fe.hsl.hsv=function(t){const e=t[0];let n=t[1]/100,r=t[2]/100,a=n;const i=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,a*=i<=1?i:2-i;const s=(r+n)/2,o=r===0?2*a/(i+a):2*n/(r+n);return[e,o*100,s*100]};Fe.hsv.rgb=function(t){const e=t[0]/60,n=t[1]/100;let r=t[2]/100;const a=Math.floor(e)%6,i=e-Math.floor(e),s=255*r*(1-n),o=255*r*(1-n*i),c=255*r*(1-n*(1-i));switch(r*=255,a){case 0:return[r,c,s];case 1:return[o,r,s];case 2:return[s,r,c];case 3:return[s,o,r];case 4:return[c,s,r];case 5:return[r,s,o]}};Fe.hsv.hsl=function(t){const e=t[0],n=t[1]/100,r=t[2]/100,a=Math.max(r,.01);let i,s;s=(2-n)*r;const o=(2-n)*a;return i=n*a,i/=o<=1?o:2-o,i=i||0,s/=2,[e,i*100,s*100]};Fe.hwb.rgb=function(t){const e=t[0]/360;let n=t[1]/100,r=t[2]/100;const a=n+r;let i;a>1&&(n/=a,r/=a);const s=Math.floor(6*e),o=1-r;i=6*e-s,s&1&&(i=1-i);const c=n+i*(o-n);let d,l,u;switch(s){default:case 6:case 0:{d=o,l=c,u=n;break}case 1:{d=c,l=o,u=n;break}case 2:{d=n,l=o,u=c;break}case 3:{d=n,l=c,u=o;break}case 4:{d=c,l=n,u=o;break}case 5:{d=o,l=n,u=c;break}}return[d*255,l*255,u*255]};Fe.cmyk.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,a=t[3]/100,i=1-Math.min(1,e*(1-a)+a),s=1-Math.min(1,n*(1-a)+a),o=1-Math.min(1,r*(1-a)+a);return[i*255,s*255,o*255]};Fe.xyz.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100;let a,i,s;return a=e*3.2404542+n*-1.5371385+r*-.4985314,i=e*-.969266+n*1.8760108+r*.041556,s=e*.0556434+n*-.2040259+r*1.0572252,a=x6(a),i=x6(i),s=x6(s),[a*255,i*255,s*255]};Fe.xyz.lab=function(t){let e=t[0],n=t[1],r=t[2];e/=95.047,n/=100,r/=108.883,e=e>Ho?e**(1/3):7.787*e+16/116,n=n>Ho?n**(1/3):7.787*n+16/116,r=r>Ho?r**(1/3):7.787*r+16/116;const a=116*n-16,i=500*(e-n),s=200*(n-r);return[a,i,s]};Fe.xyz.oklab=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,a=Math.cbrt(.8189330101*e+.3618667424*n-.1288597137*r),i=Math.cbrt(.0329845436*e+.9293118715*n+.0361456387*r),s=Math.cbrt(.0482003018*e+.2643662691*n+.633851707*r),o=.2104542553*a+.793617785*i-.0040720468*s,c=1.9779984951*a-2.428592205*i+.4505937099*s,d=.0259040371*a+.7827717662*i-.808675766*s;return[o*100,c*100,d*100]};Fe.oklab.oklch=function(t){return Fe.lab.lch(t)};Fe.oklab.xyz=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,a=(.999999998*e+.396337792*n+.215803758*r)**3,i=(1.000000008*e-.105561342*n-.063854175*r)**3,s=(1.000000055*e-.089484182*n-1.291485538*r)**3,o=1.227013851*a-.55779998*i+.281256149*s,c=-.040580178*a+1.11225687*i-.071676679*s,d=-.076381285*a-.421481978*i+1.58616322*s;return[o*100,c*100,d*100]};Fe.oklab.rgb=function(t){const e=t[0]/100,n=t[1]/100,r=t[2]/100,a=(e+.3963377774*n+.2158037573*r)**3,i=(e-.1055613458*n-.0638541728*r)**3,s=(e-.0894841775*n-1.291485548*r)**3,o=x6(4.0767416621*a-3.3077115913*i+.2309699292*s),c=x6(-1.2684380046*a+2.6097574011*i-.3413193965*s),d=x6(-.0041960863*a-.7034186147*i+1.707614701*s);return[o*255,c*255,d*255]};Fe.oklch.oklab=function(t){return Fe.lch.lab(t)};Fe.lab.xyz=function(t){const e=t[0],n=t[1],r=t[2];let a,i,s;i=(e+16)/116,a=n/500+i,s=i-r/200;const o=i**3,c=a**3,d=s**3;return i=o>Ho?o:(i-16/116)/7.787,a=c>Ho?c:(a-16/116)/7.787,s=d>Ho?d:(s-16/116)/7.787,a*=95.047,i*=100,s*=108.883,[a,i,s]};Fe.lab.lch=function(t){const e=t[0],n=t[1],r=t[2];let a;a=Math.atan2(r,n)*360/2/Math.PI,a<0&&(a+=360);const s=Math.sqrt(n*n+r*r);return[e,s,a]};Fe.lch.lab=function(t){const e=t[0],n=t[1],a=t[2]/360*2*Math.PI,i=n*Math.cos(a),s=n*Math.sin(a);return[e,i,s]};Fe.rgb.ansi16=function(t,e=null){const[n,r,a]=t;let i=e===null?Fe.rgb.hsv(t)[2]:e;if(i=Math.round(i/50),i===0)return 30;let s=30+(Math.round(a/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return i===2&&(s+=60),s};Fe.hsv.ansi16=function(t){return Fe.rgb.ansi16(Fe.hsv.rgb(t),t[2])};Fe.rgb.ansi256=function(t){const e=t[0],n=t[1],r=t[2];return e>>4===n>>4&&n>>4===r>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};Fe.ansi16.rgb=function(t){t=t[0];let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const n=(Math.trunc(t>50)+1)*.5,r=(e&1)*n*255,a=(e>>1&1)*n*255,i=(e>>2&1)*n*255;return[r,a,i]};Fe.ansi256.rgb=function(t){if(t=t[0],t>=232){const i=(t-232)*10+8;return[i,i,i]}t-=16;let e;const n=Math.floor(t/36)/5*255,r=Math.floor((e=t%36)/6)/5*255,a=e%6/5*255;return[n,r,a]};Fe.rgb.hex=function(t){const n=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};Fe.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let n=e[0];e[0].length===3&&(n=[...n].map(o=>o+o).join(""));const r=Number.parseInt(n,16),a=r>>16&255,i=r>>8&255,s=r&255;return[a,i,s]};Fe.rgb.hcg=function(t){const e=t[0]/255,n=t[1]/255,r=t[2]/255,a=Math.max(Math.max(e,n),r),i=Math.min(Math.min(e,n),r),s=a-i;let o;const c=s<1?i/(1-s):0;return s<=0?o=0:a===e?o=(n-r)/s%6:a===n?o=2+(r-e)/s:o=4+(e-n)/s,o/=6,o%=1,[o*360,s*100,c*100]};Fe.hsl.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=n<.5?2*e*n:2*e*(1-n);let a=0;return r<1&&(a=(n-.5*r)/(1-r)),[t[0],r*100,a*100]};Fe.hsv.hcg=function(t){const e=t[1]/100,n=t[2]/100,r=e*n;let a=0;return r<1&&(a=(n-r)/(1-r)),[t[0],r*100,a*100]};Fe.hcg.rgb=function(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100;if(n===0)return[r*255,r*255,r*255];const a=[0,0,0],i=e%1*6,s=i%1,o=1-s;let c=0;switch(Math.floor(i)){case 0:{a[0]=1,a[1]=s,a[2]=0;break}case 1:{a[0]=o,a[1]=1,a[2]=0;break}case 2:{a[0]=0,a[1]=1,a[2]=s;break}case 3:{a[0]=0,a[1]=o,a[2]=1;break}case 4:{a[0]=s,a[1]=0,a[2]=1;break}default:a[0]=1,a[1]=0,a[2]=o}return c=(1-n)*r,[(n*a[0]+c)*255,(n*a[1]+c)*255,(n*a[2]+c)*255]};Fe.hcg.hsv=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);let a=0;return r>0&&(a=e/r),[t[0],a*100,r*100]};Fe.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let a=0;return r>0&&r<.5?a=e/(2*r):r>=.5&&r<1&&(a=e/(2*(1-r))),[t[0],a*100,r*100]};Fe.hcg.hwb=function(t){const e=t[1]/100,n=t[2]/100,r=e+n*(1-e);return[t[0],(r-e)*100,(1-r)*100]};Fe.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,a=r-e;let i=0;return a<1&&(i=(r-a)/(1-a)),[t[0],a*100,i*100]};Fe.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Fe.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Fe.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Fe.gray.hsl=function(t){return[0,0,t[0]]};Fe.gray.hsv=Fe.gray.hsl;Fe.gray.hwb=function(t){return[0,100,t[0]]};Fe.gray.cmyk=function(t){return[0,0,0,t[0]]};Fe.gray.lab=function(t){return[t[0],0,0]};Fe.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(r.length)+r};Fe.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function CBe(){const t={},e=Object.keys(Fe);for(let{length:n}=e,r=0;r<n;r++)t[e[r]]={distance:-1,parent:null};return t}function IBe(t){const e=CBe(),n=[t];for(e[t].distance=0;n.length>0;){const r=n.pop(),a=Object.keys(Fe[r]);for(let{length:i}=a,s=0;s<i;s++){const o=a[s],c=e[o];c.distance===-1&&(c.distance=e[r].distance+1,c.parent=r,n.unshift(o))}}return e}function OBe(t,e){return function(n){return e(t(n))}}function MBe(t,e){const n=[e[t].parent,t];let r=Fe[e[t].parent][t],a=e[t].parent;for(;e[a].parent;)n.unshift(e[a].parent),r=OBe(Fe[e[a].parent][a],r),a=e[a].parent;return r.conversion=n,r}function PBe(t){const e=IBe(t),n={},r=Object.keys(e);for(let{length:a}=r,i=0;i<a;i++){const s=r[i];e[s].parent!==null&&(n[s]=MBe(s,e))}return n}const I0={},kBe=Object.keys(Fe);function NBe(t){const e=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),t(n))};return"conversion"in t&&(e.conversion=t.conversion),e}function RBe(t){const e=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const a=t(n);if(typeof a=="object")for(let{length:i}=a,s=0;s<i;s++)a[s]=Math.round(a[s]);return a};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of kBe){I0[t]={},Object.defineProperty(I0[t],"channels",{value:Fe[t].channels}),Object.defineProperty(I0[t],"labels",{value:Fe[t].labels});const e=PBe(t),n=Object.keys(e);for(const r of n){const a=e[r];I0[t][r]=RBe(a),I0[t][r].raw=NBe(a)}}const sG=["keyword","gray","hex"],V7={};for(const t of Object.keys(I0))V7[[...I0[t].labels].sort().join("")]=t;const p5={};function i0(t,e){if(!(this instanceof i0))return new i0(t,e);if(e&&e in sG&&(e=null),e&&!(e in I0))throw new Error("Unknown model: "+e);let n,r;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof i0)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const a=s0.get(t);if(a===null)throw new Error("Unable to parse color from string: "+t);this.model=a.model,r=I0[this.model].channels,this.color=a.value.slice(0,r),this.valpha=typeof a.value[r]=="number"?a.value[r]:1}else if(t.length>0){this.model=e||"rgb",r=I0[this.model].channels;const a=Array.prototype.slice.call(t,0,r);this.color=W7(a,r),this.valpha=typeof t[r]=="number"?t[r]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const a=Object.keys(t);"alpha"in t&&(a.splice(a.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const i=a.sort().join("");if(!(i in V7))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=V7[i];const{labels:s}=I0[this.model],o=[];for(n=0;n<s.length;n++)o.push(t[s[n]]);this.color=W7(o)}if(p5[this.model])for(r=I0[this.model].channels,n=0;n<r;n++){const a=p5[this.model][n];a&&(this.color[n]=a(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}i0.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in s0.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const n=e.valpha===1?e.color:[...e.color,this.valpha];return s0.to[e.model](...n)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),n=e.valpha===1?e.color:[...e.color,this.valpha];return s0.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=I0[this.model],{labels:n}=I0[this.model];for(let r=0;r<e;r++)t[n[r]]=this.color[r];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new i0([...this.color.map($Be(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new i0([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:Ln("rgb",0,t0(255)),green:Ln("rgb",1,t0(255)),blue:Ln("rgb",2,t0(255)),hue:Ln(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:Ln("hsl",1,t0(100)),lightness:Ln("hsl",2,t0(100)),saturationv:Ln("hsv",1,t0(100)),value:Ln("hsv",2,t0(100)),chroma:Ln("hcg",1,t0(100)),gray:Ln("hcg",2,t0(100)),white:Ln("hwb",1,t0(100)),wblack:Ln("hwb",2,t0(100)),cyan:Ln("cmyk",0,t0(100)),magenta:Ln("cmyk",1,t0(100)),yellow:Ln("cmyk",2,t0(100)),black:Ln("cmyk",3,t0(100)),x:Ln("xyz",0,t0(95.047)),y:Ln("xyz",1,t0(100)),z:Ln("xyz",2,t0(108.833)),l:Ln("lab",0,t0(100)),a:Ln("lab",1),b:Ln("lab",2),keyword(t){return t!==void 0?new i0(t):I0[this.model].keyword(this.color)},hex(t){return t!==void 0?new i0(t):s0.to.hex(...this.rgb().round().color)},hexa(t){if(t!==void 0)return new i0(t);const e=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),s0.to.hex(...e)+n},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[n,r]of t.entries()){const a=r/255;e[n]=a<=.04045?a/12.92:((a+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return i0.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let n=e.color[0];return n=(n+t)%360,n=n<0?360+n:n,e.color[0]=n,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const n=t.rgb(),r=this.rgb(),a=e===void 0?.5:e,i=2*a-1,s=n.alpha()-r.alpha(),o=((i*s===-1?i:(i+s)/(1+i*s))+1)/2,c=1-o;return i0.rgb(o*n.red()+c*r.red(),o*n.green()+c*r.green(),o*n.blue()+c*r.blue(),n.alpha()*a+r.alpha()*(1-a))}};for(const t of Object.keys(I0)){if(sG.includes(t))continue;const{channels:e}=I0[t];i0.prototype[t]=function(...n){return this.model===t?new i0(this):n.length>0?new i0(n,t):new i0([...LBe(I0[this.model][t].raw(this.color)),this.valpha],t)},i0[t]=function(...n){let r=n[0];return typeof r=="number"&&(r=W7(n,e)),new i0(r,t)}}function DBe(t,e){return Number(t.toFixed(e))}function $Be(t){return function(e){return DBe(e,t)}}function Ln(t,e,n){t=Array.isArray(t)?t:[t];for(const r of t)(p5[r]||(p5[r]=[]))[e]=n;return t=t[0],function(r){let a;return r!==void 0?(n&&(r=n(r)),a=this[t](),a.color[e]=r,a):(a=this[t]().color[e],n&&(a=n(a)),a)}}function t0(t){return function(e){return Math.max(0,Math.min(t,e))}}function LBe(t){return Array.isArray(t)?t:[t]}function W7(t,e){for(let n=0;n<e;n++)typeof t[n]!="number"&&(t[n]=0);return t}function FN(t=3,e=50,n="black",r=0,a=20,i="#0346ff"){const s=[];let o;for(o=0;o<t;o+=1)s.push(i0(i).rotate((o+1)/t*-r).saturate((o+1)/t*(a/100)).mix(i0(n),e/100*(o+1)/t).hex());return s}function BBe(t){const e=FN(3,50,"black",0,20,t),n=FN(6,85,"white",0,20,t);return[...e.reverse(),t,...n]}function FBe(t,e){if(e.primary){const n=BBe(e.primary);t.style.setProperty("--app-primary-900",n[0]),t.style.setProperty("--app-primary-800",n[1]),t.style.setProperty("--app-primary-700",n[2]),t.style.setProperty("--app-primary-600",n[3]),t.style.setProperty("--app-primary-500",n[4]),t.style.setProperty("--app-primary-400",n[5]),t.style.setProperty("--app-primary-300",n[6]),t.style.setProperty("--app-primary-200",n[7]),t.style.setProperty("--app-primary-100",n[8]),t.style.setProperty("--app-primary-50",n[9])}e.onPrimary&&t.style.setProperty("--app-on-primary",e.onPrimary)}function rS(t){return t.charAt(0).toUpperCase()+t.slice(1)}const UBe=new Set([$e.CUSTOM,$e.PASSKEYS,$e.TELEGRAM,$e.AUTHENTICATOR]),G7=Object.values($e).filter(t=>!UBe.has(t)),jBe=G7.reduce((t,e)=>(e==="email_passwordless"?t[e]="Email":e==="sms_passwordless"?t[e]="Mobile":t[e]=rS(e),t),{}),HBe={[i6.DEVELOPMENT]:"https://api-develop.web3auth.io/passwordless-service",[i6.STAGING]:"https://api.web3auth.io/passwordless-service",[i6.PRODUCTION]:"https://api.web3auth.io/passwordless-service",[i6.TESTING]:"https://api-develop.web3auth.io/passwordless-service"},zBe="d5f0c15c-eeda-4f9c-934a-d8e0348e83b2",Pb={MODAL_VISIBILITY:"MODAL_VISIBILITY"},Un={INITIALIZED:"initialized",CONNECTED:"connected",CONNECTING:"connecting",ERRORED:"errored"};let Z8=function(t){return t.SUCCESS="success",t.ERROR="error",t.WARNING="warning",t.INFO="info",t}({});function qBe(t,e){e===void 0&&(e={});var n=e.insertAt;if(!(typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",n==="top"&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}var KBe=`@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap");.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }.w3a-parent-container ::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:#3b82f680;--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }
/*! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com*/.w3a-parent-container *,.w3a-parent-container :after,.w3a-parent-container :before{border:0 solid;box-sizing:border-box}.w3a-parent-container :after,.w3a-parent-container :before{--tw-content:""}.w3a-parent-container :host,.w3a-parent-container html{-webkit-text-size-adjust:100%;font-feature-settings:normal;-webkit-tap-highlight-color:transparent;font-family:ui-sans-serif,system-ui,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;line-height:1.5;-moz-tab-size:4;tab-size:4}.w3a-parent-container body{line-height:inherit;margin:0}.w3a-parent-container hr{border-top-width:1px;color:inherit;height:0}.w3a-parent-container abbr:where([title]){text-decoration:underline dotted}.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6{font-size:inherit;font-weight:inherit}.w3a-parent-container a{color:inherit;text-decoration:inherit}.w3a-parent-container b,.w3a-parent-container strong{font-weight:bolder}.w3a-parent-container code,.w3a-parent-container kbd,.w3a-parent-container pre,.w3a-parent-container samp{font-feature-settings:normal;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em;font-variation-settings:normal}.w3a-parent-container small{font-size:80%}.w3a-parent-container sub,.w3a-parent-container sup{font-size:75%;line-height:0;position:relative;vertical-align:initial}.w3a-parent-container sub{bottom:-.25em}.w3a-parent-container sup{top:-.5em}.w3a-parent-container table{border-collapse:collapse;border-color:inherit;text-indent:0}.w3a-parent-container button,.w3a-parent-container input,.w3a-parent-container optgroup,.w3a-parent-container select,.w3a-parent-container textarea{font-feature-settings:inherit;color:inherit;font-family:inherit;font-size:100%;font-variation-settings:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0}.w3a-parent-container button,.w3a-parent-container select{text-transform:none}.w3a-parent-container button,.w3a-parent-container input:where([type=button]),.w3a-parent-container input:where([type=reset]),.w3a-parent-container input:where([type=submit]){-webkit-appearance:button;background-color:initial;background-image:none}.w3a-parent-container :-moz-focusring{outline:auto}.w3a-parent-container :-moz-ui-invalid{box-shadow:none}.w3a-parent-container progress{vertical-align:initial}.w3a-parent-container ::-webkit-inner-spin-button,.w3a-parent-container ::-webkit-outer-spin-button{height:auto}.w3a-parent-container [type=search]{-webkit-appearance:textfield;outline-offset:-2px}.w3a-parent-container ::-webkit-search-decoration{-webkit-appearance:none}.w3a-parent-container ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}.w3a-parent-container summary{display:list-item}.w3a-parent-container blockquote,.w3a-parent-container dd,.w3a-parent-container dl,.w3a-parent-container figure,.w3a-parent-container h1,.w3a-parent-container h2,.w3a-parent-container h3,.w3a-parent-container h4,.w3a-parent-container h5,.w3a-parent-container h6,.w3a-parent-container hr,.w3a-parent-container p,.w3a-parent-container pre{margin:0}.w3a-parent-container fieldset{margin:0;padding:0}.w3a-parent-container legend{padding:0}.w3a-parent-container menu,.w3a-parent-container ol,.w3a-parent-container ul{list-style:none;margin:0;padding:0}.w3a-parent-container dialog{padding:0}.w3a-parent-container textarea{resize:vertical}.w3a-parent-container input::placeholder,.w3a-parent-container textarea::placeholder{color:#9ca3af;opacity:1}.w3a-parent-container [role=button],.w3a-parent-container button{cursor:pointer}.w3a-parent-container :disabled{cursor:default}.w3a-parent-container audio,.w3a-parent-container canvas,.w3a-parent-container embed,.w3a-parent-container iframe,.w3a-parent-container img,.w3a-parent-container object,.w3a-parent-container svg,.w3a-parent-container video{display:block;vertical-align:middle}.w3a-parent-container img,.w3a-parent-container video{height:auto;max-width:100%}.w3a-parent-container [hidden]:where(:not([hidden=until-found])){display:none}.w3a-parent-container{--app-on-primary:#fff;--app-primary-50:#ebf5ff;--app-primary-100:#e1effe;--app-primary-200:#c3ddfd;--app-primary-300:#a4cafe;--app-primary-400:#76a9fa;--app-primary-500:#3f83f8;--app-primary-600:#0346ff;--app-primary-700:#1a56db;--app-primary-800:#1e429f;--app-primary-900:#233876;--app-gray-50:#f9fafb;--app-gray-100:#f3f4f6;--app-gray-200:#e5e7eb;--app-gray-300:#d1d5db;--app-gray-400:#9ca3af;--app-gray-500:#6b7280;--app-gray-600:#4b5563;--app-gray-700:#374151;--app-gray-800:#1f2a37;--app-gray-900:#111928;--app-blue-50:#ebf5ff;--app-blue-100:#e1effe;--app-blue-200:#c3ddfd;--app-blue-300:#a4cafe;--app-blue-400:#76a9fa;--app-blue-500:#3f83f8;--app-blue-600:#0346ff;--app-blue-700:#1a56db;--app-blue-800:#1e429f;--app-blue-900:#233876;--app-red-50:#fdf2f2;--app-red-100:#fde8e8;--app-red-200:#fbd5d5;--app-red-300:#f8b4b4;--app-red-400:#f98080;--app-red-500:#f05252;--app-red-600:#e02424;--app-red-700:#c81e1e;--app-red-800:#9b1c1c;--app-red-900:#771d1d;--app-green-50:#f3faf7;--app-green-100:#def7ec;--app-green-200:#bcf0da;--app-green-300:#84e1bc;--app-green-400:#31c48d;--app-green-500:#0e9f6e;--app-green-600:#057a55;--app-green-700:#046c4e;--app-green-800:#03543f;--app-green-900:#014737;--app-yellow-50:#fdfdea;--app-yellow-100:#fdf6b2;--app-yellow-200:#fce96a;--app-yellow-300:#faca15;--app-yellow-400:#e3a008;--app-yellow-500:#c27803;--app-yellow-600:#9f580a;--app-yellow-700:#8e4b10;--app-yellow-800:#723b13;--app-yellow-900:#633112;--app-success:#30cca4;--app-warning:#fbc94a;--app-error:#fb4a61;--app-info:#d4d4d4;--app-white:#fff;--app-black:#000}.w3a-parent-container body{box-sizing:border-box;margin:0!important;padding:0!important}.w3a-parent-container{font-family:Inter;position:relative}.w3a-parent-container .w3a-parent-container>*{scrollbar-color:#e5e7eb!important}.w3a-parent-container .w3a--social-container{scroll-padding-right:10px;scrollbar-color:#e5e7eb!important}.w3a-parent-container .w3a--modal-curtain{background-color:initial;left:0;opacity:0;position:absolute;right:0;top:0;transition:opacity 50ms ease-in;z-index:1}.w3a-parent-container .w3a--fixed{position:fixed}.w3a-parent-container .w3a--absolute{position:absolute}.w3a-parent-container .w3a--relative{position:relative}.w3a-parent-container .w3a--inset-x-4{left:1rem;right:1rem}.w3a-parent-container .w3a--bottom-2{bottom:.5rem}.w3a-parent-container .w3a--bottom-4{bottom:1rem}.w3a-parent-container .w3a--bottom-8{bottom:2rem}.w3a-parent-container .w3a--bottom-\\[100\\%\\]{bottom:100%}.w3a-parent-container .w3a--left-0{left:0}.w3a-parent-container .w3a--left-2{left:.5rem}.w3a-parent-container .w3a--left-\\[50\\%\\]{left:50%}.w3a-parent-container .w3a--right-4{right:1rem}.w3a-parent-container .w3a--right-6{right:1.5rem}.w3a-parent-container .w3a--top-0{top:0}.w3a-parent-container .w3a--top-1\\/2{top:50%}.w3a-parent-container .w3a--top-4{top:1rem}.w3a-parent-container .w3a--top-8{top:2rem}.w3a-parent-container .w3a--top-\\[16px\\]{top:16px}.w3a-parent-container .w3a--top-\\[30px\\]{top:30px}.w3a-parent-container .w3a--z-10{z-index:10}.w3a-parent-container .w3a--z-20{z-index:20}.w3a-parent-container .w3a--z-50{z-index:50}.w3a-parent-container .w3a--z-\\[-1\\]{z-index:-1}.w3a-parent-container .w3a--z-\\[45\\]{z-index:45}.w3a-parent-container .w3a--z-\\[60\\]{z-index:60}.w3a-parent-container .w3a--mx-auto{margin-left:auto;margin-right:auto}.w3a-parent-container .w3a--my-4{margin-bottom:1rem;margin-top:1rem}.w3a-parent-container .w3a--my-6{margin-bottom:1.5rem;margin-top:1.5rem}.w3a-parent-container .-w3a--mt-10{margin-top:-2.5rem}.w3a-parent-container .-w3a--mt-2{margin-top:-.5rem}.w3a-parent-container .-w3a--mt-6{margin-top:-1.5rem}.w3a-parent-container .w3a--mb-2{margin-bottom:.5rem}.w3a-parent-container .w3a--ml-0{margin-left:0}.w3a-parent-container .w3a--ml-2{margin-left:.5rem}.w3a-parent-container .w3a--ml-4{margin-left:1rem}.w3a-parent-container .w3a--mr-2\\.5{margin-right:.625rem}.w3a-parent-container .w3a--mr-auto{margin-right:auto}.w3a-parent-container .w3a--mt-2{margin-top:.5rem}.w3a-parent-container .w3a--mt-3{margin-top:.75rem}.w3a-parent-container .w3a--mt-auto{margin-top:auto}.w3a-parent-container .w3a--block{display:block}.w3a-parent-container .w3a--flex{display:flex}.w3a-parent-container .w3a--inline-flex{display:inline-flex}.w3a-parent-container .w3a--grid{display:grid}.w3a-parent-container .w3a--contents{display:contents}.w3a-parent-container .w3a--hidden{display:none}.w3a-parent-container .w3a--size-10{height:2.5rem;width:2.5rem}.w3a-parent-container .w3a--size-3{height:.75rem;width:.75rem}.w3a-parent-container .w3a--size-5{height:1.25rem;width:1.25rem}.w3a-parent-container .w3a--size-\\[300px\\]{height:300px;width:300px}.w3a-parent-container .w3a--size-auto{height:auto;width:auto}.w3a-parent-container .w3a--size-full{height:100%;width:100%}.w3a-parent-container .w3a--h-0{height:0}.w3a-parent-container .w3a--h-11{height:2.75rem}.w3a-parent-container .w3a--h-12{height:3rem}.w3a-parent-container .w3a--h-9{height:2.25rem}.w3a-parent-container .w3a--h-\\[280px\\]{height:280px}.w3a-parent-container .w3a--h-\\[300px\\]{height:300px}.w3a-parent-container .w3a--h-\\[328px\\]{height:328px}.w3a-parent-container .w3a--h-\\[42px\\]{height:42px}.w3a-parent-container .w3a--h-\\[50px\\]{height:50px}.w3a-parent-container .w3a--h-auto{height:auto}.w3a-parent-container .w3a--h-full{height:100%}.w3a-parent-container .w3a--h-px{height:1px}.w3a-parent-container .w3a--h-screen{height:100vh}.w3a-parent-container .w3a--w-0{width:0}.w3a-parent-container .w3a--w-12{width:3rem}.w3a-parent-container .w3a--w-4\\/5{width:80%}.w3a-parent-container .w3a--w-\\[100px\\]{width:100px}.w3a-parent-container .w3a--w-\\[104px\\]{width:104px}.w3a-parent-container .w3a--w-\\[200px\\]{width:200px}.w3a-parent-container .w3a--w-\\[356px\\]{width:356px}.w3a-parent-container .w3a--w-\\[90\\%\\]{width:90%}.w3a-parent-container .w3a--w-\\[96\\%\\]{width:96%}.w3a-parent-container .w3a--w-auto{width:auto}.w3a-parent-container .w3a--w-full{width:100%}.w3a-parent-container .w3a--w-max{width:max-content}.w3a-parent-container .w3a--w-screen{width:100vw}.w3a-parent-container .w3a--max-w-\\[180px\\]{max-width:180px}.w3a-parent-container .w3a--flex-1{flex:1 1 0%}.w3a-parent-container .-w3a--translate-x-10{--tw-translate-x:-2.5rem}.w3a-parent-container .-w3a--translate-x-10,.w3a-parent-container .-w3a--translate-x-6{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .-w3a--translate-x-6{--tw-translate-x:-1.5rem}.w3a-parent-container .-w3a--translate-y-1\\/2{--tw-translate-y:-50%}.w3a-parent-container .-w3a--translate-y-1\\/2,.w3a-parent-container .w3a--translate-y-0{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--translate-y-0{--tw-translate-y:0px}.w3a-parent-container .w3a--translate-y-\\[100vh\\]{--tw-translate-y:100vh}.w3a-parent-container .w3a--translate-y-\\[100vh\\],.w3a-parent-container .w3a--translate-y-full{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--translate-y-full{--tw-translate-y:100%}@keyframes w3a--pulse{50%{opacity:.5}}.w3a-parent-container .w3a--animate-pulse{animation:w3a--pulse 2s cubic-bezier(.4,0,.6,1) infinite}.w3a-parent-container .w3a--cursor-not-allowed{cursor:not-allowed}.w3a-parent-container .w3a--cursor-pointer{cursor:pointer}.w3a-parent-container .w3a--appearance-none{appearance:none}.w3a-parent-container .w3a--auto-rows-min{grid-auto-rows:min-content}.w3a-parent-container .w3a--grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.w3a-parent-container .w3a--grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.w3a-parent-container .w3a--grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.w3a-parent-container .w3a--grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.w3a-parent-container .w3a--flex-col{flex-direction:column}.w3a-parent-container .w3a--items-start{align-items:flex-start}.w3a-parent-container .w3a--items-end{align-items:flex-end}.w3a-parent-container .w3a--items-center{align-items:center}.w3a-parent-container .\\!w3a--justify-start{justify-content:flex-start!important}.w3a-parent-container .w3a--justify-start{justify-content:flex-start}.w3a-parent-container .\\!w3a--justify-center{justify-content:center!important}.w3a-parent-container .w3a--justify-center{justify-content:center}.w3a-parent-container .\\!w3a--justify-between{justify-content:space-between!important}.w3a-parent-container .w3a--justify-between{justify-content:space-between}.w3a-parent-container .w3a--justify-items-start{justify-items:start}.w3a-parent-container .w3a--gap-2{gap:.5rem}.w3a-parent-container .w3a--gap-3{gap:.75rem}.w3a-parent-container .w3a--gap-x-1{column-gap:.25rem}.w3a-parent-container .w3a--gap-x-2{column-gap:.5rem}.w3a-parent-container .w3a--gap-x-4{column-gap:1rem}.w3a-parent-container .w3a--gap-x-6{column-gap:1.5rem}.w3a-parent-container .w3a--gap-y-1{row-gap:.25rem}.w3a-parent-container .w3a--gap-y-2{row-gap:.5rem}.w3a-parent-container .w3a--gap-y-4{row-gap:1rem}.w3a-parent-container .w3a--space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-left:calc(.5rem*(1 - var(--tw-space-x-reverse)));margin-right:calc(.5rem*var(--tw-space-x-reverse))}.w3a-parent-container .w3a--overflow-hidden{overflow:hidden}.w3a-parent-container .w3a--overflow-y-auto{overflow-y:auto}.w3a-parent-container .w3a--truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.w3a-parent-container .w3a--rounded{border-radius:.25rem}.w3a-parent-container .w3a--rounded-2xl{border-radius:1rem}.w3a-parent-container .w3a--rounded-3xl{border-radius:1.5rem}.w3a-parent-container .w3a--rounded-\\[30px\\]{border-radius:30px}.w3a-parent-container .w3a--rounded-full{border-radius:9999px}.w3a-parent-container .w3a--rounded-lg{border-radius:.5rem}.w3a-parent-container .w3a--rounded-md{border-radius:.375rem}.w3a-parent-container .w3a--rounded-none{border-radius:0}.w3a-parent-container .w3a--border{border-width:1px}.w3a-parent-container .\\!w3a--border-app-primary-600{border-color:var(--app-primary-600)!important}.w3a-parent-container .w3a--border-app-blue-200{border-color:var(--app-blue-200)}.w3a-parent-container .w3a--border-app-gray-100{border-color:var(--app-gray-100)}.w3a-parent-container .w3a--border-app-gray-200{border-color:var(--app-gray-200)}.w3a-parent-container .w3a--border-app-gray-300{border-color:var(--app-gray-300)}.w3a-parent-container .w3a--border-app-gray-800{border-color:var(--app-gray-800)}.w3a-parent-container .w3a--border-app-green-200{border-color:var(--app-green-200)}.w3a-parent-container .w3a--border-app-green-400{border-color:var(--app-green-400)}.w3a-parent-container .w3a--border-app-red-200{border-color:var(--app-red-200)}.w3a-parent-container .w3a--border-app-red-600{border-color:var(--app-red-600)}.w3a-parent-container .w3a--border-app-yellow-200{border-color:var(--app-yellow-200)}.w3a-parent-container .w3a--border-transparent{border-color:#0000}.w3a-parent-container .\\!w3a--bg-app-gray-800{background-color:var(--app-gray-800)!important}.w3a-parent-container .w3a--bg-app-blue-100{background-color:var(--app-blue-100)}.w3a-parent-container .w3a--bg-app-gray-100{background-color:var(--app-gray-100)}.w3a-parent-container .w3a--bg-app-gray-200{background-color:var(--app-gray-200)}.w3a-parent-container .w3a--bg-app-gray-400{background-color:var(--app-gray-400)}.w3a-parent-container .w3a--bg-app-gray-50{background-color:var(--app-gray-50)}.w3a-parent-container .w3a--bg-app-gray-500{background-color:var(--app-gray-500)}.w3a-parent-container .w3a--bg-app-gray-800{background-color:var(--app-gray-800)}.w3a-parent-container .w3a--bg-app-green-100{background-color:var(--app-green-100)}.w3a-parent-container .w3a--bg-app-light-surface1{background-color:var(--app-white)}.w3a-parent-container .w3a--bg-app-primary-100{background-color:var(--app-primary-100)}.w3a-parent-container .w3a--bg-app-red-100{background-color:var(--app-red-100)}.w3a-parent-container .w3a--bg-app-white{background-color:var(--app-white)}.w3a-parent-container .w3a--bg-app-yellow-100{background-color:var(--app-yellow-100)}.w3a-parent-container .w3a--bg-transparent{background-color:initial}.w3a-parent-container .w3a--object-contain{object-fit:contain}.w3a-parent-container .w3a--p-0{padding:0}.w3a-parent-container .w3a--p-2{padding:.5rem}.w3a-parent-container .w3a--p-3{padding:.75rem}.w3a-parent-container .w3a--p-4{padding:1rem}.w3a-parent-container .w3a--p-6{padding:1.5rem}.w3a-parent-container .w3a--px-2{padding-left:.5rem;padding-right:.5rem}.w3a-parent-container .w3a--px-2\\.5{padding-left:.625rem;padding-right:.625rem}.w3a-parent-container .w3a--px-4{padding-left:1rem;padding-right:1rem}.w3a-parent-container .w3a--px-5{padding-left:1.25rem;padding-right:1.25rem}.w3a-parent-container .w3a--px-\\[6px\\]{padding-left:6px;padding-right:6px}.w3a-parent-container .w3a--py-0\\.5{padding-bottom:.125rem;padding-top:.125rem}.w3a-parent-container .w3a--py-1{padding-bottom:.25rem;padding-top:.25rem}.w3a-parent-container .w3a--py-2{padding-bottom:.5rem;padding-top:.5rem}.w3a-parent-container .w3a--py-2\\.5{padding-bottom:.625rem;padding-top:.625rem}.w3a-parent-container .w3a--py-3{padding-bottom:.75rem;padding-top:.75rem}.w3a-parent-container .w3a--py-6{padding-bottom:1.5rem;padding-top:1.5rem}.w3a-parent-container .w3a--py-\\[3px\\]{padding-bottom:3px;padding-top:3px}.w3a-parent-container .w3a--pl-2{padding-left:.5rem}.w3a-parent-container .w3a--pl-6{padding-left:1.5rem}.w3a-parent-container .w3a--pr-1\\.5{padding-right:.375rem}.w3a-parent-container .w3a--pr-2\\.5{padding-right:.625rem}.w3a-parent-container .w3a--pr-3{padding-right:.75rem}.w3a-parent-container .w3a--pt-5{padding-top:1.25rem}.w3a-parent-container .w3a--pt-6{padding-top:1.5rem}.w3a-parent-container .w3a--text-left{text-align:left}.w3a-parent-container .w3a--text-center{text-align:center}.w3a-parent-container .w3a--text-start{text-align:start}.w3a-parent-container .w3a--text-base{font-size:1rem;line-height:1.5rem}.w3a-parent-container .w3a--text-lg{font-size:1.125rem;line-height:1.75rem}.w3a-parent-container .w3a--text-sm{font-size:.875rem;line-height:1.25rem}.w3a-parent-container .w3a--text-xl{font-size:1.25rem;line-height:1.75rem}.w3a-parent-container .w3a--text-xs{font-size:.75rem;line-height:1rem}.w3a-parent-container .w3a--font-bold{font-weight:700}.w3a-parent-container .w3a--font-medium{font-weight:500}.w3a-parent-container .w3a--font-normal{font-weight:400}.w3a-parent-container .w3a--font-semibold{font-weight:600}.w3a-parent-container .w3a--uppercase{text-transform:uppercase}.w3a-parent-container .w3a--text-app-blue-900{color:var(--app-blue-900)}.w3a-parent-container .w3a--text-app-gray-100{color:var(--app-gray-100)}.w3a-parent-container .w3a--text-app-gray-400{color:var(--app-gray-400)}.w3a-parent-container .w3a--text-app-gray-500{color:var(--app-gray-500)}.w3a-parent-container .w3a--text-app-gray-700{color:var(--app-gray-700)}.w3a-parent-container .w3a--text-app-gray-900{color:var(--app-gray-900)}.w3a-parent-container .w3a--text-app-green-400{color:var(--app-green-400)}.w3a-parent-container .w3a--text-app-green-500{color:var(--app-green-500)}.w3a-parent-container .w3a--text-app-green-900{color:var(--app-green-900)}.w3a-parent-container .w3a--text-app-primary-600{color:var(--app-primary-600)}.w3a-parent-container .w3a--text-app-primary-800{color:var(--app-primary-800)}.w3a-parent-container .w3a--text-app-red-400{color:var(--app-red-400)}.w3a-parent-container .w3a--text-app-red-500{color:var(--app-red-500)}.w3a-parent-container .w3a--text-app-red-900{color:var(--app-red-900)}.w3a-parent-container .w3a--text-app-yellow-900{color:var(--app-yellow-900)}.w3a-parent-container .w3a--opacity-0{opacity:0}.w3a-parent-container .w3a--shadow-2xl{--tw-shadow:0 25px 50px -12px #00000040;--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color)}.w3a-parent-container .w3a--shadow-2xl,.w3a-parent-container .w3a--shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .w3a--shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.w3a-parent-container .w3a--shadow-xl{--tw-shadow:0 20px 25px -5px #0000001a,0 8px 10px -6px #0000001a;--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color),0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .w3a--outline-none{outline:2px solid #0000;outline-offset:2px}.w3a-parent-container .w3a--transition-all{transition-duration:.15s;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--transition-opacity{transition-duration:.15s;transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--transition-transform{transition-duration:.15s;transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--delay-100{transition-delay:.1s}.w3a-parent-container .w3a--delay-300{transition-delay:.3s}.w3a-parent-container .w3a--delay-500{transition-delay:.5s}.w3a-parent-container .w3a--delay-700{transition-delay:.7s}.w3a-parent-container .w3a--duration-150{transition-duration:.15s}.w3a-parent-container .w3a--duration-300{transition-duration:.3s}.w3a-parent-container .w3a--duration-500{transition-duration:.5s}.w3a-parent-container .w3a--duration-\\[400ms\\]{transition-duration:.4s}.w3a-parent-container .w3a--ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}.w3a-parent-container .w3a--ease-out{transition-timing-function:cubic-bezier(0,0,.2,1)}.w3a-parent-container .w3a--bottom-sheet-bg{background-color:var(--app-gray-600);opacity:.5}.w3a-parent-container .w3a--connected-logo{color:var(--app-green-500);height:4rem;width:4rem}.w3a-parent-container .w3a--connected-logo:is(.w3a--dark *){color:var(--app-green-400)}.w3a-parent-container .w3a--error-logo{color:var(--app-red-500);height:4rem;width:4rem}.w3a-parent-container .w3a--error-logo:is(.w3a--dark *){color:var(--app-red-400)}.w3a-parent-container .w3a--btn{align-items:center;appearance:none;border-color:var(--app-gray-200);border-width:1px;color:var(--app-gray-700);column-gap:.5rem;display:flex;font-size:1rem;font-weight:400;justify-content:center;line-height:1.5rem;padding:.75rem 1.25rem;width:100%}.w3a-parent-container .w3a--btn:hover{--tw-translate-y:0.5px;--tw-shadow:0px 2px 8px 2px #e5e7eb;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);background-color:var(--app-gray-50);border-color:var(--app-gray-50);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--btn:is(.w3a--dark *){border-color:var(--app-gray-500)}.w3a-parent-container .w3a--btn:hover:is(.w3a--dark *){--tw-shadow:0px 2px 8px 2px #111928;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);background-color:var(--app-gray-800);border-color:var(--app-gray-800);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .w3a--input{align-items:center;border-color:var(--app-gray-200);border-width:1px;column-gap:.5rem;display:flex;justify-content:space-between;padding:.75rem 1.25rem;width:100%}.w3a-parent-container .w3a--input:is(.w3a--dark *){border-color:var(--app-gray-500)}.w3a-parent-container .first-letter\\:w3a--capitalize:first-letter{text-transform:capitalize}.w3a-parent-container .placeholder\\:w3a--text-xs::placeholder{font-size:.75rem;line-height:1rem}.w3a-parent-container .placeholder\\:w3a--text-app-gray-400::placeholder{color:var(--app-gray-400)}.w3a-parent-container .hover\\:w3a--translate-y-\\[0\\.5px\\]:hover{--tw-translate-y:0.5px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .hover\\:w3a--border-app-gray-50:hover{border-color:var(--app-gray-50)}.w3a-parent-container .hover\\:w3a--border-transparent:hover{border-color:#0000}.w3a-parent-container .hover\\:\\!w3a--bg-app-gray-100:hover{background-color:var(--app-gray-100)!important}.w3a-parent-container .hover\\:w3a--bg-app-gray-200:hover{background-color:var(--app-gray-200)}.w3a-parent-container .hover\\:w3a--text-app-gray-900:hover{color:var(--app-gray-900)}.w3a-parent-container .hover\\:w3a--shadow-light:hover{--tw-shadow:0px 2px 8px 2px #e5e7eb;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.w3a-parent-container .focus\\:w3a--outline-none:focus{outline:2px solid #0000;outline-offset:2px}.w3a-parent-container .active\\:w3a--scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .active\\:w3a--outline-none:active{outline:2px solid #0000;outline-offset:2px}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--block{display:block}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--hidden{display:none}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-0{--tw-translate-x:0px}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-0,.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-6{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--translate-x-6{--tw-translate-x:1.5rem}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--opacity-0{opacity:0}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--opacity-100{opacity:1}.w3a-parent-container .w3a--group:hover .group-hover\\:w3a--delay-0{transition-delay:0s}.w3a-parent-container .dark\\:w3a--block:is(.w3a--dark *){display:block}.w3a-parent-container .dark\\:w3a--hidden:is(.w3a--dark *){display:none}.w3a-parent-container .dark\\:w3a--border:is(.w3a--dark *){border-width:1px}.w3a-parent-container .dark\\:w3a--border-app-gray-500:is(.w3a--dark *){border-color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--border-app-gray-600:is(.w3a--dark *){border-color:var(--app-gray-600)}.w3a-parent-container .dark\\:w3a--border-app-gray-700:is(.w3a--dark *){border-color:var(--app-gray-700)}.w3a-parent-container .dark\\:w3a--border-app-gray-800:is(.w3a--dark *){border-color:var(--app-gray-800)}.w3a-parent-container .dark\\:w3a--border-app-green-500:is(.w3a--dark *){border-color:var(--app-green-500)}.w3a-parent-container .dark\\:w3a--border-app-primary-400:is(.w3a--dark *){border-color:var(--app-primary-400)}.w3a-parent-container .dark\\:w3a--border-app-primary-500:is(.w3a--dark *){border-color:var(--app-primary-500)}.w3a-parent-container .dark\\:w3a--border-app-red-500:is(.w3a--dark *){border-color:var(--app-red-500)}.w3a-parent-container .dark\\:w3a--bg-app-dark-surface-main:is(.w3a--dark *){background-color:var(--app-gray-900)}.w3a-parent-container .dark\\:w3a--bg-app-gray-200:is(.w3a--dark *){background-color:var(--app-gray-200)}.w3a-parent-container .dark\\:w3a--bg-app-gray-400:is(.w3a--dark *){background-color:var(--app-gray-400)}.w3a-parent-container .dark\\:w3a--bg-app-gray-500:is(.w3a--dark *){background-color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--bg-app-gray-600:is(.w3a--dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:w3a--bg-app-gray-700:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .dark\\:w3a--bg-app-gray-800:is(.w3a--dark *){background-color:var(--app-gray-800)}.w3a-parent-container .dark\\:w3a--bg-transparent:is(.w3a--dark *){background-color:initial}.w3a-parent-container .dark\\:w3a--text-app-gray-200:is(.w3a--dark *){color:var(--app-gray-200)}.w3a-parent-container .dark\\:w3a--text-app-gray-300:is(.w3a--dark *){color:var(--app-gray-300)}.w3a-parent-container .dark\\:w3a--text-app-gray-400:is(.w3a--dark *){color:var(--app-gray-400)}.w3a-parent-container .dark\\:w3a--text-app-gray-500:is(.w3a--dark *){color:var(--app-gray-500)}.w3a-parent-container .dark\\:w3a--text-app-green-400:is(.w3a--dark *){color:var(--app-green-400)}.w3a-parent-container .dark\\:w3a--text-app-primary-400:is(.w3a--dark *){color:var(--app-primary-400)}.w3a-parent-container .dark\\:w3a--text-app-primary-500:is(.w3a--dark *){color:var(--app-primary-500)}.w3a-parent-container .dark\\:w3a--text-app-red-400:is(.w3a--dark *){color:var(--app-red-400)}.w3a-parent-container .dark\\:w3a--text-app-white:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container .dark\\:placeholder\\:w3a--text-app-gray-500:is(.w3a--dark *)::placeholder{color:var(--app-gray-500)}.w3a-parent-container .dark\\:hover\\:w3a--border-app-gray-800:hover:is(.w3a--dark *){border-color:var(--app-gray-800)}.w3a-parent-container .dark\\:hover\\:w3a--border-transparent:hover:is(.w3a--dark *){border-color:#0000}.w3a-parent-container .dark\\:hover\\:\\!w3a--bg-app-gray-800:hover:is(.w3a--dark *){background-color:var(--app-gray-800)!important}.w3a-parent-container .dark\\:hover\\:w3a--bg-app-gray-600:hover:is(.w3a--dark *){background-color:var(--app-gray-600)}.w3a-parent-container .dark\\:hover\\:w3a--bg-app-gray-700:hover:is(.w3a--dark *){background-color:var(--app-gray-700)}.w3a-parent-container .dark\\:hover\\:w3a--text-app-white:hover:is(.w3a--dark *){color:var(--app-white)}.w3a-parent-container .dark\\:hover\\:w3a--shadow-dark:hover:is(.w3a--dark *){--tw-shadow:0px 2px 8px 2px #111928;--tw-shadow-colored:0px 2px 8px 2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}@media (min-width:640px){.w3a-parent-container .sm\\:w3a--left-8{left:2rem}.w3a-parent-container .sm\\:w3a--right-8{right:2rem}.w3a-parent-container .sm\\:w3a--justify-start{justify-content:flex-start}.w3a-parent-container .sm\\:w3a--justify-end{justify-content:flex-end}.w3a-parent-container .sm\\:w3a--shadow-lg{--tw-shadow:0 10px 15px -3px #0000001a,0 4px 6px -4px #0000001a;--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}}@media(min-width:375px){.w3a-parent-container .\\[\\@media\\(min-width\\:375px\\)\\]\\:w3a--w-\\[393px\\]{width:393px}}`;qBe(KBe);const VBe=t=>({ui_modal_login_methods_order:t==null?void 0:t.loginMethodsOrder,ui_modal_z_index:t==null?void 0:t.modalZIndex,ui_modal_display_errors_on_modal:t==null?void 0:t.displayErrorsOnModal,ui_modal_login_grid_col:t==null?void 0:t.loginGridCol,ui_modal_primary_button:t==null?void 0:t.primaryButton,ui_modal_widget_type:t==null?void 0:t.widgetType,ui_modal_target_id_used:!!(t!=null&&t.targetId),ui_modal_logo_alignment:t==null?void 0:t.logoAlignment,ui_modal_border_radius_type:t==null?void 0:t.borderRadiusType,ui_modal_button_radius_type:t==null?void 0:t.buttonRadiusType,ui_modal_sign_in_methods:t==null?void 0:t.signInMethods,ui_modal_add_previous_login_hint:t==null?void 0:t.addPreviousLoginHint,ui_modal_display_installed_external_wallets:t==null?void 0:t.displayInstalledExternalWallets,ui_modal_display_external_wallets_count:t==null?void 0:t.displayExternalWalletsCount}),V1={LOGIN:"login",CONNECT_WALLET:"connect_wallet"},dd={CONNECT_WALLET:"Connect Your Wallet",SELECTED_WALLET:"Selected Wallet"},oG="https://images.web3auth.io/web3auth-logo-w.svg",cG="https://images.web3auth.io/web3auth-logo-w-light.svg",WBe="https://images.web3auth.io/login-wallet-connect.svg",GBe="#0364FF",YBe="#FFFFFF",JBe={app:{android:"io.metamask",chrome:"nkbihfbeogaeaoehlefnkodbefgpgknn",edge:"ejbalbakoplchlghecdalmeeeajnimhm",firefox:"ether-metamask",ios:"id1438144202"},chains:["eip155:1"],imgExtension:"webp",injected:[{injected_id:"isMetaMask",namespace:"eip155"}],mobile:{inAppBrowser:"https://metamask.app.link/dapp",native:"metamask://wc",universal:"https://metamask.app.link/wc"},name:"MetaMask",primaryColor:"#E2761B",walletConnect:{sdks:["sign_v1","sign_v2"]}},aS="-",ZBe=t=>{const e=QBe(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const o=s.split(aS);return o[0]===""&&o.length!==1&&o.shift(),dG(o,e)||XBe(s)},getConflictingClassGroupIds:(s,o)=>{const c=n[s]||[];return o&&r[s]?[...c,...r[s]]:c}}},dG=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),a=r?dG(t.slice(1),r):void 0;if(a)return a;if(e.validators.length===0)return;const i=t.join(aS);return(s=e.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},UN=/^\[(.+)\]$/,XBe=t=>{if(UN.test(t)){const e=UN.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},QBe=t=>{const{theme:e,classGroups:n}=t,r={nextPart:new Map,validators:[]};for(const a in n)Y7(n[a],r,a,e);return r},Y7=(t,e,n,r)=>{t.forEach(a=>{if(typeof a=="string"){const i=a===""?e:jN(e,a);i.classGroupId=n;return}if(typeof a=="function"){if(eFe(a)){Y7(a(r),e,n,r);return}e.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{Y7(s,jN(e,i),n,r)})})},jN=(t,e)=>{let n=t;return e.split(aS).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},eFe=t=>t.isThemeGetter,tFe=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},J7="!",Z7=":",nFe=Z7.length,rFe=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=a=>{const i=[];let s=0,o=0,c=0,d;for(let h=0;h<a.length;h++){let b=a[h];if(s===0&&o===0){if(b===Z7){i.push(a.slice(c,h)),c=h+nFe;continue}if(b==="/"){d=h;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const l=i.length===0?a:a.substring(c),u=aFe(l),f=u!==l,p=d&&d>c?d-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:u,maybePostfixModifierPosition:p}};if(e){const a=e+Z7,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},aFe=t=>t.endsWith(J7)?t.substring(0,t.length-1):t.startsWith(J7)?t.substring(1):t,iFe=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||e[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},sFe=t=>({cache:tFe(t.cacheSize),parseClassName:rFe(t),sortModifiers:iFe(t),...ZBe(t)}),oFe=/\s+/,cFe=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=e,s=[],o=t.trim().split(oFe);let c="";for(let d=o.length-1;d>=0;d-=1){const l=o[d],{isExternal:u,modifiers:f,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:b}=n(l);if(u){c=l+(c.length>0?" "+c:c);continue}let v=!!b,m=r(v?h.substring(0,b):h);if(!m){if(!v){c=l+(c.length>0?" "+c:c);continue}if(m=r(h),!m){c=l+(c.length>0?" "+c:c);continue}v=!1}const T=i(f).join(":"),A=p?T+J7:T,N=A+m;if(s.includes(N))continue;s.push(N);const R=a(m,v);for(let B=0;B<R.length;++B){const F=R[B];s.push(A+F)}c=l+(c.length>0?" "+c:c)}return c};function dFe(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=lG(e))&&(r&&(r+=" "),r+=n);return r}const lG=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=lG(t[r]))&&(n&&(n+=" "),n+=e);return n};function lFe(t,...e){let n,r,a,i=s;function s(c){const d=e.reduce((l,u)=>u(l),t());return n=sFe(d),r=n.cache.get,a=n.cache.set,i=o,o(c)}function o(c){const d=r(c);if(d)return d;const l=cFe(c,n);return a(c,l),l}return function(){return i(dFe.apply(null,arguments))}}const n0=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},uG=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fG=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uFe=/^\d+\/\d+$/,fFe=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pFe=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,hFe=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,bFe=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yFe=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Bl=t=>uFe.test(t),Et=t=>!!t&&!Number.isNaN(Number(t)),xc=t=>!!t&&Number.isInteger(Number(t)),s4=t=>t.endsWith("%")&&Et(t.slice(0,-1)),mo=t=>fFe.test(t),mFe=()=>!0,gFe=t=>pFe.test(t)&&!hFe.test(t),pG=()=>!1,wFe=t=>bFe.test(t),vFe=t=>yFe.test(t),EFe=t=>!Ye(t)&&!Je(t),_Fe=t=>ju(t,yG,pG),Ye=t=>uG.test(t),D1=t=>ju(t,mG,gFe),o4=t=>ju(t,CFe,Et),HN=t=>ju(t,hG,pG),TFe=t=>ju(t,bG,vFe),kb=t=>ju(t,gG,wFe),Je=t=>fG.test(t),kf=t=>Hu(t,mG),xFe=t=>Hu(t,IFe),zN=t=>Hu(t,hG),SFe=t=>Hu(t,yG),AFe=t=>Hu(t,bG),Nb=t=>Hu(t,gG,!0),ju=(t,e,n)=>{const r=uG.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Hu=(t,e,n=!1)=>{const r=fG.exec(t);return r?r[1]?e(r[1]):n:!1},hG=t=>t==="position"||t==="percentage",bG=t=>t==="image"||t==="url",yG=t=>t==="length"||t==="size"||t==="bg-size",mG=t=>t==="length",CFe=t=>t==="number",IFe=t=>t==="family-name",gG=t=>t==="shadow",OFe=()=>{const t=n0("color"),e=n0("font"),n=n0("text"),r=n0("font-weight"),a=n0("tracking"),i=n0("leading"),s=n0("breakpoint"),o=n0("container"),c=n0("spacing"),d=n0("radius"),l=n0("shadow"),u=n0("inset-shadow"),f=n0("text-shadow"),p=n0("drop-shadow"),h=n0("blur"),b=n0("perspective"),v=n0("aspect"),m=n0("ease"),T=n0("animate"),A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],N=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...N(),Je,Ye],B=()=>["auto","hidden","clip","visible","scroll"],F=()=>["auto","contain","none"],I=()=>[Je,Ye,c],P=()=>[Bl,"full","auto",...I()],$=()=>[xc,"none","subgrid",Je,Ye],M=()=>["auto",{span:["full",xc,Je,Ye]},xc,Je,Ye],y=()=>[xc,"auto",Je,Ye],E=()=>["auto","min","max","fr",Je,Ye],C=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],g=()=>["start","end","center","stretch","center-safe","end-safe"],x=()=>["auto",...I()],O=()=>[Bl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],S=()=>[t,Je,Ye],w=()=>[...N(),zN,HN,{position:[Je,Ye]}],_=()=>["no-repeat",{repeat:["","x","y","space","round"]}],k=()=>["auto","cover","contain",SFe,_Fe,{size:[Je,Ye]}],L=()=>[s4,kf,D1],D=()=>["","none","full",d,Je,Ye],U=()=>["",Et,kf,D1],j=()=>["solid","dashed","dotted","double"],H=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>[Et,s4,zN,HN],K=()=>["","none",h,Je,Ye],q=()=>["none",Et,Je,Ye],V=()=>["none",Et,Je,Ye],G=()=>[Et,Je,Ye],J=()=>[Bl,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[mo],breakpoint:[mo],color:[mFe],container:[mo],"drop-shadow":[mo],ease:["in","out","in-out"],font:[EFe],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[mo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[mo],shadow:[mo],spacing:["px",Et],text:[mo],"text-shadow":[mo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Bl,Ye,Je,v]}],container:["container"],columns:[{columns:[Et,Ye,Je,o]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:B()}],"overflow-x":[{"overflow-x":B()}],"overflow-y":[{"overflow-y":B()}],overscroll:[{overscroll:F()}],"overscroll-x":[{"overscroll-x":F()}],"overscroll-y":[{"overscroll-y":F()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[xc,"auto",Je,Ye]}],basis:[{basis:[Bl,"full","auto",o,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Et,Bl,"auto","initial","none",Ye]}],grow:[{grow:["",Et,Je,Ye]}],shrink:[{shrink:["",Et,Je,Ye]}],order:[{order:[xc,"first","last","none",Je,Ye]}],"grid-cols":[{"grid-cols":$()}],"col-start-end":[{col:M()}],"col-start":[{"col-start":y()}],"col-end":[{"col-end":y()}],"grid-rows":[{"grid-rows":$()}],"row-start-end":[{row:M()}],"row-start":[{"row-start":y()}],"row-end":[{"row-end":y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":E()}],"auto-rows":[{"auto-rows":E()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...C(),"normal"]}],"justify-items":[{"justify-items":[...g(),"normal"]}],"justify-self":[{"justify-self":["auto",...g()]}],"align-content":[{content:["normal",...C()]}],"align-items":[{items:[...g(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...g(),{baseline:["","last"]}]}],"place-content":[{"place-content":C()}],"place-items":[{"place-items":[...g(),"baseline"]}],"place-self":[{"place-self":["auto",...g()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:x()}],mx:[{mx:x()}],my:[{my:x()}],ms:[{ms:x()}],me:[{me:x()}],mt:[{mt:x()}],mr:[{mr:x()}],mb:[{mb:x()}],ml:[{ml:x()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:O()}],w:[{w:[o,"screen",...O()]}],"min-w":[{"min-w":[o,"screen","none",...O()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...O()]}],h:[{h:["screen","lh",...O()]}],"min-h":[{"min-h":["screen","lh","none",...O()]}],"max-h":[{"max-h":["screen","lh",...O()]}],"font-size":[{text:["base",n,kf,D1]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Je,o4]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",s4,Ye]}],"font-family":[{font:[xFe,Ye,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,Je,Ye]}],"line-clamp":[{"line-clamp":[Et,"none",Je,o4]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",Je,Ye]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Je,Ye]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:S()}],"text-color":[{text:S()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:[Et,"from-font","auto",Je,D1]}],"text-decoration-color":[{decoration:S()}],"underline-offset":[{"underline-offset":[Et,"auto",Je,Ye]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Je,Ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Je,Ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:w()}],"bg-repeat":[{bg:_()}],"bg-size":[{bg:k()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},xc,Je,Ye],radial:["",Je,Ye],conic:[xc,Je,Ye]},AFe,TFe]}],"bg-color":[{bg:S()}],"gradient-from-pos":[{from:L()}],"gradient-via-pos":[{via:L()}],"gradient-to-pos":[{to:L()}],"gradient-from":[{from:S()}],"gradient-via":[{via:S()}],"gradient-to":[{to:S()}],rounded:[{rounded:D()}],"rounded-s":[{"rounded-s":D()}],"rounded-e":[{"rounded-e":D()}],"rounded-t":[{"rounded-t":D()}],"rounded-r":[{"rounded-r":D()}],"rounded-b":[{"rounded-b":D()}],"rounded-l":[{"rounded-l":D()}],"rounded-ss":[{"rounded-ss":D()}],"rounded-se":[{"rounded-se":D()}],"rounded-ee":[{"rounded-ee":D()}],"rounded-es":[{"rounded-es":D()}],"rounded-tl":[{"rounded-tl":D()}],"rounded-tr":[{"rounded-tr":D()}],"rounded-br":[{"rounded-br":D()}],"rounded-bl":[{"rounded-bl":D()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...j(),"hidden","none"]}],"divide-style":[{divide:[...j(),"hidden","none"]}],"border-color":[{border:S()}],"border-color-x":[{"border-x":S()}],"border-color-y":[{"border-y":S()}],"border-color-s":[{"border-s":S()}],"border-color-e":[{"border-e":S()}],"border-color-t":[{"border-t":S()}],"border-color-r":[{"border-r":S()}],"border-color-b":[{"border-b":S()}],"border-color-l":[{"border-l":S()}],"divide-color":[{divide:S()}],"outline-style":[{outline:[...j(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Et,Je,Ye]}],"outline-w":[{outline:["",Et,kf,D1]}],"outline-color":[{outline:S()}],shadow:[{shadow:["","none",l,Nb,kb]}],"shadow-color":[{shadow:S()}],"inset-shadow":[{"inset-shadow":["none",u,Nb,kb]}],"inset-shadow-color":[{"inset-shadow":S()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:S()}],"ring-offset-w":[{"ring-offset":[Et,D1]}],"ring-offset-color":[{"ring-offset":S()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":S()}],"text-shadow":[{"text-shadow":["none",f,Nb,kb]}],"text-shadow-color":[{"text-shadow":S()}],opacity:[{opacity:[Et,Je,Ye]}],"mix-blend":[{"mix-blend":[...H(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":H()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Et]}],"mask-image-linear-from-pos":[{"mask-linear-from":W()}],"mask-image-linear-to-pos":[{"mask-linear-to":W()}],"mask-image-linear-from-color":[{"mask-linear-from":S()}],"mask-image-linear-to-color":[{"mask-linear-to":S()}],"mask-image-t-from-pos":[{"mask-t-from":W()}],"mask-image-t-to-pos":[{"mask-t-to":W()}],"mask-image-t-from-color":[{"mask-t-from":S()}],"mask-image-t-to-color":[{"mask-t-to":S()}],"mask-image-r-from-pos":[{"mask-r-from":W()}],"mask-image-r-to-pos":[{"mask-r-to":W()}],"mask-image-r-from-color":[{"mask-r-from":S()}],"mask-image-r-to-color":[{"mask-r-to":S()}],"mask-image-b-from-pos":[{"mask-b-from":W()}],"mask-image-b-to-pos":[{"mask-b-to":W()}],"mask-image-b-from-color":[{"mask-b-from":S()}],"mask-image-b-to-color":[{"mask-b-to":S()}],"mask-image-l-from-pos":[{"mask-l-from":W()}],"mask-image-l-to-pos":[{"mask-l-to":W()}],"mask-image-l-from-color":[{"mask-l-from":S()}],"mask-image-l-to-color":[{"mask-l-to":S()}],"mask-image-x-from-pos":[{"mask-x-from":W()}],"mask-image-x-to-pos":[{"mask-x-to":W()}],"mask-image-x-from-color":[{"mask-x-from":S()}],"mask-image-x-to-color":[{"mask-x-to":S()}],"mask-image-y-from-pos":[{"mask-y-from":W()}],"mask-image-y-to-pos":[{"mask-y-to":W()}],"mask-image-y-from-color":[{"mask-y-from":S()}],"mask-image-y-to-color":[{"mask-y-to":S()}],"mask-image-radial":[{"mask-radial":[Je,Ye]}],"mask-image-radial-from-pos":[{"mask-radial-from":W()}],"mask-image-radial-to-pos":[{"mask-radial-to":W()}],"mask-image-radial-from-color":[{"mask-radial-from":S()}],"mask-image-radial-to-color":[{"mask-radial-to":S()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":N()}],"mask-image-conic-pos":[{"mask-conic":[Et]}],"mask-image-conic-from-pos":[{"mask-conic-from":W()}],"mask-image-conic-to-pos":[{"mask-conic-to":W()}],"mask-image-conic-from-color":[{"mask-conic-from":S()}],"mask-image-conic-to-color":[{"mask-conic-to":S()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:w()}],"mask-repeat":[{mask:_()}],"mask-size":[{mask:k()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Je,Ye]}],filter:[{filter:["","none",Je,Ye]}],blur:[{blur:K()}],brightness:[{brightness:[Et,Je,Ye]}],contrast:[{contrast:[Et,Je,Ye]}],"drop-shadow":[{"drop-shadow":["","none",p,Nb,kb]}],"drop-shadow-color":[{"drop-shadow":S()}],grayscale:[{grayscale:["",Et,Je,Ye]}],"hue-rotate":[{"hue-rotate":[Et,Je,Ye]}],invert:[{invert:["",Et,Je,Ye]}],saturate:[{saturate:[Et,Je,Ye]}],sepia:[{sepia:["",Et,Je,Ye]}],"backdrop-filter":[{"backdrop-filter":["","none",Je,Ye]}],"backdrop-blur":[{"backdrop-blur":K()}],"backdrop-brightness":[{"backdrop-brightness":[Et,Je,Ye]}],"backdrop-contrast":[{"backdrop-contrast":[Et,Je,Ye]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Et,Je,Ye]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Et,Je,Ye]}],"backdrop-invert":[{"backdrop-invert":["",Et,Je,Ye]}],"backdrop-opacity":[{"backdrop-opacity":[Et,Je,Ye]}],"backdrop-saturate":[{"backdrop-saturate":[Et,Je,Ye]}],"backdrop-sepia":[{"backdrop-sepia":["",Et,Je,Ye]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Je,Ye]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Et,"initial",Je,Ye]}],ease:[{ease:["linear","initial",m,Je,Ye]}],delay:[{delay:[Et,Je,Ye]}],animate:[{animate:["none",T,Je,Ye]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Je,Ye]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:q()}],"rotate-x":[{"rotate-x":q()}],"rotate-y":[{"rotate-y":q()}],"rotate-z":[{"rotate-z":q()}],scale:[{scale:V()}],"scale-x":[{"scale-x":V()}],"scale-y":[{"scale-y":V()}],"scale-z":[{"scale-z":V()}],"scale-3d":["scale-3d"],skew:[{skew:G()}],"skew-x":[{"skew-x":G()}],"skew-y":[{"skew-y":G()}],transform:[{transform:[Je,Ye,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:J()}],"translate-x":[{"translate-x":J()}],"translate-y":[{"translate-y":J()}],"translate-z":[{"translate-z":J()}],"translate-none":["translate-none"],accent:[{accent:S()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:S()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Je,Ye]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Je,Ye]}],fill:[{fill:["none",...S()]}],"stroke-w":[{stroke:[Et,kf,D1,o4]}],stroke:[{stroke:["none",...S()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},MFe=lFe(OFe),c4=new Map;function Mt(...t){const e=JSON.stringify(t);if(c4.has(e))return c4.get(e);const n=MFe(hY(t));return c4.set(e,n),n}const PFe=(t,e)=>{if(e!=null&&e.startsWith("https://"))return e;switch(t){case"chrome":return`https://chrome.google.com/webstore/detail/${e}`;case"firefox":return`https://addons.mozilla.org/firefox/addon/${e}`;case"edge":return`https://microsoftedge.microsoft.com/addons/detail/${e}`;default:return null}},kFe=(t,e)=>{if(e!=null&&e.includes("https://"))return e;switch(t){case"android":return`https://play.google.com/store/apps/details?id=${e}`;case"ios":return`https://apps.apple.com/app/safepal-wallet/${e}`;default:return""}},NFe=t=>{switch(t){case"ios":return"iOS";case"android":return"Android";default:return""}},RFe=t=>t.charAt(0).toUpperCase()+t.slice(1),kr=t=>`https://images.web3auth.io/login-modal/${t}.svg`,wG="https://api.web3auth.io/passwordless-service",DFe=async()=>{try{const t=await wBe(`${wG}/api/v3/user/location`);return t&&t.data.country?{country:t.data.country,dialCode:t.data.dial_code}:null}catch(t){return Te.error("error getting user country",t),null}},$Fe=async t=>{try{const e=await K7(`${wG}/api/v3/phone_number/validate`,{phone_number:t});return e&&e.success?e:{success:!1,parsed_number:"",country_flag:""}}catch(e){return Te.error("error validating phone number",e),e.status===400?{success:!1,parsed_number:"",country_flag:""}:{success:!1,parsed_number:"",country_flag:""}}},vG=t=>{let e=t;return e||(e=(typeof window<"u"&&(window.navigator.userLanguage||window.navigator.language)||"en-US").split("-")[0]),Object.prototype.hasOwnProperty.call(TBe,e)?e:Ja.en};function LFe(t){const e=encodeURIComponent(t.uri);return t.link.startsWith("http")?`${t.link}/wc?uri=${e}`:t.link?`${t.link}wc?uri=${e}`:""}const BFe=t=>{if(!t)return"passwordless.something-wrong-error";switch(t){case"E001":return"passwordless.error-invalid-params";case"E002":return"passwordless.error-invalid-origin";case"E201":return"passwordless.error-sending-sms-failed";case"E300":return"passwordless.error-no-mail-generated";case"E301":return"passwordless.error-invalid-link";case"E302":return"passwordless.error-new-link-generated-heading";case"E304":case"E403":return"passwordless.error-max-retry-limit-reached";case"E305":case"E401":return"passwordless.error-invalid-otp";case"E306":return"passwordless.error-otp-expired";case"E400":return"passwordless.error-no-sms-generated";case"E411":return"passwordless.error-plan-limit-reached";case"E412":return"passwordless.error-recaptcha-verification-failed";default:return"passwordless.something-wrong-error"}};function FFe(t){const{open:e=!0,padding:n=!0,shadow:r=!0,border:a=!1,showCloseIcon:i=!1,onClose:s,children:o,borderRadius:c="large"}=t,[d,l]=he.useState(!1);he.useEffect(()=>{e?setTimeout(()=>{l(!0)},50):l(!1)},[e]);const u=()=>{s&&s()};return d?ne.jsxs("div",{className:Mt("w3a--bg-app-light-surface1 dark:w3a--bg-app-dark-surface-main w3a--rounded-3xl w3a--w-[356px] [@media(min-width:375px)]:w3a--w-[393px] w3a--h-auto w3a--flex w3a--flex-col w3a--duration-500",{"w3a--translate-y-0 w3a--delay-100":d,"w3a--translate-y-[100vh]":!d,"w3a--p-4":n,"w3a--shadow-xl sm:w3a--shadow-lg":r,"w3a--border w3a--border-app-gray-100 dark:w3a--border-app-gray-800":a,"w3a--rounded-[30px]":c==="large","w3a--rounded-2xl":c==="medium","w3a--rounded-none":c==="small"}),children:[i&&ne.jsx("div",{className:"w3a--absolute w3a--right-6 w3a--top-[30px] w3a--z-10 w3a--cursor-pointer",children:ne.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:u,className:"w3a--text-app-gray-900 dark:w3a--text-app-white",children:ne.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),o]}):null}function UFe(t){const{children:e,open:n,onClose:r,placement:a="center",padding:i=!0,shadow:s=!0,border:o=!1,showCloseIcon:c=!0,borderRadius:d="large"}=t,[l,u]=he.useState(!1);he.useEffect(()=>{n?(document.body.style.overflow="hidden",setTimeout(()=>{u(!0)},50)):(u(!1),document.body.style.overflow="")},[n]);const f=he.useMemo(()=>({center:"w3a--top-0 w3a--left-0 w3a--items-center w3a--justify-center","top-center":"w3a--top-8 w3a--left-0 w3a--items-start w3a--justify-center","bottom-center":"w3a--bottom-8 w3a--left-0 w3a--items-end w3a--justify-center",left:"sm:w3a--left-8 w3a--flex w3a--items-center w3a--justify-center sm:w3a--justify-start",right:"sm:w3a--right-8 w3a--flex w3a--items-center w3a--justify-center sm:w3a--justify-end"}),[]),p=he.useMemo(()=>f[a],[a,f]),h=()=>{r&&r()};return ne.jsx("div",{className:Mt("w3a--fixed w3a--z-50 w3a--overflow-hidden w3a--flex w3a--transition-all",p,{"w3a--w-screen w3a--h-screen":l,"w3a--w-0 w3a--h-0 w3a--delay-500":!l}),children:ne.jsxs("div",{className:Mt("w3a--bg-app-light-surface1 dark:w3a--bg-app-dark-surface-main w3a--w-[356px] [@media(min-width:375px)]:w3a--w-[393px] w3a--h-auto w3a--flex w3a--flex-col w3a--duration-500",{"w3a--translate-y-0 w3a--delay-100":l,"w3a--translate-y-[100vh]":!l,"w3a--p-4":i,"w3a--shadow-xl sm:w3a--shadow-lg":s,"w3a--border w3a--border-app-gray-100 dark:w3a--border-app-gray-800":o,"w3a--rounded-[30px]":d==="large","w3a--rounded-2xl":d==="medium","w3a--rounded-none":d==="small"}),children:[c&&ne.jsx("div",{className:"w3a--absolute w3a--right-6 w3a--top-[30px] w3a--z-10 w3a--cursor-pointer",children:ne.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:h,className:"w3a--text-app-gray-500 hover:w3a--text-app-gray-900 dark:w3a--text-app-gray-200 dark:hover:w3a--text-app-white",children:ne.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),e]})})}const jFe=(t,e,n,r)=>{var i,s,o,c;const a=[n,{code:e,...r||{}}];if((s=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&s.forward)return t.services.logger.forward(a,"warn","react-i18next::",!0);_d(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(c=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&c.warn?t.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},qN={},X7=(t,e,n,r)=>{_d(n)&&qN[n]||(_d(n)&&(qN[n]=new Date),jFe(t,e,n,r))},EG=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Q7=(t,e,n)=>{t.loadNamespaces(e,EG(t,n))},KN=(t,e,n,r)=>{if(_d(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(e)>-1)return Q7(t,n,r);n.forEach(a=>{t.options.ns.indexOf(a)<0&&t.options.ns.push(a)}),t.loadLanguages(e,EG(t,r))},HFe=(t,e,n={})=>!e.languages||!e.languages.length?(X7(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,a)=>{var i;if(((i=n.bindI18n)==null?void 0:i.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,t))return!1}}),_d=t=>typeof t=="string",zFe=t=>typeof t=="object"&&t!==null,qFe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,KFe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},VFe=t=>KFe[t],WFe=t=>t.replace(qFe,VFe);let eE={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:WFe};const GFe=(t={})=>{eE={...eE,...t}},YFe=()=>eE;let _G;const JFe=t=>{_G=t},ZFe=()=>_G,XFe={type:"3rdParty",init(t){GFe(t.options.react),JFe(t)}},QFe=he.createContext();class eUe{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const tUe=(t,e)=>{const n=he.useRef();return he.useEffect(()=>{n.current=t},[t,e]),n.current},TG=(t,e,n,r)=>t.getFixedT(e,n,r),nUe=(t,e,n,r)=>he.useCallback(TG(t,e,n,r),[t,e,n,r]),Br=(t,e={})=>{var N,R,B,F;const{i18n:n}=e,{i18n:r,defaultNS:a}=he.useContext(QFe)||{},i=n||r||ZFe();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new eUe),!i){X7(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const I=($,M)=>_d(M)?M:zFe(M)&&_d(M.defaultValue)?M.defaultValue:Array.isArray($)?$[$.length-1]:$,P=[I,{},!1];return P.t=I,P.i18n={},P.ready=!1,P}(N=i.options.react)!=null&&N.wait&&X7(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...YFe(),...i.options.react,...e},{useSuspense:o,keyPrefix:c}=s;let d=a||((R=i.options)==null?void 0:R.defaultNS);d=_d(d)?[d]:d||["translation"],(F=(B=i.reportNamespaces).addUsedNamespaces)==null||F.call(B,d);const l=(i.isInitialized||i.initializedStoreOnce)&&d.every(I=>HFe(I,i,s)),u=nUe(i,e.lng||null,s.nsMode==="fallback"?d:d[0],c),f=()=>u,p=()=>TG(i,e.lng||null,s.nsMode==="fallback"?d:d[0],c),[h,b]=he.useState(f);let v=d.join();e.lng&&(v=`${e.lng}${v}`);const m=tUe(v),T=he.useRef(!0);he.useEffect(()=>{const{bindI18n:I,bindI18nStore:P}=s;T.current=!0,!l&&!o&&(e.lng?KN(i,e.lng,d,()=>{T.current&&b(p)}):Q7(i,d,()=>{T.current&&b(p)})),l&&m&&m!==v&&T.current&&b(p);const $=()=>{T.current&&b(p)};return I&&(i==null||i.on(I,$)),P&&(i==null||i.store.on(P,$)),()=>{T.current=!1,i&&(I==null||I.split(" ").forEach(M=>i.off(M,$))),P&&i&&P.split(" ").forEach(M=>i.store.off(M,$))}},[i,v]),he.useEffect(()=>{T.current&&l&&b(f)},[i,c,l]);const A=[h,i,l];if(A.t=h,A.i18n=i,A.ready=l,l||!l&&!o)return A;throw new Promise(I=>{e.lng?KN(i,e.lng,d,()=>I()):Q7(i,d,()=>I())})},wh=he.createContext({bodyState:{metamaskQrCode:{show:!1,wallet:null},installLinks:{show:!1,wallet:null},multiChainSelector:{show:!1,wallet:null}},toast:{message:"",type:Z8.SUCCESS},setBodyState:()=>{},setToast:()=>{}}),cm=he.createContext({isDark:!0}),dt=t=>typeof t=="string",Nf=()=>{let t,e;const n=new Promise((r,a)=>{t=r,e=a});return n.resolve=t,n.reject=e,n},VN=t=>t==null?"":""+t,rUe=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},aUe=/###/g,WN=t=>t&&t.indexOf("###")>-1?t.replace(aUe,"."):t,GN=t=>!t||dt(t),h5=(t,e,n)=>{const r=dt(e)?e.split("."):e;let a=0;for(;a<r.length-1;){if(GN(t))return{};const i=WN(r[a]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++a}return GN(t)?{}:{obj:t,k:WN(r[a])}},YN=(t,e,n)=>{const{obj:r,k:a}=h5(t,e,Object);if(r!==void 0||e.length===1){r[a]=n;return}let i=e[e.length-1],s=e.slice(0,e.length-1),o=h5(t,s,Object);for(;o.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),o=h5(t,s,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=n},iUe=(t,e,n,r)=>{const{obj:a,k:i}=h5(t,e,Object);a[i]=a[i]||[],a[i].push(n)},X8=(t,e)=>{const{obj:n,k:r}=h5(t,e);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},sUe=(t,e,n)=>{const r=X8(t,n);return r!==void 0?r:X8(e,n)},xG=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?dt(t[r])||t[r]instanceof String||dt(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):xG(t[r],e[r],n):t[r]=e[r]);return t},Fl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var oUe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const cUe=t=>dt(t)?t.replace(/[&<>"'\/]/g,e=>oUe[e]):t;class dUe{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const lUe=[" ",",","?","!",";"],uUe=new dUe(20),fUe=(t,e,n)=>{e=e||"",n=n||"";const r=lUe.filter(s=>e.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const a=uUe.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let i=!a.test(t);if(!i){const s=t.indexOf(n);s>0&&!a.test(t.substring(0,s))&&(i=!0)}return i},tE=(t,e,n=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const r=e.split(n);let a=t;for(let i=0;i<r.length;){if(!a||typeof a!="object")return;let s,o="";for(let c=i;c<r.length;++c)if(c!==i&&(o+=n),o+=r[c],s=a[o],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<r.length-1)continue;i+=c-i+1;break}a=s}return a},_p=t=>t==null?void 0:t.replace("_","-"),pUe={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var n,r;(r=(n=console==null?void 0:console[t])==null?void 0:n.apply)==null||r.call(n,console,e)}};class Q8{constructor(e,n={}){this.init(e,n)}init(e,n={}){this.prefix=n.prefix||"i18next:",this.logger=e||pUe,this.options=n,this.debug=n.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,a){return a&&!this.debug?null:(dt(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new Q8(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new Q8(this.logger,e)}}var As=new Q8;class dm{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const a=this.observers[r].get(n)||0;this.observers[r].set(n,a+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e,...n){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([a,i])=>{for(let s=0;s<i;s++)a.apply(a,[e,...n])})}}class JN extends dm{constructor(e,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r,a={}){var d,l;const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,s=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,n],r&&(Array.isArray(r)?o.push(...r):dt(r)&&i?o.push(...r.split(i)):o.push(r)));const c=X8(this.data,o);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=o[0],n=o[1],r=o.slice(2).join(".")),c||!s||!dt(r)?c:tE((l=(d=this.data)==null?void 0:d[e])==null?void 0:l[n],r,i)}addResource(e,n,r,a,i={silent:!1}){const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[e,n];r&&(o=o.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(o=e.split("."),a=n,n=o[1]),this.addNamespaces(n),YN(this.data,o,a),i.silent||this.emit("added",e,n,r,a)}addResources(e,n,r,a={silent:!1}){for(const i in r)(dt(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});a.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,a,i,s={silent:!1,skipCopy:!1}){let o=[e,n];e.indexOf(".")>-1&&(o=e.split("."),a=r,r=n,n=o[1]),this.addNamespaces(n);let c=X8(this.data,o)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),a?xG(c,r,i):c={...c,...r},YN(this.data,o,c),s.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(a=>n[a]&&Object.keys(n[a]).length>0)}toJSON(){return this.data}}var SG={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,a){return t.forEach(i=>{var s;e=((s=this.processors[i])==null?void 0:s.process(e,n,r,a))??e}),e}};const ZN={},XN=t=>!dt(t)&&typeof t!="boolean"&&typeof t!="number";class ey extends dm{constructor(e,n={}){super(),rUe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=As.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,n={interpolation:{}}){const r={...n};if(e==null)return!1;const a=this.resolve(e,r);return(a==null?void 0:a.res)!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const a=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const s=r&&e.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!fUe(e,r,a);if(s&&!o){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:dt(i)?[i]:i};const d=e.split(r);(r!==a||r===a&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(a)}return{key:e,namespaces:dt(i)?[i]:i}}translate(e,n,r){let a=typeof n=="object"?{...n}:n;if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof options=="object"&&(a={...a}),a||(a={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const i=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:o,namespaces:c}=this.extractFromKey(e[e.length-1],a),d=c[c.length-1];let l=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;l===void 0&&(l=":");const u=a.lng||this.language,f=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((u==null?void 0:u.toLowerCase())==="cimode")return f?i?{res:`${d}${l}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:`${d}${l}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:o;const p=this.resolve(e,a);let h=p==null?void 0:p.res;const b=(p==null?void 0:p.usedKey)||o,v=(p==null?void 0:p.exactUsedKey)||o,m=["[object Number]","[object Function]","[object RegExp]"],T=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,N=a.count!==void 0&&!dt(a.count),R=ey.hasDefaultValue(a),B=N?this.pluralResolver.getSuffix(u,a.count,a):"",F=a.ordinal&&N?this.pluralResolver.getSuffix(u,a.count,{ordinal:!1}):"",I=N&&!a.ordinal&&a.count===0,P=I&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${B}`]||a[`defaultValue${F}`]||a.defaultValue;let $=h;A&&!h&&R&&($=P);const M=XN($),y=Object.prototype.toString.apply($);if(A&&$&&M&&m.indexOf(y)<0&&!(dt(T)&&Array.isArray($))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,$,{...a,ns:c}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(p.res=E,p.usedParams=this.getUsedParamsDetails(a),p):E}if(s){const E=Array.isArray($),C=E?[]:{},g=E?v:b;for(const x in $)if(Object.prototype.hasOwnProperty.call($,x)){const O=`${g}${s}${x}`;R&&!h?C[x]=this.translate(O,{...a,defaultValue:XN(P)?P[x]:void 0,joinArrays:!1,ns:c}):C[x]=this.translate(O,{...a,joinArrays:!1,ns:c}),C[x]===O&&(C[x]=$[x])}h=C}}else if(A&&dt(T)&&Array.isArray(h))h=h.join(T),h&&(h=this.extendTranslation(h,e,a,r));else{let E=!1,C=!1;!this.isValidLookup(h)&&R&&(E=!0,h=P),this.isValidLookup(h)||(C=!0,h=o);const x=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&C?void 0:h,O=R&&P!==h&&this.options.updateMissing;if(C||E||O){if(this.logger.log(O?"updateKey":"missingKey",u,d,o,O?P:h),s){const k=this.resolve(o,{...a,keySeparator:!1});k&&k.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let S=[];const w=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&w&&w[0])for(let k=0;k<w.length;k++)S.push(w[k]);else this.options.saveMissingTo==="all"?S=this.languageUtils.toResolveHierarchy(a.lng||this.language):S.push(a.lng||this.language);const _=(k,L,D)=>{var j;const U=R&&D!==h?D:x;this.options.missingKeyHandler?this.options.missingKeyHandler(k,d,L,U,O,a):(j=this.backendConnector)!=null&&j.saveMissing&&this.backendConnector.saveMissing(k,d,L,U,O,a),this.emit("missingKey",k,d,L,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?S.forEach(k=>{const L=this.pluralResolver.getSuffixes(k,a);I&&a[`defaultValue${this.options.pluralSeparator}zero`]&&L.indexOf(`${this.options.pluralSeparator}zero`)<0&&L.push(`${this.options.pluralSeparator}zero`),L.forEach(D=>{_([k],o+D,a[`defaultValue${D}`]||P)})}):_(S,o,P))}h=this.extendTranslation(h,e,a,p,r),C&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${d}${l}${o}`),(C||E)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${l}${o}`:o,E?h:void 0,a))}return i?(p.res=h,p.usedParams=this.getUsedParamsDetails(a),p):h}extendTranslation(e,n,r,a,i){var c,d;if((c=this.i18nFormat)!=null&&c.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const l=dt(e)&&(((d=r==null?void 0:r.interpolation)==null?void 0:d.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(l){const p=e.match(this.interpolator.nestingRegexp);u=p&&p.length}let f=r.replace&&!dt(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||a.usedLng,r),l){const p=e.match(this.interpolator.nestingRegexp),h=p&&p.length;u<h&&(r.nest=!1)}!r.lng&&a&&a.res&&(r.lng=this.language||a.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,(...p)=>(i==null?void 0:i[0])===p[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${p[0]} in key: ${n[0]}`),null):this.translate(...p,n),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,o=dt(s)?[s]:s;return e!=null&&(o!=null&&o.length)&&r.applyPostProcessor!==!1&&(e=SG.handle(o,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...a,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,n={}){let r,a,i,s,o;return dt(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,n),l=d.key;a=l;let u=d.namespaces;this.options.fallbackNS&&(u=u.concat(this.options.fallbackNS));const f=n.count!==void 0&&!dt(n.count),p=f&&!n.ordinal&&n.count===0,h=n.context!==void 0&&(dt(n.context)||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);u.forEach(v=>{var m,T;this.isValidLookup(r)||(o=v,!ZN[`${b[0]}-${v}`]&&((m=this.utils)!=null&&m.hasLoadedNamespace)&&!((T=this.utils)!=null&&T.hasLoadedNamespace(o))&&(ZN[`${b[0]}-${v}`]=!0,this.logger.warn(`key "${a}" for languages "${b.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(A=>{var B;if(this.isValidLookup(r))return;s=A;const N=[l];if((B=this.i18nFormat)!=null&&B.addLookupKeys)this.i18nFormat.addLookupKeys(N,l,A,v,n);else{let F;f&&(F=this.pluralResolver.getSuffix(A,n.count,n));const I=`${this.options.pluralSeparator}zero`,P=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(f&&(N.push(l+F),n.ordinal&&F.indexOf(P)===0&&N.push(l+F.replace(P,this.options.pluralSeparator)),p&&N.push(l+I)),h){const $=`${l}${this.options.contextSeparator}${n.context}`;N.push($),f&&(N.push($+F),n.ordinal&&F.indexOf(P)===0&&N.push($+F.replace(P,this.options.pluralSeparator)),p&&N.push($+I))}}let R;for(;R=N.pop();)this.isValidLookup(r)||(i=R,r=this.getResource(A,v,R,n))}))})}),{res:r,usedKey:a,exactUsedKey:i,usedLng:s,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r,a={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(e,n,r,a):this.resourceStore.getResource(e,n,r,a)}getUsedParamsDetails(e={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!dt(e.replace);let a=r?e.replace:e;if(r&&typeof e.count<"u"&&(a.count=e.count),this.options.interpolation.defaultVariables&&(a={...this.options.interpolation.defaultVariables,...a}),!r){a={...a};for(const i of n)delete a[i]}return a}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}class QN{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=As.create("languageUtils")}getScriptPartFromCode(e){if(e=_p(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=_p(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(dt(e)&&e.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(e)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const a=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(a))&&(n=a)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const a=this.getScriptPartFromCode(r);if(this.isSupportedCode(a))return n=a;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(s=>{if(s===i)return s;if(!(s.indexOf("-")<0&&i.indexOf("-")<0)&&(s.indexOf("-")>0&&i.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===i||s.indexOf(i)===0&&i.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),dt(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],e),a=[],i=s=>{s&&(this.isSupportedCode(s)?a.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return dt(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):dt(e)&&i(this.formatLanguageCode(e)),r.forEach(s=>{a.indexOf(s)<0&&i(this.formatLanguageCode(s))}),a}}const eR={zero:0,one:1,two:2,few:3,many:4,other:5},tR={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class hUe{constructor(e,n={}){this.languageUtils=e,this.options=n,this.logger=As.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e,n={}){const r=_p(e==="dev"?"en":e),a=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:a});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let s;try{s=new Intl.PluralRules(r,{type:a})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),tR;if(!e.match(/-|_/))return tR;const c=this.languageUtils.getLanguagePartFromCode(e);s=this.getRule(c,n)}return this.pluralRulesCache[i]=s,s}needsPlural(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,n,r={}){return this.getSuffixes(e,r).map(a=>`${n}${a}`)}getSuffixes(e,n={}){let r=this.getRule(e,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((a,i)=>eR[a]-eR[i]).map(a=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${a}`):[]}getSuffix(e,n,r={}){const a=this.getRule(e,r);return a?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${a.select(n)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",n,r))}}const nR=(t,e,n,r=".",a=!0)=>{let i=sUe(t,e,n);return!i&&a&&dt(n)&&(i=tE(t,n,r),i===void 0&&(i=tE(e,n,r))),i},d4=t=>t.replace(/\$/g,"$$$$");class bUe{constructor(e={}){var n;this.logger=As.create("interpolator"),this.options=e,this.format=((n=e==null?void 0:e.interpolation)==null?void 0:n.format)||(r=>r),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:a,prefix:i,prefixEscaped:s,suffix:o,suffixEscaped:c,formatSeparator:d,unescapeSuffix:l,unescapePrefix:u,nestingPrefix:f,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:b,nestingOptionsSeparator:v,maxReplaces:m,alwaysFormat:T}=e.interpolation;this.escape=n!==void 0?n:cUe,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=a!==void 0?a:!1,this.prefix=i?Fl(i):s||"{{",this.suffix=o?Fl(o):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=l?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":l||"",this.nestingPrefix=f?Fl(f):p||Fl("$t("),this.nestingSuffix=h?Fl(h):b||Fl(")"),this.nestingOptionsSeparator=v||",",this.maxReplaces=m||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,a){var p;let i,s,o;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=h=>{if(h.indexOf(this.formatSeparator)<0){const T=nR(n,c,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,r,{...a,...n,interpolationkey:h}):T}const b=h.split(this.formatSeparator),v=b.shift().trim(),m=b.join(this.formatSeparator).trim();return this.format(nR(n,c,v,this.options.keySeparator,this.options.ignoreJSONStructure),m,r,{...a,...n,interpolationkey:v})};this.resetRegExp();const l=(a==null?void 0:a.missingInterpolationHandler)||this.options.missingInterpolationHandler,u=((p=a==null?void 0:a.interpolation)==null?void 0:p.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:h=>d4(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?d4(this.escape(h)):d4(h)}].forEach(h=>{for(o=0;i=h.regex.exec(e);){const b=i[1].trim();if(s=d(b),s===void 0)if(typeof l=="function"){const m=l(e,i,a);s=dt(m)?m:""}else if(a&&Object.prototype.hasOwnProperty.call(a,b))s="";else if(u){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${e}`),s="";else!dt(s)&&!this.useRawValueToEscape&&(s=VN(s));const v=h.safeValue(s);if(e=e.replace(i[0],v),u?(h.regex.lastIndex+=s.length,h.regex.lastIndex-=i[0].length):h.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,n,r={}){let a,i,s;const o=(c,d)=>{const l=this.nestingOptionsSeparator;if(c.indexOf(l)<0)return c;const u=c.split(new RegExp(`${l}[ ]*{`));let f=`{${u[1]}`;c=u[0],f=this.interpolate(f,s);const p=f.match(/'/g),h=f.match(/"/g);(((p==null?void 0:p.length)??0)%2===0&&!h||h.length%2!==0)&&(f=f.replace(/'/g,'"'));try{s=JSON.parse(f),d&&(s={...d,...s})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,b),`${c}${l}${f}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;a=this.nestingRegexp.exec(e);){let c=[];s={...r},s=s.replace&&!dt(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let d=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){const l=a[1].split(this.formatSeparator).map(u=>u.trim());a[1]=l.shift(),c=l,d=!0}if(i=n(o.call(this,a[1].trim(),s),s),i&&a[0]===e&&!dt(i))return i;dt(i)||(i=VN(i)),i||(this.logger.warn(`missed to resolve ${a[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((l,u)=>this.format(l,u,r.lng,{...r,interpolationkey:a[1].trim()}),i.trim())),e=e.replace(a[0],i),this.regexp.lastIndex=0}return e}}const yUe=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const a=r[1].substring(0,r[1].length-1);e==="currency"&&a.indexOf(":")<0?n.currency||(n.currency=a.trim()):e==="relativetime"&&a.indexOf(":")<0?n.range||(n.range=a.trim()):a.split(";").forEach(s=>{if(s){const[o,...c]=s.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),l=o.trim();n[l]||(n[l]=d),d==="false"&&(n[l]=!1),d==="true"&&(n[l]=!0),isNaN(d)||(n[l]=parseInt(d,10))}})}return{formatName:e,formatOptions:n}},rR=t=>{const e={};return(n,r,a)=>{let i=a;a&&a.interpolationkey&&a.formatParams&&a.formatParams[a.interpolationkey]&&a[a.interpolationkey]&&(i={...i,[a.interpolationkey]:void 0});const s=r+JSON.stringify(i);let o=e[s];return o||(o=t(_p(r),a),e[s]=o),o(n)}},mUe=t=>(e,n,r)=>t(_p(n),r)(e);class gUe{constructor(e={}){this.logger=As.create("formatter"),this.options=e,this.init(e)}init(e,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?rR:mUe;this.formats={number:r((a,i)=>{const s=new Intl.NumberFormat(a,{...i});return o=>s.format(o)}),currency:r((a,i)=>{const s=new Intl.NumberFormat(a,{...i,style:"currency"});return o=>s.format(o)}),datetime:r((a,i)=>{const s=new Intl.DateTimeFormat(a,{...i});return o=>s.format(o)}),relativetime:r((a,i)=>{const s=new Intl.RelativeTimeFormat(a,{...i});return o=>s.format(o,i.range||"day")}),list:r((a,i)=>{const s=new Intl.ListFormat(a,{...i});return o=>s.format(o)})}}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=rR(n)}format(e,n,r,a={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,c)=>{var u;const{formatName:d,formatOptions:l}=yUe(c);if(this.formats[d]){let f=o;try{const p=((u=a==null?void 0:a.formatParams)==null?void 0:u[a.interpolationkey])||{},h=p.locale||p.lng||a.locale||a.lng||r;f=this.formats[d](o,h,{...l,...a,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${d}`);return o},e)}}const wUe=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class vUe extends dm{constructor(e,n,r,a={}){var i,s;super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=a,this.logger=As.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=a.maxParallelReads||10,this.readingCalls=0,this.maxRetries=a.maxRetries>=0?a.maxRetries:5,this.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,this.state={},this.queue=[],(s=(i=this.backend)==null?void 0:i.init)==null||s.call(i,r,a.backend,a)}queueLoad(e,n,r,a){const i={},s={},o={},c={};return e.forEach(d=>{let l=!0;n.forEach(u=>{const f=`${d}|${u}`;!r.reload&&this.store.hasResourceBundle(d,u)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?s[f]===void 0&&(s[f]=!0):(this.state[f]=1,l=!1,s[f]===void 0&&(s[f]=!0),i[f]===void 0&&(i[f]=!0),c[u]===void 0&&(c[u]=!0)))}),l||(o[d]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const a=e.split("|"),i=a[0],s=a[1];n&&this.emit("failedLoading",i,s,n),!n&&r&&this.store.addResourceBundle(i,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const o={};this.queue.forEach(c=>{iUe(c.loaded,[i],s),wUe(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{o[d]||(o[d]={});const l=c.loaded[d];l.length&&l.forEach(u=>{o[d][u]===void 0&&(o[d][u]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r,a=0,i=this.retryTimeout,s){if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:a,wait:i,callback:s});return}this.readingCalls++;const o=(d,l)=>{if(this.readingCalls--,this.waitingReads.length>0){const u=this.waitingReads.shift();this.read(u.lng,u.ns,u.fcName,u.tried,u.wait,u.callback)}if(d&&l&&a<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,a+1,i*2,s)},i);return}s(d,l)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(e,n);d&&typeof d.then=="function"?d.then(l=>o(null,l)).catch(o):o(null,d)}catch(d){o(d)}return}return c(e,n,o)}prepareLoading(e,n,r={},a){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),a&&a();dt(e)&&(e=this.languageUtils.toResolveHierarchy(e)),dt(n)&&(n=[n]);const i=this.queueLoad(e,n,r,a);if(!i.toLoad.length)return i.pending.length||a(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e,n=""){const r=e.split("|"),a=r[0],i=r[1];this.read(a,i,"read",void 0,void 0,(s,o)=>{s&&this.logger.warn(`${n}loading namespace ${i} for language ${a} failed`,s),!s&&o&&this.logger.log(`${n}loaded namespace ${i} for language ${a}`,o),this.loaded(e,s,o)})}saveMissing(e,n,r,a,i,s={},o=()=>{}){var c,d,l,u,f;if((d=(c=this.services)==null?void 0:c.utils)!=null&&d.hasLoadedNamespace&&!((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((f=this.backend)!=null&&f.create){const p={...s,isUpdate:i},h=this.backend.create.bind(this.backend);if(h.length<6)try{let b;h.length===5?b=h(e,n,r,a,p):b=h(e,n,r,a),b&&typeof b.then=="function"?b.then(v=>o(null,v)).catch(o):o(null,b)}catch(b){o(b)}else h(e,n,r,a,o,p)}!e||!e[0]||this.store.addResource(e[0],n,r,a)}}}const aR=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),dt(t[1])&&(e.defaultValue=t[1]),dt(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),iR=t=>{var e,n;return dt(t.ns)&&(t.ns=[t.ns]),dt(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),dt(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((n=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:n.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Rb=()=>{},EUe=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Tp extends dm{constructor(e={},n){if(super(),this.options=iR(e),this.services={},this.logger=As,this.modules={external:[]},EUe(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(e={},n){this.isInitializing=!0,typeof e=="function"&&(n=e,e={}),e.defaultNS==null&&e.ns&&(dt(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=aR();this.options={...r,...this.options,...iR(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const a=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?As.init(a(this.modules.logger),this.options):As.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=gUe;const l=new QN(this.options);this.store=new JN(this.options.resources,this.options);const u=this.services;u.logger=As,u.resourceStore=this.store,u.languageUtils=l,u.pluralResolver=new hUe(l,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(u.formatter=a(d),u.formatter.init(u,this.options),this.options.interpolation.format=u.formatter.format.bind(u.formatter)),u.interpolator=new bUe(this.options),u.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},u.backendConnector=new vUe(a(this.modules.backend),u.resourceStore,u,this.options),u.backendConnector.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.languageDetector&&(u.languageDetector=a(this.modules.languageDetector),u.languageDetector.init&&u.languageDetector.init(u,this.options.detection,this.options)),this.modules.i18nFormat&&(u.i18nFormat=a(this.modules.i18nFormat),u.i18nFormat.init&&u.i18nFormat.init(this)),this.translator=new ey(this.services,this.options),this.translator.on("*",(f,...p)=>{this.emit(f,...p)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Rb),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...l)=>this.store[d](...l)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...l)=>(this.store[d](...l),this)});const o=Nf(),c=()=>{const d=(l,u)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(u),n(l,u)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),o}loadResources(e,n=Rb){var i,s;let r=n;const a=dt(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if((a==null?void 0:a.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],c=d=>{if(!d||d==="cimode")return;this.services.languageUtils.toResolveHierarchy(d).forEach(u=>{u!=="cimode"&&o.indexOf(u)<0&&o.push(u)})};a?c(a):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>c(l)),(s=(i=this.options.preload)==null?void 0:i.forEach)==null||s.call(i,d=>c(d)),this.services.backendConnector.load(o,this.options.ns,d=>{!d&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(d)})}else r(null)}reloadResources(e,n,r){const a=Nf();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Rb),this.services.backendConnector.reload(e,n,i=>{a.resolve(),r(i)}),a}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&SG.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,n){this.isLanguageChangingTo=e;const r=Nf();this.emit("languageChanging",e);const a=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},i=(o,c)=>{c?this.isLanguageChangingTo===e&&(a(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...d)=>this.t(...d)),n&&n(o,(...d)=>this.t(...d))},s=o=>{var l,u;!e&&!o&&this.services.languageDetector&&(o=[]);const c=dt(o)?o:o&&o[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(dt(o)?[o]:o);d&&(this.language||a(d),this.translator.language||this.translator.changeLanguage(d),(u=(l=this.services.languageDetector)==null?void 0:l.cacheUserLanguage)==null||u.call(l,d)),this.loadResources(d,f=>{i(f,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(e),r}getFixedT(e,n,r){const a=(i,s,...o)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([i,s].concat(o)):c={...s},c.lng=c.lng||a.lng,c.lngs=c.lngs||a.lngs,c.ns=c.ns||a.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||a.keyPrefix);const d=this.options.keySeparator||".";let l;return c.keyPrefix&&Array.isArray(i)?l=i.map(u=>`${c.keyPrefix}${d}${u}`):l=c.keyPrefix?`${c.keyPrefix}${d}${i}`:i,this.t(l,c)};return dt(e)?a.lng=e:a.lngs=e,a.ns=n,a.keyPrefix=r,a}t(...e){var n;return(n=this.translator)==null?void 0:n.translate(...e)}exists(...e){var n;return(n=this.translator)==null?void 0:n.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],a=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(o,c)=>{const d=this.services.backendConnector.state[`${o}|${c}`];return d===-1||d===0||d===2};if(n.precheck){const o=n.precheck(this,s);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,e)&&(!a||s(i,e)))}loadNamespaces(e,n){const r=Nf();return this.options.ns?(dt(e)&&(e=[e]),e.forEach(a=>{this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=Nf();dt(e)&&(e=[e]);const a=this.options.preload||[],i=e.filter(s=>a.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=a.concat(i),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(e){var a,i;if(e||(e=this.resolvedLanguage||(((a=this.languages)==null?void 0:a.length)>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new QN(aR());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},n){return new Tp(e,n)}cloneInstance(e={},n=Rb){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const a={...this.options,...e,isClone:!0},i=new Tp(a);if((e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const o=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((l,u)=>(l[u]={...c[d][u]},l),c[d]),c),{});i.store=new JN(o,a),i.services.resourceStore=i.store}return i.translator=new ey(i.services,a),i.translator.on("*",(o,...c)=>{i.emit(o,...c)}),i.init(a,n),i.translator.options=a,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const yr=Tp.createInstance();yr.createInstance=Tp.createInstance;yr.createInstance;yr.dir;yr.init;yr.loadResources;yr.reloadResources;yr.use;yr.changeLanguage;yr.getFixedT;yr.t;yr.exists;yr.setDefaultNamespace;yr.hasLoadedNamespace;yr.loadNamespaces;yr.loadLanguages;var AG={"adapter-loader.message":"Verify your {{adapter}} account to continue","adapter-loader.message1":"Verify your {{adapter}}","adapter-loader.message2":"account to continue",allChains:"All Chains","connect-wallet.more-wallets":"More Wallets",connectYourWallet:"Connect your wallet","errors-invalid-email":"Invalid Email","errors-invalid-number":"Invalid Phone Number","errors-invalid-number-email":"Invalid Email or Phone Number","errors-required":"Required","external.all-wallets":"All Wallets","external.back":"Back","external.connect":"Continue with a wallet","external.connect-wallet":"Connect Wallet","external.continue":"Continue with external wallet","external.continue-custom":"Continue with {{wallet}}","external.dont-have":"Don't have","external.get":"Get","external.get-wallet":"Get Wallet","external.install-browser-extension":"Install {{browser}} extension","external.install-mobile-app":"Install {{os}} app","external.installed":"Installed","external.no-wallets-found":"No wallets found","external.search-subtext":"Try search instead","external.search-text":"Don't see your wallet?","external.search-wallet":"Search through {{count}} wallets...","external.select-chain":"Select Chain","external.select-chain-description":"This {{wallet}} wallet supports multiple chains. Select which chain you'd like to connect to","external.title":"External Wallet","external.walletconnect-connect":"Connect","external.walletconnect-copy":"Scan the QR code with WalletConnect supported wallet or click to copy link","external.walletconnect-subtitle":"Scan the QR code with a WalletConnect-compatible wallet","footer.and":"and","footer.by-signing-in":"By signing in, you agree to our","footer.message":"Self-custodial login by","footer.message-new":"Self-custody via","footer.policy":"Privacy Policy","footer.privacy-policy":"Privacy Policy","footer.terms":"Terms of Use","footer.terms-of-service":"Terms of Service","footer.terms-service":"Terms of Service","footer.version":"Version",getWallet:"Get Wallet","header-subtitle":"Select one of the following options to continue","header-subtitle-name":"Your {{appName}} wallet with one click","header-subtitle-new":"Your blockchain wallet with one click","header-title":"Sign in","header-tooltip-desc":"The wallet serves as an account to store and manage your digital assets on the blockchain.","header-tooltip-title":"Wallet","network.add-request":"This site is requesting to add a network","network.cancel":"Cancel","network.from":"From","network.proceed":"Proceed","network.switch-request":"This site is requesting to switch networks","network.to":"To","otp.email-subtext":"Please enter the 6-digit verification code","otp.email-subtext-example":"that was sent to your email {{email}}","otp.email-title":"Email verification","otp.mobile-subtext":"Enter the OTP sent to","otp.mobile-title":"OTP verification","otp.success":"You are connected to your account!","passkey.add":"Add Passkey","passkey.haveExisting":"Have an existing passkey?","passkey.learn-more":"Learn more","passkey.or":"or","passkey.register-desc":"With passkeys, you can verify your identity through your face, fingerprint, or security keys.","passkey.register-title":"Register Passkey","passkey.use":"I have a passkey","passwordless.title":"Continue with {{title}}","popup.phone-body":"Your country code will be detected automatically, but if you're using a phone number from a different country, you'll need to enter the correct country code manually.","popup.phone-header":"Phone number and country code","post-loading.connected":"You are connected with your account","post-loading.something-wrong":"Something went wrong!",resendCode:"Resend Code",resendTimer:" Resend in {{timer}} seconds","social.continue":"Continue with","social.continueCustom":"Continue with {{adapter}}","social.email":"Email","social.email-continue":"Continue with Email","social.email-new":"name@example.com","social.passwordless-cta":"Continue","social.passwordless-login":"Login","social.passwordless-title":"Email/Phone","social.phone":"Phone","social.policy":"We do not store any data related to your social logins.","social.sign-in":"Sign in","social.sms":"Mobile","social.sms-continue":"Continue with Mobile","social.sms-invalid-number":"Invalid phone number","social.sms-placeholder-text":"E.g.:","social.view-less":"View less","social.view-less-socials":"View less socials","social.view-more":"View more","social.view-more-socials":"View more socials"},CG={"error-invalid-link":"Invalid verification link or link expired","error-invalid-origin":"Something went wrong, error code: E002","error-invalid-otp":"Invalid OTP, please try again","error-invalid-params":"Missing or Invalid Parameters.","error-max-retry-limit-reached":"You have reached the limit for wrong attempts. Please restart the flow again to complete verification.","error-new-link-generated-heading":"New verification link generated","error-no-mail-generated":"No mail generated. Please initiate the passwordless flow first.","error-no-sms-generated":"No OTP generated. Please initiate the passwordless flow first.","error-otp-expired":"OTP Expired","error-plan-limit-reached":"E411. Limit Reached","error-recaptcha-verification-failed":"Captcha verification failed. Please try again.","error-sending-sms-failed":"There was an error sending an sms. Please try again.","something-wrong-error":"Something went wrong"},IG={modal:AG,passwordless:CG};const _Ue=Object.freeze(Object.defineProperty({__proto__:null,default:IG,modal:AG,passwordless:CG},Symbol.toStringTag,{value:"Module"})),Ot=yr.createInstance();Ot.use(XFe).init({resources:{en:{translation:IG}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1},debug:!1,react:{useSuspense:!0}});function sR({isShown:t,onClose:e,children:n,uiConfig:r}){const{borderRadiusType:a="large"}=r;return ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:Mt("w3a--bottom-sheet-bg w3a--fixed w3a--left-0 w3a--top-0 w3a--size-full w3a--transition-opacity w3a--duration-300",{"w3a--rounded-[30px]":a==="large","w3a--rounded-2xl":a==="medium","w3a--rounded-none":a==="small"}),onClick:e,"aria-hidden":"true",role:"button"}),ne.jsxs("div",{className:Mt(`w3a--fixed w3a--bottom-2 w3a--left-2 w3a--mx-auto w3a--flex w3a--w-[96%] w3a--flex-col 
      w3a--gap-y-2 w3a--border w3a--border-app-gray-100 w3a--bg-app-white w3a--p-4 w3a--shadow-lg w3a--transition-transform w3a--duration-500 
      w3a--ease-out dark:w3a--border-app-gray-600 dark:w3a--bg-app-dark-surface-main
      ${t?"w3a--translate-y-0 w3a--delay-700":"w3a--translate-y-full"}`,{"w3a--rounded-[30px]":a==="large","w3a--rounded-2xl":a==="medium","w3a--rounded-none":a==="small"}),children:[ne.jsx("div",{className:"w3a--absolute w3a--right-4 w3a--top-[16px] w3a--z-10 w3a--cursor-pointer",children:ne.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:e,className:"w3a--text-app-gray-500 hover:w3a--text-app-gray-900 dark:w3a--text-app-gray-200 dark:hover:w3a--text-app-white",children:ne.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),n]})]})}const iS=he.createContext({analytics:void 0});function TUe(t){const{isDark:e,isLoading:n,selectedChain:r,setSelectedChain:a,chainNamespace:i}=t,[s]=Br(void 0,{i18n:Ot}),o=he.useMemo(()=>{const c=[{id:"all",name:"modal.allChains",icon:""}];for(const d of i)(d===Qe.EIP155||d===Qe.SOLANA)&&c.push({id:d,name:d===Qe.EIP155?"EVM":d,icon:d===Qe.EIP155?"ethereum":d});return c},[i]);return n?ne.jsx("div",{className:"w3a--flex w3a--items-center w3a--justify-between w3a--gap-x-2",children:Array.from({length:o.length}).map((c,d)=>ne.jsx("div",{className:"w3a--h-12 w3a--w-[100px] w3a--animate-pulse w3a--rounded-2xl w3a--bg-app-gray-200 dark:w3a--bg-app-gray-700"},`chain-loader-${d}`))}):ne.jsx("div",{className:"w3a--flex w3a--items-center w3a--justify-items-start w3a--gap-x-4",children:o.map(c=>ne.jsxs("button",{type:"button",className:Mt("w3a--flex w3a--w-[104px] w3a--items-center w3a--justify-center w3a--gap-x-1 w3a--text-xs w3a--font-medium w3a--px-4 w3a--py-3 w3a--text-app-gray-500 dark:w3a--text-app-gray-300 hover:w3a--bg-app-gray-200 dark:hover:w3a--bg-app-gray-700 w3a--h-12 w3a--rounded-2xl w3a--border w3a--border-transparent",{"w3a--bg-app-gray-100 dark:w3a--bg-app-gray-800 w3a--border-app-gray-200 dark:w3a--border-app-gray-700 w3a--text-app-gray-900 dark:w3a--text-app-white hover:!w3a--bg-app-gray-100 dark:hover:!w3a--bg-app-gray-800":r===c.id}),onClick:()=>a(c.id),children:[c.icon&&ne.jsx("img",{src:kr(e?`${c.icon}-dark`:`${c.icon}-light`),alt:c.name,className:"w3a--size-5 w3a--object-contain"}),ne.jsx("span",{className:"first-letter:w3a--capitalize",children:s(c.name)})]},c.id))})}function OG(t){const{onBackClick:e,currentPage:n,selectedButton:r}=t,[a]=Br(void 0,{i18n:Ot}),i=()=>{e&&e()};return ne.jsxs("div",{className:"w3a--flex w3a--items-center w3a--justify-between",children:[ne.jsx("button",{type:"button",className:"w3a--z-20 w3a--flex w3a--size-5 w3a--cursor-pointer w3a--items-center w3a--justify-center w3a--rounded-full",onClick:i,children:ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--text-app-gray-500 hover:w3a--text-app-gray-900 dark:w3a--text-app-gray-200 dark:hover:w3a--text-app-white",children:ne.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.707 16.707a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 0-1.414l6-6a1 1 0 0 1 1.414 1.414L5.414 9H17a1 1 0 1 1 0 2H5.414l4.293 4.293a1 1 0 0 1 0 1.414",clipRule:"evenodd"})})}),ne.jsx("p",{className:"w3a--text-base w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:n===dd.SELECTED_WALLET?r==null?void 0:r.displayName:n===dd.CONNECT_WALLET?a("modal.connectYourWallet"):n}),ne.jsx("div",{className:"w3a--z-[-1] w3a--size-5"})]})}const A6={SOCIAL:"social",WALLET:"wallet"};function fi(t){const{id:e="",isButton:n=!1,imageData:r="",height:a="auto",width:i="auto",extension:s="svg",darkImageId:o="",darkHoverImageId:c="",imageId:d,hoverImageId:l,fallbackImageId:u}=t,{isDark:f}=he.useContext(cm),p=he.useMemo(()=>f&&o?o:d,[f,o,d]),h=he.useMemo(()=>f&&c?c:l,[f,c,l]);return n?r?ne.jsx("img",{id:e,src:r,height:a,width:i,alt:l,className:Mt("w3a--object-contain",`w3a--h-${a} w3a--w-${i}`)}):ne.jsx("img",{id:e,src:`https://images.web3auth.io/${h}.${s}`,height:a,width:i,alt:l,className:Mt("w3a--rounded w3a--object-contain",`w3a--h-${a} w3a--w-${i}`)}):r?ne.jsx("img",{id:e,src:r,height:a,width:i,alt:d,className:Mt("w3a--object-contain",`w3a--h-${a} w3a--w-${i}`),onError:({currentTarget:b})=>{if(u){const v=b;v.onerror=null,v.src=`https://images.web3auth.io/${u}.svg`}}}):ne.jsx("img",{id:e,src:`https://images.web3auth.io/${p}.${s}`,height:a,width:i,alt:d,className:Mt("w3a--rounded w3a--object-contain",`w3a--h-${a} w3a--w-${i}`),onError:({currentTarget:b})=>{if(u){const v=b;v.onerror=null,v.src=`https://images.web3auth.io/${u}.svg`}}})}function xUe(t,e,n){const r=t===$e.TWITTER?`login-X${e?"-light":"-dark"}`:`login-${t}${e?"-light":"-dark"}`,a=t===$e.APPLE||t===$e.GITHUB||t===$e.TWITTER?r:`login-${t}-active`;return n?ne.jsx(fi,{width:"20",imageId:a,hoverImageId:a,isButton:!0}):ne.jsx(fi,{width:"20",imageId:r,hoverImageId:a})}function SUe(t){const{text:e,showIcon:n,showText:r,method:a,isDark:i,isPrimaryBtn:s,onClick:o,children:c,btnStyle:d,buttonRadius:l="pill"}=t;return ne.jsxs("button",{type:"button",onClick:u=>o&&o(u),className:Mt("w3a--btn",d,{"w3a--rounded-full":l==="pill","w3a--rounded-lg":l==="rounded","w3a--rounded-none":l==="square"}),children:[n&&xUe(a,i,s),r&&ne.jsx("p",{className:"w3a--text-sm w3a--font-normal w3a--text-app-gray-900 dark:w3a--text-app-white",children:e}),c]})}var MG={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(i=a(i,r(o)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var o in i)e.call(i,o)&&i[o]&&(s=a(s,o));return s}function a(i,s){return s?i?i+" "+s:i+s:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(MG);var AUe=MG.exports;const CUe=Wi(AUe);function IUe(t){const[e]=Br(void 0,{i18n:Ot}),{deviceDetails:n,button:r,walletConnectUri:a,onClick:i,label:s,buttonRadius:o}=t,c=he.useContext(cm),d=he.useMemo(()=>n.platform!=="desktop"&&r.href&&r.hasWalletConnect&&!r.hasInjectedWallet,[n,r]),l=he.useMemo(()=>r.href?LFe({uri:a,link:r.href}):a,[r,a]),u=()=>{l&&d?window.open(l,"_blank"):i&&i()};return ne.jsxs("button",{type:"button",className:CUe(`w3a--group w3a--relative w3a--overflow-hidden w3a--flex w3a--w-full w3a--items-center w3a--justify-between w3a--bg-app-gray-50 w3a--p-3 hover:w3a--bg-app-gray-200 
        hover:w3a--text-app-gray-900 dark:w3a--bg-app-gray-800 dark:hover:w3a--bg-app-gray-600 active:w3a--scale-95 w3a--transition-all w3a--duration-150`,{"w3a--rounded-full":o==="pill","w3a--rounded-lg":o==="rounded","w3a--rounded-none":o==="square"}),onClick:u,children:[ne.jsxs("div",{className:"w3a--flex w3a--items-center w3a--gap-x-2",children:[ne.jsx("figure",{className:"w3a--size-5",children:ne.jsx(fi,{imageData:r.icon,imageId:`login-${r.name}`,hoverImageId:`login-${r.name}`,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:r.imgExtension||"webp"})}),ne.jsx("p",{className:"w3a--max-w-[180px] w3a--truncate w3a--text-base w3a--font-normal w3a--text-app-gray-700 dark:w3a--text-app-white",children:s})]}),r.hasInjectedWallet&&ne.jsx("span",{className:"w3a--absolute w3a--right-4 w3a--top-1/2 w3a--flex w3a--w-auto -w3a--translate-y-1/2 w3a--items-center w3a--rounded-md w3a--bg-app-primary-100 w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--text-app-primary-800 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-6 group-hover:w3a--opacity-0  dark:w3a--border dark:w3a--border-app-primary-400 dark:w3a--bg-transparent dark:w3a--text-app-primary-400",children:e("modal.external.installed")}),ne.jsx("img",{id:"injected-wallet-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(c?"chevron-right-light":"chevron-right-dark"),alt:"arrow"})]})}function M2(t){const{type:e,props:n}=t,r=n,a=n,{text:i,showIcon:s,showText:o,method:c,isDark:d,isPrimaryBtn:l,onClick:u,children:f,btnStyle:p,buttonRadius:h}=r,{label:b,onClick:v,button:m,deviceDetails:T,walletConnectUri:A,buttonRadius:N}=a;return ne.jsxs(ne.Fragment,{children:[e===A6.SOCIAL&&ne.jsx(SUe,{text:i,showIcon:s,showText:o,method:c,isDark:d,isPrimaryBtn:l,onClick:u,btnStyle:p,buttonRadius:h,children:f}),e===A6.WALLET&&ne.jsx(IUe,{label:b,walletConnectUri:A,onClick:v,button:m,deviceDetails:T,buttonRadius:N})]})}function OUe(){const[t]=Br(void 0,{i18n:Ot});return ne.jsx("div",{className:"w3a--flex w3a--w-full w3a--items-center w3a--justify-center w3a--py-6 w3a--text-center w3a--text-app-gray-400 dark:w3a--text-app-gray-500",children:t("modal.external.no-wallets-found")})}function MUe(t){const{externalButtons:e,isLoading:n,handleWalletClick:r,deviceDetails:a,walletConnectUri:i,buttonRadius:s}=t;return n?ne.jsx("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-2",children:Array.from({length:6}).map((o,c)=>ne.jsx("div",{className:Mt("w3a--h-12 w3a--w-full w3a--animate-pulse w3a--rounded-2xl w3a--bg-app-gray-200 dark:w3a--bg-app-gray-700",{"w3a--rounded-full":s==="pill","w3a--rounded-lg":s==="rounded","w3a--rounded-none":s==="square"})},`loader-${c}`))}):ne.jsx("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-2 w3a--pr-1.5",children:e.map(o=>ne.jsx(M2,{type:A6.WALLET,props:{label:o.displayName,onClick:()=>r(o),button:o,deviceDetails:a,walletConnectUri:i,buttonRadius:s}},o.name))})}function PUe(t){const{totalExternalWalletsCount:e,initialWalletCount:n,handleMoreWallets:r,isLoading:a,isDark:i,buttonRadius:s}=t,[o]=Br(void 0,{i18n:Ot}),c=()=>{r&&r()};return a&&n<e?ne.jsx("div",{className:Mt("w3a--h-12 w3a--w-full w3a--animate-pulse w3a--bg-app-gray-200 dark:w3a--bg-app-gray-700",{"w3a--rounded-full":s==="pill","w3a--rounded-lg":s==="rounded","w3a--rounded-none":s==="square"})}):ne.jsxs("button",{type:"button",className:Mt("w3a--flex w3a--items-center w3a--justify-start w3a--gap-x-2 w3a--bg-app-gray-50 w3a--p-3 hover:w3a--bg-app-gray-200 dark:w3a--bg-app-gray-800 dark:hover:w3a--bg-app-gray-600 active:w3a--scale-95 w3a--transition-all w3a--duration-150 w3a--mr-2.5",{"w3a--rounded-full":s==="pill","w3a--rounded-lg":s==="rounded","w3a--rounded-none":s==="square"}),onClick:c,children:[ne.jsx("img",{src:kr(i?"view-dark":"view-light"),alt:"view",height:"24",width:"24"}),ne.jsx("p",{className:"w3a--text-base w3a--font-normal w3a--text-app-gray-700 dark:w3a--text-app-white",children:o("modal.connect-wallet.more-wallets")}),ne.jsx("span",{className:"w3a--inline-flex w3a--items-center w3a--rounded-full w3a--bg-app-primary-100 w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--text-app-primary-800  dark:w3a--border dark:w3a--border-app-primary-400 dark:w3a--bg-transparent dark:w3a--text-app-primary-400",children:e-n})]})}function kUe(t){const{externalButtons:e,isLoading:n,totalExternalWalletsCount:r,initialWalletCount:a,handleWalletClick:i,handleMoreWallets:s,isDark:o,deviceDetails:c,walletConnectUri:d,buttonRadius:l}=t,[u,f]=he.useState(!0),p=()=>{f(!1),s()};return ne.jsxs(ne.Fragment,{children:[ne.jsx("ul",{className:Mt("w3a--overflow-y-auto w3a--flex w3a--flex-col w3a--gap-y-2 w3a--h-[280px] w3a--social-container w3a--pr-2.5",{"w3a--h-[328px]":!u}),children:e.length===0?ne.jsx(OUe,{}):ne.jsx(MUe,{externalButtons:e,isLoading:n,handleWalletClick:i,deviceDetails:c,walletConnectUri:d,buttonRadius:l})}),u&&r>15&&!n&&a<r&&ne.jsx(PUe,{totalExternalWalletsCount:r,initialWalletCount:a,handleMoreWallets:p,isLoading:n,isDark:o,buttonRadius:l})]})}var sS={},ty={exports:{}};ty.exports;(function(t,e){var n=200,r="__lodash_hash_undefined__",a=1,i=2,s=9007199254740991,o="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",l="[object Boolean]",u="[object Date]",f="[object Error]",p="[object Function]",h="[object GeneratorFunction]",b="[object Map]",v="[object Number]",m="[object Null]",T="[object Object]",A="[object Promise]",N="[object Proxy]",R="[object RegExp]",B="[object Set]",F="[object String]",I="[object Symbol]",P="[object Undefined]",$="[object WeakMap]",M="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",g="[object Int8Array]",x="[object Int16Array]",O="[object Int32Array]",S="[object Uint8Array]",w="[object Uint8ClampedArray]",_="[object Uint16Array]",k="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,D=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,j={};j[E]=j[C]=j[g]=j[x]=j[O]=j[S]=j[w]=j[_]=j[k]=!0,j[o]=j[c]=j[M]=j[l]=j[y]=j[u]=j[f]=j[p]=j[b]=j[v]=j[T]=j[R]=j[B]=j[F]=j[$]=!1;var H=typeof vt=="object"&&vt&&vt.Object===Object&&vt,W=typeof self=="object"&&self&&self.Object===Object&&self,K=H||W||Function("return this")(),q=e&&!e.nodeType&&e,V=q&&!0&&t&&!t.nodeType&&t,G=V&&V.exports===q,J=G&&H.process,z=function(){try{return J&&J.binding&&J.binding("util")}catch{}}(),Y=z&&z.isTypedArray;function X(te,se){for(var Ee=-1,Ge=te==null?0:te.length,_n=0,bt=[];++Ee<Ge;){var $n=te[Ee];se($n,Ee,te)&&(bt[_n++]=$n)}return bt}function ae(te,se){for(var Ee=-1,Ge=se.length,_n=te.length;++Ee<Ge;)te[_n+Ee]=se[Ee];return te}function ie(te,se){for(var Ee=-1,Ge=te==null?0:te.length;++Ee<Ge;)if(se(te[Ee],Ee,te))return!0;return!1}function oe(te,se){for(var Ee=-1,Ge=Array(te);++Ee<te;)Ge[Ee]=se(Ee);return Ge}function ue(te){return function(se){return te(se)}}function Oe(te,se){return te.has(se)}function Re(te,se){return te==null?void 0:te[se]}function pe(te){var se=-1,Ee=Array(te.size);return te.forEach(function(Ge,_n){Ee[++se]=[_n,Ge]}),Ee}function Ze(te,se){return function(Ee){return te(se(Ee))}}function je(te){var se=-1,Ee=Array(te.size);return te.forEach(function(Ge){Ee[++se]=Ge}),Ee}var it=Array.prototype,De=Function.prototype,Ke=Object.prototype,Xe=K["__core-js_shared__"],mt=De.toString,He=Ke.hasOwnProperty,ct=function(){var te=/[^.]+$/.exec(Xe&&Xe.keys&&Xe.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),Vt=Ke.toString,It=RegExp("^"+mt.call(He).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tt=G?K.Buffer:void 0,L0=K.Symbol,ht=K.Uint8Array,kt=Ke.propertyIsEnumerable,B0=it.splice,At=L0?L0.toStringTag:void 0,Wt=Object.getOwnPropertySymbols,We=Tt?Tt.isBuffer:void 0,et=Ze(Object.keys,Object),ot=hl(K,"DataView"),jt=hl(K,"Map"),rt=hl(K,"Promise"),at=hl(K,"Set"),Z=hl(K,"WeakMap"),ee=hl(Object,"create"),me=_1(ot),Ae=_1(jt),Ce=_1(rt),lt=_1(at),Mn=_1(Z),Gt=L0?L0.prototype:void 0,Bt=Gt?Gt.valueOf:void 0;function ua(te){var se=-1,Ee=te==null?0:te.length;for(this.clear();++se<Ee;){var Ge=te[se];this.set(Ge[0],Ge[1])}}function xn(){this.__data__=ee?ee(null):{},this.size=0}function En(te){var se=this.has(te)&&delete this.__data__[te];return this.size-=se?1:0,se}function E1(te){var se=this.__data__;if(ee){var Ee=se[te];return Ee===r?void 0:Ee}return He.call(se,te)?se[te]:void 0}function fn(te){var se=this.__data__;return ee?se[te]!==void 0:He.call(se,te)}function pn(te,se){var Ee=this.__data__;return this.size+=this.has(te)?0:1,Ee[te]=ee&&se===void 0?r:se,this}ua.prototype.clear=xn,ua.prototype.delete=En,ua.prototype.get=E1,ua.prototype.has=fn,ua.prototype.set=pn;function F0(te){var se=-1,Ee=te==null?0:te.length;for(this.clear();++se<Ee;){var Ge=te[se];this.set(Ge[0],Ge[1])}}function gi(){this.__data__=[],this.size=0}function fa(te){var se=this.__data__,Ee=vh(se,te);if(Ee<0)return!1;var Ge=se.length-1;return Ee==Ge?se.pop():B0.call(se,Ee,1),--this.size,!0}function mr(te){var se=this.__data__,Ee=vh(se,te);return Ee<0?void 0:se[Ee][1]}function zu(te){return vh(this.__data__,te)>-1}function qu(te,se){var Ee=this.__data__,Ge=vh(Ee,te);return Ge<0?(++this.size,Ee.push([te,se])):Ee[Ge][1]=se,this}F0.prototype.clear=gi,F0.prototype.delete=fa,F0.prototype.get=mr,F0.prototype.has=zu,F0.prototype.set=qu;function wi(te){var se=-1,Ee=te==null?0:te.length;for(this.clear();++se<Ee;){var Ge=te[se];this.set(Ge[0],Ge[1])}}function Ku(){this.size=0,this.__data__={hash:new ua,map:new(jt||F0),string:new ua}}function Vu(te){var se=Eh(this,te).delete(te);return this.size-=se?1:0,se}function Wu(te){return Eh(this,te).get(te)}function Gu(te){return Eh(this,te).has(te)}function Yu(te,se){var Ee=Eh(this,te),Ge=Ee.size;return Ee.set(te,se),this.size+=Ee.size==Ge?0:1,this}wi.prototype.clear=Ku,wi.prototype.delete=Vu,wi.prototype.get=Wu,wi.prototype.has=Gu,wi.prototype.set=Yu;function ic(te){var se=-1,Ee=te==null?0:te.length;for(this.__data__=new wi;++se<Ee;)this.add(te[se])}function Ju(te){return this.__data__.set(te,r),this}function Zu(te){return this.__data__.has(te)}ic.prototype.add=ic.prototype.push=Ju,ic.prototype.has=Zu;function La(te){var se=this.__data__=new F0(te);this.size=se.size}function Xu(){this.__data__=new F0,this.size=0}function Qu(te){var se=this.__data__,Ee=se.delete(te);return this.size=se.size,Ee}function ef(te){return this.__data__.get(te)}function zG(te){return this.__data__.has(te)}function qG(te,se){var Ee=this.__data__;if(Ee instanceof F0){var Ge=Ee.__data__;if(!jt||Ge.length<n-1)return Ge.push([te,se]),this.size=++Ee.size,this;Ee=this.__data__=new wi(Ge)}return Ee.set(te,se),this.size=Ee.size,this}La.prototype.clear=Xu,La.prototype.delete=Qu,La.prototype.get=ef,La.prototype.has=zG,La.prototype.set=qG;function KG(te,se){var Ee=_h(te),Ge=!Ee&&sY(te),_n=!Ee&&!Ge&&lm(te),bt=!Ee&&!Ge&&!_n&&yS(te),$n=Ee||Ge||_n||bt,f0=$n?oe(te.length,String):[],U0=f0.length;for(var Pn in te)He.call(te,Pn)&&!($n&&(Pn=="length"||_n&&(Pn=="offset"||Pn=="parent")||bt&&(Pn=="buffer"||Pn=="byteLength"||Pn=="byteOffset")||tY(Pn,U0)))&&f0.push(Pn);return f0}function vh(te,se){for(var Ee=te.length;Ee--;)if(fS(te[Ee][0],se))return Ee;return-1}function VG(te,se,Ee){var Ge=se(te);return _h(te)?Ge:ae(Ge,Ee(te))}function tf(te){return te==null?te===void 0?P:m:At&&At in Object(te)?QG(te):iY(te)}function cS(te){return nf(te)&&tf(te)==o}function dS(te,se,Ee,Ge,_n){return te===se?!0:te==null||se==null||!nf(te)&&!nf(se)?te!==te&&se!==se:WG(te,se,Ee,Ge,dS,_n)}function WG(te,se,Ee,Ge,_n,bt){var $n=_h(te),f0=_h(se),U0=$n?c:sc(te),Pn=f0?c:sc(se);U0=U0==o?T:U0,Pn=Pn==o?T:Pn;var pa=U0==T,vi=Pn==T,tr=U0==Pn;if(tr&&lm(te)){if(!lm(se))return!1;$n=!0,pa=!1}if(tr&&!pa)return bt||(bt=new La),$n||yS(te)?lS(te,se,Ee,Ge,_n,bt):ZG(te,se,U0,Ee,Ge,_n,bt);if(!(Ee&a)){var Ba=pa&&He.call(te,"__wrapped__"),Fa=vi&&He.call(se,"__wrapped__");if(Ba||Fa){var oc=Ba?te.value():te,to=Fa?se.value():se;return bt||(bt=new La),_n(oc,to,Ee,Ge,bt)}}return tr?(bt||(bt=new La),XG(te,se,Ee,Ge,_n,bt)):!1}function GG(te){if(!bS(te)||rY(te))return!1;var se=pS(te)?It:D;return se.test(_1(te))}function YG(te){return nf(te)&&hS(te.length)&&!!j[tf(te)]}function JG(te){if(!aY(te))return et(te);var se=[];for(var Ee in Object(te))He.call(te,Ee)&&Ee!="constructor"&&se.push(Ee);return se}function lS(te,se,Ee,Ge,_n,bt){var $n=Ee&a,f0=te.length,U0=se.length;if(f0!=U0&&!($n&&U0>f0))return!1;var Pn=bt.get(te);if(Pn&&bt.get(se))return Pn==se;var pa=-1,vi=!0,tr=Ee&i?new ic:void 0;for(bt.set(te,se),bt.set(se,te);++pa<f0;){var Ba=te[pa],Fa=se[pa];if(Ge)var oc=$n?Ge(Fa,Ba,pa,se,te,bt):Ge(Ba,Fa,pa,te,se,bt);if(oc!==void 0){if(oc)continue;vi=!1;break}if(tr){if(!ie(se,function(to,T1){if(!Oe(tr,T1)&&(Ba===to||_n(Ba,to,Ee,Ge,bt)))return tr.push(T1)})){vi=!1;break}}else if(!(Ba===Fa||_n(Ba,Fa,Ee,Ge,bt))){vi=!1;break}}return bt.delete(te),bt.delete(se),vi}function ZG(te,se,Ee,Ge,_n,bt,$n){switch(Ee){case y:if(te.byteLength!=se.byteLength||te.byteOffset!=se.byteOffset)return!1;te=te.buffer,se=se.buffer;case M:return!(te.byteLength!=se.byteLength||!bt(new ht(te),new ht(se)));case l:case u:case v:return fS(+te,+se);case f:return te.name==se.name&&te.message==se.message;case R:case F:return te==se+"";case b:var f0=pe;case B:var U0=Ge&a;if(f0||(f0=je),te.size!=se.size&&!U0)return!1;var Pn=$n.get(te);if(Pn)return Pn==se;Ge|=i,$n.set(te,se);var pa=lS(f0(te),f0(se),Ge,_n,bt,$n);return $n.delete(te),pa;case I:if(Bt)return Bt.call(te)==Bt.call(se)}return!1}function XG(te,se,Ee,Ge,_n,bt){var $n=Ee&a,f0=uS(te),U0=f0.length,Pn=uS(se),pa=Pn.length;if(U0!=pa&&!$n)return!1;for(var vi=U0;vi--;){var tr=f0[vi];if(!($n?tr in se:He.call(se,tr)))return!1}var Ba=bt.get(te);if(Ba&&bt.get(se))return Ba==se;var Fa=!0;bt.set(te,se),bt.set(se,te);for(var oc=$n;++vi<U0;){tr=f0[vi];var to=te[tr],T1=se[tr];if(Ge)var mS=$n?Ge(T1,to,tr,se,te,bt):Ge(to,T1,tr,te,se,bt);if(!(mS===void 0?to===T1||_n(to,T1,Ee,Ge,bt):mS)){Fa=!1;break}oc||(oc=tr=="constructor")}if(Fa&&!oc){var Th=te.constructor,xh=se.constructor;Th!=xh&&"constructor"in te&&"constructor"in se&&!(typeof Th=="function"&&Th instanceof Th&&typeof xh=="function"&&xh instanceof xh)&&(Fa=!1)}return bt.delete(te),bt.delete(se),Fa}function uS(te){return VG(te,dY,eY)}function Eh(te,se){var Ee=te.__data__;return nY(se)?Ee[typeof se=="string"?"string":"hash"]:Ee.map}function hl(te,se){var Ee=Re(te,se);return GG(Ee)?Ee:void 0}function QG(te){var se=He.call(te,At),Ee=te[At];try{te[At]=void 0;var Ge=!0}catch{}var _n=Vt.call(te);return Ge&&(se?te[At]=Ee:delete te[At]),_n}var eY=Wt?function(te){return te==null?[]:(te=Object(te),X(Wt(te),function(se){return kt.call(te,se)}))}:lY,sc=tf;(ot&&sc(new ot(new ArrayBuffer(1)))!=y||jt&&sc(new jt)!=b||rt&&sc(rt.resolve())!=A||at&&sc(new at)!=B||Z&&sc(new Z)!=$)&&(sc=function(te){var se=tf(te),Ee=se==T?te.constructor:void 0,Ge=Ee?_1(Ee):"";if(Ge)switch(Ge){case me:return y;case Ae:return b;case Ce:return A;case lt:return B;case Mn:return $}return se});function tY(te,se){return se=se??s,!!se&&(typeof te=="number"||U.test(te))&&te>-1&&te%1==0&&te<se}function nY(te){var se=typeof te;return se=="string"||se=="number"||se=="symbol"||se=="boolean"?te!=="__proto__":te===null}function rY(te){return!!ct&&ct in te}function aY(te){var se=te&&te.constructor,Ee=typeof se=="function"&&se.prototype||Ke;return te===Ee}function iY(te){return Vt.call(te)}function _1(te){if(te!=null){try{return mt.call(te)}catch{}try{return te+""}catch{}}return""}function fS(te,se){return te===se||te!==te&&se!==se}var sY=cS(function(){return arguments}())?cS:function(te){return nf(te)&&He.call(te,"callee")&&!kt.call(te,"callee")},_h=Array.isArray;function oY(te){return te!=null&&hS(te.length)&&!pS(te)}var lm=We||uY;function cY(te,se){return dS(te,se)}function pS(te){if(!bS(te))return!1;var se=tf(te);return se==p||se==h||se==d||se==N}function hS(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=s}function bS(te){var se=typeof te;return te!=null&&(se=="object"||se=="function")}function nf(te){return te!=null&&typeof te=="object"}var yS=Y?ue(Y):YG;function dY(te){return oY(te)?KG(te):JG(te)}function lY(){return[]}function uY(){return!1}t.exports=cY})(ty,ty.exports);var NUe=ty.exports,PG={exports:{}};(function(t,e){var n=function(){var r=function(R,B){var F=236,I=17,P=R,$=i[B],M=null,y=0,E=null,C=[],g={},x=function(K,q){y=P*4+17,M=function(V){for(var G=new Array(V),J=0;J<V;J+=1){G[J]=new Array(V);for(var z=0;z<V;z+=1)G[J][z]=null}return G}(y),O(0,0),O(y-7,0),O(0,y-7),_(),w(),L(K,q),P>=7&&k(K),E==null&&(E=j(P,$,C)),D(E,q)},O=function(K,q){for(var V=-1;V<=7;V+=1)if(!(K+V<=-1||y<=K+V))for(var G=-1;G<=7;G+=1)q+G<=-1||y<=q+G||(0<=V&&V<=6&&(G==0||G==6)||0<=G&&G<=6&&(V==0||V==6)||2<=V&&V<=4&&2<=G&&G<=4?M[K+V][q+G]=!0:M[K+V][q+G]=!1)},S=function(){for(var K=0,q=0,V=0;V<8;V+=1){x(!0,V);var G=o.getLostPoint(g);(V==0||K>G)&&(K=G,q=V)}return q},w=function(){for(var K=8;K<y-8;K+=1)M[K][6]==null&&(M[K][6]=K%2==0);for(var q=8;q<y-8;q+=1)M[6][q]==null&&(M[6][q]=q%2==0)},_=function(){for(var K=o.getPatternPosition(P),q=0;q<K.length;q+=1)for(var V=0;V<K.length;V+=1){var G=K[q],J=K[V];if(M[G][J]==null)for(var z=-2;z<=2;z+=1)for(var Y=-2;Y<=2;Y+=1)z==-2||z==2||Y==-2||Y==2||z==0&&Y==0?M[G+z][J+Y]=!0:M[G+z][J+Y]=!1}},k=function(K){for(var q=o.getBCHTypeNumber(P),V=0;V<18;V+=1){var G=!K&&(q>>V&1)==1;M[Math.floor(V/3)][V%3+y-8-3]=G}for(var V=0;V<18;V+=1){var G=!K&&(q>>V&1)==1;M[V%3+y-8-3][Math.floor(V/3)]=G}},L=function(K,q){for(var V=$<<3|q,G=o.getBCHTypeInfo(V),J=0;J<15;J+=1){var z=!K&&(G>>J&1)==1;J<6?M[J][8]=z:J<8?M[J+1][8]=z:M[y-15+J][8]=z}for(var J=0;J<15;J+=1){var z=!K&&(G>>J&1)==1;J<8?M[8][y-J-1]=z:J<9?M[8][15-J-1+1]=z:M[8][15-J-1]=z}M[y-8][8]=!K},D=function(K,q){for(var V=-1,G=y-1,J=7,z=0,Y=o.getMaskFunction(q),X=y-1;X>0;X-=2)for(X==6&&(X-=1);;){for(var ae=0;ae<2;ae+=1)if(M[G][X-ae]==null){var ie=!1;z<K.length&&(ie=(K[z]>>>J&1)==1);var oe=Y(G,X-ae);oe&&(ie=!ie),M[G][X-ae]=ie,J-=1,J==-1&&(z+=1,J=7)}if(G+=V,G<0||y<=G){G-=V,V=-V;break}}},U=function(K,q){for(var V=0,G=0,J=0,z=new Array(q.length),Y=new Array(q.length),X=0;X<q.length;X+=1){var ae=q[X].dataCount,ie=q[X].totalCount-ae;G=Math.max(G,ae),J=Math.max(J,ie),z[X]=new Array(ae);for(var oe=0;oe<z[X].length;oe+=1)z[X][oe]=255&K.getBuffer()[oe+V];V+=ae;var ue=o.getErrorCorrectPolynomial(ie),Oe=d(z[X],ue.getLength()-1),Re=Oe.mod(ue);Y[X]=new Array(ue.getLength()-1);for(var oe=0;oe<Y[X].length;oe+=1){var pe=oe+Re.getLength()-Y[X].length;Y[X][oe]=pe>=0?Re.getAt(pe):0}}for(var Ze=0,oe=0;oe<q.length;oe+=1)Ze+=q[oe].totalCount;for(var je=new Array(Ze),it=0,oe=0;oe<G;oe+=1)for(var X=0;X<q.length;X+=1)oe<z[X].length&&(je[it]=z[X][oe],it+=1);for(var oe=0;oe<J;oe+=1)for(var X=0;X<q.length;X+=1)oe<Y[X].length&&(je[it]=Y[X][oe],it+=1);return je},j=function(K,q,V){for(var G=l.getRSBlocks(K,q),J=u(),z=0;z<V.length;z+=1){var Y=V[z];J.put(Y.getMode(),4),J.put(Y.getLength(),o.getLengthInBits(Y.getMode(),K)),Y.write(J)}for(var X=0,z=0;z<G.length;z+=1)X+=G[z].dataCount;if(J.getLengthInBits()>X*8)throw"code length overflow. ("+J.getLengthInBits()+">"+X*8+")";for(J.getLengthInBits()+4<=X*8&&J.put(0,4);J.getLengthInBits()%8!=0;)J.putBit(!1);for(;!(J.getLengthInBits()>=X*8||(J.put(F,8),J.getLengthInBits()>=X*8));)J.put(I,8);return U(J,G)};g.addData=function(K,q){q=q||"Byte";var V=null;switch(q){case"Numeric":V=f(K);break;case"Alphanumeric":V=p(K);break;case"Byte":V=h(K);break;case"Kanji":V=b(K);break;default:throw"mode:"+q}C.push(V),E=null},g.isDark=function(K,q){if(K<0||y<=K||q<0||y<=q)throw K+","+q;return M[K][q]},g.getModuleCount=function(){return y},g.make=function(){if(P<1){for(var K=1;K<40;K++){for(var q=l.getRSBlocks(K,$),V=u(),G=0;G<C.length;G++){var J=C[G];V.put(J.getMode(),4),V.put(J.getLength(),o.getLengthInBits(J.getMode(),K)),J.write(V)}for(var z=0,G=0;G<q.length;G++)z+=q[G].dataCount;if(V.getLengthInBits()<=z*8)break}P=K}x(!1,S())},g.createTableTag=function(K,q){K=K||2,q=typeof q>"u"?K*4:q;var V="";V+='<table style="',V+=" border-width: 0px; border-style: none;",V+=" border-collapse: collapse;",V+=" padding: 0px; margin: "+q+"px;",V+='">',V+="<tbody>";for(var G=0;G<g.getModuleCount();G+=1){V+="<tr>";for(var J=0;J<g.getModuleCount();J+=1)V+='<td style="',V+=" border-width: 0px; border-style: none;",V+=" border-collapse: collapse;",V+=" padding: 0px; margin: 0px;",V+=" width: "+K+"px;",V+=" height: "+K+"px;",V+=" background-color: ",V+=g.isDark(G,J)?"#000000":"#ffffff",V+=";",V+='"/>';V+="</tr>"}return V+="</tbody>",V+="</table>",V},g.createSvgTag=function(K,q,V,G){var J={};typeof arguments[0]=="object"&&(J=arguments[0],K=J.cellSize,q=J.margin,V=J.alt,G=J.title),K=K||2,q=typeof q>"u"?K*4:q,V=typeof V=="string"?{text:V}:V||{},V.text=V.text||null,V.id=V.text?V.id||"qrcode-description":null,G=typeof G=="string"?{text:G}:G||{},G.text=G.text||null,G.id=G.text?G.id||"qrcode-title":null;var z=g.getModuleCount()*K+q*2,Y,X,ae,ie,oe="",ue;for(ue="l"+K+",0 0,"+K+" -"+K+",0 0,-"+K+"z ",oe+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',oe+=J.scalable?"":' width="'+z+'px" height="'+z+'px"',oe+=' viewBox="0 0 '+z+" "+z+'" ',oe+=' preserveAspectRatio="xMinYMin meet"',oe+=G.text||V.text?' role="img" aria-labelledby="'+H([G.id,V.id].join(" ").trim())+'"':"",oe+=">",oe+=G.text?'<title id="'+H(G.id)+'">'+H(G.text)+"</title>":"",oe+=V.text?'<description id="'+H(V.id)+'">'+H(V.text)+"</description>":"",oe+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',oe+='<path d="',ae=0;ae<g.getModuleCount();ae+=1)for(ie=ae*K+q,Y=0;Y<g.getModuleCount();Y+=1)g.isDark(ae,Y)&&(X=Y*K+q,oe+="M"+X+","+ie+ue);return oe+='" stroke="transparent" fill="black"/>',oe+="</svg>",oe},g.createDataURL=function(K,q){K=K||2,q=typeof q>"u"?K*4:q;var V=g.getModuleCount()*K+q*2,G=q,J=V-q;return N(V,V,function(z,Y){if(G<=z&&z<J&&G<=Y&&Y<J){var X=Math.floor((z-G)/K),ae=Math.floor((Y-G)/K);return g.isDark(ae,X)?0:1}else return 1})},g.createImgTag=function(K,q,V){K=K||2,q=typeof q>"u"?K*4:q;var G=g.getModuleCount()*K+q*2,J="";return J+="<img",J+=' src="',J+=g.createDataURL(K,q),J+='"',J+=' width="',J+=G,J+='"',J+=' height="',J+=G,J+='"',V&&(J+=' alt="',J+=H(V),J+='"'),J+="/>",J};var H=function(K){for(var q="",V=0;V<K.length;V+=1){var G=K.charAt(V);switch(G){case"<":q+="&lt;";break;case">":q+="&gt;";break;case"&":q+="&amp;";break;case'"':q+="&quot;";break;default:q+=G;break}}return q},W=function(K){var q=1;K=typeof K>"u"?q*2:K;var V=g.getModuleCount()*q+K*2,G=K,J=V-K,z,Y,X,ae,ie,oe={"":""," ":""," ":"","  ":" "},ue={"":""," ":""," ":" ","  ":" "},Oe="";for(z=0;z<V;z+=2){for(X=Math.floor((z-G)/q),ae=Math.floor((z+1-G)/q),Y=0;Y<V;Y+=1)ie="",G<=Y&&Y<J&&G<=z&&z<J&&g.isDark(X,Math.floor((Y-G)/q))&&(ie=" "),G<=Y&&Y<J&&G<=z+1&&z+1<J&&g.isDark(ae,Math.floor((Y-G)/q))?ie+=" ":ie+="",Oe+=K<1&&z+1>=J?ue[ie]:oe[ie];Oe+=`
`}return V%2&&K>0?Oe.substring(0,Oe.length-V-1)+Array(V+1).join(""):Oe.substring(0,Oe.length-1)};return g.createASCII=function(K,q){if(K=K||1,K<2)return W(q);K-=1,q=typeof q>"u"?K*2:q;var V=g.getModuleCount()*K+q*2,G=q,J=V-q,z,Y,X,ae,ie=Array(K+1).join(""),oe=Array(K+1).join("  "),ue="",Oe="";for(z=0;z<V;z+=1){for(X=Math.floor((z-G)/K),Oe="",Y=0;Y<V;Y+=1)ae=1,G<=Y&&Y<J&&G<=z&&z<J&&g.isDark(X,Math.floor((Y-G)/K))&&(ae=0),Oe+=ae?ie:oe;for(X=0;X<K;X+=1)ue+=Oe+`
`}return ue.substring(0,ue.length-1)},g.renderTo2dContext=function(K,q){q=q||2;for(var V=g.getModuleCount(),G=0;G<V;G++)for(var J=0;J<V;J++)K.fillStyle=g.isDark(G,J)?"black":"white",K.fillRect(G*q,J*q,q,q)},g};r.stringToBytesFuncs={default:function(R){for(var B=[],F=0;F<R.length;F+=1){var I=R.charCodeAt(F);B.push(I&255)}return B}},r.stringToBytes=r.stringToBytesFuncs.default,r.createStringToBytes=function(R,B){var F=function(){for(var P=T(R),$=function(){var w=P.read();if(w==-1)throw"eof";return w},M=0,y={};;){var E=P.read();if(E==-1)break;var C=$(),g=$(),x=$(),O=String.fromCharCode(E<<8|C),S=g<<8|x;y[O]=S,M+=1}if(M!=B)throw M+" != "+B;return y}(),I=63;return function(P){for(var $=[],M=0;M<P.length;M+=1){var y=P.charCodeAt(M);if(y<128)$.push(y);else{var E=F[P.charAt(M)];typeof E=="number"?(E&255)==E?$.push(E):($.push(E>>>8),$.push(E&255)):$.push(I)}}return $}};var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o=function(){var R=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],B=1335,F=7973,I=21522,P={},$=function(M){for(var y=0;M!=0;)y+=1,M>>>=1;return y};return P.getBCHTypeInfo=function(M){for(var y=M<<10;$(y)-$(B)>=0;)y^=B<<$(y)-$(B);return(M<<10|y)^I},P.getBCHTypeNumber=function(M){for(var y=M<<12;$(y)-$(F)>=0;)y^=F<<$(y)-$(F);return M<<12|y},P.getPatternPosition=function(M){return R[M-1]},P.getMaskFunction=function(M){switch(M){case s.PATTERN000:return function(y,E){return(y+E)%2==0};case s.PATTERN001:return function(y,E){return y%2==0};case s.PATTERN010:return function(y,E){return E%3==0};case s.PATTERN011:return function(y,E){return(y+E)%3==0};case s.PATTERN100:return function(y,E){return(Math.floor(y/2)+Math.floor(E/3))%2==0};case s.PATTERN101:return function(y,E){return y*E%2+y*E%3==0};case s.PATTERN110:return function(y,E){return(y*E%2+y*E%3)%2==0};case s.PATTERN111:return function(y,E){return(y*E%3+(y+E)%2)%2==0};default:throw"bad maskPattern:"+M}},P.getErrorCorrectPolynomial=function(M){for(var y=d([1],0),E=0;E<M;E+=1)y=y.multiply(d([1,c.gexp(E)],0));return y},P.getLengthInBits=function(M,y){if(1<=y&&y<10)switch(M){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:return 8;case a.MODE_KANJI:return 8;default:throw"mode:"+M}else if(y<27)switch(M){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw"mode:"+M}else if(y<41)switch(M){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw"mode:"+M}else throw"type:"+y},P.getLostPoint=function(M){for(var y=M.getModuleCount(),E=0,C=0;C<y;C+=1)for(var g=0;g<y;g+=1){for(var x=0,O=M.isDark(C,g),S=-1;S<=1;S+=1)if(!(C+S<0||y<=C+S))for(var w=-1;w<=1;w+=1)g+w<0||y<=g+w||S==0&&w==0||O==M.isDark(C+S,g+w)&&(x+=1);x>5&&(E+=3+x-5)}for(var C=0;C<y-1;C+=1)for(var g=0;g<y-1;g+=1){var _=0;M.isDark(C,g)&&(_+=1),M.isDark(C+1,g)&&(_+=1),M.isDark(C,g+1)&&(_+=1),M.isDark(C+1,g+1)&&(_+=1),(_==0||_==4)&&(E+=3)}for(var C=0;C<y;C+=1)for(var g=0;g<y-6;g+=1)M.isDark(C,g)&&!M.isDark(C,g+1)&&M.isDark(C,g+2)&&M.isDark(C,g+3)&&M.isDark(C,g+4)&&!M.isDark(C,g+5)&&M.isDark(C,g+6)&&(E+=40);for(var g=0;g<y;g+=1)for(var C=0;C<y-6;C+=1)M.isDark(C,g)&&!M.isDark(C+1,g)&&M.isDark(C+2,g)&&M.isDark(C+3,g)&&M.isDark(C+4,g)&&!M.isDark(C+5,g)&&M.isDark(C+6,g)&&(E+=40);for(var k=0,g=0;g<y;g+=1)for(var C=0;C<y;C+=1)M.isDark(C,g)&&(k+=1);var L=Math.abs(100*k/y/y-50)/5;return E+=L*10,E},P}(),c=function(){for(var R=new Array(256),B=new Array(256),F=0;F<8;F+=1)R[F]=1<<F;for(var F=8;F<256;F+=1)R[F]=R[F-4]^R[F-5]^R[F-6]^R[F-8];for(var F=0;F<255;F+=1)B[R[F]]=F;var I={};return I.glog=function(P){if(P<1)throw"glog("+P+")";return B[P]},I.gexp=function(P){for(;P<0;)P+=255;for(;P>=256;)P-=255;return R[P]},I}();function d(R,B){if(typeof R.length>"u")throw R.length+"/"+B;var F=function(){for(var P=0;P<R.length&&R[P]==0;)P+=1;for(var $=new Array(R.length-P+B),M=0;M<R.length-P;M+=1)$[M]=R[M+P];return $}(),I={};return I.getAt=function(P){return F[P]},I.getLength=function(){return F.length},I.multiply=function(P){for(var $=new Array(I.getLength()+P.getLength()-1),M=0;M<I.getLength();M+=1)for(var y=0;y<P.getLength();y+=1)$[M+y]^=c.gexp(c.glog(I.getAt(M))+c.glog(P.getAt(y)));return d($,0)},I.mod=function(P){if(I.getLength()-P.getLength()<0)return I;for(var $=c.glog(I.getAt(0))-c.glog(P.getAt(0)),M=new Array(I.getLength()),y=0;y<I.getLength();y+=1)M[y]=I.getAt(y);for(var y=0;y<P.getLength();y+=1)M[y]^=c.gexp(c.glog(P.getAt(y))+$);return d(M,0).mod(P)},I}var l=function(){var R=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],B=function(P,$){var M={};return M.totalCount=P,M.dataCount=$,M},F={},I=function(P,$){switch($){case i.L:return R[(P-1)*4+0];case i.M:return R[(P-1)*4+1];case i.Q:return R[(P-1)*4+2];case i.H:return R[(P-1)*4+3];default:return}};return F.getRSBlocks=function(P,$){var M=I(P,$);if(typeof M>"u")throw"bad rs block @ typeNumber:"+P+"/errorCorrectionLevel:"+$;for(var y=M.length/3,E=[],C=0;C<y;C+=1)for(var g=M[C*3+0],x=M[C*3+1],O=M[C*3+2],S=0;S<g;S+=1)E.push(B(x,O));return E},F}(),u=function(){var R=[],B=0,F={};return F.getBuffer=function(){return R},F.getAt=function(I){var P=Math.floor(I/8);return(R[P]>>>7-I%8&1)==1},F.put=function(I,P){for(var $=0;$<P;$+=1)F.putBit((I>>>P-$-1&1)==1)},F.getLengthInBits=function(){return B},F.putBit=function(I){var P=Math.floor(B/8);R.length<=P&&R.push(0),I&&(R[P]|=128>>>B%8),B+=1},F},f=function(R){var B=a.MODE_NUMBER,F=R,I={};I.getMode=function(){return B},I.getLength=function(M){return F.length},I.write=function(M){for(var y=F,E=0;E+2<y.length;)M.put(P(y.substring(E,E+3)),10),E+=3;E<y.length&&(y.length-E==1?M.put(P(y.substring(E,E+1)),4):y.length-E==2&&M.put(P(y.substring(E,E+2)),7))};var P=function(M){for(var y=0,E=0;E<M.length;E+=1)y=y*10+$(M.charAt(E));return y},$=function(M){if("0"<=M&&M<="9")return M.charCodeAt(0)-48;throw"illegal char :"+M};return I},p=function(R){var B=a.MODE_ALPHA_NUM,F=R,I={};I.getMode=function(){return B},I.getLength=function($){return F.length},I.write=function($){for(var M=F,y=0;y+1<M.length;)$.put(P(M.charAt(y))*45+P(M.charAt(y+1)),11),y+=2;y<M.length&&$.put(P(M.charAt(y)),6)};var P=function($){if("0"<=$&&$<="9")return $.charCodeAt(0)-48;if("A"<=$&&$<="Z")return $.charCodeAt(0)-65+10;switch($){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+$}};return I},h=function(R){var B=a.MODE_8BIT_BYTE,F=r.stringToBytes(R),I={};return I.getMode=function(){return B},I.getLength=function(P){return F.length},I.write=function(P){for(var $=0;$<F.length;$+=1)P.put(F[$],8)},I},b=function(R){var B=a.MODE_KANJI,F=r.stringToBytesFuncs.SJIS;if(!F)throw"sjis not supported.";(function($,M){var y=F($);if(y.length!=2||(y[0]<<8|y[1])!=M)throw"sjis not supported."})("",38726);var I=F(R),P={};return P.getMode=function(){return B},P.getLength=function($){return~~(I.length/2)},P.write=function($){for(var M=I,y=0;y+1<M.length;){var E=(255&M[y])<<8|255&M[y+1];if(33088<=E&&E<=40956)E-=33088;else if(57408<=E&&E<=60351)E-=49472;else throw"illegal char at "+(y+1)+"/"+E;E=(E>>>8&255)*192+(E&255),$.put(E,13),y+=2}if(y<M.length)throw"illegal char at "+(y+1)},P},v=function(){var R=[],B={};return B.writeByte=function(F){R.push(F&255)},B.writeShort=function(F){B.writeByte(F),B.writeByte(F>>>8)},B.writeBytes=function(F,I,P){I=I||0,P=P||F.length;for(var $=0;$<P;$+=1)B.writeByte(F[$+I])},B.writeString=function(F){for(var I=0;I<F.length;I+=1)B.writeByte(F.charCodeAt(I))},B.toByteArray=function(){return R},B.toString=function(){var F="";F+="[";for(var I=0;I<R.length;I+=1)I>0&&(F+=","),F+=R[I];return F+="]",F},B},m=function(){var R=0,B=0,F=0,I="",P={},$=function(y){I+=String.fromCharCode(M(y&63))},M=function(y){if(!(y<0)){if(y<26)return 65+y;if(y<52)return 97+(y-26);if(y<62)return 48+(y-52);if(y==62)return 43;if(y==63)return 47}throw"n:"+y};return P.writeByte=function(y){for(R=R<<8|y&255,B+=8,F+=1;B>=6;)$(R>>>B-6),B-=6},P.flush=function(){if(B>0&&($(R<<6-B),R=0,B=0),F%3!=0)for(var y=3-F%3,E=0;E<y;E+=1)I+="="},P.toString=function(){return I},P},T=function(R){var B=R,F=0,I=0,P=0,$={};$.read=function(){for(;P<8;){if(F>=B.length){if(P==0)return-1;throw"unexpected end of file./"+P}var y=B.charAt(F);if(F+=1,y=="=")return P=0,-1;if(y.match(/^\s$/))continue;I=I<<6|M(y.charCodeAt(0)),P+=6}var E=I>>>P-8&255;return P-=8,E};var M=function(y){if(65<=y&&y<=90)return y-65;if(97<=y&&y<=122)return y-97+26;if(48<=y&&y<=57)return y-48+52;if(y==43)return 62;if(y==47)return 63;throw"c:"+y};return $},A=function(R,B){var F=R,I=B,P=new Array(R*B),$={};$.setPixel=function(C,g,x){P[g*F+C]=x},$.write=function(C){C.writeString("GIF87a"),C.writeShort(F),C.writeShort(I),C.writeByte(128),C.writeByte(0),C.writeByte(0),C.writeByte(0),C.writeByte(0),C.writeByte(0),C.writeByte(255),C.writeByte(255),C.writeByte(255),C.writeString(","),C.writeShort(0),C.writeShort(0),C.writeShort(F),C.writeShort(I),C.writeByte(0);var g=2,x=y(g);C.writeByte(g);for(var O=0;x.length-O>255;)C.writeByte(255),C.writeBytes(x,O,255),O+=255;C.writeByte(x.length-O),C.writeBytes(x,O,x.length-O),C.writeByte(0),C.writeString(";")};var M=function(C){var g=C,x=0,O=0,S={};return S.write=function(w,_){if(w>>>_)throw"length over";for(;x+_>=8;)g.writeByte(255&(w<<x|O)),_-=8-x,w>>>=8-x,O=0,x=0;O=w<<x|O,x=x+_},S.flush=function(){x>0&&g.writeByte(O)},S},y=function(C){for(var g=1<<C,x=(1<<C)+1,O=C+1,S=E(),w=0;w<g;w+=1)S.add(String.fromCharCode(w));S.add(String.fromCharCode(g)),S.add(String.fromCharCode(x));var _=v(),k=M(_);k.write(g,O);var L=0,D=String.fromCharCode(P[L]);for(L+=1;L<P.length;){var U=String.fromCharCode(P[L]);L+=1,S.contains(D+U)?D=D+U:(k.write(S.indexOf(D),O),S.size()<4095&&(S.size()==1<<O&&(O+=1),S.add(D+U)),D=U)}return k.write(S.indexOf(D),O),k.write(x,O),k.flush(),_.toByteArray()},E=function(){var C={},g=0,x={};return x.add=function(O){if(x.contains(O))throw"dup key:"+O;C[O]=g,g+=1},x.size=function(){return g},x.indexOf=function(O){return C[O]},x.contains=function(O){return typeof C[O]<"u"},x};return $},N=function(R,B,F){for(var I=A(R,B),P=0;P<B;P+=1)for(var $=0;$<R;$+=1)I.setPixel($,P,F($,P));var M=v();I.write(M);for(var y=m(),E=M.toByteArray(),C=0;C<E.length;C+=1)y.writeByte(E[C]);return y.flush(),"data:image/gif;base64,"+y};return r}();(function(){n.stringToBytesFuncs["UTF-8"]=function(r){function a(i){for(var s=[],o=0;o<i.length;o++){var c=i.charCodeAt(o);c<128?s.push(c):c<2048?s.push(192|c>>6,128|c&63):c<55296||c>=57344?s.push(224|c>>12,128|c>>6&63,128|c&63):(o++,c=65536+((c&1023)<<10|i.charCodeAt(o)&1023),s.push(240|c>>18,128|c>>12&63,128|c>>6&63,128|c&63))}return s}return a(r)}})(),function(r){t.exports=r()}(function(){return n})})(PG);var RUe=PG.exports,DUe=vt&&vt.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(r[i]=a[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nE=vt&&vt.__assign||function(){return nE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},nE.apply(this,arguments)};Object.defineProperty(sS,"__esModule",{value:!0});var kG=sS.QRCode=void 0,$Ue=NUe,LUe=RUe,l4=he,BUe=function(t){DUe(e,t);function e(n){var r=t.call(this,n)||this;return r.canvasRef=l4.createRef(),r}return e.prototype.download=function(n,r){if(this.canvasRef.current){var a=void 0;switch(n){case"jpg":a="image/jpeg";break;case"webp":a="image/webp";break;case"png":default:a="image/png";break}var i=this.canvasRef.current.toDataURL(a,1),s=document.createElement("a");s.download=r??"react-qrcode-logo",s.href=i,s.click()}},e.prototype.utf16to8=function(n){var r="",a,i,s=n.length;for(a=0;a<s;a++)i=n.charCodeAt(a),i>=1&&i<=127?r+=n.charAt(a):i>2047?(r+=String.fromCharCode(224|i>>12&15),r+=String.fromCharCode(128|i>>6&63),r+=String.fromCharCode(128|i>>0&63)):(r+=String.fromCharCode(192|i>>6&31),r+=String.fromCharCode(128|i>>0&63));return r},e.prototype.drawRoundedSquare=function(n,r,a,i,s,o,c,d){d.lineWidth=n,d.fillStyle=s,d.strokeStyle=s,a+=n/2,r+=n/2,i-=n,Array.isArray(o)||(o=[o,o,o,o]),o=o.map(function(h){return h=Math.min(h,i/2),h<0?0:h});var l=o[0]||0,u=o[1]||0,f=o[2]||0,p=o[3]||0;d.beginPath(),d.moveTo(r+l,a),d.lineTo(r+i-u,a),u&&d.quadraticCurveTo(r+i,a,r+i,a+u),d.lineTo(r+i,a+i-f),f&&d.quadraticCurveTo(r+i,a+i,r+i-f,a+i),d.lineTo(r+p,a+i),p&&d.quadraticCurveTo(r,a+i,r,a+i-p),d.lineTo(r,a+l),l&&d.quadraticCurveTo(r,a,r+l,a),d.closePath(),d.stroke(),c&&d.fill()},e.prototype.drawPositioningPattern=function(n,r,a,i,s,o,c){c===void 0&&(c=[0,0,0,0]);var d=Math.ceil(r),l,u;typeof c!="number"&&!Array.isArray(c)?(l=c.outer||0,u=c.inner||0):(l=c,u=l);var f,p;typeof o!="string"?(f=o.outer,p=o.inner):(f=o,p=o);var h=i*r+a,b=s*r+a,v=r*7;this.drawRoundedSquare(d,b,h,v,f,l,!1,n),v=r*3,h+=r*2,b+=r*2,this.drawRoundedSquare(d,b,h,v,p,u,!0,n)},e.prototype.isInPositioninZone=function(n,r,a){return a.some(function(i){return r>=i.row&&r<=i.row+7&&n>=i.col&&n<=i.col+7})},e.prototype.transformPixelLengthIntoNumberOfCells=function(n,r){return n/r},e.prototype.isCoordinateInImage=function(n,r,a,i,s,o,c,d){if(d){var l=2,u=this.transformPixelLengthIntoNumberOfCells(s,c),f=this.transformPixelLengthIntoNumberOfCells(o,c),p=this.transformPixelLengthIntoNumberOfCells(a,c)-1,h=this.transformPixelLengthIntoNumberOfCells(i,c)-1;return r>=u-l&&r<=u+p+l&&n>=f-l&&n<=f+h+l}else return!1},e.prototype.shouldComponentUpdate=function(n){return!$Ue(this.props,n)},e.prototype.componentDidMount=function(){this.update()},e.prototype.componentDidUpdate=function(){this.update()},e.prototype.update=function(){var n,r=this.props,a=r.value,i=r.ecLevel,s=r.enableCORS,o=r.bgColor,c=r.fgColor,d=r.logoImage,l=r.logoOpacity,u=r.logoOnLoad,f=r.removeQrCodeBehindLogo,p=r.qrStyle,h=r.eyeRadius,b=r.eyeColor,v=r.logoPaddingStyle,m=+this.props.size,T=+this.props.quietZone,A=this.props.logoWidth?+this.props.logoWidth:0,N=this.props.logoHeight?+this.props.logoHeight:0,R=this.props.logoPadding?+this.props.logoPadding:0,B=LUe(0,i);B.addData(this.utf16to8(a)),B.make();var F=(n=this.canvasRef)===null||n===void 0?void 0:n.current,I=F.getContext("2d"),P=m+2*T,$=B.getModuleCount(),M=m/$,y=window.devicePixelRatio||1;F.height=F.width=P*y,I.scale(y,y),I.fillStyle=o,I.fillRect(0,0,P,P);var E=T,C=[{row:0,col:0},{row:0,col:$-7},{row:$-7,col:0}];if(I.strokeStyle=c,p==="dots"){I.fillStyle=c;for(var g=M/2,x=0;x<$;x++)for(var O=0;O<$;O++)B.isDark(x,O)&&!this.isInPositioninZone(x,O,C)&&(I.beginPath(),I.arc(Math.round(O*M)+g+E,Math.round(x*M)+g+E,g/100*75,0,2*Math.PI,!1),I.closePath(),I.fill())}else if(p==="fluid"){for(var g=Math.ceil(M/2),x=0;x<$;x++)for(var O=0;O<$;O++)if(B.isDark(x,O)&&!this.isInPositioninZone(x,O,C)){var S=[!1,!1,!1,!1];x>0&&!B.isDark(x-1,O)&&O>0&&!B.isDark(x,O-1)&&(S[0]=!0),x>0&&!B.isDark(x-1,O)&&O<$-1&&!B.isDark(x,O+1)&&(S[1]=!0),x<$-1&&!B.isDark(x+1,O)&&O<$-1&&!B.isDark(x,O+1)&&(S[2]=!0),x<$-1&&!B.isDark(x+1,O)&&O>0&&!B.isDark(x,O-1)&&(S[3]=!0);var w=Math.ceil((O+1)*M)-Math.floor(O*M),_=Math.ceil((x+1)*M)-Math.floor(x*M);I.fillStyle=c,I.beginPath(),I.arc(Math.round(O*M)+g+E,Math.round(x*M)+g+E,g,0,2*Math.PI,!1),I.closePath(),I.fill(),S[0]||I.fillRect(Math.round(O*M)+E,Math.round(x*M)+E,w/2,_/2),S[1]||I.fillRect(Math.round(O*M)+E+Math.floor(w/2),Math.round(x*M)+E,w/2,_/2),S[2]||I.fillRect(Math.round(O*M)+E+Math.floor(w/2),Math.round(x*M)+E+Math.floor(_/2),w/2,_/2),S[3]||I.fillRect(Math.round(O*M)+E,Math.round(x*M)+E+Math.floor(_/2),w/2,_/2)}}else for(var x=0;x<$;x++)for(var O=0;O<$;O++)if(B.isDark(x,O)&&!this.isInPositioninZone(x,O,C)){I.fillStyle=c;var w=Math.ceil((O+1)*M)-Math.floor(O*M),_=Math.ceil((x+1)*M)-Math.floor(x*M);I.fillRect(Math.round(O*M)+E,Math.round(x*M)+E,w,_)}for(var k=0;k<3;k++){var L=C[k],x=L.row,O=L.col,D=h,U=void 0;Array.isArray(D)&&(D=D[k]),typeof D=="number"&&(D=[D,D,D,D]),b?Array.isArray(b)?U=b[k]:U=b:U=c,this.drawPositioningPattern(I,M,E,x,O,U,D)}if(d){var j=new Image;s&&(j.crossOrigin="Anonymous"),j.onload=function(H){I.save();var W=A||m*.2,K=N||W,q=(m-W)/2,V=(m-K)/2;if(f||R){I.beginPath(),I.strokeStyle=o,I.fillStyle=o;var G=W+2*R,J=K+2*R,z=q+E-R,Y=V+E-R;if(v==="circle"){var X=z+G/2,ae=Y+J/2;I.ellipse(X,ae,G/2,J/2,0,0,2*Math.PI),I.stroke(),I.fill()}else I.fillRect(z,Y,G,J)}I.globalAlpha=l,I.drawImage(j,q+E,V+E,W,K),I.restore(),u&&u(H)},j.src=d}},e.prototype.render=function(){var n,r=+this.props.size+2*+this.props.quietZone;return l4.createElement("canvas",{id:(n=this.props.id)!==null&&n!==void 0?n:"react-qrcode-logo",height:r,width:r,style:nE({height:r+"px",width:r+"px"},this.props.style),ref:this.canvasRef})},e.defaultProps={value:"https://reactjs.org/",ecLevel:"M",enableCORS:!1,size:150,quietZone:10,bgColor:"#FFFFFF",fgColor:"#000000",logoOpacity:1,qrStyle:"squares",eyeRadius:[0,0,0],logoPaddingStyle:"square"},e}(l4.Component);kG=sS.QRCode=BUe;function NG(t){var e;const[n]=Br(void 0,{i18n:Ot}),{bodyState:r,setBodyState:a}=he.useContext(wh),{qrCodeValue:i,isDark:s,selectedButton:o,logoImage:c,primaryColor:d}=t,l=he.useMemo(()=>typeof window>"u"?!1:zf.getParser(window.navigator.userAgent).getPlatformType()==="desktop",[]),u=document.documentElement,f="#FFFFFF",p="#000000",h=((e=getComputedStyle(u))===null||e===void 0||(e=e.getPropertyValue("--app-gray-800"))===null||e===void 0?void 0:e.trim())||"#1f2a37",b=d&&d.toLowerCase()==="#ffffff"?"#000000":d;return ne.jsxs("div",{className:"w3a--contents",children:[i?ne.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4 w3a--rounded-2xl w3a--border w3a--border-app-gray-200 w3a--p-4 dark:w3a--border-app-gray-700",children:[ne.jsx("div",{className:"w3a--relative w3a--flex w3a--size-[300px] w3a--items-center w3a--justify-center w3a--rounded-2xl",children:ne.jsx(kG,{size:l?300:260,eyeRadius:5,qrStyle:"dots",removeQrCodeBehindLogo:!0,logoImage:c||WBe,value:i,logoHeight:32,logoWidth:32,logoPadding:10,eyeColor:s?f:b,bgColor:s?h:f,fgColor:s?f:p})}),ne.jsx("p",{className:"w3a--text-center w3a--text-sm w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-gray-300",children:n("modal.external.walletconnect-copy")})]}):ne.jsx("div",{className:"w3a--mx-auto w3a--flex w3a--size-[300px] w3a--animate-pulse w3a--items-center w3a--justify-center w3a--rounded-lg w3a--bg-app-gray-200 w3a--p-2 dark:w3a--bg-app-gray-700",children:ne.jsx(fi,{imageId:`login-${o.name}`,hoverImageId:`login-${o.name}`,fallbackImageId:"wallet",height:"30",width:"30",isButton:!0,extension:o.imgExtension})}),ne.jsxs("div",{className:"w3a--flex w3a--w-full w3a--items-center w3a--justify-between w3a--rounded-2xl w3a--bg-app-gray-50  w3a--px-4 w3a--py-2 w3a--text-app-gray-900 dark:w3a--bg-app-gray-800 dark:w3a--text-app-white",children:[ne.jsxs("p",{className:"w3a--text-sm w3a--text-app-gray-900 dark:w3a--text-app-white",children:[n("modal.external.dont-have")," ",ne.jsx("span",{children:o==null?void 0:o.displayName}),"?"]}),ne.jsx("button",{type:"button",className:"w3a--appearance-none w3a--rounded-full w3a--border w3a--border-app-gray-200 w3a--bg-transparent w3a--px-5 w3a--py-2 w3a--text-base w3a--font-normal w3a--text-app-gray-700 w3a--transition-all w3a--duration-150 hover:w3a--border-transparent hover:w3a--shadow-light active:w3a--scale-95 dark:w3a--border-app-gray-700 dark:w3a--text-app-gray-300 dark:hover:w3a--border-transparent dark:hover:w3a--shadow-dark",onClick:()=>{a(Q(Q({},r),{},{installLinks:{show:!0,wallet:o}}))},children:n("modal.external.get-wallet")})]})]})}function FUe(t){const{totalExternalWalletCount:e,isLoading:n,walletSearch:r,handleWalletSearch:a,buttonRadius:i}=t,[s,o]=he.useState(!1),[c]=Br(void 0,{i18n:Ot}),d=l=>{a(l),o(!0)};return ne.jsx("input",{type:"text",value:r,onInput:d,onFocus:l=>{l.target.placeholder="",o(!0)},onBlur:l=>{l.target.placeholder=c("modal.external.search-wallet",{count:e}),o(!1)},placeholder:n?c("modal.external.search-wallet-loading"):c("modal.external.search-wallet",{count:e}),disabled:n,className:Mt("w3a--input w3a--appearance-none w3a--outline-none active:w3a--outline-none focus:w3a--outline-none w3a--bg-transparent placeholder:w3a--text-app-gray-400 dark:placeholder:w3a--text-app-gray-500 w3a--text-app-gray-900 dark:w3a--text-app-white",s&&"!w3a--border-app-primary-600",{"w3a--rounded-full":i==="pill","w3a--rounded-lg":i==="rounded","w3a--rounded-none":i==="square"})})}function UUe(t){var e;const{isDark:n,config:r,walletConnectUri:a,metamaskConnectUri:i,walletRegistry:s,allExternalButtons:o,customConnectorButtons:c,connectorVisibilityMap:d,deviceDetails:l,buttonRadius:u="pill",chainNamespace:f,onBackClick:p,handleExternalWalletClick:h,handleWalletDetailsHeight:b}=t,{bodyState:v,setBodyState:m}=he.useContext(wh),{analytics:T}=he.useContext(iS),[A,N]=he.useState(dd.CONNECT_WALLET),[R,B]=he.useState(!1),[F]=he.useState(!1),[I,P]=he.useState(null),[$,M]=he.useState(""),[y,E]=he.useState("all"),[C,g]=he.useState(!1),x=()=>{if(!R&&A===dd.CONNECT_WALLET&&p){p(!1);return}R&&(N(dd.CONNECT_WALLET),B(!1),b())},O=he.useMemo(()=>s&&Object.keys(s.default||{}).length>0&&Object.keys(s.others||{}).length>0,[s]),S=he.useMemo(()=>{const G=new Set;return c.concat(o).filter(J=>G.has(J.name)?!1:(G.add(J.name),!0))},[o,c]),w=he.useMemo(()=>new Set(Object.keys(s.default)),[s]),_=he.useMemo(()=>{const G=[...o.filter(z=>z.hasInjectedWallet&&w.has(z.name)),...c,...o.filter(z=>!z.hasInjectedWallet&&w.has(z.name))].sort((z,Y)=>z.name===Be.METAMASK&&Y.name===Be.METAMASK?z.hasInjectedWallet?-1:Y.hasInjectedWallet?1:z.isInstalled?-1:Y.isInstalled?1:0:z.name===Be.METAMASK?-1:Y.name===Be.METAMASK?1:0),J=new Set;return G.filter(z=>J.has(z.name)?!1:(J.add(z.name),!0)).filter(z=>{var Y;return y==="all"||((Y=z.chainNamespaces)===null||Y===void 0?void 0:Y.includes(y))})},[o,c,w,y]),k=he.useMemo(()=>{const G=d;return Object.keys(r).reduce((J,z)=>(z!==Be.WALLET_CONNECT_V2&&G[z]&&J.push({name:z,displayName:r[z].label||z,hasInjectedWallet:r[z].isInjected,hasWalletConnect:!1,hasInstallLinks:!1}),J),[])},[d,r]),L=G=>{const J=G.target.value;M(J)},D=G=>{E(G),g(!1)},U=he.useMemo(()=>O?[...S.filter(G=>G.hasInjectedWallet),...S.filter(G=>!G.hasInjectedWallet)].sort((G,J)=>G.name===Be.METAMASK?-1:1).filter(G=>y==="all"||G.chainNamespaces.includes(y)).filter(G=>G.name.toLowerCase().includes($.toLowerCase())):k,[O,k,$,S,y]),j=he.useMemo(()=>O&&!$&&!C?_:U,[O,$,U,_,C]),H=he.useMemo(()=>U.length,[U]),W=he.useMemo(()=>C?H:O?_.length:k.length,[O,_,k,C,H]),K=G=>{var J,z;if(T==null||T.track(Lt.EXTERNAL_WALLET_SELECTED,{connector:G.isInstalled?G.name:G.hasWalletConnect?Be.WALLET_CONNECT_V2:"",wallet_name:G.displayName,is_installed:G.isInstalled,is_injected:G.hasInjectedWallet,chain_namespaces:G.chainNamespaces,has_wallet_connect:G.hasWalletConnect,has_install_links:G.hasInstallLinks,has_wallet_registry_item:!!G.walletRegistryItem,total_external_wallets:S.length}),G.hasInjectedWallet&&((J=G.chainNamespaces)===null||J===void 0?void 0:J.length)>1){m(Q(Q({},v),{},{multiChainSelector:{show:!0,wallet:G}}));return}const X=G.hasInjectedWallet&&((z=G.chainNamespaces)===null||z===void 0?void 0:z.length)===1,ae=!G.hasInjectedWallet&&G.isInstalled;if(X||ae&&G.name!==Be.METAMASK)return h({connector:G.name});G.hasWalletConnect?(P(G),B(!0),N(dd.SELECTED_WALLET),b()):m(Q(Q({},v),{},{installLinks:{show:!0,wallet:G}}))},q=()=>{g(!0)},V=he.useMemo(()=>R?I.name===Be.METAMASK&&!I.hasInjectedWallet?i:a:null,[i,I,R,a]);return ne.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-1 w3a--flex-col w3a--gap-y-4",children:[ne.jsx(OG,{onBackClick:x,currentPage:A,selectedButton:I}),R?ne.jsx(NG,{qrCodeValue:V,isDark:n,selectedButton:I,primaryColor:(e=I.walletRegistryItem)===null||e===void 0?void 0:e.primaryColor,logoImage:`https://images.web3auth.io/login-${I.name}.${I.imgExtension}`}):ne.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-2",children:[ne.jsx(TUe,{isDark:n,isLoading:F,selectedChain:y,setSelectedChain:D,chainNamespace:f}),ne.jsx(FUe,{totalExternalWalletCount:H,isLoading:F,walletSearch:$,handleWalletSearch:L,buttonRadius:u}),ne.jsx(kUe,{externalButtons:j,isLoading:F,totalExternalWalletsCount:H,initialWalletCount:W,handleWalletClick:K,handleMoreWallets:q,isDark:n,deviceDetails:l,walletConnectUri:a,buttonRadius:u})]})]})}const jUe=t=>{const{isDark:e,wallet:n,handleExternalWalletClick:r}=t,[a]=Br(void 0,{i18n:Ot}),i=n.chainNamespaces.map(s=>({chainNamespace:s,displayName:s==="eip155"?"EVM":s,imageId:`chain-${s==="eip155"?"evm":s}`}));return ne.jsxs("div",{children:[ne.jsx("div",{className:"w3a--flex w3a--items-center w3a--justify-center",children:ne.jsx("p",{className:"w3a--text-base w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:a("modal.external.select-chain")})}),ne.jsx("div",{className:"w3a--my-6 w3a--flex w3a--justify-center",children:ne.jsx(fi,{imageId:`login-${n.name}`,hoverImageId:`login-${n.name}`,fallbackImageId:"wallet",height:"100",width:"100",isButton:!0,extension:n.imgExtension})}),ne.jsx("p",{className:"w3a--my-6 w3a--text-center w3a--text-sm w3a--text-app-gray-500",children:a("modal.external.select-chain-description",{wallet:n.displayName})}),ne.jsx("ul",{className:"w3a--flex w3a--flex-col w3a--gap-3",children:i.map(({chainNamespace:s,displayName:o,imageId:c})=>ne.jsx("li",{children:ne.jsxs("button",{type:"button",className:"w3a--btn w3a--group w3a--relative w3a--h-11 w3a--w-full w3a--items-center !w3a--justify-between w3a--overflow-hidden w3a--rounded-full",onClick:()=>r({connector:n.name,chainNamespace:s}),children:[ne.jsxs("div",{className:"w3a--flex w3a--items-center",children:[ne.jsx(fi,{imageId:c,hoverImageId:c,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:"svg"}),ne.jsx("p",{className:"w3a--ml-2 w3a--text-left w3a--text-sm first-letter:w3a--capitalize",children:o})]}),ne.jsx("img",{id:"chain-namespace-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(e?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})},s))})]})};function HUe({privacyPolicy:t,termsOfService:e}){const[n]=Br(void 0,{i18n:Ot});return ne.jsxs("div",{className:"w3a--mx-auto w3a--mt-auto w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4 w3a--pt-5",children:[(t||e)&&ne.jsxs("p",{className:"w3a--mx-auto w3a--w-4/5 w3a--text-center w3a--text-xs w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:[n("modal.footer.by-signing-in")," ",e&&ne.jsxs("a",{href:e,className:"w3a--text-app-primary-600 dark:w3a--text-app-primary-500",children:[n("modal.footer.terms-of-service")," "]}),t&&ne.jsxs(ne.Fragment,{children:[n("modal.footer.and")," ",ne.jsx("a",{href:t,className:"w3a--text-app-primary-600 dark:w3a--text-app-primary-500",children:n("modal.footer.privacy-policy")})]})]}),ne.jsxs("div",{className:"w3a--flex w3a--items-center w3a--justify-center w3a--gap-2",children:[ne.jsx("img",{height:"36",src:"https://images.web3auth.io/metamask-footer-logo-light.svg",alt:"Web3Auth Logo Light",className:"w3a--block w3a--h-9 dark:w3a--hidden"}),ne.jsx("img",{height:"36",src:"https://images.web3auth.io/metamask-footer-logo-dark.svg",alt:"Web3Auth Logo Dark",className:"w3a--hidden w3a--h-9 dark:w3a--block"})]})]})}const oS=()=>ne.jsxs("div",{className:"w3a--flex w3a--items-center w3a--justify-center w3a--gap-x-2",children:[ne.jsx("div",{className:"w3a--size-3 w3a--animate-pulse w3a--rounded-full w3a--bg-app-gray-500 dark:w3a--bg-app-gray-200"}),ne.jsx("div",{className:"w3a--size-3 w3a--animate-pulse w3a--rounded-full w3a--bg-app-gray-400 dark:w3a--bg-app-gray-400"}),ne.jsx("div",{className:"w3a--size-3 w3a--animate-pulse w3a--rounded-full w3a--bg-app-gray-200 dark:w3a--bg-app-gray-600"})]});function zUe(t){const[e]=Br(void 0,{i18n:Ot}),{connector:n,appLogo:r,connectorName:a}=t,i=he.useMemo(()=>n==="twitter"?ne.jsx(fi,{imageId:"login-x-dark"}):ne.jsx(fi,{imageId:`login-${n}`,height:"40",width:"40"}),[n]);return ne.jsxs("div",{className:"w3a--flex w3a--h-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:[ne.jsxs("div",{className:"w3a--flex w3a--items-center w3a--justify-center w3a--gap-x-6",children:[ne.jsx("figure",{className:"w3a--flex w3a--size-10 w3a--items-center w3a--justify-center w3a--overflow-hidden",children:ne.jsx("img",{src:r,alt:"",className:"w3a--size-full w3a--object-contain"})}),ne.jsx(oS,{}),i]}),ne.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--gap-y-1",children:[ne.jsx("div",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:e("modal.adapter-loader.message1",{adapter:a})}),ne.jsx("div",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:e("modal.adapter-loader.message2",{adapter:a})})]})]})}function qUe(t){const{message:e}=t;return ne.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--gap-y-2",children:[ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--connected-logo",children:ne.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.267 3.455a3.07 3.07 0 0 0 1.745-.723 3.066 3.066 0 0 1 3.976 0 3.07 3.07 0 0 0 1.745.723 3.066 3.066 0 0 1 2.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 0 1 0 3.976 3.07 3.07 0 0 0-.723 1.745 3.066 3.066 0 0 1-2.812 2.812 3.07 3.07 0 0 0-1.745.723 3.066 3.066 0 0 1-3.976 0 3.07 3.07 0 0 0-1.745-.723 3.066 3.066 0 0 1-2.812-2.812 3.07 3.07 0 0 0-.723-1.745 3.066 3.066 0 0 1 0-3.976 3.07 3.07 0 0 0 .723-1.745 3.066 3.066 0 0 1 2.812-2.812m7.44 5.252a1 1 0 0 0-1.414-1.414L9 10.586 7.707 9.293a1 1 0 0 0-1.414 1.414l2 2a1 1 0 0 0 1.414 0z",clipRule:"evenodd"})}),ne.jsx("p",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:e})]})}function KUe(t){const{message:e}=t;return ne.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--gap-y-2",children:[ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--error-logo",children:ne.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16.001 0A8 8 0 0 1 18 10m-7 4a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-1-9a1 1 0 0 0-1 1v4a1 1 0 1 0 2 0V6a1 1 0 0 0-1-1",clipRule:"evenodd"})}),ne.jsx("p",{className:"w3a--text-center w3a--text-sm w3a--text-app-gray-500 dark:w3a--text-app-gray-400",children:e})]})}function VUe(t){const{connector:e,connectorName:n,modalStatus:r,onClose:a,appLogo:i,message:s}=t;return he.useEffect(()=>{r===Un.CONNECTED&&setTimeout(()=>{a()},1e3)},[r,a]),ne.jsxs("div",{className:"w3a--flex w3a--h-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:[r===Un.CONNECTING&&ne.jsx(zUe,{connector:e,connectorName:n,appLogo:i}),r===Un.CONNECTED&&ne.jsx(qUe,{message:s}),r===Un.ERRORED&&ne.jsx(KUe,{message:s})]})}var WUe=Object.defineProperty,GUe=Object.defineProperties,YUe=Object.getOwnPropertyDescriptors,ny=Object.getOwnPropertySymbols,RG=Object.prototype.hasOwnProperty,DG=Object.prototype.propertyIsEnumerable,rE=(t,e,n)=>e in t?WUe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ta=(t,e)=>{for(var n in e||(e={}))RG.call(e,n)&&rE(t,n,e[n]);if(ny)for(var n of ny(e))DG.call(e,n)&&rE(t,n,e[n]);return t},$G=(t,e)=>GUe(t,YUe(e)),JUe=(t,e)=>{var n={};for(var r in t)RG.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ny)for(var r of ny(t))e.indexOf(r)<0&&DG.call(t,r)&&(n[r]=t[r]);return n},_0=(t,e,n)=>(rE(t,typeof e!="symbol"?e+"":e,n),n),cu=(t,e,n)=>new Promise((r,a)=>{var i=c=>{try{o(n.next(c))}catch(d){a(d)}},s=c=>{try{o(n.throw(c))}catch(d){a(d)}},o=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);o((n=n.apply(t,e)).next())}),ZUe="hCaptcha-script",P2="hCaptchaOnLoad",oR="script-error",W1="@hCaptcha/loader";function XUe(t){return Object.entries(t).filter(([,e])=>e||e===!1).map(([e,n])=>`${encodeURIComponent(e)}=${encodeURIComponent(String(n))}`).join("&")}function LG(t){let e=t&&t.ownerDocument||document,n=e.defaultView||e.parentWindow||window;return{document:e,window:n}}function BG(t){return t||document.head}function QUe(t){var e;t.setTag("source",W1),t.setTag("url",document.URL),t.setContext("os",{UA:navigator.userAgent}),t.setContext("browser",Ta({},eje())),t.setContext("device",$G(Ta({},tje()),{screen_width_pixels:screen.width,screen_height_pixels:screen.height,language:navigator.language,orientation:((e=screen.orientation)==null?void 0:e.type)||"Unknown",processor_count:navigator.hardwareConcurrency,platform:navigator.platform}))}function eje(){var t,e,n,r,a,i;let s=navigator.userAgent,o,c;return s.indexOf("Firefox")!==-1?(o="Firefox",c=(t=s.match(/Firefox\/([\d.]+)/))==null?void 0:t[1]):s.indexOf("Edg")!==-1?(o="Microsoft Edge",c=(e=s.match(/Edg\/([\d.]+)/))==null?void 0:e[1]):s.indexOf("Chrome")!==-1&&s.indexOf("Safari")!==-1?(o="Chrome",c=(n=s.match(/Chrome\/([\d.]+)/))==null?void 0:n[1]):s.indexOf("Safari")!==-1&&s.indexOf("Chrome")===-1?(o="Safari",c=(r=s.match(/Version\/([\d.]+)/))==null?void 0:r[1]):s.indexOf("Opera")!==-1||s.indexOf("OPR")!==-1?(o="Opera",c=(a=s.match(/(Opera|OPR)\/([\d.]+)/))==null?void 0:a[2]):s.indexOf("MSIE")!==-1||s.indexOf("Trident")!==-1?(o="Internet Explorer",c=(i=s.match(/(MSIE |rv:)([\d.]+)/))==null?void 0:i[2]):(o="Unknown",c="Unknown"),{name:o,version:c}}function tje(){let t=navigator.userAgent,e;t.indexOf("Win")!==-1?e="Windows":t.indexOf("Mac")!==-1?e="Mac":t.indexOf("Linux")!==-1?e="Linux":t.indexOf("Android")!==-1?e="Android":t.indexOf("like Mac")!==-1||t.indexOf("iPhone")!==-1||t.indexOf("iPad")!==-1?e="iOS":e="Unknown";let n;return/Mobile|iPhone|iPod|Android/i.test(t)?n="Mobile":/Tablet|iPad/i.test(t)?n="Tablet":n="Desktop",{model:e,family:e,device:n}}var nje=class FG{constructor(e){_0(this,"_parent"),_0(this,"breadcrumbs",[]),_0(this,"context",{}),_0(this,"extra",{}),_0(this,"tags",{}),_0(this,"request"),_0(this,"user"),this._parent=e}get parent(){return this._parent}child(){return new FG(this)}setRequest(e){return this.request=e,this}removeRequest(){return this.request=void 0,this}addBreadcrumb(e){return typeof e.timestamp>"u"&&(e.timestamp=new Date().toISOString()),this.breadcrumbs.push(e),this}setExtra(e,n){return this.extra[e]=n,this}removeExtra(e){return delete this.extra[e],this}setContext(e,n){return typeof n.type>"u"&&(n.type=e),this.context[e]=n,this}removeContext(e){return delete this.context[e],this}setTags(e){return this.tags=Ta(Ta({},this.tags),e),this}setTag(e,n){return this.tags[e]=n,this}removeTag(e){return delete this.tags[e],this}setUser(e){return this.user=e,this}removeUser(){return this.user=void 0,this}toBody(){let e=[],n=this;for(;n;)e.push(n),n=n.parent;return e.reverse().reduce((r,a)=>{var i;return r.breadcrumbs=[...(i=r.breadcrumbs)!=null?i:[],...a.breadcrumbs],r.extra=Ta(Ta({},r.extra),a.extra),r.contexts=Ta(Ta({},r.contexts),a.context),r.tags=Ta(Ta({},r.tags),a.tags),a.user&&(r.user=a.user),a.request&&(r.request=a.request),r},{breadcrumbs:[],extra:{},contexts:{},tags:{},request:void 0,user:void 0})}clear(){this.breadcrumbs=[],this.context={},this.tags={},this.user=void 0}},rje=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,aje=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,ije=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,sje=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,Db="?",cR="An unknown error occurred",oje="0.0.4";function cje(t){for(let e=0;e<t.length;e++)t[e]=Math.floor(Math.random()*256);return t}function ar(t){return(t+256).toString(16).substring(1)}function dje(){let t=cje(new Array(16));return t[6]=t[6]&15|64,t[8]=t[8]&63|128,ar(t[0])+ar(t[1])+ar(t[2])+ar(t[3])+"-"+ar(t[4])+ar(t[5])+"-"+ar(t[6])+ar(t[7])+"-"+ar(t[8])+ar(t[9])+"-"+ar(t[10])+ar(t[11])+ar(t[12])+ar(t[13])+ar(t[14])+ar(t[15])}var lje=[[rje,"chrome"],[ije,"winjs"],[aje,"gecko"]];function uje(t){var e,n,r,a;if(!t.stack)return null;let i=[],s=(r=(n=(e=t.stack).split)==null?void 0:n.call(e,`
`))!=null?r:[];for(let o=0;o<s.length;++o){let c=null,d=null,l=null;for(let[u,f]of lje)if(d=u.exec(s[o]),d){l=f;break}if(!(!d||!l)){if(l==="chrome")c={filename:(a=d[2])!=null&&a.startsWith("address at ")?d[2].substring(11):d[2],function:d[1]||Db,lineno:d[3]?+d[3]:null,colno:d[4]?+d[4]:null};else if(l==="winjs")c={filename:d[2],function:d[1]||Db,lineno:+d[3],colno:d[4]?+d[4]:null};else if(l==="gecko")o===0&&!d[5]&&t.columnNumber!==void 0&&i.length>0&&(i[0].column=t.columnNumber+1),c={filename:d[3],function:d[1]||Db,lineno:d[4]?+d[4]:null,colno:d[5]?+d[5]:null};else continue;!c.function&&c.lineno&&(c.function=Db),i.push(c)}}return i.length?i.reverse():null}function fje(t){let e=uje(t);return{type:t.name,value:t.message,stacktrace:{frames:e??[]}}}function pje(t){let e=sje.exec(t),n=e?e.slice(1):[];if(n.length!==6)throw new Error("Invalid DSN");let r=n[5].split("/"),a=r.slice(0,-1).join("/");return n[0]+"://"+n[3]+(n[4]?":"+n[4]:"")+(a?"/"+a:"")+"/api/"+r.pop()+"/envelope/?sentry_version=7&sentry_key="+n[1]+(n[2]?"&sentry_secret="+n[2]:"")}function hje(t,e,n){var r,a;let i=Ta({event_id:dje().replaceAll("-",""),platform:"javascript",sdk:{name:"@hcaptcha/sentry",version:oje},environment:e,release:n,timestamp:Date.now()/1e3},t.scope.toBody());if(t.type==="exception"){i.message=(a=(r=t.error)==null?void 0:r.message)!=null?a:"Unknown error",i.fingerprint=[i.message];let s=[],o=t.error;for(let c=0;c<5&&o&&(s.push(fje(o)),!(!o.cause||!(o.cause instanceof Error)));c++)o=o.cause;i.exception={values:s.reverse()}}return t.type==="message"&&(i.message=t.message,i.level=t.level),i}function bje(t){if(t instanceof Error)return t;if(typeof t=="string")return new Error(t);if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let n=t,{message:r}=n,a=JUe(n,["message"]),i=new Error(typeof r=="string"?r:cR);return Object.assign(i,a)}let e=new Error(cR);return Object.assign(e,{cause:t})}function yje(t,e,n){return cu(this,null,function*(){var r,a;try{if(typeof fetch<"u"&&typeof AbortSignal<"u"){let i;if(n){let c=new AbortController;i=c.signal,setTimeout(()=>c.abort(),n)}let s=yield fetch(t,$G(Ta({},e),{signal:i})),o=yield s.text();return{status:s.status,body:o}}return yield new Promise((i,s)=>{var o,c;let d=new XMLHttpRequest;if(d.open((o=e==null?void 0:e.method)!=null?o:"GET",t),d.onload=()=>i({status:d.status,body:d.responseText}),d.onerror=()=>s(new Error("XHR Network Error")),e==null?void 0:e.headers)for(let[l,u]of Object.entries(e.headers))d.setRequestHeader(l,u);if(n){let l=setTimeout(()=>{d.abort(),s(new Error("Request timed out"))},n);d.onloadend=()=>{clearTimeout(l)}}d.send((c=e==null?void 0:e.body)==null?void 0:c.toString())})}catch(i){return{status:0,body:(a=(r=i==null?void 0:i.toString)==null?void 0:r.call(i))!=null?a:"Unknown error"}}})}var qr,aE=(qr=class{constructor(t){_0(this,"apiURL"),_0(this,"dsn"),_0(this,"environment"),_0(this,"release"),_0(this,"sampleRate"),_0(this,"debug"),_0(this,"_scope"),_0(this,"shouldBuffer",!1),_0(this,"bufferlimit",20),_0(this,"buffer",[]);var e,n,r,a,i;this.environment=t.environment,this.release=t.release,this.sampleRate=(e=t.sampleRate)!=null?e:1,this.debug=(n=t.debug)!=null?n:!1,this._scope=(r=t.scope)!=null?r:new nje,this.apiURL=pje(t.dsn),this.dsn=t.dsn,this.shouldBuffer=(a=t.buffer)!=null?a:!1,this.bufferlimit=(i=t.bufferLimit)!=null?i:20}static init(t){qr._instance||(qr._instance=new qr(t))}static get instance(){if(!qr._instance)throw new Error("Sentry has not been initialized");return qr._instance}log(...t){this.debug&&console.log(...t)}get scope(){return this._scope}static get scope(){return qr.instance.scope}withScope(t){let e=this._scope.child();t(e)}static withScope(t){qr.instance.withScope(t)}captureException(t,e){this.captureEvent({type:"exception",level:"error",error:bje(t),scope:e??this._scope})}static captureException(t,e){qr.instance.captureException(t,e)}captureMessage(t,e="info",n){this.captureEvent({type:"message",level:e,message:t,scope:n??this._scope})}static captureMessage(t,e="info",n){qr.instance.captureMessage(t,e,n)}captureEvent(t){if(Math.random()>=this.sampleRate){this.log("Dropped event due to sample rate");return}if(this.shouldBuffer){if(this.buffer.length>=this.bufferlimit)return;this.buffer.push(t)}else this.sendEvent(t)}sendEvent(t,e=5e3){return cu(this,null,function*(){try{this.log("Sending sentry event",t);let n=hje(t,this.environment,this.release),r={event_id:n.event_id,dsn:this.dsn},a={type:"event"},i=JSON.stringify(r)+`
`+JSON.stringify(a)+`
`+JSON.stringify(n),s=yield yje(this.apiURL,{method:"POST",headers:{"Content-Type":"application/x-sentry-envelope"},body:i},e);this.log("Sentry response",s.status),s.status!==200&&(console.log(s.body),console.error("Failed to send event to Sentry",s))}catch(n){console.error("Failed to send event",n)}})}flush(t=5e3){return cu(this,null,function*(){try{this.log("Flushing sentry events",this.buffer.length);let e=this.buffer.splice(0,this.buffer.length).map(n=>this.sendEvent(n,t));yield Promise.all(e),this.log("Flushed all events")}catch(e){console.error("Failed to flush events",e)}})}static flush(t=5e3){return qr.instance.flush(t)}static reset(){qr._instance=void 0}},_0(qr,"_instance"),qr),mje="https://d233059272824702afc8c43834c4912d@sentry.hcaptcha.com/6",gje="2.0.0",wje="production";function vje(t=!0){if(!t)return dR();aE.init({dsn:mje,release:gje,environment:wje});let e=aE.scope;return QUe(e),dR(e)}function dR(t=null){return{addBreadcrumb:e=>{t&&t.addBreadcrumb(e)},captureRequest:e=>{t&&t.setRequest(e)},captureException:e=>{t&&aE.captureException(e,t)}}}function Eje({scriptLocation:t,query:e,loadAsync:n=!0,crossOrigin:r,apihost:a="https://js.hcaptcha.com",cleanup:i=!0,secureApi:s=!1,scriptSource:o=""}={},c){let d=BG(t),l=LG(d);return new Promise((u,f)=>{let p=l.document.createElement("script");p.id=ZUe,o?p.src=`${o}?onload=${P2}`:s?p.src=`${a}/1/secure-api.js?onload=${P2}`:p.src=`${a}/1/api.js?onload=${P2}`,p.crossOrigin=r,p.async=n;let h=(b,v)=>{try{!s&&i&&d.removeChild(p),v(b)}catch(m){f(m)}};p.onload=b=>h(b,u),p.onerror=b=>{c&&c(p.src),h(b,f)},p.src+=e!==""?`&${e}`:"",d.appendChild(p)})}var $b=[];function _je(t={cleanup:!0},e){try{e.addBreadcrumb({category:W1,message:"hCaptcha loader params",data:t});let n=BG(t.scriptLocation),r=LG(n),a=$b.find(({scope:s})=>s===r.window);if(a)return e.addBreadcrumb({category:W1,message:"hCaptcha already loaded"}),a.promise;let i=new Promise((s,o)=>cu(this,null,function*(){try{r.window[P2]=()=>{e.addBreadcrumb({category:W1,message:"hCaptcha script called onload function"}),s(r.window.hcaptcha)};let c=XUe({custom:t.custom,render:t.render,sentry:t.sentry,assethost:t.assethost,imghost:t.imghost,reportapi:t.reportapi,endpoint:t.endpoint,host:t.host,recaptchacompat:t.recaptchacompat,hl:t.hl});yield Eje(Ta({query:c},t),d=>{e.captureRequest({url:d,method:"GET"})}),e.addBreadcrumb({category:W1,message:"hCaptcha loaded",data:a})}catch{e.addBreadcrumb({category:W1,message:"hCaptcha failed to load"});let d=$b.findIndex(l=>l.scope===r.window);d!==-1&&$b.splice(d,1),o(new Error(oR))}}));return $b.push({promise:i,scope:r.window}),i}catch(n){return e.captureException(n),Promise.reject(new Error(oR))}}function UG(t,e,n=0){return cu(this,null,function*(){let r=n<2?"Retry loading hCaptcha Api":"Exceeded maximum retries";try{return yield _je(t,e)}catch(a){return e.addBreadcrumb({category:W1,message:r}),n>=2?(e.captureException(a),Promise.reject(a)):(n+=1,UG(t,e,n))}})}function Tje(){return cu(this,arguments,function*(t={}){let e=vje(t.sentry);return yield UG(t,e)})}function lR(t){var e=t&&t.ownerDocument||document,n=e.defaultView||e.parentWindow||window;return{document:e,window:n}}function uR(t){return t||document.head}var xje=function(t){NY(e,t);function e(r){var a;return a=t.call(this,r)||this,a._hcaptcha=void 0,a.renderCaptcha=a.renderCaptcha.bind(Ua(a)),a.resetCaptcha=a.resetCaptcha.bind(Ua(a)),a.removeCaptcha=a.removeCaptcha.bind(Ua(a)),a.isReady=a.isReady.bind(Ua(a)),a._onReady=null,a.loadCaptcha=a.loadCaptcha.bind(Ua(a)),a.handleOnLoad=a.handleOnLoad.bind(Ua(a)),a.handleSubmit=a.handleSubmit.bind(Ua(a)),a.handleExpire=a.handleExpire.bind(Ua(a)),a.handleError=a.handleError.bind(Ua(a)),a.handleOpen=a.handleOpen.bind(Ua(a)),a.handleClose=a.handleClose.bind(Ua(a)),a.handleChallengeExpired=a.handleChallengeExpired.bind(Ua(a)),a.ref=he.createRef(),a.apiScriptRequested=!1,a.sentryHub=null,a.captchaId="",a.state={isApiReady:!1,isRemoved:!1,elementId:r.id},a}var n=e.prototype;return n.componentDidMount=function(){var a=this,i=uR(this.props.scriptLocation),s=lR(i);this._hcaptcha=s.window.hcaptcha||void 0;var o=typeof this._hcaptcha<"u";if(o){this.setState({isApiReady:!0},function(){a.renderCaptcha()});return}this.loadCaptcha()},n.componentWillUnmount=function(){var a=this._hcaptcha,i=this.captchaId;this.isReady()&&(a.reset(i),a.remove(i))},n.shouldComponentUpdate=function(a,i){return!(this.state.isApiReady!==i.isApiReady||this.state.isRemoved!==i.isRemoved)},n.componentDidUpdate=function(a){var i=this,s=["sitekey","size","theme","tabindex","languageOverride","endpoint"],o=s.every(function(c){return a[c]===i.props[c]});o||this.removeCaptcha(function(){i.renderCaptcha()})},n.loadCaptcha=function(){if(!this.apiScriptRequested){var a=this.props,i=a.apihost,s=a.assethost,o=a.endpoint,c=a.host,d=a.imghost,l=a.languageOverride,u=a.reCaptchaCompat,f=a.reportapi,p=a.sentry,h=a.custom,b=a.loadAsync,v=a.scriptLocation,m=a.scriptSource,T=a.secureApi,A=a.cleanup,N=A===void 0?!0:A,R={render:"explicit",apihost:i,assethost:s,endpoint:o,hl:l,host:c,imghost:d,recaptchacompat:u===!1?"off":null,reportapi:f,sentry:p,custom:h,loadAsync:b,scriptLocation:v,scriptSource:m,secureApi:T,cleanup:N};Tje(R).then(this.handleOnLoad,this.handleError).catch(this.handleError),this.apiScriptRequested=!0}},n.renderCaptcha=function(a){var i=this,s=this.props.onReady,o=this.state.isApiReady,c=this.captchaId;if(!(!o||c)){var d=Object.assign({"open-callback":this.handleOpen,"close-callback":this.handleClose,"error-callback":this.handleError,"chalexpired-callback":this.handleChallengeExpired,"expired-callback":this.handleExpire,callback:this.handleSubmit},this.props,{hl:this.props.hl||this.props.languageOverride,languageOverride:void 0}),l=this._hcaptcha,u=l.render(this.ref.current,d);this.captchaId=u,this.setState({isRemoved:!1},function(){a&&a(),s&&s(),i._onReady&&i._onReady(u)})}},n.resetCaptcha=function(){var a=this._hcaptcha,i=this.captchaId;this.isReady()&&a.reset(i)},n.removeCaptcha=function(a){var i=this,s=this._hcaptcha,o=this.captchaId;this.isReady()&&this.setState({isRemoved:!0},function(){i.captchaId="",s.remove(o),a&&a()})},n.handleOnLoad=function(){var a=this;this.setState({isApiReady:!0},function(){var i=uR(a.props.scriptLocation),s=lR(i);a._hcaptcha=s.window.hcaptcha,a.renderCaptcha(function(){var o=a.props.onLoad;o&&o()})})},n.handleSubmit=function(a){var i=this.props.onVerify,s=this.state.isRemoved,o=this._hcaptcha,c=this.captchaId;if(!(typeof o>"u"||s)){var d=o.getResponse(c),l=o.getRespKey(c);i&&i(d,l)}},n.handleExpire=function(){var a=this.props.onExpire,i=this._hcaptcha,s=this.captchaId;this.isReady()&&(i.reset(s),a&&a())},n.handleError=function(a){var i=this.props.onError,s=this._hcaptcha,o=this.captchaId;this.isReady()&&s.reset(o),i&&i(a)},n.isReady=function(){var a=this.state,i=a.isApiReady,s=a.isRemoved;return i&&!s},n.handleOpen=function(){!this.isReady()||!this.props.onOpen||this.props.onOpen()},n.handleClose=function(){!this.isReady()||!this.props.onClose||this.props.onClose()},n.handleChallengeExpired=function(){!this.isReady()||!this.props.onChalExpired||this.props.onChalExpired()},n.execute=function(a){var i=this;a===void 0&&(a=null),a=typeof a=="object"?a:null;try{var s=this._hcaptcha,o=this.captchaId;if(!this.isReady()){var c,d=new Promise(function(l,u){i._onReady=function(f){try{var p=i._hcaptcha;a&&a.async?p.execute(f,a).then(l).catch(u):l(p.execute(f,a))}catch(h){u(h)}}});return(c=a)!=null&&c.async?d:null}return s.execute(o,a)}catch(l){return a&&a.async?Promise.reject(l):null}},n.close=function(){var a=this._hcaptcha,i=this.captchaId;if(this.isReady())return a.close(i)},n.setData=function(a){var i=this._hcaptcha,s=this.captchaId;this.isReady()&&(a&&typeof a!="object"&&(a=null),i.setData(s,a))},n.getResponse=function(){var a=this._hcaptcha;return a.getResponse(this.captchaId)},n.getRespKey=function(){var a=this._hcaptcha;return a.getRespKey(this.captchaId)},n.render=function(){var a=this.state.elementId;return he.createElement("div",{ref:this.ref,id:a})},e}(he.Component);class jG{constructor(e){if(re(this,"authBaseApiUrl",void 0),re(this,"passwordlessParams",void 0),re(this,"trackingIdentifier",void 0),re(this,"version",`web3auth-${XW.split(".")[0]}`),!e.authConnection)throw Me.invalidParams("authConnection is required");if(!e.web3authClientId)throw Me.invalidParams("web3authClientId is required");if(!e.loginHint)throw Me.invalidParams("loginHint is required");if(!e.network)throw Me.invalidParams("network is required");e.authBuildEnv||(e.authBuildEnv=i6.PRODUCTION),this.authBaseApiUrl=`${HBe[e.authBuildEnv]}/api/v3/auth`,this.passwordlessParams=e}get name(){if(this.passwordlessParams.authConnection===$e.EMAIL_PASSWORDLESS)return"Email";if(this.passwordlessParams.authConnection===$e.SMS_PASSWORDLESS)return"Mobile";throw Me.invalidParams("Invalid authConnection")}get connection(){if(this.passwordlessParams.authConnection===$e.EMAIL_PASSWORDLESS)return"email";if(this.passwordlessParams.authConnection===$e.SMS_PASSWORDLESS)return"sms";throw Me.invalidParams("Invalid authConnection")}get trackingId(){return this.trackingIdentifier}get sessionStorageAvailable(){return w4("sessionStorage")}get whiteLabelParams(){var e;const{uiConfig:n}=this.passwordlessParams;if(!n)return{};const{appName:r,appUrl:a,defaultLanguage:i,mode:s,logoLight:o,logoDark:c,theme:d}=n,l=(e=s==="dark"?c:o)!==null&&e!==void 0?e:"";return{mode:s??"light",name:r??"",url:a??"",language:i??"en",logo:l.includes(".svg")?"":l,theme:d??{}}}set trackingId(e){this.trackingIdentifier=e}async start(e){try{const r=await K7(`${this.authBaseApiUrl}/passwordless/start`,e);if(r&&r.success){var n;this.trackingId=(n=r.data)===null||n===void 0?void 0:n.trackingId,this.sessionStorageAvailable&&window.sessionStorage.setItem("trackingId",this.trackingId)}return r}catch(r){return this.handleError(r)}}async verify(e){try{const n=await K7(`${this.authBaseApiUrl}/passwordless/verify`,e);return n.success?(this.sessionStorageAvailable&&window.sessionStorage.removeItem("trackingId"),{success:!0,data:{id_token:n.id_token}}):{success:!1,error:n.message}}catch(n){return this.handleError(n)}}async handleError(e){let n;if(e.status===429)n="passwordless.error-too-many-requests";else try{const r=await e.json();n=r.error_code?BFe(r.error_code):r.message}catch{n="passwordless.something-wrong-error"}return{success:!1,error:n}}}class Sje extends jG{constructor(e){var n;super(e),re(this,"mailSent",void 0),this.mailSent=!1,this.sessionStorageAvailable&&(this.trackingId=(n=window.sessionStorage.getItem("trackingId"))!==null&&n!==void 0?n:void 0)}async sendVerificationCode({captchaToken:e}){const{loginHint:n,network:r,web3authClientId:a}=this.passwordlessParams,i={client_id:a,web3auth_client_id:a,connection:this.connection,login_hint:n,tracking_id:this.trackingId,whitelabel:this.whiteLabelParams,version:this.version,network:r,flow_type:E4.code,captcha_token:e};return super.start(i)}async verifyCode(e){const{loginHint:n,network:r,web3authClientId:a}=this.passwordlessParams,i={client_id:a,login_hint:n,code:e,connection:"email",tracking_id:this.trackingId,version:this.version,network:r,flow_type:E4.code};return super.verify(i)}}class Aje extends jG{constructor(e){if(super(e),this.sessionStorageAvailable){var n;this.trackingId=(n=window.sessionStorage.getItem("trackingId"))!==null&&n!==void 0?n:void 0}}async sendVerificationCode(e){var n;const{loginHint:r,network:a,web3authClientId:i}=this.passwordlessParams,s=(n=e==null?void 0:e.captchaToken)!==null&&n!==void 0?n:"";if(!s)throw Pe.connectionError("Captcha token is required");const o={client_id:i,web3auth_client_id:i,connection:this.connection,login_hint:r,tracking_id:this.trackingId,whitelabel:this.whiteLabelParams,version:this.version,network:a,captcha_token:s};return super.start(o)}async verifyCode(e){const{loginHint:n,network:r,web3authClientId:a}=this.passwordlessParams,i={client_id:a,login_hint:n,code:e,connection:this.connection,tracking_id:this.trackingId,version:this.version,network:r};return super.verify(i)}}const Cje=(t,e)=>{switch(t){case $e.EMAIL_PASSWORDLESS:return new Sje(e);case $e.SMS_PASSWORDLESS:return new Aje(e);default:throw Me.invalidParams(`Unsupported auth connection: ${t}`)}},Ije=({children:t,content:e,isDark:n=!1,hideHint:r=!1})=>{const[a,i]=he.useState(!1),s=()=>{i(!0)},o=()=>{i(!1)},c=he.useMemo(()=>{const d="8px",l=n?"#ffffff":"#1f2a37";return{borderTop:`${d} solid transparent`,borderRight:"none",borderBottom:`${d} solid transparent`,borderLeft:`${d} solid ${l}`,left:"0%",top:`calc(100% - ${d})`}},[n]);return ne.jsxs("div",{className:"w3a--relative","aria-hidden":!0,onMouseEnter:s,onMouseLeave:o,onFocus:s,onBlur:o,onClick:o,children:[t,a&&!r&&ne.jsxs("div",{"data-popover":!0,role:"tooltip",className:Mt("w3a--absolute w3a--z-[45] w3a--shadow-2xl w3a--rounded-lg w3a--bottom-[100%] w3a--left-[50%] w3a--w-max w3a--text-xs w3a--px-[6px] w3a--py-[3px]",n?"w3a--bg-app-white w3a--text-app-gray-900":"w3a--bg-app-gray-800 w3a--text-app-gray-100"),children:[e,ne.jsx("div",{className:"w3a--absolute",style:c})]})]})};function fR(t,e,n){const r=t===$e.TWITTER?`login-X${e?"-light":"-dark"}`:`login-${t}${e?"-light":"-dark"}`,a=t===$e.APPLE||t===$e.GITHUB||t===$e.TWITTER?r:`login-${t}-active`;return ne.jsxs(ne.Fragment,{children:[ne.jsx("img",{id:"active-login-img",src:`https://images.web3auth.io/${a}${n}`,alt:"active-login-img",className:"w3a--hidden w3a--size-5 w3a--object-contain group-hover:w3a--block"}),ne.jsx("img",{id:"login-img",src:`https://images.web3auth.io/${r}${n}`,alt:"login-img",className:"w3a--block w3a--size-5 w3a--object-contain group-hover:w3a--hidden"})]})}function Oje(t){const{visibleRow:e,otherRow:n,isDark:r,canShowMore:a,handleSocialLoginClick:i,handleExpandSocialLogins:s,buttonRadius:o}=t,c=()=>e.length===1?"w3a--grid-cols-1":e.length===2?"w3a--grid-cols-2":e.length===3?"w3a--grid-cols-3":"w3a--grid-cols-4";return e.length!==0&&(n==null?void 0:n.length)===0?ne.jsx("div",{className:"w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2",children:ne.jsxs("div",{className:Mt("w3a--grid w3a--w-full w3a--gap-x-2",c()),children:[e.filter((d,l)=>e.length===4?l<=3:l<3).map(d=>ne.jsx(Ije,{content:"Last Login",isDark:r,hideHint:!0,children:ne.jsx(M2,{type:A6.SOCIAL,props:{showText:!1,method:d.method,isDark:r,isPrimaryBtn:!1,btnStyle:"w3a--flex w3a--items-center !w3a--justify-center w3a--w-full w3a--h-11 w3a--group",children:ne.jsx(ne.Fragment,{children:fR(d.method,r,".svg")}),onClick:()=>i({connector:d.connector,loginParams:d.loginParams}),buttonRadius:o}},d.method)},d.method)),a&&e.length>4&&ne.jsx(M2,{type:A6.SOCIAL,props:{showIcon:!1,onClick:s,btnStyle:"w3a--flex w3a--items-center !w3a--justify-center w3a--w-full w3a--h-11",children:ne.jsx("img",{src:kr(r?"dots-dark-horizontal":"dots-light-horizontal"),alt:"Logo",className:"w3a--object-contain"}),buttonRadius:o}})]})}):ne.jsxs("div",{className:"w3a--flex w3a--w-full w3a--flex-col w3a--items-start w3a--justify-start w3a--gap-y-4",children:[ne.jsx("button",{type:"button",className:"w3a--appearance-none",onClick:()=>s(),children:ne.jsx("img",{src:kr(r?"arrow-left-dark":"arrow-left-light"),alt:"Logo",className:"w3a--object-contain"})}),ne.jsx("div",{className:"w3a--social-container w3a--grid w3a--h-[300px] w3a--w-full w3a--auto-rows-min w3a--grid-cols-1 w3a--gap-y-2 w3a--overflow-y-auto w3a--pl-2 w3a--pr-3",children:n.map(d=>ne.jsx("div",{className:"w3a--h-11 w3a--w-full",children:ne.jsx(M2,{type:A6.SOCIAL,props:{method:d.method,isDark:r,isPrimaryBtn:!1,onClick:()=>i({connector:d.connector,loginParams:d.loginParams}),btnStyle:"w3a--group w3a--relative w3a--overflow-hidden w3a--flex w3a--items-center !w3a--justify-start w3a--w-full w3a--h-11",buttonRadius:o,children:ne.jsxs(ne.Fragment,{children:[fR(d.method,r,".svg"),ne.jsx("p",{className:"w3a--text-sm w3a--font-normal w3a--text-app-gray-900 dark:w3a--text-app-white",children:d.name}),ne.jsx("img",{id:"login-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(r?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})}})},d.method))})]})}const HG=he.forwardRef(({length:t,loading:e,resendTimer:n=60,onComplete:r,onChange:a,error:i=!1,success:s=!1,disabled:o=!1,classes:c,helperText:d="",onResendTimer:l,showCta:u=!0,showTimer:f=!0,autoFocus:p=!1,placeholder:h="",autoComplete:b="one-time-code",type:v="text",resendBtnText:m=""},T)=>{const[A,N]=he.useState(Array(t).fill("")),[R,B]=he.useState(n??0),[F]=Br(void 0,{i18n:Ot}),I=he.useRef([]),P=x=>/^\d$/.test(x)&&x.trim().length===1,$=(x,O)=>{if(x.key==="Backspace"||x.key==="Delete"){x.preventDefault();const k=[...A];if(A[O]!=="")k[O]="";else if(O>0){var S;(S=I.current[O-1])===null||S===void 0||S.focus(),k[O-1]=""}N(k),a&&a(k.join(""))}else if(x.key==="ArrowLeft"){var w;x.preventDefault(),(w=I.current[O-1])===null||w===void 0||w.focus()}else if(x.key==="ArrowRight"){var _;x.preventDefault(),(_=I.current[O+1])===null||_===void 0||_.focus()}else(x.key===" "||x.key==="Spacebar"||x.key==="Space"||!P(x.key)&&I.current[O+1])&&(x.preventDefault(),I.current[O+1].value="")},M=(x,O)=>{x.preventDefault();const{value:S}=x.target;if(S&&S.length>1&&S.length===t){var w;const k=S.split(""),L=[...A];k.forEach((D,U)=>{L[U]=D}),N(L),(w=I.current[k.length===t?t-1:k.length])===null||w===void 0||w.focus(),r&&t===L.length&&r(L.join(""))}else if(P(S)){const k=[...A].slice(0,t);k[O]=S,N(k);const L=k.join("");if(O<t-1&&I.current[O+1]){var _;(_=I.current[O+1])===null||_===void 0||_.focus()}a&&a(S),r&&t===L.length&&r(L)}},y=x=>{x.preventDefault();const O=x.clipboardData.getData("text").slice(0,t);if(O&&/^\d+$/.test(O)){var S;const w=O.split(""),_=[...A];w.forEach((k,L)=>{_[L]=k}),N(_),(S=I.current[w.length===t?t-1:w.length])===null||S===void 0||S.focus(),r&&t===_.length&&r(_.join(""))}},E=()=>{B(n||0),l&&l()};he.useEffect(()=>{let x=null;return u&&f&&(x=window.setInterval(()=>{R>0?B(O=>O-1):clearInterval(x)},1e3)),()=>{clearInterval(x)}},[R]),he.useEffect(()=>{if(I&&p){var x;(x=I.current)===null||x===void 0||x[0].focus()}},[p]);const C=Mt("w3a--text-xs w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-white w3a--mt-2",{"w3a--text-app-red-500 dark:w3a--text-app-red-400":i,"w3a--text-app-green-500 dark:w3a--text-app-green-400":s},c==null?void 0:c.helperText),g=new Date().getFullYear();return ne.jsxs("div",{className:Mt("w3a--flex w3a--flex-col w3a--items-center",c==null?void 0:c.root),ref:T,children:[ne.jsx("form",{className:Mt("w3a--flex w3a--space-x-2",c==null?void 0:c.inputContainer),children:A.map((x,O)=>{var S,w,_;return ne.jsx("input",{id:`${g+O}`,type:v,value:x,autoComplete:b,placeholder:Array.isArray(h)?h[O]:h,inputMode:"numeric",onInput:k=>M(k,O),onKeyUp:k=>$(k,O),onPaste:y,className:Mt("w3a--w-12 w3a--h-[42px] w3a--rounded-full w3a--border w3a--text-center w3a--text-xl w3a--focus:outline-none w3a--active:outline-none w3a--focus:border-app-primary-600 dark:w3a--focus:border-app-primary-500 w3a--border-app-gray-300 dark:w3a--border-app-gray-500 w3a--bg-app-gray-50 dark:w3a--bg-app-gray-700 w3a--text-app-gray-900 dark:w3a--text-app-white",s&&((S=c==null?void 0:c.success)!==null&&S!==void 0?S:"w3a--border-app-green-400 dark:w3a--border-app-green-500 w3a--focus:w3a--border-app-green-400 dark:w3a--focus:w3a--border-app-green-500"),i&&((w=c==null?void 0:c.error)!==null&&w!==void 0?w:"w3a--border-app-red-600 dark:w3a--border-app-red-500 w3a--focus:w3a--border-app-red-600 dark:w3a--focus:w3a--border-app-red-500"),o&&((_=c==null?void 0:c.disabled)!==null&&_!==void 0?_:"w3a--border-app-gray-200 w3a--bg-app-gray-200 dark:w3a--border-app-gray-700 w3a--focus:w3a--border-app-gray-200 dark:w3a--focus:w3a--border-app-gray-700 w3a--cursor-not-allowed"),c==null?void 0:c.input),ref:k=>{I.current[O]=k},disabled:o},`${g+O}`)})}),d&&ne.jsx("p",{className:C,children:d}),e&&ne.jsx("div",{className:"w3a--mt-3",children:ne.jsx(oS,{})}),u&&!e&&ne.jsx("div",{className:Mt("w3a--flex w3a--items-center w3a--mt-3",c==null?void 0:c.ctaContainer),children:R>0&&f?ne.jsx("span",{className:Mt("w3a--text-xs w3a--text-app-gray-500 dark:w3a--text-app-gray-400",c==null?void 0:c.timerText),children:F("modal.resendTimer",{timer:R})}):ne.jsx("button",{type:"button",className:Mt("w3a--text-xs w3a--p-0 w3a--text-app-primary-600 dark:w3a--text-app-primary-500",c==null?void 0:c.resendBtnText),onClick:E,disabled:R>0&&f,children:m||F("modal.resendCode")})})]})});HG.displayName="OtpInput";function Mje(t){const{setShowOtpFlow:e,handleOtpComplete:n,authConnection:r,loginHint:a="",errorMessage:i,otpLoading:s,countryFlag:o}=t,c=he.useMemo(()=>r===$e.SMS_PASSWORDLESS,[r]),[d]=Br(void 0,{i18n:Ot}),l=he.useMemo(()=>{if(r===$e.EMAIL_PASSWORDLESS)return a;const[u,f]=a.includes("-")?a.split("-"):["",a],p=`${f}`.slice(-Math.floor(f.length/2)).padStart(`${f}`.length,"*");return`${o} ${u} ${p}`},[a,r,o]);return ne.jsxs(ne.Fragment,{children:[ne.jsx("div",{className:"w3a--mr-auto w3a--flex w3a--w-full w3a--items-start w3a--justify-start",children:ne.jsx("button",{type:"button",className:"w3a--z-20 w3a--flex w3a--size-5 w3a--cursor-pointer w3a--items-center w3a--justify-center w3a--rounded-full",onClick:()=>e(!1),children:ne.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",className:"w3a--text-app-gray-900 dark:w3a--text-app-white",children:ne.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.707 16.707a1 1 0 0 1-1.414 0l-6-6a1 1 0 0 1 0-1.414l6-6a1 1 0 0 1 1.414 1.414L5.414 9H17a1 1 0 1 1 0 2H5.414l4.293 4.293a1 1 0 0 1 0 1.414",clipRule:"evenodd"})})})}),ne.jsxs("div",{className:"-w3a--mt-10 w3a--flex w3a--size-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:[ne.jsx("img",{src:kr(c?"sms-otp-light":"email-otp-light"),alt:"otp",className:"w3a--size-auto"}),ne.jsxs("div",{className:"w3a--mx-auto -w3a--mt-6 w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2",children:[ne.jsx("p",{className:"w3a--text-lg w3a--font-bold w3a--text-app-gray-900 dark:w3a--text-app-white",children:d(c?"modal.otp.mobile-title":"modal.otp.email-title")}),ne.jsxs("div",{className:"w3a--mx-auto w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-1",children:[ne.jsx("p",{className:"w3a--text-center w3a--text-sm w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-gray-300",children:d(c?"modal.otp.mobile-subtext":"modal.otp.email-subtext")}),ne.jsx("p",{className:"w3a--text-center w3a--text-sm w3a--font-normal w3a--text-app-gray-500 dark:w3a--text-app-gray-300",children:c?l:d("modal.otp.email-subtext-example",{email:l})})]})]}),ne.jsx(HG,{length:6,onComplete:n,error:!!i,helperText:i,loading:s,disabled:s})]})]})}function Pje(t){const{otpLoading:e,setShowOtpFlow:n,handleOtpComplete:r,authConnection:a,loginHint:i,errorMessage:s,countryFlag:o}=t;return ne.jsx("div",{className:"w3a--flex w3a--size-full w3a--flex-1 w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-4",children:ne.jsx(Mje,{errorMessage:s,setShowOtpFlow:n,handleOtpComplete:r,authConnection:a,loginHint:i,otpLoading:e,countryFlag:o})})}function kje(t){const{isModalVisible:e,isPasswordLessCtaClicked:n,setIsPasswordLessCtaClicked:r,title:a,placeholder:i,handleFormSubmit:s,errorMessage:o,isDark:c,isPasswordLessLoading:d,buttonRadius:l}=t,[u]=Br(void 0,{i18n:Ot}),f=he.useRef(null),[p,h]=he.useState(""),[b,v]=he.useState(!1),m=N=>{h(N.target.value),v(!0)},T=N=>{const{key:R}=N;R==="Enter"&&(s(p),v(!1))},A=N=>{N.preventDefault(),N.stopPropagation(),s(p),v(!1)};return he.useEffect(()=>{e||r(!1)},[e,r]),he.useEffect(()=>{if(n){var N;(N=f.current)===null||N===void 0||N.focus()}},[n]),n?ne.jsxs(ne.Fragment,{children:[ne.jsxs("div",{className:Mt("w3a--input",b&&"!w3a--border-app-primary-600",{"w3a--rounded-full":l==="pill","w3a--rounded-lg":l==="rounded","w3a--rounded-none":l==="square"}),children:[ne.jsx("input",{ref:f,onInput:m,value:p,placeholder:i,onFocus:()=>{v(!0)},onBlur:N=>{N.target.placeholder=`${i}`,v(!1)},type:"text",className:Mt("w3a--w-full w3a--appearance-none w3a--bg-transparent w3a--text-app-gray-900 w3a--outline-none placeholder:w3a--text-xs placeholder:w3a--text-app-gray-400 focus:w3a--outline-none active:w3a--outline-none dark:w3a--text-app-white dark:placeholder:w3a--text-app-gray-500"),onKeyDown:N=>T(N),disabled:d}),d&&ne.jsx(oS,{}),p&&!d&&ne.jsx("button",{type:"button",className:"w3a--appearance-none",onClick:A,children:ne.jsx("img",{src:kr(c?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})})]}),o&&!b&&n&&ne.jsx("p",{className:"w3a--w-full w3a--pl-6 w3a--text-start w3a--text-xs w3a--font-normal w3a--text-app-red-500 dark:w3a--text-app-red-400",children:o})]}):ne.jsxs("button",{type:"button",className:Mt("w3a--btn !w3a--justify-between w3a--relative w3a--group w3a--overflow-hidden",{"w3a--rounded-full":l==="pill","w3a--rounded-lg":l==="rounded","w3a--rounded-none":l==="square"}),onClick:()=>{r(!0)},children:[ne.jsx("p",{className:"w3a--text-app-gray-900 dark:w3a--text-app-white",children:u("modal.passwordless.title",{title:a})}),ne.jsx("img",{id:"passwordless-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(c?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})}const Nje=[$e.SMS_PASSWORDLESS,$e.EMAIL_PASSWORDLESS,$e.AUTHENTICATOR,$e.PASSKEYS,$e.TELEGRAM,$e.CUSTOM];function Rje(t){const{web3authClientId:e,web3authNetwork:n,authBuildEnv:r,appLogo:a,isModalVisible:i,handleSocialLoginHeight:s,socialLoginsConfig:o,installedExternalWalletConfig:c,isDark:d,handleSocialLoginClick:l,totalExternalWallets:u,isEmailPasswordLessLoginVisible:f,isSmsPasswordLessLoginVisible:p,handleExternalWalletBtnClick:h,handleExternalWalletClick:b,areSocialLoginsVisible:v,showPasswordLessInput:m,showExternalWalletButton:T,showExternalWalletCount:A,showInstalledExternalWallets:N,logoAlignment:R="center",buttonRadius:B="pill"}=t,[F]=Br(void 0,{i18n:Ot}),{bodyState:I,setBodyState:P}=he.useContext(wh),{analytics:$}=he.useContext(iS),[M,y]=he.useState(""),[E,C]=he.useState(""),[g,x]=he.useState(""),[O,S]=he.useState(""),[w,_]=he.useState(!1),[k,L]=he.useState(!1),[D,U]=he.useState([]),[j,H]=he.useState([]),[W,K]=he.useState(!1),[q,V]=he.useState(!1),[G,J]=he.useState(void 0),[z,Y]=he.useState(void 0),[X,ae]=he.useState(!1),[ie,oe]=he.useState(!1),[ue,Oe]=he.useState(!1),[Re,pe]=he.useState(""),Ze=he.useRef(null),je=()=>{_(We=>!We),K(!1),s()};he.useEffect(()=>{const We=Object.keys(o.loginMethods).filter(at=>o.loginMethods[at].showOnModal),et=[],ot=[],jt=(o.loginMethodsOrder||[]).reduce((at,Z,ee)=>(at[Z]=ee,at),{}),rt=Object.keys(o.loginMethods).filter(at=>!!o.loginMethods[at].showOnModal&&!Nje.includes(at)).sort((at,Z)=>{var ee,me;const Ae=(o.loginMethodsOrder||[]).length,Ce=(ee=jt[at])!==null&&ee!==void 0?ee:Ae,lt=(me=jt[Z])!==null&&me!==void 0?me:Ae,{mainOption:Mn}=o.loginMethods[at]||{},{mainOption:Gt}=o.loginMethods[Z]||{};return Mn&&Gt?Ce-lt:Mn?-1:Gt?1:Ce-lt});rt.forEach((at,Z)=>{var ee;const me=o.loginMethods[at],Ae=rS(me.name||at),Ce=Z+1,lt=(o==null||(ee=o.uiConfig)===null||ee===void 0?void 0:ee.primaryButton)==="socialLogin"&&Ce===1,Mn=rt.length;(Mn>=4?Ce>0&&Ce<=Mn:Ce>0&&Ce<4)&&et.push({method:at,isDark:d,isPrimaryBtn:lt,name:Ae,connector:o.connector,loginParams:{authConnection:me.authConnection||at,authConnectionId:me.authConnectionId,groupedAuthConnectionId:me.groupedAuthConnectionId,extraLoginOptions:me.extraLoginOptions,name:Ae,login_hint:""},order:Ce}),ot.push({method:at,isDark:d,isPrimaryBtn:lt,name:Ae==="Twitter"?"X":Ae,connector:o.connector,loginParams:{authConnection:at,authConnectionId:me.authConnectionId,groupedAuthConnectionId:me.groupedAuthConnectionId,extraLoginOptions:me.extraLoginOptions,name:Ae,login_hint:""},order:Ce})}),U(et),H(ot),L(We.length>4)},[o,d,B]);const it=async(We,et)=>{try{var ot;const jt=Cje(We,{loginHint:et,web3authClientId:e,network:n,uiConfig:o.uiConfig,authConnection:We,authBuildEnv:r}),rt=await((ot=Ze.current)===null||ot===void 0?void 0:ot.execute({async:!0}));if(!rt)throw Pe.connectionError("Captcha token is required");const at=rt.response,Z=await jt.sendVerificationCode({captchaToken:at});if(Z!=null&&Z.error){x(F(Z.error));return}J(We),V(!0),Y(jt)}catch(jt){Te.error(jt)}finally{ae(!1)}},De=async We=>{if(ae(!0),f&&We.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)){const ot=o.loginMethods[$e.EMAIL_PASSWORDLESS];return ot.isDefault?l({connector:o.connector,loginParams:{authConnection:$e.EMAIL_PASSWORDLESS,authConnectionId:ot.authConnectionId,groupedAuthConnectionId:ot.groupedAuthConnectionId,extraLoginOptions:ot.extraLoginOptions,loginHint:We,name:"Email"}}):it($e.EMAIL_PASSWORDLESS,We)}if(p){const et=We.startsWith("+")?We:`${M}${We}`,ot=await $Fe(et);if(ot.success){const jt=typeof ot.parsed_number=="string"?ot.parsed_number:et,rt=o.loginMethods[$e.SMS_PASSWORDLESS];return rt.isDefault?l({connector:o.connector,loginParams:{authConnection:$e.SMS_PASSWORDLESS,authConnectionId:rt.authConnectionId,groupedAuthConnectionId:rt.groupedAuthConnectionId,extraLoginOptions:rt.extraLoginOptions,loginHint:jt,name:"Mobile"}}):(C(ot.country_flag),it($e.SMS_PASSWORDLESS,jt))}}x(mt),ae(!1)},Ke=he.useMemo(()=>F(f&&p?"modal.social.passwordless-title":f?"modal.social.email":"modal.social.phone"),[f,p,F]),Xe=he.useMemo(()=>f&&p?"+(00)123456/name@example.com":f?"name@example.com":"+(00)123456",[f,p]),mt=he.useMemo(()=>F(f&&p?"modal.errors-invalid-number-email":f?"modal.errors-invalid-email":"modal.errors-invalid-number"),[f,p,F]);he.useEffect(()=>{p&&(async()=>{const et=await DFe();et&&et.dialCode&&y(et.dialCode)})()},[p]);const He=We=>{$==null||$.track(Lt.EXTERNAL_WALLET_LIST_EXPANDED,{total_external_wallets:u,installed_external_wallets:It.length}),K(!1),We.preventDefault(),h&&h(!0)},ct=async We=>{oe(!0),O&&S("");try{var et;const jt=o.loginMethods[G],rt=await(z==null?void 0:z.verifyCode(We));if(rt!=null&&rt.error){S(F(rt.error));return}if(rt!=null&&(et=rt.data)!==null&&et!==void 0&&et.id_token){var ot;return l({connector:o.connector,loginParams:{authConnection:G,authConnectionId:jt.authConnectionId,groupedAuthConnectionId:jt.groupedAuthConnectionId,extraLoginOptions:Q(Q({},jt.extraLoginOptions),{},{id_token:(ot=rt.data)===null||ot===void 0?void 0:ot.id_token}),loginHint:z.passwordlessParams.loginHint,name:z.name}})}}catch(jt){Te.error(jt)}finally{oe(!1)}},Vt=We=>{var et;if($==null||$.track(Lt.EXTERNAL_WALLET_SELECTED,{connector:We.name,wallet_name:We.displayName,is_installed:We.isInstalled,is_injected:We.hasInjectedWallet,chain_namespaces:We.chainNamespaces,has_wallet_connect:We.hasWalletConnect,has_install_links:We.hasInstallLinks,has_wallet_registry_item:!!We.walletRegistryItem,total_external_wallets:u}),We.name===Be.METAMASK&&!We.hasInjectedWallet){P(Q(Q({},I),{},{metamaskQrCode:{show:!0,wallet:We}}));return}((et=We.chainNamespaces)===null||et===void 0?void 0:et.length)>1?P(Q(Q({},I),{},{multiChainSelector:{show:!0,wallet:We}})):b({connector:We.name})},It=he.useMemo(()=>N?c:c.filter(We=>We.name===Be.METAMASK),[c,N]);if(q)return ne.jsx(Pje,{otpLoading:ie,loginHint:z==null?void 0:z.passwordlessParams.loginHint,setShowOtpFlow:V,authConnection:G,handleOtpComplete:ct,errorMessage:O,countryFlag:E});const Tt=(We=[])=>ne.jsx(Oje,{otherRow:We,isDark:d,visibleRow:D,canShowMore:k,handleSocialLoginClick:l,socialLoginsConfig:o,handleExpandSocialLogins:je,buttonRadius:B},"social-login-section"),L0=()=>ne.jsx(kje,{isModalVisible:i,isPasswordLessCtaClicked:W,setIsPasswordLessCtaClicked:K,title:Ke,placeholder:Xe,handleFormSubmit:De,errorMessage:g,isDark:d,buttonRadius:B,isPasswordLessLoading:X},"passwordless-section"),ht=()=>ne.jsxs("div",{className:Mt("w3a--flex w3a--w-full w3a--flex-col w3a--items-start w3a--justify-start w3a--gap-y-2"),children:[It.length>0&&It.map(We=>ne.jsxs("button",{type:"button",className:Mt("w3a--btn !w3a--justify-between w3a--group w3a--relative w3a--overflow-hidden",{"w3a--rounded-full":B==="pill","w3a--rounded-lg":B==="rounded","w3a--rounded-none":B==="square"}),onClick:()=>Vt(We),children:[ne.jsx("p",{className:"w3a--max-w-[180px] w3a--truncate w3a--text-base w3a--font-normal w3a--text-app-gray-700 dark:w3a--text-app-white",children:We.displayName}),ne.jsxs("div",{className:"w3a--absolute w3a--right-4 w3a--top-1/2 w3a--flex w3a--w-auto -w3a--translate-y-1/2 w3a--items-center w3a--gap-x-2 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-6 group-hover:w3a--opacity-0",children:[We.hasInjectedWallet&&ne.jsx("span",{className:"w3a--inline-flex w3a--items-center w3a--rounded-md w3a--bg-app-primary-100 w3a--px-2 w3a--py-1 w3a--text-xs w3a--font-medium w3a--text-app-primary-800  dark:w3a--border dark:w3a--border-app-primary-400 dark:w3a--bg-transparent dark:w3a--text-app-primary-400",children:F("modal.external.installed")}),ne.jsx("figure",{className:"w3a--size-5",children:ne.jsx(fi,{imageData:We.icon,imageId:`login-${We.name}`,hoverImageId:`login-${We.name}`,fallbackImageId:"wallet",height:"24",width:"24",isButton:!0,extension:We.imgExtension||"webp"})})]}),ne.jsx("img",{id:"injected-wallet-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(d?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]},We.name)),u>3&&ne.jsxs("button",{type:"button",className:Mt("w3a--btn !w3a--justify-between w3a--group w3a--relative w3a--overflow-hidden",{"w3a--rounded-full":B==="pill","w3a--rounded-lg":B==="rounded","w3a--rounded-none":B==="square"}),onClick:He,children:[ne.jsx("p",{className:"w3a--text-base w3a--font-normal w3a--text-app-gray-900 dark:w3a--text-app-white",children:F("modal.external.all-wallets")}),A&&u>0&&ne.jsx("div",{id:"external-wallet-count",className:"w3a--absolute w3a--right-4 w3a--top-1/2 w3a--w-auto -w3a--translate-y-1/2 w3a--rounded-full w3a--bg-app-primary-100 w3a--px-2.5 w3a--py-0.5 w3a--text-xs w3a--font-medium w3a--text-app-primary-800 w3a--transition-all w3a--delay-300 w3a--duration-300 group-hover:w3a--translate-x-6 group-hover:w3a--opacity-0 group-hover:w3a--delay-0 dark:w3a--border dark:w3a--border-app-primary-500 dark:w3a--bg-transparent dark:w3a--text-app-primary-500",children:u-1}),ne.jsx("img",{id:"external-wallet-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-10 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(d?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})]},"external-wallets-section"),kt=We=>ne.jsxs("div",{className:"w3a--flex w3a--w-full w3a--items-center w3a--gap-x-2",children:[ne.jsx("div",{className:"w3a--h-px w3a--w-full w3a--bg-app-gray-200 dark:w3a--bg-app-gray-500"}),ne.jsx("p",{className:"w3a--text-xs w3a--font-normal w3a--uppercase w3a--text-app-gray-400 dark:w3a--text-app-gray-400",children:"or"}),ne.jsx("div",{className:"w3a--h-px w3a--w-full w3a--bg-app-gray-200 dark:w3a--bg-app-gray-500"})]},`section-delimiter-${We}`),B0=()=>{var We;const et={social:Tt,passwordless:L0,externalWallets:ht},ot={social:v,passwordless:m,externalWallets:T},jt=((We=o.uiConfig)===null||We===void 0?void 0:We.signInMethods)||["social","passwordless","externalWallets"];Object.entries(ot).forEach(([at,Z])=>{Z&&!jt.includes(at)&&jt.push(at)});const rt=jt.map(at=>ot[at]&&et[at]()).filter(Boolean);if(rt.length===3){const at=jt.findIndex(Z=>Z==="externalWallets");at===0?rt.splice(1,0,kt(1)):at===1?(rt.splice(1,0,kt(1)),rt.splice(3,0,kt(2))):at===2&&rt.splice(2,0,kt(1))}else rt.length===2&&ot.externalWallets&&rt.splice(1,0,kt(1));return rt},At=()=>Tt(j),Wt=[cG,oG].includes(a)?"":a;return ne.jsxs("div",{className:"w3a--flex w3a--flex-col w3a--items-center w3a--gap-y-4 w3a--p-2",children:[ne.jsxs("div",{className:Mt("w3a--flex w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2 w3a--pt-6",R==="center"?"":"w3a--w-full"),children:[ne.jsx("figure",{className:Mt("w3a--mx-auto w3a--h-12 w3a--w-[200px]",R==="center"?"w3a--flex w3a--justify-center w3a--items-center":"w3a--ml-0 w3a--w-auto"),children:ne.jsx("img",{src:Wt||kr(d?"logo-w-dark":"logo-w-light"),alt:"Logo",className:"w3a--size-full w3a--object-contain"})}),ne.jsx("p",{className:Mt("w3a--text-lg w3a--font-semibold w3a--text-app-gray-900 dark:w3a--text-app-white",R==="center"?"w3a--text-center":"w3a--text-left w3a--w-full w3a--ml-4"),children:F("modal.social.sign-in")})]}),ne.jsx(xje,{ref:Ze,sitekey:zBe,size:"invisible",languageOverride:o.uiConfig.defaultLanguage,theme:o.uiConfig.theme,onOpen:()=>Oe(!0),onClose:()=>Oe(!1),onError:()=>pe("passwordless.captcha-default-error"),onChalExpired:()=>pe("passwordless.captcha-default-error")}),Re&&ue&&ne.jsx("p",{className:"-w3a--mt-2 w3a--w-full w3a--pl-6 w3a--text-start w3a--text-xs w3a--font-normal w3a--text-app-red-500 dark:w3a--text-app-red-400",children:F(Re)}),!ue&&ne.jsxs("div",{className:"w3a--flex w3a--w-full w3a--flex-col w3a--items-center w3a--justify-center w3a--gap-y-2",children:[!w&&B0(),w&&At()]})]})}const Dje=()=>{const{toast:t,setToast:e}=he.useContext(wh);if(he.useEffect(()=>{t.message&&setTimeout(()=>{e({message:"",type:Z8.SUCCESS})},3e3)},[t.message,e]),!t.message)return null;const n={success:"w3a--border-app-green-200 w3a--bg-app-green-100 w3a--text-app-green-900",error:"w3a--border-app-red-200 w3a--bg-app-red-100 w3a--text-app-red-900",warning:"w3a--border-app-yellow-200 w3a--bg-app-yellow-100 w3a--text-app-yellow-900",info:"w3a--border-app-blue-200 w3a--bg-app-blue-100 w3a--text-app-blue-900"},r={success:"w3a--text-app-green-900",error:"w3a--text-app-red-900",warning:"w3a--text-app-yellow-900",info:"w3a--text-app-blue-900"};return ne.jsxs("div",{className:`w3a--absolute w3a--inset-x-4 w3a--bottom-4 w3a--z-[60] w3a--mx-auto w3a--w-[90%] w3a--rounded-md w3a--border w3a--p-4 w3a--text-sm ${n[t.type]}`,children:[ne.jsx("div",{className:"w3a--absolute w3a--right-4 w3a--top-4 w3a--z-10 w3a--cursor-pointer",children:ne.jsx("svg",{width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>e({message:"",type:Z8.SUCCESS}),className:r[t.type],children:ne.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.292787 1.29299C0.480314 1.10552 0.734622 1.0002 0.999786 1.0002C1.26495 1.0002 1.51926 1.10552 1.70679 1.29299L5.99979 5.58599L10.2928 1.29299C10.385 1.19748 10.4954 1.1213 10.6174 1.06889C10.7394 1.01648 10.8706 0.988893 11.0034 0.987739C11.1362 0.986585 11.2678 1.01189 11.3907 1.06217C11.5136 1.11245 11.6253 1.1867 11.7192 1.28059C11.8131 1.37449 11.8873 1.48614 11.9376 1.60904C11.9879 1.73193 12.0132 1.86361 12.012 1.99639C12.0109 2.12917 11.9833 2.26039 11.9309 2.38239C11.8785 2.5044 11.8023 2.61474 11.7068 2.70699L7.41379 6.99999L11.7068 11.293C11.8889 11.4816 11.9897 11.7342 11.9875 11.9964C11.9852 12.2586 11.88 12.5094 11.6946 12.6948C11.5092 12.8802 11.2584 12.9854 10.9962 12.9877C10.734 12.9899 10.4814 12.8891 10.2928 12.707L5.99979 8.41399L1.70679 12.707C1.51818 12.8891 1.26558 12.9899 1.00339 12.9877C0.741188 12.9854 0.490376 12.8802 0.304968 12.6948C0.11956 12.5094 0.0143906 12.2586 0.0121121 11.9964C0.00983372 11.7342 0.110629 11.4816 0.292787 11.293L4.58579 6.99999L0.292787 2.70699C0.105316 2.51946 0 2.26515 0 1.99999C0 1.73483 0.105316 1.48052 0.292787 1.29299V1.29299Z",fill:"currentColor"})})}),ne.jsxs("div",{className:"w3a--flex w3a--items-center w3a--gap-2",children:[ne.jsx("p",{className:r[t.type],children:"x"}),ne.jsx("p",{children:t.message})]})]})};function pR(t){var e,n,r,a,i,s,o;const{setModalState:c,modalState:d,handleExternalWalletBtnClick:l,chainNamespaces:u,walletRegistry:f,appLogo:p,onCloseLoader:h,handleSocialLoginClick:b,showPasswordLessInput:v,showExternalWalletButton:m,socialLoginsConfig:T,areSocialLoginsVisible:A,isEmailPrimary:N,isExternalPrimary:R,showExternalWalletPage:B,isEmailPasswordLessLoginVisible:F,isSmsPasswordLessLoginVisible:I,preHandleExternalWalletClick:P,uiConfig:$}=t,{logoAlignment:M="center",buttonRadiusType:y="pill",privacyPolicy:E="",tncLink:C="",displayInstalledExternalWallets:g=!0,displayExternalWalletsCount:x=!0}=$,[O]=Br(void 0,{i18n:Ot}),{isDark:S}=he.useContext(cm),[w,_]=he.useState({metamaskQrCode:{show:!1,wallet:null},installLinks:{show:!1,wallet:null},multiChainSelector:{show:!1,wallet:null}}),[k,L]=he.useState({message:"",type:Z8.SUCCESS}),[D,U]=he.useState(!1),[j,H]=he.useState(!1),W=De=>{c(Q(Q({},d),{},{currentPage:V1.CONNECT_WALLET})),l&&l(De)},K=De=>{c(Q(Q({},d),{},{currentPage:V1.LOGIN})),l&&l(De)},q=he.useMemo(()=>{if(typeof window>"u")return{platform:"mobile",browser:"chrome",os:"ios"};const De=zf.getParser(window.navigator.userAgent);return{platform:De.getPlatformType(),browser:De.getBrowserName().toLowerCase(),os:De.getOSName()}},[]),V=he.useMemo(()=>{var De;if(q.platform==="desktop")return[];const Ke=((De=w.installLinks)===null||De===void 0||(De=De.wallet)===null||De===void 0||(De=De.walletRegistryItem)===null||De===void 0?void 0:De.app)||{};return Object.keys(Ke).reduce((mt,He)=>{if(!["android","ios"].includes(He))return mt;const ct=Ke[He];if(!ct)return mt;const Vt=kFe(He,ct);if(!Vt)return mt;const It=`${He}-light`,Tt=`${He}-dark`;return mt.push(ne.jsx("li",{className:"w3a--w-full",children:ne.jsx("a",{href:Vt,rel:"noopener noreferrer",target:"_blank",children:ne.jsxs("button",{type:"button",className:Mt("w3a--group w3a--relative w3a--overflow-hidden w3a--h-11 w3a--flex w3a--w-full w3a--items-center w3a--justify-start w3a--gap-x-2 w3a--border w3a--border-app-gray-200 w3a--bg-app-gray-50 w3a--px-5 w3a--py-2.5 hover:w3a--translate-y-[0.5px] hover:w3a--border-app-gray-50 dark:w3a--border-app-gray-500 dark:w3a--bg-app-gray-800 dark:hover:w3a--border-app-gray-800",{"w3a--rounded-full":y==="pill","w3a--rounded-lg":y==="rounded","w3a--rounded-none":y==="square"}),children:[ne.jsx(fi,{imageId:It,darkImageId:Tt,hoverImageId:It,darkHoverImageId:Tt,height:"28",width:"28",isButton:!0}),ne.jsx("span",{className:"w3a--text-sm w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:O("modal.external.install-mobile-app",{os:NFe(He)})}),ne.jsx("img",{id:"install-links-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(S?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})})},Vt)),mt},[])},[(e=w.installLinks)===null||e===void 0||(e=e.wallet)===null||e===void 0||(e=e.walletRegistryItem)===null||e===void 0?void 0:e.app,q.platform,S,O,y]),G=he.useMemo(()=>{var De;if(q.platform!=="desktop")return[];const Ke=q.browser==="brave"?"chrome":q.browser,Xe=((De=w.installLinks)===null||De===void 0||(De=De.wallet)===null||De===void 0||(De=De.walletRegistryItem)===null||De===void 0?void 0:De.app)||{},mt=Xe.browser&&Xe.browser.includes(Ke)?Xe.browser:void 0,He=Xe[Ke]||mt,ct=He?PFe(Ke,He):null;return[ct?ne.jsx("li",{children:ne.jsx("a",{href:ct,rel:"noopener noreferrer",target:"_blank",children:ne.jsxs("button",{type:"button",className:Mt("w3a--group w3a--relative w3a--overflow-hidden w3a--h-11 w3a--flex w3a--w-full w3a--items-center w3a--justify-start w3a--gap-x-2 w3a--border w3a--border-app-gray-200 w3a--bg-app-gray-50 w3a--px-5 w3a--py-2.5 hover:w3a--translate-y-[0.5px] hover:w3a--border-app-gray-50 dark:w3a--border-app-gray-500 dark:w3a--bg-app-gray-800 dark:hover:w3a--border-app-gray-800",{"w3a--rounded-full":y==="pill","w3a--rounded-lg":y==="rounded","w3a--rounded-none":y==="square"}),children:[ne.jsx(fi,{imageId:q.browser,darkImageId:q.browser,hoverImageId:q.browser,darkHoverImageId:q.browser,height:"30",width:"30",isButton:!0}),ne.jsx("span",{className:"w3a--text-sm w3a--font-medium w3a--text-app-gray-900 dark:w3a--text-app-white",children:O("modal.external.install-browser-extension",{browser:RFe(q.browser)})}),ne.jsx("img",{id:"install-links-arrow",className:"w3a--absolute w3a--right-4 w3a--top-1/2 -w3a--translate-x-6 -w3a--translate-y-1/2 w3a--opacity-0 w3a--transition-all w3a--duration-300 group-hover:w3a--translate-x-0 group-hover:w3a--opacity-100",src:kr(S?"chevron-right-dark":"chevron-right-light"),alt:"arrow"})]})})},ct):null,...V]},[(n=w.installLinks)===null||n===void 0||(n=n.wallet)===null||n===void 0||(n=n.walletRegistryItem)===null||n===void 0?void 0:n.app,q.browser,q.platform,S,V,y,O]),J=he.useMemo(()=>d.externalWalletsConfig,[d.externalWalletsConfig]),z=he.useMemo(()=>{const De={};return Object.keys(J).forEach(Ke=>{var Xe;De[Ke]=!!(!((Xe=J[Ke])===null||Xe===void 0)&&Xe.showOnModal)}),De},[J]),Y=he.useMemo(()=>Object.keys((f==null?void 0:f.default)||{}).length>0||Object.keys((f==null?void 0:f.others)||{}).length>0,[f]),X=he.useCallback(De=>Object.keys(De).reduce((Ke,Xe)=>{var mt,He,ct;if(z[Xe]===!1)return Ke;const Vt=De[Xe];let It="";if(q.platform!=="desktop"){var Tt,L0;const et=Vt==null||(Tt=Vt.mobile)===null||Tt===void 0?void 0:Tt.universal,ot=Vt==null||(L0=Vt.mobile)===null||L0===void 0?void 0:L0.native;It=et||ot}const ht=J[Xe],kt=(ht==null?void 0:ht.chainNamespaces)||[],B0=new Set((mt=Vt.chains)===null||mt===void 0?void 0:mt.map(et=>et.split(":")[0])),At=new Set((He=Vt.injected)===null||He===void 0?void 0:He.map(et=>et.namespace)),Wt=u.filter(et=>B0.has(et)||At.has(et)||kt.includes(et)),We={name:Xe,displayName:Vt.name,href:It,hasInjectedWallet:(ht==null?void 0:ht.isInjected)||!1,isInstalled:!!ht,hasWalletConnect:Y&&((ct=Vt.walletConnect)===null||ct===void 0||(ct=ct.sdks)===null||ct===void 0?void 0:ct.includes("sign_v2")),hasInstallLinks:Object.keys(Vt.app||{}).length>0,walletRegistryItem:Vt,imgExtension:Vt.imgExtension||"svg",icon:ht==null?void 0:ht.icon,chainNamespaces:Wt};return!We.hasInjectedWallet&&!We.hasWalletConnect&&!We.hasInstallLinks||Wt.length===0||Ke.push(We),Ke},[]),[z,u,J,q.platform,Y]),ae=he.useMemo(()=>[...X(f.default),...X(f.others)],[X,f.default,f.others]),ie=he.useMemo(()=>{const De=Object.keys(J).reduce((Xe,mt)=>{if(mt===Be.WALLET_CONNECT_V2||!z[mt])return Xe;const He=J[mt];return Xe.push({name:mt,displayName:(He==null?void 0:He.label)||mt,hasInjectedWallet:(He==null?void 0:He.isInjected)||!1,isInstalled:!0,hasWalletConnect:!1,hasInstallLinks:!1,icon:He==null?void 0:He.icon,chainNamespaces:(He==null?void 0:He.chainNamespaces)||[]}),Xe},[]),Ke=De.findIndex(Xe=>Xe.name===Be.METAMASK&&!Xe.hasInjectedWallet);if(Ke!==-1){const Xe=De[Ke];let mt=ae.find(He=>He.name===Be.METAMASK);mt||(mt=X({[Be.METAMASK]:JBe})[0]),mt&&De.splice(Ke,1,Q(Q({},mt),{},{chainNamespaces:Xe.chainNamespaces,isInstalled:!0}))}return De},[ae,J,z,X]),oe=he.useMemo(()=>ie.filter(De=>!De.hasInjectedWallet),[ie]),ue=he.useMemo(()=>ie.sort((Ke,Xe)=>Ke.name===Be.METAMASK?-1:1).slice(0,g?3:1),[ie,g]),Oe=he.useMemo(()=>{const De=new Set;return ae.concat(ie).filter(Ke=>De.has(Ke.name)?!1:(De.add(Ke.name),!0)).length},[ae,ie]),Re=()=>{U(De=>!De)},pe=()=>{H(De=>!De)},Ze=he.useMemo(()=>{var De;const Ke=E||C;if(d.status!==Un.INITIALIZED)return"530px";if(j||(De=w.metamaskQrCode)!==null&&De!==void 0&&De.show)return Ke?"640px":"588px";if(d.currentPage===V1.CONNECT_WALLET)return Ke?"640px":"580px";if(D)return Ke?"644px":"588px";if(ue.length===1)return Ke?"560px":"530px";if(ue.length>1){const Xe=500+(ue.length-1)*58;return Ke?`${Xe+60}px`:`${Xe+16}px`}return"539px"},[E,C,d.status,d.currentPage,j,(r=w.metamaskQrCode)===null||r===void 0?void 0:r.show,D,ue.length]),je=he.useMemo(()=>({bodyState:w,setBodyState:_,toast:k,setToast:L}),[w,_,k,L]),it=he.useMemo(()=>d.detailedLoaderConnector===Be.METAMASK&&d.metamaskConnectUri?!1:d.status!==Un.INITIALIZED,[d.detailedLoaderConnector,d.metamaskConnectUri,d.status]);return ne.jsx(wh.Provider,{value:je,children:ne.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-col",children:[ne.jsxs("div",{className:"w3a--relative w3a--h-screen w3a--overflow-hidden w3a--transition-all w3a--duration-[400ms] w3a--ease-in-out",style:{maxHeight:Ze},children:[ne.jsx("div",{className:"w3a--modal-curtain"}),ne.jsxs("div",{className:"w3a--relative w3a--flex w3a--h-full w3a--flex-1 w3a--flex-col w3a--p-6",children:[it?ne.jsx(VUe,{connector:d.detailedLoaderConnector,connectorName:d.detailedLoaderConnectorName,modalStatus:d.status,onClose:h,appLogo:p}):ne.jsx(ne.Fragment,{children:(a=w.metamaskQrCode)!==null&&a!==void 0&&a.show?ne.jsxs("div",{className:"w3a--relative w3a--flex w3a--flex-1 w3a--flex-col w3a--gap-y-4",children:[ne.jsx(OG,{onBackClick:()=>_(Q(Q({},w),{},{metamaskQrCode:{show:!1,wallet:null}})),currentPage:dd.SELECTED_WALLET,selectedButton:w.metamaskQrCode.wallet}),ne.jsx(NG,{qrCodeValue:d.metamaskConnectUri,isDark:S,selectedButton:w.metamaskQrCode.wallet,primaryColor:(i=w.metamaskQrCode.wallet.walletRegistryItem)===null||i===void 0?void 0:i.primaryColor,logoImage:`https://images.web3auth.io/login-${w.metamaskQrCode.wallet.name}.${w.metamaskQrCode.wallet.imgExtension}`})]}):ne.jsxs(ne.Fragment,{children:[d.currentPage===V1.LOGIN&&B&&d.status===Un.INITIALIZED&&ne.jsx(Rje,{web3authClientId:d.web3authClientId,web3authNetwork:d.web3authNetwork,authBuildEnv:d.authBuildEnv,isModalVisible:d.modalVisibility,isDark:S,appLogo:p,showPasswordLessInput:v,showExternalWalletButton:m,showExternalWalletCount:x,showInstalledExternalWallets:g,socialLoginsConfig:T,areSocialLoginsVisible:A,isEmailPrimary:N,isExternalPrimary:R,installedExternalWalletConfig:ue,isEmailPasswordLessLoginVisible:F,isSmsPasswordLessLoginVisible:I,totalExternalWallets:Oe,logoAlignment:M,buttonRadius:y,handleSocialLoginClick:b,handleExternalWalletBtnClick:W,handleSocialLoginHeight:Re,handleExternalWalletClick:P}),d.currentPage===V1.CONNECT_WALLET&&!B&&d.status===Un.INITIALIZED&&ne.jsx(UUe,{isDark:S,walletConnectUri:d.walletConnectUri,metamaskConnectUri:d.metamaskConnectUri,config:d.externalWalletsConfig,walletRegistry:f,allExternalButtons:ae,connectorVisibilityMap:z,customConnectorButtons:oe,deviceDetails:{platform:q.platform,browser:q.browser,os:q.os},chainNamespace:u,buttonRadius:y,handleWalletDetailsHeight:pe,onBackClick:K,handleExternalWalletClick:P})]})}),ne.jsx(HUe,{privacyPolicy:E,termsOfService:C}),((s=w.multiChainSelector)===null||s===void 0?void 0:s.show)&&ne.jsx(sR,{uiConfig:$,isShown:w.multiChainSelector.show,onClose:()=>_(Q(Q({},w),{},{multiChainSelector:{show:!1,wallet:null}})),children:ne.jsx(jUe,{isDark:S,wallet:w.multiChainSelector.wallet,handleExternalWalletClick:De=>{P(De),_(Q(Q({},w),{},{multiChainSelector:{show:!1,wallet:null}}))}})}),((o=w.installLinks)===null||o===void 0?void 0:o.show)&&ne.jsxs(sR,{uiConfig:$,isShown:w.installLinks.show,onClose:()=>_(Q(Q({},w),{},{installLinks:{show:!1,wallet:null}})),children:[ne.jsx("p",{className:"w3a--mb-2 w3a--text-center w3a--text-base w3a--font-semibold w3a--text-app-gray-900 dark:w3a--text-app-white",children:O("modal.getWallet")}),ne.jsx("div",{className:"w3a--my-4 w3a--flex w3a--justify-center",children:ne.jsx(fi,{imageId:`login-${w.installLinks.wallet.name}`,hoverImageId:`login-${w.installLinks.wallet.name}`,fallbackImageId:"wallet",height:"80",width:"80",isButton:!0,extension:w.installLinks.wallet.imgExtension})}),ne.jsx("ul",{className:"w3a--flex w3a--flex-col w3a--gap-y-2",children:q.platform==="desktop"?G:V})]})]})]}),ne.jsx(Dje,{})]})})}function $je(t){const{stateListener:e,handleSocialLoginClick:n,handleExternalWalletClick:r,handleShowExternalWallets:a,closeModal:i,appLogo:s,appName:o,chainNamespaces:c,walletRegistry:d,uiConfig:l}=t,{widgetType:u}=l,f=he.useMemo(()=>u===Z1.EMBED,[u]),[p,h]=he.useState({externalWalletsVisibility:!1,status:Un.INITIALIZED,hasExternalWallets:!1,externalWalletsInitialized:!1,modalVisibility:!1,modalVisibilityDelayed:!1,postLoadingMessage:"",walletConnectUri:"",metamaskConnectUri:"",socialLoginsConfig:{loginMethods:{},loginMethodsOrder:[],connector:"",uiConfig:{}},externalWalletsConfig:{},showExternalWalletsOnly:!1,currentPage:V1.LOGIN,detailedLoaderConnector:"",detailedLoaderConnectorName:"",web3authClientId:"",web3authNetwork:_Be.SAPPHIRE_MAINNET,authBuildEnv:i6.PRODUCTION});he.useEffect(()=>{h(E=>Q(Q({},E),{},{modalVisibility:f}))},[f]),he.useEffect(()=>{e.on("STATE_UPDATED",E=>{Te.debug("state updated",E),h(C=>Zc(Kt(C,E,{arrayMerge:(x,O)=>O})))}),e.emit("MOUNTED")},[e]);const b=E=>{const{connector:C}=E;h(g=>Q(Q({},g),{},{detailedLoaderConnector:C,detailedLoaderAdapterName:O_[C]})),r&&r(E)},v=E=>{const{loginParams:C}=E;h(g=>Q(Q({},g),{},{detailedLoaderConnector:C.authConnection,detailedLoaderConnectorName:C.name})),n(E)},m=he.useMemo(()=>{var E,C;return p.showExternalWalletsOnly||Object.keys(((E=p.socialLoginsConfig)===null||E===void 0?void 0:E.loginMethods)||{}).length===0?!1:Object.entries(((C=p.socialLoginsConfig)===null||C===void 0?void 0:C.loginMethods)||{}).some(([x,O])=>x!==$e.EMAIL_PASSWORDLESS&&O.showOnModal!==!1)},[p]),T=he.useMemo(()=>{var E;return(E=p.socialLoginsConfig)===null||E===void 0||(E=E.loginMethods[$e.EMAIL_PASSWORDLESS])===null||E===void 0?void 0:E.showOnModal},[p.socialLoginsConfig]),A=he.useMemo(()=>{var E;return(E=p.socialLoginsConfig)===null||E===void 0||(E=E.loginMethods[$e.SMS_PASSWORDLESS])===null||E===void 0?void 0:E.showOnModal},[p.socialLoginsConfig]),N=he.useMemo(()=>{var E;return((E=p.socialLoginsConfig)===null||E===void 0||(E=E.uiConfig)===null||E===void 0?void 0:E.primaryButton)==="emailLogin"},[p.socialLoginsConfig]),R=he.useMemo(()=>{var E;return((E=p.socialLoginsConfig)===null||E===void 0||(E=E.uiConfig)===null||E===void 0?void 0:E.primaryButton)==="externalLogin"},[p.socialLoginsConfig]),B=he.useMemo(()=>T||A,[T,A]),F=he.useMemo(()=>p.hasExternalWallets,[p]),I=he.useMemo(()=>(m||B)&&!p.externalWalletsVisibility,[m,B,p.externalWalletsVisibility]),P=E=>{h(C=>Q(Q({},C),{},{externalWalletsVisibility:E})),E&&a&&a(p.externalWalletsInitialized)},$=()=>{h(E=>Q(Q({},E),{},{externalWalletsVisibility:!1,modalVisibility:!1,currentPage:V1.LOGIN})),i()},M=()=>{p.status===Un.CONNECTED&&h(Q(Q({},p),{},{modalVisibility:!1,externalWalletsVisibility:!1})),p.status===Un.ERRORED&&h(Q(Q({},p),{},{modalVisibility:!0,status:Un.INITIALIZED}))},y=he.useMemo(()=>p.status===Un.INITIALIZED||p.status===Un.CONNECTED||p.status===Un.ERRORED,[p.status]);return he.useEffect(()=>{if(p.modalVisibility&&typeof p.externalWalletsConfig=="object"){var E,C;(((E=p.externalWalletsConfig[Be.WALLET_CONNECT_V2])===null||E===void 0?void 0:E.showOnModal)||!1)!==!1&&!p.walletConnectUri&&typeof r=="function"&&r({connector:Be.WALLET_CONNECT_V2}),p.externalWalletsConfig[Be.METAMASK]&&!((C=p.externalWalletsConfig[Be.METAMASK])!==null&&C!==void 0&&C.isInjected)&&!p.metamaskConnectUri&&typeof r=="function"&&r({connector:Be.METAMASK})}},[p,r]),u===Z1.MODAL?ne.jsx(UFe,{open:p.modalVisibility,placement:"center",padding:!1,showCloseIcon:y,onClose:$,borderRadius:l.borderRadiusType,children:p.modalVisibility&&ne.jsx(pR,{appLogo:s,appName:o,chainNamespaces:c,walletRegistry:d,showPasswordLessInput:B,showExternalWalletButton:F,handleSocialLoginClick:E=>v(E),socialLoginsConfig:p.socialLoginsConfig,areSocialLoginsVisible:m,isEmailPrimary:N,isExternalPrimary:R,showExternalWalletPage:I,handleExternalWalletBtnClick:P,modalState:p,preHandleExternalWalletClick:b,setModalState:h,onCloseLoader:M,isEmailPasswordLessLoginVisible:T,isSmsPasswordLessLoginVisible:A,uiConfig:l})}):ne.jsx(FFe,{open:p.modalVisibility,padding:!1,onClose:$,borderRadius:l.borderRadiusType,children:p.modalVisibility&&ne.jsx(pR,{chainNamespaces:c,walletRegistry:d,appLogo:s,appName:o,showPasswordLessInput:B,showExternalWalletButton:F,handleSocialLoginClick:E=>v(E),socialLoginsConfig:p.socialLoginsConfig,areSocialLoginsVisible:m,isEmailPrimary:N,isExternalPrimary:R,showExternalWalletPage:I,handleExternalWalletBtnClick:P,modalState:p,preHandleExternalWalletClick:b,setModalState:h,onCloseLoader:M,isEmailPasswordLessLoginVisible:T,isSmsPasswordLessLoginVisible:A,uiConfig:l})})}function Lje(t){const e=document.getElementById("w3a-parent-container");e&&e.remove();const n=document.createElement("section");n.classList.add("w3a-parent-container"),n.setAttribute("id","w3a-parent-container"),n.style.zIndex=t,n.style.position="relative",document.body.appendChild(n)}function Bje(t){const e=document.getElementById(t);if(!e){Te.error(`Element with ID ${t} not found`);return}e.innerHTML='<div id="w3a-parent-container" class="w3a-parent-container"></div>'}class Fje{constructor(e,n){if(re(this,"uiConfig",void 0),re(this,"stateEmitter",void 0),re(this,"chainNamespaces",void 0),re(this,"walletRegistry",void 0),re(this,"callbacks",void 0),re(this,"externalWalletsConfig",void 0),re(this,"analytics",void 0),re(this,"initModal",async()=>{const r={isDark:this.isDark},a=this.uiConfig.defaultLanguage||Ja.en;return a===Ja.de?xt(()=>import("./german.json-D3NcWB4O.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.ja?xt(()=>import("./japanese.json-BHhGfXcW.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.ko?xt(()=>import("./korean.json-C2KM96vi.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.zh?xt(()=>import("./mandarin.json-awpnuNya.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.es?xt(()=>import("./spanish.json-DW8nOEQO.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.fr?xt(()=>import("./french.json-CY6J1k7n.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.pt?xt(()=>import("./portuguese.json-0Sw2olgq.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.nl?xt(()=>import("./dutch.json-CuqQFWo0.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.tr?xt(()=>import("./turkish.json-DglBbt0F.js"),[]).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}):a===Ja.en&&xt(()=>Promise.resolve().then(()=>_Ue),void 0).then(i=>(Ot.addResourceBundle(a,"translation",i.default),Ot.changeLanguage(a))).catch(i=>{Te.error(i)}),new Promise(i=>{var s,o,c;if(this.stateEmitter.once("MOUNTED",()=>(Te.info("rendered"),this.setState({status:Un.INITIALIZED,web3authClientId:this.uiConfig.web3authClientId,web3authNetwork:this.uiConfig.web3authNetwork,authBuildEnv:this.uiConfig.authBuildEnv}),i())),this.uiConfig.widgetType===Z1.MODAL)Lje(this.uiConfig.modalZIndex);else if(this.uiConfig.widgetType===Z1.EMBED)Bje(this.uiConfig.targetId);else throw Me.invalidParams(`Invalid widget type: ${this.uiConfig.widgetType}`);const d=document.getElementById("w3a-parent-container");r.isDark?d.classList.add("w3a--dark"):d.classList.remove("w3a--dark"),bY(d).render(ne.jsx(cm.Provider,{value:r,children:ne.jsx(iS.Provider,{value:{analytics:this.analytics},children:ne.jsx($je,{stateListener:this.stateEmitter,appLogo:r.isDark?this.uiConfig.logoDark:this.uiConfig.logoLight,appName:this.uiConfig.appName,chainNamespaces:this.chainNamespaces,walletRegistry:this.walletRegistry,handleShowExternalWallets:this.handleShowExternalWallets,handleExternalWalletClick:this.handleExternalWalletClick,handleSocialLoginClick:this.handleSocialLoginClick,closeModal:this.closeModal,uiConfig:this.uiConfig})})}));const u=((s=this.uiConfig)===null||s===void 0||(s=s.theme)===null||s===void 0?void 0:s.primary)===GBe&&((o=this.uiConfig.theme)===null||o===void 0?void 0:o.onPrimary)===YBe;if((c=this.uiConfig)!==null&&c!==void 0&&c.theme&&!u){const f=document.getElementById("w3a-parent-container");FBe(f,this.uiConfig.theme)}})}),re(this,"addSocialLogins",(r,a,i,s)=>{this.setState({socialLoginsConfig:{connector:r,loginMethods:a,loginMethodsOrder:i,uiConfig:s}}),Te.info("addSocialLogins",r,a,i,s)}),re(this,"addWalletLogins",(r,a)=>{this.externalWalletsConfig=r,this.setState({externalWalletsConfig:r,externalWalletsInitialized:!!a.externalWalletsInitialized,showExternalWalletsOnly:!!a.showExternalWalletsOnly,externalWalletsVisibility:!!a.externalWalletsVisibility})}),re(this,"open",()=>{var r,a,i;this.setState({modalVisibility:!0}),(r=this.analytics)===null||r===void 0||r.track(Lt.LOGIN_MODAL_OPENED,Q(Q({chain_namespaces:this.chainNamespaces,wallet_registry_count:Object.keys((a=this.walletRegistry)===null||a===void 0?void 0:a.default).length+Object.keys((i=this.walletRegistry)===null||i===void 0?void 0:i.others).length,external_wallet_connectors:Object.keys(this.externalWalletsConfig||{})},A_(this.uiConfig)),VBe(this.uiConfig))),this.callbacks.onModalVisibility&&this.callbacks.onModalVisibility(!0)}),re(this,"closeModal",()=>{var r;this.setState({modalVisibility:!1,externalWalletsVisibility:!1}),(r=this.analytics)===null||r===void 0||r.track(Lt.LOGIN_MODAL_CLOSED),this.callbacks.onModalVisibility&&this.callbacks.onModalVisibility(!1)}),re(this,"initExternalWalletContainer",()=>{this.setState({hasExternalWallets:!0})}),re(this,"handleShowExternalWallets",r=>{this.callbacks.onInitExternalWallets&&this.callbacks.onInitExternalWallets({externalWalletsInitialized:r})}),re(this,"handleExternalWalletClick",r=>{Te.info("external wallet clicked",r);const{connector:a,chainNamespace:i}=r;this.callbacks.onExternalWalletLogin&&this.callbacks.onExternalWalletLogin({connector:a,loginParams:{chainNamespace:i}})}),re(this,"handleSocialLoginClick",r=>{var a;Te.info("social login clicked",r);const{connector:i,loginParams:s}=r;(a=this.analytics)===null||a===void 0||a.track(Lt.SOCIAL_LOGIN_SELECTED,{connector:i,auth_connection:s.authConnection,auth_connection_id:s.authConnectionId,group_auth_connection_id:s.groupedAuthConnectionId}),this.callbacks.onSocialLogin&&this.callbacks.onSocialLogin({connector:i,loginParams:s})}),re(this,"setState",r=>{this.stateEmitter.emit("STATE_UPDATED",r)}),re(this,"handleConnectorData",r=>{if(r.connectorName===Be.WALLET_CONNECT_V2){const a=r.data;a.uri&&this.setState({walletConnectUri:a.uri})}if(r.connectorName===Be.METAMASK){const a=r.data;a.uri&&this.setState({metamaskConnectUri:a.uri})}}),re(this,"subscribeCoreEvents",r=>{r.on(Ue.CONNECTING,a=>{var i;if(Te.info("connecting with connector",a),(a==null?void 0:a.connector)===Be.WALLET_CONNECT_V2)return;const s=(i=this.externalWalletsConfig)===null||i===void 0||(i=i[Be.METAMASK])===null||i===void 0?void 0:i.isInjected;(a==null?void 0:a.connector)===Be.METAMASK&&!s||this.setState({status:Un.CONNECTING})}),r.on(Ue.CONNECTED,a=>{Te.debug("connected with connector",a),!a.reconnected&&a.loginMode===F6.MODAL?this.setState({status:Un.CONNECTED,modalVisibility:!0,postLoadingMessage:"modal.post-loading.connected"}):this.setState({status:Un.CONNECTED})}),r.on(Ue.ERRORED,(a,i)=>{Te.error("error",a,a.message),i!==F6.NO_MODAL&&(a.code===5e3?this.uiConfig.displayErrorsOnModal?this.setState({modalVisibility:!0,postLoadingMessage:a.message||"modal.post-loading.something-wrong",status:Un.ERRORED}):this.setState({modalVisibility:!1}):this.setState({modalVisibility:!0,status:Un.INITIALIZED}))}),r.on(Ue.DISCONNECTED,()=>{this.setState({status:Un.INITIALIZED,externalWalletsVisibility:!1})}),r.on(Ue.CONNECTOR_DATA_UPDATED,a=>{this.handleConnectorData(a)})}),this.uiConfig=e,e.logoDark||(this.uiConfig.logoDark=cG),e.logoLight||(this.uiConfig.logoLight=oG),e.mode||(this.uiConfig.mode="light"),e.modalZIndex||(this.uiConfig.modalZIndex="99998"),typeof e.displayErrorsOnModal>"u"&&(this.uiConfig.displayErrorsOnModal=!0),e.appName||(this.uiConfig.appName="Web3Auth"),e.loginGridCol||(this.uiConfig.loginGridCol=3),e.primaryButton||(this.uiConfig.primaryButton="socialLogin"),e.defaultLanguage||(this.uiConfig.defaultLanguage=vG(e.defaultLanguage)),e.widgetType||(this.uiConfig.widgetType=Z1.MODAL),e.widgetType===Z1.EMBED&&!e.targetId)throw Te.error("targetId is required for embed widget"),Me.invalidParams("targetId is required for embed widget");this.stateEmitter=new SBe,this.chainNamespaces=e.chainNamespaces,this.walletRegistry=e.walletRegistry,this.callbacks=n,this.analytics=e.analytics,this.subscribeCoreEvents(this.uiConfig.connectorListener)}get isDark(){return this.uiConfig.mode==="dark"||this.uiConfig.mode==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches}}class Uje extends Aj{constructor(e,n){super(e,n),re(this,"loginModal",void 0),re(this,"options",void 0),re(this,"modalConfig",Zc(QW)),re(this,"onInitExternalWallets",async r=>{r.externalWalletsInitialized||await this.initExternalConnectors(this.connectors.filter(a=>a.name===Be.WALLET_CONNECT_V2),{externalWalletsInitialized:!0,externalWalletsVisibility:!0})}),re(this,"onSocialLogin",async r=>{try{await this.connectTo(Be.AUTH,r.loginParams,F6.MODAL)}catch(a){Te.error(`Error while connecting to connector: ${r.connector}`,a)}}),re(this,"onExternalWalletLogin",async r=>{try{var a;const i=this.getConnector(r.connector,(a=r.loginParams)===null||a===void 0?void 0:a.chainNamespace);if(i.name===Be.WALLET_CONNECT_V2||i.name===Be.METAMASK&&!i.isInjected){const o=this.getInitialChainIdForConnector(i);await i.connect({chainId:o.chainId})}else await this.connectTo(r.connector,r.loginParams,F6.MODAL)}catch(i){Te.error(`Error while connecting to connector: ${r.connector}`,i)}}),re(this,"onModalVisibility",async r=>{Te.debug("is login modal visible",r),this.emit(Pb.MODAL_VISIBILITY,r);const a=this.getConnector(Be.WALLET_CONNECT_V2);if(a){const s=a==null?void 0:a.status;if(Te.debug("trying refreshing wc session",r,s),r&&(s===ge.READY||s===ge.CONNECTING)){Te.debug("refreshing wc session");try{const o=this.getInitialChainIdForConnector(a);a.connect({chainId:o.chainId})}catch(o){Te.error("Error while disconnecting to wallet connect in core",o)}}!r&&this.status===ge.CONNECTED&&(s===ge.READY||s===ge.CONNECTING)&&(Te.debug("this stops wc connector from trying to reconnect once proposal expires"),a.status=ge.READY)}const i=this.getConnector(Be.METAMASK);if(i&&!i.isInjected){const s=i==null?void 0:i.status;if(Te.debug("trying refreshing MM session",r,s),r&&(s===ge.READY||s===ge.CONNECTING)){Te.debug("refreshing MM session");try{const o=this.getInitialChainIdForConnector(i);i.connect({chainId:o.chainId})}catch(o){Te.error("Error while connecting to MM",o)}}!r&&this.status===ge.CONNECTED&&(s===ge.READY||s===ge.CONNECTING)&&(Te.debug("this stops MM connector from trying to reconnect once proposal expires"),i.status=ge.READY)}}),re(this,"getChainNamespaces",()=>{var r;return[...new Set(((r=this.coreOptions.chains)===null||r===void 0?void 0:r.map(a=>a.chainNamespace))||[])]}),this.options=Q({},e),this.options.uiConfig||(this.options.uiConfig={}),this.options.modalConfig&&(this.modalConfig=this.options.modalConfig),Te.info("modalConfig",this.modalConfig)}async init(e){const n=Date.now();this.analytics.init(),this.analytics.identify(this.options.clientId,{web3auth_client_id:this.options.clientId,web3auth_network:this.options.web3AuthNetwork}),this.analytics.setGlobalProperties({dapp_url:window.location.origin,sdk_name:T_.WEB_MODAL,sdk_version:C_});let r={};try{var a,i;const{signal:s}=e||{};super.checkInitRequirements();const{projectConfig:o,walletRegistry:c}=await this.getProjectAndWalletConfig();this.initUIConfig(o),super.initAccountAbstractionConfig(o),super.initChainsConfig(o),super.initCachedConnectorAndChainId(),super.initWalletServicesConfig(o),r=this.getInitializationTrackData();const{filteredWalletRegistry:d,disabledExternalWallets:l}=this.filterWalletRegistry(c,o);this.loginModal=new Fje(Q(Q({},this.options.uiConfig),{},{connectorListener:this,web3authClientId:this.options.clientId,web3authNetwork:this.options.web3AuthNetwork,authBuildEnv:this.options.authBuildEnv,chainNamespaces:this.getChainNamespaces(),walletRegistry:d,analytics:this.analytics}),{onInitExternalWallets:this.onInitExternalWallets,onSocialLogin:this.onSocialLogin,onExternalWalletLogin:this.onExternalWalletLogin,onModalVisibility:this.onModalVisibility}),await ms(()=>this.loginModal.initModal(),s),await ms(()=>this.setupCommonJRPCProvider(),s),this.on(Ue.CONNECTORS_UPDATED,({connectors:f})=>{ms(()=>this.initConnectors({connectors:f,projectConfig:o,disabledExternalWallets:l}),s,()=>{var h;Te.debug("init aborted"),((h=this.connectors)===null||h===void 0?void 0:h.length)>0&&super.cleanup()})}),await ms(()=>super.loadConnectors({projectConfig:o,modalMode:!0}),s),await ms(()=>super.initPlugins(),s);const u=this.getConnector(Be.AUTH);r=Q(Q({},r),{},{connectors:this.connectors.map(f=>f.name),plugins:Object.keys(this.plugins),auth_ux_mode:(u==null||(a=u.authInstance)===null||a===void 0||(a=a.options)===null||a===void 0?void 0:a.uxMode)||((i=this.coreOptions.uiConfig)===null||i===void 0?void 0:i.uxMode)}),this.analytics.track(Lt.SDK_INITIALIZATION_COMPLETED,Q(Q({},r),{},{duration:Date.now()-n}))}catch(s){if(s instanceof DOMException&&s.name==="AbortError")return;throw this.analytics.track(Lt.SDK_INITIALIZATION_FAILED,Q(Q(Q({},r),H1(s)),{},{duration:Date.now()-n})),Te.error("Failed to initialize modal",s),s}}async connect(){if(!this.loginModal)throw Me.notReady("Login modal is not initialized");return this.connectedConnectorName&&this.status===ge.CONNECTED&&this.provider?this.provider:(this.loginModal.open(),new Promise((e,n)=>{const r=()=>(this.removeListener(Ue.ERRORED,a),this.removeListener(Pb.MODAL_VISIBILITY,i),e(this.provider)),a=s=>(this.removeListener(Ue.CONNECTED,r),this.removeListener(Pb.MODAL_VISIBILITY,i),n(s)),i=s=>{if(!s&&this.status!==ge.CONNECTED)return this.removeListener(Ue.CONNECTED,r),this.removeListener(Ue.ERRORED,a),n(new Error("User closed the modal"))};this.once(Ue.CONNECTED,r),this.once(Ue.ERRORED,a),this.once(Pb.MODAL_VISIBILITY,i)}))}initUIConfig(e){super.initUIConfig(e),this.options.uiConfig=Kt(Zc(e.whitelabel||{}),this.options.uiConfig||{}),this.options.uiConfig.defaultLanguage||(this.options.uiConfig.defaultLanguage=vG(this.options.uiConfig.defaultLanguage)),this.options.uiConfig.mode||(this.options.uiConfig.mode="light"),this.options.uiConfig=Kt(e.loginModal||{},this.options.uiConfig,{arrayMerge:(s,o)=>o});const n=e.embeddedWalletAuth.filter(s=>s.isDefault).map(s=>s.authConnection),r=[...this.options.uiConfig.loginMethodsOrder||[],...n],a=[],i=new Set;for(const s of r)i.has(s)||(i.add(s),a.push(s));this.options.uiConfig.loginMethodsOrder=a}getInitializationTrackData(){var e,n,r,a,i,s,o,c,d,l,u,f,p,h,b,v,m;return Q(Q({},super.getInitializationTrackData()),{},{modal_hide_wallet_discovery:(e=this.modalConfig)===null||e===void 0?void 0:e.hideWalletDiscovery,modal_connectors:Object.keys(((n=this.modalConfig)===null||n===void 0?void 0:n.connectors)||{}),modal_auth_connector_login_methods:Object.keys(((r=this.modalConfig)===null||r===void 0||(r=r.connectors)===null||r===void 0||(r=r[Be.AUTH])===null||r===void 0?void 0:r.loginMethods)||{}),ui_login_methods_order:(a=this.options.uiConfig)===null||a===void 0?void 0:a.loginMethodsOrder,ui_modal_z_index:(i=this.options.uiConfig)===null||i===void 0?void 0:i.modalZIndex,ui_display_errors_on_modal:(s=this.options.uiConfig)===null||s===void 0?void 0:s.displayErrorsOnModal,ui_login_grid_col:(o=this.options.uiConfig)===null||o===void 0?void 0:o.loginGridCol,ui_primary_button:(c=this.options.uiConfig)===null||c===void 0?void 0:c.primaryButton,ui_modal_widget_type:(d=this.options.uiConfig)===null||d===void 0?void 0:d.widgetType,ui_modal_target_id_used:!!(!((l=this.options.uiConfig)===null||l===void 0)&&l.targetId),ui_modal_logo_alignment:(u=this.options.uiConfig)===null||u===void 0?void 0:u.logoAlignment,ui_modal_border_radius_type:(f=this.options.uiConfig)===null||f===void 0?void 0:f.borderRadiusType,ui_modal_button_radius_type:(p=this.options.uiConfig)===null||p===void 0?void 0:p.buttonRadiusType,ui_modal_sign_in_methods:(h=this.options.uiConfig)===null||h===void 0?void 0:h.signInMethods,ui_modal_add_previous_login_hint:(b=this.options.uiConfig)===null||b===void 0?void 0:b.addPreviousLoginHint,ui_modal_display_installed_external_wallets:(v=this.options.uiConfig)===null||v===void 0?void 0:v.displayInstalledExternalWallets,ui_modal_display_external_wallets_count:(m=this.options.uiConfig)===null||m===void 0?void 0:m.displayExternalWalletsCount})}filterWalletRegistry(e,n){const{disableAllRecommendedWallets:r,disableAllOtherWallets:a,disabledWallets:i}=n.externalWalletAuth||{},s=new Set(i||[]);r&&Object.keys(e.default).forEach(c=>s.add(c)),a&&Object.keys(e.others).forEach(c=>s.add(c)),s.delete(Be.METAMASK);const o=Zc(e);return s.forEach(c=>{delete o.default[c],delete o.others[c]}),{disabledExternalWallets:s,filteredWalletRegistry:o}}async getProjectAndWalletConfig(){var e,n;const[r,a]=await Promise.allSettled([x_({clientId:this.options.clientId,web3AuthNetwork:this.options.web3AuthNetwork,aaProvider:(e=this.options.accountAbstractionConfig)===null||e===void 0?void 0:e.smartAccountType,authBuildEnv:this.options.authBuildEnv}),uB(eG)]);if(r.status==="rejected"){const c=await xE(r.reason);throw Te.error("Failed to fetch project configurations",c),Me.notReady("failed to fetch project configurations",c)}const i=r.value;let s={others:{},default:{}};return!!i.externalWalletAuth&&!((n=this.modalConfig)!==null&&n!==void 0&&n.hideWalletDiscovery)&&(a.status==="fulfilled"?s=a.value:Te.error("Failed to fetch wallet registry",a.reason)),{projectConfig:i,walletRegistry:s}}async initConnectors({connectors:e,projectConfig:n,disabledExternalWallets:r}){const a=await this.filterConnectors({projectConfig:n,disabledExternalWallets:r}),{hasInAppConnectors:i,hasExternalConnectors:s}=await this.checkConnectorAvailability(a),o=e.filter(c=>a.includes(c.name));i&&await this.initInAppAndCachedConnectors(o),s&&(i?(this.loginModal.initExternalWalletContainer(),this.initExternalConnectors(o.filter(c=>c.type===Aa.EXTERNAL&&c.name!==Be.WALLET_CONNECT_V2),{externalWalletsInitialized:!1,showExternalWalletsOnly:!1,externalWalletsVisibility:!1})):await this.initExternalConnectors(o.filter(c=>c.type===Aa.EXTERNAL),{externalWalletsInitialized:!0,showExternalWalletsOnly:!0,externalWalletsVisibility:!0})),this.status===ge.NOT_READY&&(this.status=ge.READY,this.emit(Ue.READY))}async filterConnectors({projectConfig:e,disabledExternalWallets:n}){var r;const a={},i=new Map;for(const l of e.embeddedWalletAuth||[]){const{isDefault:u,authConnection:f,groupedAuthConnectionId:p,authConnectionId:h}=l;u&&(a[f]={name:jBe[f],authConnection:f,authConnectionId:h,groupedAuthConnectionId:p,extraLoginOptions:l.jwtParameters,isDefault:!0,showOnModal:!0}),i.set(p||h,l)}const s={[Be.AUTH]:{label:Be.AUTH,loginMethods:a}};(r=this.modalConfig)!==null&&r!==void 0&&(r=r.connectors)!==null&&r!==void 0&&r[Be.AUTH]&&(this.modalConfig.connectors[Be.AUTH].loginMethods||(this.modalConfig.connectors[Be.AUTH].loginMethods={}));const o=new Set(G7);return Object.keys(this.modalConfig.connectors[Be.AUTH].loginMethods).forEach(l=>{const u=this.modalConfig.connectors[Be.AUTH].loginMethods[l],{authConnectionId:f,groupedAuthConnectionId:p}=u;if(!o.has(l))throw Me.invalidParams(`Invalid auth connection: ${l}`);if(p||f){if(!i.has(p||f))throw Me.invalidParams(`Invalid auth connection config, authConnection: ${l}. Missing AuthConnectionConfig from the dashboard.`);const h=i.get(p||f);this.modalConfig.connectors[Be.AUTH].loginMethods[l]={authConnection:h.authConnection,authConnectionId:h.authConnectionId,groupedAuthConnectionId:h.groupedAuthConnectionId,isDefault:h.isDefault||!1,extraLoginOptions:Q(Q({},h.jwtParameters),u.extraLoginOptions)}}}),this.modalConfig.connectors=Kt(s,Zc(this.modalConfig.connectors||{})),[...new Set([...Object.keys(this.modalConfig.connectors||{}),...this.connectors.map(l=>l.name)])].map(l=>{var u,f,p;const h={label:O_[l]||l.split("-").map(rS).join(" "),showOnModal:!0};this.modalConfig.connectors[l]=Q(Q({},h),((u=this.modalConfig)===null||u===void 0||(u=u.connectors)===null||u===void 0?void 0:u[l])||{});const b=this.getConnector(l);Te.debug("connector config",l,(f=this.modalConfig.connectors)===null||f===void 0||(f=f[l])===null||f===void 0?void 0:f.showOnModal,b);const v=(p=this.modalConfig.connectors)===null||p===void 0?void 0:p[l];if(!b){if(v.showOnModal)throw Me.invalidParams(`Connector ${l} is not configured`);return}if(!v.showOnModal)return;const m=!!e.externalWalletAuth;if(!(b.type===Aa.EXTERNAL&&b.name!==Be.METAMASK&&(!m||n.has(l)))){if(l===Be.WALLET_CONNECT_V2){var T;if(!m||(T=this.modalConfig)!==null&&T!==void 0&&T.hideWalletDiscovery)return}return this.modalConfig.connectors[l]=v,l}}).filter(l=>l!==void 0)}async checkConnectorAvailability(e){const n=this.connectors.some(a=>{var i,s;return a.type!==Aa.IN_APP||((i=this.modalConfig.connectors)===null||i===void 0||(i=i[a.name])===null||i===void 0?void 0:i.showOnModal)!==!0?!1:!!(!((s=this.modalConfig.connectors)!==null&&s!==void 0&&(s=s[a.name])!==null&&s!==void 0&&s.loginMethods)||Object.values(this.modalConfig.connectors[a.name].loginMethods).some(o=>o.showOnModal))});Te.debug(n,this.connectors,e,"hasInAppWallets");const r=e.some(a=>{var i,s;return a===Be.WALLET_CONNECT_V2?!0:((i=this.getConnector(a))===null||i===void 0?void 0:i.type)===Aa.EXTERNAL&&((s=this.modalConfig.connectors)===null||s===void 0||(s=s[a])===null||s===void 0?void 0:s.showOnModal)});return{hasInAppConnectors:n,hasExternalConnectors:r}}async initInAppAndCachedConnectors(e){await Promise.all(e.map(async n=>{const r=n.name;try{if(n.status!==ge.NOT_READY||this.cachedConnector!==r&&n.type===Aa.EXTERNAL)return;this.subscribeToConnectorEvents(n);const c=this.getInitialChainIdForConnector(n),d=super.checkIfAutoConnect(n);if(await n.init({autoConnect:d,chainId:c.chainId}),n.type===Aa.IN_APP){var a,i,s,o;Te.info("connectorInitResults",r);const l=((a=this.modalConfig.connectors[r])===null||a===void 0?void 0:a.loginMethods)||{};this.loginModal.addSocialLogins(r,l,((i=this.options.uiConfig)===null||i===void 0?void 0:i.loginMethodsOrder)||G7,Q(Q({},this.options.uiConfig),{},{loginGridCol:((s=this.options.uiConfig)===null||s===void 0?void 0:s.loginGridCol)||3,primaryButton:((o=this.options.uiConfig)===null||o===void 0?void 0:o.primaryButton)||"socialLogin"}))}}catch(c){Te.error(c,"error while initializing connector ",r)}}))}async initExternalConnectors(e,n){const r={},a={};e.forEach(async i=>{const s=i.name;if(Te.debug("init external wallet",this.cachedConnector,s,i.status),a[s]||(a[s]=new Set),i.connectorNamespace===ui.MULTICHAIN?this.getChainNamespaces().forEach(o=>a[s].add(o)):a[s].add(i.connectorNamespace),i.status===ge.NOT_READY&&this.cachedConnector!==s)try{this.subscribeToConnectorEvents(i);const o=this.getInitialChainIdForConnector(i);await i.init({autoConnect:this.cachedConnector===s,chainId:o.chainId})}catch(o){Te.error(o,"error while initializing connector",s)}if([ge.NOT_READY,ge.READY,ge.CONNECTING].includes(i.status)){const o=this.modalConfig.connectors[s];r[s]=Q(Q({},o),{},{isInjected:i.isInjected,icon:i.icon,chainNamespaces:Array.from(a[s])}),this.loginModal.addWalletLogins(r,{showExternalWalletsOnly:!!n.showExternalWalletsOnly,externalWalletsVisibility:!!n.externalWalletsVisibility,externalWalletsInitialized:!!n.externalWalletsInitialized})}})}}const Nze=Object.freeze(Object.defineProperty({__proto__:null,ANALYTICS_EVENTS:Lt,ANALYTICS_INTEGRATION_TYPE:dB,ANALYTICS_SDK_TYPE:T_,AUTH_CONNECTION:$e,Analytics:cB,BUTTON_POSITION:d5e,BaseConnector:Hp,BaseEvmConnector:wT,BaseProvider:Qd,BaseSolanaConnector:Cj,BiconomySmartAccount:Wx,CHAIN_NAMESPACES:Qe,CONFIRMATION_STRATEGY:c5e,CONNECTOR_CATEGORY:Aa,CONNECTOR_EVENTS:Ue,CONNECTOR_NAMES:O_,CONNECTOR_NAMESPACES:ui,CONNECTOR_STATUS:ge,CommonJRPCProvider:jp,CommonPrivateKeyProvider:om,DEFAULT_EIP155_METHODS:ST,DEFAULT_EIP_155_EVENTS:CT,DEFAULT_SOLANA_EVENTS:IT,DEFAULT_SOLANA_METHODS:AT,EIP1193_EVENTS:I_,EVM_CONNECTORS:x5,EVM_PLUGINS:ET,KernelSmartAccount:Gx,LOGIN_MODE:F6,MULTI_CHAIN_CONNECTORS:T5,MetamaskSmartAccount:Xx,NFTCheckoutPluginError:hs,NexusSmartAccount:Qx,PLUGIN_EVENTS:ql,PLUGIN_NAMESPACES:vT,PLUGIN_STATUS:ki,SMART_ACCOUNT:xr,SMART_ACCOUNT_WALLET_SCOPE:SL,SOLANA_CAIP_CHAIN_MAP:E5,SOLANA_CONNECTORS:mB,SOLANA_PLUGINS:xj,SafeSmartAccount:eS,TrustSmartAccount:tS,UX_MODE:W0,WALLET_CONNECTORS:Be,WEB3AUTH_NETWORK:Wf,WEB3AUTH_STATE_STORAGE_KEY:Q4,WIDGET_TYPE:Z1,WalletConnectV2Provider:tu,WalletInitializationError:Me,WalletLoginError:Pe,WalletOperationsError:ci,WalletProviderError:bs,WalletServicesPluginError:nn,WalletStandardProvider:Fj,Web3Auth:Uje,Web3AuthError:Cr,Web3AuthNoModal:Aj,accountAbstractionProvider:YW,authConnector:gB,checkIfTokenIsExpired:h3,clearToken:gT,cloneDeep:Zc,createConfigMiddleware:_T,createEthChainIdMiddleware:gq,createEthChainSwitchMiddleware:mq,createEthJsonRpcClient:vq,createEthMiddleware:yq,createEthProviderConfigMiddleware:wq,createGenericJRPCMiddleware:cs,createGetAccountsMiddleware:Lj,createMipd:Oj,createRequestAccountsMiddleware:Bj,createSolanaChainIdMiddleware:Rj,createSolanaJsonRpcClient:$j,createSolanaMiddleware:TT,createSolanaMipd:Mj,createSolanaProviderConfigMiddleware:Dj,createWalletMiddleware:bq,defaultConnectorsModalConfig:QW,fetchProjectConfig:x_,fetchWalletRegistry:uB,getAaAnalyticsProperties:fB,getCaipChainId:Xc,getErrorAnalyticsProperties:H1,getHostname:G2,getNamespacesFromChains:OT,getRequiredNamespaces:kT,getSavedToken:b3,getSolanaChainByChainConfig:xT,getSupportedEventsByNamespace:PT,getSupportedMethodsByNamespace:MT,getWalletConnectV2Settings:NT,getWalletServicesAnalyticsProperties:pB,getWhitelabelAnalyticsProperties:A_,hasSolanaWalletStandardFeatures:jj,injectedEvmConnector:Ij,isBrowser:Xb,isHexStrict:Zb,log:Te,metaMaskConnector:Tj,normalizeWalletName:S_,saveToken:y3,sdkVersion:C_,signerHost:lB,storageAvailable:V6,toEoaProvider:JW,version:XW,walletConnectV2Connector:_q,walletRegistryUrl:eG,walletServicesPlugin:Sj,walletStandardConnector:Uj,withAbort:ms},Symbol.toStringTag,{value:"Module"})),jje=Object.freeze(Object.defineProperty({__proto__:null,BaseProvider:Qd,CommonJRPCProvider:jp,CommonPrivateKeyProvider:om,EIP1193_EVENTS:I_},Symbol.toStringTag,{value:"Module"})),Hje=Object.freeze(Object.defineProperty({__proto__:null,createMipd:Oj,injectedEvmConnector:Ij},Symbol.toStringTag,{value:"Module"})),zje=Object.freeze(Object.defineProperty({__proto__:null,DEFAULT_EIP155_METHODS:ST,DEFAULT_EIP_155_EVENTS:CT,DEFAULT_SOLANA_EVENTS:IT,DEFAULT_SOLANA_METHODS:AT,WalletConnectV2Provider:tu,getNamespacesFromChains:OT,getRequiredNamespaces:kT,getSupportedEventsByNamespace:PT,getSupportedMethodsByNamespace:MT,getWalletConnectV2Settings:NT,walletConnectV2Connector:_q},Symbol.toStringTag,{value:"Module"})),qje=Object.freeze(Object.defineProperty({__proto__:null,BiconomySmartAccount:Wx,KernelSmartAccount:Gx,MetamaskSmartAccount:Xx,NexusSmartAccount:Qx,SMART_ACCOUNT:xr,SafeSmartAccount:eS,TrustSmartAccount:tS,accountAbstractionProvider:YW,toEoaProvider:JW},Symbol.toStringTag,{value:"Module"}));export{d5e as $,Noe as A,ce as B,U6 as C,$o as D,o3e as E,uze as F,tP as G,f5 as H,KH as I,Zye as J,c3e as K,fze as L,lze as M,A3 as N,pze as O,e_ as P,hze as Q,Yi as R,Nm as S,Rm as T,Wl as U,Mm as V,Gf as W,tte as X,rHe as Y,l0 as Z,SD as _,w1e as a,t1 as a0,Tr as a1,MHe as a2,c5e as a3,OHe as a4,Nze as a5,$i as b,yx as c,Kq as d,K3 as e,FK as f,cHe as g,Pze as h,oHe as i,fh as j,rn as k,hg as l,wn as m,zs as n,_5 as o,yoe as p,iB as q,Hh as r,e0 as s,Cc as t,dHe as u,g1e as v,o1e as w,AL as x,a_ as y,Jf as z};
